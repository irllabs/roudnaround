/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={5365:t=>{t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}},6161:t=>{t.exports=function(t){if(Array.isArray(t))return t}},9372:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},5816:t=>{function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}},1238:t=>{t.exports=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}},4768:t=>{t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},7613:(t,e,n)=>{var r=n(6161),i=n(1238),o=n(4595),a=n(4768);t.exports=function(t,e){return r(t)||i(t,e)||o(t,e)||a()}},4595:(t,e,n)=>{var r=n(5365);t.exports=function(t,e){if(t){if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}},2583:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=n(9312),a=n(9766),s=n(1178),u=n(1549),l=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),c=new a.ErrorFactory("app","Firebase",l),h="@firebase/app",f="[DEFAULT]",p=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.Logger("@firebase/app"),m=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=a.deepCopy(t),this.container=new s.ComponentContainer(e.name),this._addComponent(new s.Component("app",(function(){return u}),"PUBLIC"));try{for(var l=o.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next()){var h=c.value;this._addComponent(h)}}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var s=o.name;if("string"!=typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if(a.contains(e,s))throw c.create("duplicate-app",{appName:s});var u=new t(n,o,r);return e[s]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=p[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}l(new s.Component(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw c.create("invalid-log-argument",{appName:name});u.setUserLogHandler(t,e)},apps:null,SDK_VERSION:"7.20.0",INTERNAL:{registerComponent:l,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!a.contains(e,t))throw c.create("no-app",{appName:t});return e[t]}function l(s){var u,l,h=s.name;if(n.has(h))return d.debug("There were multiple attempts to register component "+h+"."),"PUBLIC"===s.type?r[h]:null;if(n.set(h,s),"PUBLIC"===s.type){var f=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[h])throw c.create("invalid-app-argument",{appName:h});return t[h]()};void 0!==s.serviceProps&&a.deepExtend(f,s.serviceProps),r[h]=f,t.prototype[h]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,h).apply(this,s.multipleInstances?t:[])}}try{for(var p=o.__values(Object.keys(e)),m=p.next();!m.done;m=p.next()){var v=m.value;e[v]._addComponent(s)}}catch(t){u={error:t}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(u)throw u.error}}return"PUBLIC"===s.type?r[h]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(m);return e.INTERNAL=o.__assign(o.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){a.deepExtend(e,t)},createSubscribe:a.createSubscribe,ErrorFactory:a.ErrorFactory,deepExtend:a.deepExtend}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if(a.isBrowser()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return a.isNode()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),b.apply(void 0,t)};var _=v;!function(t,e){t.INTERNAL.registerComponent(new s.Component("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(h,"0.6.11",void 0),t.registerVersion("fire-js","")}(_),e.default=_,e.firebase=_},6134:(t,e,n)=>{(function(){var t,e=n(2583).default,r="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g,t];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}return globalThis}(this);function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var n=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in n||(n[a]={}),n=n[a]}(e=e(o=n[t=t[t.length-1]]))!=o&&null!=e&&r(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.v),reject:t(this.g)}},e.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.m(t):this.h(t)}},e.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Pa(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Pa(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Pa(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},u=this||self,l=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(){}function f(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function _(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function x(t,e,n){return(x=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:_).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now||function(){return+new Date};function S(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function T(t,e,n){this.code=C+t,this.message=e||O[t]||"",this.a=n||null}function A(t){var e=t&&t.code;return e?new T(e.substring(C.length),t.message,t.serverResponse):null}S(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var M,C="auth/",O={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},P={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function k(t){for(var e in P)if(P[e].id===t)return{firebaseEndpoint:(t=P[e]).Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function I(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function L(t){if(Error.captureStackTrace)Error.captureStackTrace(this,L);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function R(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");L.call(this,n+t[r])}function D(t,e){throw new R("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function N(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function F(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function j(){this.b=this.a=null}M=k("__EID__")?"__EID__":void 0,S(L,Error),L.prototype.name="CustomError",S(R,L),R.prototype.name="AssertionError",N.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new N((function(){return new B}),(function(t){t.reset()}));function z(){var t=ge,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}j.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var V=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},G=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},W=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function X(t,e){return 0<=V(t,e)}function Y(t,e){var n;return(n=0<=(e=V(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Q(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Z(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,J=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var lt=u.navigator;if(lt){var ct=lt.userAgent;if(ct){$=ct;break t}}$=""}function ht(t){return st($,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function dt(t){var e,n={};for(e in t)n[e]=t[e];return n}var mt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function vt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<mt.length;o++)n=mt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function gt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||u).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;D("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===xt&&e||"",this.b=_t}function bt(t){return t instanceof yt&&t.constructor===yt&&t.b===_t?t.a:(D("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.sa=!0,yt.prototype.ra=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t={},xt={},wt=new yt(xt,"");function Et(t,e){this.a=t===Ot&&e||"",this.b=Ct}function St(t){return t instanceof Et&&t.constructor===Et&&t.b===Ct?t.a:(D("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function Tt(t,e){var n=bt(t);if(!Mt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?bt(t):encodeURIComponent(String(t))})),new Et(Ot,t)}Et.prototype.sa=!0,Et.prototype.ra=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,Mt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Ct={},Ot={};function Pt(t,e){this.a=t===Dt&&e||"",this.b=Rt}function kt(t){return t instanceof Pt&&t.constructor===Pt&&t.b===Rt?t.a:(D("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Pt.prototype.sa=!0,Pt.prototype.ra=function(){return this.a.toString()},Pt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var It=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Lt(t){return t instanceof Pt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),It.test(t)||(t="about:invalid#zClosurez"),new Pt(Dt,t))}var Rt={},Dt={};function Nt(){this.a="",this.b=jt}function Ft(t){return t instanceof Nt&&t.constructor===Nt&&t.b===jt?t.a:(D("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}Nt.prototype.sa=!0,Nt.prototype.ra=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var jt={};function Ut(t){var e=new Nt;return e.a=t,e}Ut("<!DOCTYPE html>");var zt=Ut("");function Bt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Vt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ut("<br>"),Ht[" "]=h;var Gt,Wt,qt=ht("Opera"),Xt=ht("Trident")||ht("MSIE"),Yt=ht("Edge"),Qt=Yt||Xt,Zt=ht("Gecko")&&!(st($.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Kt=st($.toLowerCase(),"webkit")&&!ht("Edge");function $t(){var t=u.document;return t?t.documentMode:void 0}t:{var Jt="",te=(Wt=$,Zt?/rv:([^\);]+)(\)|;)/.exec(Wt):Yt?/Edge\/([\d\.]+)/.exec(Wt):Xt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Kt?/WebKit\/(\S+)/.exec(Wt):qt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(te&&(Jt=te?te[1]:""),Xt){var ee=$t();if(null!=ee&&ee>parseFloat(Jt)){Gt=String(ee);break t}}Gt=Jt}var ne,re={};function ie(t){return function(t,e){var n=re;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=J(String(Gt)).split("."),r=J(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}ne=u.document&&Xt?$t():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var oe=!Xt||9<=Number(ne);function ae(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function se(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.sa&&(e=e.ra()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:ce.hasOwnProperty(n)?t.setAttribute(ce[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,le,ce={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!p(o)||m(o)&&0<o.nodeType?r(o):H(pe(o)?K(o):o,r)}}function fe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){if(t&&"number"==typeof t.length){if(m(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}function de(t){u.setTimeout((function(){throw t}),0)}function me(t,e){le||function(){if(u.Promise&&u.Promise.resolve){var t=u.Promise.resolve(void 0);le=function(){t.then(ye)}}else le=function(){var t=ye;!d(u.setImmediate)||u.Window&&u.Window.prototype&&!ht("Edge")&&u.Window.prototype.setImmediate==u.setImmediate?(ue||(ue=function(){var t=u.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=fe(document,"IFRAME");t.style.display="none",function(t){var e=new Et(Ot,bt(wt));gt(t,"HTMLIFrameElement"),t.src=St(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Ft(zt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=x((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Fb;n.Fb=null,t()}},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}return function(t){u.setTimeout(t,0)}}()),ue(t)):u.setImmediate(t)}}(),ve||(le(),ve=!0),ge.add(t,e)}var ve=!1,ge=new j;function ye(){for(var t;t=z();){try{t.a.call(t.b)}catch(t){de(t)}F(U,t)}ve=!1}function be(t,e){if(this.a=_e,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Le(n,xe,t)}),(function(t){if(!(t instanceof ze))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,we,t)}))}catch(t){Le(this,we,t)}}var _e=0,xe=2,we=3;function Ee(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ee.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Se=new N((function(){return new Ee}),(function(t){t.reset()}));function Te(t,e,n){var r=Se.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof be)return t;var e=new be(h);return Le(e,xe,t),e}function Me(t){return new be((function(e,n){n(t)}))}function Ce(t,e,n){Re(t,e,n,null)||me(w(e,t))}function Oe(t){return new be((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Ob:!0,value:o}:{Ob:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Ce(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==_e)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==_e&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ne(n),Fe(n,i,we,e)))}t.c=null}else Le(t,we,e)}function ke(t,e){t.b||t.a!=xe&&t.a!=we||De(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,e,n,r){var i=Te(null,null,null);return i.a=new be((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof ze?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,ke(t,i),i.a}function Le(t,e,n){t.a==_e&&(t===n&&(e=we,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Re(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,De(t),e!=we||n instanceof ze||function(t,e){t.g=!0,me((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function Re(t,e,n,r){if(t instanceof be)return ke(t,Te(e||h,n||null,r)),!0;if(I(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function De(t){t.h||(t.h=!0,me(t.fc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==we&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,je(e,n,r);else try{e.c?e.g.call(e.f):je(e,n,r)}catch(t){Ue.call(null,t)}F(Se,e)}function je(t,e,n){e==xe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}be.prototype.then=function(t,e,n){return Ie(this,d(t)?t:null,d(e)?e:null,n)},be.prototype.$goog_Thenable=!0,(t=be.prototype).na=function(t,e){return(t=Te(t,t,e)).c=!0,ke(this,t),this},t.s=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){if(this.a==_e){var e=new ze(t);me((function(){Pe(this,e)}),this)}},t.Zc=function(t){this.a=_e,Le(this,xe,t)},t.$c=function(t){this.a=_e,Le(this,we,t)},t.fc=function(){for(var t;t=Ne(this);)Fe(this,t,this.a,this.i);this.h=!1};var Ue=de;function ze(t){L.call(this,t)}function Be(){0!=Ve&&(He[v(this)]=this),this.xa=this.xa,this.oa=this.oa}S(ze,L),ze.prototype.name="cancel";var Ve=0,He={};function Ge(t){if(!t.xa&&(t.xa=!0,t.Da(),0!=Ve)){var e=v(t);if(0!=Ve&&t.oa&&0<t.oa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete He[e]}}Be.prototype.xa=!1,Be.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var We=Object.freeze||function(t){return t},qe=!Xt||9<=Number(ne),Xe=Xt&&!ie("9"),Ye=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",h,e),u.removeEventListener("test",h,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Zt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ke[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},S(Ze,Qe);var Ke=We({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Xe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var $e="closure_listenable_"+(1e6*Math.random()|0),Je=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++Je,this.va=this.Oa=!1}function en(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&Y(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Oa=!1)):((e=new tn(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)cn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[$e]?xn(t,e,n,m(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=m(i)?!!i.capture:!!i,s=gn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=vn,e=qe?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Ye||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(pn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else n=bn(n),t&&t[$e]?wn(t,e,n,m(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=bn(n),t&&t[$e]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=gn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.va){var e=t.src;if(e&&e[$e])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(pn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=gn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function pn(t){return t in sn?sn[t]:sn[t]="on"+t}function dn(t,e,n,r){var i=!0;if((t=gn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=mn(o,r),i=i&&!1!==o)}return i}function mn(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&fn(t),n.call(r,e)}function vn(t,e){if(t.va)return!0;if(!qe){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=dn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=dn(r[i],t,!1,e),n=n&&o}return n}return mn(t,new Ze(e,this))}function gn(t){return(t=t[an])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){Be.call(this),this.v=new nn(this),this.$b=this,this.fb=null}function xn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function En(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.va&&a.capture==n){var s=a.listener,u=a.Ua||a.src;a.Oa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function Sn(t,e,n){if(d(t))n&&(t=x(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=x(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Tn(t){var e=null;return new be((function(n,r){-1==(e=Sn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw u.clearTimeout(e),t}))}function An(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Mn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Cn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Cn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Pn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Pn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Pn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}S(_n,Be),_n.prototype[$e]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;vt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=En(a,r,!0,t)&&i}if(i=En(a=t.b=n,r,!0,t)&&i,i=En(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=En(a=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=Cn.prototype).V=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Pn(this.b,t)?this.b[t]:e},t.set=function(t,e){Pn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var kn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function In(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof In?(this.i=void 0!==e?e:t.i,Ln(this,t.f),this.l=t.l,this.a=t.a,Rn(this,t.g),this.c=t.c,Dn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(kn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=zn(n[2]||""),this.a=zn(n[3]||"",!0),Rn(this,n[4]),this.c=zn(n[5]||"",!0),Dn(this,n[6]||"",!0),this.h=zn(n[7]||"")):(this.i=!!e,this.b=new Yn(null,this.i))}function Ln(t,e,n){t.f=n?zn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Rn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Dn(t,e,n){e instanceof Yn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Kn(this,e),Jn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Bn(e,qn)),t.b=new Yn(e,t.i))}function Nn(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function jn(t){return t instanceof In?new In(t):new In(t,void 0)}function Un(t,e,n,r){var i=new In(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Rn(i,n),r&&(i.c=r),i}function zn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Bn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Vn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Vn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}In.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Bn(e,Hn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Bn(e,Hn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Bn(n,"/"==n.charAt(0)?Wn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Bn(n,Xn)),t.join("")},In.prototype.resolve=function(t){var e=new In(this),n=!!t.f;n?Ln(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.c;if(n)Rn(e,t.g);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.a&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.b.toString(),n?Dn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Hn=/[#\/\?@]/g,Gn=/[#\?:]/g,Wn=/[#\?]/g,qn=/[#\?@]/g,Xn=/#/g;function Yn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Cn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Mn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Yn(null,void 0);t=An(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Jn(n,i,o):n.add(i,o)}return n}function Kn(t,e){Qn(t),e=er(t,e),Pn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Pn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function $n(t,e){return Qn(t),e=er(t,e),Pn(t.a.b,e)}function Jn(t,e,n){Kn(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),K(n)),t.b+=n.length)}function tr(t){var e=new Yn;return e.c=t.c,t.a&&(e.a=new Cn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return ir(new rr,t,e),e.join("")}function rr(){}function ir(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),ir(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),sr(r,n),n.push(":"),ir(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":sr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Yn.prototype).add=function(t,e){Qn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Qn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=Z(e,this.a.get(er(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=Z(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,$n(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var or={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ar=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function sr(t,e){e.push('"',t.replace(ar,(function(t){var e=or[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),or[t]=e),e})),'"')}function ur(){var t=Cr();return Xt&&!!ne&&11==ne||/Edge\/\d+/.test(t)}function lr(){return u.window&&u.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||u.window;var n="about:blank";t&&(n=kt(Lt(t))),e.location.href=n}function hr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<hr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function fr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function pr(t){t=t||u.window;try{t.close()}catch(t){}}function dr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Tr(Cr())==Er&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Pt?n:Lt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(gt(a=fe(document,"A"),"HTMLAnchorElement"),e instanceof Pt||e instanceof Pt||(e="object"==typeof e&&e.sa?e.ra():String(e),It.test(e)||(e="about:invalid#zClosurez"),e=new Pt(Dt,e)),a.href=kt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=kt(e),a&&(Qt&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Ut('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Vt(t)+'">'),r=a.document)&&(r.write(Ft(t)),r.close())):(a=r.open(kt(e),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var mr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new be((function(e){"complete"==u.document.readyState?e():(t=function(){e()},cn(window,"load",t))})).s((function(e){throw hn(window,"load",t),e}))}function yr(t){return t=t||Cr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function br(){var t=u.window;try{return!(!t||t==t.top)}catch(t){return!1}}function _r(){return void 0!==u.WorkerGlobalScope&&"function"==typeof u.importScripts}function xr(){return e.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":e.INTERNAL.hasOwnProperty("node")?"Node":_r()?"Worker":"Browser"}function wr(){var t=xr();return"ReactNative"===t||"Node"===t}var Er="Firefox",Sr="Chrome";function Tr(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?Er:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Sr:"Safari"}var Ar={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function Mr(t,e){e=e||[];var n,r=[],i={};for(n in Ar)i[Ar[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=xr())?r=Tr(i=Cr()):"Worker"===r&&(r=Tr(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return u.navigator&&u.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||u;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Pr(){try{var t=u.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!ur()||!!u.indexedDB}catch(t){return _r()&&!!u.indexedDB}return!1}function kr(){return(Ir()||"chrome-extension:"===Lr()||yr())&&!wr()&&Pr()&&!_r()}function Ir(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return u.location&&u.location.protocol||null}function Rr(t){return!fr(t=t||Cr())&&Tr(t)!=Er}function Dr(t){return void 0===t?null:nr(t)}function Nr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ur(t){return"Safari"!=Tr(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function zr(){var t=u.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Br(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=xr(),this.b=fr(t)||"ReactNative"===e}function Vr(){var t=u.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Hr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Gr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Wr(){return!(!Or("fireauth.oauthhelper",u)&&!Or("fireauth.iframe",u))}Br.prototype.get=function(){var t=u.navigator;return!t||"boolean"!=typeof t.onLine||!Ir()&&"chrome-extension:"!==Lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var qr,Xr={};function Yr(t){Xr[t]||(Xr[t]=!0,Hr(t))}try{var Qr={};Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Qr,"abcd",{configurable:!0,enumerable:!0,value:2}),qr=2==Qr.abcd}catch(Wt){qr=!1}function Zr(t,e,n){qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Kr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Zr(t,n,e[n])}function $r(t){var e={};return Kr(e,t),e}function Jr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Zr(e,n,Jr(t[n]));return e}function ti(t){var e=t&&(t[oi]?"phone":null);if(!(e&&t&&t[ii]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Zr(this,"uid",t[ii]),Zr(this,"displayName",t[ni]||null);var n=null;t[ri]&&(n=new Date(t[ri]).toUTCString()),Zr(this,"enrollmentTime",n),Zr(this,"factorId",e)}function ei(t){try{var e=new ai(t)}catch(t){e=null}return e}ti.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ni="displayName",ri="enrolledAt",ii="mfaEnrollmentId",oi="phoneInfo";function ai(t){ti.call(this,t),Zr(this,"phoneNumber",t[oi])}function si(t){var e={},n=t[hi],r=t[pi],i=t[di];if(t=ei(t[fi]),!i||i!=li&&i!=ci&&!n||i==ci&&!r||i==ui&&!t)throw Error("Invalid checkActionCode response!");i==ci?(e[vi]=n||null,e[yi]=n||null,e[mi]=r):(e[vi]=r||null,e[yi]=r||null,e[mi]=n||null),e[gi]=t||null,Zr(this,_i,i),Zr(this,bi,Jr(e))}S(ai,ti),ai.prototype.w=function(){var t=ai.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ui="REVERT_SECOND_FACTOR_ADDITION",li="EMAIL_SIGNIN",ci="VERIFY_AND_CHANGE_EMAIL",hi="email",fi="mfaInfo",pi="newEmail",di="requestType",mi="email",vi="fromEmail",gi="multiFactorInfo",yi="previousEmail",bi="data",_i="operation";function xi(t){var e=Fn(t=jn(t),wi)||null,n=Fn(t,Ei)||null,r=Fn(t,Ai)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new T("argument-error",wi+", "+Ei+"and "+Ai+" are required in a valid action code URL.");Kr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Si)||null,languageCode:Fn(t,Ti)||null,tenantId:Fn(t,Mi)||null})}var wi="apiKey",Ei="oobCode",Si="continueUrl",Ti="languageCode",Ai="mode",Mi="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ui,signIn:li,verifyAndChangeEmail:ci,verifyEmail:"VERIFY_EMAIL"};function Oi(t){try{return new xi(t)}catch(t){return null}}function Pi(t){var e=t[Di];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[ki];if(n&&"object"==typeof n){e=n[ji];var r=n[Ni];if(n=n[Fi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",Ni+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Fi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",ki+" property must be a non null object when specified.");if(this.f=null,(e=t[Ri])&&"object"==typeof e){if("string"==typeof(e=e[Ui])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Ui+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Ri+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new T("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ii])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ii+" property must be a non empty string when specified.");this.i=t||null}var ki="android",Ii="dynamicLinkDomain",Li="handleCodeInApp",Ri="iOS",Di="url",Ni="installApp",Fi="minimumVersion",ji="packageName",Ui="bundleId";function zi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Bi=null;function Vi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,E(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Hi(t){try{return new Vi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Bi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Bi){Bi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Bi[o]&&(Bi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}Vi.prototype.S=function(){return this.f},Vi.prototype.i=function(){return this.b},Vi.prototype.toString=function(){return this.g};var Wi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),qi=["client_id","response_type","scope","redirect_uri","state"],Xi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:qi},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:qi},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:qi},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:Wi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Yi(t){for(var e in Xi)if(Xi[e].fa==t)return Xi[e];return null}function Qi(t){var e={};e["facebook.com"]=to,e["google.com"]=no,e["github.com"]=eo,e["twitter.com"]=ro;var n=t&&t[Ki];try{if(n)return e[n]?new e[n](t):new Ji(t);if(void 0!==t[Zi])return new $i(t)}catch(t){}return null}var Zi="idToken",Ki="providerId";function $i(t){var e=t[Ki];if(!e&&t[Zi]){var n=Hi(t[Zi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Zr(this,"providerId",e),Zr(this,"isNewUser",n)}function Ji(t){$i.call(this,t),Zr(this,"profile",Jr((t=Fr(t.rawUserInfo||"{}"))||{}))}function to(t){if(Ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",this.profile&&this.profile.login||null)}function no(t){if(Ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ro(t){if(Ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Zr(this,"username",t.screenName||null)}function io(t){var e=jn(t),n=Fn(e,"link"),r=Fn(jn(n),"link");return e=Fn(e,"deep_link_id"),Fn(jn(e),"link")||e||r||n||t}function oo(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:so}S(Ji,$i),S(to,Ji),S(eo,Ji),S(no,Ji),S(ro,Ji);var ao="enroll",so="signin";function uo(){}function lo(t,e){return t.then((function(t){if(t[Ka]){var n=Hi(t[Ka]);if(!n||e!=n.h)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==C+"user-not-found"?new T("user-mismatch"):t}))}function co(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Zr(this,"providerId",t),Zr(this,"signInMethod",t)}function ho(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function fo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new co(t.providerId,t.pendingToken)}catch(t){}return null}function po(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Zr(this,"idToken",e.idToken),e.accessToken&&Zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Zr(this,"accessToken",e.oauthToken),Zr(this,"secret",e.oauthTokenSecret)}Zr(this,"providerId",t),Zr(this,"signInMethod",n)}function mo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function vo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new po(t.providerId,e,t.signInMethod)}catch(t){}}return null}function go(t,e){this.Pc=e||[],Kr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Yi(t)||{}).Ja||null,this.nb=null}function yo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');go.call(this,t,[])}function bo(t){go.call(this,t,qi),this.a=[]}function _o(){bo.call(this,"facebook.com")}function xo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function wo(){bo.call(this,"github.com")}function Eo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new wo).credential({accessToken:e})}function So(){bo.call(this,"google.com"),this.Ca("profile")}function To(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function Ao(){go.call(this,"twitter.com",Wi)}function Mo(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new po("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,Zr(this,"providerId","password"),Zr(this,"signInMethod",n===Po.EMAIL_LINK_SIGN_IN_METHOD?Po.EMAIL_LINK_SIGN_IN_METHOD:Po.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Oo(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Po(){Kr(this,{providerId:"password",isOAuthProvider:!1})}function ko(t,e){if(!(e=Io(e)))throw new T("argument-error","Invalid email link!");return new Co(t,e.code,Po.EMAIL_LINK_SIGN_IN_METHOD)}function Io(t){return(t=Oi(t=io(t)))&&t.operation===li?t:null}function Lo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new T("internal-error");this.a=t,Zr(this,"providerId","phone"),this.fa="phone",Zr(this,"signInMethod","phone")}function Ro(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Lo(e)}return null}function Do(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function No(t){try{this.a=t||e.auth()}catch(t){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Kr(this,{providerId:"phone",isOAuthProvider:!1})}function Fo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Lo({cb:t,bb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Lo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return To(o,n);case"facebook.com":return xo(n);case"github.com":return Eo(n);case"twitter.com":return Mo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new co(e,a):new po(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new bo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Uo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function zo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function Bo(t){return(t=t||{}).type?new zo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&A(t.error),t.postBody,t.tenantId):null}function Vo(){this.b=null,this.a=[]}oo.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},oo.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},uo.prototype.ja=function(){},uo.prototype.b=function(){},uo.prototype.c=function(){},uo.prototype.w=function(){},co.prototype.ja=function(t){return ys(t,ho(this))},co.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,bs(t,n)},co.prototype.c=function(t,e){return lo(_s(t,ho(this)),e)},co.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},po.prototype.ja=function(t){return ys(t,mo(this))},po.prototype.b=function(t,e){var n=mo(this);return n.idToken=e,bs(t,n)},po.prototype.c=function(t,e){return lo(_s(t,mo(this)),e)},po.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},go.prototype.Ka=function(t){return this.Hb=dt(t),this},S(yo,go),S(bo,go),bo.prototype.Ca=function(t){return X(this.a,t)||this.a.push(t),this},bo.prototype.Pb=function(){return K(this.a)},bo.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new po(this.providerId,n,this.providerId)},S(_o,bo),Zr(_o,"PROVIDER_ID","facebook.com"),Zr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),S(wo,bo),Zr(wo,"PROVIDER_ID","github.com"),Zr(wo,"GITHUB_SIGN_IN_METHOD","github.com"),S(So,bo),Zr(So,"PROVIDER_ID","google.com"),Zr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),S(Ao,go),Zr(Ao,"PROVIDER_ID","twitter.com"),Zr(Ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ja=function(t){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Cs,{email:this.a,oobCode:this.f}):eu(t,Zs,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Po.EMAIL_LINK_SIGN_IN_METHOD?eu(t,Os,{idToken:e,email:this.a,oobCode:this.f}):eu(t,Vs,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return lo(this.ja(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Kr(Po,{PROVIDER_ID:"password"}),Kr(Po,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Kr(Po,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Lo.prototype.ja=function(t){return t.eb(Do(this))},Lo.prototype.b=function(t,e){var n=Do(this);return n.idToken=e,eu(t,$s,n)},Lo.prototype.c=function(t,e){var n=Do(this);return n.operation="REAUTH",lo(t=eu(t,Js,n),e)},Lo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},No.prototype.eb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=m(t)?t.session:null,o=m(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return eu(t,Gs,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==so?i.Ha().then((function(e){return function(t,e){return eu(t,Ws,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return eu(t,zs,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Kr(No,{PROVIDER_ID:"phone"}),Kr(No,{PHONE_SIGN_IN_METHOD:"phone"}),zo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},zo.prototype.S=function(){return this.h},zo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,Go=null;function Wo(t){var e="unauthorized-domain",n=void 0,r=jn(t);t=r.a,"chrome-extension"==(r=r.f)?n=Bt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Bt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function qo(t,e,n){T.call(this,t,n),(t=e||{}).Ib&&Zr(this,"email",t.Ib),t.ea&&Zr(this,"phoneNumber",t.ea),t.credential&&Zr(this,"credential",t.credential),t.Yb&&Zr(this,"tenantId",t.Yb)}function Xo(t){if(t.code){var e=t.code||"";0==e.indexOf(C)&&(e=e.substring(C.length));var n={credential:jo(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new qo(e,n,t.message)}return null}function Yo(){}function Qo(t){return t.c||(t.c=t.b())}function Zo(){}function Ko(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function $o(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=x(this.pc,this),this.a.onerror=x(this.Rb,this),this.a.onprogress=x(this.qc,this),this.a.ontimeout=x(this.uc,this)}function ta(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ea(t,e,n){this.reset(t,e,n,void 0,void 0)}function na(t){this.f=t,this.b=this.c=this.a=null}function ra(t,e){this.name=t,this.value=e}S(Wo,T),S(qo,T),qo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&vt(t,e),t},qo.prototype.toJSON=function(){return this.w()},Yo.prototype.c=null,S(Zo,Yo),Zo.prototype.a=function(){var t=Ko(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return Ko(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Zo,S($o,Yo),$o.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},$o.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ta(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",ta(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,ta(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ea.prototype.a=null,ea.prototype.reset=function(t,e,n,r,i){r||E(),delete this.a},ra.prototype.toString=function(){return this.name};var ia=new ra("SEVERE",1e3),oa=new ra("WARNING",900),aa=new ra("CONFIG",700),sa=new ra("FINE",500);function ua(t){return t.c?t.c:t.a?ua(t.a):(D("Root logger has no level set."),null)}na.prototype.log=function(t,e,n){if(t.value>=ua(this).value)for(d(e)&&(e=e()),t=new ea(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var la={},ca=null;function ha(t){var e;if(ca||(ca=new na(""),la[""]=ca,ca.c=aa),!(e=la[t])){e=new na(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=ha(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,la[t]=e}return e}function fa(t,e){t&&t.log(sa,e,void 0)}function pa(t){this.f=t}function da(t){_n.call(this),this.o=t,this.readyState=ma,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ha("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}S(pa,Yo),pa.prototype.a=function(){return new da(this.f)},pa.prototype.b=function(t){return function(){return t}}({}),S(da,_n);var ma=0;function va(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ga(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,ya(t)}function ya(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ba(t){_n.call(this),this.headers=new Cn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=_a,this.u=this.R=!1}(t=da.prototype).open=function(t,e){if(this.readyState!=ma)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,ya(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ga(this,!1)),this.readyState=ma},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,ya(this)),this.a&&(this.readyState=3,ya(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==u.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,va(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ga(this,!0):ya(this),3==this.readyState&&va(this)}},t.sc=function(t){this.a&&(this.response=this.responseText=t,ga(this,!0))},t.rc=function(t){this.a&&(this.response=t,ga(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(oa,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ga(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(oa,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(oa,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},S(ba,_n);var _a="";ba.prototype.b=ha("goog.net.XhrIo");var xa=/^https?$/i,wa=["POST","PUT"];function Ea(t){return"content-type"==t.toLowerCase()}function Sa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Ta(t),Ma(t)}function Ta(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Aa(t){if(t.c&&void 0!==s)if(t.A[1]&&4==Oa(t)&&2==Pa(t))fa(t.b,ka(t,"Local request error detected and ignored"));else if(t.i&&4==Oa(t))Sn(t.Ub,0,t);else if(t.dispatchEvent("readystatechange"),4==Oa(t)){fa(t.b,ka(t,"Request complete")),t.c=!1;try{var e,n=Pa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(kn)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!xa.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var l=2<Oa(t)?t.a.statusText:""}catch(e){fa(t.b,"Can not get status: "+e.message),l=""}t.h=l+" ["+Pa(t)+"]",Ta(t)}}finally{Ma(t)}}}function Ma(t,e){if(t.a){Ca(t);var n=t.a,r=t.A[0]?h:null;t.a=null,t.A=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(ia,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ca(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(u.clearTimeout(t.o),t.o=null)}function Oa(t){return t.a?t.a.readyState:0}function Pa(t){try{return 2<Oa(t)?t.a.status:-1}catch(t){return-1}}function ka(t,e){return e+" ["+t.P+" "+t.l+" "+Pa(t)+"]"}function Ia(t){var e=Ha;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function La(t,e,n){t.a=!0,t.c=n,t.f=!e,Fa(t)}function Ra(t){if(t.a){if(!t.m)throw new ja(t);t.m=!1}}function Da(t,e,n,r){t.g.push([e,n,r]),t.a&&Fa(t)}function Na(t){return q(t.g,(function(t){return d(t[1])}))}function Fa(t){if(t.h&&t.a&&Na(t)){var e=t.h,n=Ba[e];n&&(u.clearTimeout(n.a),delete Ba[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.o,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(I(e)||"function"==typeof u.Promise&&e instanceof u.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,Na(t)||(n=!0)}}t.c=e,r&&(s=x(t.v,t,!0),r=x(t.v,t,!1),e instanceof Ia?(Da(e,s,r),e.A=!0):e.then(s,r)),n&&(e=new za(e),Ba[e.a]=e,t.h=e.a)}function ja(){L.call(this)}function Ua(){L.call(this)}function za(t){this.a=u.setTimeout(x(this.c,this),0),this.b=t}(t=ba.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fa(this.b,ka(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fa(this.b,ka(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ma(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ma(this,!0)),ba.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?Aa(this):this.Ic())},t.Ic=function(){Aa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _a:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ia,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return fa(this.b,"Can not get response: "+t.message),null}},Ia.prototype.cancel=function(t){if(this.a)this.c instanceof Ia&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new Ua(this),Ra(this),La(this,!1,t))}},Ia.prototype.v=function(t,e){this.i=!1,La(this,t,e)},Ia.prototype.then=function(t,e,n){var r,i,o=new be((function(t,e){r=t,i=e}));return Da(this,r,(function(t){t instanceof Ua?o.cancel():i(t)})),o.then(t,e,n)},Ia.prototype.$goog_Thenable=!0,S(ja,L),ja.prototype.message="Deferred has already fired",ja.prototype.name="AlreadyCalledError",S(Ua,L),Ua.prototype.message="Deferred was canceled",Ua.prototype.name="CanceledError",za.prototype.c=function(){throw delete Ba[this.a],this.b};var Ba={};function Va(t){var e={},n=e.document||document,r=St(t).toString(),i=fe(document,"SCRIPT"),o={Vb:i,Ma:void 0},a=new Ia(o),s=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(s=window.setTimeout((function(){Ga(i,!0);var t=new Xa(qa,"Timeout reached for loading script "+r);Ra(a),La(a,!1,t)}),h),o.Ma=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ga(i,e.wd||!1,s),Ra(a),La(a,!0,null))},i.onerror=function(){Ga(i,!0,s);var t=new Xa(Wa,"Error while loading script "+r);Ra(a),La(a,!1,t)},vt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),se(i,o),function(t,e){gt(t,"HTMLScriptElement"),t.src=St(e),null===c&&(c=(e=(e=u.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&l.test(e)?e:""),(e=c)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ha(){if(this&&this.Vb){var t=this.Vb;t&&"SCRIPT"==t.tagName&&Ga(t,!0,this.Ma)}}function Ga(t,e,n){null!=n&&u.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Wa=0,qa=1;function Xa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),L.call(this,n),this.code=t}function Ya(t){this.f=t}function Qa(t,n,r){if(this.c=t,t=n||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||$a,this.g=dt(t.secureTokenHeaders||Ja),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||ts,this.a=dt(t.firebaseHeaders||es),r&&(this.a["X-Client-Version"]=r,this.g["X-Client-Version"]=r),r="Node"==xr(),!(r=u.XMLHttpRequest||r&&e.INTERNAL.node&&e.INTERNAL.node.XMLHttpRequest)&&!_r())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,_r()?this.f=new pa(self):wr()?this.f=new Ya(r):this.f=new $o,this.b=null}S(Xa,L),S(Ya,Yo),Ya.prototype.a=function(){return new this.f},Ya.prototype.b=function(){return{}};var Za,Ka="idToken",$a=new Br(3e4,6e4),Ja={"Content-Type":"application/x-www-form-urlencoded"},ts=new Br(3e4,6e4),es={"Content-Type":"application/json"};function ns(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function rs(t,e){e&&(t.l=is("https://securetoken.googleapis.com/v1/token",e),t.h=is("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=is("https://identitytoolkit.googleapis.com/v2/",e))}function is(t,e){return t=jn(t),e=jn(e.url),t.c=t.a+t.c,Ln(t,e.f),t.a=e.a,Rn(t,e.g),t.toString()}function os(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function as(t,e,n,r,i,o,a){(function(){var t=Cr();return!((t=Tr(t)!=Sr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Xt&&ne&&!(9<ne))})()||_r()?t=x(t.u,t):(Za||(Za=new be((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(u[us]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Da(t,null,e,void 0)}(Va(Tt(ss,{onload:us})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=x(t.o,t)),t(e,n,r,i,o,a)}Qa.prototype.S=function(){return this.b},Qa.prototype.u=function(t,e,n,r,i,o){if(_r()&&(void 0===u.fetch||void 0===u.Headers||void 0===u.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ba(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}xn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),wn(a,"ready",(function(){s&&clearTimeout(s),Ge(this)})),wn(a,"timeout",(function(){s&&clearTimeout(s),Ge(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.G=!1,t.c=!0,t.a=t.O?t.O.a():Ho.a(),t.A=t.O?Qo(t.O):Qo(Ho),t.a.onreadystatechange=x(t.Ub,t);try{fa(t.b,ka(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return fa(t.b,ka(t,"Error opening Xhr: "+e.message)),void Sa(t,e)}e=r||"";var o=new Cn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)H(t,e,void 0);else for(var n=Mn(t),r=An(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Ea,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=u.FormData&&e instanceof u.FormData,!X(wa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.R&&(t.a.withCredentials=t.R);try{Ca(t),0<t.g&&(t.u=function(t){return Xt&&ie(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fa(t.b,ka(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=x(t.Ma,t)):t.o=Sn(t.Ma,t.g,t)),fa(t.b,ka(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){fa(t.b,ka(t,"Send error: "+e.message)),Sa(t,e)}}(a,t,n,r,i)};var ss=new yt(xt,"https://apis.google.com/js/client.js?onload=%{onload}"),us="__fcb"+Math.floor(1e6*Math.random()).toString();function ls(t){if("string"!=typeof(t=t.email)||!vr.test(t))throw new T("invalid-email")}function cs(t){"email"in t&&ls(t)}function hs(t){if(!t[Ka]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,dt(t));throw new T("internal-error")}}function fs(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}Qa.prototype.o=function(t,e,n,r,i){var o=this;Za.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Qa.prototype.yb=function(){return eu(this,Hs,{})},Qa.prototype.Ab=function(t,e){return eu(this,Bs,{idToken:t,email:e})},Qa.prototype.Bb=function(t,e){return eu(this,Vs,{idToken:t,password:e})};var ps={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ds(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ms(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function vs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&$n(t=new Yn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function gs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Xo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Xo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Xo(t)):t.errorMessage&&(e=nu(t.errorMessage)),e)throw e;hs(t)}function ys(t,e){return e.returnIdpCredential=!0,eu(t,qs,e)}function bs(t,e){return e.returnIdpCredential=!0,eu(t,Ys,e)}function _s(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,eu(t,Xs,e)}function xs(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=Qa.prototype).Cb=function(t,e){var n={idToken:t},r=[];return ft(ps,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),eu(this,Bs,n)},t.ub=function(t,e){return vt(t={requestType:"PASSWORD_RESET",email:t},e),eu(this,Ns,t)},t.vb=function(t,e){return vt(t={requestType:"EMAIL_SIGNIN",email:t},e),eu(this,Ls,t)},t.tb=function(t,e){return vt(t={requestType:"VERIFY_EMAIL",idToken:t},e),eu(this,Rs,t)},t.Db=function(t,e,n){return vt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),eu(this,Ds,t)},t.eb=function(t){return eu(this,Ks,t)},t.mb=function(t,e){return eu(this,Us,{oobCode:t,newPassword:e})},t.Qa=function(t){return eu(this,Es,{oobCode:t})},t.ib=function(t){return eu(this,ws,{oobCode:t})};var ws={endpoint:"setAccountInfo",B:xs,Z:"email",C:!0},Es={endpoint:"resetPassword",B:xs,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},C:!0},Ss={endpoint:"signupNewUser",B:function(t){if(ls(t),!t.password)throw new T("weak-password")},F:hs,U:!0,C:!0},Ts={endpoint:"createAuthUri",C:!0},As={endpoint:"deleteAccount",M:["idToken"]},Ms={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=f(t.deleteProvider))throw new T("internal-error")}},Cs={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ls,F:hs,U:!0,C:!0},Os={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ls,F:hs,U:!0},Ps={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:ds,F:hs,C:!0,Na:!0},ks={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:ds,F:hs,C:!0,Na:!0},Is={endpoint:"getAccountInfo"},Ls={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",C:!0},Rs={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Ds={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",C:!0},Ns={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ls(t)},Z:"email",C:!0},Fs={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},js={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},Us={endpoint:"resetPassword",B:xs,Z:"email",C:!0},zs={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Bs={endpoint:"setAccountInfo",M:["idToken"],B:cs,U:!0},Vs={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(cs(t),!t.password)throw new T("weak-password")},F:hs,U:!0},Hs={endpoint:"signupNewUser",F:hs,U:!0,C:!0},Gs={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},Ws={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},C:!0,Na:!0},qs={endpoint:"verifyAssertion",B:ms,Xa:vs,F:gs,U:!0,C:!0},Xs={endpoint:"verifyAssertion",B:ms,Xa:vs,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw nu(t.errorMessage);hs(t)},U:!0,C:!0},Ys={endpoint:"verifyAssertion",B:function(t){if(ms(t),!t.idToken)throw new T("internal-error")},Xa:vs,F:gs,U:!0},Qs={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new T("invalid-custom-token")},F:hs,U:!0,C:!0},Zs={endpoint:"verifyPassword",B:function(t){if(ls(t),!t.password)throw new T("wrong-password")},F:hs,U:!0,C:!0},Ks={endpoint:"verifyPhoneNumber",B:fs,F:hs,C:!0},$s={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new T("internal-error");fs(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Xo(t);hs(t)}},Js={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:fs,F:hs,C:!0},tu={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[Ka]^!!t.refreshToken)throw new T("internal-error")},C:!0,Na:!0};function eu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.M))return Me(new T("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return Ae(n).then(e.B).then((function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=jn(e+n);Nn(s,"key",t.c),a&&Nn(s,"cb",E().toString());var u="GET"==r;if(u)for(var l in i)i.hasOwnProperty(l)&&Nn(s,l,i[l]);return new be((function(e,n){as(t,s.toString(),(function(t){t?t.error?n(ru(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:nr(Nr(i)),t.a,t.m.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)})).then((function(t){return r=t,e.Xa?e.Xa(n,r):r})).then(e.F).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function nu(t){return ru({error:{errors:[{message:t}],code:400,message:t}})}function ru(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",vt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=Dr(t)),new T("internal-error",e)}function iu(t){this.b=t,this.a=null,this.qb=function(t){return(uu||(uu=new be((function(t,e){function n(){zr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){zr(),e(Error("Network Error"))},timeout:au.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();u[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},Ae(Va(r=Tt(ou,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw uu=null,t})))).then((function(){return new be((function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),su.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var ou=new yt(xt,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new Br(3e4,6e4),su=new Br(5e3,15e3),uu=null;function lu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=jn(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Nn(this.a,"apiKey",this.h),Nn(this.a,"appName",this.i),this.b=null,this.c=[]}function cu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function hu(t){try{return e.app(t).auth().Ga()}catch(t){return[]}}function fu(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function pu(t){var e=lr();return function(t){return eu(t,Fs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=jn(e),r=n.f;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=jn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:mr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Wo(lr())}))}function du(t){return t.v||(t.v=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=hu(t.b),i=new lu(t.o,t.g,t.b,t.f);i.f=e,i.b=n,i.c=K(r||[]),t.u=i.toString()}t.m=new iu(t.u),function(t){if(!t.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then((function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.m,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Bo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.v}function mu(t){return t.l||(t.A=t.c?Mr(t.c,hu(t.b)):null,t.l=new Qa(t.g,k(t.i),t.A),t.f&&rs(t.l,t.f)),t.l}function vu(t,e,n,r,i,o,a,s,u,l,c,h){return(t=new cu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=dt(u||null),t.f=l,t.xb(c).toString()}function gu(t){if(this.a=t||e.INTERNAL.reactNative&&e.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function yu(t){this.b=t,this.a={},this.f=x(this.c,this)}lu.prototype.toString=function(){return this.f?Nn(this.a,"v",this.f):Kn(this.a.b,"v"),this.b?Nn(this.a,"eid",this.b):Kn(this.a.b,"eid"),this.c.length?Nn(this.a,"fw",this.c.join(",")):Kn(this.a.b,"fw"),this.a.toString()},cu.prototype.xb=function(t){return this.h=t,this},cu.prototype.toString=function(){if(this.m){var t=jn(this.m.url);t=Un(t.f,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Nn(t,"apiKey",this.o),Nn(t,"appName",this.c),Nn(t,"authType",this.v),this.a.isOAuthProvider){var n=this.a;try{var r=e.app(this.c).auth().ka()}catch(t){r=null}for(var i in n.nb=r,Nn(t,"providerId",this.a.providerId),n=Nr((r=this.a).Hb))n[i]=n[i].toString();i=r.Pc,n=dt(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),pt(n)||Nn(t,"customParameters",Dr(n))}if("function"==typeof this.a.Pb&&(r=this.a.Pb()).length&&Nn(t,"scopes",r.join(",")),this.l?Nn(t,"redirectUrl",this.l):Kn(t.b,"redirectUrl"),this.g?Nn(t,"eventId",this.g):Kn(t.b,"eventId"),this.i?Nn(t,"v",this.i):Kn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Fn(t,s)&&Nn(t,s,this.b[s]);return this.h?Nn(t,"tid",this.h):Kn(t.b,"tid"),this.f?Nn(t,"eid",this.f):Kn(t.b,"eid"),(s=hu(this.c)).length&&Nn(t,"fw",s.join(",")),t.toString()},(t=fu.prototype).Nb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,a=!1;return this.la().then((function(){(function(t){var e={type:"webStorageSupport"};return du(t).then((function(){return function(t,e){return t.qb.then((function(){return new be((function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.m,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&pr(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new be((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Tn(n).then((function(){e(r)}))}))},t.Wb=function(){var t=Cr();return!Rr(t)&&!Ur(t)},t.Sb=function(){return!1},t.Lb=function(t,e,n,r,i,o,a,s){if(!t)return Me(new T("popup-blocked"));if(a&&!Rr())return this.la().s((function(e){pr(t),i(e)})),r(),Ae();this.a||(this.a=pu(mu(this)));var u=this;return this.a.then((function(){var e=u.la().s((function(e){throw pr(t),i(e),e}));return r(),e})).then((function(){Uo(n),a||cr(vu(u.o,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Mb=function(t,e,n,r){this.a||(this.a=pu(mu(this)));var i=this;return this.a.then((function(){Uo(e),cr(vu(i.o,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.la=function(){var t=this;return du(this).then((function(){return t.m.qb})).s((function(){throw t.a=null,new T("network-request-failed")}))},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(t){Q(this.h,(function(e){return e==t}))},(t=gu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ae(this.a.setItem(t,Dr(e)))},t.T=function(t){return Ae(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var bu,_u=[];function xu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function wu(t){this.a=t}function Eu(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,a,s,u=n||{},l=null;if(t.b)return Me(Error("connection_unavailable"));var c=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new be((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),c),l={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(l),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Tu(t,l),e})).s((function(e){throw Tu(t,l),e}))}function Tu(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Q(t.a,(function(t){return t==e}))}}function Au(){if(!Ou())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=u.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;_r()&&self?(this.l=function(){var t=_r()?self:null;if(H(_u,(function(n){n.b==t&&(e=n)})),!e){var e=new yu(t);_u.push(e)}return e}(),xu(this.l,"keyChanged",(function(e,n){return Ru(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:X(e,n.key)}}))})),xu(this.l,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=u.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Eu(new wu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&X(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function Mu(t){return new be((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new be((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Mu(t)})).then((function(t){e(t)})).s((function(t){n(t)}))}}))}function Cu(t){return t.v||(t.v=Mu(t)),t.v}function Ou(){try{return!!u.indexedDB}catch(t){return!1}}function Pu(t){return t.objectStore("firebaseLocalStorage")}function ku(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new be((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=u.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Ae()}function Ru(t){return Cu(t).then((function(t){var e=Pu(ku(t,!1));return e.getAll?Iu(e.getAll()):new be((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=hr(t.c,n),t.c=n}return r}))}function Du(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Nu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(Ou()){var t=jr(),r="__sak"+t;return bu||(bu=new Au),(n=bu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.T(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function ju(){if(!function(){var t="Node"==xr();if(!(t=Uu()||t&&e.INTERNAL.node&&e.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==xr())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Uu()||e.INTERNAL.node.localStorage,this.type="localStorage"}function Uu(){try{var t=u.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){this.type="nullStorage"}function Bu(){if(!function(){var t="Node"==xr();if(!(t=Vu()||t&&e.INTERNAL.node&&e.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==xr())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Vu()||e.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Vu(){try{var t=u.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Hu(){var t={};t.Browser=qu,t.Node=Xu,t.ReactNative=Yu,t.Worker=Qu,this.a=t[xr()]}yu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},wu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Eu.prototype.close=function(){for(;0<this.a.length;)Tu(this,this.a[0]);this.b=!0},(t=Au.prototype).set=function(t,e){var n,r=!1,i=this;return Cu(this).then((function(e){return Iu((e=Pu(ku(n=e,!0))).get(t))})).then((function(o){var a=Pu(ku(n,!0));return o?(o.value=e,Iu(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,Iu(a.add(o)))})).then((function(){return i.c[t]=e,Lu(i,t)})).na((function(){r&&i.b--}))},t.get=function(t){return Cu(this).then((function(e){return Iu(Pu(ku(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.T=function(t){var e=!1,n=this;return Cu(this).then((function(r){return e=!0,n.b++,Iu(Pu(ku(r,!0)).delete(t))})).then((function(){return delete n.c[t],Lu(n,t)})).na((function(){e&&n.b--}))},t.ca=function(t){0==this.a.length&&function(t){Du(t),function e(){t.f=setTimeout((function(){t.i=Ru(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t})),0==this.a.length&&Du(this)},(t=Nu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.T=function(t){return this.b.then((function(e){return e.T(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Q(this.a,(function(e){return e==t}))},(t=Fu.prototype).get=function(t){return Ae(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ae()},t.T=function(t){return delete this.a[t],Ae()},t.ca=function(){},t.ia=function(){},(t=ju.prototype).get=function(t){var e=this;return Ae().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Dr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(t){u.window&&un(u.window,"storage",t)},t.ia=function(t){u.window&&hn(u.window,"storage",t)},(t=zu.prototype).get=function(){return Ae(null)},t.set=function(){return Ae()},t.T=function(){return Ae()},t.ca=function(){},t.ia=function(){},(t=Bu.prototype).get=function(t){var e=this;return Ae().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ae().then((function(){var r=Dr(e);null===r?n.T(t):n.a.setItem(t,r)}))},t.T=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Gu,Wu,qu={D:ju,ab:Bu},Xu={D:ju,ab:Bu},Yu={D:gu,ab:zu},Qu={D:ju,ab:zu},Zu={qd:"local",NONE:"none",sd:"session"};function Ku(){var t=!(Ur(Cr())||!br()),e=Rr(),n=Pr();this.v=t,this.h=e,this.l=n,this.a={},Gu||(Gu=new Hu),t=Gu;try{this.g=!ur()&&Wr()||!u.indexedDB?new t.a.D:new Nu(_r()?new Fu:new t.a.D)}catch(t){this.g=new Fu,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Fu}this.m=new Fu,this.f=x(this.Xb,this),this.b={}}function $u(){return Wu||(Wu=new Ku),Wu}function Ju(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function tl(t,e){return"firebase:"+t.name+(e?":"+e:"")}function el(t,e,n){return n=tl(e,n),"local"==e.D&&(t.b[n]=null),Ju(t,e.D).T(n)}function nl(t){t.c&&(clearInterval(t.c),t.c=null)}function rl(t){this.a=t,this.b=$u()}(t=Ku.prototype).get=function(t,e){return Ju(this,t.D).get(tl(t,e))},t.set=function(t,e,n){var r=tl(t,n),i=this,o=Ju(this,t.D);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.D&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=tl(t,e),this.l&&(this.b[t]=u.localStorage.getItem(t)),pt(this.a)&&(Ju(this,"local").ca(this.f),this.h||(ur()||!Wr())&&u.indexedDB||!this.l||function(t){nl(t),t.c=setInterval((function(){for(var e in t.a){var n=u.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Xb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=tl(t,e),this.a[t]&&(Q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(Ju(this,"local").ia(this.f),nl(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=u.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ju(this,"local").ia(this.f):nl(this),this.v)if(n=u.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?u.localStorage.setItem(e,r):u.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===u.localStorage.getItem(e)||(o.b[e]=u.localStorage.getItem(e),o.lb(e))},Xt&&ne&&10==ne&&u.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,x(this.lb,this))},t.lb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var il,ol={name:"authEvent",D:"local"};function al(){this.a=$u()}function sl(t,e){this.b=ul,this.f=u.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=u.Int32Array?new Int32Array(64):Array(64),void 0===il&&(il=u.Int32Array?new Int32Array(ml):ml),this.reset()}S(sl,(function(){this.b=-1}));for(var ul=64,ll=ul-1,cl=[],hl=0;hl<ll;hl++)cl[hl]=0;var fl=Z(128,cl);function pl(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],l=0|t.a[4],c=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((l>>>6|l<<26)^(l>>>11|l<<21)^(l>>>25|l<<7))|0)+((a=(a=l&c^~l&h)+(0|il[e])|0)+(0|n[e])|0)|0,o=h,h=c,c=l,l=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+l|0,t.a[5]=t.a[5]+c|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function dl(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(pl(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(pl(t),i=0)}}t.c=i,t.g+=n}sl.prototype.reset=function(){this.g=this.c=0,this.a=u.Int32Array?new Int32Array(this.h):K(this.h)};var ml=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function vl(){sl.call(this,8,gl)}S(vl,sl);var gl=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function yl(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new al,this.g=new rl(this.h),this.f=null,this.b=[],this.a=this.c=null}function bl(t){return new T("invalid-cordova-configuration",t)}function _l(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function xl(t){return t.f||(t.f=t.la().then((function(){return new be((function(e){t.Ea((function n(r){return e(r),t.Ra(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),wl(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=io(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=jn(i),"firebaseError")||null))?A(o):null)?new zo(r.c,r.b,null,null,o,null,r.S()):new zo(r.c,r.b,i,r.f,null,null,r.S())),i=o||n}_l(t,i)}))}var n=new zo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Tn(500).then((function(){return wl(t).then((function(){r||_l(t,n)}))})),o=u.handleOpenURL;u.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",u).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Vo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",u))&&t(null,e.b))}(e)}(t)}))}))),t.f}function wl(t){var e=null;return function(t){return t.b.get(ol,t.a).then((function(t){return Bo(t)}))}(t.g).then((function(n){return e=n,el((n=t.g).b,ol,n.a)})).then((function(){return e}))}function El(t){this.a=t,this.b=$u()}(t=yl.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(yr(void 0)?gr().then((function(){return new be((function(t,e){var n=u.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Me(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",u))throw bl("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",u))throw bl("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",u))throw bl("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",u))throw bl("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Nb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Ae()},t.Lb=function(){return Me(new T("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return Me(new T("redirect-operation-pending"));var i=this,o=u.document,a=null,s=null,l=null,c=null;return this.c=Ae().then((function(){return Uo(e),xl(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new zo(e,r,null,o,new T("no-auth-event"),null,i),s=Or("BuildInfo.packageName",u);if("string"!=typeof s)throw new T("invalid-cordova-configuration");var l=Or("BuildInfo.displayName",u),c={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!Cr().toLowerCase().match(/android/))return Me(new T("operation-not-supported-in-this-environment"));c.apn=s}l&&(c.appDisplayName=l),o=function(t){var e=new vl;dl(e,t),t=[];var n=8*e.g;56>e.c?dl(e,fl,56-e.c):dl(e,fl,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(pl(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return W(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),c.sessionId=o;var h=vu(t.m,t.i,t.l,e,n,null,r,t.v,c,t.u,i,t.o);return t.la().then((function(){var e=t.h;return t.A.a.set(ol,a.w(),e)})).then((function(){var e=Or("cordova.plugins.browsertab.isAvailable",u);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",u)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",u)))throw new T("invalid-cordova-configuration");e=Cr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new be((function(t,e){s=function(){var e=Or("cordova.plugins.browsertab.close",u);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(s),l=function(){a||(a=Tn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},c=function(){Vr()&&l()},o.addEventListener("resume",l,!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)})).s((function(t){return wl(i).then((function(){throw t}))}))})).na((function(){l&&o.removeEventListener("resume",l,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Ra(s),i.c=null}))},t.Ea=function(t){this.b.push(t),xl(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new zo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ra=function(t){Q(this.b,(function(e){return e==t}))};var Sl={name:"pendingRedirect",D:"session"};function Tl(t){return el(t.b,Sl,t.a)}function Al(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=x(this.o,this),this.b=new Bl,this.A=new ql,this.g=new El(Ul(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=Ml(this.O,this.m,this.v,M,this.G)}function Ml(t,n,r,i,o){var a=e.SDK_VERSION||null;return yr()?new yl(t,n,r,a,i,o):new fu(t,n,r,a,i,o)}function Cl(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.la().s((function(n){throw t.a==e&&t.reset(),n}))}function Ol(t){t.a.Wb()&&Cl(t).s((function(e){var n=new zo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Dl(e)&&t.o(n)})),t.a.Sb()||Vl(t.b)}function Pl(t,e){X(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Sl,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Tl(t.g).then((function(){Cl(t).s((function(e){var n=new zo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Dl(e)&&t.o(n)}))})):Ol(t)})).s((function(){Ol(t)}))}function kl(t,e){Q(t.h,(function(t){return t==e}))}Al.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=Ml(this.O,this.m,this.v,null,this.G),this.i={}},Al.prototype.o=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=E()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=E())),e=!0;break}}return Vl(this.b),e};var Il=new Br(2e3,1e4),Ll=new Br(3e4,6e4);function Rl(t,e,n,r,i,o,a){return t.a.Lb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Dl(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Nl(t,e,n,r,i){var o;return function(t){return t.b.set(Sl,"pending",t.a)}(t.g).then((function(){return t.a.Mb(e,n,r,i).s((function(e){if(Dl(e))throw new T("operation-not-supported-in-this-environment");return o=e,Tl(t.g).then((function(){throw o}))})).then((function(){return t.a.Zb()?new be((function(){})):Tl(t.g).then((function(){return t.qa()})).then((function(){})).s((function(){}))}))}))}function Fl(t,e,n,r,i){return t.a.Nb(r,(function(t){e.ma(n,null,t,i)}),Il.get())}Al.prototype.qa=function(){return this.b.qa()};var jl={};function Ul(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function zl(t,e,n,r){var i=Ul(e,n,r);return jl[i]||(jl[i]=new Al(t,e,n,r)),jl[i]}function Bl(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Vl(t){t.g||(t.g=!0,Wl(t,!1,null,null))}function Hl(t){t.g&&!t.i&&Wl(t,!1,null,null)}function Gl(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wl(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Me(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Gl(t,n):Gl(t,{user:null}),t.f=[],t.c=[]}function ql(){}function Xl(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Yl(t,e){this.a=e,Zr(this,"verificationId",t)}function Ql(t,e,n,r){return new No(t).eb(e,n).then((function(t){return new Yl(t,r)}))}function Zl(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Kr(this,{token:t,expirationTime:Gr(1e3*e.exp),authTime:Gr(1e3*e.auth_time),issuedAtTime:Gr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Kl(t,e,n){var r=e&&e[Jl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=dt(e),this.g=n,this.c=new oo(null,r),this.b=[];var i=this;H(e[$l]||[],(function(t){(t=ei(t))&&i.b.push(t)})),Zr(this,"auth",this.a),Zr(this,"session",this.c),Zr(this,"hints",this.b)}Bl.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Bl.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Wl(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.S(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Wl(t,s,e,null)})).s((function(e){Wl(t,s,null,e)}))}(this,t,e):Me(new T("invalid-auth-event")):(Wl(this,!1,null,null),Ae())}else Me(new T("invalid-auth-event"))},Bl.prototype.qa=function(){var t=this;return new be((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Tn(Ll.get()).then((function(){t.b||(t.g=!0,Wl(t,!0,null,e))}))}(t))}))},ql.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ma(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.S(),t.i).then((function(t){e.ma(r,t,null,n)})).s((function(t){e.ma(r,null,t,n)}))}(t,e):Me(new T("invalid-auth-event"))}else Me(new T("invalid-auth-event"))},Yl.prototype.confirm=function(t){return t=Fo(this.verificationId,t),this.a(t)};var $l="mfaInfo",Jl="mfaPendingCredential";function tc(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new Kl(t,e,n),Zr(this,"resolver",this.b)}function ec(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new tc(e,t.serverResponse,n,t.message)}catch(t){}return null}function nc(){}function rc(t){Zr(this,"factorId",t.fa),this.a=t}function ic(t){if(rc.call(this,t),this.a.fa!=No.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function oc(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function ac(t,e){this.a=t,this.b=[],this.c=x(this.xc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ii]=t.uid),t.displayName&&(r[ni]=t.displayName),t.enrollmentTime&&(r[ri]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[oi]=t.phoneNumber);try{e=new ai(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),sc(this,n)}function sc(t,e){t.b=e,Zr(t,"enrolledFactors",e)}function uc(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function lc(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=u.document,e=null;return Vr()||!t?Ae():new be((function(n){e=function(){Vr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){lc(t,!0)})).s((function(e){t.i(e)&&lc(t,!1)}))}function cc(t){this.c=t,this.b=this.a=null}function hc(t){return t.b&&1e3*t.b.c||0}function fc(t,e){var n=e.refreshToken;t.b=Hi(e[Ka]||""),t.a=n}function pc(t,e){this.a=t||null,this.b=e||null,Kr(this,{lastSignInTime:Gr(e||null),creationTime:Gr(t||null)})}function dc(t,e,n,r,i,o){Kr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function mc(t,n,r){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var i=e.SDK_VERSION?Mr(e.SDK_VERSION):null;this.a=new Qa(this.l,k(M),i),t.emulatorConfig&&rs(this.a,t.emulatorConfig),this.b=new cc(this.a),Ec(this,n[Ka]),fc(this.b,n),Zr(this,"refreshToken",this.b.a),Ac(this,r||{}),_n.call(this),this.P=!1,this.o&&kr()&&(this.i=zl(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=function(t){return new uc((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=hc(t.b)-E()-3e5;return 0<e?e:0}))}(this),this.$=x(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){rs(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){yc(o,t.f)},this.aa=null,this.N=new ac(this,r),Zr(this,"multiFactor",this.N)}function vc(t,e){t.ba&&hn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&un(e,"languageCodeChanged",t.Ba)}function gc(t,e){t.W&&hn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&un(e,"emulatorConfigChanged",t.za)}function yc(t,n){t.X=n,os(t.a,e.SDK_VERSION?Mr(e.SDK_VERSION,t.X):null)}function bc(t,e){t.aa&&hn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&un(e,"frameworkChanged",t.Aa)}function _c(t){try{return e.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function xc(t){t.A||t.u.b||(t.u.start(),hn(t,"tokenChanged",t.$),un(t,"tokenChanged",t.$))}function wc(t){hn(t,"tokenChanged",t.$),t.u.stop()}function Ec(t,e){t.ya=e,Zr(t,"_lat",e)}function Sc(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Oe(e).then((function(){return t}))}function Tc(t){t.i&&!t.P&&(t.P=!0,Pl(t.i,t))}function Ac(t,e){Kr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new pc(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Mc(){}function Cc(t){return Ae().then((function(){if(t.A)throw new T("app-deleted")}))}function Oc(t){return W(t.providerData,(function(t){return t.providerId}))}function Pc(t,e){e&&(kc(t,e.providerId),t.providerData.push(e))}function kc(t,e){Q(t.providerData,(function(t){return t.providerId==e}))}function Ic(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Zr(t,e,n)}function Lc(t,e){t!=e&&(Kr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Zr(t,"metadata",function(t){return new pc(t.a,t.b)}(e.metadata)):Zr(t,"metadata",new pc),H(e.providerData,(function(e){Pc(t,e)})),function(t,e){t.b=e.b,t.a=e.a}(t.b,e.b),Zr(t,"refreshToken",t.b.a),sc(t.N,e.N.b))}function Rc(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return eu(t.a,Is,{idToken:e}).then(x(t.Jc,t))}(t,e).then((function(){return n||Ic(t,"isAnonymous",!1),e}))}))}function Dc(t,e){e[Ka]&&t.ya!=e[Ka]&&(fc(t.b,e),t.dispatchEvent(new oc("tokenChanged")),Ec(t,e[Ka]),Ic(t,"refreshToken",t.b.a))}function Nc(t,e){return Rc(t).then((function(){if(X(Oc(t),e))return Sc(t).then((function(){throw new T("provider-already-linked")}))}))}function Fc(t,e,n){return $r({user:t,credential:jo(e),additionalUserInfo:e=Qi(e),operationType:n})}function jc(t,e){return Dc(t,e),t.reload().then((function(){return t}))}function Uc(t,n,r,i,o){if(!kr())return Me(new T("operation-not-supported-in-this-environment"));if(t.f&&!o)return Me(t.f);var a=Yi(r.providerId),s=jr(t.uid+":::"),u=null;(!Rr()||br())&&t.o&&r.isOAuthProvider&&(u=vu(t.o,t.l,t.m,n,r,null,s,e.SDK_VERSION||null,null,null,t.tenantId));var l=dr(u,a&&a.ua,a&&a.ta);return i=i().then((function(){if(Bc(t),!o)return t.I().then((function(){}))})).then((function(){return Rl(t.i,l,n,r,s,!!u,t.tenantId)})).then((function(){return new be((function(e,r){t.ma(n,null,new T("cancelled-popup-request"),t.h||null),t.g=e,t.O=r,t.h=s,t.c=Fl(t.i,t,n,l,s)}))})).then((function(t){return l&&pr(l),t?$r(t):null})).s((function(t){throw l&&pr(l),t})),Vc(t,i,o)}function zc(t,e,n,r,i){if(!kr())return Me(new T("operation-not-supported-in-this-environment"));if(t.f&&!i)return Me(t.f);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(Bc(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Sc(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Wc,t.w(),e.a)),e})).then((function(){return Nl(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.ha)return qc(t.ha);throw o})).then((function(){if(o)throw o})),Vc(t,r,i)}function Bc(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Vc(t,e,n){var r=function(t,e,n){return t.f&&!n?(e.cancel(),Me(t.f)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.f||t.dispatchEvent(new oc("userInvalidated")),t.f=e),e}))}(t,e,n);return t.G.push(r),r.na((function(){Y(t.G,r)})),r.s((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ec(e.w(),_c(t),x(t.ic,t))),n||e}))}function Hc(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ka]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new mc(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&Pc(r,$r(t))})),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Gc(t){this.a=t,this.b=$u()}Kl.prototype.Qc=function(t){var e=this;return t.rb(this.a.a,this.c).then((function(t){var n=dt(e.f);return delete n[$l],delete n[Jl],vt(n,t),e.g(n)}))},S(tc,T),nc.prototype.rb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),vt(n,{phoneVerificationInfo:Do(t.a)}),eu(e,Ps,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return vt(n={mfaPendingCredential:n},{phoneVerificationInfo:Do(t.a)}),eu(e,ks,n)}))}(this,t,e)},S(rc,nc),S(ic,rc),S(oc,Qe),(t=ac.prototype).xc=function(t){sc(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ei(t))&&e.push(t)})),e}(t.gd))},t.Qb=function(){return this.a.I().then((function(t){return new oo(t,null)}))},t.ec=function(t,e){var n=this,r=this.a.a;return this.Qb().then((function(n){return t.rb(r,n,e)})).then((function(t){return Dc(n.a,t),n.a.reload()}))},t.ad=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return eu(r,tu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=G(e.b,(function(t){return t.uid!=n}));return sc(e,r),Dc(e.a,t),e.a.reload().s((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:W(this.b,(function(t){return t.w()}))}}},uc.prototype.start=function(){this.a=this.c,lc(this,!0)},uc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},cc.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:hc(this)}},cc.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Me(new T("user-token-expired")):t||!this.b||E()>hc(this)-3e4?this.a?function(t,e){return function(t,e){return new be((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?as(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ru(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.v.get()):r(new T("internal-error"))}))}(t.c,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,{accessToken:t.b.toString(),refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},pc.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},S(mc,_n),mc.prototype.wa=function(t){this.pa=t,ns(this.a,t)},mc.prototype.ka=function(){return this.pa},mc.prototype.Ga=function(){return K(this.X)},mc.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Zr(mc.prototype,"providerId","firebase"),(t=mc.prototype).reload=function(){var t=this;return Vc(this,Cc(this).then((function(){return Rc(t).then((function(){return Sc(t)})).then(Mc)})))},t.nc=function(t){return this.I(t).then((function(t){return new Zl(t)}))},t.I=function(t){var e=this;return Vc(this,Cc(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.ya&&(Ec(e,t.accessToken),e.dispatchEvent(new oc("tokenChanged"))),Ic(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Ac(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?W(t,(function(t){return new dc(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Pc(this,e[n]);Ic(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new oc("userReloaded",{gd:t}))},t.Kc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Vc(this,t.c(this.a,this.uid).then((function(t){return Dc(e,t),n=Fc(e,t,"reauthenticate"),e.f=null,e.reload()})).then((function(){return n})),!0)},t.Bc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Vc(this,Nc(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Fc(e,t,"link"),jc(e,t)})).then((function(){return n})))},t.Cc=function(t,e){var n=this;return Vc(this,Nc(this,"phone").then((function(){return Ql(_c(n),t,e,x(n.pb,n))})))},t.Lc=function(t,e){var n=this;return Vc(this,Ae().then((function(){return Ql(_c(n),t,e,x(n.sb,n))})),!0)},t.Ab=function(t){var e=this;return Vc(this,this.I().then((function(n){return e.a.Ab(n,t)})).then((function(t){return Dc(e,t),e.reload()})))},t.dd=function(t){var e=this;return Vc(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Dc(e,t),e.reload()})))},t.Bb=function(t){var e=this;return Vc(this,this.I().then((function(n){return e.a.Bb(n,t)})).then((function(t){return Dc(e,t),e.reload()})))},t.Cb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Cc(this);var e=this;return Vc(this,this.I().then((function(n){return e.a.Cb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Dc(e,t),Ic(e,"displayName",t.displayName||null),Ic(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Zr(t,"displayName",e.displayName),Zr(t,"photoURL",e.photoURL))})),Sc(e)})).then(Mc))},t.bd=function(t){var e=this;return Vc(this,Rc(this).then((function(n){return X(Oc(e),t)?function(t,e,n){return eu(t,Ms,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Oc(e),(function(t){n[t]||kc(e,t)})),n[No.PROVIDER_ID]||Zr(e,"phoneNumber",null),Sc(e)})):Sc(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Vc(this,this.I().then((function(e){return eu(t.a,As,{idToken:e})})).then((function(){t.dispatchEvent(new oc("userDeleted"))}))).then((function(){for(var e=0;e<t.G.length;e++)t.G[e].cancel("app-deleted");vc(t,null),gc(t,null),bc(t,null),t.G=[],t.A=!0,wc(t),Zr(t,"refreshToken",null),t.i&&kl(t.i,t)}))},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?x(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?x(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?x(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?x(this.Kb,this):null},t.Dc=function(t){var e=this;return Uc(this,"linkViaPopup",t,(function(){return Nc(e,t.providerId).then((function(){return Sc(e)}))}),!1)},t.Mc=function(t){return Uc(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},t.Ec=function(t){var e=this;return zc(this,"linkViaRedirect",t,(function(){return Nc(e,t.providerId)}),!1)},t.Nc=function(t){return zc(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},t.Jb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Vc(this,this.I().then((function(n){return bs(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Fc(i,t,"link"),jc(i,t)})).then((function(){return o})))},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Vc(this,Ae().then((function(){return lo(_s(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Fc(i,t,"reauthenticate"),Dc(i,t),i.f=null,i.reload()})).then((function(){return o})),!0)},t.tb=function(t){var e=this,n=null;return Vc(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:zi(new Pi(t))})).then((function(t){return e.a.tb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Db=function(t,e){var n=this,r=null;return Vc(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:zi(new Pi(e))})).then((function(e){return n.a.Db(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.ic=function(t){var e=null,n=this;return Vc(this,t=lo(Ae(t),n.uid).then((function(t){return e=Fc(n,t,"reauthenticate"),Dc(n,t),n.f=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&vt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),vt(t,this.N.w()),t};var Wc={name:"redirectUser",D:"session"};function qc(t){return el(t.b,Wc,t.a)}function Xc(t){this.a=t,this.b=$u(),this.c=null,this.f=function(t){var e=Zc("local"),n=Zc("session"),r=Zc("none");return function(t,e,n){var r=tl(e,n),i=Ju(t,e.D);return t.get(e,n).then((function(o){var a=null;try{a=Fr(u.localStorage.getItem(r))}catch(t){}if(a&&!o)return u.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&u.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Qc,t.a).then((function(t){return t?Zc(t):e}))}))}))})).then((function(e){return t.c=e,Yc(t,e.D)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zc("local"),this.a,x(this.g,this))}function Yc(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(el(t.b,Zc(Zu[n]),t.a));return r.push(el(t.b,Qc,t.a)),function(t){return new be((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Ce(t[s],w(o,s),a);else e(i)}))}(r)}Xc.prototype.g=function(){var t=this,e=Zc("local");th(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.D?t.b.get(e,t.a):null})).then((function(n){if(n)return Yc(t,"local").then((function(){t.c=e}))}))}))};var Qc={name:"persistence",D:"session"};function Zc(t){return{name:"authUser",D:t}}function Kc(t,e){return th(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function $c(t){return th(t,(function(){return el(t.b,t.c,t.a)}))}function Jc(t,e,n){return th(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Hc(t||{})}))}))}function th(t,e){return t.f=t.f.then(e,e),t.f}function eh(t){if(this.m=!1,Zr(this,"settings",new Xl),Zr(this,"app",t),!lh(this).options||!lh(this).options.apiKey)throw new T("invalid-api-key");t=e.SDK_VERSION?Mr(e.SDK_VERSION):null,this.a=new Qa(lh(this).options&&lh(this).options.apiKey,k(M),t),this.R=[],this.u=[],this.P=[],this.ac=e.INTERNAL.createSubscribe(x(this.yc,this)),this.X=void 0,this.bc=e.INTERNAL.createSubscribe(x(this.zc,this)),sh(this,null),this.l=new Xc(lh(this).options.apiKey+":"+lh(this).name),this.G=new Gc(lh(this).options.apiKey+":"+lh(this).name),this.$=ph(this,function(t){var e=lh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Wc,t.a).then((function(t){return t&&e&&(t.authDomain=e),Hc(t||{})}))}(t.G,lh(t).options.authDomain).then((function(e){return(t.o=e)&&(e.ha=t.G),qc(t.G)}));return ph(t,e)}(t).then((function(){return Jc(t.l,e,t.f)})).then((function(e){return e?(e.ha=t.G,t.o&&(t.o.ga||null)==(e.ga||null)?e:e.reload().then((function(){return Kc(t.l,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:$c(t.l)}))):null})).then((function(e){sh(t,e||null)}));return ph(t,n)}(this)),this.i=ph(this,function(t){return t.$.then((function(){return ah(t)})).s((function(){})).then((function(){if(!t.m)return t.pa()})).s((function(){})).then((function(){if(!t.m){t.ba=!0;var e=t.l;e.b.addListener(Zc("local"),e.a,t.pa)}}))}(this)),this.ba=!1,this.pa=x(this.Yc,this),this.Ba=x(this.da,this),this.ya=x(this.kc,this),this.za=x(this.vc,this),this.Aa=x(this.wc,this),this.b=null,function(t){var e=lh(t).options.authDomain,n=lh(t).options.apiKey;e&&kr()&&(t.gb=t.$.then((function(){if(!t.m){if(t.b=zl(e,n,lh(t).name,t.f),Pl(t.b,t),ch(t)&&Tc(ch(t)),t.o){Tc(t.o);var r=t.o;r.wa(t.ka()),vc(r,t),yc(r=t.o,t.N),bc(r,t),rs((r=t.o).a,t.f),gc(r,t),t.o=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=x(this.delete,this),this.INTERNAL.logFramework=x(this.Fc,this),this.A=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null}(this),this.N=[],this.f=null}function nh(t){Qe.call(this,"languageCodeChanged"),this.h=t}function rh(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function ih(t){Qe.call(this,"frameworkChanged"),this.f=t}function oh(t){return t.gb||Me(new T("auth-domain-config-required"))}function ah(t){if(!kr())return Me(new T("operation-not-supported-in-this-environment"));var e=oh(t).then((function(){return t.b.qa()})).then((function(t){return t?$r(t):null}));return ph(t,e)}function sh(t,e){ch(t)&&(function(t,e){Q(t.R,(function(t){return t==e}))}(ch(t),t.Ba),hn(ch(t),"tokenChanged",t.ya),hn(ch(t),"userDeleted",t.za),hn(ch(t),"userInvalidated",t.Aa),wc(ch(t))),e&&(e.R.push(t.Ba),un(e,"tokenChanged",t.ya),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.A&&xc(e)),Zr(t,"currentUser",e),e&&(e.wa(t.ka()),vc(e,t),yc(e,t.N),bc(e,t),rs(e.a,t.f),gc(e,t))}function uh(t,e){var n=null,r=null;return ph(t,e.then((function(e){return n=jo(e),r=Qi(e),function(t,e){var n={};return n.apiKey=lh(t).options.apiKey,n.authDomain=lh(t).options.authDomain,n.appName=lh(t).name,t.f&&(n.emulatorConfig=t.f),t.$.then((function(){return function(t,e,n,r){var i=new mc(t,e);return n&&(i.ha=n),r&&yc(i,r),i.reload().then((function(){return i}))}(n,e,t.G,t.Ga())})).then((function(e){return ch(t)&&e.uid==ch(t).uid?(Lc(ch(t),e),t.da(e)):(sh(t,e),Tc(e),t.da(e))})).then((function(){fh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ec(e.w(),t,x(t.jc,t))),n||e})).then((function(){return $r({user:ch(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function lh(t){return t.app}function ch(t){return t.currentUser}function hh(t){return ch(t)&&ch(t)._lat||null}function fh(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](hh(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](hh(t))}}function ph(t,e){return t.R.push(e),e.na((function(){Y(t.R,e)})),e}function dh(){}function mh(){this.a={},this.b=1e12}Xc.prototype.wb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(xr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Pr()&&"none"!==t)throw n}}(t),th(this,(function(){return t!=n.c.D?n.b.get(n.c,n.a).then((function(r){return e=r,Yc(n,t)})).then((function(){if(n.c=Zc(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},S(eh,_n),S(nh,Qe),S(rh,Qe),S(ih,Qe),(t=eh.prototype).wb=function(t){return ph(this,t=this.l.wb(t))},t.wa=function(t){this.aa===t||this.m||(this.aa=t,ns(this.a,this.aa),this.dispatchEvent(new nh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=u.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Hr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),u.document&&gr().then((function(){var t=u.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),u.document.body.appendChild(t)})),this.f={url:t},this.settings.hb=!0,rs(this.a,this.f),this.dispatchEvent(new rh(this.f))}},t.Fc=function(t){this.N.push(t),os(this.a,e.SDK_VERSION?Mr(e.SDK_VERSION,this.N):null),this.dispatchEvent(new ih(this.N))},t.Ga=function(){return K(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:lh(this).options.apiKey,authDomain:lh(this).options.authDomain,appName:lh(this).name,currentUser:ch(this)&&ch(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?x(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return uh(i,ys(i.a,o))}))},t.Wc=function(t){if(!kr())return Me(new T("operation-not-supported-in-this-environment"));var n=this,r=Yi(t.providerId),i=jr(),o=null;(!Rr()||br())&&lh(this).options.authDomain&&t.isOAuthProvider&&(o=vu(lh(this).options.authDomain,lh(this).options.apiKey,lh(this).name,"signInViaPopup",t,null,i,e.SDK_VERSION||null,null,null,this.S(),this.f));var a=dr(o,r&&r.ua,r&&r.ta);return ph(this,r=oh(this).then((function(e){return Rl(e,a,"signInViaPopup",t,i,!!o,n.S())})).then((function(){return new be((function(t,e){n.ma("signInViaPopup",null,new T("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=i,n.c=Fl(n.b,n,"signInViaPopup",a,i)}))})).then((function(t){return a&&pr(a),t?$r(t):null})).s((function(t){throw a&&pr(a),t})))},t.Xc=function(t){if(!kr())return Me(new T("operation-not-supported-in-this-environment"));var e=this;return ph(this,oh(this).then((function(){return function(t){return th(t,(function(){return t.b.set(Qc,t.c.D,t.a)}))}(e.l)})).then((function(){return Nl(e.b,"signInViaRedirect",t,void 0,e.S())})))},t.qa=function(){var t=this;return ah(this).then((function(e){return t.b&&Hl(t.b.b),e})).s((function(e){throw t.b&&Hl(t.b.b),e}))},t.cd=function(t){if(!t)return Me(new T("null-user"));if(this.W!=t.tenantId)return Me(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=lh(this).options.apiKey,n.authDomain=lh(this).options.authDomain,n.appName=lh(this).name;var r=function(t,e,n,r){var i=t.b,o={};return o[Ka]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new mc(e||{apiKey:t.l,authDomain:t.o,appName:t.m},o),n&&(e.ha=n),r&&yc(e,r),Lc(e,t),e}(t,n,e.G,e.Ga());return ph(this,this.i.then((function(){if(lh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return ch(e)&&t.uid==ch(e).uid?(Lc(ch(e),t),e.da(t)):(sh(e,r),Tc(r),e.da(r))})).then((function(){fh(e)})))},t.zb=function(){var t=this;return ph(this,this.i.then((function(){return t.b&&Hl(t.b.b),ch(t)?(sh(t,null),$c(t.l).then((function(){fh(t)}))):Ae()})))},t.Yc=function(){var t=this;return Jc(this.l,lh(this).options.authDomain).then((function(e){if(!t.m){var n;if(n=ch(t)&&e){n=ch(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Lc(ch(t),e),ch(t).I();(ch(t)||e)&&(sh(t,e),e&&(Tc(e),e.ha=t.G),t.b&&Pl(t.b,t),fh(t))}}))},t.da=function(t){return Kc(this.l,t)},t.kc=function(){fh(this),this.da(ch(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then((function(){return uh(e,Ae(t))}))},t.yc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(ch(e))}))},t.zc=function(t){var e=this;!function(t,e){t.P.push(e),ph(t,t.i.then((function(){!t.m&&X(t.P,e)&&t.X!==t.getUid()&&(t.X=t.getUid(),e(hh(t)))})))}(this,(function(){t.next(ch(e))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.X=r.getUid(),"function"==typeof t?t(ch(r)):"function"==typeof t.next&&t.next(ch(r))})),this.bc(t,e,n)},t.mc=function(t){var e=this;return ph(this,this.i.then((function(){return ch(e)?ch(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Sc=function(t){var e=this;return this.i.then((function(){return uh(e,eu(e.a,Qs,{token:t}))})).then((function(t){var n=t.user;return Ic(n,"isAnonymous",!1),e.da(n),t}))},t.Tc=function(t,e){var n=this;return this.i.then((function(){return uh(n,eu(n.a,Zs,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.i.then((function(){return uh(n,eu(n.a,Ss,{email:t,password:e}))}))},t.Za=function(t){var e=this;return this.i.then((function(){return uh(e,t.ja(e.a))}))},t.Rc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var t=this;return this.i.then((function(){var e=ch(t);if(e&&e.isAnonymous){var n=$r({providerId:null,isNewUser:!1});return $r({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return uh(t,t.a.yb()).then((function(e){var n=e.user;return Ic(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return ch(this)&&ch(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&ch(this)&&xc(ch(this))},t.Oc=function(t){var e=this;H(this.u,(function(n){n==t&&e.A--})),0>this.A&&(this.A=0),0==this.A&&ch(this)&&wc(ch(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),ph(this,this.i.then((function(){e.m||X(e.u,t)&&t(hh(e))})))},t.removeAuthTokenListener=function(t){Q(this.u,(function(e){return e==t}))},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Zc("local"),t.a,this.pa),this.b&&(kl(this.b,this),Hl(this.b.b)),Promise.resolve()},t.gc=function(t){return ph(this,function(t,e){return eu(t,Ts,{identifier:e,continueUri:Ir()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Ac=function(t){return!!Io(t)},t.vb=function(t,e){var n=this;return ph(this,Ae().then((function(){var t=new Pi(e);if(!t.c)throw new T("argument-error",Li+" must be true when sending sign in link to email");return zi(t)})).then((function(e){return n.a.vb(t,e)})).then((function(){})))},t.hd=function(t){return this.Qa(t).then((function(t){return t.data.email}))},t.mb=function(t,e){return ph(this,this.a.mb(t,e).then((function(){})))},t.Qa=function(t){return ph(this,this.a.Qa(t).then((function(t){return new si(t)})))},t.ib=function(t){return ph(this,this.a.ib(t).then((function(){})))},t.ub=function(t,e){var n=this;return ph(this,Ae().then((function(){return void 0===e||pt(e)?{}:zi(new Pi(e))})).then((function(e){return n.a.ub(t,e)})).then((function(){})))},t.Vc=function(t,e){return ph(this,Ql(this,t,e,x(this.Za,this)))},t.Uc=function(t,e){var n=this;return ph(this,Ae().then((function(){var r=e||lr(),i=ko(t,r);if(!(r=Io(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.S())throw new T("tenant-id-mismatch");return n.Za(i)})))},dh.prototype.render=function(){},dh.prototype.reset=function(){},dh.prototype.getResponse=function(){},dh.prototype.execute=function(){};var vh=null;function gh(t,e){return(e=yh(e))&&t.a[e]||null}function yh(t){return(t=void 0===t?1e12:t)?t.toString():null}function bh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ae(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function _h(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function xh(){}function wh(){}mh.prototype.render=function(t,e){return this.a[this.b.toString()]=new bh(t,e),this.b++},mh.prototype.reset=function(t){var e=gh(this,t);t=yh(t),e&&t&&(e.delete(),delete this.a[t])},mh.prototype.getResponse=function(t){return(t=gh(this,t))?t.getResponse():null},mh.prototype.execute=function(t){(t=gh(this,t))&&t.execute()},bh.prototype.getResponse=function(){return _h(this),this.b},bh.prototype.execute=function(){_h(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},bh.prototype.delete=function(){_h(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},Zr(xh,"FACTOR_ID","phone"),wh.prototype.g=function(){return vh||(vh=new mh),Ae(vh)},wh.prototype.c=function(){};var Eh=null;function Sh(){this.b=u.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Th=new yt(xt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ah=new Br(3e4,6e4);Sh.prototype.g=function(t){var e=this;return new be((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),Ah.get());!u.grecaptcha||t!==e.f&&!e.b?(u[e.a]=function(){if(u.grecaptcha){e.f=t;var o=u.grecaptcha.render;u.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(u.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete u[e.a]},Ae(Va(Tt(Th,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(u.grecaptcha))}))},Sh.prototype.c=function(){this.b--};var Mh=null;function Ch(t,e,n,r,i,o,a){if(Zr(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,a?(Eh||(Eh=new wh),a=Eh):(Mh||(Mh=new Sh),a=Mh),this.v=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ih],!u.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ae(e)||!this.i&&ae(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Qa(t,o||null,i||null),this.u=r||function(){return null};var s=this;this.l=[];var l=this.a[Oh];this.a[Oh]=function(t){if(Lh(s,t),"function"==typeof l)l(t);else if("string"==typeof l){var e=Or(l,u);"function"==typeof e&&e(t)}};var c=this.a[Ph];this.a[Ph]=function(){if(Lh(s,null),"function"==typeof c)c();else if("string"==typeof c){var t=Or(c,u);"function"==typeof t&&t()}}}var Oh="callback",Ph="expired-callback",kh="sitekey",Ih="size";function Lh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Rh(t,e){return t.h.push(e),e.na((function(){Y(t.h,e)})),e}function Dh(t){if(t.A)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Nh(t,n,r){var i=!1;try{this.b=r||e.app()}catch(t){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");r=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=e.SDK_VERSION?Mr(e.SDK_VERSION,a):null,Ch.call(this,r,t,n,(function(){try{var t=o.b.auth().ka()}catch(e){t=null}return t}),a,k(M),i)}function Fh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],0>i||i>=jh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=jh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Ch.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Rh(this,Ae().then((function(){if(Ir()&&!_r())return gr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.v.g(t.u())})).then((function(e){return t.g=e,eu(t.o,js,{})})).then((function(e){t.a[kh]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},t.render=function(){Dh(this);var t=this;return Rh(this,this.Ia().then((function(){if(null===t.c){var e=t.m;if(!t.i){var n=ae(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!oe&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Vt(a.name),'"'),a.type){o.push(' type="',Vt(a.type),'"');var s={};vt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=fe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):se(o,a)),2<r.length&&he(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Dh(this);var t=this;return Rh(this,this.render().then((function(e){return new be((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Dh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Dh(this),this.A=!0,this.v.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ae(this.m);for(var e;e=t.firstChild;)t.removeChild(e)}},S(Nh,Ch);var jh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Uh(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function zh(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Bh(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:m}}function Vh(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Hh(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Gh(t){return{name:t?t+"Credential":"credential",J:t?"a valid "+t+" credential":"a valid credential",optional:!1,K:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ja||!n)}}}function Wh(t,e){return m(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function qh(t){return m(t)&&"string"==typeof t.uid}function Xh(t,e,n,r){return{name:n||"",J:t.J+" or "+e.J,optional:!!r,K:function(n){return t.K(n)||e.K(n)}}}function Yh(t,e){for(var n in e){var r=e[n].name;t[r]=Kh(r,t[n],e[n].j)}}function Qh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Fh(t,[n],[r],!0),this[e]=r}),r,n,e[n].jb),enumerable:!0})}}function Zh(t,e,n,r){t[e]=Kh(e,n,r)}function Kh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Fh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Yh(eh.prototype,{ib:{name:"applyActionCode",j:[Uh("code")]},Qa:{name:"checkActionCode",j:[Uh("code")]},mb:{name:"confirmPasswordReset",j:[Uh("code"),Uh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Uh("email"),Uh("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Uh("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Uh("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Xh(Bh(),Vh(),"nextOrObserver"),Vh("opt_error",!0),Vh("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Xh(Bh(),Vh(),"nextOrObserver"),Vh("opt_error",!0),Vh("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Uh("email"),Xh(Bh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Uh("email"),Bh("actionCodeSettings")]},wb:{name:"setPersistence",j:[Uh("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Gh()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Gh()]},Sc:{name:"signInWithCustomToken",j:[Uh("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Uh("email"),Uh("password")]},Uc:{name:"signInWithEmailLink",j:[Uh("email"),Uh("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Wc:{name:"signInWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Xc:{name:"signInWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},cd:{name:"updateCurrentUser",j:[Xh({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof mc)}},Hh(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Uh("url")]},hd:{name:"verifyPasswordResetCode",j:[Uh("code")]}}),Qh(eh.prototype,{lc:{name:"languageCode",jb:Xh(Uh(),Hh(),"languageCode")},ti:{name:"tenantId",jb:Xh(Uh(),Hh(),"tenantId")}}),eh.Persistence=Zu,eh.Persistence.LOCAL="local",eh.Persistence.SESSION="session",eh.Persistence.NONE="none",Yh(mc.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[zh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[zh("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Gh()]},pb:{name:"linkWithCredential",j:[Gh()]},Cc:{name:"linkWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Dc:{name:"linkWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ec:{name:"linkWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Gh()]},sb:{name:"reauthenticateWithCredential",j:[Gh()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Uh("phoneNumber"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Mc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Nc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Xh(Bh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Uh(null,!0)]},bd:{name:"unlink",j:[Uh("provider")]},Ab:{name:"updateEmail",j:[Uh("email")]},Bb:{name:"updatePassword",j:[Uh("password")]},dd:{name:"updatePhoneNumber",j:[Gh("phone")]},Cb:{name:"updateProfile",j:[Bh("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Uh("email"),Xh(Bh("opt_actionCodeSettings",!0),Hh(null,!0),"opt_actionCodeSettings",!0)]}}),Yh(mh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(dh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Yh(be.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Qh(Xl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:zh("appVerificationDisabledForTesting")}}),Yh(Yl.prototype,{confirm:{name:"confirm",j:[Uh("verificationCode")]}}),Zh(uo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[vo,Oo,Ro,fo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xh(Uh(),Bh(),"json")]),Zh(Po,"credential",(function(t,e){return new Co(t,e)}),[Uh("email"),Uh("password")]),Yh(Co.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(_o.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Zh(_o,"credential",xo,[Xh(Uh(),Bh(),"token")]),Zh(Po,"credentialWithLink",ko,[Uh("email"),Uh("emailLink")]),Yh(wo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Zh(wo,"credential",Eo,[Xh(Uh(),Bh(),"token")]),Yh(So.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Zh(So,"credential",To,[Xh(Uh(),Xh(Bh(),Hh()),"idToken"),Xh(Uh(),Hh(),"accessToken",!0)]),Yh(Ao.prototype,{Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Zh(Ao,"credential",Mo,[Xh(Uh(),Bh(),"token"),Uh("secret",!0)]),Yh(bo.prototype,{Ca:{name:"addScope",j:[Uh("scope")]},credential:{name:"credential",j:[Xh(Uh(),Xh(Bh(),Hh()),"optionsOrIdToken"),Xh(Uh(),Hh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Bh("customOAuthParameters")]}}),Yh(po.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(co.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Zh(No,"credential",Fo,[Uh("verificationId"),Uh("verificationCode")]),Yh(No.prototype,{eb:{name:"verifyPhoneNumber",j:[Xh(Uh(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Wh(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Wh(t.session,so)&&qh(t.multiFactorHint):t.session&&t.multiFactorUid?Wh(t.session,so)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Yh(Lo.prototype,{w:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(T.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(qo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Wo.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(tc.prototype,{toJSON:{name:"toJSON",j:[Uh(null,!0)]}}),Yh(Kl.prototype,{Qc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}]}}),Yh(ac.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}},Uh("displayName",!0)]},ad:{name:"unenroll",j:[Xh({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:qh},Uh(),"multiFactorInfoIdentifier")]}}),Yh(Nh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zh(xi,"parseLink",Oi,[Uh("link")]),Zh(xh,"assertion",(function(t){return new ic(t)}),[Gh("phone")]),function(){if(void 0===e||!e.INTERNAL||!e.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:li,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ui,VERIFY_AND_CHANGE_EMAIL:ci,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:eh,AuthCredential:uo,Error:T};Zh(t,"EmailAuthProvider",Po,[]),Zh(t,"FacebookAuthProvider",_o,[]),Zh(t,"GithubAuthProvider",wo,[]),Zh(t,"GoogleAuthProvider",So,[]),Zh(t,"TwitterAuthProvider",Ao,[]),Zh(t,"OAuthProvider",bo,[Uh("providerId")]),Zh(t,"SAMLAuthProvider",yo,[Uh("providerId")]),Zh(t,"PhoneAuthProvider",No,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof eh)}}]),Zh(t,"RecaptchaVerifier",Nh,[Xh(Uh(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Bh("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof e.app.App)}}]),Zh(t,"ActionCodeURL",xi,[]),Zh(t,"PhoneMultiFactorGenerator",xh,[]),e.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new eh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),e.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:x((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:x(t.mc,t),addAuthTokenListener:x(t.cc,t),removeAuthTokenListener:x(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),e.registerVersion("@firebase/auth","0.15.0"),e.INTERNAL.extendNamespace({User:mc})}()}).apply(void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},1178:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9312),i=n(9766),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),a="[DEFAULT]",s=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=a);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=r.__assign({identifier:a,optional:!1},t),n=e.identifier,i=e.optional,o=this.normalizeInstanceIdentifier(n);try{var s=this.getOrInitializeService(o);if(!s){if(i)return null;throw Error("Service "+this.name+" is not available")}return s}catch(t){if(i)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(a)}catch(t){}try{for(var i=r.__values(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var s=r.__read(o.value,2),u=s[0],l=s[1],c=this.normalizeInstanceIdentifier(u);try{var h=this.getOrInitializeService(c);l.resolve(h)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=a),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(r.__spread(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})),t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()}))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===a?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:a:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();e.Component=o,e.ComponentContainer=u,e.Provider=s},654:(t,e,n)=>{"use strict";var r=n(9312),i=n(2583),o=n(1549),a=n(9766),s=n(1216),u=n(1178),l=function(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(i),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},h=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return r.__extends(e,t),e}(Error),f=new o.Logger("@firebase/firestore");function p(){return f.logLevel}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.DEBUG){var i=e.map(g);f.debug.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function m(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.ERROR){var i=e.map(g);f.error.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(f.logLevel<=o.LogLevel.WARN){var i=e.map(g);f.warn.apply(f,r.__spreadArrays(["Firestore (7.24.0): "+t],i))}}function g(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function y(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (7.24.0) INTERNAL ASSERTION FAILED: "+t;throw m(e),new Error(e)}function b(t,e){t||y()}function _(t,e){return t}function x(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function w(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function E(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var S=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&y(),void 0===n?n=t.length-e:n>t.length-e&&y(),this.segments=t,this.offset=e,this.t=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.t},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.i(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.o(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.u=function(t){return t=void 0===t?1:t,this.o(this.segments,this.offset+t,this.length-t)},t.prototype.h=function(){return this.o(this.segments,this.offset,this.length-1)},t.prototype.l=function(){return this.segments[this.offset]},t.prototype._=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.m=function(){return 0===this.length},t.prototype.T=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.I=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.A=function(){return this.segments.slice(this.offset,this.limit())},t.i=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),T=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.prototype.R=function(){return this.A().join("/")},e.prototype.toString=function(){return this.R()},e.g=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new h(c.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.P=function(){return new e([])},e}(S),A=/^[_a-zA-Z][_a-zA-Z0-9]*$/,M=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.o=function(t,n,r){return new e(t,n,r)},e.V=function(t){return A.test(t)},e.prototype.R=function(){return this.A().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.V(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.R()},e.prototype.p=function(){return 1===this.length&&"__name__"===this.get(0)},e.v=function(){return new e(["__name__"])},e.S=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new h(c.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new h(c.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new h(c.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.P=function(){return new e([])},e}(S),C=function(){function t(t){this.path=t}return t.D=function(e){return new t(T.g(e))},t.C=function(e){return new t(T.g(e).u(5))},t.prototype.N=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===T.i(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.i=function(t,e){return T.i(t.path,e.path)},t.F=function(t){return t.length%2==0},t.$=function(e){return new t(new T(e.slice()))},t}();function O(t,e){if(0!==e.length)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+X(e.length,"argument")+".")}function P(t,e,n){if(e.length!==n)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires "+X(n,"argument")+", but was called with "+X(e.length,"argument")+".")}function k(t,e,n){if(e.length<n)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires at least "+X(n,"argument")+", but was called with "+X(e.length,"argument")+".")}function I(t,e,n,r){if(e.length<n||e.length>r)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+X(e.length,"argument")+".")}function L(t,e,n,r){U(t,e,q(n)+" argument",r)}function R(t,e,n,r){void 0!==r&&L(t,e,n,r)}function D(t,e,n,r){U(t,e,n+" option",r)}function N(t,e,n,r){void 0!==r&&D(t,e,n,r)}function F(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(B(u))}var l=B(r);throw new h(c.INVALID_ARGUMENT,"Invalid value "+l+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function j(t,e,n,r){if(!e.some((function(t){return t===r})))throw new h(c.INVALID_ARGUMENT,"Invalid value "+B(r)+" provided to function "+t+"() for its "+q(n)+" argument. Acceptable values: "+e.join(", "));return r}function U(t,e,n,r){if(!("object"===e?z(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=B(r);throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function z(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function B(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":y()}function V(t,e,n){if(void 0===n)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+q(e)+" argument, but it was undefined.")}function H(t,e,n){w(e,(function(e,r){if(n.indexOf(e)<0)throw new h(c.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function G(t,e,n,r){var i=B(r);return new h(c.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(n)+" argument to be a "+e+", but it was: "+i)}function W(t,e,n){if(n<=0)throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(e)+" argument to be a positive number, but it was: "+n+".")}function q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function X(t,e){return t+" "+e+(1===t?"":"s")}function Y(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Q=function(){function t(){}return t.k=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Y(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Z(t,e){return t<e?-1:t>e?1:0}function K(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function $(t){return t+"\0"}var J=function(){function t(t){this.M=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.M,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.M)},t.prototype.O=function(){return 2*this.M.length},t.prototype.L=function(t){return Z(this.M,t.M)},t.prototype.isEqual=function(t){return this.M===t.M},t}();J.B=new J("");var tt=function(){function t(t){this.q=t}return t.fromBase64String=function(e){try{return new t(J.fromBase64String(e))}catch(e){throw new h(c.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(J.fromUint8Array(e))},t.prototype.toBase64=function(){return this.q.toBase64()},t.prototype.toUint8Array=function(){return this.q.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.q.isEqual(t.q)},t}();function et(){if("undefined"==typeof Uint8Array)throw new h(c.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function nt(){if("undefined"==typeof atob)throw new h(c.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.fromBase64String=function(t){P("Blob.fromBase64String",arguments,1),L("Blob.fromBase64String","string",1,t),nt();try{return new e(J.fromBase64String(t))}catch(t){throw new h(c.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},e.fromUint8Array=function(t){if(P("Blob.fromUint8Array",arguments,1),et(),!(t instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,t);return new e(J.fromUint8Array(t))},e.prototype.toBase64=function(){return P("Blob.toBase64",arguments,0),nt(),t.prototype.toBase64.call(this)},e.prototype.toUint8Array=function(){return P("Blob.toUint8Array",arguments,0),et(),t.prototype.toUint8Array.call(this)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(tt),it=function(t,e,n,r,i,o){this.U=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.W=o},ot=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"j",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.L=function(t){return Z(this.projectId,t.projectId)||Z(this.database,t.database)},t}(),at=function(){function t(t,e){this.K=t,this.G=e,this.H={}}return t.prototype.get=function(t){var e=this.K(t),n=this.H[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.G(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.K(t),r=this.H[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.G(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.H[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.K(t),n=this.H[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.G(n[r][0],t))return 1===n.length?delete this.H[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){w(this.H,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.m=function(){return E(this.H)},t}(),st=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new h(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new h(c.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new h(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new h(c.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.Y=function(t){return this.seconds===t.seconds?Z(this.nanoseconds,t.nanoseconds):Z(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ut=function(){function t(t){this.timestamp=t}return t.J=function(e){return new t(e)},t.min=function(){return new t(new st(0,0))},t.prototype.L=function(t){return this.timestamp.Y(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.X=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.Z=function(){return this.timestamp},t}();function lt(t){return null==t}function ct(t){return 0===t&&1/t==-1/0}function ht(t){return"number"==typeof t&&Number.isInteger(t)&&!ct(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ft=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.tt=null};function pt(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new ft(t,e,n,r,i,o,a)}function dt(t){var e=_(t);if(null===e.tt){var n=e.path.R();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.R()+t.op.toString()+oe(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.R()+e.dir;var e})).join(","),lt(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=cr(e.startAt)),e.endAt&&(n+="|ub:",n+=cr(e.endAt)),e.tt=n}return e.tt}function mt(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!mr(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ee(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!fr(t.startAt,e.startAt)&&fr(t.endAt,e.endAt)}function vt(t){return C.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}var gt,yt,bt=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=ut.min()),void 0===o&&(o=ut.min()),void 0===a&&(a=J.B),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.st=function(e){return new t(this.target,this.targetId,this.et,e,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.it=function(e,n){return new t(this.target,this.targetId,this.et,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.rt=function(e){return new t(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,e,this.resumeToken)},t}(),_t=function(t){this.count=t};function xt(t){switch(t){case c.OK:return y();case c.CANCELLED:case c.UNKNOWN:case c.DEADLINE_EXCEEDED:case c.RESOURCE_EXHAUSTED:case c.INTERNAL:case c.UNAVAILABLE:case c.UNAUTHENTICATED:return!1;case c.INVALID_ARGUMENT:case c.NOT_FOUND:case c.ALREADY_EXISTS:case c.PERMISSION_DENIED:case c.FAILED_PRECONDITION:case c.ABORTED:case c.OUT_OF_RANGE:case c.UNIMPLEMENTED:case c.DATA_LOSS:return!0;default:return y()}}function wt(t){if(void 0===t)return m("GRPC error has no .code"),c.UNKNOWN;switch(t){case gt.OK:return c.OK;case gt.CANCELLED:return c.CANCELLED;case gt.UNKNOWN:return c.UNKNOWN;case gt.DEADLINE_EXCEEDED:return c.DEADLINE_EXCEEDED;case gt.RESOURCE_EXHAUSTED:return c.RESOURCE_EXHAUSTED;case gt.INTERNAL:return c.INTERNAL;case gt.UNAVAILABLE:return c.UNAVAILABLE;case gt.UNAUTHENTICATED:return c.UNAUTHENTICATED;case gt.INVALID_ARGUMENT:return c.INVALID_ARGUMENT;case gt.NOT_FOUND:return c.NOT_FOUND;case gt.ALREADY_EXISTS:return c.ALREADY_EXISTS;case gt.PERMISSION_DENIED:return c.PERMISSION_DENIED;case gt.FAILED_PRECONDITION:return c.FAILED_PRECONDITION;case gt.ABORTED:return c.ABORTED;case gt.OUT_OF_RANGE:return c.OUT_OF_RANGE;case gt.UNIMPLEMENTED:return c.UNIMPLEMENTED;case gt.DATA_LOSS:return c.DATA_LOSS;default:return y()}}(yt=gt||(gt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";var Et=function(){function t(t,e){this.i=t,this.root=e||Tt.EMPTY}return t.prototype.ot=function(e,n){return new t(this.i,this.root.ot(e,n,this.i).copy(null,null,Tt.at,null,null))},t.prototype.remove=function(e){return new t(this.i,this.root.remove(e,this.i).copy(null,null,Tt.at,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.m();){var n=this.i(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.m();){var r=this.i(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.m=function(){return this.root.m()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.ct=function(){return this.root.ct()},t.prototype.ut=function(){return this.root.ut()},t.prototype.ht=function(t){return this.root.ht(t)},t.prototype.forEach=function(t){this.ht((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.ht((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.lt=function(t){return this.root.lt(t)},t.prototype._t=function(){return new St(this.root,null,this.i,!1)},t.prototype.ft=function(t){return new St(this.root,t,this.i,!1)},t.prototype.dt=function(){return new St(this.root,null,this.i,!0)},t.prototype.wt=function(t){return new St(this.root,t,this.i,!0)},t}(),St=function(){function t(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.m();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}return t.prototype.It=function(){var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.m();)this.Et.push(t),t=t.right;else for(t=t.right;!t.m();)this.Et.push(t),t=t.left;return e},t.prototype.At=function(){return this.Et.length>0},t.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},t}(),Tt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.m=function(){return!1},t.prototype.ht=function(t){return this.left.ht(t)||t(this.key,this.value)||this.right.ht(t)},t.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},t.prototype.min=function(){return this.left.m()?this:this.left.min()},t.prototype.ct=function(){return this.min().key},t.prototype.ut=function(){return this.right.m()?this.key:this.right.ut()},t.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).gt()},t.prototype.Pt=function(){if(this.left.m())return t.EMPTY;var e=this;return e.left.yt()||e.left.left.yt()||(e=e.Vt()),(e=e.copy(null,null,null,e.left.Pt(),null)).gt()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.m()||i.left.yt()||i.left.left.yt()||(i=i.Vt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.yt()&&(i=i.bt()),i.right.m()||i.right.yt()||i.right.left.yt()||(i=i.vt()),0===n(e,i.key)){if(i.right.m())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Pt())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.gt()},t.prototype.yt=function(){return this.color},t.prototype.gt=function(){var t=this;return t.right.yt()&&!t.left.yt()&&(t=t.St()),t.left.yt()&&t.left.left.yt()&&(t=t.bt()),t.left.yt()&&t.right.yt()&&(t=t.Dt()),t},t.prototype.Vt=function(){var t=this.Dt();return t.right.left.yt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},t.prototype.vt=function(){var t=this.Dt();return t.left.left.yt()&&(t=(t=t.bt()).Dt()),t},t.prototype.St=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.bt=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},t.prototype.Nt=function(){if(this.yt()&&this.left.yt())throw y();if(this.right.yt())throw y();var t=this.left.Nt();if(t!==this.right.Nt())throw y();return t+(this.yt()?0:1)},t}();Tt.EMPTY=null,Tt.RED=!0,Tt.at=!1,Tt.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw y()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw y()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.ot=function(t,e,n){return new Tt(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.m=function(){return!0},t.prototype.ht=function(t){return!1},t.prototype.lt=function(t){return!1},t.prototype.ct=function(){return null},t.prototype.ut=function(){return null},t.prototype.yt=function(){return!1},t.prototype.Ct=function(){return!0},t.prototype.Nt=function(){return 0},t}());var At=function(){function t(t){this.i=t,this.data=new Et(this.i)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.ct()},t.prototype.last=function(){return this.data.ut()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.ht((function(e,n){return t(e),!1}))},t.prototype.Ft=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(this.i(r.key,t[1])>=0)return;e(r.key)}},t.prototype.xt=function(t,e){var n;for(n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},t.prototype.$t=function(t){var e=this.data.ft(t);return e.At()?e.It().key:null},t.prototype._t=function(){return new Mt(this.data._t())},t.prototype.ft=function(t){return new Mt(this.data.ft(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.m=function(){return this.data.m()},t.prototype.kt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data._t(),r=e.data._t();n.At();){var i=n.It().key,o=r.It().key;if(0!==this.i(i,o))return!1}return!0},t.prototype.A=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.i);return n.data=e,n},t}(),Mt=function(){function t(t){this.Mt=t}return t.prototype.It=function(){return this.Mt.It().key},t.prototype.At=function(){return this.Mt.At()},t}(),Ct=new Et(C.i);function Ot(){return Ct}function Pt(){return Ot()}var kt=new Et(C.i);function It(){return kt}var Lt=new Et(C.i),Rt=new At(C.i);function Dt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Rt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Nt=new At(Z);function Ft(){return Nt}var jt=function(){function t(t){this.i=t?function(e,n){return t(e,n)||C.i(e.key,n.key)}:function(t,e){return C.i(t.key,e.key)},this.Ot=It(),this.Lt=new Et(this.i)}return t.Bt=function(e){return new t(e.i)},t.prototype.has=function(t){return null!=this.Ot.get(t)},t.prototype.get=function(t){return this.Ot.get(t)},t.prototype.first=function(){return this.Lt.ct()},t.prototype.last=function(){return this.Lt.ut()},t.prototype.m=function(){return this.Lt.m()},t.prototype.indexOf=function(t){var e=this.Ot.get(t);return e?this.Lt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Lt.ht((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ot.ot(t.key,t),e.Lt.ot(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ot.remove(t),this.Lt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Lt._t(),r=e.Lt._t();n.At();){var i=n.It().key,o=r.It().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.i=this.i,r.Ot=e,r.Lt=n,r},t}(),Ut=function(){function t(){this.qt=new Et(C.i)}return t.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);n?0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):y():this.qt=this.qt.ot(e,t)},t.prototype.Ut=function(){var t=[];return this.qt.ht((function(e,n){t.push(n)})),t},t}(),zt=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.Qt=n,this.docChanges=r,this.Wt=i,this.fromCache=o,this.jt=a,this.Kt=s}return t.Gt=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,jt.Bt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.Wt.m()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.jt===t.jt&&this.Wt.isEqual(t.Wt)&&Qn(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Qt.isEqual(t.Qt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Bt=function(){function t(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Yt=r,this.Jt=i}return t.Xt=function(e,n){var r=new Map;return r.set(e,Vt.Zt(e,n)),new t(ut.min(),r,Ft(),Ot(),Dt())},t}(),Vt=function(){function t(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}return t.Zt=function(e,n){return new t(J.B,n,Dt(),Dt(),Dt())},t}(),Ht=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},Gt=function(t,e){this.targetId=t,this.oe=e},Wt=function(t,e,n,r){void 0===n&&(n=J.B),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},qt=function(){function t(){this.ae=0,this.ce=Qt(),this.ue=J.B,this.he=!1,this.le=!0}return Object.defineProperty(t.prototype,"te",{get:function(){return this.he},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),t.prototype.de=function(t){t.O()>0&&(this.le=!0,this.ue=t)},t.prototype.we=function(){var t=Dt(),e=Dt(),n=Dt();return this.ce.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:y()}})),new Vt(this.ue,this.he,t,e,n)},t.prototype.me=function(){this.le=!1,this.ce=Qt()},t.prototype.Te=function(t,e){this.le=!0,this.ce=this.ce.ot(t,e)},t.prototype.Ee=function(t){this.le=!0,this.ce=this.ce.remove(t)},t.prototype.Ie=function(){this.ae+=1},t.prototype.Ae=function(){this.ae-=1},t.prototype.Re=function(){this.le=!0,this.he=!0},t}(),Xt=function(){function t(t){this.ge=t,this.Pe=new Map,this.ye=Ot(),this.Ve=Yt(),this.pe=new At(Z)}return t.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof Ln?this.ve(r,t.re):t.re instanceof Rn&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var a=o[i];this.Se(a,t.key,t.re)}},t.prototype.De=function(t){var e=this;this.Ce(t,(function(n){var r=e.Ne(n);switch(t.state){case 0:e.Fe(n)&&r.de(t.resumeToken);break;case 1:r.Ae(),r._e||r.me(),r.de(t.resumeToken);break;case 2:r.Ae(),r._e||e.removeTarget(n);break;case 3:e.Fe(n)&&(r.Re(),r.de(t.resumeToken));break;case 4:e.Fe(n)&&(e.xe(n),r.de(t.resumeToken));break;default:y()}}))},t.prototype.Ce=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Pe.forEach((function(t,r){n.Fe(r)&&e(r)}))},t.prototype.$e=function(t){var e=t.targetId,n=t.oe.count,r=this.ke(e);if(r){var i=r.target;if(vt(i))if(0===n){var o=new C(i.path);this.Se(e,o,new Rn(o,ut.min()))}else b(1===n);else this.Me(e)!==n&&(this.xe(e),this.pe=this.pe.add(e))}},t.prototype.Oe=function(t){var e=this,n=new Map;this.Pe.forEach((function(r,i){var o=e.ke(i);if(o){if(r.te&&vt(o.target)){var a=new C(o.target.path);null!==e.ye.get(a)||e.Le(i,a)||e.Se(i,a,new Rn(a,t))}r.fe&&(n.set(i,r.we()),r.me())}}));var r=Dt();this.Ve.forEach((function(t,n){var i=!0;n.xt((function(t){var n=e.ke(t);return!n||2===n.et||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Bt(t,n,this.pe,this.ye,r);return this.ye=Ot(),this.Ve=Yt(),this.pe=new At(Z),i},t.prototype.ve=function(t,e){if(this.Fe(t)){var n=this.Le(t,e.key)?2:0;this.Ne(t).Te(e.key,n),this.ye=this.ye.ot(e.key,e),this.Ve=this.Ve.ot(e.key,this.Be(e.key).add(t))}},t.prototype.Se=function(t,e,n){if(this.Fe(t)){var r=this.Ne(t);this.Le(t,e)?r.Te(e,1):r.Ee(e),this.Ve=this.Ve.ot(e,this.Be(e).delete(t)),n&&(this.ye=this.ye.ot(e,n))}},t.prototype.removeTarget=function(t){this.Pe.delete(t)},t.prototype.Me=function(t){var e=this.Ne(t).we();return this.ge.qe(t).size+e.ee.size-e.se.size},t.prototype.Ie=function(t){this.Ne(t).Ie()},t.prototype.Ne=function(t){var e=this.Pe.get(t);return e||(e=new qt,this.Pe.set(t,e)),e},t.prototype.Be=function(t){var e=this.Ve.get(t);return e||(e=new At(Z),this.Ve=this.Ve.ot(t,e)),e},t.prototype.Fe=function(t){var e=null!==this.ke(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ke=function(t){var e=this.Pe.get(t);return e&&e._e?null:this.ge.Ue(t)},t.prototype.xe=function(t){var e=this;this.Pe.set(t,new qt),this.ge.qe(t).forEach((function(n){e.Se(t,n,null)}))},t.prototype.Le=function(t,e){return this.ge.qe(t).has(e)},t}();function Yt(){return new Et(C.i)}function Qt(){return new Et(C.i)}function Zt(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Kt(t){var e=t.mapValue.fields.__previous_value__;return Zt(e)?Kt(e):e}function $t(t){var e=se(t.mapValue.fields.__local_write_time__.timestampValue);return new st(e.seconds,e.nanos)}var Jt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function te(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Zt(t)?4:10:y()}function ee(t,e){var n=te(t);if(n!==te(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $t(t).isEqual($t(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=se(t.timestampValue),r=se(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return le(t.bytesValue).isEqual(le(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ue(t.geoPointValue.latitude)===ue(e.geoPointValue.latitude)&&ue(t.geoPointValue.longitude)===ue(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ue(t.integerValue)===ue(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ue(t.doubleValue),r=ue(e.doubleValue);return n===r?ct(n)===ct(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return K(t.arrayValue.values||[],e.arrayValue.values||[],ee);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(x(n)!==x(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ee(n[i],r[i])))return!1;return!0}(t,e);default:return y()}}function ne(t,e){return void 0!==(t.values||[]).find((function(t){return ee(t,e)}))}function re(t,e){var n=te(t),r=te(e);if(n!==r)return Z(n,r);switch(n){case 0:return 0;case 1:return Z(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ue(t.integerValue||t.doubleValue),r=ue(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ie(t.timestampValue,e.timestampValue);case 4:return ie($t(t),$t(e));case 5:return Z(t.stringValue,e.stringValue);case 6:return function(t,e){var n=le(t),r=le(e);return n.L(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Z(n[i],r[i]);if(0!==o)return o}return Z(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Z(ue(t.latitude),ue(e.latitude));return 0!==n?n:Z(ue(t.longitude),ue(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=re(n[i],r[i]);if(o)return o}return Z(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=Z(r[a],o[a]);if(0!==s)return s;var u=re(n[r[a]],i[o[a]]);if(0!==u)return u}return Z(r.length,o.length)}(t.mapValue,e.mapValue);default:throw y()}}function ie(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Z(t,e);var n=se(t),r=se(e),i=Z(n.seconds,r.seconds);return 0!==i?i:Z(n.nanos,r.nanos)}function oe(t){return ae(t)}function ae(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=se(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?le(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,C.C(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=ae(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+ae(t.fields[o])}return e+"}"}(t.mapValue):y();var e,n}function se(t){if(b(!!t),"string"==typeof t){var e=0,n=Jt.exec(t);if(b(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ue(t.seconds),nanos:ue(t.nanos)}}function ue(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function le(t){return"string"==typeof t?J.fromBase64String(t):J.fromUint8Array(t)}function ce(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.R()}}function he(t){return!!t&&"integerValue"in t}function fe(t){return!!t&&"arrayValue"in t}function pe(t){return!!t&&"nullValue"in t}function de(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function me(t){return!!t&&"mapValue"in t}var ve={asc:"ASCENDING",desc:"DESCENDING"},ge={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ye=function(t,e){this.U=t,this.Qe=e};function be(t){return{integerValue:""+t}}function _e(t,e){if(t.Qe){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ct(e)?"-0":e}}function xe(t,e){return ht(e)?be(e):_e(t,e)}function we(t,e){return t.Qe?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ee(t,e){return t.Qe?e.toBase64():e.toUint8Array()}function Se(t,e){return we(t,e.Z())}function Te(t){return b(!!t),ut.J(function(t){var e=se(t);return new st(e.seconds,e.nanos)}(t))}function Ae(t,e){return function(t){return new T(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).R()}function Me(t){var e=T.g(t);return b(Ze(e)),e}function Ce(t,e){return Ae(t.U,e.path)}function Oe(t,e){var n=Me(e);return b(n.get(1)===t.U.projectId),b(!n.get(3)&&!t.U.database||n.get(3)===t.U.database),new C(Le(n))}function Pe(t,e){return Ae(t.U,e)}function ke(t){var e=Me(t);return 4===e.length?T.P():Le(e)}function Ie(t){return new T(["projects",t.U.projectId,"databases",t.U.database]).R()}function Le(t){return b(t.length>4&&"documents"===t.get(4)),t.u(5)}function Re(t,e,n){return{name:Ce(t,e),fields:n.proto.mapValue.fields}}function De(t,e){var n;if(e instanceof xn)n={update:Re(t,e.key,e.value)};else if(e instanceof Mn)n={delete:Ce(t,e.key)};else if(e instanceof wn)n={update:Re(t,e.key,e.data),updateMask:Qe(e.We)};else if(e instanceof Sn)n={transform:{document:Ce(t,e.key),fieldTransforms:e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof en)return{fieldPath:e.field.R(),setToServerValue:"REQUEST_TIME"};if(n instanceof nn)return{fieldPath:e.field.R(),appendMissingElements:{values:n.elements}};if(n instanceof on)return{fieldPath:e.field.R(),removeAllFromArray:{values:n.elements}};if(n instanceof sn)return{fieldPath:e.field.R(),increment:n.je};throw y()}(0,t)}))}};else{if(!(e instanceof Cn))return y();n={verify:Ce(t,e.key)}}return e.Ge.Ke||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Se(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:y()}(t,e.Ge)),n}function Ne(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?pn.updateTime(Te(t.updateTime)):void 0!==t.exists?pn.exists(t.exists):pn.ze()}(e.currentDocument):pn.ze();if(e.update){e.update.name;var r=Oe(t,e.update.name),i=new On({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){var e=t.fieldPaths||[];return new cn(e.map((function(t){return M.S(t)})))}(e.updateMask);return new wn(r,i,o,n)}return new xn(r,i,n)}if(e.delete){var a=Oe(t,e.delete);return new Mn(a,n)}if(e.transform){var s=Oe(t,e.transform.document),u=e.transform.fieldTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)b("REQUEST_TIME"===e.setToServerValue),n=new en;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new nn(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new on(i)}else"increment"in e?n=new sn(t,e.increment):y();var o=M.S(e.fieldPath);return new hn(o,n)}(t,e)}));return b(!0===n.exists),new Sn(s,u)}if(e.verify){var l=Oe(t,e.verify);return new Cn(l,n)}return y()}function Fe(t,e){return{documents:[Pe(t,e.path)]}}function je(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pe(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pe(t,r.h()),n.structuredQuery.from=[{collectionId:r._()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(de(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NAN"}};if(pe(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(de(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NOT_NAN"}};if(pe(t.value))return{unaryFilter:{field:We(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:We(t.field),op:Ge(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:We(t.field),direction:He(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.Qe||lt(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=Be(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Be(e.endAt)),n}function Ue(t){var e=ke(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){b(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=ze(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new pr(qe(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return lt(e="object"==typeof t?t.value:t)?null:e}(n.limit));var l=null;n.startAt&&(l=Ve(n.startAt));var c=null;return n.endAt&&(c=Ve(n.endAt)),Wn(Fn(e,i,s,a,u,"F",l,c))}function ze(t){return t?void 0!==t.unaryFilter?[Ye(t)]:void 0!==t.fieldFilter?[Xe(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return ze(t)})).reduce((function(t,e){return t.concat(e)})):y():[]}function Be(t){return{before:t.before,values:t.position}}function Ve(t){var e=!!t.before,n=t.values||[];return new lr(n,e)}function He(t){return ve[t]}function Ge(t){return ge[t]}function We(t){return{fieldPath:t.R()}}function qe(t){return M.S(t.fieldPath)}function Xe(t){return tr.create(qe(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return y()}}(t.fieldFilter.op),t.fieldFilter.value)}function Ye(t){switch(t.unaryFilter.op){case"IS_NAN":var e=qe(t.unaryFilter.field);return tr.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=qe(t.unaryFilter.field);return tr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qe(t.unaryFilter.field);return tr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qe(t.unaryFilter.field);return tr.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return y()}}function Qe(t){var e=[];return t.fields.forEach((function(t){return e.push(t.R())})),{fieldPaths:e}}function Ze(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var Ke=function(){this.He=void 0};function $e(t,e,n){return t instanceof en?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof nn?rn(t,e):t instanceof on?an(t,e):function(t,e){var n=tn(t,e),r=un(n)+un(t.je);return he(n)&&he(t.je)?be(r):_e(t.serializer,r)}(t,e)}function Je(t,e,n){return t instanceof nn?rn(t,e):t instanceof on?an(t,e):n}function tn(t,e){return t instanceof sn?he(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var en=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e}(Ke),nn=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ke);function rn(t,e){for(var n=ln(e),r=function(t){n.some((function(e){return ee(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var on=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return r.__extends(e,t),e}(Ke);function an(t,e){for(var n=ln(e),r=function(t){n=n.filter((function(e){return!ee(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var sn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.je=n,r}return r.__extends(e,t),e}(Ke);function un(t){return ue(t.integerValue||t.doubleValue)}function ln(t){return fe(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var cn=function(){function t(t){this.fields=t,t.sort(M.i)}return t.prototype.Ye=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].T(t))return!0;return!1},t.prototype.isEqual=function(t){return K(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),hn=function(t,e){this.field=t,this.transform=e},fn=function(t,e){this.version=t,this.transformResults=e},pn=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.ze=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"Ke",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function dn(t,e){return void 0!==t.updateTime?e instanceof Ln&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Ln}var mn=function(){};function vn(t,e,n){return t instanceof xn?function(t,e,n){return new Ln(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof wn?function(t,e,n){if(!dn(t.Ge,e))return new Dn(t.key,n.version);var r=En(t,e);return new Ln(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Sn?function(t,e,n){if(b(null!=n.transformResults),!dn(t.Ge,e))return new Dn(t.key,n.version);var r=Tn(0,e),i=function(t,e,n){var r=[];b(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=null;e instanceof Ln&&(s=e.field(o.field)),r.push(Je(a,s,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,a=An(t,r.data(),i);return new Ln(t.key,o,a,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Rn(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function gn(t,e,n,r){return t instanceof xn?function(t,e){if(!dn(t.Ge,e))return e;var n=_n(e);return new Ln(t.key,n,t.value,{Je:!0})}(t,e):t instanceof wn?function(t,e){if(!dn(t.Ge,e))return e;var n=_n(e),r=En(t,e);return new Ln(t.key,n,r,{Je:!0})}(t,e):t instanceof Sn?function(t,e,n,r){if(!dn(t.Ge,e))return e;var i=Tn(0,e),o=function(t,e,n,r){for(var i=[],o=0,a=t;o<a.length;o++){var s=a[o],u=s.transform,l=null;n instanceof Ln&&(l=n.field(s.field)),null===l&&r instanceof Ln&&(l=r.field(s.field)),i.push($e(u,l,e))}return i}(t.fieldTransforms,n,e,r),a=An(t,i.data(),o);return new Ln(t.key,i.version,a,{Je:!0})}(t,e,r,n):function(t,e){return dn(t.Ge,e)?new Rn(t.key,ut.min()):e}(t,e)}function yn(t,e){return t instanceof Sn?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e instanceof Ln?e.field(o.field):void 0,s=tn(o.transform,a||null);null!=s&&(n=null==n?(new Pn).set(o.field,s):n.set(o.field,s))}return n?n.Xe():null}(t,e):null}function bn(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.We.isEqual(e.We):2!==t.type||K(t.fieldTransforms,t.fieldTransforms,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof nn&&e instanceof nn||t instanceof on&&e instanceof on?K(t.elements,e.elements,ee):t instanceof sn&&e instanceof sn?ee(t.je,e.je):t instanceof en&&e instanceof en}(t.transform,e.transform)}(t,e)})))}function _n(t){return t instanceof Ln?t.version:ut.min()}var xn=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.Ge=r,i.type=0,i}return r.__extends(e,t),e}(mn),wn=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.We=r,o.Ge=i,o.type=1,o}return r.__extends(e,t),e}(mn);function En(t,e){return function(t,e){var n=new Pn(e);return t.We.fields.forEach((function(e){if(!e.m()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}})),n.Xe()}(t,e instanceof Ln?e.data():On.empty())}var Sn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.Ge=pn.exists(!0),r}return r.__extends(e,t),e}(mn);function Tn(t,e){return e}function An(t,e,n){for(var r=new Pn(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var Mn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=3,r}return r.__extends(e,t),e}(mn),Cn=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.Ge=n,r.type=4,r}return r.__extends(e,t),e}(mn),On=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.m())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!me(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t._()])||null},t.prototype.isEqual=function(t){return ee(this.proto,t.proto)},t}(),Pn=function(){function t(t){void 0===t&&(t=On.empty()),this.Ze=t,this.tn=new Map}return t.prototype.set=function(t,e){return this.en(t,e),this},t.prototype.delete=function(t){return this.en(t,null),this},t.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===te(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t._(),e)},t.prototype.Xe=function(){var t=this.nn(M.P(),this.tn);return null!=t?new On(t):this.Ze},t.prototype.nn=function(t,e){var n=this,r=!1,i=this.Ze.field(t),o=me(i)?Object.assign({},i.mapValue.fields):{};return e.forEach((function(e,i){if(e instanceof Map){var a=n.nn(t.child(i),e);null!=a&&(o[i]=a,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)})),r?{mapValue:{fields:o}}:null},t}();function kn(t){var e=[];return w(t.fields||{},(function(t,n){var r=new M([t]);if(me(n)){var i=kn(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new cn(e)}var In=function(t,e){this.key=t,this.version=e},Ln=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).sn=r,o.Je=!!i.Je,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return r.__extends(e,t),e.prototype.field=function(t){return this.sn.field(t)},e.prototype.data=function(){return this.sn},e.prototype.rn=function(){return this.sn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Je===t.Je&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Je+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.Je||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(In),Rn=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return r.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(In),Dn=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(In),Nn=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=a,this.endAt=s,this.cn=null,this.un=null,this.startAt,this.endAt};function Fn(t,e,n,r,i,o,a,s){return new Nn(t,e,n,r,i,o,a,s)}function jn(t){return new Nn(t)}function Un(t){return!lt(t.limit)&&"F"===t.an}function zn(t){return!lt(t.limit)&&"L"===t.an}function Bn(t){return t.on.length>0?t.on[0].field:null}function Vn(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.hn())return r.field}return null}function Hn(t){return null!==t.collectionGroup}function Gn(t){var e=_(t);if(null===e.cn){e.cn=[];var n=Vn(e),r=Bn(e);if(null!==n&&null===r)n.p()||e.cn.push(new pr(n)),e.cn.push(new pr(M.v(),"asc"));else{for(var i=!1,o=0,a=e.on;o<a.length;o++){var s=a[o];e.cn.push(s),s.field.p()&&(i=!0)}if(!i){var u=e.on.length>0?e.on[e.on.length-1].dir:"asc";e.cn.push(new pr(M.v(),u))}}}return e.cn}function Wn(t){var e=_(t);if(!e.un)if("F"===e.an)e.un=pt(e.path,e.collectionGroup,Gn(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Gn(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new pr(o.field,a))}var s=e.endAt?new lr(e.endAt.position,!e.endAt.before):null,u=e.startAt?new lr(e.startAt.position,!e.startAt.before):null;e.un=pt(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.un}function qn(t,e,n){return new Nn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xn(t,e){return new Nn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Yn(t,e){return new Nn(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Qn(t,e){return mt(Wn(t),Wn(e))&&t.an===e.an}function Zn(t){return dt(Wn(t))+"|lt:"+t.an}function Kn(t){return"Query(target="+function(t){var e=t.path.R();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.R()+" "+e.op+" "+oe(e.value);var e})).join(", ")+"]"),lt(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return(e=t).field.R()+" ("+e.dir+")";var e})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+cr(t.startAt)),t.endAt&&(e+=", endAt: "+cr(t.endAt)),"Target("+e+")"}(Wn(t))+"; limitType="+t.an+")"}function $n(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.N(t.collectionGroup)&&t.path.T(n):C.F(t.path)?t.path.isEqual(n):t.path.I(n)}(t,e)&&function(t,e){for(var n=0,r=t.on;n<r.length;n++){var i=r[n];if(!i.field.p()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!hr(t.startAt,Gn(t),e)||t.endAt&&hr(t.endAt,Gn(t),e))}(t,e)}function Jn(t){return function(e,n){for(var r=!1,i=0,o=Gn(t);i<o.length;i++){var a=o[i],s=dr(a,e,n);if(0!==s)return s;r=r||a.field.p()}return 0}}var tr=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return r.__extends(e,t),e.create=function(t,n,r){if(t.p())return"in"===n||"not-in"===n?this.ln(t,n,r):new er(t,n,r);if(pe(r)){if("=="!==n&&"!="!==n)throw new h(c.INVALID_ARGUMENT,"Invalid query. Null only supports '==' and '!=' comparisons.");return new e(t,n,r)}if(de(r)){if("=="!==n&&"!="!==n)throw new h(c.INVALID_ARGUMENT,"Invalid query. NaN only supports '==' and '!=' comparisons.");return new e(t,n,r)}return"array-contains"===n?new or(t,r):"in"===n?new ar(t,r):"not-in"===n?new sr(t,r):"array-contains-any"===n?new ur(t,r):new e(t,n,r)},e.ln=function(t,e,n){return"in"===e?new nr(t,n):new rr(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this._n(re(e,this.value)):null!==e&&te(this.value)===te(e)&&this._n(re(e,this.value))},e.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return y()}},e.prototype.hn=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),er=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=C.C(r.referenceValue),i}return r.__extends(e,t),e.prototype.matches=function(t){var e=C.i(t.key,this.key);return this._n(e)},e}(tr),nr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ir(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(tr),rr=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ir(0,n),r}return r.__extends(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(tr);function ir(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return C.C(t.referenceValue)}))}var or=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return fe(e)&&ne(e.arrayValue,this.value)},e}(tr),ar=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&ne(this.value.arrayValue,e)},e}(tr),sr=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){if(ne(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!ne(this.value.arrayValue,e)},e}(tr),ur=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return r.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!fe(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ne(e.value.arrayValue,t)}))},e}(tr),lr=function(t,e){this.position=t,this.before=e};function cr(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return oe(t)})).join(",")}function hr(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.p()?C.i(C.C(a.referenceValue),n.key):re(a,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function fr(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ee(t.position[n],e.position[n]))return!1;return!0}var pr=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function dr(t,e,n){var r=t.field.p()?C.i(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?re(r,i):y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return y()}}function mr(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var vr=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},gr=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.mn=r,this.Tn=i,this.En=0,this.In=null,this.An=Date.now(),this.reset()}return t.prototype.reset=function(){this.En=0},t.prototype.Rn=function(){this.En=this.Tn},t.prototype.gn=function(t){var e=this;this.cancel();var n=Math.floor(this.En+this.Pn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);i>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.En+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.In=this.fn.yn(this.dn,i,(function(){return e.An=Date.now(),t()})),this.En*=this.mn,this.En<this.wn&&(this.En=this.wn),this.En>this.Tn&&(this.En=this.Tn)},t.prototype.Vn=function(){null!==this.In&&(this.In.pn(),this.In=null)},t.prototype.cancel=function(){null!==this.In&&(this.In.cancel(),this.In=null)},t.prototype.Pn=function(){return(Math.random()-.5)*this.En},t}(),yr=function(){function t(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t((function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)}),(function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Dn&&y(),this.Dn=!0,this.Sn?this.error?this.Cn(n,this.error):this.Nn(e,this.result):new t((function(t,i){r.bn=function(n){r.Nn(e,n).next(t,i)},r.vn=function(e){r.Cn(n,e).next(t,i)}}))},t.prototype.Fn=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.xn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.Nn=function(e,n){return e?this.xn((function(){return e(n)})):t.resolve(n)},t.prototype.Cn=function(e,n){return e?this.xn((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.$n=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.kn=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.$n(r)},t}(),br=function(){function t(e,n,r){this.name=e,this.version=n,this.Mn=r,12.2===t.On(a.getUA())&&m("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return d("SimpleDb","Removing database:",t),Tr(window.indexedDB.deleteDatabase(t)).Fn()},t.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(t.Bn())return!0;var e=a.getUA(),n=t.On(e),r=0<n&&n<10,i=t.qn(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},t.Qn=function(t,e){return t.store(e)},t.On=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.qn=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Wn=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(d("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new xr(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new h(c.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new xr(t,n))},i.onupgradeneeded=function(t){d("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.Mn.createOrUpgrade(e,i.transaction,t.oldVersion,n.version).next((function(){d("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.jn&&(this.db.onversionchange=function(t){return n.jn(t)}),this.db)]}}))}))},t.prototype.Kn=function(t){this.jn=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,l;return r.__generator(this,(function(c){switch(c.label){case 0:o="readonly"===e,a=0,s=function(){var e,s,l,c,h;return r.__generator(this,(function(r){switch(r.label){case 0:++a,r.label=1;case 1:return r.trys.push([1,4,,5]),[4,u.Wn(t)];case 2:return u.db=r.sent(),e=Er.open(u.db,t,o?"readonly":"readwrite",n),s=i(e).catch((function(t){return e.abort(t),yr.reject(t)})).Fn(),l={},s.catch((function(){})),[4,e.Gn];case 3:return[2,(l.value=(r.sent(),s),l)];case 4:return c=r.sent(),h="FirebaseError"!==c.name&&a<3,d("SimpleDb","Transaction failed with error:",c.message,"Retrying:",h),u.close(),h?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},u=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(l=c.sent()))return[2,l.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),_r=function(){function t(t){this.zn=t,this.Hn=!1,this.Yn=null}return Object.defineProperty(t.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Jn",{get:function(){return this.Yn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Hn=!0},t.prototype.Xn=function(t){this.Yn=t},t.prototype.delete=function(){return Tr(this.zn.delete())},t}(),xr=function(t){function e(e,n){var r=this;return(r=t.call(this,c.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return r.__extends(e,t),e}(h);function wr(t){return"IndexedDbTransactionError"===t.name}var Er=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.Zn=new vr,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){e.error?n.Zn.reject(new xr(t,e.error)):n.Zn.resolve()},this.transaction.onerror=function(e){var r=Mr(e.target.error);n.Zn.reject(new xr(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new xr(n,e)}},Object.defineProperty(t.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Sr(e)},t}(),Sr=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Tr(n)},t.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Tr(this.store.add(t))},t.prototype.get=function(t){var e=this;return Tr(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Tr(this.store.delete(t))},t.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Tr(this.store.count())},t.prototype.ts=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.es(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.ns=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.ss=!1;var r=this.cursor(n);return this.es(r,(function(t,e,n){return n.delete()}))},t.prototype.rs=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.es(r,e)},t.prototype.os=function(t){var e=this.cursor({});return new yr((function(n,r){e.onerror=function(t){var e=Mr(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.es=function(t,e){var n=[];return new yr((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new _r(i),a=e(i.primaryKey,i.value,o);if(a instanceof yr){var s=a.catch((function(t){return o.done(),yr.reject(t)}));n.push(s)}o.Sn?r():null===o.Jn?i.continue():i.continue(o.Jn)}else r()}})).next((function(){return yr.$n(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Tr(t){return new yr((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Mr(t.target.error);n(e)}}))}var Ar=!1;function Mr(t){var e=br.On(a.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new h("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ar||(Ar=!0,setTimeout((function(){throw r}),0)),r}}return t}function Cr(){return"undefined"!=typeof window?window:null}function Or(){return"undefined"!=typeof document?document:null}var Pr=function(){function t(t,e,n,r,i){this.cs=t,this.dn=e,this.us=n,this.op=r,this.hs=i,this.ls=new vr,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch((function(t){}))}return t._s=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.fs=setTimeout((function(){return e.ds()}),t)},t.prototype.pn=function(){return this.ds()},t.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new h(c.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.ds=function(){var t=this;this.cs.ws((function(){return null!==t.fs?(t.clearTimeout(),t.op().then((function(e){return t.ls.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.fs&&(this.hs(this),clearTimeout(this.fs),this.fs=null)},t}(),kr=function(){function t(){var t=this;this.Ts=Promise.resolve(),this.Es=[],this.Is=!1,this.As=[],this.Rs=null,this.gs=!1,this.Ps=[],this.ys=new gr(this,"async_queue_retry"),this.Vs=function(){var e=Or();e&&d("AsyncQueue","Visibility state changed to  ",e.visibilityState),t.ys.Vn()};var e=Or();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Vs)}return Object.defineProperty(t.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),t.prototype.ws=function(t){this.enqueue(t)},t.prototype.bs=function(t){this.vs(),this.Ss(t)},t.prototype.Ds=function(){if(!this.Is){this.Is=!0;var t=Or();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Vs)}},t.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise((function(t){})):this.Ss(t)},t.prototype.Cs=function(t){var e=this;this.ws((function(){return e.Es.push(t),e.Ns()}))},t.prototype.Ns=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(0===this.Es.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.Es[0]()];case 2:return n.sent(),this.Es.shift(),this.ys.reset(),[3,4];case 3:if(!wr(t=n.sent()))throw t;return d("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.Es.length>0&&this.ys.gn((function(){return e.Ns()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ss=function(t){var e=this,n=this.Ts.then((function(){return e.gs=!0,t().catch((function(t){throw e.Rs=t,e.gs=!1,m("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gs=!1,t}))}));return this.Ts=n,n},t.prototype.yn=function(t,e,n){var r=this;this.vs(),this.Ps.indexOf(t)>-1&&(e=0);var i=Pr._s(this,t,e,n,(function(t){return r.Fs(t)}));return this.As.push(i),i},t.prototype.vs=function(){this.Rs&&y()},t.prototype.xs=function(){},t.prototype.$s=function(){return r.__awaiter(this,void 0,void 0,(function(){var t;return r.__generator(this,(function(e){switch(e.label){case 0:return[4,t=this.Ts];case 1:e.sent(),e.label=2;case 2:if(t!==this.Ts)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.ks=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},t.prototype.Ms=function(t){var e=this;return this.$s().then((function(){e.As.sort((function(t,e){return t.us-e.us}));for(var n=0,r=e.As;n<r.length;n++){var i=r[n];if(i.pn(),"all"!==t&&i.dn===t)break}return e.$s()}))},t.prototype.Os=function(t){this.Ps.push(t)},t.prototype.Fs=function(t){var e=this.As.indexOf(t);this.As.splice(e,1)},t}();function Ir(t,e){if(m("AsyncQueue",e+": "+t),wr(t))return new h(c.UNAVAILABLE,e+": "+t);throw t}var Lr=function(){this.Ls=void 0,this.listeners=[]},Rr=function(){this.Bs=new at((function(t){return Zn(t)}),Qn),this.onlineState="Unknown",this.qs=new Set};function Dr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:if(n=_(t),i=e.query,o=!1,(a=n.Bs.get(i))||(o=!0,a=new Lr),!o)return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),s=a,[4,n.Us(i)];case 2:return s.Ls=r.sent(),[3,4];case 3:return u=r.sent(),l=Ir(u,"Initialization of query '"+Kn(e.query)+"' failed"),[2,void e.onError(l)];case 4:return n.Bs.set(i,a),a.listeners.push(e),e.Qs(n.onlineState),a.Ls&&e.Ws(a.Ls)&&Ur(n),[2]}}))}))}function Nr(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){return n=_(t),i=e.query,o=!1,(a=n.Bs.get(i))&&(s=a.listeners.indexOf(e))>=0&&(a.listeners.splice(s,1),o=0===a.listeners.length),o?[2,(n.Bs.delete(i),n.js(i))]:[2]}))}))}function Fr(t,e){for(var n=_(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.Bs.get(s);if(u){for(var l=0,c=u.listeners;l<c.length;l++)c[l].Ws(a)&&(r=!0);u.Ls=a}}r&&Ur(n)}function jr(t,e,n){var r=_(t),i=r.Bs.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.Bs.delete(e)}function Ur(t){t.qs.forEach((function(t){t.next()}))}var zr=function(){function t(t,e,n){this.query=t,this.Ks=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Ws=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new zt(t.query,t.docs,t.Qt,e,t.Wt,t.fromCache,t.jt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.Ks.next(t),o=!0):this.Ys(t,this.onlineState)&&(this.Js(t),o=!0),this.zs=t,o},t.prototype.onError=function(t){this.Ks.error(t)},t.prototype.Qs=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Ys(this.zs,t)&&(this.Js(this.zs),e=!0),e},t.prototype.Ys=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.m()&&"Offline"!==e)},t.prototype.Hs=function(t){if(t.docChanges.length>0)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.jt&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.Js=function(t){t=zt.Gt(t.query,t.docs,t.Wt,t.fromCache),this.Gs=!0,this.Ks.next(t)},t}(),Br=function(){function t(t){this.uid=t}return t.prototype.Zs=function(){return null!=this.uid},t.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();Br.UNAUTHENTICATED=new Br(null),Br.ei=new Br("google-credentials-uid"),Br.ni=new Br("first-party-uid");var Vr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}return t.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},t}();function Hr(t,e){return"firestore_clients_"+t+"_"+e}function Gr(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.Zs()&&(r+="_"+e.uid),r}function Wr(t,e){return"firestore_targets_"+t+"_"+e}Vr.ai=-1;var qr=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.ci=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new h(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(m("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Xr=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.ci=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new h(r.error.code,r.error.message)),i?new t(e,r.state,o):(m("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ui=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Yr=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.ci=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ft(),a=0;i&&a<r.activeTargetIds.length;++a)i=ht(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(m("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Qr=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.ci=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(m("SharedClientState","Failed to parse online state: "+e),null)},t}(),Zr=function(){function t(){this.activeTargetIds=Ft()}return t.prototype.hi=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ui=function(){var t={activeTargetIds:this.activeTargetIds.A(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Kr=function(){function t(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.mi.bind(this),this.Ti=new Et(Z),this.Ei=!1,this.Ii=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=Hr(this.persistenceKey,this._i),this.Ri=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Ti=this.Ti.ot(this._i,new Zr),this.gi=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Pi=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.yi=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vi=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.wi)}return t.Ln=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e,n,i,o,a,s,u,l,c,h,f=this;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,this.fi.pi()];case 1:for(t=r.sent(),e=0,n=t;e<n.length;e++)(i=n[e])!==this._i&&(o=this.getItem(Hr(this.persistenceKey,i)))&&(a=Yr.ci(i,o))&&(this.Ti=this.Ti.ot(a.clientId,a));for(this.bi(),(s=this.storage.getItem(this.Vi))&&(u=this.vi(s))&&this.Si(u),l=0,c=this.Ii;l<c.length;l++)h=c[l],this.mi(h);return this.Ii=[],this.window.addEventListener("unload",(function(){return f.Di()})),this.Ei=!0,[2]}}))}))},t.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},t.prototype.Ci=function(){return this.Ni(this.Ti)},t.prototype.Fi=function(t){var e=!1;return this.Ti.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.xi=function(t){this.$i(t,"pending")},t.prototype.ki=function(t,e,n){this.$i(t,e,n),this.Mi(t)},t.prototype.Oi=function(t){var e="not-current";if(this.Fi(t)){var n=this.storage.getItem(Wr(this.persistenceKey,t));if(n){var r=Xr.ci(t,n);r&&(e=r.state)}}return this.Li.hi(t),this.bi(),e},t.prototype.Bi=function(t){this.Li.li(t),this.bi()},t.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},t.prototype.Ui=function(t){this.removeItem(Wr(this.persistenceKey,t))},t.prototype.Qi=function(t,e,n){this.Wi(t,e,n)},t.prototype.ji=function(t,e,n){var r=this;e.forEach((function(t){r.Mi(t)})),this.currentUser=t,n.forEach((function(t){r.xi(t)}))},t.prototype.Ki=function(t){this.Gi(t)},t.prototype.Di=function(){this.Ei&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ei=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.mi=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(d("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ai)return void m("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs((function(){return r.__awaiter(e,void 0,void 0,(function(){var t,e,i,o,a,s;return r.__generator(this,(function(r){if(this.Ei){if(null!==n.key)if(this.gi.test(n.key)){if(null==n.newValue)return t=this.zi(n.key),[2,this.Hi(t,null)];if(e=this.Yi(n.key,n.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.Pi.test(n.key)){if(null!==n.newValue&&(i=this.Ji(n.key,n.newValue)))return[2,this.Xi(i)]}else if(this.yi.test(n.key)){if(null!==n.newValue&&(o=this.Zi(n.key,n.newValue)))return[2,this.tr(o)]}else if(n.key===this.Vi){if(null!==n.newValue&&(a=this.vi(n.newValue)))return[2,this.Si(a)]}else n.key===this.Ri&&(s=function(t){var e=Vr.ai;if(null!=t)try{var n=JSON.parse(t);b("number"==typeof n),e=n}catch(t){m("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Vr.ai&&this.si(s)}else this.Ii.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),t.prototype.bi=function(){this.setItem(this.Ai,this.Li.ui())},t.prototype.$i=function(t,e,n){var r=new qr(this.currentUser,t,e,n),i=Gr(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ui())},t.prototype.Mi=function(t){var e=Gr(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Gi=function(t){var e={clientId:this._i,onlineState:t};this.storage.setItem(this.Vi,JSON.stringify(e))},t.prototype.Wi=function(t,e,n){var r=Wr(this.persistenceKey,t),i=new Xr(t,e,n);this.setItem(r,i.ui())},t.prototype.zi=function(t){var e=this.gi.exec(t);return e?e[1]:null},t.prototype.Yi=function(t,e){var n=this.zi(t);return Yr.ci(n,e)},t.prototype.Ji=function(t,e){var n=this.Pi.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return qr.ci(new Br(i),r,e)},t.prototype.Zi=function(t,e){var n=this.yi.exec(t),r=Number(n[1]);return Xr.ci(r,e)},t.prototype.vi=function(t){return Qr.ci(t)},t.prototype.Xi=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.fi.er(t.batchId,t.state,t.error)]:(d("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},t.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.fi.sr(a,s).then((function(){n.Ti=r}))},t.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},t.prototype.Ni=function(t){var e=Ft();return t.forEach((function(t,n){e=e.kt(n.activeTargetIds)})),e},t}(),$r=function(){function t(){this.ir=new Zr,this.rr={},this.di=null,this.si=null}return t.prototype.xi=function(t){},t.prototype.ki=function(t,e,n){},t.prototype.Oi=function(t){return this.ir.hi(t),this.rr[t]||"not-current"},t.prototype.Qi=function(t,e,n){this.rr[t]=e},t.prototype.Bi=function(t){this.ir.li(t)},t.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.Ui=function(t){delete this.rr[t]},t.prototype.Ci=function(){return this.ir.activeTargetIds},t.prototype.Fi=function(t){return this.ir.activeTargetIds.has(t)},t.prototype.start=function(){return this.ir=new Zr,Promise.resolve()},t.prototype.ji=function(t,e,n){},t.prototype.Ki=function(t){},t.prototype.Di=function(){},t.prototype.oi=function(t){},t}(),Jr=function(){function t(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}return t.prototype.cr=function(t,e,n){for(var r=n.ur,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=vn(o,e,r[i]))}return e},t.prototype.hr=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=gn(i,e,e,this.ar))}for(var o=e,a=0,s=this.mutations;a<s.length;a++){var u=s[a];u.key.isEqual(t)&&(e=gn(u,e,o,this.ar))}return e},t.prototype.lr=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.hr(r.key,t.get(r.key));i&&(n=n.ot(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Dt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&K(this.mutations,t.mutations,(function(t,e){return bn(t,e)}))&&K(this.baseMutations,t.baseMutations,(function(t,e){return bn(t,e)}))},t}(),ti=function(){function t(t,e,n,r){this.batch=t,this._r=e,this.ur=n,this.dr=r}return t.from=function(e,n,r){b(e.mutations.length===r.length);for(var i=Lt,o=e.mutations,a=0;a<o.length;a++)i=i.ot(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),ei=function(){function t(){this.wr=new at((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.mr=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),t.prototype.Er=function(t,e){this.Ir(),this.readTime=e,this.wr.set(t.key,t)},t.prototype.Ar=function(t,e){this.Ir(),e&&(this.readTime=e),this.wr.set(t,null)},t.prototype.Rr=function(t,e){this.Ir();var n=this.wr.get(e);return void 0!==n?yr.resolve(n):this.gr(t,e)},t.prototype.getEntries=function(t,e){return this.Pr(t,e)},t.prototype.apply=function(t){return this.Ir(),this.mr=!0,this.yr(t)},t.prototype.Ir=function(){},t}(),ni="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ri=function(){function t(){this.Vr=[]}return t.prototype.pr=function(t){this.Vr.push(t)},t.prototype.br=function(){this.Vr.forEach((function(t){return t()}))},t}(),ii=function(){function t(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}return t.prototype.Cr=function(t,e){var n=this;return this.Sr.Nr(t,e).next((function(r){return n.Fr(t,e,r)}))},t.prototype.Fr=function(t,e,n){return this.vr.Rr(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].hr(e,t);return t}))},t.prototype.$r=function(t,e,n){var r=Pt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].hr(t,e);r=r.ot(t,e)})),r},t.prototype.kr=function(t,e){var n=this;return this.vr.getEntries(t,e).next((function(e){return n.Mr(t,e)}))},t.prototype.Mr=function(t,e){var n=this;return this.Sr.Or(t,e).next((function(r){var i=n.$r(t,e,r),o=Ot();return i.forEach((function(t,e){e||(e=new Rn(t,ut.min())),o=o.ot(t,e)})),o}))},t.prototype.Lr=function(t,e,n){return function(t){return C.F(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Br(t,e.path):Hn(e)?this.qr(t,e,n):this.Ur(t,e,n)},t.prototype.Br=function(t,e){return this.Cr(t,new C(e)).next((function(t){var e=It();return t instanceof Ln&&(e=e.ot(t.key,t)),e}))},t.prototype.qr=function(t,e,n){var r=this,i=e.collectionGroup,o=It();return this.Dr.Qr(t,i).next((function(a){return yr.forEach(a,(function(a){var s=function(t,e){return new Nn(e,null,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(e,a.child(i));return r.Ur(t,s,n).next((function(t){t.forEach((function(t,e){o=o.ot(t,e)}))}))})).next((function(){return o}))}))},t.prototype.Ur=function(t,e,n){var r,i,o=this;return this.vr.Lr(t,e,n).next((function(n){return r=n,o.Sr.Wr(t,e)})).next((function(e){return i=e,o.jr(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],l=u.key,c=r.get(l),h=gn(u,c,c,o.ar);r=h instanceof Ln?r.ot(l,h):r.remove(l)}}))})).next((function(){return r.forEach((function(t,n){$n(e,n)||(r=r.remove(t))})),r}))},t.prototype.jr=function(t,e,n){for(var r=Dt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof wn&&null===n.get(u.key)&&(r=r.add(u.key))}var l=n;return this.vr.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ln&&(l=l.ot(t,e))})),l}))},t}(),oi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Kr=n,this.Gr=r}return t.zr=function(e,n){for(var r=Dt(),i=Dt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}();function ai(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Z(n,i);return 0===a?Z(r,o):a}var si=function(){function t(t){this.Hr=t,this.buffer=new At(ai),this.Yr=0}return t.prototype.Jr=function(){return++this.Yr},t.prototype.Xr=function(t){var e=[t,this.Jr()];if(this.buffer.size<this.Hr)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();ai(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),ui={Zr:!1,eo:0,no:0,so:0},li=function(){function t(t,e,n){this.io=t,this.ro=e,this.oo=n}return t.ao=function(e){return new t(e,t.co,t.uo)},t}();li.ho=-1,li.lo=1048576,li._o=41943040,li.co=10,li.uo=1e3,li.fo=new li(li._o,li.co,li.uo),li.do=new li(li.ho,0,0);var ci=function(){function t(t,e){this.wo=t,this.cs=e,this.mo=!1,this.To=null}return t.prototype.start=function(t){this.wo.params.io!==li.ho&&this.Eo(t)},t.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(t.prototype,"Ei",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),t.prototype.Eo=function(t){var e=this,n=this.mo?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.To=this.cs.yn("lru_garbage_collection",n,(function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:this.To=null,this.mo=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.Io(this.wo)];case 2:return n.sent(),[3,7];case 3:return wr(e=n.sent())?(d("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Po(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.Eo(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),hi=function(){function t(t,e){this.Ao=t,this.params=e}return t.prototype.Ro=function(t,e){return this.Ao.Po(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.yo=function(t,e){var n=this;if(0===e)return yr.resolve(Vr.ai);var r=new si(e);return this.Ao.Ce(t,(function(t){return r.Xr(t.sequenceNumber)})).next((function(){return n.Ao.Vo(t,(function(t){return r.Xr(t)}))})).next((function(){return r.maxValue}))},t.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},t.prototype.bo=function(t,e){return this.Ao.bo(t,e)},t.prototype.vo=function(t,e){var n=this;return this.params.io===li.ho?(d("LruGarbageCollector","Garbage collection skipped; disabled"),yr.resolve(ui)):this.So(t).next((function(r){return r<n.params.io?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.io),ui):n.Do(t,e)}))},t.prototype.So=function(t){return this.Ao.So(t)},t.prototype.Do=function(t,e){var n,r,i,a,s,u,l,c=this,h=Date.now();return this.Ro(t,this.params.ro).next((function(e){return e>c.params.oo?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.oo+" from "+e),r=c.params.oo):r=e,a=Date.now(),c.yo(t,r)})).next((function(r){return n=r,s=Date.now(),c.po(t,n,e)})).next((function(e){return i=e,u=Date.now(),c.bo(t,n)})).next((function(t){return l=Date.now(),p()<=o.LogLevel.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+i+" targets in "+(u-s)+"ms\n\tRemoved "+t+" documents in "+(l-u)+"ms\nTotal Duration: "+(l-h)+"ms"),yr.resolve({Zr:!0,eo:r,no:i,so:t})}))},t}();function fi(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=di(e)),e=pi(t.get(n),e);return di(e)}function pi(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function di(t){return t+""}function mi(t){var e=t.length;if(b(e>=2),2===e)return b(""===t.charAt(0)&&""===t.charAt(1)),T.P();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&y(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:y()}o=a+2}return new T(r)}var vi=function(t){this.Co=t};function gi(t,e){if(e.document)return function(t,e,n){var r=Oe(t,e.name),i=Te(e.updateTime),o=new On({mapValue:{fields:e.fields}});return new Ln(r,i,o,{hasCommittedMutations:!!n})}(t.Co,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=C.$(e.noDocument.path),r=wi(e.noDocument.readTime);return new Rn(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=C.$(e.unknownDocument.path),o=wi(e.unknownDocument.version);return new Dn(i,o)}return y()}function yi(t,e,n){var r=bi(n),i=e.key.path.h().A();if(e instanceof Ln){var o=function(t,e){return{name:Ce(t,e.key),fields:e.rn().mapValue.fields,updateTime:we(t,e.version.Z())}}(t.Co,e),a=e.hasCommittedMutations;return new Yi(null,null,o,a,r,i)}if(e instanceof Rn){var s=e.key.path.A(),u=xi(e.version),l=e.hasCommittedMutations;return new Yi(null,new qi(s,u),null,l,r,i)}if(e instanceof Dn){var c=e.key.path.A(),h=xi(e.version);return new Yi(new Xi(c,h),null,null,!0,r,i)}return y()}function bi(t){var e=t.Z();return[e.seconds,e.nanoseconds]}function _i(t){var e=new st(t[0],t[1]);return ut.J(e)}function xi(t){var e=t.Z();return new Bi(e.seconds,e.nanoseconds)}function wi(t){var e=new st(t.seconds,t.nanoseconds);return ut.J(e)}function Ei(t,e){var n=(e.baseMutations||[]).map((function(e){return Ne(t.Co,e)})),r=e.mutations.map((function(e){return Ne(t.Co,e)})),i=st.fromMillis(e.localWriteTimeMs);return new Jr(e.batchId,i,n,r)}function Si(t){var e,n,r=wi(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?wi(t.lastLimboFreeSnapshotVersion):ut.min();return void 0!==t.query.documents?(b(1===(n=t.query).documents.length),e=Wn(jn(ke(n.documents[0])))):e=Ue(t.query),new bt(e,t.targetId,0,t.lastListenSequenceNumber,r,i,J.fromBase64String(t.resumeToken))}function Ti(t,e){var n,r=xi(e.nt),i=xi(e.lastLimboFreeSnapshotVersion);n=vt(e.target)?Fe(t.Co,e.target):je(t.Co,e.target);var o=e.resumeToken.toBase64();return new Zi(e.targetId,dt(e.target),r,o,e.sequenceNumber,i,n)}var Ai=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.Fo={}}return t.xo=function(e,n,r,i){return b(""!==e.uid),new t(e.Zs()?e.uid:"",n,r,i)},t.prototype.$o=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Oi(t).rs({index:Gi.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.ko=function(t,e,n,r){var i=this,o=Pi(t),a=Oi(t);return a.add({}).next((function(s){b("number"==typeof s);for(var u=new Jr(s,e,n,r),l=function(t,e,n){var r=n.baseMutations.map((function(e){return De(t.Co,e)})),i=n.mutations.map((function(e){return De(t.Co,e)}));return new Gi(e,n.batchId,n.ar.toMillis(),r,i)}(i.serializer,i.userId,u),c=[],h=new At((function(t,e){return Z(t.R(),e.R())})),f=0,p=r;f<p.length;f++){var d=p[f],m=Wi.key(i.userId,d.key.path,s);h=h.add(d.key.path.h()),c.push(a.put(l)),c.push(o.put(m,Wi.PLACEHOLDER))}return h.forEach((function(e){c.push(i.Dr.Mo(t,e))})),t.pr((function(){i.Fo[s]=u.keys()})),yr.$n(c).next((function(){return u}))}))},t.prototype.Oo=function(t,e){var n=this;return Oi(t).get(e).next((function(t){return t?(b(t.userId===n.userId),Ei(n.serializer,t)):null}))},t.prototype.Lo=function(t,e){var n=this;return this.Fo[e]?yr.resolve(this.Fo[e]):this.Oo(t,e).next((function(t){if(t){var r=t.keys();return n.Fo[e]=r,r}return null}))},t.prototype.Bo=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Oi(t).rs({index:Gi.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(b(e.batchId>=r),o=Ei(n.serializer,e)),i.done()})).next((function(){return o}))},t.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Oi(t).rs({index:Gi.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Oi(t).ts(Gi.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ei(e.serializer,t)}))}))},t.prototype.Nr=function(t,e){var n=this,r=Wi.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Pi(t).rs({range:i},(function(r,i,a){var s=r[0],u=r[1],l=r[2],c=mi(u);if(s===n.userId&&e.path.isEqual(c))return Oi(t).get(l).next((function(t){if(!t)throw y();b(t.userId===n.userId),o.push(Ei(n.serializer,t))}));a.done()})).next((function(){return o}))},t.prototype.Or=function(t,e){var n=this,r=new At(Z),i=[];return e.forEach((function(e){var o=Wi.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Pi(t).rs({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],l=mi(s);a===n.userId&&e.path.isEqual(l)?r=r.add(u):o.done()}));i.push(s)})),yr.$n(i).next((function(){return n.Qo(t,r)}))},t.prototype.Wr=function(t,e){var n=this,r=e.path,i=r.length+1,o=Wi.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new At(Z);return Pi(t).rs({range:a},(function(t,e,o){var a=t[0],u=t[1],l=t[2],c=mi(u);a===n.userId&&r.T(c)?c.length===i&&(s=s.add(l)):o.done()})).next((function(){return n.Qo(t,s)}))},t.prototype.Qo=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(Oi(t).get(e).next((function(t){if(null===t)throw y();b(t.userId===n.userId),r.push(Ei(n.serializer,t))})))})),yr.$n(i).next((function(){return r}))},t.prototype.Wo=function(t,e){var n=this;return Ci(t.jo,this.userId,e).next((function(r){return t.pr((function(){n.Ko(e.batchId)})),yr.forEach(r,(function(e){return n.No.Go(t,e)}))}))},t.prototype.Ko=function(t){delete this.Fo[t]},t.prototype.zo=function(t){var e=this;return this.$o(t).next((function(n){if(!n)return yr.resolve();var r=IDBKeyRange.lowerBound(Wi.prefixForUser(e.userId)),i=[];return Pi(t).rs({range:r},(function(t,n,r){if(t[0]===e.userId){var o=mi(t[1]);i.push(o)}else r.done()})).next((function(){b(0===i.length)}))}))},t.prototype.Ho=function(t,e){return Mi(t,this.userId,e)},t.prototype.Yo=function(t){var e=this;return ki(t).get(this.userId).next((function(t){return t||new Hi(e.userId,-1,"")}))},t}();function Mi(t,e,n){var r=Wi.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Pi(t).rs({range:o,ss:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function Ci(t,e,n){var r=t.store(Gi.store),i=t.store(Wi.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.rs({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){b(1===s)})));for(var l=[],c=0,h=n.mutations;c<h.length;c++){var f=h[c],p=Wi.key(e,f.key.path,n.batchId);o.push(i.delete(p)),l.push(f.key)}return yr.$n(o).next((function(){return l}))}function Oi(t){return fo.Qn(t,Gi.store)}function Pi(t){return fo.Qn(t,Wi.store)}function ki(t){return fo.Qn(t,Hi.store)}var Ii=function(){function t(t,e){this.serializer=t,this.Dr=e}return t.prototype.Er=function(t,e,n){return Di(t).put(Ni(e),n)},t.prototype.Ar=function(t,e){var n=Di(t),r=Ni(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.Jo(t,r)}))},t.prototype.Rr=function(t,e){var n=this;return Di(t).get(Ni(e)).next((function(t){return n.Xo(t)}))},t.prototype.Zo=function(t,e){var n=this;return Di(t).get(Ni(e)).next((function(t){var e=n.Xo(t);return e?{ta:e,size:Fi(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Pt();return this.ea(t,e,(function(t,e){var i=n.Xo(e);r=r.ot(t,i)})).next((function(){return r}))},t.prototype.na=function(t,e){var n=this,r=Pt(),i=new Et(C.i);return this.ea(t,e,(function(t,e){var o=n.Xo(e);o?(r=r.ot(t,o),i=i.ot(t,Fi(e))):(r=r.ot(t,null),i=i.ot(t,0))})).next((function(){return{sa:r,ia:i}}))},t.prototype.ea=function(t,e,n){if(e.m())return yr.resolve();var r=IDBKeyRange.bound(e.first().path.A(),e.last().path.A()),i=e._t(),o=i.It();return Di(t).rs({range:r},(function(t,e,r){for(var a=C.$(t);o&&C.i(o,a)<0;)n(o,null),o=i.It();o&&o.isEqual(a)&&(n(o,e),o=i.At()?i.It():null),o?r.Xn(o.path.A()):r.done()})).next((function(){for(;o;)n(o,null),o=i.At()?i.It():null}))},t.prototype.Lr=function(t,e,n){var r=this,i=It(),o=e.path.length+1,a={};if(n.isEqual(ut.min())){var s=e.path.A();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.A(),l=bi(n);a.range=IDBKeyRange.lowerBound([u,l],!0),a.index=Yi.collectionReadTimeIndex}return Di(t).rs(a,(function(t,n,a){if(t.length===o){var s=gi(r.serializer,n);e.path.T(s.key.path)?s instanceof Ln&&$n(e,s)&&(i=i.ot(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.ra=function(t){return new Li(this,!!t&&t.oa)},t.prototype.aa=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ri(t).get(Qi.key).next((function(t){return b(!!t),t}))},t.prototype.Jo=function(t,e){return Ri(t).put(Qi.key,e)},t.prototype.Xo=function(t){if(t){var e=gi(this.serializer,t);return e instanceof Rn&&e.version.isEqual(ut.min())?null:e}return null},t}(),Li=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).ca=e,r.oa=n,r.ua=new at((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[],r=0,i=new At((function(t,e){return Z(t.R(),e.R())}));return this.wr.forEach((function(o,a){var s=e.ua.get(o);if(a){var u=yi(e.ca.serializer,a,e.readTime);i=i.add(o.path.h());var l=Fi(u);r+=l-s,n.push(e.ca.Er(t,o,u))}else if(r-=s,e.oa){var c=yi(e.ca.serializer,new Rn(o,ut.min()),e.readTime);n.push(e.ca.Er(t,o,c))}else n.push(e.ca.Ar(t,o))})),i.forEach((function(r){n.push(e.ca.Dr.Mo(t,r))})),n.push(this.ca.updateMetadata(t,r)),yr.$n(n)},e.prototype.gr=function(t,e){var n=this;return this.ca.Zo(t,e).next((function(t){return null===t?(n.ua.set(e,0),null):(n.ua.set(e,t.size),t.ta)}))},e.prototype.Pr=function(t,e){var n=this;return this.ca.na(t,e).next((function(t){var e=t.sa;return t.ia.forEach((function(t,e){n.ua.set(t,e)})),e}))},e}(ei);function Ri(t){return fo.Qn(t,Qi.store)}function Di(t){return fo.Qn(t,Yi.store)}function Ni(t){return t.path.A()}function Fi(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw y();e=t.noDocument}return JSON.stringify(e).length}var ji=function(){function t(){this.ha=new Ui}return t.prototype.Mo=function(t,e){return this.ha.add(e),yr.resolve()},t.prototype.Qr=function(t,e){return yr.resolve(this.ha.getEntries(e))},t}(),Ui=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t._(),n=t.h(),r=this.index[e]||new At(T.i),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t._(),n=t.h(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new At(T.i)).A()},t}(),zi=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;b(n<r&&n>=0&&r<=10);var o=new Er("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Vi.store)}(t),function(t){t.createObjectStore(Hi.store,{keyPath:Hi.keyPath}),t.createObjectStore(Gi.store,{keyPath:Gi.keyPath,autoIncrement:!0}).createIndex(Gi.userMutationsIndex,Gi.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Wi.store)}(t),to(t),function(t){t.createObjectStore(Yi.store)}(t));var a=yr.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Ki.store),t.deleteObjectStore(Zi.store),t.deleteObjectStore($i.store)}(t),to(t)),a=a.next((function(){return function(t){var e=t.store($i.store),n=new $i(0,0,ut.min().Z(),0);return e.put($i.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(Gi.store).ts().next((function(n){t.deleteObjectStore(Gi.store),t.createObjectStore(Gi.store,{keyPath:Gi.keyPath,autoIncrement:!0}).createIndex(Gi.userMutationsIndex,Gi.userMutationsKeyPath,{unique:!0});var r=e.store(Gi.store),i=n.map((function(t){return r.put(t)}));return yr.$n(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(eo.store,{keyPath:eo.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Qi.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Yi.store);e.createIndex(Yi.readTimeIndex,Yi.readTimeIndexPath,{unique:!1}),e.createIndex(Yi.collectionReadTimeIndex,Yi.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.rewriteCanonicalIds(o)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(Yi.store).rs((function(t,n){e+=Fi(n)})).next((function(){var n=new Qi(e);return t.store(Qi.store).put(Qi.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Hi.store),r=t.store(Gi.store);return n.ts().next((function(n){return yr.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ts(Gi.userMutationsIndex,i).next((function(r){return yr.forEach(r,(function(r){b(r.userId===n.userId);var i=Ei(e.serializer,r);return Ci(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(Ki.store),n=t.store(Yi.store);return t.store($i.store).get($i.key).next((function(t){var r=[];return n.rs((function(n,i){var o=new T(n),a=function(t){return[0,fi(t)]}(o);r.push(e.get(a).next((function(n){return n?yr.resolve():function(n){return e.put(new Ki(0,fi(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return yr.$n(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(Ji.store,{keyPath:Ji.keyPath});var n=e.store(Ji.store),r=new Ui,i=function(t){if(r.add(t)){var e=t._(),i=t.h();return n.put({collectionId:e,parent:fi(i)})}};return e.store(Yi.store).rs({ss:!0},(function(t,e){var n=new T(t);return i(n.h())})).next((function(){return e.store(Wi.store).rs({ss:!0},(function(t,e){t[0];var n=t[1],r=(t[2],mi(n));return i(r.h())}))}))},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(Zi.store);return n.rs((function(t,r){var i=Si(r),o=Ti(e.serializer,i);return n.put(o)}))},t}(),Bi=function(t,e){this.seconds=t,this.nanoseconds=e},Vi=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Vi.store="owner",Vi.key="owner";var Hi=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Hi.store="mutationQueues",Hi.keyPath="userId";var Gi=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Gi.store="mutations",Gi.keyPath="batchId",Gi.userMutationsIndex="userMutationsIndex",Gi.userMutationsKeyPath=["userId","batchId"];var Wi=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,fi(e)]},t.key=function(t,e,n){return[t,fi(e),n]},t}();Wi.store="documentMutations",Wi.PLACEHOLDER=new Wi;var qi=function(t,e){this.path=t,this.readTime=e},Xi=function(t,e){this.path=t,this.version=e},Yi=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Yi.store="remoteDocuments",Yi.readTimeIndex="readTimeIndex",Yi.readTimeIndexPath="readTime",Yi.collectionReadTimeIndex="collectionReadTimeIndex",Yi.collectionReadTimeIndexPath=["parentPath","readTime"];var Qi=function(t){this.byteSize=t};Qi.store="remoteDocumentGlobal",Qi.key="remoteDocumentGlobalKey";var Zi=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Zi.store="targets",Zi.keyPath="targetId",Zi.queryTargetsIndexName="queryTargetsIndex",Zi.queryTargetsKeyPath=["canonicalId","targetId"];var Ki=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Ki.store="targetDocuments",Ki.keyPath=["targetId","path"],Ki.documentTargetsIndex="documentTargetsIndex",Ki.documentTargetsKeyPath=["path","targetId"];var $i=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};$i.key="targetGlobalKey",$i.store="targetGlobal";var Ji=function(t,e){this.collectionId=t,this.parent=e};function to(t){t.createObjectStore(Ki.store,{keyPath:Ki.keyPath}).createIndex(Ki.documentTargetsIndex,Ki.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Zi.store,{keyPath:Zi.keyPath}).createIndex(Zi.queryTargetsIndexName,Zi.queryTargetsKeyPath,{unique:!0}),t.createObjectStore($i.store)}Ji.store="collectionParents",Ji.keyPath=["collectionId","parent"];var eo=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};eo.store="clientMetadata",eo.keyPath="clientId";var no=r.__spreadArrays(r.__spreadArrays(r.__spreadArrays([Hi.store,Gi.store,Wi.store,Yi.store,Zi.store,Vi.store,$i.store,Ki.store],[eo.store]),[Qi.store]),[Ji.store]),ro=function(){function t(){this.la=new Ui}return t.prototype.Mo=function(t,e){var n=this;if(!this.la.has(e)){var r=e._(),i=e.h();t.pr((function(){n.la.add(e)}));var o={collectionId:r,parent:fi(i)};return io(t).put(o)}return yr.resolve()},t.prototype.Qr=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[$(e),""],!1,!0);return io(t).ts(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(mi(o.parent))}return n}))},t}();function io(t){return fo.Qn(t,Ji.store)}var oo=function(){function t(t){this._a=t}return t.prototype.next=function(){return this._a+=2,this._a},t.fa=function(){return new t(0)},t.da=function(){return new t(-1)},t}(),ao=function(){function t(t,e){this.No=t,this.serializer=e}return t.prototype.wa=function(t){var e=this;return this.ma(t).next((function(n){var r=new oo(n.highestTargetId);return n.highestTargetId=r.next(),e.Ta(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.Ea=function(t){return this.ma(t).next((function(t){return ut.J(new st(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.Ia=function(t){return this.ma(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.Aa=function(t,e,n){var r=this;return this.ma(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.Z()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Ta(t,i)}))},t.prototype.Ra=function(t,e){var n=this;return this.ga(t,e).next((function(){return n.ma(t).next((function(r){return r.targetCount+=1,n.Pa(e,r),n.Ta(t,r)}))}))},t.prototype.ya=function(t,e){return this.ga(t,e)},t.prototype.Va=function(t,e){var n=this;return this.pa(t,e.targetId).next((function(){return so(t).delete(e.targetId)})).next((function(){return n.ma(t)})).next((function(e){return b(e.targetCount>0),e.targetCount-=1,n.Ta(t,e)}))},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return so(t).rs((function(a,s){var u=Si(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Va(t,u)))})).next((function(){return yr.$n(o)})).next((function(){return i}))},t.prototype.Ce=function(t,e){return so(t).rs((function(t,n){var r=Si(n);e(r)}))},t.prototype.ma=function(t){return uo(t).get($i.key).next((function(t){return b(null!==t),t}))},t.prototype.Ta=function(t,e){return uo(t).put($i.key,e)},t.prototype.ga=function(t,e){return so(t).put(Ti(this.serializer,e))},t.prototype.Pa=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.ba=function(t){return this.ma(t).next((function(t){return t.targetCount}))},t.prototype.va=function(t,e){var n=dt(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return so(t).rs({range:r,index:Zi.queryTargetsIndexName},(function(t,n,r){var o=Si(n);mt(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.Sa=function(t,e,n){var r=this,i=[],o=lo(t);return e.forEach((function(e){var a=fi(e.path);i.push(o.put(new Ki(n,a))),i.push(r.No.Da(t,n,e))})),yr.$n(i)},t.prototype.Ca=function(t,e,n){var r=this,i=lo(t);return yr.forEach(e,(function(e){var o=fi(e.path);return yr.$n([i.delete([n,o]),r.No.Na(t,n,e)])}))},t.prototype.pa=function(t,e){var n=lo(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.Fa=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=lo(t),i=Dt();return r.rs({range:n,ss:!0},(function(t,e,n){var r=mi(t[1]),o=new C(r);i=i.add(o)})).next((function(){return i}))},t.prototype.Ho=function(t,e){var n=fi(e.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0),i=0;return lo(t).rs({index:Ki.documentTargetsIndex,ss:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.Ue=function(t,e){return so(t).get(e).next((function(t){return t?Si(t):null}))},t}();function so(t){return fo.Qn(t,Zi.store)}function uo(t){return fo.Qn(t,$i.store)}function lo(t){return fo.Qn(t,Ki.store)}var co="Failed to obtain exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ho=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jo=e,r.xa=n,r}return r.__extends(e,t),e}(ri),fo=function(){function t(e,n,r,i,o,a,s,u,l,f){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.fn=o,this.window=a,this.document=s,this.$a=l,this.ka=f,this.Ma=null,this.Oa=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Qa=function(t){return Promise.resolve()},!t.Ln())throw new h(c.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new vo(this,i),this.Wa=n+"main",this.serializer=new vi(u),this.ja=new br(this.Wa,10,new zi(this.serializer)),this.Ka=new ao(this.No,this.serializer),this.Dr=new ro,this.vr=function(t,e){return new Ii(t,e)}(this.serializer,this.Dr),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===f&&m("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Qn=function(t,e){if(t instanceof ho)return br.Qn(t.jo,e);throw y()},t.prototype.start=function(){var t=this;return this.za().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new h(c.FAILED_PRECONDITION,co);return t.Ha(),t.Ya(),t.Ja(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.Ka.Ia(e)}))})).then((function(e){t.Ma=new Vr(e,t.$a)})).then((function(){t.Oa=!0})).catch((function(e){return t.ja&&t.ja.close(),Promise.reject(e)}))},t.prototype.Xa=function(t){var e=this;return this.Qa=function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){return this.Ei?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.Za=function(t){var e=this;this.ja.Kn((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.tc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.Ei?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.za=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return mo(e).put(new eo(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.ec(e).next((function(e){e||(t.isPrimary=!1,t.fn.Cs((function(){return t.Qa(!1)})))}))})).next((function(){return t.nc(e)})).next((function(n){return t.isPrimary&&!n?t.sc(e).next((function(){return!1})):!!n&&t.ic(e).next((function(){return!0}))}))})).catch((function(e){if(wr(e))return d("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.fn.Cs((function(){return t.Qa(e)})),t.isPrimary=e}))},t.prototype.ec=function(t){var e=this;return po(t).get(Vi.key).next((function(t){return yr.resolve(e.rc(t))}))},t.prototype.oc=function(t){return mo(t).delete(this.clientId)},t.prototype.ac=function(){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,a=this;return r.__generator(this,(function(r){switch(r.label){case 0:return!this.isPrimary||this.cc(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var n=t.Qn(e,eo.store);return n.ts().next((function(t){var e=a.uc(t,18e5),r=t.filter((function(t){return-1===e.indexOf(t)}));return yr.forEach(r,(function(t){return n.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(e=r.sent(),this.Ga)for(n=0,i=e;n<i.length;n++)o=i[n],this.Ga.removeItem(this.hc(o.clientId));r.label=2;case 2:return[2]}}))}))},t.prototype.Ja=function(){var t=this;this.qa=this.fn.yn("client_metadata_refresh",4e3,(function(){return t.za().then((function(){return t.ac()})).then((function(){return t.Ja()}))}))},t.prototype.rc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.nc=function(t){var e=this;return this.ka?yr.resolve(!0):po(t).get(Vi.key).next((function(n){if(null!==n&&e.cc(n.leaseTimestampMs,5e3)&&!e.lc(n.ownerId)){if(e.rc(n)&&e.networkEnabled)return!0;if(!e.rc(n)){if(!n.allowTabSynchronization)throw new h(c.FAILED_PRECONDITION,co);return!1}}return!(!e.networkEnabled||!e.inForeground)||mo(t).ts().next((function(t){return void 0===e.uc(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.Di=function(){return r.__awaiter(this,void 0,void 0,(function(){var t=this;return r.__generator(this,(function(e){switch(e.label){case 0:return this.Oa=!1,this._c(),this.qa&&(this.qa.cancel(),this.qa=null),this.fc(),this.dc(),[4,this.ja.runTransaction("shutdown","readwrite",[Vi.store,eo.store],(function(e){var n=new ho(e,Vr.ai);return t.sc(n).next((function(){return t.oc(n)}))}))];case 1:return e.sent(),this.ja.close(),this.wc(),[2]}}))}))},t.prototype.uc=function(t,e){var n=this;return t.filter((function(t){return n.cc(t.updateTimeMs,e)&&!n.lc(t.clientId)}))},t.prototype.pi=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return mo(e).ts().next((function(e){return t.uc(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Ai.xo(t,this.serializer,this.Dr,this.No)},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.Ic=function(){return this.Dr},t.prototype.runTransaction=function(t,e,n){var r=this;d("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.ja.runTransaction(t,o,no,(function(o){return i=new ho(o,r.Ma?r.Ma.next():Vr.ai),"readwrite-primary"===e?r.ec(i).next((function(t){return!!t||r.nc(i)})).next((function(e){if(!e)throw m("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.fn.Cs((function(){return r.Qa(!1)})),new h(c.FAILED_PRECONDITION,ni);return n(i)})).next((function(t){return r.ic(i).next((function(){return t}))})):r.Ac(i).next((function(){return n(i)}))})).then((function(t){return i.br(),t}))},t.prototype.Ac=function(t){var e=this;return po(t).get(Vi.key).next((function(t){if(null!==t&&e.cc(t.leaseTimestampMs,5e3)&&!e.lc(t.ownerId)&&!e.rc(t)&&!(e.ka||e.allowTabSynchronization&&t.allowTabSynchronization))throw new h(c.FAILED_PRECONDITION,co)}))},t.prototype.ic=function(t){var e=new Vi(this.clientId,this.allowTabSynchronization,Date.now());return po(t).put(Vi.key,e)},t.Ln=function(){return br.Ln()},t.prototype.sc=function(t){var e=this,n=po(t);return n.get(Vi.key).next((function(t){return e.rc(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Vi.key)):yr.resolve()}))},t.prototype.cc=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(m("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws((function(){return t.inForeground="visible"===t.document.visibilityState,t.za()}))},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},t.prototype.fc=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},t.prototype.Ya=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e._c(),e.fn.ws((function(){return e.Di()}))},this.window.addEventListener("unload",this.La))},t.prototype.dc=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},t.prototype.lc=function(t){var e;try{var n=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.hc(t)));return d("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return m("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype._c=function(){if(this.Ga)try{this.Ga.setItem(this.hc(this.clientId),String(Date.now()))}catch(t){m("Failed to set zombie client id.",t)}},t.prototype.wc=function(){if(this.Ga)try{this.Ga.removeItem(this.hc(this.clientId))}catch(t){}},t.prototype.hc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function po(t){return fo.Qn(t,Vi.store)}function mo(t){return fo.Qn(t,eo.store)}var vo=function(){function t(t,e){this.db=t,this.wo=new hi(this,e)}return t.prototype.Po=function(t){var e=this.Rc(t);return this.db.Tc().ba(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.Rc=function(t){var e=0;return this.Vo(t,(function(t){e++})).next((function(){return e}))},t.prototype.Ce=function(t,e){return this.db.Tc().Ce(t,e)},t.prototype.Vo=function(t,e){return this.gc(t,(function(t,n){return e(n)}))},t.prototype.Da=function(t,e,n){return go(t,n)},t.prototype.Na=function(t,e,n){return go(t,n)},t.prototype.po=function(t,e,n){return this.db.Tc().po(t,e,n)},t.prototype.Go=function(t,e){return go(t,e)},t.prototype.Pc=function(t,e){return function(t,e){var n=!1;return ki(t).os((function(r){return Mi(t,r,e).next((function(t){return t&&(n=!0),yr.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.bo=function(t,e){var n=this,r=this.db.Ec().ra(),i=[],o=0;return this.gc(t,(function(a,s){if(s<=e){var u=n.Pc(t,a).next((function(e){if(!e)return o++,r.Rr(t,a).next((function(){return r.Ar(a),lo(t).delete([0,fi(a.path)])}))}));i.push(u)}})).next((function(){return yr.$n(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.st(t.xa);return this.db.Tc().ya(t,n)},t.prototype.yc=function(t,e){return go(t,e)},t.prototype.gc=function(t,e){var n,r=lo(t),i=Vr.ai;return r.rs({index:Ki.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==Vr.ai&&e(new C(mi(n)),i),i=s,n=a):i=Vr.ai})).next((function(){i!==Vr.ai&&e(new C(mi(n)),i)}))},t.prototype.So=function(t){return this.db.Ec().aa(t)},t}();function go(t,e){return lo(t).put(function(t,e){return new Ki(0,fi(t.path),e)}(e,t.xa))}function yo(t,e){var n=t.projectId;return t.j||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var bo=function(){function t(t,e,n){this.persistence=t,this.Vc=e,this.bc=new Et(Z),this.vc=new at((function(t){return dt(t)}),mt),this.Sc=ut.min(),this.Sr=t.mc(n),this.Dc=t.Ec(),this.Ka=t.Tc(),this.Cc=new ii(this.Dc,this.Sr,this.persistence.Ic()),this.Vc.Nc(this.Cc)}return t.prototype.Io=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.vo(n,e.bc)}))},t}();function _o(t,e){var n=_(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.Dc.ra({oa:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=yr.resolve();return o.forEach((function(t){a=a.next((function(){return r.Rr(e,t)})).next((function(e){var o=e,a=n.dr.get(t);b(null!==a),(!o||o.version.L(a)<0)&&(o=i.cr(t,o,n))&&r.Er(o,n._r)}))})),a.next((function(){return t.Sr.Wo(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}function xo(t){var e=_(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.Ka.Ea(t)}))}function wo(t,e){var n=_(t),r=e.nt,i=n.bc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.Dc.ra({oa:!0});i=n.bc;var a=[];e.zt.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.Ka.Ca(t,e.se,o).next((function(){return n.Ka.Sa(t,e.ee,o)})));var u=e.resumeToken;if(u.O()>0){var l=s.it(u,r).st(t.xa);i=i.ot(o,l),function(t,e,n){return b(e.resumeToken.O()>0),0===t.resumeToken.O()||e.nt.X()-t.nt.X()>=3e8||n.ee.size+n.ne.size+n.se.size>0}(s,l,e)&&a.push(n.Ka.ya(t,l))}}}));var s=Ot(),u=Dt();if(e.Yt.forEach((function(t,e){u=u.add(t)})),a.push(o.getEntries(t,u).next((function(i){e.Yt.forEach((function(u,l){var c=i.get(u);l instanceof Rn&&l.version.isEqual(ut.min())?(o.Ar(u,r),s=s.ot(u,l)):null==c||l.version.L(c.version)>0||0===l.version.L(c.version)&&c.hasPendingWrites?(o.Er(l,r),s=s.ot(u,l)):d("LocalStore","Ignoring outdated watch update for ",u,". Current version:",c.version," Watch version:",l.version),e.Jt.has(u)&&a.push(n.persistence.No.yc(t,u))}))}))),!r.isEqual(ut.min())){var l=n.Ka.Ea(t).next((function(e){return n.Ka.Aa(t,t.xa,r)}));a.push(l)}return yr.$n(a).next((function(){return o.apply(t)})).next((function(){return n.Cc.Mr(t,s)}))})).then((function(t){return n.bc=i,t}))}function Eo(t,e){var n=_(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n.Sr.Bo(t,e)}))}function So(t,e){var n=_(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.Ka.va(t,e).next((function(i){return i?(r=i,yr.resolve(r)):n.Ka.wa(t).next((function(i){return r=new bt(e,i,0,t.xa),n.Ka.Ra(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.bc.get(t.targetId);return(null===r||t.nt.L(r.nt)>0)&&(n.bc=n.bc.ot(t.targetId,t),n.vc.set(e,t.targetId)),t}))}function To(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),o=i.bc.get(e),a=n?"readwrite":"readwrite-primary",r.label=1;case 1:return r.trys.push([1,4,,5]),n?[3,3]:[4,i.persistence.runTransaction("Release target",a,(function(t){return i.persistence.No.removeTarget(t,o)}))];case 2:r.sent(),r.label=3;case 3:return[3,5];case 4:if(!wr(s=r.sent()))throw s;return d("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return i.bc=i.bc.remove(e),i.vc.delete(o.target),[2]}}))}))}function Ao(t,e,n){var r=_(t),i=ut.min(),o=Dt();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=_(t),i=r.vc.get(n);return void 0!==i?yr.resolve(r.bc.get(i)):r.Ka.va(e,n)}(r,t,Wn(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ka.Fa(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.Vc.Lr(t,e,n?i:ut.min(),n?o:Dt())})).next((function(t){return{documents:t,Fc:o}}))}))}function Mo(t,e){var n=_(t),r=_(n.Ka),i=n.bc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.Ue(t,e).next((function(t){return t?t.target:null}))}))}function Co(t){var e=_(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=_(t),i=Ot(),o=bi(n),a=Di(e),s=IDBKeyRange.lowerBound(o,!0);return a.rs({index:Yi.readTimeIndex,range:s},(function(t,e){var n=gi(r.serializer,e);i=i.ot(n.key,n),o=e.readTime})).next((function(){return{xc:i,readTime:_i(o)}}))}(e.Dc,t,e.Sc)})).then((function(t){var n=t.xc,r=t.readTime;return e.Sc=r,n}))}function Oo(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){return[2,(e=_(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Di(t),n=ut.min();return e.rs({index:Yi.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=_i(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.Sc=t}))]}))}))}function Po(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){if(t.code!==c.FAILED_PRECONDITION||t.message!==ni)throw t;return d("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}var ko=function(){function t(){this.$c=new At(Io.kc),this.Mc=new At(Io.Oc)}return t.prototype.m=function(){return this.$c.m()},t.prototype.Da=function(t,e){var n=new Io(t,e);this.$c=this.$c.add(n),this.Mc=this.Mc.add(n)},t.prototype.Lc=function(t,e){var n=this;t.forEach((function(t){return n.Da(t,e)}))},t.prototype.Na=function(t,e){this.Bc(new Io(t,e))},t.prototype.qc=function(t,e){var n=this;t.forEach((function(t){return n.Na(t,e)}))},t.prototype.Uc=function(t){var e=this,n=new C(new T([])),r=new Io(n,t),i=new Io(n,t+1),o=[];return this.Mc.Ft([r,i],(function(t){e.Bc(t),o.push(t.key)})),o},t.prototype.Qc=function(){var t=this;this.$c.forEach((function(e){return t.Bc(e)}))},t.prototype.Bc=function(t){this.$c=this.$c.delete(t),this.Mc=this.Mc.delete(t)},t.prototype.Wc=function(t){var e=new C(new T([])),n=new Io(e,t),r=new Io(e,t+1),i=Dt();return this.Mc.Ft([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.Ho=function(t){var e=new Io(t,0),n=this.$c.$t(e);return null!==n&&t.isEqual(n.key)},t}(),Io=function(){function t(t,e){this.key=t,this.jc=e}return t.kc=function(t,e){return C.i(t.key,e.key)||Z(t.jc,e.jc)},t.Oc=function(t,e){return Z(t.jc,e.jc)||C.i(t.key,e.key)},t}(),Lo=function(t,e){this.user=e,this.type="OAuth",this.Kc={},this.Kc.Authorization="Bearer "+t},Ro=function(){function t(){this.Gc=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.zc=function(){},t.prototype.Hc=function(t){this.Gc=t,t(Br.UNAUTHENTICATED)},t.prototype.Yc=function(){this.Gc=null},t}(),Do=function(){function t(t){var e=this;this.Jc=null,this.currentUser=Br.UNAUTHENTICATED,this.Xc=!1,this.Zc=0,this.Gc=null,this.forceRefresh=!1,this.Jc=function(){e.Zc++,e.currentUser=e.tu(),e.Xc=!0,e.Gc&&e.Gc(e.currentUser)},this.Zc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Jc):(this.Jc(null),t.get().then((function(t){e.auth=t,e.Jc&&e.auth.addAuthTokenListener(e.Jc)}),(function(){})))}return t.prototype.getToken=function(){var t=this,e=this.Zc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.Zc!==e?(d("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(b("string"==typeof n.accessToken),new Lo(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.zc=function(){this.forceRefresh=!0},t.prototype.Hc=function(t){this.Gc=t,this.Xc&&t(this.currentUser)},t.prototype.Yc=function(){this.auth&&this.auth.removeAuthTokenListener(this.Jc),this.Jc=null,this.Gc=null},t.prototype.tu=function(){var t=this.auth&&this.auth.getUid();return b(null===t||"string"==typeof t),new Br(t)},t}(),No=function(){function t(t,e){this.eu=t,this.nu=e,this.type="FirstParty",this.user=Br.ni}return Object.defineProperty(t.prototype,"Kc",{get:function(){var t={"X-Goog-AuthUser":this.nu},e=this.eu.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Fo=function(){function t(t,e){this.eu=t,this.nu=e}return t.prototype.getToken=function(){return Promise.resolve(new No(this.eu,this.nu))},t.prototype.Hc=function(t){t(Br.ni)},t.prototype.Yc=function(){},t.prototype.zc=function(){},t}(),jo=function(){function t(t,e,n,r,i,o){this.fn=t,this.su=n,this.iu=r,this.ru=i,this.listener=o,this.state=0,this.ou=0,this.au=null,this.stream=null,this.ys=new gr(t,e)}return t.prototype.cu=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.uu=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.hu()},t.prototype.stop=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.cu()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.lu=function(){this.state=0,this.ys.reset()},t.prototype._u=function(){var t=this;this.uu()&&null===this.au&&(this.au=this.fn.yn(this.su,6e4,(function(){return t.fu()})))},t.prototype.du=function(t){this.wu(),this.stream.send(t)},t.prototype.fu=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.uu()?[2,this.close(0)]:[2]}))}))},t.prototype.wu=function(){this.au&&(this.au.cancel(),this.au=null)},t.prototype.close=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return this.wu(),this.ys.cancel(),this.ou++,3!==t?this.ys.reset():e&&e.code===c.RESOURCE_EXHAUSTED?(m(e.toString()),m("Using maximum backoff delay to prevent overloading the backend."),this.ys.Rn()):e&&e.code===c.UNAUTHENTICATED&&this.ru.zc(),null!==this.stream&&(this.mu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Tu(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.mu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.Eu(this.ou),n=this.ou;this.ru.getToken().then((function(e){t.ou===n&&t.Iu(e)}),(function(n){e((function(){var e=new h(c.UNKNOWN,"Fetching auth token failed: "+n.message);return t.Au(e)}))}))},t.prototype.Iu=function(t){var e=this,n=this.Eu(this.ou);this.stream=this.Ru(t),this.stream.gu((function(){n((function(){return e.state=2,e.listener.gu()}))})),this.stream.Tu((function(t){n((function(){return e.Au(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.hu=function(){var t=this;this.state=4,this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.Au=function(t){return d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.Eu=function(t){var e=this;return function(n){e.fn.ws((function(){return e.ou===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Uo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,a}return r.__extends(e,t),e.prototype.Ru=function(t){return this.iu.Pu("Listen",t)},e.prototype.onMessage=function(t){this.ys.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:y()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.Qe?(b(void 0===e||"string"==typeof e),J.fromBase64String(e||"")):(b(void 0===e||e instanceof Uint8Array),J.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,s=a&&function(t){var e=void 0===t.code?c.UNKNOWN:wt(t.code);return new h(e,t.message||"")}(a);n=new Wt(r,i,o,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var l=Oe(t,u.document.name),f=Te(u.document.updateTime),p=new On({mapValue:{fields:u.document.fields}}),d=new Ln(l,f,p,{}),m=u.targetIds||[],v=u.removedTargetIds||[];n=new Ht(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;var g=e.documentDelete;g.document;var _=Oe(t,g.document),x=g.readTime?Te(g.readTime):ut.min(),w=new Rn(_,x),E=g.removedTargetIds||[];n=new Ht([],E,w.key,w)}else if("documentRemove"in e){e.documentRemove;var S=e.documentRemove;S.document;var T=Oe(t,S.document),A=S.removedTargetIds||[];n=new Ht([],A,T,null)}else{if(!("filter"in e))return y();e.filter;var M=e.filter;M.targetId;var C=M.count||0,O=new _t(C),P=M.targetId;n=new Gt(P,O)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return ut.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ut.min():e.readTime?Te(e.readTime):ut.min()}(t);return this.listener.yu(e,n)},e.prototype.Vu=function(t){var e={};e.database=Ie(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=vt(r)?{documents:Fe(t,r)}:{query:je(t,r)}).targetId=e.targetId,e.resumeToken.O()>0&&(n.resumeToken=Ee(t,e.resumeToken)),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return y()}}(0,e.et);return null==n?null:{"goog-listen-tags":n}}(this.serializer,t);n&&(e.labels=n),this.du(e)},e.prototype.pu=function(t){var e={};e.database=Ie(this.serializer),e.removeTarget=t,this.du(e)},e}(jo),zo=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,a.bu=!1,a}return r.__extends(e,t),Object.defineProperty(e.prototype,"vu",{get:function(){return this.bu},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.bu=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mu=function(){this.bu&&this.Su([])},e.prototype.Ru=function(t){return this.iu.Pu("Write",t)},e.prototype.onMessage=function(t){if(b(!!t.streamToken),this.lastStreamToken=t.streamToken,this.bu){this.ys.reset();var e=function(t,e){return t&&t.length>0?(b(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?Te(t.updateTime):Te(e);n.isEqual(ut.min())&&(n=Te(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new fn(n,r)}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Te(t.commitTime);return this.listener.Du(n,e)}return b(!t.writeResults||0===t.writeResults.length),this.bu=!0,this.listener.Cu()},e.prototype.Nu=function(){var t={};t.database=Ie(this.serializer),this.du(t)},e.prototype.Su=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return De(e.serializer,t)}))};this.du(n)},e}(jo),Bo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.iu=n,i.serializer=r,i.Fu=!1,i}return r.__extends(e,t),e.prototype.xu=function(){if(this.Fu)throw new h(c.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.$u=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.$u(t,e,n,i)})).catch((function(t){throw t.code===c.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.ku=function(t,e,n){var r=this;return this.xu(),this.credentials.getToken().then((function(i){return r.iu.ku(t,e,n,i)})).catch((function(t){throw t.code===c.UNAUTHENTICATED&&r.credentials.zc(),t}))},e.prototype.terminate=function(){this.Fu=!1},e}((function(){})),Vo=function(){function t(t,e){this.cs=t,this.di=e,this.state="Unknown",this.Mu=0,this.Ou=null,this.Lu=!0}return t.prototype.Bu=function(){var t=this;0===this.Mu&&(this.qu("Unknown"),this.Ou=this.cs.yn("online_state_timeout",1e4,(function(){return t.Ou=null,t.Uu("Backend didn't respond within 10 seconds."),t.qu("Offline"),Promise.resolve()})))},t.prototype.Qu=function(t){"Online"===this.state?this.qu("Unknown"):(this.Mu++,this.Mu>=1&&(this.Wu(),this.Uu("Connection failed 1 times. Most recent error: "+t.toString()),this.qu("Offline")))},t.prototype.set=function(t){this.Wu(),this.Mu=0,"Online"===t&&(this.Lu=!1),this.qu(t)},t.prototype.qu=function(t){t!==this.state&&(this.state=t,this.di(t))},t.prototype.Uu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Lu?(m(e),this.Lu=!1):d("OnlineStateTracker",e)},t.prototype.Wu=function(){null!==this.Ou&&(this.Ou.cancel(),this.Ou=null)},t}(),Ho=function(t,e,n,i,o){var a=this;this.ju=t,this.Ku=e,this.cs=n,this.Gu={},this.zu=[],this.Hu=new Map,this.Yu=new Set,this.Ju=[],this.Xu=o,this.Xu.Zu((function(t){n.ws((function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return Jo(this)?(d("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(4),[4,Wo(e)];case 1:return n.sent(),e.th.set("Unknown"),e.Yu.delete(4),[4,Go(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.th=new Vo(n,i)};function Go(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:if(!Jo(t))return[3,4];e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Wo(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n;return r.__generator(this,(function(r){switch(r.label){case 0:e=0,n=t.Ju,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function qo(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return e=_(t),d("RemoteStore","RemoteStore shutting down."),e.Yu.add(5),[4,Wo(e)];case 1:return n.sent(),e.Xu.Di(),e.th.set("Unknown"),[2]}}))}))}function Xo(t,e){var n=_(t);n.Hu.has(e.targetId)||(n.Hu.set(e.targetId,e),$o(n)?Ko(n):da(n).uu()&&Qo(n,e))}function Yo(t,e){var n=_(t),r=da(n);n.Hu.delete(e),r.uu()&&Zo(n,e),0===n.Hu.size&&(r.uu()?r._u():Jo(n)&&n.th.set("Unknown"))}function Qo(t,e){t.eh.Ie(e.targetId),da(t).Vu(e)}function Zo(t,e){t.eh.Ie(e),da(t).pu(e)}function Ko(t){t.eh=new Xt({qe:function(e){return t.Gu.qe(e)},Ue:function(e){return t.Hu.get(e)||null}}),da(t).start(),t.th.Bu()}function $o(t){return Jo(t)&&!da(t).cu()&&t.Hu.size>0}function Jo(t){return 0===_(t).Yu.size}function ta(t){t.eh=void 0}function ea(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return t.Hu.forEach((function(e,n){Qo(t,e)})),[2]}))}))}function na(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){return ta(t),$o(t)?(t.th.Qu(e),Ko(t)):t.th.set("Unknown"),[2]}))}))}function ra(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(s){switch(s.label){case 0:if(t.th.set("Online"),!(e instanceof Wt&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:n=e.cause,i=0,o=e.targetIds,r.label=1;case 1:return i<o.length?(a=o[i],t.Hu.has(a)?[4,t.Gu.nh(a,n)]:[3,3]):[3,5];case 2:r.sent(),t.Hu.delete(a),t.eh.removeTarget(a),r.label=3;case 3:r.label=4;case 4:return i++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return i=s.sent(),d("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),[4,ia(t,i)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ht?t.eh.be(e):e instanceof Gt?t.eh.$e(e):t.eh.De(e),n.isEqual(ut.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,xo(t.ju)];case 8:return o=s.sent(),n.L(o)>=0?[4,function(t,e){var n=t.eh.Oe(e);return n.zt.forEach((function(n,r){if(n.resumeToken.O()>0){var i=t.Hu.get(r);i&&t.Hu.set(r,i.it(n.resumeToken,e))}})),n.Ht.forEach((function(e){var n=t.Hu.get(e);if(n){t.Hu.set(e,n.it(J.B,n.nt)),Zo(t,e);var r=new bt(n.target,e,1,n.sequenceNumber);Qo(t,r)}})),t.Gu.sh(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return d("RemoteStore","Failed to raise snapshot:",a=s.sent()),[4,ia(t,a)];case 12:return s.sent(),[3,13];case 13:return[2]}}))}))}function ia(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i=this;return r.__generator(this,(function(o){switch(o.label){case 0:if(!wr(e))throw e;return t.Yu.add(1),[4,Wo(t)];case 1:return o.sent(),t.th.set("Offline"),n||(n=function(){return xo(t.ju)}),t.cs.Cs((function(){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return d("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Yu.delete(1),[4,Go(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function oa(t,e){return e().catch((function(n){return ia(t,n,e)}))}function aa(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:e=_(t),n=ma(e),i=e.zu.length>0?e.zu[e.zu.length-1].batchId:-1,r.label=1;case 1:if(!function(t){return Jo(t)&&t.zu.length<10}(e))return[3,7];r.label=2;case 2:return r.trys.push([2,4,,6]),[4,Eo(e.ju,i)];case 3:return null===(o=r.sent())?(0===e.zu.length&&n._u(),[3,7]):(i=o.batchId,function(t,e){t.zu.push(e);var n=ma(t);n.uu()&&n.vu&&n.Su(e.mutations)}(e,o),[3,6]);case 4:return a=r.sent(),[4,ia(e,a)];case 5:return r.sent(),[3,6];case 6:return[3,1];case 7:return sa(e)&&ua(e),[2]}}))}))}function sa(t){return Jo(t)&&!ma(t).cu()&&t.zu.length>0}function ua(t){ma(t).start()}function la(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return ma(t).Nu(),[2]}))}))}function ca(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n,i,o;return r.__generator(this,(function(r){for(e=ma(t),n=0,i=t.zu;n<i.length;n++)o=i[n],e.Su(o.mutations);return[2]}))}))}function ha(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return i=t.zu.shift(),o=ti.from(i,e,n),[4,oa(t,(function(){return t.Gu.ih(o)}))];case 1:return r.sent(),[4,aa(t)];case 2:return r.sent(),[2]}}))}))}function fa(t,e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return e&&ma(t).vu?[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return xt(i=e.code)&&i!==c.ABORTED?(n=t.zu.shift(),ma(t).lu(),[4,oa(t,(function(){return t.Gu.rh(n.batchId,e)}))]):[3,3];case 1:return r.sent(),[4,aa(t)];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sa(t)&&ua(t),[2]}}))}))}function pa(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),e?(n.Yu.delete(2),[4,Go(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Yu.add(2),[4,Wo(n)]);case 3:r.sent(),n.th.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function da(t){var e=this;return t.oh||(t.oh=function(t,e,n){var r=_(t);return r.xu(),new Uo(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:ea.bind(null,t),Tu:na.bind(null,t),yu:ra.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.oh.lu(),$o(t)?Ko(t):t.th.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.oh.stop()];case 2:e.sent(),ta(t),e.label=3;case 3:return[2]}}))}))}))),t.oh}function ma(t){var e=this;return t.ah||(t.ah=function(t,e,n){var r=_(t);return r.xu(),new zo(e,r.iu,r.credentials,r.serializer,n)}(t.Ku,t.cs,{gu:la.bind(null,t),Tu:fa.bind(null,t),Cu:ca.bind(null,t),Du:ha.bind(null,t)}),t.Ju.push((function(n){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return n?(t.ah.lu(),[4,aa(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.ah.stop()];case 3:e.sent(),t.zu.length>0&&(d("RemoteStore","Stopping write stream with "+t.zu.length+" pending writes"),t.zu=[]),e.label=4;case 4:return[2]}}))}))}))),t.ah}var va=function(t){this.key=t},ga=function(t){this.key=t},ya=function(){function t(t,e){this.query=t,this.uh=e,this.hh=null,this.te=!1,this.lh=Dt(),this.Wt=Dt(),this._h=Jn(t),this.fh=new jt(this._h)}return Object.defineProperty(t.prototype,"dh",{get:function(){return this.uh},enumerable:!1,configurable:!0}),t.prototype.wh=function(t,e){var n=this,r=e?e.mh:new Ut,i=e?e.fh:this.fh,o=e?e.Wt:this.Wt,a=i,s=!1,u=Un(this.query)&&i.size===this.query.limit?i.last():null,l=zn(this.query)&&i.size===this.query.limit?i.first():null;if(t.ht((function(t,e){var c=i.get(t),h=e instanceof Ln?e:null;h&&(h=$n(n.query,h)?h:null);var f=!!c&&n.Wt.has(c.key),p=!!h&&(h.Je||n.Wt.has(h.key)&&h.hasCommittedMutations),d=!1;c&&h?c.data().isEqual(h.data())?f!==p&&(r.track({type:3,doc:h}),d=!0):n.Th(c,h)||(r.track({type:2,doc:h}),d=!0,(u&&n._h(h,u)>0||l&&n._h(h,l)<0)&&(s=!0)):!c&&h?(r.track({type:0,doc:h}),d=!0):c&&!h&&(r.track({type:1,doc:c}),d=!0,(u||l)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),Un(this.query)||zn(this.query))for(;a.size>this.query.limit;){var c=Un(this.query)?a.last():a.first();a=a.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{fh:a,mh:r,Eh:s,Wt:o}},t.prototype.Th=function(t,e){return t.Je&&e.hasCommittedMutations&&!e.Je},t.prototype.yr=function(t,e,n){var r=this,i=this.fh;this.fh=t.fh,this.Wt=t.Wt;var o=t.mh.Ut();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return y()}};return n(t)-n(e)}(t.type,e.type)||r._h(t.doc,e.doc)})),this.Ih(n);var a=e?this.Ah():[],s=0===this.lh.size&&this.te?1:0,u=s!==this.hh;return this.hh=s,0!==o.length||u?{snapshot:new zt(this.query,t.fh,i,o,t.Wt,0===s,u,!1),Rh:a}:{Rh:a}},t.prototype.Qs=function(t){return this.te&&"Offline"===t?(this.te=!1,this.yr({fh:this.fh,mh:new Ut,Wt:this.Wt,Eh:!1},!1)):{Rh:[]}},t.prototype.gh=function(t){return!this.uh.has(t)&&!!this.fh.has(t)&&!this.fh.get(t).Je},t.prototype.Ih=function(t){var e=this;t&&(t.ee.forEach((function(t){return e.uh=e.uh.add(t)})),t.ne.forEach((function(t){})),t.se.forEach((function(t){return e.uh=e.uh.delete(t)})),this.te=t.te)},t.prototype.Ah=function(){var t=this;if(!this.te)return[];var e=this.lh;this.lh=Dt(),this.fh.forEach((function(e){t.gh(e.key)&&(t.lh=t.lh.add(e.key))}));var n=[];return e.forEach((function(e){t.lh.has(e)||n.push(new ga(e))})),this.lh.forEach((function(t){e.has(t)||n.push(new va(t))})),n},t.prototype.Ph=function(t){this.uh=t.Fc,this.lh=Dt();var e=this.wh(t.documents);return this.yr(e,!0)},t.prototype.yh=function(){return zt.Gt(this.query,this.fh,this.Wt,0===this.hh)},t}(),ba=function(t,e,n){this.query=t,this.targetId=e,this.view=n},_a=function(t){this.key=t,this.Vh=!1},xa=function(){function t(t,e,n,r,i,o){this.ju=t,this.ph=e,this.bh=n,this.Sh=r,this.currentUser=i,this.Dh=o,this.Ch={},this.Nh=new at((function(t){return Zn(t)}),Qn),this.Fh=new Map,this.xh=[],this.$h=new Et(C.i),this.kh=new Map,this.Mh=new ko,this.Oh={},this.Lh=new Map,this.Bh=oo.da(),this.onlineState="Unknown",this.qh=void 0}return Object.defineProperty(t.prototype,"Uh",{get:function(){return!0===this.qh},enumerable:!1,configurable:!0}),t}();function wa(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=Ya(t),(a=n.Nh.get(e))?(i=a.targetId,n.Sh.Oi(i),o=a.view.yh(),[3,4]):[3,1];case 1:return[4,So(n.ju,Wn(e))];case 2:return s=r.sent(),u=n.Sh.Oi(s.targetId),i=s.targetId,[4,Ea(n,e,i,"current"===u)];case 3:o=r.sent(),n.Uh&&Xo(n.ph,s),r.label=4;case 4:return[2,o]}}))}))}function Ea(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s,u,l,c;return r.__generator(this,(function(h){switch(h.label){case 0:return t.Qh=function(e,n,i){return function(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=e.view.wh(n)).Eh?[4,Ao(t.ju,e.query,!1).then((function(t){var n=t.documents;return e.view.wh(n,o)}))]:[3,2];case 1:o=r.sent(),r.label=2;case 2:return a=i&&i.zt.get(e.targetId),s=e.view.yr(o,t.Uh,a),[2,(Ra(t,e.targetId,s.Rh),s.snapshot)]}}))}))}(t,e,n,i)},[4,Ao(t.ju,e,!0)];case 1:return o=h.sent(),a=new ya(e,o.Fc),s=a.wh(o.documents),u=Vt.Zt(n,i&&"Offline"!==t.onlineState),l=a.yr(s,t.Uh,u),Ra(t,n,l.Rh),c=new ba(e,n,a),[2,(t.Nh.set(e,c),t.Fh.has(n)?t.Fh.get(n).push(e):t.Fh.set(n,[e]),l.snapshot)]}}))}))}function Sa(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.Nh.get(e),(o=n.Fh.get(i.targetId)).length>1?[2,(n.Fh.set(i.targetId,o.filter((function(t){return!Qn(t,e)}))),void n.Nh.delete(e))]:n.Uh?(n.Sh.Bi(i.targetId),n.Sh.Fi(i.targetId)?[3,2]:[4,To(n.ju,i.targetId,!1).then((function(){n.Sh.Ui(i.targetId),Yo(n.ph,i.targetId),Ia(n,i.targetId)})).catch(Po)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return Ia(n,i.targetId),[4,To(n.ju,i.targetId,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))}function Ta(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,wo(n.ju,e)];case 2:return i=r.sent(),e.zt.forEach((function(t,e){var r=n.kh.get(e);r&&(b(t.ee.size+t.ne.size+t.se.size<=1),t.ee.size>0?r.Vh=!0:t.ne.size>0?b(r.Vh):t.se.size>0&&(b(r.Vh),r.Vh=!1))})),[4,Fa(n,i,e)];case 3:return r.sent(),[3,6];case 4:return[4,Po(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Aa(t,e,n){var r=_(t);if(r.Uh&&0===n||!r.Uh&&1===n){var i=[];r.Nh.forEach((function(t,n){var r=n.view.Qs(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=_(t);n.onlineState=e;var r=!1;n.Bs.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Qs(e)&&(r=!0)})),r&&Ur(n)}(r.bh,e),i.length&&r.Ch.yu(i),r.onlineState=e,r.Uh&&r.Sh.Ki(e)}}function Ma(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:return(i=_(t)).Sh.Qi(e,"rejected",n),o=i.kh.get(e),(a=o&&o.key)?(s=(s=new Et(C.i)).ot(a,new Rn(a,ut.min())),u=Dt().add(a),l=new Bt(ut.min(),new Map,new At(Z),s,u),[4,Ta(i,l)]):[3,2];case 1:return r.sent(),i.$h=i.$h.remove(a),i.kh.delete(e),Na(i),[3,4];case 2:return[4,To(i.ju,e,!1).then((function(){return Ia(i,e,n)})).catch(Po)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}))}function Ca(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),i=e.batch.batchId,r.label=1;case 1:return r.trys.push([1,4,,6]),[4,_o(n.ju,e)];case 2:return o=r.sent(),ka(n,i,null),Pa(n,i),n.Sh.ki(i,"acknowledged"),[4,Fa(n,o)];case 3:return r.sent(),[3,6];case 4:return[4,Po(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Oa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o;return r.__generator(this,(function(r){switch(r.label){case 0:i=_(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n.Sr.Oo(t,e).next((function(e){return b(null!==e),r=e.keys(),n.Sr.Wo(t,e)})).next((function(){return n.Sr.zo(t)})).next((function(){return n.Cc.kr(t,r)}))}))}(i.ju,e)];case 2:return o=r.sent(),ka(i,e,n),Pa(i,e),i.Sh.ki(e,"rejected",n),[4,Fa(i,o)];case 3:return r.sent(),[3,6];case 4:return[4,Po(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))}function Pa(t,e){(t.Lh.get(e)||[]).forEach((function(t){t.resolve()})),t.Lh.delete(e)}function ka(t,e,n){var r=_(t),i=r.Oh[r.currentUser.ti()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Oh[r.currentUser.ti()]=i}}function Ia(t,e,n){void 0===n&&(n=null),t.Sh.Bi(e);for(var r=0,i=t.Fh.get(e);r<i.length;r++){var o=i[r];t.Nh.delete(o),n&&t.Ch.Wh(o,n)}t.Fh.delete(e),t.Uh&&t.Mh.Uc(e).forEach((function(e){t.Mh.Ho(e)||La(t,e)}))}function La(t,e){var n=t.$h.get(e);null!==n&&(Yo(t.ph,n),t.$h=t.$h.remove(e),t.kh.delete(n),Na(t))}function Ra(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof va?(t.Mh.Da(o.key,e),Da(t,o)):o instanceof ga?(d("SyncEngine","Document no longer in limbo: "+o.key),t.Mh.Na(o.key,e),t.Mh.Ho(o.key)||La(t,o.key)):y()}}function Da(t,e){var n=e.key;t.$h.get(n)||(d("SyncEngine","New document in limbo: "+n),t.xh.push(n),Na(t))}function Na(t){for(;t.xh.length>0&&t.$h.size<t.Dh;){var e=t.xh.shift(),n=t.Bh.next();t.kh.set(n,new _a(e)),t.$h=t.$h.ot(e,n),Xo(t.ph,new bt(Wn(jn(e.path)),n,2,Vr.ai))}}function Fa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(u){switch(u.label){case 0:return i=_(t),o=[],a=[],s=[],i.Nh.m()?[3,3]:(i.Nh.forEach((function(t,r){s.push(i.Qh(r,e,n).then((function(t){if(t){i.Uh&&i.Sh.Qi(r.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=oi.zr(r.targetId,t);a.push(e)}})))})),[4,Promise.all(s)]);case 1:return u.sent(),i.Ch.yu(o),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c,h;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return yr.forEach(e,(function(e){return yr.forEach(e.Kr,(function(r){return n.persistence.No.Da(t,e.targetId,r)})).next((function(){return yr.forEach(e.Gr,(function(r){return n.persistence.No.Na(t,e.targetId,r)}))}))}))}))];case 2:return r.sent(),[3,4];case 3:if(!wr(i=r.sent()))throw i;return d("LocalStore","Failed to update sequence numbers: "+i),[3,4];case 4:for(o=0,a=e;o<a.length;o++)s=a[o],u=s.targetId,s.fromCache||(l=n.bc.get(u),c=l.nt,h=l.rt(c),n.bc=n.bc.ot(u,h));return[2]}}))}))}(i.ju,a)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function ja(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(o){switch(o.label){case 0:return(n=_(t)).currentUser.isEqual(e)?[3,3]:(d("SyncEngine","User change. New user:",e.ti()),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=n.Sr,o=n.Cc,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var r;return n.Sr.Uo(t).next((function(a){return r=a,i=n.persistence.mc(e),o=new ii(n.Dc,i,n.persistence.Ic()),i.Uo(t)})).next((function(e){for(var n=[],i=[],a=Dt(),s=0,u=r;s<u.length;s++){var l=u[s];n.push(l.batchId);for(var c=0,h=l.mutations;c<h.length;c++){var f=h[c];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var m=d[p];i.push(m.batchId);for(var v=0,g=m.mutations;v<g.length;v++){var y=g[v];a=a.add(y.key)}}return o.kr(t,a).next((function(t){return{jh:t,Kh:n,Gh:i}}))}))}))];case 1:return a=r.sent(),[2,(n.Sr=i,n.Cc=o,n.Vc.Nc(n.Cc),a)]}}))}))}(n.ju,e)]);case 1:return i=o.sent(),n.currentUser=e,function(t,e){t.Lh.forEach((function(t){t.forEach((function(t){t.reject(new h(c.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Lh.clear()}(n),n.Sh.ji(e,i.Kh,i.Gh),[4,Fa(n,i.jh)];case 2:o.sent(),o.label=3;case 3:return[2]}}))}))}function Ua(t,e){var n=_(t),r=n.kh.get(e);if(r&&r.Vh)return Dt().add(r.key);var i=Dt(),o=n.Fh.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],l=n.Nh.get(u);i=i.kt(l.view.dh)}return i}function za(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,Ao((n=_(t)).ju,e.query,!0)];case 1:return i=r.sent(),o=e.view.Ph(i),[2,(n.Uh&&Ra(n,e.targetId,o.Rh),o)]}}))}))}function Ba(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,function(t,e){var n=_(t),r=_(n.Sr);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.Lo(t,e).next((function(e){return e?n.Cc.kr(t,e):yr.resolve(null)}))}))}((o=_(t)).ju,e)];case 1:return null===(a=r.sent())?[3,6]:"pending"!==n?[3,3]:[4,aa(o.ph)];case 2:return r.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ka(o,e,i||null),Pa(o,e),function(t,e){_(_(t).Sr).Ko(e)}(o.ju,e)):y(),r.label=4;case 4:return[4,Fa(o,a)];case 5:return r.sent(),[3,7];case 6:d("SyncEngine","Cannot apply mutation batch with id: "+e),r.label=7;case 7:return[2]}}))}))}function Va(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c;return r.__generator(this,(function(r){switch(r.label){case 0:return Ya(n=_(t)),Qa(n),!0!==e||!0===n.qh?[3,3]:(i=n.Sh.Ci(),[4,Ha(n,i.A())]);case 1:return o=r.sent(),n.qh=!0,[4,pa(n.ph,!0)];case 2:for(r.sent(),a=0,s=o;a<s.length;a++)u=s[a],Xo(n.ph,u);return[3,7];case 3:return!1!==e||!1===n.qh?[3,7]:(l=[],c=Promise.resolve(),n.Fh.forEach((function(t,e){n.Sh.qi(e)?l.push(e):c=c.then((function(){return Ia(n,e),To(n.ju,e,!0)})),Yo(n.ph,e)})),[4,c]);case 4:return r.sent(),[4,Ha(n,l)];case 5:return r.sent(),function(t){var e=_(t);e.kh.forEach((function(t,n){Yo(e.ph,n)})),e.Mh.Qc(),e.kh=new Map,e.$h=new Et(C.i)}(n),n.qh=!1,[4,pa(n.ph,!1)];case 6:r.sent(),r.label=7;case 7:return[2]}}))}))}function Ha(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u,l,c,h,f,p,d,m,v;return r.__generator(this,(function(r){switch(r.label){case 0:n=_(t),i=[],o=[],a=0,s=e,r.label=1;case 1:return a<s.length?(u=s[a],l=void 0,(c=n.Fh.get(u))&&0!==c.length?[4,So(n.ju,Wn(c[0]))]:[3,7]):[3,13];case 2:l=r.sent(),h=0,f=c,r.label=3;case 3:return h<f.length?(p=f[h],d=n.Nh.get(p),[4,za(n,d)]):[3,6];case 4:(m=r.sent()).snapshot&&o.push(m.snapshot),r.label=5;case 5:return h++,[3,3];case 6:return[3,11];case 7:return[4,Mo(n.ju,u)];case 8:return v=r.sent(),[4,So(n.ju,v)];case 9:return l=r.sent(),[4,Ea(n,Ga(v),u,!1)];case 10:r.sent(),r.label=11;case 11:i.push(l),r.label=12;case 12:return a++,[3,1];case 13:return[2,(n.Ch.yu(o),i)]}}))}))}function Ga(t){return Fn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Wa(t){var e=_(t);return _(_(e.ju).persistence).pi()}function qa(t,e,n,i){return r.__awaiter(this,void 0,void 0,(function(){var o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:return(o=_(t)).qh?(d("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Fh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Co(o.ju)];case 3:return a=r.sent(),s=Bt.Xt(e,"current"===n),[4,Fa(o,a,s)];case 4:return r.sent(),[3,8];case 5:return[4,To(o.ju,e,!0)];case 6:return r.sent(),Ia(o,e,i),[3,8];case 7:y(),r.label=8;case 8:return[2]}}))}))}function Xa(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l,c,h,f,p;return r.__generator(this,(function(m){switch(m.label){case 0:if(!(i=Ya(t)).qh)return[3,10];o=0,a=e,m.label=1;case 1:return o<a.length?(s=a[o],i.Fh.has(s)?(d("SyncEngine","Adding an already active target "+s),[3,5]):[4,Mo(i.ju,s)]):[3,6];case 2:return u=m.sent(),[4,So(i.ju,u)];case 3:return l=m.sent(),[4,Ea(i,Ga(u),l.targetId,!1)];case 4:m.sent(),Xo(i.ph,l),m.label=5;case 5:return o++,[3,1];case 6:c=function(t){return r.__generator(this,(function(e){switch(e.label){case 0:return i.Fh.has(t)?[4,To(i.ju,t,!1).then((function(){Yo(i.ph,t),Ia(i,t)})).catch(Po)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},h=0,f=n,m.label=7;case 7:return h<f.length?(p=f[h],[5,c(p)]):[3,10];case 8:m.sent(),m.label=9;case 9:return h++,[3,7];case 10:return[2]}}))}))}function Ya(t){var e=_(t);return e.ph.Gu.sh=Ta.bind(null,e),e.ph.Gu.qe=Ua.bind(null,e),e.ph.Gu.nh=Ma.bind(null,e),e.Ch.yu=Fr.bind(null,e.bh),e.Ch.Wh=jr.bind(null,e.bh),e}function Qa(t){var e=_(t);return e.ph.Gu.ih=Ca.bind(null,e),e.ph.Gu.rh=Oa.bind(null,e),e}var Za=function(){function t(){}return t.prototype.Nc=function(t){this.zh=t},t.prototype.Lr=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.on.length||1===t.on.length&&t.on[0].field.p())}(e)||n.isEqual(ut.min())?this.Hh(t,e):this.zh.kr(t,r).next((function(a){var s=i.Yh(e,a);return(Un(e)||zn(e))&&i.Eh(e.an,s,r,n)?i.Hh(t,e):(p()<=o.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Kn(e)),i.zh.Lr(t,e,n).next((function(t){return s.forEach((function(e){t=t.ot(e.key,e)})),t})))}))},t.prototype.Yh=function(t,e){var n=new At(Jn(t));return e.forEach((function(e,r){r instanceof Ln&&$n(t,r)&&(n=n.add(r))})),n},t.prototype.Eh=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.L(r)>0)},t.prototype.Hh=function(t,e){return p()<=o.LogLevel.DEBUG&&d("IndexFreeQueryEngine","Using full collection scan to execute query:",Kn(e)),this.zh.Lr(t,e,ut.min())},t}(),Ka=function(){function t(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Jh=1,this.Xh=new At(Io.kc)}return t.prototype.$o=function(t){return yr.resolve(0===this.Sr.length)},t.prototype.ko=function(t,e,n,r){var i=this.Jh;this.Jh++,this.Sr.length>0&&this.Sr[this.Sr.length-1];var o=new Jr(i,e,n,r);this.Sr.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.Xh=this.Xh.add(new Io(u.key,i)),this.Dr.Mo(t,u.key.path.h())}return yr.resolve(o)},t.prototype.Oo=function(t,e){return yr.resolve(this.Zh(e))},t.prototype.Bo=function(t,e){var n=e+1,r=this.tl(n),i=r<0?0:r;return yr.resolve(this.Sr.length>i?this.Sr[i]:null)},t.prototype.qo=function(){return yr.resolve(0===this.Sr.length?-1:this.Jh-1)},t.prototype.Uo=function(t){return yr.resolve(this.Sr.slice())},t.prototype.Nr=function(t,e){var n=this,r=new Io(e,0),i=new Io(e,Number.POSITIVE_INFINITY),o=[];return this.Xh.Ft([r,i],(function(t){var e=n.Zh(t.jc);o.push(e)})),yr.resolve(o)},t.prototype.Or=function(t,e){var n=this,r=new At(Z);return e.forEach((function(t){var e=new Io(t,0),i=new Io(t,Number.POSITIVE_INFINITY);n.Xh.Ft([e,i],(function(t){r=r.add(t.jc)}))})),yr.resolve(this.el(r))},t.prototype.Wr=function(t,e){var n=e.path,r=n.length+1,i=n;C.F(i)||(i=i.child(""));var o=new Io(new C(i),0),a=new At(Z);return this.Xh.xt((function(t){var e=t.key.path;return!!n.T(e)&&(e.length===r&&(a=a.add(t.jc)),!0)}),o),yr.resolve(this.el(a))},t.prototype.el=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.Zh(t);null!==r&&n.push(r)})),n},t.prototype.Wo=function(t,e){var n=this;b(0===this.nl(e.batchId,"removed")),this.Sr.shift();var r=this.Xh;return yr.forEach(e.mutations,(function(i){var o=new Io(i.key,e.batchId);return r=r.delete(o),n.No.Go(t,i.key)})).next((function(){n.Xh=r}))},t.prototype.Ko=function(t){},t.prototype.Ho=function(t,e){var n=new Io(e,0),r=this.Xh.$t(n);return yr.resolve(e.isEqual(r&&r.key))},t.prototype.zo=function(t){return this.Sr.length,yr.resolve()},t.prototype.nl=function(t,e){return this.tl(t)},t.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},t.prototype.Zh=function(t){var e=this.tl(t);return e<0||e>=this.Sr.length?null:this.Sr[e]},t}(),$a=function(){function t(t,e){this.Dr=t,this.sl=e,this.docs=new Et(C.i),this.size=0}return t.prototype.Er=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:a,readTime:n}),this.size+=a-o,this.Dr.Mo(t,r.path.h())},t.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Rr=function(t,e){var n=this.docs.get(e);return yr.resolve(n?n.ta:null)},t.prototype.getEntries=function(t,e){var n=this,r=Pt();return e.forEach((function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)})),yr.resolve(r)},t.prototype.Lr=function(t,e,n){for(var r=It(),i=new C(e.path.child("")),o=this.docs.ft(i);o.At();){var a=o.It(),s=a.key,u=a.value,l=u.ta,c=u.readTime;if(!e.path.T(s.path))break;c.L(n)<=0||l instanceof Ln&&$n(e,l)&&(r=r.ot(l.key,l))}return yr.resolve(r)},t.prototype.il=function(t,e){return yr.forEach(this.docs,(function(t){return e(t)}))},t.prototype.ra=function(t){return new Ja(this)},t.prototype.aa=function(t){return yr.resolve(this.size)},t}(),Ja=function(t){function e(e){var n=this;return(n=t.call(this)||this).ca=e,n}return r.__extends(e,t),e.prototype.yr=function(t){var e=this,n=[];return this.wr.forEach((function(r,i){i?n.push(e.ca.Er(t,i,e.readTime)):e.ca.Ar(r)})),yr.$n(n)},e.prototype.gr=function(t,e){return this.ca.Rr(t,e)},e.prototype.Pr=function(t,e){return this.ca.getEntries(t,e)},e}(ei),ts=function(){function t(t){this.persistence=t,this.rl=new at((function(t){return dt(t)}),mt),this.lastRemoteSnapshotVersion=ut.min(),this.highestTargetId=0,this.ol=0,this.al=new ko,this.targetCount=0,this.cl=oo.fa()}return t.prototype.Ce=function(t,e){return this.rl.forEach((function(t,n){return e(n)})),yr.resolve()},t.prototype.Ea=function(t){return yr.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Ia=function(t){return yr.resolve(this.ol)},t.prototype.wa=function(t){return this.highestTargetId=this.cl.next(),yr.resolve(this.highestTargetId)},t.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),yr.resolve()},t.prototype.ga=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.cl=new oo(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},t.prototype.Ra=function(t,e){return this.ga(e),this.targetCount+=1,yr.resolve()},t.prototype.ya=function(t,e){return this.ga(e),yr.resolve()},t.prototype.Va=function(t,e){return this.rl.delete(e.target),this.al.Uc(e.targetId),this.targetCount-=1,yr.resolve()},t.prototype.po=function(t,e,n){var r=this,i=0,o=[];return this.rl.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.rl.delete(a),o.push(r.pa(t,s.targetId)),i++)})),yr.$n(o).next((function(){return i}))},t.prototype.ba=function(t){return yr.resolve(this.targetCount)},t.prototype.va=function(t,e){var n=this.rl.get(e)||null;return yr.resolve(n)},t.prototype.Sa=function(t,e,n){return this.al.Lc(e,n),yr.resolve()},t.prototype.Ca=function(t,e,n){this.al.qc(e,n);var r=this.persistence.No,i=[];return r&&e.forEach((function(e){i.push(r.Go(t,e))})),yr.$n(i)},t.prototype.pa=function(t,e){return this.al.Uc(e),yr.resolve()},t.prototype.Fa=function(t,e){var n=this.al.Wc(e);return yr.resolve(n)},t.prototype.Ho=function(t,e){return yr.resolve(this.al.Ho(e))},t}(),es=function(){function t(t){var e=this;this.ul={},this.Ma=new Vr(0),this.Oa=!1,this.Oa=!0,this.No=t(this),this.Ka=new ts(this),this.Dr=new ji,this.vr=function(t,n){return new $a(t,(function(t){return e.No.hl(t)}))}(this.Dr)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.Di=function(){return this.Oa=!1,Promise.resolve()},Object.defineProperty(t.prototype,"Ei",{get:function(){return this.Oa},enumerable:!1,configurable:!0}),t.prototype.Za=function(){},t.prototype.tc=function(){},t.prototype.Ic=function(){return this.Dr},t.prototype.mc=function(t){var e=this.ul[t.ti()];return e||(e=new Ka(this.Dr,this.No),this.ul[t.ti()]=e),e},t.prototype.Tc=function(){return this.Ka},t.prototype.Ec=function(){return this.vr},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new ns(this.Ma.next());return this.No.ll(),n(i).next((function(t){return r.No._l(i).next((function(){return t}))})).Fn().then((function(t){return i.br(),t}))},t.prototype.fl=function(t,e){return yr.kn(Object.values(this.ul).map((function(n){return function(){return n.Ho(t,e)}})))},t}(),ns=function(t){function e(e){var n=this;return(n=t.call(this)||this).xa=e,n}return r.__extends(e,t),e}(ri),rs=function(){function t(t){this.persistence=t,this.dl=new ko,this.wl=null}return t.ml=function(e){return new t(e)},Object.defineProperty(t.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw y()},enumerable:!1,configurable:!0}),t.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),yr.resolve()},t.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),yr.resolve()},t.prototype.Go=function(t,e){return this.Tl.add(e.toString()),yr.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.dl.Uc(e.targetId).forEach((function(t){return n.Tl.add(t.toString())}));var r=this.persistence.Tc();return r.Fa(t,e.targetId).next((function(t){t.forEach((function(t){return n.Tl.add(t.toString())}))})).next((function(){return r.Va(t,e)}))},t.prototype.ll=function(){this.wl=new Set},t.prototype._l=function(t){var e=this,n=this.persistence.Ec().ra();return yr.forEach(this.Tl,(function(r){var i=C.D(r);return e.El(t,i).next((function(t){t||n.Ar(i)}))})).next((function(){return e.wl=null,n.apply(t)}))},t.prototype.yc=function(t,e){var n=this;return this.El(t,e).next((function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())}))},t.prototype.hl=function(t){return 0},t.prototype.El=function(t,e){var n=this;return yr.kn([function(){return yr.resolve(n.dl.Ho(e))},function(){return n.persistence.Tc().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},t}(),is=function(){function t(t){this.Il=t.Il,this.Al=t.Al}return t.prototype.gu=function(t){this.Rl=t},t.prototype.Tu=function(t){this.gl=t},t.prototype.onMessage=function(t){this.Pl=t},t.prototype.close=function(){this.Al()},t.prototype.send=function(t){this.Il(t)},t.prototype.yl=function(){this.Rl()},t.prototype.Vl=function(t){this.gl(t)},t.prototype.pl=function(t){this.Pl(t)},t}(),os={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},as=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.W=e.W,n}return r.__extends(e,t),e.prototype.Nl=function(t,e,n,r){return new Promise((function(i,o){var a=new s.XhrIo;a.listenOnce(s.EventType.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case s.ErrorCode.NO_ERROR:var e=a.getResponseJson();d("Connection","XHR received:",JSON.stringify(e)),i(e);break;case s.ErrorCode.TIMEOUT:d("Connection",'RPC "'+t+'" timed out'),o(new h(c.DEADLINE_EXCEEDED,"Request time out"));break;case s.ErrorCode.HTTP_ERROR:var n=a.getStatus();if(d("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(c).indexOf(e)>=0?e:c.UNKNOWN}(r.status);o(new h(u,r.message))}else o(new h(c.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new h(c.UNAVAILABLE,"Connection failed."));break;default:y()}}finally{d("Connection",'RPC "'+t+'" completed.')}}));var u=JSON.stringify(r);a.send(e,"POST",u,n,15)}))},e.prototype.Pu=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=s.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.U.projectId+"/databases/"+this.U.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.W};this.Cl(i.initMessageHeaders,e),a.isMobileCordova()||a.isReactNative()||a.isElectron()||a.isIE()||a.isUWP()||a.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d("Connection","Creating WebChannel: "+o,i);var u=r.createWebChannel(o,i),l=!1,f=!1,p=new is({Il:function(t){f?d("Connection","Not sending because WebChannel is closed:",t):(l||(d("Connection","Opening WebChannel transport."),u.open(),l=!0),d("Connection","WebChannel sending:",t),u.send(t))},Al:function(){return u.close()}}),m=function(t,e){u.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return m(s.WebChannel.EventType.OPEN,(function(){f||d("Connection","WebChannel transport opened.")})),m(s.WebChannel.EventType.CLOSE,(function(){f||(f=!0,d("Connection","WebChannel transport closed"),p.Vl())})),m(s.WebChannel.EventType.ERROR,(function(t){f||(f=!0,v("Connection","WebChannel transport errored:",t),p.Vl(new h(c.UNAVAILABLE,"The operation could not be completed")))})),m(s.WebChannel.EventType.MESSAGE,(function(t){var e;if(!f){var n=t.data[0];b(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){d("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=gt[t];if(void 0!==e)return wt(e)}(o),s=i.message;void 0===a&&(a=c.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),f=!0,p.Vl(new h(a,s)),u.close()}else d("Connection","WebChannel received:",n),p.pl(n)}})),setTimeout((function(){p.yl()}),0),p},e}(function(){function t(t){this.bl=t,this.U=t.U;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this.U.projectId+"/databases/"+this.U.database+"/documents"}return t.prototype.$u=function(t,e,n,r){var i=this.Dl(t,e);d("RestConnection","Sending: ",i,n);var o={};return this.Cl(o,r),this.Nl(t,i,o,n).then((function(t){return d("RestConnection","Received: ",t),t}),(function(e){throw v("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.ku=function(t,e,n,r){return this.$u(t,e,n,r)},t.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/7.24.0",t["Content-Type"]="text/plain",e)for(var n in e.Kc)e.Kc.hasOwnProperty(n)&&(t[n]=e.Kc[n])},t.prototype.Dl=function(t,e){var n=os[t];return this.vl+"/v1/"+e+":"+n},t}()),ss=function(){function t(){var t=this;this.Fl=function(){return t.xl()},this.$l=function(){return t.kl()},this.Ml=[],this.Ol()}return t.prototype.Zu=function(t){this.Ml.push(t)},t.prototype.Di=function(){window.removeEventListener("online",this.Fl),window.removeEventListener("offline",this.$l)},t.prototype.Ol=function(){window.addEventListener("online",this.Fl),window.addEventListener("offline",this.$l)},t.prototype.xl=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},t.prototype.kl=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},t.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),us=function(){function t(){}return t.prototype.Zu=function(t){},t.prototype.Di=function(){},t}();function ls(t){return new ye(t,!0)}var cs="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",hs=function(){function t(){}return t.prototype.initialize=function(t){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return this.Sh=this.Ll(t),this.persistence=this.Bl(t),[4,this.persistence.start()];case 1:return e.sent(),this.ql=this.Ul(t),this.ju=this.Ql(t),[2]}}))}))},t.prototype.Ul=function(t){return null},t.prototype.Ql=function(t){return e=this.persistence,n=new Za,r=t.Wl,new bo(e,n,r);var e,n,r},t.prototype.Bl=function(t){if(t.persistenceSettings.jl)throw new h(c.FAILED_PRECONDITION,cs);return new es(rs.ml)},t.prototype.Ll=function(t){return new $r},t.prototype.terminate=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Sh.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}}))}))},t.prototype.clearPersistence=function(t,e){throw new h(c.FAILED_PRECONDITION,cs)},t}(),fs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Kl.fi,this.Sh instanceof Kr?(this.Sh.fi={er:Ba.bind(null,n),nr:qa.bind(null,n),sr:Xa.bind(null,n),pi:Wa.bind(null,n)},[4,this.Sh.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.Xa((function(t){return r.__awaiter(i,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,Va(this.Kl.fi,t)];case 1:return e.sent(),this.ql&&(t&&!this.ql.Ei?this.ql.start(this.ju):t||this.ql.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Ll=function(t){if(t.persistenceSettings.jl&&t.persistenceSettings.synchronizeTabs){var e=Cr();if(!Kr.Ln(e))throw new h(c.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=yo(t.bl.U,t.bl.persistenceKey);return new Kr(e,t.cs,n,t.clientId,t.Wl)}return new $r},e}(function(t){function e(e){var n=this;return(n=t.call(this)||this).Kl=e,n}return r.__extends(e,t),e.prototype.initialize=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,Oo(this.ju)];case 2:return n.sent(),[4,this.Kl.initialize(this,e)];case 3:return n.sent(),[4,Qa(this.Kl.fi)];case 4:return n.sent(),[4,aa(this.Kl.ph)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ul=function(t){var e=this.persistence.No.wo;return new ci(e,t.cs)},e.prototype.Bl=function(t){var e=yo(t.bl.U,t.bl.persistenceKey),n=ls(t.bl.U);return new fo(t.persistenceSettings.synchronizeTabs,e,t.clientId,li.ao(t.persistenceSettings.cacheSizeBytes),t.cs,Cr(),Or(),n,this.Sh,t.persistenceSettings.ka)},e.prototype.Ll=function(t){return new $r},e.prototype.clearPersistence=function(t,e){return function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return br.Ln()?(e=t+"main",[4,br.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(yo(t,e))},e}(hs)),ps=function(){function t(){}return t.prototype.initialize=function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.ju?[3,2]:(this.ju=t.ju,this.Sh=t.Sh,this.Ku=this.Gl(e),this.ph=this.zl(e),this.bh=this.Hl(e),this.fi=this.Yl(e),this.Sh.di=function(t){return Aa(n.fi,t,1)},this.ph.Gu.Jl=ja.bind(null,this.fi),[4,pa(this.ph,this.fi.Uh)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.Hl=function(t){return new Rr},t.prototype.Gl=function(t){var e,n=ls(t.bl.U),r=(e=t.bl,new as(e));return function(t,e,n){return new Bo(t,e,n)}(t.credentials,r,n)},t.prototype.zl=function(t){var e,n,r,i,o,a=this;return e=this.ju,n=this.Ku,r=t.cs,i=function(t){return Aa(a.fi,t,0)},o=ss.Ln()?new ss:new us,new Ho(e,n,r,i,o)},t.prototype.Yl=function(t){return function(t,e,n,r,i,o,a){var s=new xa(t,e,n,r,i,o);return a&&(s.qh=!0),s}(this.ju,this.ph,this.bh,this.Sh,t.Wl,t.Dh,!t.persistenceSettings.jl||!t.persistenceSettings.synchronizeTabs)},t.prototype.terminate=function(){return qo(this.ph)},t}(),ds=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Xl(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Xl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Zl=function(){this.muted=!0},t.prototype.Xl=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),ms=function(t){!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new h(c.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+X(1,"element")+".")}(0,t);for(var e=0;e<t.length;++e)if(L("FieldPath","string",e,t[e]),0===t[e].length)throw new h(c.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.t_=new M(t)},vs=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,e)||this}return r.__extends(e,t),e.documentId=function(){return new e(M.v().R())},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","FieldPath",1,t);return this.t_.isEqual(t.t_)},e}(ms),gs=new RegExp("[~\\*/\\[\\]]"),ys=function(t){this.e_=t},bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){if(2!==t.s_)throw 1===t.s_?t.i_(this.e_+"() can only appear at the top level of your update data"):t.i_(this.e_+"() cannot be used with set() unless you pass {merge:true}");return t.We.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ys);function _s(t,e,n){return new Is({s_:3,r_:e.settings.r_,methodName:t.e_,o_:n},e.U,e.serializer,e.ignoreUndefinedProperties)}var xs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.n_=function(t){return new hn(t.path,new en)},e.prototype.isEqual=function(t){return t instanceof e},e}(ys),ws=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=_s(this,t,!0),n=this.a_.map((function(t){return js(t,e)})),r=new nn(n);return new hn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ys),Es=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).a_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=_s(this,t,!0),n=this.a_.map((function(t){return js(t,e)})),r=new on(n);return new hn(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ys),Ss=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).c_=n,r}return r.__extends(e,t),e.prototype.n_=function(t){var e=new sn(t.serializer,xe(t.serializer,this.c_));return new hn(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ys),Ts=function(){function t(t,e){if(P("GeoPoint",arguments,2),L("GeoPoint","number",1,t),L("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new h(c.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new h(c.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.u_=t,this.h_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.u_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.u_===t.u_&&this.h_===t.h_},t.prototype.toJSON=function(){return{latitude:this.u_,longitude:this.h_}},t.prototype.Y=function(t){return Z(this.u_,t.u_)||Z(this.h_,t.h_)},t}(),As=function(t){this.l_=t},Ms=/^__.*__$/,Cs=function(t,e,n){this.__=t,this.f_=e,this.d_=n},Os=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[];return null!==this.We?n.push(new wn(t,this.data,this.We,e)):n.push(new xn(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Sn(t,this.fieldTransforms)),n},t}(),Ps=function(){function t(t,e,n){this.data=t,this.We=e,this.fieldTransforms=n}return t.prototype.w_=function(t,e){var n=[new wn(t,this.data,this.We,e)];return this.fieldTransforms.length>0&&n.push(new Sn(t,this.fieldTransforms)),n},t}();function ks(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw y()}}var Is=function(){function t(t,e,n,r,i,o){this.settings=t,this.U=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.m_(),this.fieldTransforms=i||[],this.We=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"s_",{get:function(){return this.settings.s_},enumerable:!1,configurable:!0}),t.prototype.T_=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.U,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.We)},t.prototype.E_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.I_(t),r},t.prototype.A_=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.T_({path:n,o_:!1});return r.m_(),r},t.prototype.R_=function(t){return this.T_({path:void 0,o_:!0})},t.prototype.i_=function(t){return Gs(t,this.settings.methodName,this.settings.g_||!1,this.path,this.settings.r_)},t.prototype.contains=function(t){return void 0!==this.We.find((function(e){return t.T(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.T(e.field)}))},t.prototype.m_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},t.prototype.I_=function(t){if(0===t.length)throw this.i_("Document fields must not be empty");if(ks(this.s_)&&Ms.test(t))throw this.i_('Document fields cannot begin and end with "__"')},t}(),Ls=function(){function t(t,e,n){this.U=t,this.ignoreUndefinedProperties=e,this.serializer=n||ls(t)}return t.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new Is({s_:t,methodName:e,r_:n,path:M.P(),o_:!1,g_:r},this.U,this.serializer,this.ignoreUndefinedProperties)},t}();function Rs(t,e,n,r,i,o){void 0===o&&(o={});var a=t.P_(o.merge||o.mergeFields?2:0,e,n,i);Bs("Data must be an object, but it was:",a,r);var s,u,l=Us(r,a);if(o.merge)s=new cn(a.We),u=a.fieldTransforms;else if(o.mergeFields){for(var f=[],p=0,d=o.mergeFields;p<d.length;p++){var m=d[p],v=void 0;if(m instanceof ms)v=m.t_;else{if("string"!=typeof m)throw y();v=Hs(e,m,n)}if(!a.contains(v))throw new h(c.INVALID_ARGUMENT,"Field '"+v+"' is specified in your field mask but missing from your input data.");Ws(f,v)||f.push(v)}s=new cn(f),u=a.fieldTransforms.filter((function(t){return s.Ye(t.field)}))}else s=null,u=a.fieldTransforms;return new Os(new On(l),s,u)}function Ds(t,e,n,r){var i=t.P_(1,e,n);Bs("Data must be an object, but it was:",i,r);var o=[],a=new Pn;w(r,(function(t,r){var s=Hs(e,t,n),u=i.A_(s);if(r instanceof bs||r instanceof As&&r.l_ instanceof bs)o.push(s);else{var l=js(r,u);null!=l&&(o.push(s),a.set(s,l))}}));var s=new cn(o);return new Ps(a.Xe(),s,i.fieldTransforms)}function Ns(t,e,n,r,i,o){var a=t.P_(1,e,n),s=[Vs(e,r,n)],u=[i];if(o.length%2!=0)throw new h(c.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var l=0;l<o.length;l+=2)s.push(Vs(e,o[l])),u.push(o[l+1]);for(var f=[],p=new Pn,d=s.length-1;d>=0;--d)if(!Ws(f,s[d])){var m=s[d],v=u[d],g=a.A_(m);if(v instanceof bs||v instanceof As&&v.l_ instanceof bs)f.push(m);else{var y=js(v,g);null!=y&&(f.push(m),p.set(m,y))}}var b=new cn(f);return new Ps(p.Xe(),b,a.fieldTransforms)}function Fs(t,e,n,r){return void 0===r&&(r=!1),js(n,t.P_(r?4:3,e))}function js(t,e){if(t instanceof As&&(t=t.l_),zs(t))return Bs("Unsupported field value:",e,t),Us(t,e);if(t instanceof ys)return function(t,e){if(!ks(e.s_))throw e.i_(t.e_+"() can only be used with update() and set()");if(!e.path)throw e.i_(t.e_+"() is not currently supported inside arrays");var n=t.n_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.We.push(e.path),t instanceof Array){if(e.settings.o_&&4!==e.s_)throw e.i_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=js(o[i],e.R_(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xe(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=st.fromDate(t);return{timestampValue:we(e.serializer,n)}}if(t instanceof st){var r=new st(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:we(e.serializer,r)}}if(t instanceof Ts)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tt)return{bytesValue:Ee(e.serializer,t.q)};if(t instanceof Cs){var i=e.U,o=t.__;if(!o.isEqual(i))throw e.i_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Ae(t.__||e.U,t.f_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.i_("Unsupported field value: "+B(t))}(t,e)}function Us(t,e){var n={};return E(t)?e.path&&e.path.length>0&&e.We.push(e.path):w(t,(function(t,r){var i=js(r,e.E_(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function zs(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof st||t instanceof Ts||t instanceof tt||t instanceof Cs||t instanceof ys)}function Bs(t,e,n){if(!zs(n)||!z(n)){var r=B(n);throw"an object"===r?e.i_(t+" a custom object"):e.i_(t+" "+r)}}function Vs(t,e,n){if(e instanceof ms)return e.t_;if("string"==typeof e)return Hs(t,e);throw Gs("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function Hs(t,e,n){try{return function(t){if(t.search(gs)>=0)throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(vs.bind.apply(vs,r.__spreadArrays([void 0],t.split("."))))}catch(e){throw new h(c.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).t_}catch(e){throw Gs((i=e)instanceof Error?i.message:i.toString(),t,!1,void 0,n)}var i}function Gs(t,e,n,r,i){var o=r&&!r.m(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new h(c.INVALID_ARGUMENT,(s+=". ")+t+u)}function Ws(t,e){return t.some((function(t){return t.isEqual(e)}))}var qs=function(){function t(t){this.Ku=t,this.y_=new Map,this.mutations=[],this.V_=!1,this.p_=null,this.b_=new Set}return t.prototype.v_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:if(this.S_(),this.mutations.length>0)throw new h(c.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s,u;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=Ie(n.serializer)+"/documents",o={documents:e.map((function(t){return Ce(n.serializer,t)}))},[4,n.ku("BatchGetDocuments",i,o)];case 1:return a=r.sent(),s=new Map,a.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){b(!!e.found),e.found.name,e.found.updateTime;var n=Oe(t,e.found.name),r=Te(e.found.updateTime),i=new On({mapValue:{fields:e.found.fields}});return new Ln(n,r,i,{})}(t,e):"missing"in e?function(t,e){b(!!e.missing),b(!!e.readTime);var n=Oe(t,e.missing),r=Te(e.readTime);return new Rn(n,r)}(t,e):y()}(n.serializer,t);s.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=s.get(t.toString());b(!!e),u.push(e)})),u)]}}))}))}(this.Ku,t)];case 1:return[2,((e=i.sent()).forEach((function(t){t instanceof Rn||t instanceof Ln?n.D_(t):y()})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.w_(t,this.Ge(t))),this.b_.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.w_(t,this.C_(t)))}catch(t){this.p_=t}this.b_.add(t.toString())},t.prototype.delete=function(t){this.write([new Mn(t,this.Ge(t))]),this.b_.add(t.toString())},t.prototype.commit=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){switch(n.label){case 0:if(this.S_(),this.p_)throw this.p_;return t=this.y_,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=C.D(n);e.mutations.push(new Cn(r,e.Ge(r)))})),[4,function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o;return r.__generator(this,(function(r){switch(r.label){case 0:return n=_(t),i=Ie(n.serializer)+"/documents",o={writes:e.map((function(t){return De(n.serializer,t)}))},[4,n.$u("Commit",i,o)];case 1:return r.sent(),[2]}}))}))}(this.Ku,this.mutations)];case 1:return n.sent(),this.V_=!0,[2]}}))}))},t.prototype.D_=function(t){var e;if(t instanceof Ln)e=t.version;else{if(!(t instanceof Rn))throw y();e=ut.min()}var n=this.y_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new h(c.ABORTED,"Document version changed between two reads.")}else this.y_.set(t.key.toString(),e)},t.prototype.Ge=function(t){var e=this.y_.get(t.toString());return!this.b_.has(t.toString())&&e?pn.updateTime(e):pn.ze()},t.prototype.C_=function(t){var e=this.y_.get(t.toString());if(!this.b_.has(t.toString())&&e){if(e.isEqual(ut.min()))throw new h(c.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return pn.updateTime(e)}return pn.exists(!0)},t.prototype.write=function(t){this.S_(),this.mutations=this.mutations.concat(t)},t.prototype.S_=function(){},t}(),Xs=function(){function t(t,e,n,r){this.cs=t,this.Ku=e,this.updateFunction=n,this.ls=r,this.N_=5,this.ys=new gr(this.cs,"transaction_retry")}return t.prototype.run=function(){this.F_()},t.prototype.F_=function(){var t=this;this.ys.gn((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return r.__generator(this,(function(r){return t=new qs(this.Ku),(e=this.x_(t))&&e.then((function(e){n.cs.ws((function(){return t.commit().then((function(){n.ls.resolve(e)})).catch((function(t){n.k_(t)}))}))})).catch((function(t){n.k_(t)})),[2]}))}))}))},t.prototype.x_=function(t){try{var e=this.updateFunction(t);return!lt(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},t.prototype.k_=function(t){var e=this;this.N_>0&&this.M_(t)?(this.N_-=1,this.cs.ws((function(){return e.F_(),Promise.resolve()}))):this.ls.reject(t)},t.prototype.M_=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!xt(e)}return!1},t}(),Ys=function(){function t(t,e){this.credentials=t,this.cs=e,this.clientId=Q.k(),this.O_=new vr}return t.prototype.start=function(t,e,n,i){var o=this;this.L_(),this.bl=t;var a=new vr,s=!1;return this.credentials.Hc((function(t){if(!s)return s=!0,d("FirestoreClient","Initializing. user=",t.uid),o.B_(e,n,i,t,a).then(o.O_.resolve,o.O_.reject);o.cs.Cs((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i;return r.__generator(this,(function(r){switch(r.label){case 0:return(n=_(t)).cs.xs(),d("RemoteStore","RemoteStore received new credentials"),i=Jo(n),n.Yu.add(3),[4,Wo(n)];case 1:return r.sent(),i&&n.th.set("Unknown"),[4,n.Gu.Jl(e)];case 2:return r.sent(),n.Yu.delete(3),[4,Go(n)];case 3:return r.sent(),[2]}}))}))}(o.ph,t)}))})),this.cs.ws((function(){return o.O_.promise})),a.promise},t.prototype.enableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!0),function(t){var e=_(t);return e.Yu.delete(0),Go(e)}(t.ph)}))},t.prototype.B_=function(t,e,n,i,o){return r.__awaiter(this,void 0,void 0,(function(){var a,s,u=this;return r.__generator(this,(function(l){switch(l.label){case 0:return l.trys.push([0,3,,4]),a={cs:this.cs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Wl:i,Dh:100,persistenceSettings:n},[4,t.initialize(a)];case 1:return l.sent(),[4,e.initialize(t,a)];case 2:return l.sent(),this.persistence=t.persistence,this.Sh=t.Sh,this.ju=t.ju,this.ql=t.ql,this.Ku=e.Ku,this.ph=e.ph,this.fi=e.fi,this.q_=e.bh,this.q_.Us=wa.bind(null,this.fi),this.q_.js=Sa.bind(null,this.fi),this.persistence.Za((function(){return r.__awaiter(u,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))})),o.resolve(),[3,4];case 3:if(s=l.sent(),o.reject(s),!this.U_(s))throw s;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),this.B_(new hs,new ps,{jl:!1},i,o))];case 4:return[2]}}))}))},t.prototype.U_=function(t){return"FirebaseError"===t.name?t.code===c.FAILED_PRECONDITION||t.code===c.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.L_=function(){if(this.cs.ps)throw new h(c.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.disableNetwork=function(){var t=this;return this.L_(),this.cs.enqueue((function(){return t.persistence.tc(!1),function(t){return r.__awaiter(this,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return(e=_(t)).Yu.add(0),[4,Wo(e)];case 1:return n.sent(),e.th.set("Offline"),[2]}}))}))}(t.ph)}))},t.prototype.terminate=function(){var t=this;this.cs.Ds();var e=new vr;return this.cs.bs((function(){return r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,qo(this.ph)];case 1:return r.sent(),[4,this.Sh.Di()];case 2:return r.sent(),[4,this.persistence.Di()];case 3:return r.sent(),this.credentials.Yc(),e.resolve(),[3,5];case 4:return t=r.sent(),n=Ir(t,"Failed to shutdown persistence"),e.reject(n),[3,5];case 5:return[2]}}))}))})),e.promise},t.prototype.waitForPendingWrites=function(){var t=this;this.L_();var e=new vr;return this.cs.ws((function(){return function(t,e){return r.__awaiter(this,void 0,void 0,(function(){var n,i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:Jo((n=_(t)).ph)||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,function(t){var e=_(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e.Sr.qo(t)}))}(n.ju)];case 2:return-1===(i=r.sent())?[2,void e.resolve()]:((o=n.Lh.get(i)||[]).push(e),n.Lh.set(i,o),[3,4]);case 3:return a=r.sent(),s=Ir(a,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}}))}))}(t.fi,e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.L_();var i=new ds(n),o=new zr(t,i,e);return this.cs.ws((function(){return Dr(r.q_,o)})),function(){i.Zl(),r.cs.ws((function(){return Nr(r.q_,o)}))}},t.prototype.Q_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new vr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t,e){var n=_(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Cc.Cr(t,e)}))}(t,e)];case 1:return(i=r.sent())instanceof Ln?n.resolve(i):i instanceof Rn?n.resolve(null):n.reject(new h(c.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return o=r.sent(),a=Ir(o,"Failed to get document '"+e+" from cache"),n.reject(a),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.W_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new vr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new ds({next:function(o){e.ws((function(){return Nr(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new h(c.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new h(c.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new zr(jn(n.path),o,{includeMetadataChanges:!0,Xs:!0});return Dr(t,a)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.j_=function(t){return r.__awaiter(this,void 0,void 0,(function(){var e,n=this;return r.__generator(this,(function(i){switch(i.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return i.sent(),e=new vr,[2,(this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s,u,l;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,Ao(t,e,!0)];case 1:return i=r.sent(),o=new ya(e,i.Fc),a=o.wh(i.documents),s=o.yr(a,!1),n.resolve(s.snapshot),[3,3];case 2:return u=r.sent(),l=Ir(u,"Failed to execute query '"+e+" against cache"),n.reject(l),[3,3];case 3:return[2]}}))}))}(n.ju,t,e)})),e.promise)]}}))}))},t.prototype.K_=function(t,e){return void 0===e&&(e={}),r.__awaiter(this,void 0,void 0,(function(){var n,i=this;return r.__generator(this,(function(r){switch(r.label){case 0:return this.L_(),[4,this.O_.promise];case 1:return r.sent(),n=new vr,[2,(this.cs.ws((function(){return function(t,e,n,r,i){var o=new ds({next:function(n){e.ws((function(){return Nr(t,a)})),n.fromCache&&"server"===r.source?i.reject(new h(c.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new zr(n,o,{includeMetadataChanges:!0,Xs:!0});return Dr(t,a)}(i.q_,i.cs,t,e,n)})),n.promise)]}}))}))},t.prototype.write=function(t){var e=this;this.L_();var n=new vr;return this.cs.ws((function(){return function(t,e,n){return r.__awaiter(this,void 0,void 0,(function(){var i,o,a,s;return r.__generator(this,(function(r){switch(r.label){case 0:i=Qa(t),r.label=1;case 1:return r.trys.push([1,5,,6]),[4,function(t,e){var n,r=_(t),i=st.now(),o=e.reduce((function(t,e){return t.add(e.key)}),Dt());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Cc.kr(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var l=u[s],c=yn(l,n.get(l.key));null!=c&&a.push(new wn(l.key,c,kn(c.proto.mapValue),pn.exists(!0)))}return r.Sr.ko(t,i,a,e)}))})).then((function(t){var e=t.lr(n);return{batchId:t.batchId,wr:e}}))}(i.ju,e)];case 2:return o=r.sent(),i.Sh.xi(o.batchId),function(t,e,n){var r=t.Oh[t.currentUser.ti()];r||(r=new Et(Z)),r=r.ot(e,n),t.Oh[t.currentUser.ti()]=r}(i,o.batchId,n),[4,Fa(i,o.wr)];case 3:return r.sent(),[4,aa(i.ph)];case 4:return r.sent(),[3,6];case 5:return a=r.sent(),s=Ir(a,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}}))}))}(e.fi,t,n)})),n.promise},t.prototype.U=function(){return this.bl.U},t.prototype.G_=function(t){var e=this;this.L_();var n=new ds(t);return this.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).qs.add(e),e.next()}(this.q_,n)]}))}))})),function(){n.Zl(),e.cs.ws((function(){return r.__awaiter(e,void 0,void 0,(function(){return r.__generator(this,(function(t){return[2,function(t,e){_(t).qs.delete(e)}(this.q_,n)]}))}))}))}},Object.defineProperty(t.prototype,"z_",{get:function(){return this.cs.ps},enumerable:!1,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.L_();var n=new vr;return this.cs.ws((function(){return new Xs(e.cs,e.Ku,t,n).run(),Promise.resolve()})),n.promise},t}();function Qs(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Zs=function(){function t(t,e,n,r,i){this.U=t,this.timestampsInSnapshots=e,this.H_=n,this.Y_=r,this.J_=i}return t.prototype.X_=function(t){switch(te(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ue(t.integerValue||t.doubleValue);case 3:return this.Z_(t.timestampValue);case 4:return this.tf(t);case 5:return t.stringValue;case 6:return this.J_(le(t.bytesValue));case 7:return this.ef(t.referenceValue);case 8:return this.nf(t.geoPointValue);case 9:return this.sf(t.arrayValue);case 10:return this.if(t.mapValue);default:throw y()}},t.prototype.if=function(t){var e=this,n={};return w(t.fields||{},(function(t,r){n[t]=e.X_(r)})),n},t.prototype.nf=function(t){return new Ts(ue(t.latitude),ue(t.longitude))},t.prototype.sf=function(t){var e=this;return(t.values||[]).map((function(t){return e.X_(t)}))},t.prototype.tf=function(t){switch(this.H_){case"previous":var e=Kt(t);return null==e?null:this.X_(e);case"estimate":return this.Z_($t(t));default:return null}},t.prototype.Z_=function(t){var e=se(t),n=new st(e.seconds,e.nanos);return this.timestampsInSnapshots?n:n.toDate()},t.prototype.ef=function(t){var e=T.g(t);b(Ze(e));var n=new ot(e.get(1),e.get(3)),r=new C(e.u(5));return n.isEqual(this.U)||m("Document "+r+" contains a document reference within a different database ("+n.projectId+"/"+n.database+") which is not supported. It will be treated as a reference in the current database ("+this.U.projectId+"/"+this.U.database+") instead."),this.Y_(r)},t}(),Ks=li.ho,$s=function(){function t(t){var e,n,r,i,o;if(void 0===t.host){if(void 0!==t.ssl)throw new h(c.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else D("settings","non-empty string","host",t.host),this.host=t.host,N("settings","boolean","ssl",t.ssl),this.ssl=null===(e=t.ssl)||void 0===e||e;if(H("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling","experimentalAutoDetectLongPolling","ignoreUndefinedProperties"]),N("settings","object","credentials",t.credentials),this.credentials=t.credentials,N("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),N("settings","boolean","ignoreUndefinedProperties",t.ignoreUndefinedProperties),!0===t.timestampsInSnapshots?m("The setting 'timestampsInSnapshots: true' is no longer required and should be removed."):!1===t.timestampsInSnapshots&&m("Support for 'timestampsInSnapshots: false' will be removed soon. You must update your code to handle Timestamp objects."),this.timestampsInSnapshots=null===(n=t.timestampsInSnapshots)||void 0===n||n,this.ignoreUndefinedProperties=null!==(r=t.ignoreUndefinedProperties)&&void 0!==r&&r,N("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=li._o;else{if(t.cacheSizeBytes!==Ks&&t.cacheSizeBytes<li.lo)throw new h(c.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+li.lo);this.cacheSizeBytes=t.cacheSizeBytes}N("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.experimentalForceLongPolling=null!==(i=t.experimentalForceLongPolling)&&void 0!==i&&i,N("settings","boolean","experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalAutoDetectLongPolling=null!==(o=t.experimentalAutoDetectLongPolling)&&void 0!==o&&o,function(t,e,n,r){if(!0===e&&!0===r)throw new h(c.INVALID_ARGUMENT,"experimentalForceLongPolling and experimentalAutoDetectLongPolling cannot be used together.")}(0,t.experimentalForceLongPolling,0,t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Js=function(){function t(e,n,i,o){var a=this;if(void 0===i&&(i=new hs),void 0===o&&(o=new ps),this.rf=i,this.af=o,this.cf=null,this.uf=new kr,this.INTERNAL={delete:function(){return r.__awaiter(a,void 0,void 0,(function(){return r.__generator(this,(function(t){switch(t.label){case 0:return this.hf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var s=e;this.cf=s,this.__=t._f(s),this.ff=s.name,this.df=new Do(n)}else{var u=e;if(!u.projectId)throw new h(c.INVALID_ARGUMENT,"Must provide projectId");this.__=new ot(u.projectId,u.database),this.ff="[DEFAULT]",this.df=new Ro}this.wf=new $s({})}return Object.defineProperty(t.prototype,"mf",{get:function(){return this.Tf||(this.Tf=new Ls(this.__,this.wf.ignoreUndefinedProperties)),this.Tf},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){P("Firestore.settings",arguments,1),L("Firestore.settings","object",1,t),t.merge&&delete(t=Object.assign(Object.assign({},this.wf),t)).merge;var e=new $s(t);if(this.lf&&!this.wf.isEqual(e))throw new h(c.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this.wf=e,void 0!==e.credentials&&(this.df=function(t){if(!t)return new Ro;switch(t.type){case"gapi":var e=t.client;return b(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Fo(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new h(c.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},t.prototype.enableNetwork=function(){return this.hf(),this.lf.enableNetwork()},t.prototype.disableNetwork=function(){return this.hf(),this.lf.disableNetwork()},t.prototype.enablePersistence=function(t){var e,n;if(this.lf)throw new h(c.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var r=!1,i=!1;if(t&&(void 0!==t.experimentalTabSynchronization&&m("The 'experimentalTabSynchronization' setting will be removed. Use 'synchronizeTabs' instead."),r=null!==(n=null!==(e=t.synchronizeTabs)&&void 0!==e?e:t.experimentalTabSynchronization)&&void 0!==n&&n,i=!!t.experimentalForceOwningTab&&t.experimentalForceOwningTab,r&&i))throw new h(c.INVALID_ARGUMENT,"The 'experimentalForceOwningTab' setting cannot be used with 'synchronizeTabs'.");return this.Ef(this.rf,this.af,{jl:!0,cacheSizeBytes:this.wf.cacheSizeBytes,synchronizeTabs:r,ka:i})},t.prototype.clearPersistence=function(){return r.__awaiter(this,void 0,void 0,(function(){var t,e=this;return r.__generator(this,(function(n){if(void 0!==this.lf&&!this.lf.z_)throw new h(c.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return t=new vr,[2,(this.uf.bs((function(){return r.__awaiter(e,void 0,void 0,(function(){var e;return r.__generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.rf.clearPersistence(this.__,this.ff)];case 1:return n.sent(),t.resolve(),[3,3];case 2:return e=n.sent(),t.reject(e),[3,3];case 3:return[2]}}))}))})),t.promise)]}))}))},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"If",{get:function(){return this.hf(),this.lf.z_},enumerable:!1,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.hf(),this.lf.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.hf(),Qs(t))return this.lf.G_(t);L("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.lf.G_(e)},t.prototype.hf=function(){return this.lf||this.Ef(new hs,new ps,{jl:!1}),this.lf},t.prototype.Af=function(){return new it(this.__,this.ff,this.wf.host,this.wf.ssl,this.wf.experimentalForceLongPolling,this.wf.experimentalAutoDetectLongPolling)},t.prototype.Ef=function(t,e,n){var r=this.Af();return this.lf=new Ys(this.df,this.uf),this.lf.start(r,t,e,n)},t._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new h(c.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,n=t.options.projectId;if(!n||"string"!=typeof n)throw new h(c.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ot(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.cf)throw new h(c.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){return P("Firestore.collection",arguments,1),L("Firestore.collection","non-empty string",1,t),this.hf(),new du(T.g(t),this,null)},t.prototype.doc=function(t){return P("Firestore.doc",arguments,1),L("Firestore.doc","non-empty string",1,t),this.hf(),nu.Rf(T.g(t),this,null)},t.prototype.collectionGroup=function(t){if(P("Firestore.collectionGroup",arguments,1),L("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new h(c.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.hf(),new fu(function(t){return new Nn(T.P(),t)}(t),this,null)},t.prototype.runTransaction=function(t){var e=this;return P("Firestore.runTransaction",arguments,1),L("Firestore.runTransaction","function",1,t),this.hf().transaction((function(n){return t(new tu(e,n))}))},t.prototype.batch=function(){return this.hf(),new eu(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case o.LogLevel.DEBUG:return"debug";case o.LogLevel.ERROR:return"error";case o.LogLevel.SILENT:return"silent";case o.LogLevel.WARN:return"warn";case o.LogLevel.INFO:return"info";case o.LogLevel.VERBOSE:return"verbose";default:return"error"}},enumerable:!1,configurable:!0}),t.setLogLevel=function(t){var e;P("Firestore.setLogLevel",arguments,1),j("setLogLevel",["debug","error","silent","warn","info","verbose"],1,t),e=t,f.setLogLevel(e)},t.prototype.gf=function(){return this.wf.timestampsInSnapshots},t.prototype.Pf=function(){return this.wf},t}(),tu=function(){function t(t,e){this.yf=t,this.Vf=e}return t.prototype.get=function(t){var e=this;P("Transaction.get",arguments,1);var n=yu("Transaction.get",t,this.yf);return this.Vf.v_([n.f_]).then((function(t){if(!t||1!==t.length)return y();var r=t[0];if(r instanceof Rn)return new iu(e.yf,n.f_,null,!1,!1,n.d_);if(r instanceof Ln)return new iu(e.yf,n.f_,r,!1,!1,n.d_);throw y()}))},t.prototype.set=function(t,e,n){I("Transaction.set",arguments,2,3);var r=yu("Transaction.set",t,this.yf);n=mu("Transaction.set",n);var i=_u(r.d_,e,n),o=Rs(this.yf.mf,"Transaction.set",r.f_,i,null!==r.d_,n);return this.Vf.set(r.f_,o),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof vs?(k("Transaction.update",arguments,3),r=yu("Transaction.update",t,this.yf),i=Ns(this.yf.mf,"Transaction.update",r.f_,e,n,o)):(P("Transaction.update",arguments,2),r=yu("Transaction.update",t,this.yf),i=Ds(this.yf.mf,"Transaction.update",r.f_,e)),this.Vf.update(r.f_,i),this},t.prototype.delete=function(t){P("Transaction.delete",arguments,1);var e=yu("Transaction.delete",t,this.yf);return this.Vf.delete(e.f_),this},t}(),eu=function(){function t(t){this.yf=t,this.pf=[],this.bf=!1}return t.prototype.set=function(t,e,n){I("WriteBatch.set",arguments,2,3),this.vf();var r=yu("WriteBatch.set",t,this.yf);n=mu("WriteBatch.set",n);var i=_u(r.d_,e,n),o=Rs(this.yf.mf,"WriteBatch.set",r.f_,i,null!==r.d_,n);return this.pf=this.pf.concat(o.w_(r.f_,pn.ze())),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.vf(),"string"==typeof e||e instanceof vs?(k("WriteBatch.update",arguments,3),r=yu("WriteBatch.update",t,this.yf),i=Ns(this.yf.mf,"WriteBatch.update",r.f_,e,n,o)):(P("WriteBatch.update",arguments,2),r=yu("WriteBatch.update",t,this.yf),i=Ds(this.yf.mf,"WriteBatch.update",r.f_,e)),this.pf=this.pf.concat(i.w_(r.f_,pn.exists(!0))),this},t.prototype.delete=function(t){P("WriteBatch.delete",arguments,1),this.vf();var e=yu("WriteBatch.delete",t,this.yf);return this.pf=this.pf.concat(new Mn(e.f_,pn.ze())),this},t.prototype.commit=function(){return this.vf(),this.bf=!0,this.pf.length>0?this.yf.hf().write(this.pf):Promise.resolve()},t.prototype.vf=function(){if(this.bf)throw new h(c.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),nu=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n.__,e,r)||this).f_=e,i.firestore=n,i.d_=r,i.lf=i.firestore.hf(),i}return r.__extends(e,t),e.Rf=function(t,n,r){if(t.length%2!=0)throw new h(c.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.R()+" has "+t.length);return new e(new C(t),n,r)},Object.defineProperty(e.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new du(this.f_.path.h(),this.firestore,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.f_.path.R()},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){if(P("DocumentReference.collection",arguments,1),L("DocumentReference.collection","non-empty string",1,t),!t)throw new h(c.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=T.g(t);return new du(this.f_.path.child(e),this.firestore,null)},e.prototype.isEqual=function(t){if(!(t instanceof e))throw G("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.f_.isEqual(t.f_)&&this.d_===t.d_},e.prototype.set=function(t,e){I("DocumentReference.set",arguments,1,2),e=mu("DocumentReference.set",e);var n=_u(this.d_,t,e),r=Rs(this.firestore.mf,"DocumentReference.set",this.f_,n,null!==this.d_,e);return this.lf.write(r.w_(this.f_,pn.ze()))},e.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof vs?(k("DocumentReference.update",arguments,2),n=Ns(this.firestore.mf,"DocumentReference.update",this.f_,t,e,r)):(P("DocumentReference.update",arguments,1),n=Ds(this.firestore.mf,"DocumentReference.update",this.f_,t)),this.lf.write(n.w_(this.f_,pn.exists(!0)))},e.prototype.delete=function(){return P("DocumentReference.delete",arguments,0),this.lf.write([new Mn(this.f_,pn.ze())])},e.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];I("DocumentReference.onSnapshot",arguments,1,4);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Qs(i[s])||(H("DocumentReference.onSnapshot",a=i[s],["includeMetadataChanges"]),N("DocumentReference.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++);var u={includeMetadataChanges:a.includeMetadataChanges};if(Qs(i[s])){var l=i[s];i[s]=null===(t=l.next)||void 0===t?void 0:t.bind(l),i[s+1]=null===(e=l.error)||void 0===e?void 0:e.bind(l),i[s+2]=null===(n=l.complete)||void 0===n?void 0:n.bind(l)}else L("DocumentReference.onSnapshot","function",s,i[s]),R("DocumentReference.onSnapshot","function",s+1,i[s+1]),R("DocumentReference.onSnapshot","function",s+2,i[s+2]);var c={next:function(t){i[s]&&i[s](r.Sf(t))},error:i[s+1],complete:i[s+2]};return this.lf.listen(jn(this.f_.path),u,c)},e.prototype.get=function(t){var e=this;I("DocumentReference.get",arguments,0,1),gu("DocumentReference.get",t);var n=this.firestore.hf();return t&&"cache"===t.source?n.Q_(this.f_).then((function(t){return new iu(e.firestore,e.f_,t,!0,t instanceof Ln&&t.Je,e.d_)})):n.W_(this.f_,t).then((function(t){return e.Sf(t)}))},e.prototype.withConverter=function(t){return new e(this.f_,this.firestore,t)},e.prototype.Sf=function(t){var e=t.docs.get(this.f_);return new iu(this.firestore,this.f_,e,t.fromCache,t.hasPendingWrites,this.d_)},e}(Cs),ru=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),iu=function(){function t(t,e,n,r,i,o){this.yf=t,this.f_=e,this.Df=n,this.Cf=r,this.Nf=i,this.d_=o}return t.prototype.data=function(t){var e=this;if(I("DocumentSnapshot.data",arguments,0,1),t=vu("DocumentSnapshot.data",t),this.Df){if(this.d_){var n=new ou(this.yf,this.f_,this.Df,this.Cf,this.Nf,null);return this.d_.fromFirestore(n,t)}return new Zs(this.yf.__,this.yf.gf(),t.serverTimestamps||"none",(function(t){return new nu(t,e.yf,null)}),(function(t){return new rt(t)})).X_(this.Df.rn())}},t.prototype.get=function(t,e){var n=this;if(I("DocumentSnapshot.get",arguments,1,2),e=vu("DocumentSnapshot.get",e),this.Df){var r=this.Df.data().field(Vs("DocumentSnapshot.get",t,this.f_));if(null!==r)return new Zs(this.yf.__,this.yf.gf(),e.serverTimestamps||"none",(function(t){return new nu(t,n.yf,n.d_)}),(function(t){return new rt(t)})).X_(r)}},Object.defineProperty(t.prototype,"id",{get:function(){return this.f_.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new nu(this.f_,this.yf,this.d_)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this.Df},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new ru(this.Nf,this.Cf)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentSnapshot",1,e);return this.yf===e.yf&&this.Cf===e.Cf&&this.f_.isEqual(e.f_)&&(null===this.Df?null===e.Df:this.Df.isEqual(e.Df))&&this.d_===e.d_},t}(),ou=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.prototype.data=function(e){return t.prototype.data.call(this,e)},e}(iu);function au(t,e,n,r,i,o,a){var s;if(i.p()){if("array-contains"===o||"array-contains-any"===o)throw new h(c.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){lu(a,o);for(var u=[],l=0,f=a;l<f.length;l++){var p=f[l];u.push(uu(r,t,p))}s={arrayValue:{values:u}}}else s=uu(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||lu(a,o),s=Fs(n,e,a,"in"===o||"not-in"===o);var d=tr.create(i,o,s);return function(t,e){if(e.hn()){var n=Vn(t);if(null!==n&&!n.isEqual(e.field))throw new h(c.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Bn(t);null!==r&&cu(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new h(c.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new h(c.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,d),d}function su(t,e,n){if(null!==t.startAt)throw new h(c.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new h(c.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pr(e,n);return function(t,e){if(null===Bn(t)){var n=Vn(t);null!==n&&cu(0,n,e.field)}}(t,r),r}function uu(t,e,n){if("string"==typeof n){if(""===n)throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hn(e)&&-1!==n.indexOf("/"))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(T.g(n));if(!C.F(r))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return ce(t,new C(r))}if(n instanceof Cs)return ce(t,n.f_);throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+B(n)+".")}function lu(t,e){if(!Array.isArray(t)||0===t.length)throw new h(c.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if("in"===e||"array-contains-any"===e){if(t.indexOf(null)>=0)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new h(c.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")}}function cu(t,e,n){if(!n.isEqual(e))throw new h(c.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function hu(t){if(zn(t)&&0===t.on.length)throw new h(c.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var fu=function(){function t(t,e,n){this.Ff=t,this.firestore=e,this.d_=n}return t.prototype.where=function(e,n,r){P("Query.where",arguments,3),V("Query.where",3,r);var i=j("Query.where",["<","<=","==","!=",">=",">","array-contains","in","array-contains-any","not-in"],2,n),o=Vs("Query.where",e),a=au(this.Ff,"Query.where",this.firestore.mf,this.firestore.__,o,i,r);return new t(function(t,e){var n=t.filters.concat([e]);return new Nn(t.path,t.collectionGroup,t.on.slice(),n,t.limit,t.an,t.startAt,t.endAt)}(this.Ff,a),this.firestore,this.d_)},t.prototype.orderBy=function(e,n){var r;if(I("Query.orderBy",arguments,1,2),R("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r="asc";else{if("desc"!==n)throw new h(c.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r="desc"}var i=Vs("Query.orderBy",e),o=su(this.Ff,i,r);return new t(function(t,e){var n=t.on.concat([e]);return new Nn(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.an,t.startAt,t.endAt)}(this.Ff,o),this.firestore,this.d_)},t.prototype.limit=function(e){return P("Query.limit",arguments,1),L("Query.limit","number",1,e),W("Query.limit",1,e),new t(qn(this.Ff,e,"F"),this.firestore,this.d_)},t.prototype.limitToLast=function(e){return P("Query.limitToLast",arguments,1),L("Query.limitToLast","number",1,e),W("Query.limitToLast",1,e),new t(qn(this.Ff,e,"L"),this.firestore,this.d_)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];k("Query.startAt",arguments,1);var i=this.xf("Query.startAt",e,n,!0);return new t(Xn(this.Ff,i),this.firestore,this.d_)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];k("Query.startAfter",arguments,1);var i=this.xf("Query.startAfter",e,n,!1);return new t(Xn(this.Ff,i),this.firestore,this.d_)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];k("Query.endBefore",arguments,1);var i=this.xf("Query.endBefore",e,n,!0);return new t(Yn(this.Ff,i),this.firestore,this.d_)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];k("Query.endAt",arguments,1);var i=this.xf("Query.endAt",e,n,!1);return new t(Yn(this.Ff,i),this.firestore,this.d_)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","Query",1,e);return this.firestore===e.firestore&&Qn(this.Ff,e.Ff)&&this.d_===e.d_},t.prototype.withConverter=function(e){return new t(this.Ff,this.firestore,e)},t.prototype.xf=function(t,e,n,i){if(V(t,1,e),e instanceof iu)return P(t,r.__spreadArrays([e],n),1),function(t,e,n,r,i){if(!r)throw new h(c.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Gn(t);a<s.length;a++){var u=s[a];if(u.field.p())o.push(ce(e,r.key));else{var l=r.field(u.field);if(Zt(l))throw new h(c.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var f=u.field.R();throw new h(c.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+f+"' (used as the orderBy) does not exist.")}o.push(l)}}return new lr(o,i)}(this.Ff,this.firestore.__,t,e.Df,i);var o=[e].concat(n);return function(t,e,n,r,i,o){var a=t.on;if(i.length>a.length)throw new h(c.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var l=i[u];if(a[u].field.p()){if("string"!=typeof l)throw new h(c.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof l);if(!Hn(t)&&-1!==l.indexOf("/"))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+l+"' contains a slash.");var f=t.path.child(T.g(l));if(!C.F(f))throw new h(c.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+f+"' is not because it contains an odd number of segments.");var p=new C(f);s.push(ce(e,p))}else{var d=Fs(n,r,l);s.push(d)}}return new lr(s,o)}(this.Ff,this.firestore.__,this.firestore.mf,t,o,i)},t.prototype.onSnapshot=function(){for(var t,e,n,r=this,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];I("Query.onSnapshot",arguments,1,4);var a={},s=0;if("object"!=typeof i[s]||Qs(i[s])||(H("Query.onSnapshot",a=i[s],["includeMetadataChanges"]),N("Query.onSnapshot","boolean","includeMetadataChanges",a.includeMetadataChanges),s++),Qs(i[s])){var u=i[s];i[s]=null===(t=u.next)||void 0===t?void 0:t.bind(u),i[s+1]=null===(e=u.error)||void 0===e?void 0:e.bind(u),i[s+2]=null===(n=u.complete)||void 0===n?void 0:n.bind(u)}else L("Query.onSnapshot","function",s,i[s]),R("Query.onSnapshot","function",s+1,i[s+1]),R("Query.onSnapshot","function",s+2,i[s+2]);var l={next:function(t){i[s]&&i[s](new pu(r.firestore,r.Ff,t,r.d_))},error:i[s+1],complete:i[s+2]};return hu(this.Ff),this.firestore.hf().listen(this.Ff,a,l)},t.prototype.get=function(t){var e=this;I("Query.get",arguments,0,1),gu("Query.get",t),hu(this.Ff);var n=this.firestore.hf();return(t&&"cache"===t.source?n.j_(this.Ff):n.K_(this.Ff,t)).then((function(t){return new pu(e.firestore,e.Ff,t,e.d_)}))},t}(),pu=function(){function t(t,e,n,r){this.yf=t,this.$f=e,this.kf=n,this.d_=r,this.Mf=null,this.Of=null,this.metadata=new ru(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this.kf.docs.m()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.kf.docs.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;I("QuerySnapshot.forEach",arguments,1,2),L("QuerySnapshot.forEach","function",1,t),this.kf.docs.forEach((function(r){t.call(e,n.Lf(r,n.metadata.fromCache,n.kf.Wt.has(r.key)))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new fu(this.$f,this.yf,this.d_)},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){t&&(H("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),N("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.kf.Kt)throw new h(c.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Mf&&this.Of===e||(this.Mf=function(t,e,n){if(t.Qt.m()){var r=0;return t.docChanges.map((function(e){var i=n(e.doc,t.fromCache,t.Wt.has(e.doc.key));return e.doc,{type:"added",doc:i,oldIndex:-1,newIndex:r++}}))}var i=t.Qt;return t.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var r=n(e.doc,t.fromCache,t.Wt.has(e.doc.key)),o=-1,a=-1;return 0!==e.type&&(o=i.indexOf(e.doc.key),i=i.delete(e.doc.key)),1!==e.type&&(a=(i=i.add(e.doc)).indexOf(e.doc.key)),{type:bu(e.type),doc:r,oldIndex:o,newIndex:a}}))}(this.kf,e,this.Lf.bind(this)),this.Of=e),this.Mf},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","QuerySnapshot",1,e);return this.yf===e.yf&&Qn(this.$f,e.$f)&&this.kf.isEqual(e.kf)&&this.d_===e.d_},t.prototype.Lf=function(t,e,n){return new ou(this.yf,t.key,t,e,n,this.d_)},t}(),du=function(t){function e(e,n,r){var i=this;if((i=t.call(this,jn(e),n,r)||this).Bf=e,e.length%2!=1)throw new h(c.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.R()+" has "+e.length);return i}return r.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.Ff.path._()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.Ff.path.h();return t.m()?null:new nu(new C(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.Ff.path.R()},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){I("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=Q.k()),L("CollectionReference.doc","non-empty string",1,t);var e=T.g(t);return nu.Rf(this.Ff.path.child(e),this.firestore,this.d_)},e.prototype.add=function(t){P("CollectionReference.add",arguments,1);var e=this.d_?this.d_.toFirestore(t):t;L("CollectionReference.add","object",1,e);var n=this.doc();return new nu(n.f_,this.firestore,null).set(e).then((function(){return n}))},e.prototype.withConverter=function(t){return new e(this.Bf,this.firestore,t)},e}(fu);function mu(t,e){if(void 0===e)return{merge:!1};if(H(t,e,["merge","mergeFields"]),N(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+B(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new h(c.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be a string or a FieldPath, but the value at index "+o+" was: "+B(r[o]))}(t,"mergeFields",0,r,(function(t){return"string"==typeof t||t instanceof vs}))}(t,0,0,e.mergeFields),void 0!==e.mergeFields&&void 0!==e.merge)throw new h(c.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function vu(t,e){return void 0===e?{}:(H(t,e,["serverTimestamps"]),F(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function gu(t,e){R(t,"object",1,e),e&&(H(t,e,["source"]),F(t,0,"source",e.source,["default","server","cache"]))}function yu(t,e,n){if(e instanceof Cs){if(e.firestore!==n)throw new h(c.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw G(t,"DocumentReference",1,e)}function bu(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return y()}}function _u(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var xu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r.__extends(e,t),e.serverTimestamp=function(){O("FieldValue.serverTimestamp",arguments);var t=new xs("serverTimestamp");return t.e_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){O("FieldValue.delete",arguments);var t=new bs("deleteField");return t.e_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];k("FieldValue.arrayUnion",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k("arrayUnion()",arguments,1),new ws("arrayUnion",t)}.apply(void 0,t);return r.e_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];k("FieldValue.arrayRemove",arguments,1);var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k("arrayRemove()",arguments,1),new Es("arrayRemove",t)}.apply(void 0,t);return r.e_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){L("FieldValue.increment","number",1,t),P("FieldValue.increment",arguments,1);var n=function(t){return new Ss("increment",t)}(t);return n.e_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.l_.isEqual(t.l_)},e}(As),wu={Firestore:Js,GeoPoint:Ts,Timestamp:st,Blob:rt,Transaction:tu,WriteBatch:eu,DocumentReference:nu,DocumentSnapshot:iu,Query:fu,QueryDocumentSnapshot:ou,QuerySnapshot:pu,CollectionReference:du,FieldPath:vs,FieldValue:xu,setLogLevel:Js.setLogLevel,CACHE_SIZE_UNLIMITED:Ks};!function(t){!function(t,e){t.INTERNAL.registerComponent(new u.Component("firestore",(function(t){return function(t,e){var n=new ps,r=new fs(n);return new Js(t,e,r,n)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},wu)))}(t),t.registerVersion("@firebase/firestore","1.18.0")}(l.default)},1549:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}var i;n.r(e),n.d(e,{LogLevel:()=>o,Logger:()=>h,setLogLevel:()=>f,setUserLogHandler:()=>p});var o,a=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var s={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,l=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),c=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),a=l[e];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[a].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=c,this._userLogHandler=null,a.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?s[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){a.forEach((function(e){e.setLogLevel(t)}))}function p(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=s[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=a;r<i.length;r++)n(i[r])}},9766:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(9312),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|l>>6,p=63&l;u||(p=64,a||(f=64)),r.push(n[c],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var l=o<<2|a>>4;if(r.push(l),64!==s){var c=a<<4&240|s>>2;if(r.push(c),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},l=function(t){try{return u.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=c(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function p(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(t){return!1}}var d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name="FirebaseError",Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,m.prototype.create),i}return r.__extends(e,t),e}(Error),m=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?v(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new d(i,s),l=0,c=Object.keys(r);l<c.length;l++){var h=c[l];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},t}();function v(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;function y(t){return JSON.parse(t)}var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=y(l(o[0])||""),n=y(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],l=this.chain_[2],c=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=c^u&(l^c),a=1518500249):(o=u^l^c,a=1859775393):r<60?(o=u&l|c&(u|l),a=2400959708):(o=u^l^c,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=c,c=l,l=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),x=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=w),void 0===r.error&&(r.error=w),void 0===r.complete&&(r.complete=w);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function w(){}function E(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+(r+" argument ")}var S=144e5;e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=m,e.FirebaseError=d,e.MAX_VALUE_MILLIS=S,e.RANDOM_FACTOR=.5,e.Sha1=_,e.areCookiesEnabled=function(){return!(!navigator||!navigator.cookieEnabled)},e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=u,e.base64Decode=l,e.base64Encode=function(t){var e=s(t);return u.encodeByteArray(e,!0)},e.calculateBackoffMillis=function(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(S,r+i)},e.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new x(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=function(t){return c(void 0,t)},e.deepExtend=c,e.errorPrefix=E,e.getUA=f,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},e.isElectron=function(){return f().indexOf("Electron/")>=0},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isIE=function(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0},e.isIndexedDBAvailable=function(){return"indexedDB"in self&&null!=indexedDB},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())},e.isNode=p,e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isSafari=function(){return!p()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},e.isUWP=function(){return f().indexOf("MSAppHost/")>=0},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=y,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,o(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(E(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(E(t,e,r)+"must be a valid context object.")},e.validateIndexedDBOpenable=function(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))},e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(E(t,e,r)+"must be a valid firebase namespace.")}},1216:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>ar,ErrorCode:()=>nr,EventType:()=>rr,WebChannel:()=>ir,XhrIo:()=>or,createWebChannelTransport:()=>er});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var o,a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{},s=s||{},u=a||self;function l(){}function c(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function h(t){var e=c(t);return"array"==e||"object"==e&&"number"==typeof t.length}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v).apply(null,arguments)}function y(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now;function _(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function x(){this.j=this.j,this.i=this.i}x.prototype.j=!1,x.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++d)}(this)},x.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var w=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},E=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function S(t){return Array.prototype.concat.apply([],arguments)}function T(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function A(t){return/^[\s\xa0]*$/.test(t)}var M,C=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function P(t,e){return t<e?-1:t>e?1:0}t:{var k=u.navigator;if(k){var I=k.userAgent;if(I){M=I;break t}}M=""}function L(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function R(t){var e={};for(var n in t)e[n]=t[n];return e}var D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<D.length;o++)n=D[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=l;var j,U,z=O(M,"Opera"),B=O(M,"Trident")||O(M,"MSIE"),V=O(M,"Edge"),H=V||B,G=O(M,"Gecko")&&!(O(M.toLowerCase(),"webkit")&&!O(M,"Edge"))&&!(O(M,"Trident")||O(M,"MSIE"))&&!O(M,"Edge"),W=O(M.toLowerCase(),"webkit")&&!O(M,"Edge");function q(){var t=u.document;return t?t.documentMode:void 0}t:{var X="",Y=(U=M,G?/rv:([^\);]+)(\)|;)/.exec(U):V?/Edge\/([\d\.]+)/.exec(U):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):W?/WebKit\/(\S+)/.exec(U):z?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(Y&&(X=Y?Y[1]:""),B){var Q=q();if(null!=Q&&Q>parseFloat(X)){j=String(Q);break t}}j=X}var Z,K={};function $(t){return function(t,e){var n=K;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=C(String(j)).split("."),r=C(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=P(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||P(0==a[2].length,0==s[2].length)||P(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}u.document&&B?Z=q()||parseInt(j,10)||void 0:Z=void 0;var J=Z,tt=!B||9<=Number(J),et=B&&!$("9"),nt=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{u.addEventListener("test",l,e),u.removeEventListener("test",l,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(G){t:{try{F(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ot[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}rt.prototype.b=function(){this.defaultPrevented=!0},_(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var at="closure_listenable_"+(1e6*Math.random()|0),st=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++st,this.Y=this.Z=!1}function lt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ct(t){this.src=t,this.a={},this.b=0}function ht(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=w(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(lt(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ft(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ct.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=ft(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new ut(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function mt(t,e,n,r,i){if(r&&r.once)return gt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)mt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[at]?t.va(e,n,f(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!tt)return null;var s=Et(t);if(s||(t[pt]=s=new ct(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=wt,e=tt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)nt||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[at]?t.wa(e,n,f(r)?!!r.capture:!!r,i):vt(t,e,n,!0,r,i)}function yt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=Tt(n),t&&t[at]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ft(o=t.a[e],n,r,i))&&(lt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Et(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ft(e,n,r,i)),(n=-1<t?e[t]:null)&&bt(n))}function bt(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[at])ht(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Et(e))?(ht(n,t),0==n.b&&(n.src=null,e[pt]=null)):lt(t)}}}function _t(t){return t in dt?dt[t]:dt[t]="on"+t}function xt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&bt(t),n.call(r,e)}function wt(t,e){if(t.Y)return!0;if(!tt){if(!e)t:{e=["window","event"];for(var n=u,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return xt(t,e=new it(e,this))}return xt(t,new it(e,this))}function Et(t){return(t=t[pt])instanceof ct?t:null}var St="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(t){return"function"==c(t)?t:(t[St]||(t[St]=function(e){return t.handleEvent(e)}),t[St])}function At(){x.call(this),this.c=new ct(this),this.J=this,this.C=null}function Mt(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.Y&&a.capture==n){var s=a.listener,u=a.ca||a.src;a.Z&&ht(t.c,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}_(At,x),At.prototype[at]=!0,(o=At.prototype).addEventListener=function(t,e,n,r){mt(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){yt(this,t,e,n,r)},o.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t)t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;N(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Mt(a,r,!0,t)&&i}if(i=Mt(a=t.a=n,r,!0,t)&&i,i=Mt(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Mt(a=t.a=e[o],r,!1,t)&&i;return i},o.G=function(){if(At.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)lt(n[r]);delete e.a[t],e.b--}}this.C=null},o.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},o.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ct=u.JSON.stringify;function Ot(){this.b=this.a=null}var Pt,kt=new(function(){function t(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},t}())((function(){return new Lt}),(function(t){t.reset()}),100);function It(){var t=Ft,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Lt(){this.next=this.b=this.a=null}function Rt(t){u.setTimeout((function(){throw t}),0)}function Dt(t,e){Pt||function(){var t=u.Promise.resolve(void 0);Pt=function(){t.then(jt)}}(),Nt||(Pt(),Nt=!0),Ft.add(t,e)}Ot.prototype.add=function(t,e){var n=kt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Lt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Lt.prototype.reset=function(){this.next=this.b=this.a=null};var Nt=!1,Ft=new Ot;function jt(){for(var t;t=It();){try{t.a.call(t.b)}catch(t){Rt(t)}var e=kt;e.g(t),e.b<e.f&&(e.b++,t.next=e.a,e.a=t)}Nt=!1}function Ut(t,e){At.call(this),this.b=t||1,this.a=e||u,this.f=g(this.Ya,this),this.g=b()}function zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Bt(t,e,n){if("function"==c(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:u.setTimeout(t,e||0)}function Vt(t){t.a=Bt((function(){t.a=null,t.c&&(t.c=!1,Vt(t))}),t.h);var e=t.b;t.b=null,t.g.apply(null,e)}_(Ut,At),(o=Ut.prototype).aa=!1,o.M=null,o.Ya=function(){if(this.aa){var t=b()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(zt(this),this.start()))}},o.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=b())},o.G=function(){Ut.S.G.call(this),zt(this),delete this.a};var Ht=function(t){function e(e,n,r){var i=t.call(this)||this;return i.g=null!=r?e.bind(r):e,i.h=n,i.b=null,i.c=!1,i.a=null,i}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Vt(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(u.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(x);function Gt(t){x.call(this),this.b=t,this.a={}}_(Gt,x);var Wt=[];function qt(t,e,n,r){Array.isArray(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=mt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Xt(t){L(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function Yt(){this.a=!0}function Qt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ct(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Gt.prototype.G=function(){Gt.S.G.call(this),Xt(this)},Gt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Yt.prototype.info=function(){};var Zt=null;function Kt(){return Zt=Zt||new At}function $t(t){rt.call(this,"serverreachability",t)}function Jt(t){var e=Kt();e.dispatchEvent(new $t(e,t))}function te(t){rt.call(this,"statevent",t)}function ee(t){var e=Kt();e.dispatchEvent(new te(e,t))}function ne(t){rt.call(this,"timingevent",t)}function re(t,e){if("function"!=c(t))throw Error("Fn must not be null and must be a function");return u.setTimeout((function(){t()}),e)}_($t,rt),_(te,rt),_(ne,rt);var ie={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},oe={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function ae(){}function se(t){var e;return(e=t.a)||(e=t.a={}),e}function ue(){}ae.prototype.a=null;var le,ce={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function he(){rt.call(this,"d")}function fe(){rt.call(this,"c")}function pe(){}function de(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Gt(this),this.P=me,t=H?125:void 0,this.R=new Ut(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}_(he,rt),_(fe,rt),_(pe,ae),le=new pe;var me=45e3,ve={},ge={};function ye(t,e,n){t.H=1,t.i=ze(Re(e)),t.j=n,t.I=!0,be(t,null)}function be(t,e){t.u=b(),we(t),t.l=Re(t.i);var n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Je(n.b,"t",r),t.D=0,t.a=Yn(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ht(g(t.Ca,t,t.a),t.O)),qt(t.J,t.a,"readystatechange",t.Wa),e=t.B?R(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Jt(1),function(t,e,n,r,i,o){t.info((function(){if(t.a)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var l=s[u].split("=");if(1<l.length){var c=l[0];l=l[1];var h=c.split("_");a=2<=h.length&&"type"==h[1]?a+(c+"=")+l+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.c,t.m,t.l,t.f,t.T,t.j)}function _e(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=xe(t,n);if(i==ge){4==e&&(t.h=4,ee(14),r=!1),Qt(t.c,t.f,null,"[Incomplete Response]");break}if(i==ve){t.h=4,ee(15),Qt(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Qt(t.c,t.f,i,null),Me(t,i)}4==e&&0==n.length&&(t.h=1,ee(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),zn(e),e.F=!0)):(Qt(t.c,t.f,n,"[Invalid Chunked Response]"),Ae(t),Te(t))}function xe(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?ge:(n=Number(e.substring(n,r)),isNaN(n)?ve:(r+=1)+n>e.length?ge:(e=e.substr(r,n),t.D=r+n,e))}function we(t){t.U=b()+t.P,Ee(t,t.P)}function Ee(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=re(g(t.Ua,t),e)}function Se(t){t.o&&(u.clearTimeout(t.o),t.o=null)}function Te(t){0==t.g.v||t.A||Hn(t.g,t)}function Ae(t){Se(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,zt(t.R),Xt(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function Me(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||sn(n.b,t)))if(n.I=t.N,!t.C&&sn(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(t){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Vn(n),kn(n)}Un(n),ee(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=re(g(n.Ra,n),6e3));if(1>=an(n.b)&&n.ea){try{n.ea()}catch(t){}n.ea=void 0}}else Wn(n,11)}else if((t.C||n.a==t)&&Vn(n),!A(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(i=e[r],n.P=i[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var a=i[4];null!=a&&(n.pa=a,n.c.info("SVER="+n.pa));var s=i[5];if(null!=s&&"number"==typeof s&&0<s){var u=1.5*s;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var l=t.a;if(l){var c=l.a?l.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(c){var h=u.b;!h.a&&(O(c,"spdy")||O(c,"quic")||O(c,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(un(h,h.b),h.b=null))}if(u.A){var f=l.a?l.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,Ue(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.V&&(n.N=b()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var p=t;if((u=n).la=Xn(u,u.C?u.ga:null,u.fa),p.C){ln(u.b,p);var d=p,m=u.D;m&&d.setTimeout(m),d.o&&(Se(d),we(d)),u.a=p}else jn(u);0<n.g.length&&Rn(n)}else"stop"!=i[0]&&"close"!=i[0]||Wn(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Wn(n,7):Pn(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Jt(4)}catch(t){}}function Ce(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)E(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(h(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Oe(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Oe)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ke(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)ke(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function ke(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(o=de.prototype).setTimeout=function(t){this.P=t},o.Wa=function(t){t=t.target;var e=this.F;e&&3==An(t)?e.f():this.Ca(t)},o.Ca=function(t){try{if(t==this.a)t:{var e=An(this.a),n=this.a.ua(),r=this.a.X();if(!(3>e||3==e&&!H&&!this.a.$())){this.A||4!=e||7==n||Jt(8==n||0>=r?3:2),Se(this);var i=this.a.X();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.c,this.m,this.l,this.f,this.T,e,i),this.b){if(this.V&&!this.C){e:{if(this.a){var a,s=this.a;if((a=s.a?s.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var u=a;break e}}u=null}if(!u){this.b=!1,this.h=3,ee(12),Ae(this),Te(this);break t}Qt(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,Me(this,u)}this.I?(_e(this,e,o),H&&this.b&&3==e&&(qt(this.J,this.R,"tick",this.Va),this.R.start())):(Qt(this.c,this.f,o,null),Me(this,o)),4==e&&Ae(this),this.b&&!this.A&&(4==e?Hn(this.g,this):(this.b=!1,we(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,ee(12)):(this.h=0,ee(13)),Ae(this),Te(this)}}}catch(t){}},o.Va=function(){if(this.a){var t=An(this.a),e=this.a.$();this.D<e.length&&(Se(this),_e(this,t,e),this.b&&4!=t&&we(this))}},o.cancel=function(){this.A=!0,Ae(this)},o.Ua=function(){this.o=null;var t=b();0<=t-this.U?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.c,this.l),2!=this.H&&(Jt(3),ee(17)),Ae(this),this.h=2,Te(this)):Ee(this,this.U-t)},(o=Oe.prototype).K=function(){Pe(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},o.L=function(){return Pe(this),this.a.concat()},o.get=function(t,e){return ke(this.b,t)?this.b[t]:e},o.set=function(t,e){ke(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},o.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Ie=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Le(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Le){this.a=void 0!==e?e:t.a,De(this,t.f),this.j=t.j,Ne(this,t.c),Fe(this,t.h),this.g=t.g,e=t.b;var n=new Qe;n.c=e.c,e.a&&(n.a=new Oe(e.a),n.b=e.b),je(this,n),this.i=t.i}else t&&(n=String(t).match(Ie))?(this.a=!!e,De(this,n[1]||"",!0),this.j=Be(n[2]||""),Ne(this,n[3]||"",!0),Fe(this,n[4]),this.g=Be(n[5]||"",!0),je(this,n[6]||"",!0),this.i=Be(n[7]||"")):(this.a=!!e,this.b=new Qe(null,this.a))}function Re(t){return new Le(t)}function De(t,e,n){t.f=n?Be(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Ne(t,e,n){t.c=n?Be(e,!0):e}function Fe(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function je(t,e,n){e instanceof Qe?(t.b=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Ke(this,e),Je(this,n,t))}),t)),t.f=e}(t.b,t.a)):(n||(e=Ve(e,Xe)),t.b=new Qe(e,t.a))}function Ue(t,e,n){t.b.set(e,n)}function ze(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),t}function Be(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ve(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Le.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ve(e,Ge,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ve(e,Ge,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ve(n,"/"==n.charAt(0)?qe:We,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ve(n,Ye)),t.join("")};var Ge=/[#\/\?@]/g,We=/[#\?:]/g,qe=/[#\?]/g,Xe=/[#\?@]/g,Ye=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new Oe,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ke(t,e){Ze(t),e=tn(t,e),ke(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ke((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pe(t)))}function $e(t,e){return Ze(t),e=tn(t,e),ke(t.a.b,e)}function Je(t,e,n){Ke(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),T(n)),t.b+=n.length)}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t,e){this.b=t,this.a=e}function nn(t){this.g=t||rn,t=u.PerformanceNavigationTiming?0<(t=u.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(u.ia&&u.ia.ya&&u.ia.ya()&&u.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(o=Qe.prototype).add=function(t,e){Ze(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},o.forEach=function(t,e){Ze(this),this.a.forEach((function(n,r){E(n,(function(n){t.call(e,n,r,this)}),this)}),this)},o.L=function(){Ze(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},o.K=function(t){Ze(this);var e=[];if("string"==typeof t)$e(this,t)&&(e=S(e,this.a.get(tn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=S(e,t[n])}return e},o.set=function(t,e){return Ze(this),this.c=null,$e(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},o.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},o.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var rn=10;function on(t){return!!t.b||!!t.a&&t.a.size>=t.f}function an(t){return t.b?1:t.a?t.a.size:0}function sn(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function un(t,e){t.a?t.a.add(e):t.b=e}function ln(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function cn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var o=i(t.a.values()),a=o.next();!a.done;a=o.next()){var s=a.value;r=r.concat(s.s)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}return T(t.c)}function hn(){}function fn(){this.a=new hn}function pn(t,e,n){var r=n||"";try{Ce(t,(function(t,n){var i=t;f(t)&&(i=Ct(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function dn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}nn.prototype.cancel=function(){var t,e;if(this.c=cn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=i(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},hn.prototype.stringify=function(t){return u.JSON.stringify(t,void 0)},hn.prototype.parse=function(t){return u.JSON.parse(t,void 0)};var mn=u.JSON.parse;function vn(t){At.call(this),this.headers=new Oe,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=gn,this.D=this.F=!1}_(vn,At);var gn="",yn=/^https?$/i,bn=["POST","PUT"];function _n(t){return"content-type"==t.toLowerCase()}function xn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,wn(t),Sn(t)}function wn(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function En(t){if(t.b&&void 0!==s&&(!t.s[1]||4!=An(t)||2!=t.X()))if(t.l&&4==An(t))Bt(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==An(t)){t.b=!1;try{var e,n=t.X();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Ie)[1]||null;if(!o&&u.self&&u.self.location){var a=u.self.location.protocol;o=a.substr(0,a.length-1)}i=!yn.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var l=2<An(t)?t.a.statusText:""}catch(t){l=""}t.f=l+" ["+t.X()+"]",wn(t)}}finally{Sn(t)}}}function Sn(t,e){if(t.a){Tn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Tn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(u.clearTimeout(t.m),t.m=null)}function An(t){return t.a?t.a.readyState:0}function Mn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return L(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ue(t,e,n))}function Cn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function On(t){this.pa=0,this.g=[],this.c=new Yt,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=Cn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=Cn("baseRetryDelayMs",5e3,t),this.Ma=Cn("retryDelaySeedMs",1e4,t),this.Ja=Cn("forwardChannelMaxRetries",2,t),this.ma=Cn("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new nn(t&&t.concurrentRequestLimit),this.ka=new fn,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function Pn(t){if(In(t),3==t.v){var e=t.R++,n=Re(t.B);Ue(n,"SID",t.J),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Nn(t,n),(e=new de(t,t.c,e,void 0)).H=2,e.i=ze(Re(n)),n=!1,u.navigator&&u.navigator.sendBeacon&&(n=u.navigator.sendBeacon(e.i.toString(),"")),!n&&u.Image&&((new Image).src=e.i,n=!0),n||(e.a=Yn(e.g,null),e.a.ba(e.i)),e.u=b(),we(e)}qn(t)}function kn(t){t.a&&(zn(t),t.a.cancel(),t.a=null)}function In(t){kn(t),t.j&&(u.clearTimeout(t.j),t.j=null),Vn(t),t.b.cancel(),t.h&&("number"==typeof t.h&&u.clearTimeout(t.h),t.h=null)}function Ln(t,e){t.g.push(new en(t.La++,e)),3==t.v&&Rn(t)}function Rn(t){on(t.b)||t.h||(t.h=!0,Dt(t.Ba,t),t.u=0)}function Dn(t,e){var n;n=e?e.f:t.R++;var r=Re(t.B);Ue(r,"SID",t.J),Ue(r,"RID",n),Ue(r,"AID",t.P),Nn(t,r),t.i&&t.l&&Mn(r,t.i,t.l),n=new de(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Fn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),un(t.b,n),ye(n,r,e)}function Nn(t,e){t.f&&Ce({},(function(t,n){Ue(e,n,t)}))}function Fn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?g(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var l=i[u].b,c=i[u].a;if(0>(l-=o))o=Math.max(0,i[u].b-100),s=!1;else try{pn(c,a,"req"+l+"_")}catch(t){r&&r(c)}}if(s){r=a.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function jn(t){t.a||t.j||(t.U=1,Dt(t.Aa,t),t.o=0)}function Un(t){return!(t.a||t.j||3<=t.o||(t.U++,t.j=re(g(t.Aa,t),Gn(t,t.o)),t.o++,0))}function zn(t){null!=t.s&&(u.clearTimeout(t.s),t.s=null)}function Bn(t){t.a=new de(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Re(t.la);Ue(e,"RID","rpc"),Ue(e,"SID",t.J),Ue(e,"CI",t.H?"0":"1"),Ue(e,"AID",t.P),Nn(t,e),Ue(e,"TYPE","xmlhttp"),t.i&&t.l&&Mn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=ze(Re(e)),n.j=null,n.I=!0,be(n,t)}function Vn(t){null!=t.m&&(u.clearTimeout(t.m),t.m=null)}function Hn(t,e){var n=null;if(t.a==e){Vn(t),zn(t),t.a=null;var r=2}else{if(!sn(t.b,e))return;n=e.s,ln(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=b()-e.u;var i=t.u;(r=Kt()).dispatchEvent(new ne(r,n,e,i)),Rn(t)}else jn(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(an(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)||(t.h=re(g(t.Ba,t,e),Gn(t,t.u)),t.u++,0)))}(t,e)||2==r&&Un(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Wn(t,5);break;case 4:Wn(t,10);break;case 3:Wn(t,6);break;default:Wn(t,2)}}function Gn(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Wn(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=g(t.Xa,t);n||(n=new Le("//www.google.com/images/cleardot.gif"),u.location&&"http"==u.location.protocol||De(n,"https"),ze(n)),function(t,e){var n=new Yt;if(u.Image){var r=new Image;r.onload=y(dn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=y(dn,n,r,"TestLoadImage: error",!1,e),r.onabort=y(dn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=y(dn,n,r,"TestLoadImage: timeout",!1,e),u.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else ee(2);t.v=0,t.f&&t.f.ra(e),qn(t),In(t)}function qn(t){t.v=0,t.I=-1,t.f&&(0==cn(t.b).length&&0==t.g.length||(t.b.c.length=0,T(t.g),t.g.length=0),t.f.qa())}function Xn(t,e,n){var r=function(t){return t instanceof Le?Re(t):new Le(t,void 0)}(n);if(""!=r.c)e&&Ne(r,e+"."+r.c),Fe(r,r.h);else{var i=u.location;r=function(t,e,n,r){var i=new Le(null,void 0);return t&&De(i,t),e&&Ne(i,e),n&&Fe(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.W&&L(t.W,(function(t,e){Ue(r,e,t)})),e=t.A,n=t.na,e&&n&&Ue(r,e,n),Ue(r,"VER",t.ha),Nn(t,r),r}function Yn(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new vn(t.Ka)).F=t.C,e}function Qn(){}function Zn(){if(B&&!(10<=Number(J)))throw Error("Environmental error: no available transport.")}function Kn(t,e){At.call(this),this.a=new On(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!A(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!A(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new tr(this)}function $n(t){he.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Jn(){fe.call(this),this.status=1}function tr(t){this.a=t}(o=vn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?se(this.H):se(le),this.a.onreadystatechange=g(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void xn(this,t)}t=n||"";var i=new Oe(this.headers);r&&Ce(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=_n,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=u.FormData&&t instanceof u.FormData,!(0<=w(bn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Tn(this),0<this.o&&((this.D=function(t){return B&&$(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=g(this.xa,this)):this.m=Bt(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){xn(this,t)}},o.xa=function(){void 0!==s&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},o.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Sn(this))},o.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Sn(this,!0)),vn.S.G.call(this)},o.za=function(){this.j||(this.A||this.l||this.g?En(this):this.Ta())},o.Ta=function(){En(this)},o.X=function(){try{return 2<An(this)?this.a.status:-1}catch(t){return-1}},o.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},o.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),mn(e)}},o.ua=function(){return this.h},o.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(o=On.prototype).ha=8,o.v=1,o.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new de(this,this.c,t,void 0),r=this.l;if(this.O&&(r?N(r=R(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Fn(this,n,e),Ue(i=Re(this.B),"RID",t),Ue(i,"CVER",22),this.A&&Ue(i,"X-HTTP-Session-Id",this.A),Nn(this,i),this.i&&r&&Mn(i,this.i,r),un(this.b,n),this.Ga&&Ue(i,"TYPE","init"),this.da?(Ue(i,"$req",e),Ue(i,"SID","null"),n.V=!0,ye(n,i,null)):ye(n,i,e),this.v=2}}else 3==this.v&&(t?Dn(this,t):0==this.g.length||on(this.b)||Dn(this))},o.Aa=function(){if(this.j=null,Bn(this),this.V&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=re(g(this.Sa,this),t)}},o.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,kn(this),Bn(this))},o.Ra=function(){null!=this.m&&(this.m=null,kn(this),Un(this),ee(19))},o.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),ee(2)):(this.c.info("Failed to ping google.com"),ee(1))},(o=Qn.prototype).ta=function(){},o.sa=function(){},o.ra=function(){},o.qa=function(){},o.Ha=function(){},Zn.prototype.a=function(t,e){return new Kn(t,e)},_(Kn,At),(o=Kn.prototype).addEventListener=function(t,e,n,r){Kn.S.addEventListener.call(this,t,e,n,r)},o.removeEventListener=function(t,e,n,r){Kn.S.removeEventListener.call(this,t,e,n,r)},o.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;ee(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Xn(t,null,t.fa),Rn(t)},o.close=function(){Pn(this.a)},o.Pa=function(t){if("string"==typeof t){var e={};e.__data__=t,Ln(this.a,e)}else this.g?((e={}).__data__=Ct(t),Ln(this.a,e)):Ln(this.a,t)},o.G=function(){this.a.f=null,delete this.f,Pn(this.a),delete this.a,Kn.S.G.call(this)},_($n,he),_(Jn,fe),_(tr,Qn),tr.prototype.ta=function(){this.a.dispatchEvent("a")},tr.prototype.sa=function(t){this.a.dispatchEvent(new $n(t))},tr.prototype.ra=function(t){this.a.dispatchEvent(new Jn(t))},tr.prototype.qa=function(){this.a.dispatchEvent("b")},Zn.prototype.createWebChannel=Zn.prototype.a,Kn.prototype.send=Kn.prototype.Pa,Kn.prototype.open=Kn.prototype.Oa,Kn.prototype.close=Kn.prototype.close,ie.NO_ERROR=0,ie.TIMEOUT=8,ie.HTTP_ERROR=6,oe.COMPLETE="complete",ue.EventType=ce,ce.OPEN="a",ce.CLOSE="b",ce.ERROR="c",ce.MESSAGE="d",At.prototype.listen=At.prototype.va,vn.prototype.listenOnce=vn.prototype.wa,vn.prototype.getLastError=vn.prototype.Qa,vn.prototype.getLastErrorCode=vn.prototype.ua,vn.prototype.getStatus=vn.prototype.X,vn.prototype.getResponseJson=vn.prototype.Na,vn.prototype.getResponseText=vn.prototype.$,vn.prototype.send=vn.prototype.ba;var er=function(){return new Zn},nr=ie,rr=oe,ir=ue,or=vn;const ar={createWebChannelTransport:er,ErrorCode:ie,EventType:oe,WebChannel:ue,XhrIo:vn}},4471:(t,e,n)=>{"use strict";var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=(r=n(7378))&&r.__esModule?r:{default:r};e.Z=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,a=void 0===r?24:r,s=t.height,u=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:u},c)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},7343:(t,e,n)=>{"use strict";var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=(r=n(7378))&&r.__esModule?r:{default:r};e.Z=function(t){var e=t.fill,n=void 0===e?"currentColor":e,r=t.width,a=void 0===r?24:r,s=t.height,u=void 0===s?24:s,l=t.style,c=void 0===l?{}:l,h=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:u},c)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},2066:(t,e,n)=>{"use strict";n.r(e),n.d(e,{accidentals:()=>N,ascending:()=>J,chroma:()=>z,default:()=>ot,descending:()=>tt,enharmonic:()=>it,freq:()=>U,fromFreq:()=>V,fromFreqSharps:()=>H,fromMidi:()=>B,fromMidiSharps:()=>G,get:()=>L,midi:()=>j,name:()=>R,names:()=>I,octave:()=>F,pitchClass:()=>D,simplify:()=>rt,sortedNames:()=>et,sortedUniqNames:()=>nt,tr:()=>q,trBy:()=>Y,trFifths:()=>$,trFrom:()=>Z,transpose:()=>W,transposeBy:()=>X,transposeFifths:()=>K,transposeFrom:()=>Q});const r=(t,e)=>Array(Math.abs(e)+1).join(t);function i(t){return null!==t&&"object"==typeof t&&"string"==typeof t.name}function o(t){return null!==t&&"object"==typeof t&&"number"==typeof t.step&&"number"==typeof t.alt}const a=[0,2,4,-1,1,3,5],s=a.map((t=>Math.floor(7*t/12)));function u(t){const{step:e,alt:n,oct:r,dir:i=1}=t,o=a[e]+7*n;return void 0===r?[i*o]:[i*o,i*(r-s[e]-4*n)]}const l=[3,0,4,1,5,2,6];const c={empty:!0,name:"",pc:"",acc:""},h=new Map;function f(t){const e=h.get(t);if(e)return e;const n="string"==typeof t?function(t){const e=function(t){const e=p.exec(t);return[e[1].toUpperCase(),e[2].replace(/x/g,"##"),e[3],e[4]]}(t);if(""===e[0]||""!==e[3])return c;const n=e[0],r=e[1],i=e[2],o=(n.charCodeAt(0)+3)%7,a=(t=>"b"===t[0]?-t.length:t.length)(r),s=i.length?+i:void 0,l=u({step:o,alt:a,oct:s}),h=n+r+i,f=n+r,d=(m[o]+a+120)%12,v=void 0===s?(12,((m[o]+a)%12+12)%12-1188):m[o]+a+12*(s+1),g=v>=0&&v<=127?v:null;return{empty:!1,acc:r,alt:a,chroma:d,coord:l,freq:void 0===s?null:440*Math.pow(2,(v-69)/12),height:v,letter:n,midi:g,name:h,oct:s,pc:f,step:o}}(t):o(t)?f(function(t){const{step:e,alt:n,oct:i}=t,o=(t=>"CDEFGAB".charAt(t))(e);if(!o)return"";const a=o+(t=>t<0?r("b",-t):r("#",t))(n);return i||0===i?a+i:a}(t)):i(t)?f(t.name):c;return h.set(t,n),n}const p=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function d(t){return f(function(t){const[e,n,r]=t,i=l[function(t){const e=(t+1)%7;return e<0?7+e:e}(e)],o=Math.floor((e+1)/7);return void 0===n?{step:i,alt:o,dir:r}:{step:i,alt:o,oct:n+4*o+s[i],dir:r}}(t))}const m=[0,2,4,5,7,9,11],v={empty:!0,name:"",acc:""},g=new RegExp("^([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})|(AA|A|P|M|m|d|dd)([-+]?\\d+)$"),y={};function b(t){return"string"==typeof t?y[t]||(y[t]=function(t){const e=function(t){const e=g.exec(`${t}`);return null===e?["",""]:e[1]?[e[1],e[2]]:[e[4],e[3]]}(t);if(""===e[0])return v;const n=+e[0],r=e[1],i=(Math.abs(n)-1)%7,o=x[i];if("M"===o&&"P"===r)return v;const a="M"===o?"majorable":"perfectable",s=""+n+r,l=n<0?-1:1,c=8===n||-8===n?n:l*(i+1),h=function(t,e){return"M"===e&&"majorable"===t||"P"===e&&"perfectable"===t?0:"m"===e&&"majorable"===t?-1:/^A+$/.test(e)?e.length:/^d+$/.test(e)?-1*("perfectable"===t?e.length:e.length+1):0}(a,r),f=Math.floor((Math.abs(n)-1)/7);return{empty:!1,name:s,num:n,q:r,step:i,alt:h,dir:l,type:a,simple:c,semitones:l*(_[i]+h+12*f),chroma:(l*(_[i]+h)%12+12)%12,coord:u({step:i,alt:h,oct:f,dir:l}),oct:f}}(t)):o(t)?b(function(t){const{step:e,alt:n,oct:i=0,dir:o}=t;return o?(o<0?"-":"")+(e+1+7*i)+function(t,e){return 0===e?"majorable"===t?"M":"P":-1===e&&"majorable"===t?"m":e>0?r("A",e):r("d","perfectable"===t?e:e+1)}("M"===x[e]?"majorable":"perfectable",n):""}(t)):i(t)?b(t.name):v}const _=[0,2,4,5,7,9,11],x="PMMPPMM";function w(t,e){const n=f(t),r=b(e);if(n.empty||r.empty)return"";const i=n.coord,o=r.coord;return d(1===i.length?[i[0]+o[0]]:[i[0]+o[0],i[1]+o[1]]).name}const E=Math.log(2),S=Math.log(440);function T(t){const e=12*(Math.log(t)-S)/E+69;return Math.round(100*e)/100}const A="C C# D D# E F F# G G# A A# B".split(" "),M="C Db D Eb E F Gb G Ab A Bb B".split(" ");function C(t,e={}){if(isNaN(t)||t===-1/0||t===1/0)return"";t=Math.round(t);const n=(!0===e.sharps?A:M)[t%12];return e.pitchClass?n:n+(Math.floor(t/12)-1)}const O=["C","D","E","F","G","A","B"],P=t=>t.name,k=t=>t.map(f).filter((t=>!t.empty));function I(t){return void 0===t?O.slice():Array.isArray(t)?k(t).map(P):[]}const L=f,R=t=>L(t).name,D=t=>L(t).pc,N=t=>L(t).acc,F=t=>L(t).oct,j=t=>L(t).midi,U=t=>L(t).freq,z=t=>L(t).chroma;function B(t){return C(t)}function V(t){return C(T(t))}function H(t){return C(T(t),{sharps:!0})}function G(t){return C(t,{sharps:!0})}const W=w,q=w,X=t=>e=>W(e,t),Y=X,Q=t=>e=>W(t,e),Z=Q;function K(t,e){const n=L(t);if(n.empty)return"";const[r,i]=n.coord;return d(void 0===i?[r+e]:[r+e,i]).name}const $=K,J=(t,e)=>t.height-e.height,tt=(t,e)=>e.height-t.height;function et(t,e){return e=e||J,k(t).sort(e).map(P)}function nt(t){return et(t,J).filter(((t,e,n)=>0===e||t!==n[e-1]))}const rt=t=>{const e=L(t);return e.empty?"":C(e.midi||e.chroma,{sharps:e.alt>0,pitchClass:null===e.midi})};function it(t,e){const n=L(t);if(n.empty)return"";const r=L(e||C(n.midi||n.chroma,{sharps:n.alt<0,pitchClass:!0}));if(r.empty||r.chroma!==n.chroma)return"";if(void 0===n.oct)return r.pc;const i=n.chroma-n.alt,o=r.chroma-r.alt,a=i>11||o<0?-1:i<0||o>11?1:0,s=n.oct+a;return r.pc+s}const ot={names:I,get:f,name:R,pitchClass:D,accidentals:N,octave:F,midi:j,ascending:J,descending:tt,sortedNames:et,sortedUniqNames:nt,fromMidi:B,fromMidiSharps:G,freq:U,fromFreq:V,fromFreqSharps:H,chroma:z,transpose:w,tr:w,transposeBy:X,trBy:X,transposeFrom:Q,trFrom:Q,transposeFifths:K,trFifths:K,simplify:rt,enharmonic:it}},6278:function(t,e,n){!function(t,e,n,r){"use strict";function i(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var o=i(e),a=i(n),s=i(r),u=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},l=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},c=function(t,e){return{startTime:e,type:"setValue",value:t}},h=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},f=function(t,e,n){var r=n.startTime,i=n.target,o=n.timeConstant;return i+(e-i)*Math.exp((r-t)/o)},p=function(t){return"exponentialRampToValue"===t.type},d=function(t){return"linearRampToValue"===t.type},m=function(t){return p(t)||d(t)},v=function(t){return"setValue"===t.type},g=function(t){return"setValueCurve"===t.type},y=function t(e,n,r,i){var o=e[n];return void 0===o?i:m(o)||v(o)?o.value:g(o)?o.values[o.values.length-1]:f(r,t(e,n-1,o.startTime,i),o)},b=function(t,e,n,r,i){return void 0===n?[r.insertTime,i]:m(n)?[n.endTime,n.value]:v(n)?[n.startTime,n.value]:g(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,y(t,e-1,n.startTime,i)]},_=function(t){return"cancelAndHold"===t.type},x=function(t){return"cancelScheduledValues"===t.type},w=function(t){return _(t)||x(t)?t.cancelTime:p(t)||d(t)?t.endTime:t.startTime},E=function(t,e,n,r){var i=r.endTime,o=r.value;return n===o?o:0<n&&0<o||n<0&&o<0?n*Math.pow(o/n,(t-e)/(i-e)):0},S=function(t,e,n,r){return n+(t-e)/(r.endTime-e)*(r.value-n)},T=function(t,e){var n=e.duration,r=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]}(i,(t-r)/n*(i.length-1))},A=function(t){return"setTarget"===t.type},M=function(){function t(e){a.default(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return s.default(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=w(t);if(_(t)||x(t)){var n=this._automationEvents.findIndex((function(n){return x(t)&&g(n)?n.startTime+n.duration>=e:w(n)>=e})),r=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),_(t)){var i=this._automationEvents[this._automationEvents.length-1];if(void 0!==r&&m(r)){if(A(i))throw new Error("The internal list is malformed.");var o=g(i)?i.startTime+i.duration:w(i),a=g(i)?i.values[i.values.length-1]:i.value,s=p(r)?E(e,o,a,r):S(e,o,a,r),f=p(r)?u(s,e,this._currenTime):l(s,e,this._currenTime);this._automationEvents.push(f)}void 0!==i&&A(i)&&this._automationEvents.push(c(this.getValue(e),e)),void 0!==i&&g(i)&&i.startTime+i.duration>e&&(this._automationEvents[this._automationEvents.length-1]=h(new Float32Array([6,7]),i.startTime,e-i.startTime))}}else{var v=this._automationEvents.findIndex((function(t){return w(t)>e})),y=-1===v?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[v-1];if(void 0!==y&&g(y)&&w(y)+y.duration>e)return!1;var b=p(t)?u(t.value,t.endTime,this._currenTime):d(t)?l(t.value,e,this._currenTime):t;if(-1===v)this._automationEvents.push(b);else{if(g(t)&&e+t.duration>w(this._automationEvents[v]))return!1;this._automationEvents.splice(v,0,b)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex((function(e){return w(e)>t}));if(e>1){var n=this._automationEvents.slice(e-1),r=n[0];A(r)&&n.unshift(c(y(this._automationEvents,e-2,r.startTime,this._defaultValue),r.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var e=this._automationEvents[this._automationEvents.length-1],n=this._automationEvents.findIndex((function(e){return w(e)>t})),r=this._automationEvents[n],i=w(e)<=t?e:this._automationEvents[n-1];if(void 0!==i&&A(i)&&(void 0===r||!m(r)||r.insertTime>t))return f(t,y(this._automationEvents,n-2,i.startTime,this._defaultValue),i);if(void 0!==i&&v(i)&&(void 0===r||!m(r)))return i.value;if(void 0!==i&&g(i)&&(void 0===r||!m(r)||i.startTime+i.duration>t))return t<i.startTime+i.duration?T(t,i):i.values[i.values.length-1];if(void 0!==i&&m(i)&&(void 0===r||!m(r)))return i.value;if(void 0!==r&&p(r)){var a=b(this._automationEvents,n-1,i,r,this._defaultValue),s=o.default(a,2),u=s[0],l=s[1];return E(t,u,l,r)}if(void 0!==r&&d(r)){var c=b(this._automationEvents,n-1,i,r,this._defaultValue),h=o.default(c,2),_=h[0],x=h[1];return S(t,_,x,r)}return this._defaultValue}}]),t}();t.AutomationEventList=M,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=c,t.createSetValueCurveAutomationEvent=h,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(7613),n(9372),n(5816))},42:(t,e)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var t=[],e=0;e<arguments.length;e++){var n=arguments[e];if(n){var o=typeof n;if("string"===o||"number"===o)t.push(n);else if(Array.isArray(n)&&n.length){var a=i.apply(null,n);a&&t.push(a)}else if("object"===o)for(var s in n)r.call(n,s)&&n[s]&&t.push(s)}}return t.join(" ")}t.exports?(i.default=i,t.exports=i):void 0===(n=function(){return i}.apply(e,[]))||(t.exports=n)}()},5136:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".CradleLoader__react-spinner-loader-swing___3D0OH div {\n  border-radius: 50%;\n  float: left;\n  height: 1em;\n  width: 1em; }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(1) {\n  background: -webkit-linear-gradient(left, #385c78 0%, #325774 100%);\n  background: linear-gradient(to right, #385c78 0%, #325774 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(2) {\n  background: -webkit-linear-gradient(left, #325774 0%, #47536a 100%);\n  background: linear-gradient(to right, #325774 0%, #47536a 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(3) {\n  background: -webkit-linear-gradient(left, #4a5369 0%, #6b4d59 100%);\n  background: linear-gradient(to right, #4a5369 0%, #6b4d59 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(4) {\n  background: -webkit-linear-gradient(left, #744c55 0%, #954646 100%);\n  background: linear-gradient(to right, #744c55 0%, #954646 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(5) {\n  background: -webkit-linear-gradient(left, #9c4543 0%, #bb4034 100%);\n  background: linear-gradient(to right, #9c4543 0%, #bb4034 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(6) {\n  background: -webkit-linear-gradient(left, #c33f31 0%, #d83b27 100%);\n  background: linear-gradient(to right, #c33f31 0%, #d83b27 100%); }\n\n.CradleLoader__react-spinner-loader-swing___3D0OH div:nth-of-type(7) {\n  background: -webkit-linear-gradient(left, #da3b26 0%, #db412c 100%);\n  background: linear-gradient(to right, #da3b26 0%, #db412c 100%); }\n\n.CradleLoader__react-spinner-loader-shadow___1mvJo {\n  clear: left;\n  padding-top: 1.5em; }\n\n.CradleLoader__react-spinner-loader-shadow___1mvJo div {\n  -webkit-filter: blur(1px);\n  filter: blur(1px);\n  float: left;\n  width: 1em;\n  height: .25em;\n  border-radius: 50%;\n  background: #e3dbd2; }\n\n.CradleLoader__react-spinner-loader-shadow___1mvJo .CradleLoader__react-spinner-loader-shadow-l___1sFGy {\n  background: #d5d8d6; }\n\n.CradleLoader__react-spinner-loader-shadow___1mvJo .CradleLoader__react-spinner-loader-shadow-r___2WcHL {\n  background: #eed3ca; }\n\n@-webkit-keyframes CradleLoader__ball-l___1BfrL {\n  0%, 50% {\n    -webkit-transform: rotate(0) translateX(0);\n    transform: rotate(0) translateX(0); }\n  100% {\n    -webkit-transform: rotate(50deg) translateX(-2.5em);\n    transform: rotate(50deg) translateX(-2.5em); } }\n\n@keyframes CradleLoader__ball-l___1BfrL {\n  0%, 50% {\n    -webkit-transform: rotate(0) translate(0);\n    transform: rotate(0) translateX(0); }\n  100% {\n    -webkit-transform: rotate(50deg) translateX(-2.5em);\n    transform: rotate(50deg) translateX(-2.5em); } }\n\n@-webkit-keyframes CradleLoader__ball-r___2cFla {\n  0% {\n    -webkit-transform: rotate(-50deg) translateX(2.5em);\n    transform: rotate(-50deg) translateX(2.5em); }\n  50%,\n  100% {\n    -webkit-transform: rotate(0) translateX(0);\n    transform: rotate(0) translateX(0); } }\n\n@keyframes CradleLoader__ball-r___2cFla {\n  0% {\n    -webkit-transform: rotate(-50deg) translateX(2.5em);\n    transform: rotate(-50deg) translateX(2.5em); }\n  50%,\n  100% {\n    -webkit-transform: rotate(0) translateX(0);\n    transform: rotate(0) translateX(0); } }\n\n@-webkit-keyframes CradleLoader__shadow-l-n___e9jZg {\n  0%, 50% {\n    opacity: .5;\n    -webkit-transform: translateX(0);\n    transform: translateX(0); }\n  100% {\n    opacity: .125;\n    -webkit-transform: translateX(-1.57em);\n    transform: translateX(-1.75em); } }\n\n@keyframes CradleLoader__shadow-l-n___e9jZg {\n  0%, 50% {\n    opacity: .5;\n    -webkit-transform: translateX(0);\n    transform: translateX(0); }\n  100% {\n    opacity: .125;\n    -webkit-transform: translateX(-1.75);\n    transform: translateX(-1.75em); } }\n\n@-webkit-keyframes CradleLoader__shadow-r-n___dv49l {\n  0% {\n    opacity: .125;\n    -webkit-transform: translateX(1.75em);\n    transform: translateX(1.75em); }\n  50%,\n  100% {\n    opacity: .5;\n    -webkit-transform: translateX(0);\n    transform: translateX(0); } }\n\n@keyframes CradleLoader__shadow-r-n___dv49l {\n  0% {\n    opacity: .125;\n    -webkit-transform: translateX(1.75em);\n    transform: translateX(1.75em); }\n  50%,\n  100% {\n    opacity: .5;\n    -webkit-transform: translateX(0);\n    transform: translateX(0); } }\n\n.CradleLoader__react-spinner-loader-swing-l___qFCfS {\n  -webkit-animation: CradleLoader__ball-l___1BfrL .425s ease-in-out infinite alternate;\n  animation: CradleLoader__ball-l___1BfrL .425s ease-in-out infinite alternate; }\n\n.CradleLoader__react-spinner-loader-swing-r___2-K0S {\n  -webkit-animation: CradleLoader__ball-r___2cFla .425s ease-in-out infinite alternate;\n  animation: CradleLoader__ball-r___2cFla .425s ease-in-out infinite alternate; }\n\n.CradleLoader__react-spinner-loader-shadow-l___1sFGy {\n  -webkit-animation: CradleLoader__shadow-l-n___e9jZg .425s ease-in-out infinite alternate;\n  animation: CradleLoader__shadow-l-n___e9jZg .425s ease-in-out infinite alternate; }\n\n.CradleLoader__react-spinner-loader-shadow-r___2WcHL {\n  -webkit-animation: CradleLoader__shadow-r-n___dv49l .425s ease-in-out infinite alternate;\n  animation: CradleLoader__shadow-r-n___dv49l .425s ease-in-out infinite alternate; }\n",""]),e.locals={"react-spinner-loader-swing":"CradleLoader__react-spinner-loader-swing___3D0OH","react-spinner-loader-shadow":"CradleLoader__react-spinner-loader-shadow___1mvJo","react-spinner-loader-shadow-l":"CradleLoader__react-spinner-loader-shadow-l___1sFGy","react-spinner-loader-shadow-r":"CradleLoader__react-spinner-loader-shadow-r___2WcHL","react-spinner-loader-swing-l":"CradleLoader__react-spinner-loader-swing-l___qFCfS","ball-l":"CradleLoader__ball-l___1BfrL","react-spinner-loader-swing-r":"CradleLoader__react-spinner-loader-swing-r___2-K0S","ball-r":"CradleLoader__ball-r___2cFla","shadow-l-n":"CradleLoader__shadow-l-n___e9jZg","shadow-r-n":"CradleLoader__shadow-r-n___dv49l"}},5089:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Plane__react-spinner-loader-svg-calLoader___2Vs7C {\n  width: 230px;\n  height: 230px;\n  transform-origin: 115px 115px;\n  animation: 1.4s linear infinite :local(loader-spin); }\n\n.Plane__react-spinner-loader-svg-cal-loader__path___NY-vZ {\n  animation: 1.4s ease-in-out infinite :local(loader-path); }\n\n@keyframes Plane__loader-spin___20Yl- {\n  to {\n    transform: rotate(360deg); } }\n\n@keyframes Plane__loader-path___hQmD9 {\n  0% {\n    stroke-dasharray: 0, 580, 0, 0, 0, 0, 0, 0, 0; }\n  50% {\n    stroke-dasharray: 0, 450, 10, 30, 10, 30, 10, 30, 10; }\n  100% {\n    stroke-dasharray: 0, 580, 0, 0, 0, 0, 0, 0, 0; } }\n",""]),e.locals={"react-spinner-loader-svg-calLoader":"Plane__react-spinner-loader-svg-calLoader___2Vs7C","react-spinner-loader-svg-cal-loader__path":"Plane__react-spinner-loader-svg-cal-loader__path___NY-vZ","loader-spin":"Plane__loader-spin___20Yl-","loader-path":"Plane__loader-path___hQmD9"}},748:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Triangle__react-spinner-loader-svg___eZacb svg {\n  -webkit-transform-origin: 50% 65%;\n  transform-origin: 50% 65%; }\n\n.Triangle__react-spinner-loader-svg___eZacb svg polygon {\n  stroke-dasharray: 17;\n  -webkit-animation: Triangle__dash___9xNIv 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite;\n  animation: Triangle__dash___9xNIv 2.5s cubic-bezier(0.35, 0.04, 0.63, 0.95) infinite; }\n\n@-webkit-keyframes Triangle__dash___9xNIv {\n  to {\n    stroke-dashoffset: 136; } }\n\n@keyframes Triangle__dash___9xNIv {\n  to {\n    stroke-dashoffset: 136; } }\n\n@-webkit-keyframes Triangle__rotate___2d7xm {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n\n@keyframes Triangle__rotate___2d7xm {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg); } }\n",""]),e.locals={"react-spinner-loader-svg":"Triangle__react-spinner-loader-svg___eZacb",dash:"Triangle__dash___9xNIv",rotate:"Triangle__rotate___2d7xm"}},8161:(t,e,n)=>{(e=t.exports=n(1506)(!1)).i(n(5136),""),e.i(n(5089),""),e.i(n(748),""),e.push([t.id,"\n",""])},8739:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".App-styles__text-micro___1Ieth {\n  font-size: 8px;\n  line-height: 8px; }\n\n.App-styles__text-small___1Q_P- {\n  font-size: 14px;\n  line-height: 18px; }\n\n.App-styles__text-regular___1P-CB {\n  font-size: 17px;\n  line-height: 22px; }\n\n.App-styles__text-large___dURle {\n  font-size: 19px;\n  line-height: 24px; }\n\n.App-styles__text-title3___12n1n {\n  font-size: 24px;\n  line-height: 28px; }\n\n.App-styles__text-title2___1Tl9M {\n  font-size: 32px;\n  line-height: 26px; }\n\n.App-styles__text-title1___yg9qX {\n  font-size: 44px;\n  line-height: 56px; }\n\n.App-styles__container___2K-3P {\n  height: inherit; }\n\n.App-styles__home___2HYdE {\n  width: 100%;\n  height: 100%; }\n\n.App-styles__content___371_Z {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: calc(100% - 40px); }\n\n.App-styles__loader___2RDGZ {\n  position: absolute;\n  top: 0;\n  z-index: 100000000;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(1, 1, 1, 0.5); }\n",""]),e.locals={"text-micro":"App-styles__text-micro___1Ieth","text-small":"App-styles__text-small___1Q_P-","text-regular":"App-styles__text-regular___1P-CB","text-large":"App-styles__text-large___dURle","text-title3":"App-styles__text-title3___12n1n","text-title2":"App-styles__text-title2___1Tl9M","text-title1":"App-styles__text-title1___yg9qX",container:"App-styles__container___2K-3P",home:"App-styles__home___2HYdE",content:"App-styles__content___371_Z",loader:"App-styles__loader___2RDGZ"}},2318:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".BringRoundsDialog-styles__text-micro___3tBgu {\n  font-size: 8px;\n  line-height: 8px; }\n\n.BringRoundsDialog-styles__text-small___1JPj5 {\n  font-size: 14px;\n  line-height: 18px; }\n\n.BringRoundsDialog-styles__text-regular___1hjmS {\n  font-size: 17px;\n  line-height: 22px; }\n\n.BringRoundsDialog-styles__text-large___2NKOd {\n  font-size: 19px;\n  line-height: 24px; }\n\n.BringRoundsDialog-styles__text-title3___5uF6Q {\n  font-size: 24px;\n  line-height: 28px; }\n\n.BringRoundsDialog-styles__text-title2___1BCwM {\n  font-size: 32px;\n  line-height: 26px; }\n\n.BringRoundsDialog-styles__text-title1___2kDOL {\n  font-size: 44px;\n  line-height: 56px; }\n\n.BringRoundsDialog-styles__dialog___3oC_5 {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 20px; }\n\n.BringRoundsDialog-styles__settingsForm___2FBuq {\n  display: flex;\n  flex-direction: column;\n  align-items: center; }\n\n.BringRoundsDialog-styles__dialogText___3OkXz {\n  padding-bottom: 10px; }\n\n.BringRoundsDialog-styles__dialogSelect___3URjY {\n  margin: 10px;\n  border-radius: 4px;\n  height: 30px; }\n\n.BringRoundsDialog-styles__colorSelect___2wiDO {\n  -webkit-appearance: media-slider;\n  appearance: media-slider; }\n\n.BringRoundsDialog-styles__colorSelect___2wiDO::after {\n  content: ''; }\n\n.BringRoundsDialog-styles__dialogControls___2JaxH {\n  display: flex;\n  justify-content: space-around;\n  width: 160px; }\n\n.BringRoundsDialog-styles__dialogButton___y7CCa {\n  border: 1px solid #212121;\n  color: #212121;\n  width: 60px; }\n\n.BringRoundsDialog-styles__dialogButtonSelected___oOyPz {\n  background: #212121;\n  color: white; }\n",""]),e.locals={"text-micro":"BringRoundsDialog-styles__text-micro___3tBgu","text-small":"BringRoundsDialog-styles__text-small___1JPj5","text-regular":"BringRoundsDialog-styles__text-regular___1hjmS","text-large":"BringRoundsDialog-styles__text-large___2NKOd","text-title3":"BringRoundsDialog-styles__text-title3___5uF6Q","text-title2":"BringRoundsDialog-styles__text-title2___1BCwM","text-title1":"BringRoundsDialog-styles__text-title1___2kDOL",dialog:"BringRoundsDialog-styles__dialog___3oC_5",settingsForm:"BringRoundsDialog-styles__settingsForm___2FBuq",dialogText:"BringRoundsDialog-styles__dialogText___3OkXz",dialogSelect:"BringRoundsDialog-styles__dialogSelect___3URjY",colorSelect:"BringRoundsDialog-styles__colorSelect___2wiDO",dialogControls:"BringRoundsDialog-styles__dialogControls___2JaxH",dialogButton:"BringRoundsDialog-styles__dialogButton___y7CCa",dialogButtonSelected:"BringRoundsDialog-styles__dialogButtonSelected___oOyPz"}},2965:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,'.CollaborationLink-styles__text-micro___2JL6Y {\n  font-size: 8px;\n  line-height: 8px; }\n\n.CollaborationLink-styles__text-small___LFW1s {\n  font-size: 14px;\n  line-height: 18px; }\n\n.CollaborationLink-styles__text-regular___11XYd {\n  font-size: 17px;\n  line-height: 22px; }\n\n.CollaborationLink-styles__text-large___kzah0 {\n  font-size: 19px;\n  line-height: 24px; }\n\n.CollaborationLink-styles__text-title3___1sCIb {\n  font-size: 24px;\n  line-height: 28px; }\n\n.CollaborationLink-styles__text-title2___2SPE8 {\n  font-size: 32px;\n  line-height: 26px; }\n\n.CollaborationLink-styles__text-title1___1lGOQ {\n  font-size: 44px;\n  line-height: 56px; }\n\n.CollaborationLink-styles__selectCobntainer___10r7X {\n  background-color: #fefefe;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: space-between;\n  margin: 0 8px;\n  width: 400px;\n  border-radius: 4px; }\n\n.CollaborationLink-styles__tooltiptext___1QCy6 {\n  visibility: hidden;\n  width: 140px;\n  font-size: 14px;\n  background-color: #555;\n  color: #fff;\n  text-align: center;\n  border-radius: 6px;\n  padding: 5px;\n  position: absolute;\n  z-index: 1;\n  bottom: 150%;\n  left: 50%;\n  margin-left: -75px;\n  opacity: 0;\n  transition: opacity 0.3s; }\n\n.CollaborationLink-styles__tooltiptext___1QCy6::after {\n  content: "";\n  position: absolute;\n  top: 100%;\n  left: 50%;\n  margin-left: -5px;\n  border-width: 5px;\n  border-style: solid;\n  border-color: #212121 transparent transparent transparent; }\n\n.CollaborationLink-styles__linkContainer___2r6bv {\n  width: 100%;\n  position: relative; }\n  .CollaborationLink-styles__linkContainer___2r6bv input {\n    width: 100%;\n    height: 30px; }\n\n.CollaborationLink-styles__linkContainer___2r6bv:hover .CollaborationLink-styles__tooltiptext___1QCy6 {\n  visibility: visible;\n  opacity: 1; }\n\n.CollaborationLink-styles__redirectButton___2n2hH {\n  border: 1px solid #212121;\n  color: #212121;\n  margin: 10px; }\n',""]),e.locals={"text-micro":"CollaborationLink-styles__text-micro___2JL6Y","text-small":"CollaborationLink-styles__text-small___LFW1s","text-regular":"CollaborationLink-styles__text-regular___11XYd","text-large":"CollaborationLink-styles__text-large___kzah0","text-title3":"CollaborationLink-styles__text-title3___1sCIb","text-title2":"CollaborationLink-styles__text-title2___2SPE8","text-title1":"CollaborationLink-styles__text-title1___1lGOQ",selectCobntainer:"CollaborationLink-styles__selectCobntainer___10r7X",tooltiptext:"CollaborationLink-styles__tooltiptext___1QCy6",linkContainer:"CollaborationLink-styles__linkContainer___2r6bv",redirectButton:"CollaborationLink-styles__redirectButton___2n2hH"}},5973:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".CollaborationRoute-styles__text-micro___2IXYF {\n  font-size: 8px;\n  line-height: 8px; }\n\n.CollaborationRoute-styles__text-small___rhLAK {\n  font-size: 14px;\n  line-height: 18px; }\n\n.CollaborationRoute-styles__text-regular___2tjDg {\n  font-size: 17px;\n  line-height: 22px; }\n\n.CollaborationRoute-styles__text-large___mTn2C {\n  font-size: 19px;\n  line-height: 24px; }\n\n.CollaborationRoute-styles__text-title3___2nSoo {\n  font-size: 24px;\n  line-height: 28px; }\n\n.CollaborationRoute-styles__text-title2____XB89 {\n  font-size: 32px;\n  line-height: 26px; }\n\n.CollaborationRoute-styles__text-title1___2KkhV {\n  font-size: 44px;\n  line-height: 56px; }\n\n.CollaborationRoute-styles__container___5Zpb6 {\n  height: inherit; }\n\n.CollaborationRoute-styles__home___1XYw0 {\n  width: 100%;\n  height: 100%; }\n\n.CollaborationRoute-styles__content___B5sq5 {\n  position: absolute;\n  left: 0;\n  bottom: 0;\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: calc(100% - 40px); }\n\n.CollaborationRoute-styles__mainContainer___3jc8O {\n  height: 100%;\n  position: relative; }\n\n.CollaborationRoute-styles__graphicsContext___3we_D {\n  width: 100%;\n  height: 100%;\n  outline: none; }\n\n.CollaborationRoute-styles__toneButton___16wK- {\n  border: 1px solid #212121;\n  color: #212121; }\n",""]),e.locals={"text-micro":"CollaborationRoute-styles__text-micro___2IXYF","text-small":"CollaborationRoute-styles__text-small___rhLAK","text-regular":"CollaborationRoute-styles__text-regular___2tjDg","text-large":"CollaborationRoute-styles__text-large___mTn2C","text-title3":"CollaborationRoute-styles__text-title3___2nSoo","text-title2":"CollaborationRoute-styles__text-title2____XB89","text-title1":"CollaborationRoute-styles__text-title1___2KkhV",container:"CollaborationRoute-styles__container___5Zpb6",home:"CollaborationRoute-styles__home___1XYw0",content:"CollaborationRoute-styles__content___B5sq5",mainContainer:"CollaborationRoute-styles__mainContainer___3jc8O",graphicsContext:"CollaborationRoute-styles__graphicsContext___3we_D",toneButton:"CollaborationRoute-styles__toneButton___16wK-"}},3801:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".ControlsBar-styles__text-micro___2DQUC {\n  font-size: 8px;\n  line-height: 8px; }\n\n.ControlsBar-styles__text-small___3nXq3 {\n  font-size: 14px;\n  line-height: 18px; }\n\n.ControlsBar-styles__text-regular___20d9H {\n  font-size: 17px;\n  line-height: 22px; }\n\n.ControlsBar-styles__text-large___IB11n {\n  font-size: 19px;\n  line-height: 24px; }\n\n.ControlsBar-styles__text-title3___3OKdb {\n  font-size: 24px;\n  line-height: 28px; }\n\n.ControlsBar-styles__text-title2___1yQlX {\n  font-size: 32px;\n  line-height: 26px; }\n\n.ControlsBar-styles__text-title1___1rLxv {\n  font-size: 44px;\n  line-height: 56px; }\n\n.ControlsBar-styles__controlsBar___2fY_Q {\n  z-index: 20;\n  padding: 8px;\n  border-bottom: #979797;\n  display: flex;\n  flex-direction: row-reverse;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  left: 0;\n  right: 0; }\n  .ControlsBar-styles__controlsBar___2fY_Q button {\n    margin: 4px; }\n\n.ControlsBar-styles__top___2YsmD {\n  top: 0; }\n\n.ControlsBar-styles__bottom___38X-N {\n  bottom: 0; }\n",""]),e.locals={"text-micro":"ControlsBar-styles__text-micro___2DQUC","text-small":"ControlsBar-styles__text-small___3nXq3","text-regular":"ControlsBar-styles__text-regular___20d9H","text-large":"ControlsBar-styles__text-large___IB11n","text-title3":"ControlsBar-styles__text-title3___3OKdb","text-title2":"ControlsBar-styles__text-title2___1yQlX","text-title1":"ControlsBar-styles__text-title1___1rLxv",controlsBar:"ControlsBar-styles__controlsBar___2fY_Q",top:"ControlsBar-styles__top___2YsmD",bottom:"ControlsBar-styles__bottom___38X-N"}},1590:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".GraphicsContext-styles__text-micro___PgfSw {\n  font-size: 8px;\n  line-height: 8px; }\n\n.GraphicsContext-styles__text-small___48ZcU {\n  font-size: 14px;\n  line-height: 18px; }\n\n.GraphicsContext-styles__text-regular___3tMz5 {\n  font-size: 17px;\n  line-height: 22px; }\n\n.GraphicsContext-styles__text-large___3UdpJ {\n  font-size: 19px;\n  line-height: 24px; }\n\n.GraphicsContext-styles__text-title3___3wK8w {\n  font-size: 24px;\n  line-height: 28px; }\n\n.GraphicsContext-styles__text-title2___3Bcmf {\n  font-size: 32px;\n  line-height: 26px; }\n\n.GraphicsContext-styles__text-title1___1Sycw {\n  font-size: 44px;\n  line-height: 56px; }\n\n.GraphicsContext-styles__canvas___2LNfD {\n  outline: none;\n  width: 100%;\n  /* let our container decide our size */\n  height: 100%;\n  display: block; }\n",""]),e.locals={"text-micro":"GraphicsContext-styles__text-micro___PgfSw","text-small":"GraphicsContext-styles__text-small___48ZcU","text-regular":"GraphicsContext-styles__text-regular___3tMz5","text-large":"GraphicsContext-styles__text-large___3UdpJ","text-title3":"GraphicsContext-styles__text-title3___3wK8w","text-title2":"GraphicsContext-styles__text-title2___3Bcmf","text-title1":"GraphicsContext-styles__text-title1___1Sycw",canvas:"GraphicsContext-styles__canvas___2LNfD"}},3588:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Round-styles__text-micro___3Y_Td {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Round-styles__text-small___2sdKn {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Round-styles__text-regular___13R4J {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Round-styles__text-large___3neoB {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Round-styles__text-title3___4oZTM {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Round-styles__text-title2___LdxRa {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Round-styles__text-title1___1-6Gy {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Round-styles__roundLabel___3BeA4 {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap; }\n\n.Round-styles__bpmLabel___1ECgH {\n  padding: 2px;\n  border-radius: 4px;\n  background: #abb2bf; }\n\n.Round-styles__layersControlsContainer___WwVHz {\n  margin-left: '-20px';\n  display: flex;\n  flex-direction: column-reverse; }\n\n.Round-styles__layersControlsContainer___WwVHz > div {\n  transform: none !important;\n  position: relative !important; }\n\n.Round-styles__layersControlsContainer___WwVHz > div > div {\n  display: flex;\n  transform: none !important;\n  position: relative !important; }\n",""]),e.locals={"text-micro":"Round-styles__text-micro___3Y_Td","text-small":"Round-styles__text-small___2sdKn","text-regular":"Round-styles__text-regular___13R4J","text-large":"Round-styles__text-large___3neoB","text-title3":"Round-styles__text-title3___4oZTM","text-title2":"Round-styles__text-title2___LdxRa","text-title1":"Round-styles__text-title1___1-6Gy",roundLabel:"Round-styles__roundLabel___3BeA4",bpmLabel:"Round-styles__bpmLabel___1ECgH",layersControlsContainer:"Round-styles__layersControlsContainer___WwVHz"}},3099:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".LayerControls-styles__text-micro___2FCzO {\n  font-size: 8px;\n  line-height: 8px; }\n\n.LayerControls-styles__text-small___2pQiP {\n  font-size: 14px;\n  line-height: 18px; }\n\n.LayerControls-styles__text-regular___3E2F7 {\n  font-size: 17px;\n  line-height: 22px; }\n\n.LayerControls-styles__text-large___3q4Vh {\n  font-size: 19px;\n  line-height: 24px; }\n\n.LayerControls-styles__text-title3___22uZ- {\n  font-size: 24px;\n  line-height: 28px; }\n\n.LayerControls-styles__text-title2___2Dmss {\n  font-size: 32px;\n  line-height: 26px; }\n\n.LayerControls-styles__text-title1___sF5JT {\n  font-size: 44px;\n  line-height: 56px; }\n\n.LayerControls-styles__layerControls___Odr3j {\n  display: flex;\n  direction: rtl;\n  align-items: center;\n  color: white;\n  font-size: 12px;\n  user-select: none;\n  /* don't let the text get selected */\n  text-shadow: -1px -1px 0 #000, 0 -1px 0 #000, 1px -1px 0 #000, 1px 0 0 #000, 1px 1px 0 #000, 0 1px 0 #000, -1px 1px 0 #000, -1px 0 0 #000;\n  margin: -12px 0 0 -12px;\n  width: calc(100% + 12px); }\n\n.LayerControls-styles__layerControls___Odr3j > div {\n  direction: ltr;\n  margin: 12px 0 0 12px; }\n\n.LayerControls-styles__patternLabelInput___32teX {\n  white-space: nowrap; }\n\n.LayerControls-styles__layerLabelInput___2wAkp {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap; }\n\n.LayerControls-styles__instrumentLabelContainer___zs7jk {\n  white-space: nowrap;\n  border-radius: 4px;\n  width: fit-content; }\n\n.LayerControls-styles__instrumentLabel___2TNWN {\n  cursor: pointer;\n  font-size: 12px;\n  text-align: center;\n  padding: 2px; }\n\n.LayerControls-styles__cannotEdit___IS5LC {\n  cursor: not-allowed; }\n",""]),e.locals={"text-micro":"LayerControls-styles__text-micro___2FCzO","text-small":"LayerControls-styles__text-small___2pQiP","text-regular":"LayerControls-styles__text-regular___3E2F7","text-large":"LayerControls-styles__text-large___3q4Vh","text-title3":"LayerControls-styles__text-title3___22uZ-","text-title2":"LayerControls-styles__text-title2___2Dmss","text-title1":"LayerControls-styles__text-title1___sF5JT",layerControls:"LayerControls-styles__layerControls___Odr3j",patternLabelInput:"LayerControls-styles__patternLabelInput___32teX",layerLabelInput:"LayerControls-styles__layerLabelInput___2wAkp",instrumentLabelContainer:"LayerControls-styles__instrumentLabelContainer___zs7jk",instrumentLabel:"LayerControls-styles__instrumentLabel___2TNWN",cannotEdit:"LayerControls-styles__cannotEdit___IS5LC"}},4464:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".LayerLine-styles__text-micro___3Awlv {\n  font-size: 8px;\n  line-height: 8px; }\n\n.LayerLine-styles__text-small___kqjf9 {\n  font-size: 14px;\n  line-height: 18px; }\n\n.LayerLine-styles__text-regular___2uU3v {\n  font-size: 17px;\n  line-height: 22px; }\n\n.LayerLine-styles__text-large___3ux4A {\n  font-size: 19px;\n  line-height: 24px; }\n\n.LayerLine-styles__text-title3___1psfx {\n  font-size: 24px;\n  line-height: 28px; }\n\n.LayerLine-styles__text-title2___11o_9 {\n  font-size: 32px;\n  line-height: 26px; }\n\n.LayerLine-styles__text-title1___3AeCs {\n  font-size: 44px;\n  line-height: 56px; }\n\n.LayerLine-styles__label___DbItJ {\n  position: relative;\n  color: white;\n  cursor: pointer;\n  /* change the cursor to a hand when over us */\n  font-size: large;\n  user-select: none;\n  /* don't let the text get selected */\n  text-shadow: -1px -1px 0 #000, 0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000; }\n",""]),e.locals={"text-micro":"LayerLine-styles__text-micro___3Awlv","text-small":"LayerLine-styles__text-small___kqjf9","text-regular":"LayerLine-styles__text-regular___2uU3v","text-large":"LayerLine-styles__text-large___3ux4A","text-title3":"LayerLine-styles__text-title3___1psfx","text-title2":"LayerLine-styles__text-title2___11o_9","text-title1":"LayerLine-styles__text-title1___3AeCs",label:"LayerLine-styles__label___DbItJ"}},4042:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".LayerMark-styles__text-micro___3uXH7 {\n  font-size: 8px;\n  line-height: 8px; }\n\n.LayerMark-styles__text-small___1EhlE {\n  font-size: 14px;\n  line-height: 18px; }\n\n.LayerMark-styles__text-regular___1HZ04 {\n  font-size: 17px;\n  line-height: 22px; }\n\n.LayerMark-styles__text-large___106S3 {\n  font-size: 19px;\n  line-height: 24px; }\n\n.LayerMark-styles__text-title3___ekn8U {\n  font-size: 24px;\n  line-height: 28px; }\n\n.LayerMark-styles__text-title2___2X7IG {\n  font-size: 32px;\n  line-height: 26px; }\n\n.LayerMark-styles__text-title1___2PHGG {\n  font-size: 44px;\n  line-height: 56px; }\n\n.LayerMark-styles__numberOfBeats___3PT8I {\n  color: white;\n  font-size: 12px;\n  white-space: nowrap;\n  text-shadow: -1px -1px 0 #000, 0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000; }\n\n.LayerMark-styles__cannotEdit___1sQWc {\n  cursor: not-allowed; }\n",""]),e.locals={"text-micro":"LayerMark-styles__text-micro___3uXH7","text-small":"LayerMark-styles__text-small___1EhlE","text-regular":"LayerMark-styles__text-regular___1HZ04","text-large":"LayerMark-styles__text-large___106S3","text-title3":"LayerMark-styles__text-title3___ekn8U","text-title2":"LayerMark-styles__text-title2___2X7IG","text-title1":"LayerMark-styles__text-title1___2PHGG",numberOfBeats:"LayerMark-styles__numberOfBeats___3PT8I",cannotEdit:"LayerMark-styles__cannotEdit___1sQWc"}},7391:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,'.Step-styles__text-micro___Fyozs {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Step-styles__text-small___27bEG {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Step-styles__text-regular___3j1Xn {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Step-styles__text-large___3nxt4 {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Step-styles__text-title3___jmxhE {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Step-styles__text-title2___3nRwd {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Step-styles__text-title1___1ltY5 {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Step-styles__noteLabel___1F12N {\n  cursor: pointer;\n  /* change the cursor to a hand when over us */\n  user-select: none;\n  /* don\'t let the text get selected */\n  text-shadow: -1px -1px 0 #000, 0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000; }\n\n.Step-styles__noteLabel___1F12N:hover {\n  color: #cc76f7; }\n\n.Step-styles__labelDisabled___2I1hR {\n  pointer-events: none; }\n\n.Step-styles__beatParameters___3ftHN {\n  pointer-events: none;\n  color: white;\n  background: #abb2bf;\n  border-top-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n  border-bottom-right-radius: 4px;\n  position: absolute;\n  white-space: nowrap;\n  font-size: 14px;\n  padding: 0 10px;\n  margin-left: 40px;\n  text-shadow: -1px -1px 0 #000, 0   -1px 0 #000, 1px -1px 0 #000, 1px  0   0 #000, 1px  1px 0 #000, 0    1px 0 #000, -1px  1px 0 #000, -1px  0   0 #000; }\n\n.Step-styles__beatParameters___3ftHN::after {\n  position: absolute;\n  top: 0;\n  left: 0;\n  content: "";\n  width: calc(100% + 6px);\n  transform: translate3d(-10px, 0, 0);\n  height: 1px;\n  background: #abb2bf; }\n\n.Step-styles__cannotEdit___2mjOg {\n  cursor: not-allowed; }\n\n.Step-styles__cannotEdit___2mjOg:hover {\n  color: white; }\n',""]),e.locals={"text-micro":"Step-styles__text-micro___Fyozs","text-small":"Step-styles__text-small___27bEG","text-regular":"Step-styles__text-regular___3j1Xn","text-large":"Step-styles__text-large___3nxt4","text-title3":"Step-styles__text-title3___jmxhE","text-title2":"Step-styles__text-title2___3nRwd","text-title1":"Step-styles__text-title1___1ltY5",noteLabel:"Step-styles__noteLabel___1F12N",labelDisabled:"Step-styles__labelDisabled___2I1hR",beatParameters:"Step-styles__beatParameters___3ftHN",cannotEdit:"Step-styles__cannotEdit___2mjOg"}},7074:(t,e,n)=>{(t.exports=n(1506)(!1)).push([t.id,"",""])},646:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".InstrumentSelect-styles__text-micro___3TDlL {\n  font-size: 8px;\n  line-height: 8px; }\n\n.InstrumentSelect-styles__text-small___3l0Ms {\n  font-size: 14px;\n  line-height: 18px; }\n\n.InstrumentSelect-styles__text-regular___3eF3S {\n  font-size: 17px;\n  line-height: 22px; }\n\n.InstrumentSelect-styles__text-large___3Fmk3 {\n  font-size: 19px;\n  line-height: 24px; }\n\n.InstrumentSelect-styles__text-title3___2lyu- {\n  font-size: 24px;\n  line-height: 28px; }\n\n.InstrumentSelect-styles__text-title2___3uJ7M {\n  font-size: 32px;\n  line-height: 26px; }\n\n.InstrumentSelect-styles__text-title1___11tkv {\n  font-size: 44px;\n  line-height: 56px; }\n\n.InstrumentSelect-styles__selectCobntainer___1m-QV {\n  background-color: #fefefe;\n  display: flex;\n  justify-content: space-between;\n  margin: 0 8px;\n  width: 400px;\n  border-radius: 4px; }\n\n.InstrumentSelect-styles__select___d4rYX {\n  width: 100px; }\n",""]),e.locals={"text-micro":"InstrumentSelect-styles__text-micro___3TDlL","text-small":"InstrumentSelect-styles__text-small___3l0Ms","text-regular":"InstrumentSelect-styles__text-regular___3eF3S","text-large":"InstrumentSelect-styles__text-large___3Fmk3","text-title3":"InstrumentSelect-styles__text-title3___2lyu-","text-title2":"InstrumentSelect-styles__text-title2___3uJ7M","text-title1":"InstrumentSelect-styles__text-title1___11tkv",selectCobntainer:"InstrumentSelect-styles__selectCobntainer___1m-QV",select:"InstrumentSelect-styles__select___d4rYX"}},8904:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Modal-styles__text-micro___1WHYu {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Modal-styles__text-small___2IQhI {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Modal-styles__text-regular___1Uf2h {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Modal-styles__text-large___3TG1p {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Modal-styles__text-title3___1Jk4K {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Modal-styles__text-title2___3PxN6 {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Modal-styles__text-title1___5-68R {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Modal-styles__modal___5W3wi {\n  z-index: 10000;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  overflow: auto;\n  background-color: black;\n  background-color: rgba(0, 0, 0, 0.4); }\n\n/* Modal Content */\n.Modal-styles__modalContent___3vN2y {\n  background-color: #fefefe;\n  display: flex;\n  justify-content: space-between;\n  align-items: baseline;\n  margin: auto;\n  padding: 20px;\n  border: 1px solid #888;\n  border-radius: 4px; }\n\n.Modal-styles__open___bqhXs {\n  display: flex; }\n\n.Modal-styles__closed___3PxEt {\n  display: none; }\n\n.Modal-styles__close___3vc6T {\n  color: #aaaaaa;\n  float: right;\n  font-size: 28px;\n  font-weight: bold; }\n\n.Modal-styles__close___3vc6T:hover,\n.Modal-styles__close___3vc6T:focus {\n  color: #000;\n  text-decoration: none;\n  cursor: pointer; }\n",""]),e.locals={"text-micro":"Modal-styles__text-micro___1WHYu","text-small":"Modal-styles__text-small___2IQhI","text-regular":"Modal-styles__text-regular___1Uf2h","text-large":"Modal-styles__text-large___3TG1p","text-title3":"Modal-styles__text-title3___1Jk4K","text-title2":"Modal-styles__text-title2___3PxN6","text-title1":"Modal-styles__text-title1___5-68R",modal:"Modal-styles__modal___5W3wi",modalContent:"Modal-styles__modalContent___3vN2y",open:"Modal-styles__open___bqhXs",closed:"Modal-styles__closed___3PxEt",close:"Modal-styles__close___3vc6T"}},1383:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Profile-styles__text-micro___20UwO {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Profile-styles__text-small___1-tAa {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Profile-styles__text-regular___3Q7J7 {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Profile-styles__text-large___h7A4Z {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Profile-styles__text-title3___2mhSR {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Profile-styles__text-title2___3_lY- {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Profile-styles__text-title1___2rpGy {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Profile-styles__controlsBar___1ryM4 {\n  padding: 8px;\n  border-bottom: #979797;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  position: absolute;\n  left: 0;\n  right: 0; }\n  .Profile-styles__controlsBar___1ryM4 button {\n    margin: 4px; }\n\n.Profile-styles__top___RrC2a {\n  top: 0; }\n\n.Profile-styles__bottom___NhQTq {\n  bottom: 0; }\n",""]),e.locals={"text-micro":"Profile-styles__text-micro___20UwO","text-small":"Profile-styles__text-small___1-tAa","text-regular":"Profile-styles__text-regular___3Q7J7","text-large":"Profile-styles__text-large___h7A4Z","text-title3":"Profile-styles__text-title3___2mhSR","text-title2":"Profile-styles__text-title2___3_lY-","text-title1":"Profile-styles__text-title1___2rpGy",controlsBar:"Profile-styles__controlsBar___1ryM4",top:"Profile-styles__top___RrC2a",bottom:"Profile-styles__bottom___NhQTq"}},2319:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".SessionRoute-styles__text-micro___3Rubj {\n  font-size: 8px;\n  line-height: 8px; }\n\n.SessionRoute-styles__text-small___gOBcz {\n  font-size: 14px;\n  line-height: 18px; }\n\n.SessionRoute-styles__text-regular___1hV1q {\n  font-size: 17px;\n  line-height: 22px; }\n\n.SessionRoute-styles__text-large___Xzd1I {\n  font-size: 19px;\n  line-height: 24px; }\n\n.SessionRoute-styles__text-title3___2xtWi {\n  font-size: 24px;\n  line-height: 28px; }\n\n.SessionRoute-styles__text-title2___1B-l1 {\n  font-size: 32px;\n  line-height: 26px; }\n\n.SessionRoute-styles__text-title1___2et6S {\n  font-size: 44px;\n  line-height: 56px; }\n\n.SessionRoute-styles__mainContainer___3wSKZ {\n  height: 100%;\n  position: relative; }\n\n.SessionRoute-styles__graphicsContext___2-vKB {\n  width: 100%;\n  height: 100%;\n  outline: none; }\n",""]),e.locals={"text-micro":"SessionRoute-styles__text-micro___3Rubj","text-small":"SessionRoute-styles__text-small___gOBcz","text-regular":"SessionRoute-styles__text-regular___1hV1q","text-large":"SessionRoute-styles__text-large___Xzd1I","text-title3":"SessionRoute-styles__text-title3___2xtWi","text-title2":"SessionRoute-styles__text-title2___1B-l1","text-title1":"SessionRoute-styles__text-title1___2et6S",mainContainer:"SessionRoute-styles__mainContainer___3wSKZ",graphicsContext:"SessionRoute-styles__graphicsContext___2-vKB"}},4183:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".SettingsPane-styles__text-micro___2_-DN {\n  font-size: 8px;\n  line-height: 8px; }\n\n.SettingsPane-styles__text-small___1NbrJ {\n  font-size: 14px;\n  line-height: 18px; }\n\n.SettingsPane-styles__text-regular___2MpyW {\n  font-size: 17px;\n  line-height: 22px; }\n\n.SettingsPane-styles__text-large___3vaKh {\n  font-size: 19px;\n  line-height: 24px; }\n\n.SettingsPane-styles__text-title3___3Cg2t {\n  font-size: 24px;\n  line-height: 28px; }\n\n.SettingsPane-styles__text-title2___2E0SM {\n  font-size: 32px;\n  line-height: 26px; }\n\n.SettingsPane-styles__text-title1___3JX3P {\n  font-size: 44px;\n  line-height: 56px; }\n\n.SettingsPane-styles__settingsPane___3IG5h {\n  z-index: 1000;\n  font-size: 14px;\n  position: absolute;\n  left: 0;\n  top: 36px;\n  background-color: rgba(250, 250, 250, 0.7);\n  padding: 16px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n  transform: translateX(-100%);\n  transition: transform 0.2s ease; }\n\n.SettingsPane-styles__settingsPaneActive___Zv3sU {\n  transform: translateX(0); }\n\n.SettingsPane-styles__roundLayers___3R7aU {\n  display: flex;\n  flex-direction: column-reverse; }\n\n.SettingsPane-styles__layerRow___pB5UE {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-content: center;\n  align-items: center;\n  padding: 4px 0; }\n\n.SettingsPane-styles__layerElementLong___1OeDg {\n  min-width: 50px;\n  margin: 0 4px;\n  width: 100px; }\n\n.SettingsPane-styles__layerElementShort___1WwOl {\n  min-width: 20px;\n  margin: 0 4px;\n  width: 50px; }\n\n.SettingsPane-styles__layerElementEqual___1TLoZ {\n  margin: 0 4px; }\n\n.SettingsPane-styles__layerElementSuperLong___2XfPs {\n  min-width: 100px;\n  margin: 0 4px;\n  width: 150px; }\n\n.SettingsPane-styles__addLayerButton___u-IOC {\n  width: fit-content;\n  align-self: flex-end;\n  margin-top: 16px; }\n\n.SettingsPane-styles__cameraSelect___32npw {\n  width: 200px; }\n",""]),e.locals={"text-micro":"SettingsPane-styles__text-micro___2_-DN","text-small":"SettingsPane-styles__text-small___1NbrJ","text-regular":"SettingsPane-styles__text-regular___2MpyW","text-large":"SettingsPane-styles__text-large___3vaKh","text-title3":"SettingsPane-styles__text-title3___3Cg2t","text-title2":"SettingsPane-styles__text-title2___2E0SM","text-title1":"SettingsPane-styles__text-title1___3JX3P",settingsPane:"SettingsPane-styles__settingsPane___3IG5h",settingsPaneActive:"SettingsPane-styles__settingsPaneActive___Zv3sU",roundLayers:"SettingsPane-styles__roundLayers___3R7aU",layerRow:"SettingsPane-styles__layerRow___pB5UE",layerElementLong:"SettingsPane-styles__layerElementLong___1OeDg",layerElementShort:"SettingsPane-styles__layerElementShort___1WwOl",layerElementEqual:"SettingsPane-styles__layerElementEqual___1TLoZ",layerElementSuperLong:"SettingsPane-styles__layerElementSuperLong___2XfPs",addLayerButton:"SettingsPane-styles__addLayerButton___u-IOC",cameraSelect:"SettingsPane-styles__cameraSelect___32npw"}},6224:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Footer-styles__text-micro___AP7x3 {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Footer-styles__text-small___3raPo {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Footer-styles__text-regular___3WrCp {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Footer-styles__text-large___1pur6 {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Footer-styles__text-title3___2dUsU {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Footer-styles__text-title2___MCHvk {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Footer-styles__text-title1___2tRnB {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Footer-styles__footer___3P3Fw {\n  display: flex;\n  flex-direction: column;\n  color: #616161;\n  margin-top: auto;\n  text-align: center;\n  padding: 10px; }\n\n.Footer-styles__addRoundBtn___2J5JZ {\n  margin: 8px 8px 8px 8px;\n  font-size: 20px;\n  color: #616161;\n  border: 1px solid #616161;\n  transition: 0.3s;\n  white-space: nowrap; }\n\n.Footer-styles__addRoundBtn___2J5JZ:hover {\n  color: #212121; }\n\n.Footer-styles__userInfo___3fdqR {\n  display: flex;\n  align-items: baseline;\n  justify-content: center; }\n  .Footer-styles__userInfo___3fdqR button {\n    font-size: 14px; }\n",""]),e.locals={"text-micro":"Footer-styles__text-micro___AP7x3","text-small":"Footer-styles__text-small___3raPo","text-regular":"Footer-styles__text-regular___3WrCp","text-large":"Footer-styles__text-large___1pur6","text-title3":"Footer-styles__text-title3___2dUsU","text-title2":"Footer-styles__text-title2___MCHvk","text-title1":"Footer-styles__text-title1___2tRnB",footer:"Footer-styles__footer___3P3Fw",addRoundBtn:"Footer-styles__addRoundBtn___2J5JZ",userInfo:"Footer-styles__userInfo___3fdqR"}},6263:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,".Sidebar-styles__text-micro___JFZyW {\n  font-size: 8px;\n  line-height: 8px; }\n\n.Sidebar-styles__text-small___3Arxs {\n  font-size: 14px;\n  line-height: 18px; }\n\n.Sidebar-styles__text-regular___2nJOb {\n  font-size: 17px;\n  line-height: 22px; }\n\n.Sidebar-styles__text-large___aInHz {\n  font-size: 19px;\n  line-height: 24px; }\n\n.Sidebar-styles__text-title3___1bxRj {\n  font-size: 24px;\n  line-height: 28px; }\n\n.Sidebar-styles__text-title2___AizyR {\n  font-size: 32px;\n  line-height: 26px; }\n\n.Sidebar-styles__text-title1___1Smfm {\n  font-size: 44px;\n  line-height: 56px; }\n\n.Sidebar-styles__sidenav___1LGjl {\n  z-index: 100000000;\n  height: 100%;\n  width: 0;\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  top: 0;\n  background-color: #FAFAFA;\n  overflow-x: hidden;\n  transition: 0.5s; }\n  .Sidebar-styles__sidenav___1LGjl a {\n    cursor: pointer;\n    padding: 8px 8px 8px 32px;\n    text-decoration: none;\n    font-size: 18px;\n    color: #616161;\n    transition: 0.3s;\n    display: flex;\n    white-space: nowrap;\n    justify-content: space-between;\n    flex-direction: row; }\n\n.Sidebar-styles__open___1y-NH {\n  width: 250px;\n  box-shadow: 1px 1px 20px 5px #000; }\n\n.Sidebar-styles__header___2ZOoh {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  font-weight: bold; }\n\n.Sidebar-styles__headerText___CeH2o {\n  color: #212121 !important;\n  padding: 8px !important;\n  cursor: initial !important; }\n\n.Sidebar-styles__sidenav___1LGjl a:hover {\n  color: #212121; }\n\n.Sidebar-styles__unselected___1fhV8 {\n  border: 1px solid #FAFAFA; }\n\n.Sidebar-styles__selected___cgqV4 {\n  border: 1px solid #616161; }\n\n.Sidebar-styles__closeBtn___3TcDM {\n  cursor: pointer;\n  font-size: 36px;\n  text-align: end; }\n\n.Sidebar-styles__removeBtn___3RrwJ {\n  cursor: pointer;\n  top: 0;\n  right: 25px;\n  float: right; }\n",""]),e.locals={"text-micro":"Sidebar-styles__text-micro___JFZyW","text-small":"Sidebar-styles__text-small___3Arxs","text-regular":"Sidebar-styles__text-regular___2nJOb","text-large":"Sidebar-styles__text-large___aInHz","text-title3":"Sidebar-styles__text-title3___1bxRj","text-title2":"Sidebar-styles__text-title2___AizyR","text-title1":"Sidebar-styles__text-title1___1Smfm",sidenav:"Sidebar-styles__sidenav___1LGjl",open:"Sidebar-styles__open___1y-NH",header:"Sidebar-styles__header___2ZOoh",headerText:"Sidebar-styles__headerText___CeH2o",unselected:"Sidebar-styles__unselected___1fhV8",selected:"Sidebar-styles__selected___cgqV4",closeBtn:"Sidebar-styles__closeBtn___3TcDM",removeBtn:"Sidebar-styles__removeBtn___3RrwJ"}},8512:(t,e,n)=>{(e=t.exports=n(1506)(!1)).push([t.id,'.baseStyles__text-micro___3ylt4 {\n  font-size: 8px;\n  line-height: 8px; }\n\n.baseStyles__text-small___17-fg {\n  font-size: 14px;\n  line-height: 18px; }\n\n.baseStyles__text-regular___1XmsS {\n  font-size: 17px;\n  line-height: 22px; }\n\n.baseStyles__text-large___3Y5Bw {\n  font-size: 19px;\n  line-height: 24px; }\n\n.baseStyles__text-title3___5JIYy {\n  font-size: 24px;\n  line-height: 28px; }\n\n.baseStyles__text-title2___2oD2Q {\n  font-size: 32px;\n  line-height: 26px; }\n\n.baseStyles__text-title1___2L3sG {\n  font-size: 44px;\n  line-height: 56px; }\n\nhtml, body {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  font-family: "Nunito", "HelveticaNeue-Light", "Helvetica Neue Light", "Helvetica Neue", Helvetica, Arial, sans-serif;\n  font-size: 18px;\n  background-color: #282c34;\n  overflow: hidden; }\n\nh1 {\n  margin: 18px 0;\n  padding: 0;\n  text-align: center;\n  font-size: 1.3em;\n  font-weight: 400;\n  font-style: italic; }\n\np {\n  margin: 0;\n  padding: 0; }\n\nbutton {\n  outline: unset;\n  background: unset;\n  cursor: pointer;\n  border: 1px solid white;\n  color: white;\n  border-radius: 4px;\n  padding: 4px; }\n\na:link {\n  color: inherit; }\n\na:active {\n  color: inherit; }\n\na:visited {\n  color: inherit; }\n\na:hover {\n  color: inherit; }\n',""]),e.locals={"text-micro":"baseStyles__text-micro___3ylt4","text-small":"baseStyles__text-small___17-fg","text-regular":"baseStyles__text-regular___1XmsS","text-large":"baseStyles__text-large___3Y5Bw","text-title3":"baseStyles__text-title3___5JIYy","text-title2":"baseStyles__text-title2___2oD2Q","text-title1":"baseStyles__text-title1___2L3sG"}},1506:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r=t[1]||"",i=t[3];if(!i)return r;if(e&&"function"==typeof btoa){var o=(n=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */"),a=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[r].concat(a).concat([o]).join("\n")}return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var r={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(r[o]=!0)}for(i=0;i<t.length;i++){var a=t[i];"number"==typeof a[0]&&r[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},6415:t=>{function e(t,e,n){var r,i,o,a,s;function u(){var l=Date.now()-a;l<e&&l>=0?r=setTimeout(u,e-l):(r=null,n||(s=t.apply(o,i),o=i=null))}null==e&&(e=100);var l=function(){o=this,i=arguments,a=Date.now();var l=n&&!r;return r||(r=setTimeout(u,e)),l&&(s=t.apply(o,i),o=i=null),s};return l.clear=function(){r&&(clearTimeout(r),r=null)},l.flush=function(){r&&(s=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},l}e.debounce=e,t.exports=e},9832:function(t,e,n){var r,i,o;i=[t,e,n(1932)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function t(e,o){if(e===o||!(0,n.isObject)(e)||!(0,n.isObject)(o))return{};var a=(0,n.properObject)(e),s=(0,n.properObject)(o);return Object.keys(s).reduce((function(e,o){if(a.hasOwnProperty(o)){var u=t(a[o],s[o]);return(0,n.isObject)(u)&&(0,n.isEmpty)(u)?e:i({},e,r({},o,u))}return i({},e,r({},o,s[o]))}),{})},t.exports=e.default})?r.apply(e,i):r)||(t.exports=o)},536:function(t,e,n){var r,i,o;i=[t,e,n(1932)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function t(e,o){if(e===o||!(0,n.isObject)(e)||!(0,n.isObject)(o))return{};var a=(0,n.properObject)(e),s=(0,n.properObject)(o);return Object.keys(a).reduce((function(e,o){if(s.hasOwnProperty(o)){var u=t(a[o],s[o]);return(0,n.isObject)(u)&&(0,n.isEmpty)(u)?e:i({},e,r({},o,u))}return i({},e,r({},o,void 0))}),{})},t.exports=e.default})?r.apply(e,i):r)||(t.exports=o)},9096:function(t,e,n){var r,i,o;i=[t,e,n(9832),n(536),n(9855)],void 0===(o="function"==typeof(r=function(t,e,n,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=u(n),a=u(r),s=u(i);function u(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return{added:(0,o.default)(t,e),deleted:(0,a.default)(t,e),updated:(0,s.default)(t,e)}},t.exports=e.default})?r.apply(e,i):r)||(t.exports=o)},7576:function(t,e,n){var r,i,o;i=[t,e,n(1932)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function t(e,o){if(e===o)return{};if(!(0,n.isObject)(e)||!(0,n.isObject)(o))return o;var a=(0,n.properObject)(e),s=(0,n.properObject)(o),u=Object.keys(a).reduce((function(t,e){return s.hasOwnProperty(e)?t:i({},t,r({},e,void 0))}),{});return(0,n.isDate)(a)||(0,n.isDate)(s)?a.valueOf()==s.valueOf()?{}:s:Object.keys(s).reduce((function(e,o){if(!a.hasOwnProperty(o))return i({},e,r({},o,s[o]));var u=t(a[o],s[o]);return(0,n.isObject)(u)&&(0,n.isEmpty)(u)&&!(0,n.isDate)(u)?e:i({},e,r({},o,u))}),u)},t.exports=e.default})?r.apply(e,i):r)||(t.exports=o)},3159:function(t,e,n){var r,i,o;i=[e,n(7576),n(9832),n(536),n(9855),n(9096)],void 0===(o="function"==typeof(r=function(t,e,n,r,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.detailedDiff=t.updatedDiff=t.deletedDiff=t.diff=t.addedDiff=void 0;var a=h(e),s=h(n),u=h(r),l=h(i),c=h(o);function h(t){return t&&t.__esModule?t:{default:t}}t.addedDiff=s.default,t.diff=a.default,t.deletedDiff=u.default,t.updatedDiff=l.default,t.detailedDiff=c.default})?r.apply(e,i):r)||(t.exports=o)},9855:function(t,e,n){var r,i,o;i=[t,e,n(1932)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.default=function t(e,i){if(e===i)return{};if(!(0,n.isObject)(e)||!(0,n.isObject)(i))return i;var o=(0,n.properObject)(e),a=(0,n.properObject)(i);return(0,n.isDate)(o)||(0,n.isDate)(a)?o.valueOf()==a.valueOf()?{}:a:Object.keys(a).reduce((function(e,i){if(o.hasOwnProperty(i)){var s=t(o[i],a[i]);return(0,n.isObject)(s)&&(0,n.isEmpty)(s)&&!(0,n.isDate)(s)?e:r({},e,function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},i,s))}return e}),{})},t.exports=e.default})?r.apply(e,i):r)||(t.exports=o)},1932:function(t,e){var n,r;void 0===(r="function"==typeof(n=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=(t.isDate=function(t){return t instanceof Date},t.isEmpty=function(t){return 0===Object.keys(t).length},t.isObject=function(t){return null!=t&&"object"===(void 0===t?"undefined":n(t))});t.properObject=function(t){return r(t)&&!t.hasOwnProperty?e({},t):t}})?n.apply(e,[e]):n)||(t.exports=r)},7559:(t,e)=>{"use strict";var n=/^[-!#$%&'*+\/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/;e.validate=function(t){if(!t)return!1;if(t.length>254)return!1;if(!n.test(t))return!1;var e=t.split("@");return!(e[0].length>64||e[1].split(".").some((function(t){return t.length>63})))}},3497:(t,e,n)=>{"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(n(2583));i.default.registerVersion("firebase","7.24.0","app"),t.exports=i.default},1272:(t,e,n)=>{var r;!function(i,o,a,s){"use strict";var u,l=["","webkit","Moz","MS","ms","o"],c=o.createElement("div"),h=Math.round,f=Math.abs,p=Date.now;function d(t,e,n){return setTimeout(x(t,n),e)}function m(t,e,n){return!!Array.isArray(t)&&(v(t,n[e],n),!0)}function v(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);else if(t.length!==s)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function g(t,e,n){var r="DEPRECATED METHOD: "+e+"\n"+n+" AT \n";return function(){var e=new Error("get-stack-trace"),n=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",o=i.console&&(i.console.warn||i.console.log);return o&&o.call(i.console,r,n),t.apply(this,arguments)}}u="function"!=typeof Object.assign?function(t){if(t===s||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!==s&&null!==r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i])}return e}:Object.assign;var y=g((function(t,e,n){for(var r=Object.keys(e),i=0;i<r.length;)(!n||n&&t[r[i]]===s)&&(t[r[i]]=e[r[i]]),i++;return t}),"extend","Use `assign`."),b=g((function(t,e){return y(t,e,!0)}),"merge","Use `assign`.");function _(t,e,n){var r,i=e.prototype;(r=t.prototype=Object.create(i)).constructor=t,r._super=i,n&&u(r,n)}function x(t,e){return function(){return t.apply(e,arguments)}}function w(t,e){return"function"==typeof t?t.apply(e&&e[0]||s,e):t}function E(t,e){return t===s?e:t}function S(t,e,n){v(C(e),(function(e){t.addEventListener(e,n,!1)}))}function T(t,e,n){v(C(e),(function(e){t.removeEventListener(e,n,!1)}))}function A(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function M(t,e){return t.indexOf(e)>-1}function C(t){return t.trim().split(/\s+/g)}function O(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var r=0;r<t.length;){if(n&&t[r][n]==e||!n&&t[r]===e)return r;r++}return-1}function P(t){return Array.prototype.slice.call(t,0)}function k(t,e,n){for(var r=[],i=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];O(i,a)<0&&r.push(t[o]),i[o]=a,o++}return n&&(r=e?r.sort((function(t,n){return t[e]>n[e]})):r.sort()),r}function I(t,e){for(var n,r,i=e[0].toUpperCase()+e.slice(1),o=0;o<l.length;){if((r=(n=l[o])?n+i:e)in t)return r;o++}return s}var L=1;function R(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||i}var D="ontouchstart"in i,N=I(i,"PointerEvent")!==s,F=D&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),j="touch",U="mouse",z=["x","y"],B=["clientX","clientY"];function V(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){w(t.options.enable,[t])&&n.handler(e)},this.init()}function H(t,e,n){var r=n.pointers.length,i=n.changedPointers.length,o=1&e&&r-i==0,a=12&e&&r-i==0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,function(t,e){var n=t.session,r=e.pointers,i=r.length;n.firstInput||(n.firstInput=G(e)),i>1&&!n.firstMultiple?n.firstMultiple=G(e):1===i&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,u=a?a.center:o.center,l=e.center=W(r);e.timeStamp=p(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=Q(u,l),e.distance=Y(u,l),function(t,e){var n=e.center,r=t.offsetDelta||{},i=t.prevDelta||{},o=t.prevInput||{};1!==e.eventType&&4!==o.eventType||(i=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},r=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=i.x+(n.x-r.x),e.deltaY=i.y+(n.y-r.y)}(n,e),e.offsetDirection=X(e.deltaX,e.deltaY);var c,h,d=q(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=d.x,e.overallVelocityY=d.y,e.overallVelocity=f(d.x)>f(d.y)?d.x:d.y,e.scale=a?(c=a.pointers,Y((h=r)[0],h[1],B)/Y(c[0],c[1],B)):1,e.rotation=a?function(t,e){return Q(e[1],e[0],B)+Q(t[1],t[0],B)}(a.pointers,r):0,e.maxPointers=n.prevInput?e.pointers.length>n.prevInput.maxPointers?e.pointers.length:n.prevInput.maxPointers:e.pointers.length,function(t,e){var n,r,i,o,a=t.lastInterval||e,u=e.timeStamp-a.timeStamp;if(8!=e.eventType&&(u>25||a.velocity===s)){var l=e.deltaX-a.deltaX,c=e.deltaY-a.deltaY,h=q(u,l,c);r=h.x,i=h.y,n=f(h.x)>f(h.y)?h.x:h.y,o=X(l,c),t.lastInterval=e}else n=a.velocity,r=a.velocityX,i=a.velocityY,o=a.direction;e.velocity=n,e.velocityX=r,e.velocityY=i,e.direction=o}(n,e);var m=t.element;A(e.srcEvent.target,m)&&(m=e.srcEvent.target),e.target=m}(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function G(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:h(t.pointers[n].clientX),clientY:h(t.pointers[n].clientY)},n++;return{timeStamp:p(),pointers:e,center:W(e),deltaX:t.deltaX,deltaY:t.deltaY}}function W(t){var e=t.length;if(1===e)return{x:h(t[0].clientX),y:h(t[0].clientY)};for(var n=0,r=0,i=0;i<e;)n+=t[i].clientX,r+=t[i].clientY,i++;return{x:h(n/e),y:h(r/e)}}function q(t,e,n){return{x:e/t||0,y:n/t||0}}function X(t,e){return t===e?1:f(t)>=f(e)?t<0?2:4:e<0?8:16}function Y(t,e,n){n||(n=z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return Math.sqrt(r*r+i*i)}function Q(t,e,n){n||(n=z);var r=e[n[0]]-t[n[0]],i=e[n[1]]-t[n[1]];return 180*Math.atan2(i,r)/Math.PI}V.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(R(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(R(this.element),this.evWin,this.domHandler)}};var Z={mousedown:1,mousemove:2,mouseup:4},K="mousedown",$="mousemove mouseup";function J(){this.evEl=K,this.evWin=$,this.pressed=!1,V.apply(this,arguments)}_(J,V,{handler:function(t){var e=Z[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:U,srcEvent:t}))}});var tt={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},et={2:j,3:"pen",4:U,5:"kinect"},nt="pointerdown",rt="pointermove pointerup pointercancel";function it(){this.evEl=nt,this.evWin=rt,V.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}i.MSPointerEvent&&!i.PointerEvent&&(nt="MSPointerDown",rt="MSPointerMove MSPointerUp MSPointerCancel"),_(it,V,{handler:function(t){var e=this.store,n=!1,r=t.type.toLowerCase().replace("ms",""),i=tt[r],o=et[t.pointerType]||t.pointerType,a=o==j,s=O(e,t.pointerId,"pointerId");1&i&&(0===t.button||a)?s<0&&(e.push(t),s=e.length-1):12&i&&(n=!0),s<0||(e[s]=t,this.callback(this.manager,i,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var ot={touchstart:1,touchmove:2,touchend:4,touchcancel:8},at="touchstart",st="touchstart touchmove touchend touchcancel";function ut(){this.evTarget=at,this.evWin=st,this.started=!1,V.apply(this,arguments)}function lt(t,e){var n=P(t.touches),r=P(t.changedTouches);return 12&e&&(n=k(n.concat(r),"identifier",!0)),[n,r]}_(ut,V,{handler:function(t){var e=ot[t.type];if(1===e&&(this.started=!0),this.started){var n=lt.call(this,t,e);12&e&&n[0].length-n[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}});var ct={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ht="touchstart touchmove touchend touchcancel";function ft(){this.evTarget=ht,this.targetIds={},V.apply(this,arguments)}function pt(t,e){var n=P(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var i,o,a=P(t.changedTouches),s=[],u=this.target;if(o=n.filter((function(t){return A(t.target,u)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<a.length;)r[a[i].identifier]&&s.push(a[i]),12&e&&delete r[a[i].identifier],i++;return s.length?[k(o.concat(s),"identifier",!0),s]:void 0}function dt(){V.apply(this,arguments);var t=x(this.handler,this);this.touch=new ft(this.manager,t),this.mouse=new J(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function mt(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,vt.call(this,e)):12&t&&vt.call(this,e)}function vt(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var n={x:e.clientX,y:e.clientY};this.lastTouches.push(n);var r=this.lastTouches;setTimeout((function(){var t=r.indexOf(n);t>-1&&r.splice(t,1)}),2500)}}function gt(t){for(var e=t.srcEvent.clientX,n=t.srcEvent.clientY,r=0;r<this.lastTouches.length;r++){var i=this.lastTouches[r],o=Math.abs(e-i.x),a=Math.abs(n-i.y);if(o<=25&&a<=25)return!0}return!1}_(ft,V,{handler:function(t){var e=ct[t.type],n=pt.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:j,srcEvent:t})}}),_(dt,V,{handler:function(t,e,n){var r=n.pointerType==j,i=n.pointerType==U;if(!(i&&n.sourceCapabilities&&n.sourceCapabilities.firesTouchEvents)){if(r)mt.call(this,e,n);else if(i&&gt.call(this,n))return;this.callback(t,e,n)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var yt=I(c.style,"touchAction"),bt=yt!==s,_t="compute",xt="auto",wt="manipulation",Et="none",St="pan-x",Tt="pan-y",At=function(){if(!bt)return!1;var t={},e=i.CSS&&i.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(n){t[n]=!e||i.CSS.supports("touch-action",n)})),t}();function Mt(t,e){this.manager=t,this.set(e)}Mt.prototype={set:function(t){t==_t&&(t=this.compute()),bt&&this.manager.element.style&&At[t]&&(this.manager.element.style[yt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){w(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(M(t,Et))return Et;var e=M(t,St),n=M(t,Tt);return e&&n?Et:e||n?e?St:Tt:M(t,wt)?wt:xt}(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var r=this.actions,i=M(r,Et)&&!At.none,o=M(r,Tt)&&!At["pan-y"],a=M(r,St)&&!At["pan-x"];if(i){var s=1===t.pointers.length,u=t.distance<2,l=t.deltaTime<250;if(s&&u&&l)return}if(!a||!o)return i||o&&6&n||a&&24&n?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var Ct=32;function Ot(t){this.options=u({},this.defaults,t||{}),this.id=L++,this.manager=null,this.options.enable=E(this.options.enable,!0),this.state=1,this.simultaneous={},this.requireFail=[]}function Pt(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}function kt(t){return 16==t?"down":8==t?"up":2==t?"left":4==t?"right":""}function It(t,e){var n=e.manager;return n?n.get(t):t}function Lt(){Ot.apply(this,arguments)}function Rt(){Lt.apply(this,arguments),this.pX=null,this.pY=null}function Dt(){Lt.apply(this,arguments)}function Nt(){Ot.apply(this,arguments),this._timer=null,this._input=null}function Ft(){Lt.apply(this,arguments)}function jt(){Lt.apply(this,arguments)}function Ut(){Ot.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function zt(t,e){return(e=e||{}).recognizers=E(e.recognizers,zt.defaults.preset),new Bt(t,e)}function Bt(t,e){this.options=u({},zt.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(N?it:F?ft:D?dt:J))(this,H),this.touchAction=new Mt(this,this.options.touchAction),Vt(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Vt(t,e){var n,r=t.element;r.style&&(v(t.options.cssProps,(function(i,o){n=I(r.style,o),e?(t.oldCssProps[n]=r.style[n],r.style[n]=i):r.style[n]=t.oldCssProps[n]||""})),e||(t.oldCssProps={}))}Ot.prototype={defaults:{},set:function(t){return u(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=It(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=It(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return-1===O(e,t=It(t,this))&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=It(t,this);var e=O(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,n=this.state;function r(n){e.manager.emit(n,t)}n<8&&r(e.options.event+Pt(n)),r(e.options.event),t.additionalEvent&&r(t.additionalEvent),n>=8&&r(e.options.event+Pt(n))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=Ct},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},recognize:function(t){var e=u({},t);if(!w(this.options.enable,[this,e]))return this.reset(),void(this.state=Ct);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},_(Lt,Ot,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,r=6&e,i=this.attrTest(t);return r&&(8&n||!i)?16|e:r||i?4&n?8|e:2&e?4|e:2:Ct}}),_(Rt,Lt,{defaults:{event:"pan",threshold:10,pointers:1,direction:30},getTouchAction:function(){var t=this.options.direction,e=[];return 6&t&&e.push(Tt),24&t&&e.push(St),e},directionTest:function(t){var e=this.options,n=!0,r=t.distance,i=t.direction,o=t.deltaX,a=t.deltaY;return i&e.direction||(6&e.direction?(i=0===o?1:o<0?2:4,n=o!=this.pX,r=Math.abs(t.deltaX)):(i=0===a?1:a<0?8:16,n=a!=this.pY,r=Math.abs(t.deltaY))),t.direction=i,n&&r>e.threshold&&i&e.direction},attrTest:function(t){return Lt.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=kt(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),_(Dt,Lt,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||2&this.state)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),_(Nt,Ot,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[xt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime>e.time;if(this._input=t,!r||!n||12&t.eventType&&!i)this.reset();else if(1&t.eventType)this.reset(),this._timer=d((function(){this.state=8,this.tryEmit()}),e.time,this);else if(4&t.eventType)return 8;return Ct},reset:function(){clearTimeout(this._timer)},emit:function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}}),_(Ft,Lt,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Et]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||2&this.state)}}),_(jt,Lt,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},getTouchAction:function(){return Rt.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return 30&n?e=t.overallVelocity:6&n?e=t.overallVelocityX:24&n&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&n&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&f(e)>this.options.velocity&&4&t.eventType},emit:function(t){var e=kt(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),_(Ut,Ot,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[wt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,r=t.distance<e.threshold,i=t.deltaTime<e.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(r&&i&&n){if(4!=t.eventType)return this.failTimeout();var o=!this.pTime||t.timeStamp-this.pTime<e.interval,a=!this.pCenter||Y(this.pCenter,t.center)<e.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&o?this.count+=1:this.count=1,this._input=t,0==this.count%e.taps)return this.hasRequireFailures()?(this._timer=d((function(){this.state=8,this.tryEmit()}),e.interval,this),2):8}return Ct},failTimeout:function(){return this._timer=d((function(){this.state=Ct}),this.options.interval,this),Ct},reset:function(){clearTimeout(this._timer)},emit:function(){8==this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),zt.VERSION="2.0.7",zt.defaults={domEvents:!1,touchAction:_t,enable:!0,inputTarget:null,inputClass:null,preset:[[Ft,{enable:!1}],[Dt,{enable:!1},["rotate"]],[jt,{direction:6}],[Rt,{direction:6},["swipe"]],[Ut],[Ut,{event:"doubletap",taps:2},["tap"]],[Nt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Bt.prototype={set:function(t){return u(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?2:1},recognize:function(t){var e=this.session;if(!e.stopped){var n;this.touchAction.preventDefaults(t);var r=this.recognizers,i=e.curRecognizer;(!i||i&&8&i.state)&&(i=e.curRecognizer=null);for(var o=0;o<r.length;)n=r[o],2===e.stopped||i&&n!=i&&!n.canRecognizeWith(i)?n.reset():n.recognize(t),!i&&14&n.state&&(i=e.curRecognizer=n),o++}},get:function(t){if(t instanceof Ot)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t)){var e=this.recognizers,n=O(e,t);-1!==n&&(e.splice(n,1),this.touchAction.update())}return this},on:function(t,e){if(t!==s&&e!==s){var n=this.handlers;return v(C(t),(function(t){n[t]=n[t]||[],n[t].push(e)})),this}},off:function(t,e){if(t!==s){var n=this.handlers;return v(C(t),(function(t){e?n[t]&&n[t].splice(O(n[t],e),1):delete n[t]})),this}},emit:function(t,e){this.options.domEvents&&function(t,e){var n=o.createEvent("Event");n.initEvent(t,!0,!0),n.gesture=e,e.target.dispatchEvent(n)}(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var r=0;r<n.length;)n[r](e),r++}},destroy:function(){this.element&&Vt(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},u(zt,{INPUT_START:1,INPUT_MOVE:2,INPUT_END:4,INPUT_CANCEL:8,STATE_POSSIBLE:1,STATE_BEGAN:2,STATE_CHANGED:4,STATE_ENDED:8,STATE_RECOGNIZED:8,STATE_CANCELLED:16,STATE_FAILED:Ct,DIRECTION_NONE:1,DIRECTION_LEFT:2,DIRECTION_RIGHT:4,DIRECTION_UP:8,DIRECTION_DOWN:16,DIRECTION_HORIZONTAL:6,DIRECTION_VERTICAL:24,DIRECTION_ALL:30,Manager:Bt,Input:V,TouchAction:Mt,TouchInput:ft,MouseInput:J,PointerEventInput:it,TouchMouseInput:dt,SingleTouchInput:ut,Recognizer:Ot,AttrRecognizer:Lt,Tap:Ut,Pan:Rt,Swipe:jt,Pinch:Dt,Rotate:Ft,Press:Nt,on:S,off:T,each:v,merge:b,extend:y,assign:u,inherit:_,bindFn:x,prefixed:I}),(void 0!==i?i:"undefined"!=typeof self?self:{}).Hammer=zt,(r=function(){return zt}.call(e,n,e,t))===s||(t.exports=r)}(window,document)},5839:(t,e,n)=>{"use strict";var r=n(9185),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function u(t){return r.isMemo(t)?a:s[t.$$typeof]||i}s[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[r.Memo]=a;var l=Object.defineProperty,c=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,f=Object.getOwnPropertyDescriptor,p=Object.getPrototypeOf,d=Object.prototype;t.exports=function t(e,n,r){if("string"!=typeof n){if(d){var i=p(n);i&&i!==d&&t(e,i,r)}var a=c(n);h&&(a=a.concat(h(n)));for(var s=u(e),m=u(n),v=0;v<a.length;++v){var g=a[v];if(!(o[g]||r&&r[g]||m&&m[g]||s&&s[g])){var y=f(n,g);try{l(e,g,y)}catch(t){}}}}return e}},8101:(t,e)=>{"use strict";function n(t){return"object"!=typeof t||"toString"in t?t:Object.prototype.toString.call(t).slice(8,-1)}Object.defineProperty(e,"__esModule",{value:!0});var r="object"==typeof process&&!0;function i(t,e){if(!t){if(r)throw new Error("Invariant failed");throw new Error(e())}}e.invariant=i;var o=Object.prototype.hasOwnProperty,a=Array.prototype.splice,s=Object.prototype.toString;function u(t){return s.call(t).slice(8,-1)}var l=Object.assign||function(t,e){return c(e).forEach((function(n){o.call(e,n)&&(t[n]=e[n])})),t},c="function"==typeof Object.getOwnPropertySymbols?function(t){return Object.keys(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.keys(t)};function h(t){return Array.isArray(t)?l(t.constructor(t.length),t):"Map"===u(t)?new Map(t):"Set"===u(t)?new Set(t):t&&"object"==typeof t?l(Object.create(Object.getPrototypeOf(t)),t):t}var f=function(){function t(){this.commands=l({},p),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(t,e){return t===e},this.update.newContext=function(){return(new t).update}}return Object.defineProperty(t.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(t){this.update.isEquals=t},enumerable:!0,configurable:!0}),t.prototype.extend=function(t,e){this.commands[t]=e},t.prototype.update=function(t,e){var n=this,r="function"==typeof e?{$apply:e}:e;Array.isArray(t)&&Array.isArray(r)||i(!Array.isArray(r),(function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."})),i("object"==typeof r&&null!==r,(function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(n.commands).join(", ")+"."}));var a=t;return c(r).forEach((function(e){if(o.call(n.commands,e)){var i=t===a;a=n.commands[e](r[e],a,r,t),i&&n.isEquals(a,t)&&(a=t)}else{var s="Map"===u(t)?n.update(t.get(e),r[e]):n.update(t[e],r[e]),l="Map"===u(a)?a.get(e):a[e];n.isEquals(s,l)&&(void 0!==s||o.call(t,e))||(a===t&&(a=h(t)),"Map"===u(a)?a.set(e,s):a[e]=s)}})),a},t}();e.Context=f;var p={$push:function(t,e,n){return m(e,n,"$push"),t.length?e.concat(t):e},$unshift:function(t,e,n){return m(e,n,"$unshift"),t.length?t.concat(e):e},$splice:function(t,e,r,o){return function(t,e){i(Array.isArray(t),(function(){return"Expected $splice target to be an array; got "+n(t)})),g(e.$splice)}(e,r),t.forEach((function(t){g(t),e===o&&t.length&&(e=h(o)),a.apply(e,t)})),e},$set:function(t,e,n){return function(t){i(1===Object.keys(t).length,(function(){return"Cannot have more than one key in an object with $set"}))}(n),t},$toggle:function(t,e){v(t,"$toggle");var n=t.length?h(e):e;return t.forEach((function(t){n[t]=!e[t]})),n},$unset:function(t,e,n,r){return v(t,"$unset"),t.forEach((function(t){Object.hasOwnProperty.call(e,t)&&(e===r&&(e=h(r)),delete e[t])})),e},$add:function(t,e,n,r){return y(e,"$add"),v(t,"$add"),"Map"===u(e)?t.forEach((function(t){var n=t[0],i=t[1];e===r&&e.get(n)!==i&&(e=h(r)),e.set(n,i)})):t.forEach((function(t){e!==r||e.has(t)||(e=h(r)),e.add(t)})),e},$remove:function(t,e,n,r){return y(e,"$remove"),v(t,"$remove"),t.forEach((function(t){e===r&&e.has(t)&&(e=h(r)),e.delete(t)})),e},$merge:function(t,e,r,o){var a,s;return a=e,i((s=t)&&"object"==typeof s,(function(){return"update(): $merge expects a spec of type 'object'; got "+n(s)})),i(a&&"object"==typeof a,(function(){return"update(): $merge expects a target of type 'object'; got "+n(a)})),c(t).forEach((function(n){t[n]!==e[n]&&(e===o&&(e=h(o)),e[n]=t[n])})),e},$apply:function(t,e){var r;return i("function"==typeof(r=t),(function(){return"update(): expected spec of $apply to be a function; got "+n(r)+"."})),t(e)}},d=new f;function m(t,e,r){i(Array.isArray(t),(function(){return"update(): expected target of "+n(r)+" to be an array; got "+n(t)+"."})),v(e[r],r)}function v(t,e){i(Array.isArray(t),(function(){return"update(): expected spec of "+n(e)+" to be an array; got "+n(t)+". Did you forget to wrap your parameter in an array?"}))}function g(t){i(Array.isArray(t),(function(){return"update(): expected spec of $splice to be an array of arrays; got "+n(t)+". Did you forget to wrap your parameters in an array?"}))}function y(t,e){var r=u(t);i("Map"===r||"Set"===r,(function(){return"update(): "+n(e)+" expects a target of type Set or Map; got "+n(r)}))}e.isEquals=d.update.isEquals,e.extend=d.extend,e.default=d.update,e.default.default=t.exports=l(e.default,e)},8973:(t,e,n)=>{!function(t,e){for(var n in e)t[n]=e[n]}(e,function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=52)}([function(t,e){t.exports=n(7378)},function(t,e,n){"use strict";var r,i=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),o=[];function a(t){for(var e=-1,n=0;n<o.length;n++)if(o[n].identifier===t){e=n;break}return e}function s(t,e){for(var n={},r=[],i=0;i<t.length;i++){var s=t[i],u=e.base?s[0]+e.base:s[0],l=n[u]||0,c="".concat(u," ").concat(l);n[u]=l+1;var h=a(c),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==h?(o[h].references++,o[h].updater(f)):o.push({identifier:c,updater:m(f,e),references:1}),r.push(c)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var a=i(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var l,c=(l=[],function(t,e){return l[t]=e,l.filter(Boolean).join("\n")});function h(t,e,n,r){var i=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=c(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function f(t,e,n){var r=n.css,i=n.media,o=n.sourceMap;if(i?t.setAttribute("media",i):t.removeAttribute("media"),o&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,d=0;function m(t,e){var n,r,i;if(e.singleton){var o=d++;n=p||(p=u(e)),r=h.bind(null,n,o,!1),i=h.bind(null,n,o,!0)}else n=u(e),r=f.bind(null,n,e),i=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var i=a(n[r]);o[i].references--}for(var u=s(t,e),l=0;l<n.length;l++){var c=a(n[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}n=u}}}},function(t,e,n){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n,r,i,o=t[1]||"",a=t[3];if(!a)return o;if(e&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(i," */")),u=a.sources.map((function(t){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(t," */")}));return[o].concat(u).concat([s]).join("\n")}return[o].join("\n")}(e,t);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var i={};if(r)for(var o=0;o<this.length;o++){var a=this[o][0];null!=a&&(i[a]=!0)}for(var s=0;s<t.length;s++){var u=[].concat(t[s]);r&&i[u[0]]||(n&&(u[2]?u[2]="".concat(n," and ").concat(u[2]):u[2]=n),e.push(u))}},e}},function(t,e,n){var r=n(1),i=n(33);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e){t.exports=n(7559)},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M3.51468 3.51468C2.97395 4.0554 2.97395 4.93209 3.51468 5.47282L10.0418 12L3.51468 18.5271C2.97395 19.0678 2.97395 19.9445 3.51468 20.4852C4.0554 21.026 4.93209 21.026 5.47282 20.4852L12 13.9581L18.5271 20.4852C19.0678 21.026 19.9445 21.026 20.4852 20.4852C21.026 19.9445 21.026 19.0678 20.4852 18.5271L13.9581 12L20.4852 5.47282C21.026 4.93209 21.026 4.0554 20.4852 3.51468C19.9445 2.97395 19.0678 2.97395 18.5271 3.51468L12 10.0418L5.47282 3.51468C4.93209 2.97395 4.0554 2.97395 3.51468 3.51468Z' fill='black' fill-opacity='0.6'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cg clip-path='url(%23clip0)'%3E %3Cpath d='M15.5147 15.5147C14.974 16.0554 14.974 16.9321 15.5147 17.4728L22.0419 24L15.5147 30.5271C14.974 31.0678 14.974 31.9445 15.5147 32.4852C16.0555 33.026 16.9322 33.026 17.4729 32.4852L24 25.9581L30.5272 32.4852C31.0679 33.026 31.9446 33.026 32.4853 32.4852C33.026 31.9445 33.026 31.0678 32.4853 30.5271L25.9582 24L32.4853 17.4728C33.026 16.9321 33.026 16.0554 32.4853 15.5147C31.9446 14.9739 31.0679 14.9739 30.5272 15.5147L24 22.0418L17.4729 15.5147C16.9322 14.9739 16.0555 14.9739 15.5147 15.5147Z' fill='black' fill-opacity='0.6'/%3E %3C/g%3E %3Cdefs%3E %3CclipPath id='clip0'%3E %3Cpath d='M0 0H48V48H0V0Z' fill='white'/%3E %3C/clipPath%3E %3C/defs%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cg clip-path='url(%23clip0)'%3E %3Cpath d='M32.512 23.04H17.952L23.936 17.504C24.0313 17.4217 24.1088 17.321 24.1639 17.2078C24.219 17.0946 24.2505 16.9715 24.2565 16.8457C24.2625 16.72 24.2428 16.5944 24.1988 16.4765C24.1547 16.3586 24.0871 16.2509 24 16.16C23.8291 15.9753 23.5925 15.8651 23.3411 15.8531C23.0898 15.8412 22.8437 15.9284 22.656 16.096L14.848 23.296C14.7466 23.3831 14.6652 23.4911 14.6094 23.6126C14.5536 23.7341 14.5247 23.8663 14.5247 24C14.5247 24.1337 14.5536 24.2658 14.6094 24.3874C14.6652 24.5089 14.7466 24.6169 14.848 24.704L22.656 31.904C22.8334 32.0607 23.0595 32.1512 23.296 32.16C23.4298 32.1626 23.5625 32.1352 23.6843 32.0799C23.8062 32.0245 23.914 31.9425 24 31.84C24.0871 31.7491 24.1547 31.6414 24.1988 31.5235C24.2428 31.4056 24.2625 31.28 24.2565 31.1543C24.2505 31.0285 24.219 30.9054 24.1639 30.7922C24.1088 30.679 24.0313 30.5783 23.936 30.496L17.952 24.96H32.512C32.7666 24.96 33.0108 24.8589 33.1909 24.6788C33.3709 24.4988 33.472 24.2546 33.472 24C33.472 23.7454 33.3709 23.5012 33.1909 23.3212C33.0108 23.1411 32.7666 23.04 32.512 23.04Z' fill='black' fill-opacity='0.6'/%3E %3C/g%3E %3Cdefs%3E %3CclipPath id='clip0'%3E %3Cpath d='M0 0H48V48H0V0Z' fill='white'/%3E %3C/clipPath%3E %3C/defs%3E %3C/svg%3E"},function(t,e){t.exports=n(250)},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Ccircle cx='12' cy='12' r='11' stroke='black' stroke-opacity='0.6' stroke-width='2'/%3E %3Cpath d='M16.6281 11.3199L10.267 7.13493C9.71634 6.78139 9 7.16253 9 7.81439V16.1856C9 16.8375 9.74322 17.2186 10.267 16.8651L16.6281 12.6801C17.124 12.3532 17.124 11.6461 16.6281 11.3202V11.3199Z' fill='black' fill-opacity='0.6'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M6.18639 1.94391C6.02748 1.86188 5.83576 1.87453 5.68952 1.97766L2.76032 4.03782H2.25969C1.66343 4.03782 1.17969 4.52156 1.17969 5.11782V6.88218C1.17969 7.47843 1.66343 7.96218 2.25969 7.96218H2.76032L5.68952 10.0223C5.83624 10.1255 6.02748 10.1381 6.18686 10.0556C6.34576 9.97312 6.4456 9.80905 6.4456 9.62999V2.36999C6.4456 2.19093 6.3453 2.02641 6.18639 1.94391ZM5.48561 8.70615L3.27641 7.15227C3.18594 7.05664 3.06078 7.00273 2.92954 7.00227H2.2597C2.19361 7.00227 2.1397 6.94836 2.1397 6.88227V5.11791C2.1397 5.05181 2.19361 4.99791 2.2597 4.99791H2.92954C3.0608 4.99744 3.18594 4.94353 3.27641 4.84791L5.48561 3.29403V8.70615Z' fill='black' fill-opacity='0.6'/%3E %3Cpath d='M7.14732 8.36067C7.23732 8.45067 7.35966 8.5013 7.48716 8.5013C7.61466 8.5013 7.73653 8.45067 7.82653 8.36067C8.45278 7.73441 8.80434 6.88551 8.80434 6.00003C8.80434 5.11455 8.45277 4.26567 7.82653 3.63939C7.63856 3.45189 7.33434 3.45236 7.14684 3.64033C6.95934 3.82829 6.95981 4.13252 7.14731 4.32002C7.59168 4.76627 7.84153 5.37049 7.84153 6.00002C7.84153 6.62955 7.59169 7.23374 7.14731 7.68002C7.05684 7.77002 7.00621 7.89236 7.00621 8.02033C7.00621 8.14783 7.05685 8.2702 7.14732 8.36067Z' fill='black' fill-opacity='0.6'/%3E %3Cpath d='M8.61735 2.31937C8.52735 2.40984 8.47672 2.53171 8.47672 2.65921C8.47672 2.78671 8.52735 2.90858 8.61735 2.99858C9.41282 3.79451 9.85959 4.87358 9.85959 5.99858C9.85959 7.12405 9.41287 8.2031 8.61735 8.99858C8.42985 9.18655 8.42985 9.4903 8.61735 9.6778C8.80485 9.86577 9.10907 9.86577 9.29657 9.6778C10.2725 8.70187 10.8209 7.3786 10.8209 5.99812C10.8209 4.61812 10.2725 3.2944 9.29657 2.31844C9.20657 2.22844 9.08423 2.17781 8.95673 2.17828C8.8297 2.17828 8.70735 2.22936 8.61735 2.31937Z' fill='black' fill-opacity='0.6'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='12' height='12' viewBox='0 0 12 12' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M3.12 9.15998C3.12 9.4253 2.90531 9.63998 2.64 9.63998H1.44C0.645936 9.63998 0 8.99404 0 8.19998V3.87998C0 3.08592 0.645936 2.43998 1.44 2.43998H6.28128L5.66066 1.81936C5.47316 1.63186 5.47316 1.32811 5.66066 1.14062C5.84816 0.953132 6.15192 0.95312 6.33941 1.14062L7.77941 2.58062C7.96691 2.76812 7.96691 3.07188 7.77941 3.25936L6.33941 4.69936C6.15285 4.88593 5.84815 4.8878 5.66066 4.69936C5.47316 4.51186 5.47316 4.20811 5.66066 4.02062L6.28128 3.4H1.44C1.17562 3.4 0.96 3.61563 0.96 3.88V8.2C0.96 8.46532 1.17563 8.68001 1.44 8.68001H2.64C2.90532 8.68001 3.12 8.89469 3.12 9.16V9.15998ZM10.56 2.43998H9.36C9.09468 2.43998 8.88 2.65467 8.88 2.91998C8.88 3.18529 9.09469 3.39998 9.36 3.39998H10.56C10.8253 3.39998 11.04 3.61561 11.04 3.87998V8.19998C11.04 8.4653 10.8253 8.67998 10.56 8.67998H5.71872L6.33934 8.05936C6.52684 7.87186 6.52684 7.56811 6.33934 7.38062C6.15184 7.19313 5.84808 7.19312 5.66059 7.38062L4.22059 8.82062C4.03309 9.00812 4.03309 9.31188 4.22059 9.49936L5.66059 10.9394C5.84809 11.1269 6.15185 11.1269 6.33934 10.9394C6.52682 10.7519 6.52684 10.4481 6.33934 10.2606L5.71872 9.64001H10.56C11.3541 9.64001 12 8.99407 12 8.2V3.88C12 3.08594 11.3541 2.44 10.56 2.44V2.43998Z' fill='black' fill-opacity='0.6'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M12 0C11.2353 0 10.6154 0.619913 10.6154 1.38461V10.6154H1.38462C0.619913 10.6154 0 11.2353 0 12C0 12.7647 0.619913 13.3846 1.38461 13.3846H10.6154V22.6154C10.6154 23.3801 11.2353 24 12 24C12.7647 24 13.3846 23.3801 13.3846 22.6154V13.3846H22.6154C23.3801 13.3846 24 12.7647 24 12C24 11.2353 23.3801 10.6154 22.6154 10.6154H13.3846V1.38462C13.3846 0.619914 12.7647 0 12 0Z' fill='%23F3F5FA'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M12 8C12.5523 8 13 7.55228 13 7C13 6.44772 12.5523 6 12 6C11.4477 6 11 6.44772 11 7C11 7.55228 11.4477 8 12 8Z' fill='white' fill-opacity='0.7'/%3E %3Cpath d='M12 9C11.4477 9 11 9.44772 11 10V17C11 17.5523 11.4477 18 12 18C12.5523 18 13 17.5523 13 17V10C13 9.44772 12.5523 9 12 9Z' fill='white' fill-opacity='0.7'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M24 12C24 18.6274 18.6274 24 12 24C5.37258 24 0 18.6274 0 12C0 5.37258 5.37258 0 12 0C18.6274 0 24 5.37258 24 12ZM22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2C17.5228 2 22 6.47715 22 12Z' fill='white' fill-opacity='0.7'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath d='M17.3746 1.28281C15.7126 0.413902 13.8425 0.0313994 11.979 0C6.09124 0.0996219 0.795923 4.46186 0.0865857 10.422C-0.636749 16.499 3.24018 22.1172 9.16256 23.6438C15.0195 25.1529 20.9816 21.7119 23.1927 16.2501C25.4922 10.5708 22.6705 4.05081 17.3746 1.28281ZM19.2641 13.9867C19.2641 14.2199 19.069 14.4149 18.8356 14.4149C14.1699 14.4149 9.50337 14.4149 4.8374 14.4149C4.71142 14.4149 4.61543 14.369 4.54687 14.3004C4.54258 14.2967 4.53887 14.293 4.53487 14.2893C4.53087 14.285 4.52687 14.2819 4.52344 14.2776C4.45459 14.2085 4.4086 14.1126 4.4086 13.9867C4.4086 12.7499 4.4086 11.5127 4.4086 10.2759C4.4086 10.0424 4.60343 9.84772 4.83711 9.84772C9.50337 9.84772 14.1693 9.84772 18.8353 9.84772C19.0687 9.84772 19.2638 10.0427 19.2641 10.2759C19.2641 11.513 19.2641 12.7499 19.2641 13.9867Z' fill='%23B60000'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='18' height='18' viewBox='0 0 18 18' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M17.82 9.20468C17.82 8.5665 17.7627 7.95286 17.6564 7.36377H9.17999V10.8451H14.0236C13.815 11.9701 13.1809 12.9233 12.2277 13.5615V15.8197H15.1364C16.8382 14.2529 17.82 11.9456 17.82 9.20468Z' fill='%234285F4'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.18 18C11.61 18 13.6473 17.1941 15.1364 15.8195L12.2277 13.5613C11.4218 14.1013 10.3909 14.4204 9.18 14.4204C6.8359 14.4204 4.85181 12.8372 4.14409 10.71H1.13727V13.0418C2.61818 15.9831 5.66181 18 9.18 18Z' fill='%2334A853'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M4.14408 10.7098C3.96408 10.1698 3.86181 9.59301 3.86181 8.99983C3.86181 8.40664 3.96408 7.82983 4.14408 7.28983V4.95801H1.13727C0.52772 6.17301 0.179993 7.54755 0.179993 8.99983C0.179993 10.4521 0.52772 11.8266 1.13727 13.0416L4.14408 10.7098Z' fill='%23FBBC05'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M9.18 3.57955C10.5014 3.57955 11.6877 4.03364 12.6205 4.92545L15.2018 2.34409C13.6432 0.891818 11.6059 0 9.18 0C5.66181 0 2.61818 2.01682 1.13727 4.95818L4.14409 7.29C4.85181 5.16273 6.8359 3.57955 9.18 3.57955Z' fill='%23EA4335'/%3E %3C/svg%3E"},function(t,e){t.exports="data:image/svg+xml,%3Csvg width='48' height='48' viewBox='0 0 48 48' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Ccircle cx='24' cy='24' r='24' fill='%234A73E2'/%3E %3Cpath d='M23.9464 4C34.992 4 44 12.9008 44 23.9464C44 34.992 34.992 44 23.9464 44C12.9008 44 4 34.992 4 23.9464C4 12.9008 12.9008 4 23.9464 4ZM11.7212 37.244C13.3298 33.5979 16.4397 30.9169 20.193 29.7373C17.941 28.4504 16.3324 25.9839 16.3324 23.1957V22.5523C16.3324 18.37 19.7641 14.9383 23.9464 14.9383C28.1287 14.9383 31.5603 18.37 31.5603 22.5523V23.1957C31.5603 25.9839 30.059 28.4504 27.807 29.7373C31.5603 30.9169 34.6702 33.5979 36.1716 37.244C39.7105 33.9196 41.9625 29.2011 41.9625 23.9464C41.9625 13.9732 33.9196 5.93029 23.9464 5.93029C13.9732 5.93029 5.93029 13.9732 5.93029 23.9464C5.93029 29.2011 8.18231 33.9196 11.7212 37.244ZM34.6702 38.5308C32.9544 34.2413 28.8794 31.2386 23.9464 31.2386C19.1206 31.2386 14.9383 34.2413 13.3298 38.5308C16.3324 40.6756 19.9786 41.9625 23.9464 41.9625C27.9142 41.9625 31.6676 40.6756 34.6702 38.5308ZM23.9464 16.8686C20.8365 16.8686 18.2627 19.4424 18.2627 22.5523V23.1957C18.2627 26.3056 20.8365 28.8794 23.9464 28.8794C27.0563 28.8794 29.63 26.3056 29.63 23.1957V22.5523C29.63 19.4424 27.0563 16.8686 23.9464 16.8686Z' fill='white'/%3E %3C/svg%3E"},function(t,e,n){var r=n(1),i=n(18);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".audio-selector-container{display:flex;flex-direction:column}.audio-selector-title{padding-left:16px;padding-right:16px;margin-bottom:8px;display:flex;align-items:center}.audio-selector-controls{width:100%;display:flex;flex-direction:column;box-shadow:0px -1px 1px rgba(0,0,0,0.08),1px 0px 1px rgba(0,0,0,0.08),-1px 0px 1px rgba(0,0,0,0.08),0px 1px 1px rgba(0,0,0,0.08);border-radius:12px}.audio-selector-file-name{height:48px;display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding-left:16px;padding-right:16px}.audio-selector-icon{cursor:pointer}.audio-selector-play-controls{height:48px;display:flex;flex-direction:row;align-items:center;padding-left:16px;padding-right:16px}.audio-selector-volume-control{height:48px;display:flex;flex-direction:row;align-items:center;padding-left:16px;padding-right:16px;background-color:rgba(0,0,0,0.05)}.audio-selector-loop-control{height:48px;display:flex;flex-direction:row;align-items:center;padding-left:16px;padding-right:16px;background-color:rgba(0,0,0,0.05);justify-content:space-between;border-radius:0px 0px 12px 12px}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(20);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".text-x-small{font-style:normal;font-weight:normal;font-size:12px;line-height:16px;letter-spacing:0.1px;margin:0px}.text-small{font-style:normal;font-weight:normal;font-size:14px;line-height:18px;margin:0px}.text-medium{font-style:normal;font-weight:normal;font-size:16px;line-height:20px;margin:0px}.text-large{font-style:normal;font-weight:normal;font-size:20px;line-height:24px;letter-spacing:-0.1px;margin:0px}.heading-small{font-style:normal;font-weight:normal;font-weight:bold;font-size:14px;line-height:18px;margin:0px}.heading-medium{font-style:normal;font-weight:bold;font-size:16px;line-height:20px;margin:0px}.heading-large{font-style:normal;font-weight:bold;font-size:20px;line-height:24px;letter-spacing:-0.1px;margin:0px}.heading-x-large{font-style:normal;font-weight:bold;font-size:24px;line-height:30px;margin:0px}.heading-xx-large{font-style:normal;font-weight:bold;font-size:32px;line-height:40px;margin:0px}.heading-xxx-large{font-style:normal;font-weight:bold;font-size:40px;line-height:48px;margin:0px}.heading-xxxx-large{font-style:normal;font-weight:bold;font-size:48px;line-height:56px;margin:0px}.display-big{font-style:normal;font-weight:300;font-size:64px;line-height:80px;margin:0px}.display-bigger{font-style:normal;font-weight:300;font-size:80px;line-height:96px;margin:0px}.display-biggest{font-style:normal;font-weight:300;font-size:96px;line-height:116px;margin:0px}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(22);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".slider-container{display:flex;flex-direction:row;align-items:center;justify-content:center;width:100%}.slider-track{flex-grow:1;height:3px;border-radius:5.5px;cursor:pointer;position:relative;margin-left:8px;margin-right:8px}.slider-thumb{width:12px;height:12px;border-radius:12px;border-width:2px;border-style:solid;position:absolute;margin-top:-6px;margin-left:-6px;pointer-events:none}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(24);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".border-button{border-width:1px;display:flex;justify-content:center;align-items:center;height:48px;border-radius:24px;user-select:none;cursor:pointer;padding-left:24px;padding-right:24px;box-sizing:border-box}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(26);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".checkbox{width:62px;height:32px;border-radius:16px;box-sizing:border-box;cursor:pointer}.checkbox-elements-container{display:flex;align-items:center;justify-content:space-between;height:100%}.checkbox-thumb{width:24px;height:24px;background-color:white;border-radius:24px}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(28);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".button-container{height:48px;display:flex;align-items:center;color:#ffffff;border-radius:24px;cursor:pointer;user-select:none;justify-content:center;padding-left:24px;padding-right:24px;box-sizing:border-box}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(30);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".fab-container{cursor:pointer;width:64px;height:64px;display:flex;justify-content:center;align-items:center;border-radius:64px;box-shadow:0px 4px 6px rgba(0,0,0,0.15),0px 0px 2px rgba(0,0,0,0.15);position:relative}.fab-icon-rotated{transform:rotate(45deg)}.fab-action-items-container{position:absolute;top:-16px;left:0px;transform:translateY(-100%);white-space:nowrap;display:flex;flex-direction:column;align-items:flex-start;z-index:1}.fab-action-item-container{display:flex;flex-direction:row;align-items:center;margin-top:8px}.fab-action-item-icon-container{display:flex;justify-content:center;align-items:center;background-color:white;box-shadow:0px 4px 6px rgba(0,0,0,0.15),0px 0px 2px rgba(0,0,0,0.15);box-sizing:border-box;border:1px solid rgba(0,0,0,0.1);border-radius:48px;width:48px;height:48px}.fab-action-item-label-container{display:flex;justify-content:center;align-items:center;padding:8px 12px;margin-left:8px;background:white;box-shadow:0px 4px 6px rgba(0,0,0,0.15),0px 0px 2px rgba(0,0,0,0.15);border-radius:4px;height:fit-content}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(32);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".icon-label-button-container{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer;width:48px}\n",""]),t.exports=e},function(t,e,n){(e=n(2)(!1)).push([t.i,".icon-container{display:flex;width:24px;height:24px;justify-content:center;align-items:center}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(35);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".info-button-container{height:48px;display:flex;align-items:center;padding-left:24px;padding-right:24px;border-radius:24px}.info-button-splitter{width:1px;height:100%;margin-left:12px;margin-right:12px}.info-button-image{width:24px;height:24px}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(37);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".input-field{position:relative;height:68px}.input-text{transition:all 0.2s;touch-action:manipulation;border-width:2px;border-style:solid;border-radius:12px;box-sizing:border-box;height:48px;position:absolute;width:100%;padding-left:16px;padding-bottom:8px;padding-top:20px;font-size:16px;line-height:20px;font-style:normal;font-weight:normal}.input-text:focus{outline:0}.input-label-to-to-top{animation-name:input-label-top;animation-duration:0.2s;animation-fill-mode:forwards}.input-label-to-to-bottom{animation-name:input-label-bottom;animation-duration:0.2s;animation-fill-mode:forwards}.input-label{position:absolute;height:48px;display:flex;align-items:center;padding-left:16px;pointer-events:none;cursor:text;font-style:normal;font-weight:normal;font-size:16px;line-height:20px;letter-spacing:0.1px}@keyframes input-label-top{from{font-size:16px;line-height:20px;letter-spacing:auto;height:48px;margin-top:0px}to{font-size:12px;line-height:16px;letter-spacing:0.1px;padding-bottom:12px;height:16px;margin-top:4px}}@keyframes input-label-bottom{from{font-size:12px;line-height:16px;letter-spacing:0.1px;padding-bottom:12px;height:16px;margin-top:4px}to{font-size:16px;line-height:20px;letter-spacing:auto;height:48px;margin-top:0px}}.input-placeholder{position:absolute;top:48px;margin-left:16px;margin-top:4px;font-size:12px;line-height:16px;letter-spacing:0.1px;color:rgba(0,0,0,0.6)}.input-cancel-button{position:absolute;right:12px;top:12px;width:24px;height:24px;cursor:pointer}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(39);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".profile-image{width:48px;height:48px;box-sizing:border-box;border-width:4px;border-style:solid;border-radius:48px;cursor:pointer}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(41);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".sign-in-dialog-backdrop{position:fixed;left:0px;right:0px;top:0px;bottom:0px}.sign-in-dialog-container{position:fixed;left:0px;right:0px;top:0px;bottom:0px;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,0.7);pointer-events:none}.sign-in-dialog{background-color:#fff;border-radius:10px;max-height:600px;pointer-events:all}.sign-in-dialog-title{box-shadow:0px -1px 1px rgba(0,0,0,0.08),1px 0px 1px rgba(0,0,0,0.08),-1px 0px 1px rgba(0,0,0,0.08),0px 1px 1px rgba(0,0,0,0.08);border-radius:10px 10px 0px 0px;display:flex;align-items:center;position:relative;height:64px}.sing-in-close-button{position:absolute;left:8px;cursor:pointer;height:45px;width:45px}.sing-in-back-button{position:absolute;left:8px;cursor:pointer;height:45px;width:45px}.sing-in-title-container{display:flex;justify-content:center;align-items:center;flex-grow:1}.sign-in-dialog-body{display:flex;flex-direction:column;align-items:center;padding:24px}.sign-in-google-button{border:1px solid rgba(0,0,0,0.6);display:flex;justify-content:center;align-items:center;height:48px;width:48px;border-radius:24px;width:336px;user-select:none;cursor:pointer}.sign-in-email-button{border-width:1px;border-style:solid;display:flex;justify-content:center;align-items:center;height:48px;border-radius:24px;width:336px;user-select:none;cursor:pointer}.sign-in-dialog-sign-up-container{user-select:none;cursor:pointer}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(43);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".menu-item-container{width:100%;height:48px;display:flex;justify-content:center;align-items:center;cursor:pointer}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(45);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".menu-container{position:fixed;display:flex;flex-direction:column}.menu-arrow-pointer{width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-bottom:12px solid #FFFFFF;pointer-events:none;transform:translateX(-50%)}.menu-body{width:100%;background:#FFFFFF;border-radius:12px;box-shadow:0px 0px 6px rgba(0,0,0,0.3),0px 4px 4px rgba(0,0,0,0.25)}.menu-body div:first-child{border-radius:12px 12px 0px 0px}.menu-body div:last-child{border-radius:0px 0px 12px 12px}\n",""]),t.exports=e},function(t,e,n){var r=n(1),i=n(47);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,"@import url(https://fonts.googleapis.com/css2?family=Inter:wght@300;400&display=swap);"]),e.push([t.i,'body{font-family:"Inter",sans-serif;user-select:none}.project-card-container{height:171px;border-radius:12px;box-shadow:0px 4px 6px rgba(0,0,0,0.15),0px 0px 2px rgba(0,0,0,0.15);background-color:rgba(0,0,0,0.75);background-size:16px 16px;background-position:0 0,8px 8px;background-image:linear-gradient(45deg, rgba(0,0,0,0.9) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.9) 75%, rgba(0,0,0,0.9)),linear-gradient(45deg, rgba(0,0,0,0.9) 25%, transparent 25%, transparent 75%, rgba(0,0,0,0.9) 75%, rgba(0,0,0,0.9))}.project-card-title{border-radius:12px 12px 0px 0px;display:flex;align-items:center;background-color:white;padding:12px}.project-image-container{display:flex;justify-content:center;max-height:calc(100% - 42px);width:100%;height:100%;position:relative}.project-image{max-width:100%;height:auto}.project-actions-container{position:absolute;left:0px;right:0px;top:0px;bottom:0px;display:flex;justify-content:center;align-items:center;flex-direction:row;background-color:rgba(255,255,255,0.9)}.project-actions-icon-container{display:flex;flex-direction:column;justify-content:center;align-items:center;cursor:pointer}\n',""]),t.exports=e},function(t,e,n){var r=n(1),i=n(49);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,'.circular-progress{-webkit-appearance:none;-moz-appearance:none;appearance:none;box-sizing:border-box;border:none;border-radius:50%;padding:0.25em;width:3em;height:3em;color:#4A73E2;background-color:transparent;font-size:16px;overflow:hidden}.circular-progress::-webkit-progress-bar{background-color:transparent}.circular-progress:indeterminate{-webkit-mask-image:linear-gradient(transparent 50%, black 50%),linear-gradient(to right, transparent 50%, black 50%);mask-image:linear-gradient(transparent 50%, black 50%),linear-gradient(to right, transparent 50%, black 50%);animation:circular-progress 6s infinite cubic-bezier(0.3, 0.6, 1, 1)}:-ms-lang(x),.circular-progress:indeterminate{animation:none}.circular-progress:indeterminate::before,.circular-progress:indeterminate::-webkit-progress-value{content:"";display:block;box-sizing:border-box;margin-bottom:0.25em;border:solid 0.25em transparent;border-top-color:currentColor;border-radius:50%;width:100% !important;height:100%;background-color:transparent;animation:circular-progress-pseudo 0.75s infinite linear alternate}.circular-progress:indeterminate::-moz-progress-bar{box-sizing:border-box;border:solid 0.25em transparent;border-top-color:currentColor;border-radius:50%;width:100%;height:100%;background-color:transparent;animation:circular-progress-pseudo 0.75s infinite linear alternate}.circular-progress:indeterminate::-ms-fill{animation-name:-ms-ring}@keyframes circular-progress{0%{transform:rotate(0deg)}12.5%{transform:rotate(180deg);animation-timing-function:linear}25%{transform:rotate(630deg)}37.5%{transform:rotate(810deg);animation-timing-function:linear}50%{transform:rotate(1260deg)}62.5%{transform:rotate(1440deg);animation-timing-function:linear}75%{transform:rotate(1890deg)}87.5%{transform:rotate(2070deg);animation-timing-function:linear}100%{transform:rotate(2520deg)}}@keyframes circular-progress-pseudo{0%{transform:rotate(-30deg)}29.4%{border-left-color:transparent}29.41%{border-left-color:currentColor}64.7%{border-bottom-color:transparent}64.71%{border-bottom-color:currentColor}100%{border-left-color:currentColor;border-bottom-color:currentColor;transform:rotate(225deg)}}\n',""]),t.exports=e},function(t,e,n){var r=n(1),i=n(51);"string"==typeof(i=i.__esModule?i.default:i)&&(i=[[t.i,i,""]]),r(i,{insert:"head",singleton:!1}),t.exports=i.locals||{}},function(t,e,n){(e=n(2)(!1)).push([t.i,".user-profile-backdrop{position:fixed;left:0px;right:0px;top:0px;bottom:0px}.user-profile-container{z-index:1;position:fixed;left:0px;right:0px;top:0px;bottom:0px;display:flex;justify-content:center;align-items:center;background-color:rgba(0,0,0,0.7);pointer-events:none}.user-profile-dialog{background-color:#fff;border-radius:10px;pointer-events:all;position:relative}.user-profile-dialog-title{box-shadow:0px -1px 1px rgba(0,0,0,0.08),1px 0px 1px rgba(0,0,0,0.08),-1px 0px 1px rgba(0,0,0,0.08),0px 1px 1px rgba(0,0,0,0.08);border-radius:10px 10px 0px 0px;display:flex;align-items:center;position:relative;height:64px}.user-profile-close-button{position:absolute;left:8px;cursor:pointer}.user-profile-title-container{display:flex;justify-content:center;align-items:center;flex-grow:1}.user-profile-main-info{height:96px;display:flex;align-items:center;justify-content:space-between;padding:24px;box-sizing:border-box}.user-profile-main-info-left-side{height:96px;display:flex;align-items:center;box-sizing:border-box;padding-right:20px}.user-profile-main-info-right-side{height:96px;display:flex;align-items:center;box-sizing:border-box}.user-profile-image{width:48px;height:48px;box-sizing:border-box;border:4px solid #4A73E2;background-color:#4A73E2;border-radius:48px}.user-profile-info{display:flex;flex-direction:column;margin-left:8px}.user-profile-items{padding:24px;overflow-y:auto;max-height:400px}.user-profile-puppets-list-grid{display:grid;grid-template-columns:repeat(3, 240px);grid-gap:12px}.user-profile-loading-overlay{position:absolute;left:0px;right:0px;top:0px;bottom:0px;border-radius:10px;background:rgba(255,255,255,0.9);display:flex;justify-content:center;align-items:center;flex-direction:column;z-index:1}\n",""]),t.exports=e},function(t,e,n){"use strict";n.r(e),n.d(e,"Theme",(function(){return P})),n.d(e,"ThemeContext",(function(){return Dt})),n.d(e,"defaultTheme",(function(){return O})),n.d(e,"AudioSelector",(function(){return I})),n.d(e,"BorderButton",(function(){return g})),n.d(e,"ColorVariant",(function(){return p})),n.d(e,"Button",(function(){return R})),n.d(e,"Checkbox",(function(){return _})),n.d(e,"Fab",(function(){return j})),n.d(e,"IconLabelButton",(function(){return z})),n.d(e,"CancelIcon",(function(){return V})),n.d(e,"EditIcon",(function(){return G})),n.d(e,"MoreIcon",(function(){return q})),n.d(e,"ShareIcon",(function(){return Y})),n.d(e,"InfoButton",(function(){return $})),n.d(e,"Input",(function(){return it})),n.d(e,"ProfileIcon",(function(){return at})),n.d(e,"SignInDialog",(function(){return vt})),n.d(e,"Slider",(function(){return m})),n.d(e,"Spacer",(function(){return u})),n.d(e,"Typography",(function(){return h})),n.d(e,"TypographyVariant",(function(){return i})),n.d(e,"UserProfile",(function(){return Rt}));var r,i,o=n(0),a=n.n(o),s=(n(17),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),u=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return a.a.createElement("div",{style:{width:n.props.size,height:n.props.size}})},n}return s(e,t),e}(a.a.Component),l=(n(19),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(t){t.TEXT_X_SMALL="text-x-small",t.TEXT_SMALL="text-small",t.TEXT_MEDIUM="text-medium",t.TEXT_LARGE="text-large",t.HEADING_SMALL="heading-small",t.HEADING_MEDIUM="heading-medium",t.HEADING_LARGE="heading-large",t.HEADING_X_LARGE="heading-x-large",t.HEADING_XX_LARGE="heading-xx-large",t.HEADING_XXX_LARGE="heading-xxx-large",t.HEADING_XXXX_LARGE="heading-xxxx-large",t.DISPLAY_BIG="display-big",t.DISPLAY_BIGGER="display-bigger",t.DISPLAY_BIGGEST="display-biggest"}(i||(i={}));var c,h=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return[n.props.variant===i.TEXT_X_SMALL&&a.a.createElement("p",{key:"text-x-small",className:"text-x-small",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.TEXT_SMALL&&a.a.createElement("p",{key:"text-small",className:"text-small",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.TEXT_MEDIUM&&a.a.createElement("p",{key:"text-medium",className:"text-medium",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.TEXT_LARGE&&a.a.createElement("p",{key:"text-large",className:"text-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_SMALL&&a.a.createElement("p",{key:"heading-small",className:"heading-small",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_MEDIUM&&a.a.createElement("p",{key:"heading-medium",className:"heading-medium",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_LARGE&&a.a.createElement("p",{key:"heading-large",className:"heading-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_X_LARGE&&a.a.createElement("p",{key:"heading-x-large",className:"heading-x-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_XX_LARGE&&a.a.createElement("p",{key:"heading-xx-large",className:"heading-xx-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_XXX_LARGE&&a.a.createElement("p",{key:"heading-xxx-large",className:"heading-xxx-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.HEADING_XXXX_LARGE&&a.a.createElement("p",{key:"heading-xxxx-large",className:"heading-xxxx-large",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.DISPLAY_BIG&&a.a.createElement("p",{key:"display-big",className:"display-big",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.DISPLAY_BIGGER&&a.a.createElement("p",{key:"display-bigger",className:"display-bigger",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children),n.props.variant===i.DISPLAY_BIGGEST&&a.a.createElement("p",{key:"display-biggest",className:"display-biggest",style:{color:n.props.color,textAlign:n.props.align,whiteSpace:n.props.whiteSpace}},n.props.children)]},n}return l(e,t),e}(a.a.Component),f=(n(21),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(t){t.NUMBER="number",t.TIME="time"}(c||(c={}));var p,d,m=function(t){function e(e){var n=t.call(this,e)||this;return n.sliderTrackElement=a.a.createRef(),n.movingThumb=!1,n.state={value:0},n.onSliderMouseDown=n.onSliderMouseDown.bind(n),n.onSliderMouseMove=n.onSliderMouseMove.bind(n),n.onMouseUp=n.onMouseUp.bind(n),n}return f(e,t),e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp)},e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp)},e.prototype.componentWillReceiveProps=function(t){this.setState({})},Object.defineProperty(e.prototype,"leftValue",{get:function(){return this.props.type===c.TIME?Math.floor(this.props.value/60)+":"+Math.floor(this.props.value%60):this.props.type===c.NUMBER?"":void 0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rightValue",{get:function(){return this.props.type===c.TIME?Math.floor(this.props.maxValue/60)+":"+Math.floor(this.props.maxValue%60):this.props.type===c.NUMBER?Math.floor(this.props.value):void 0},enumerable:!1,configurable:!0}),e.prototype.render=function(){return a.a.createElement("div",{className:"slider-container"},a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:this.props.theme.textDaylight2},this.leftValue),a.a.createElement("div",{ref:this.sliderTrackElement,className:"slider-track",onMouseDown:this.onSliderMouseDown,onMouseMove:this.onSliderMouseMove,style:{backgroundColor:this.props.theme.textDaylight3}},a.a.createElement("div",{className:"slider-thumb",style:{backgroundColor:this.props.theme.textDaylight1,borderColor:this.props.theme.textDaylight1,left:this.props.value/this.props.maxValue*100+"%"}})),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:this.props.theme.textDaylight2},this.rightValue))},e.prototype.onSliderMouseDown=function(t){var e=this.sliderTrackElement.current.getBoundingClientRect(),n=e.left,r=(t.clientX-n)/e.width;this.props.onChange(this.props.maxValue*r),this.movingThumb=!0},e.prototype.onSliderMouseMove=function(t){if(this.movingThumb){var e=this.sliderTrackElement.current.getBoundingClientRect(),n=e.left,r=(t.clientX-n)/e.width;this.props.onChange(this.props.maxValue*r)}},e.prototype.onMouseUp=function(t){this.movingThumb=!1},e}(a.a.Component),v=(n(23),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}());!function(t){t.PRIMARY="primary",t.SECONDARY="secondary"}(p||(p={})),function(t){t.SOLID="solid",t.DASHED="dashed"}(d||(d={}));var g=function(t){function e(e){return t.call(this,e)||this}return v(e,t),e.prototype.render=function(){return a.a.createElement("div",{className:"border-button",style:{width:this.props.maxWidth?"100%":"auto",borderColor:this.props.variant===p.PRIMARY?this.props.theme.primary:this.props.theme.textDaylight2,borderStyle:this.props.borderVariant||"solid"},onClick:this.props.onClick},a.a.createElement(h,{variant:i.HEADING_MEDIUM,color:this.props.variant===p.PRIMARY?this.props.theme.primary:this.props.theme.textDaylight2},this.props.label))},e}(a.a.Component),y=n(8),b=(n(25),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),_=function(t){function e(e){var n=t.call(this,e)||this;return n.uniqueId=y.v1(),n.onToggle=n.onToggle.bind(n),n}return b(e,t),e.prototype.render=function(){return a.a.createElement("div",{className:"checkbox",onClick:this.onToggle,style:{backgroundColor:this.props.value?this.props.theme.primary:this.props.theme.textDaylight2,paddingLeft:this.props.value?"8px":"4px",paddingRight:this.props.value?"4px":"8px"}},a.a.createElement("div",{className:"checkbox-elements-container",style:{flexDirection:this.props.value?"row-reverse":"row"}},a.a.createElement("div",{className:"checkbox-thumb"}),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:this.props.theme.textDark3},this.props.value?this.props.enabledLabel:this.props.disabledLabel)))},e.prototype.onToggle=function(){this.props.onChange(!this.props.value)},e}(a.a.Component),x=n(5),w=n.n(x),E=n(9),S=n.n(E),T=n(10),A=n.n(T),M=n(11),C=n.n(M),O={primary:"rgba(74, 115, 226, 1)",primary2:"rgba(74, 115, 226, 0.6)",textDaylight1:"rgba(0, 0, 0, 0.9)",textDaylight2:"rgba(0, 0, 0, 0.6)",textDaylight3:"rgba(0, 0, 0, 0.3)",textDark3:"rgba(255, 255, 255, 0.7)"},P=function(t){return{primary:t.primary||O.primary,primary2:t.primary2||O.primary2,textDaylight1:t.textDaylight1||O.textDaylight1,textDaylight2:t.textDaylight2||O.textDaylight2,textDaylight3:t.textDaylight3||O.textDaylight3,textDark3:t.textDark3||O.textDark3}},k=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),I=function(t){function e(e){var n=t.call(this,e)||this;return n.audioElement=a.a.createRef(),n.state={audioData:null,playInLoop:!1,fileName:"",isPlaying:!1,currentTime:0,duration:0,volume:50},n.onAudioSelected=n.onAudioSelected.bind(n),n.removeAudio=n.removeAudio.bind(n),n.togglePlay=n.togglePlay.bind(n),n.onSeek=n.onSeek.bind(n),n.onVolumeChange=n.onVolumeChange.bind(n),n.togglePlayInLoop=n.togglePlayInLoop.bind(n),n}return k(e,t),e.prototype.componentDidMount=function(){var t=this;this.audioElement.current.addEventListener("canplaythrough",(function(){t.setState({duration:t.audioElement.current.duration})})),this.audioElement.current.addEventListener("timeupdate",(function(){t.setState({currentTime:t.audioElement.current.currentTime})}))},e.prototype.render=function(){return a.a.createElement("div",{className:"audio-selector-container"},a.a.createElement("audio",{ref:this.audioElement,src:this.state.audioData,loop:this.state.playInLoop}),a.a.createElement("div",{className:"audio-selector-title"},a.a.createElement(h,{variant:i.TEXT_MEDIUM,color:this.props.theme.textDaylight2||O.textDaylight2},this.props.title)),a.a.createElement("input",{type:"file",id:"audio-selector-input",style:{display:"none"},onChange:this.onAudioSelected}),!this.state.audioData&&a.a.createElement("label",{htmlFor:"audio-selector-input"},a.a.createElement(g,{theme:this.props.theme,label:"Select audio",maxWidth:!0,borderVariant:d.DASHED})),this.state.audioData&&a.a.createElement("div",{className:"audio-selector-controls"},a.a.createElement("div",{className:"audio-selector-file-name"},a.a.createElement(h,{variant:i.TEXT_MEDIUM,color:this.props.theme.textDaylight1||O.textDaylight1},this.state.fileName),a.a.createElement("img",{src:w.a,onClick:this.removeAudio,className:"audio-selector-icon"})),a.a.createElement("div",{className:"audio-selector-play-controls"},a.a.createElement("img",{src:S.a,className:"audio-selector-icon",onClick:this.togglePlay}),a.a.createElement(u,{size:20}),a.a.createElement(m,{theme:this.props.theme,value:this.state.currentTime,maxValue:this.state.duration,type:c.TIME,onChange:this.onSeek})),a.a.createElement("div",{className:"audio-selector-volume-control"},a.a.createElement("img",{src:A.a,className:"audio-selector-icon"}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_MEDIUM,color:this.props.theme.textDaylight2||O.textDaylight2,whiteSpace:"nowrap"},"Playback volume"),a.a.createElement(u,{size:8}),a.a.createElement(m,{theme:this.props.theme,value:this.state.volume,maxValue:100,type:c.NUMBER,onChange:this.onVolumeChange})),a.a.createElement("div",{className:"audio-selector-loop-control"},a.a.createElement("div",{style:{display:"flex"}},a.a.createElement("img",{src:C.a}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_MEDIUM,color:this.props.theme.textDaylight2||O.textDaylight2},"Play in-loop")),a.a.createElement("div",null,a.a.createElement(_,{theme:this.props.theme,disabledLabel:"No",enabledLabel:"Yes",value:this.state.playInLoop,onChange:this.togglePlayInLoop})))))},e.prototype.onAudioSelected=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(){e.setState({audioData:r.result,fileName:n.name})},r.readAsDataURL(n)},e.prototype.removeAudio=function(){this.setState({audioData:null,fileName:""})},e.prototype.togglePlay=function(){var t=this;this.setState({isPlaying:!this.state.isPlaying},(function(){t.state.isPlaying?t.audioElement.current.play():t.audioElement.current.pause()}))},e.prototype.onSeek=function(t){var e=this;this.setState({currentTime:t},(function(){e.audioElement.current.currentTime=t}))},e.prototype.onVolumeChange=function(t){var e=this;this.setState({volume:Math.max(.01,t)},(function(){e.audioElement.current.volume=Math.max(0,t/100)}))},e.prototype.togglePlayInLoop=function(){var t=this;this.setState({playInLoop:!this.state.playInLoop},(function(){t.audioElement.current.loop=t.state.playInLoop}))},e}(a.a.Component),L=(n(27),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),R=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){var t="";return n.props.fullWidth&&(t="100%"),n.props.width&&(t=n.props.width+"px"),a.a.createElement("div",{style:{width:t,backgroundColor:n.props.disabled?n.props.theme.primary2:n.props.theme.primary},className:"button-container",onClick:n.onClick},a.a.createElement(h,{variant:i.HEADING_MEDIUM,color:"#FFFFFF"},n.props.label))},n.onClick=function(){n.props.disabled||n.props.onClick()},n}return L(e,t),e}(a.a.Component),D=n(12),N=n.n(D),F=(n(29),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),j=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){var t={backgroundColor:n.state.open?"#D74C4C":n.props.color};return a.a.createElement("div",{style:t,className:"fab-container",onClick:n.props.actionItems?n.toggle:n.onActionClick},a.a.createElement("img",{className:n.state.open?"fab-icon-rotated":"",src:N.a}),n.state.open&&n.props.actionItems&&a.a.createElement("div",{className:"fab-action-items-container"},n.props.actionItems.map((function(t){return a.a.createElement("div",{key:t.action,className:"fab-action-item-container",onClick:function(){n.onActionClick(t.action)}},a.a.createElement("div",{className:"fab-action-item-icon-container"},a.a.createElement("img",{src:t.icon})),a.a.createElement("div",{className:"fab-action-item-label-container"},a.a.createElement(h,{variant:i.TEXT_SMALL,color:"rgba(0, 0, 0, 0.6)"},t.name)))}))))},n.toggle=function(){n.state.open?n.close():n.open()},n.open=function(){n.setState({open:!0})},n.close=function(){n.setState({open:!1})},n.onActionClick=function(t){n.props.onClick(t)},n.state={open:!1},n}return F(e,t),e}(a.a.Component),U=(n(31),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),z=function(t){function e(e){var n=t.call(this,e)||this;return n.state={highlighted:!1},n.onMouseEnter=n.onMouseEnter.bind(n),n.onMouseLeave=n.onMouseLeave.bind(n),n}return U(e,t),e.prototype.render=function(){var t=this.props.icon;return a.a.createElement("div",{className:"icon-label-button-container",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.props.onClick},a.a.createElement(t,{opacity:1,fill:this.state.highlighted?this.props.theme.primary:this.props.theme.textDaylight2}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:this.state.highlighted?this.props.theme.primary:this.props.theme.textDaylight2},this.props.label))},e.prototype.onMouseEnter=function(){this.setState({highlighted:!0})},e.prototype.onMouseLeave=function(){this.setState({highlighted:!1})},e}(a.a.Component),B=(n(3),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),V=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.render=function(){return a.a.createElement("div",{className:"icon-container"},a.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M3.51468 3.51468C2.97395 4.0554 2.97395 4.93209 3.51468 5.47282L10.0418 12L3.51468 18.5271C2.97395 19.0678 2.97395 19.9445 3.51468 20.4852C4.0554 21.026 4.93209 21.026 5.47282 20.4852L12 13.9581L18.5271 20.4852C19.0678 21.026 19.9445 21.026 20.4852 20.4852C21.026 19.9445 21.026 19.0678 20.4852 18.5271L13.9581 12L20.4852 5.47282C21.026 4.93209 21.026 4.0554 20.4852 3.51468C19.9445 2.97395 19.0678 2.97395 18.5271 3.51468L12 10.0418L5.47282 3.51468C4.93209 2.97395 4.0554 2.97395 3.51468 3.51468Z",fill:e.props.fill,fillOpacity:e.props.opacity})))},e}return B(e,t),e}(a.a.Component),H=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),G=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.render=function(){return a.a.createElement("div",{className:"icon-container"},a.a.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M22.6054 1.52639L22.4757 1.39648C20.6163 -0.465494 17.6326 -0.465494 15.73 1.39648L2.58442 14.5602C2.49793 14.6901 2.41145 14.82 2.36821 14.9499L0.0331409 22.9175C-0.053343 23.2206 0.0331409 23.567 0.249351 23.7835C0.422319 23.9134 0.68177 24 0.89798 24H1.11419L9.07071 21.6617C9.20044 21.6184 9.33016 21.5318 9.45989 21.4452L22.6054 8.28146C24.4649 6.41949 24.4649 3.43166 22.6054 1.52639ZM2.152 21.8782L3.57898 16.9851L7.03834 20.4493L2.152 21.8782ZM8.72478 19.7131L4.3141 15.2963L14.8651 4.73072L19.2758 9.1475L8.72478 19.7131ZM21.3947 7.02571L20.5298 7.93505L16.0759 3.47497L16.984 2.60893C18.1948 1.43978 20.0542 1.43978 21.2649 2.60893L21.3947 2.73884C22.5622 3.95129 22.519 5.81326 21.3947 7.02571Z",fill:e.props.fill,fillOpacity:e.props.opacity})))},e}return H(e,t),e}(a.a.Component),W=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.render=function(){return a.a.createElement("div",{className:"icon-container"},a.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 12C5 10.8954 5.89543 10 7 10C8.10457 10 9 10.8954 9 12C9 13.1046 8.10457 14 7 14C5.89543 14 5 13.1046 5 12ZM10 12C10 10.8954 10.8954 10 12 10C13.1046 10 14 10.8954 14 12C14 13.1046 13.1046 14 12 14C10.8954 14 10 13.1046 10 12ZM15 12C15 10.8954 15.8954 10 17 10C18.1046 10 19 10.8954 19 12C19 13.1046 18.1046 14 17 14C15.8954 14 15 13.1046 15 12Z",fill:e.props.fill,fillOpacity:e.props.opacity}),a.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22ZM12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24Z",fill:e.props.fill,fillOpacity:e.props.opacity})))},e}return W(e,t),e}(a.a.Component),X=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.render=function(){return a.a.createElement("div",{className:"icon-container"},a.a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:e.props.fill,xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M24 22C24 22.552 23.552 23 23 23H1C0.448 23 0 22.552 0 22V14C0 13.448 0.448 13 1 13C1.552 13 2 13.448 2 14V21H22V14C22 13.448 22.448 13 23 13C23.552 13 24 13.448 24 14V22Z",fill:e.props.fill,fillOpacity:e.props.opacity}),a.a.createElement("path",{d:"M12 14.375C12.2486 14.375 12.487 14.2762 12.6628 14.1004C12.8387 13.9246 12.9375 13.6861 12.9375 13.4375V4.1875L16.5 7.75C16.6805 7.8854 16.9038 7.95112 17.1289 7.93512C17.354 7.91912 17.5658 7.82248 17.7253 7.6629C17.8849 7.50333 17.9816 7.29157 17.9976 7.06647C18.0136 6.84136 17.9479 6.61804 17.8125 6.4375L12.6562 1.28125C12.5716 1.19238 12.4697 1.12165 12.3569 1.0733C12.2441 1.02496 12.1227 1 12 1C11.8773 1 11.7559 1.02496 11.6431 1.0733C11.5303 1.12165 11.4284 1.19238 11.3438 1.28125L6.1875 6.4375C6.0521 6.61804 5.98644 6.84136 6.00244 7.06647C6.01844 7.29157 6.11509 7.50333 6.27466 7.6629C6.43423 7.82248 6.64599 7.91912 6.87109 7.93512C7.0962 7.95112 7.31946 7.8854 7.5 7.75L11.0625 4.1875V13.4375C11.0625 13.6861 11.1613 13.9246 11.3372 14.1004C11.513 14.2762 11.7514 14.375 12 14.375Z",fill:e.props.fill,fillOpacity:e.props.opacity})))},e}return X(e,t),e}(a.a.Component),Q=n(13),Z=n.n(Q),K=(n(34),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),$=function(t){function e(e){return t.call(this,e)||this}return K(e,t),e.prototype.render=function(){return a.a.createElement("div",{className:"info-button-container",style:{backgroundColor:this.props.backgroundColor}},this.props.children,a.a.createElement("div",{className:"info-button-splitter",style:{backgroundColor:this.props.splitterColor}}),a.a.createElement("img",{className:"info-button-image",src:Z.a}))},e}(a.a.Component),J=n(4),tt=n.n(J),et=n(14),nt=n.n(et),rt=(n(36),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),it=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){var t="input-label";n.state.focused?t+=" input-label-to-to-top":t+=" input-label-to-to-bottom",n.state.initialRender&&(t="input-label");var e=n.props.placeholder;n.state.emailValid||(e="Please enter a valid email address"),n.props.error&&(e=n.props.error);var r="";return n.props.color&&(r=n.props.color),!n.state.emailValid&&n.props.error&&(r="#B60000"),n.props.color&&n.props.color,a.a.createElement("div",{style:{width:n.props.fullWidth?"100%":"336px"},className:"input-field"},a.a.createElement("input",{className:"input-text",value:n.state.value,type:n.props.type,style:{borderColor:n.state.emailValid&&!n.props.error?"":"#B60000",backgroundColor:n.props.backgroundColor||"",color:n.props.inputColor||"rgba(0, 0, 0, 0.9)"},onChange:n.onValueChange,onFocus:n.onInputFocus,onBlur:n.onInputFocusOut}),a.a.createElement("label",{style:{color:n.props.color||"rgba(0, 0, 0, 0.6)"},className:t,htmlFor:"email"},n.props.label),a.a.createElement("label",{style:{color:r},className:"input-placeholder",htmlFor:"email"},e),n.state.value&&!n.props.color&&a.a.createElement("img",{onClick:n.onClear,className:"input-cancel-button",src:n.state.emailValid&&!n.props.error?w.a:nt.a}),n.state.value&&n.props.color&&a.a.createElement("div",{onClick:n.onClear,className:"input-cancel-button"},a.a.createElement(V,{fill:"white",opacity:"0.7"})))},n.onInputFocus=function(){n.setState({focused:!0,initialRender:!1})},n.onInputFocusOut=function(){if(n.setState({focused:Boolean(n.state.value)}),"email"===n.props.type){var t=tt.a.validate(n.state.value);n.setState({emailValid:t})}},n.onValueChange=function(t){n.setState({value:t.target.value},(function(){n.props.onChange(n.state.value)}))},n.onClear=function(){n.setState({value:"",emailValid:!0},(function(){n.props.onChange(n.state.value)}))},n.state={focused:Boolean(n.props.value),initialRender:!n.props.value,value:n.props.value||"",emailValid:!0},n}return rt(e,t),e}(a.a.Component),ot=(n(38),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),at=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return a.a.createElement("img",{key:"profile-image",className:"profile-image",style:{borderColor:n.props.theme.primary,backgroundColor:n.props.theme.primary},src:n.props.profileImage,onClick:n.onClick})},n.onClick=n.onClick.bind(n),n}return ot(e,t),e.prototype.onClick=function(){this.props.onClick()},e}(a.a.Component),st=n(15),ut=n.n(st),lt=n(7),ct=n.n(lt),ht=n(6),ft=n.n(ht),pt=(n(40),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),dt=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},mt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},vt=function(t){function e(e){var n=t.call(this,e)||this;return n._email="",n._password="",n._repeatPassword="",n.render=function(){var t=a.a.createElement("div",{className:"sign-in-dialog"},a.a.createElement("div",{className:"sign-in-dialog-title"},a.a.createElement("img",{className:"sing-in-back-button",src:ct.a,onClick:n.onBack}),a.a.createElement("div",{className:"sing-in-title-container"},a.a.createElement(h,{variant:i.TEXT_LARGE,color:"rgba(0, 0, 0, 0.9)"},"Sign in with email"))),a.a.createElement("div",{className:"sign-in-dialog-body"},a.a.createElement(it,{onChange:n.onEmailChange,placeholder:"Enter your email address",label:"Email address",type:"email"}),a.a.createElement(u,{size:16}),a.a.createElement(it,{onChange:n.onPasswordChange,placeholder:"Enter your password",label:"Password",type:"password"}),a.a.createElement(u,{size:28}),a.a.createElement(R,{theme:n.props.theme,label:n.state.loggingIn?"Loading...":"Sign in",fullWidth:!0,disabled:!n.state.signInWithEmailEnabled,onClick:n.onSignInAsync}))),e=a.a.createElement("div",{className:"sign-in-dialog"},a.a.createElement("div",{className:"sign-in-dialog-title"},a.a.createElement("img",{className:"sing-in-back-button",src:ct.a,onClick:n.onBack}),a.a.createElement("div",{className:"sing-in-title-container"},a.a.createElement(h,{variant:i.TEXT_LARGE,color:"rgba(0, 0, 0, 0.9)"},"Sign up with email"))),a.a.createElement("div",{className:"sign-in-dialog-body"},a.a.createElement(it,{onChange:n.onEmailChange,placeholder:"Enter an email address",label:"Email address",type:"email"}),a.a.createElement(u,{size:16}),a.a.createElement(it,{onChange:n.onPasswordChange,placeholder:"Enter a password",label:"Password",type:"password"}),a.a.createElement(u,{size:16}),a.a.createElement(it,{onChange:n.onRepeatPasswordChange,placeholder:"Enter the password again",label:"Password",type:"password",error:n.state.repeatPasswordError}),a.a.createElement(u,{size:28}),a.a.createElement(R,{theme:n.props.theme,label:n.state.signingUp?"Loading...":"Sign up",fullWidth:!0,disabled:!n.state.signUpWithEmailEnabled,onClick:n.signUpAsync})));return a.a.createElement("div",null,a.a.createElement("div",{className:"sign-in-dialog-backdrop",onClick:n.onClose}),a.a.createElement("div",{className:"sign-in-dialog-container"},n.state.signInWithEmailDialogActive&&t,n.state.signUpWithEmailDialogActive&&e,!n.state.signInWithEmailDialogActive&&!n.state.signUpWithEmailDialogActive&&a.a.createElement("div",{className:"sign-in-dialog"},a.a.createElement("div",{className:"sign-in-dialog-title"},a.a.createElement("img",{className:"sing-in-close-button",src:ft.a,onClick:n.onClose}),a.a.createElement("div",{className:"sing-in-title-container"},a.a.createElement(h,{variant:i.TEXT_LARGE,color:"rgba(0, 0, 0, 0.9)"},"Sign in"))),a.a.createElement("div",{className:"sign-in-dialog-body"},a.a.createElement("div",{className:"sign-in-google-button",onClick:n.onSignInWithGoogleAsync},a.a.createElement("img",{src:ut.a}),a.a.createElement(u,{size:4}),a.a.createElement(h,{color:"rgba(0, 0, 0, 0.6)",variant:i.HEADING_MEDIUM},"Continue with Google")),a.a.createElement(u,{size:10}),a.a.createElement("div",{className:"sign-in-email-button",onClick:n.openSignInWithEmail,style:{borderColor:n.props.theme.primary}},a.a.createElement(h,{color:n.props.theme.primary,variant:i.HEADING_MEDIUM},"Sign in with email")),a.a.createElement(u,{size:32}),a.a.createElement(h,{color:"rgba(0, 0, 0, 0.6)",variant:i.TEXT_SMALL},"Don't have an account yet?"),a.a.createElement(u,{size:22}),a.a.createElement("div",{className:"sign-in-dialog-sign-up-container",onClick:n.openSignUpWithEmail},a.a.createElement(h,{color:n.props.theme.primary,variant:i.HEADING_MEDIUM},"Sign up"))))))},n.onSignInWithGoogleAsync=function(){return dt(n,void 0,Promise,(function(){return mt(this,(function(t){switch(t.label){case 0:return[4,this.props.onSignInWithGoogleAsync()];case 1:return t.sent(),this.onClose(),[2]}}))}))},n.onClose=function(){n.setState({signInWithEmailDialogActive:!1,signUpWithEmailDialogActive:!1,signInWithEmailEnabled:!1,signUpWithEmailEnabled:!1,loggingIn:!1,signingUp:!1,repeatPasswordError:""},(function(){n.props.onClose()}))},n.validateInputSignIn=function(){n._email&&n._password&&tt.a.validate(n._email)?n.setState({signInWithEmailEnabled:!0}):n.setState({signInWithEmailEnabled:!1})},n.validateInputSignUp=function(){n._email&&n._password&&n._repeatPassword&&n._password===n._repeatPassword&&tt.a.validate(n._email)?n.setState({signUpWithEmailEnabled:!0,repeatPasswordError:""}):n._password!==n._repeatPassword?n.setState({signUpWithEmailEnabled:!1,repeatPasswordError:"Passwords do not match"}):n.setState({repeatPasswordError:"",signUpWithEmailEnabled:!1})},n.onEmailChange=function(t){n._email=t,n.validateInputSignIn(),n.validateInputSignUp()},n.onPasswordChange=function(t){n._password=t,n.validateInputSignIn(),n.validateInputSignUp()},n.onRepeatPasswordChange=function(t){n._repeatPassword=t,n.validateInputSignUp()},n.openSignInWithEmail=function(){n.setState({signInWithEmailDialogActive:!0,signUpWithEmailDialogActive:!1})},n.openSignUpWithEmail=function(){n.setState({signInWithEmailDialogActive:!1,signUpWithEmailDialogActive:!0})},n.onBack=function(){n.setState({signInWithEmailDialogActive:!1,signUpWithEmailDialogActive:!1})},n.signUpAsync=function(){return dt(n,void 0,Promise,(function(){var t=this;return mt(this,(function(e){switch(e.label){case 0:return this.setState({signingUp:!0}),[4,this.props.onSignUpAsync(this._email,this._password)];case 1:return e.sent(),this.setState({signingUp:!1},(function(){t.onClose()})),[2]}}))}))},n.onSignInAsync=function(){return dt(n,void 0,Promise,(function(){var t=this;return mt(this,(function(e){switch(e.label){case 0:return this.setState({loggingIn:!0}),[4,this.props.onSignInAsync(this._email,this._password)];case 1:return e.sent(),this.setState({loggingIn:!1},(function(){t.onClose()})),[2]}}))}))},n.state={signInWithEmailDialogActive:!1,signUpWithEmailDialogActive:!1,signInWithEmailEnabled:!1,signUpWithEmailEnabled:!1,repeatPasswordError:"",loggingIn:!1,signingUp:!1},n}return pt(e,t),e}(a.a.Component),gt=(n(42),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),yt=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return a.a.createElement("div",{className:"menu-item-container",style:{background:n.state.highlighted?n.props.highlightColor:"#FFFFFF"},onMouseEnter:n.onMouseEnter,onMouseLeave:n.onMouseLeave,onClick:n.props.onClick},a.a.createElement(h,{variant:i.HEADING_MEDIUM,color:n.props.labelColor},n.props.label))},n.onMouseEnter=function(){n.setState({highlighted:!0})},n.onMouseLeave=function(){n.setState({highlighted:!1})},n.state={highlighted:!1},n}return gt(e,t),e}(a.a.Component),bt=(n(44),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),_t=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return a.a.createElement("div",{className:"menu-container",style:{width:n.props.width+"px",left:n.props.left+"px",top:n.props.top+"px"}},a.a.createElement("div",{className:"menu-arrow-pointer",style:{marginLeft:n.props.pointerLeft+"px"}}),a.a.createElement("div",{className:"menu-body"},n.props.menuItems.map((function(t){return a.a.createElement(yt,{key:t.label,label:t.label,highlightColor:t.highlightColor,labelColor:t.labelColor,onClick:t.onClick})}))))},n.onMouseEnter=function(){n.setState({highlighted:!0})},n.onMouseLeave=function(){n.setState({highlighted:!1})},n}return bt(e,t),e}(a.a.Component),xt=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.render=function(){return a.a.createElement("div",{className:"icon-container"},a.a.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M12.5 0C11.7353 0 11.1154 0.619913 11.1154 1.38461V10.6154H1.88462C1.11991 10.6154 0.5 11.2353 0.5 12C0.5 12.7647 1.11991 13.3846 1.88461 13.3846H11.1154V22.6154C11.1154 23.3801 11.7353 24 12.5 24C13.2647 24 13.8846 23.3801 13.8846 22.6154V13.3846H23.1154C23.8801 13.3846 24.5 12.7647 24.5 12C24.5 11.2353 23.8801 10.6154 23.1154 10.6154H13.8846V1.38462C13.8846 0.619914 13.2647 0 12.5 0Z",fill:e.props.fill,fillOpacity:e.props.opacity})))},e}return xt(e,t),e}(a.a.Component),Et=(n(46),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),St=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Tt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},At=function(t){function e(e){var n=t.call(this,e)||this;return n._moreMenuItems=[{label:"Download project.zip",highlightColor:"rgba(74, 115, 226, 0.1)",labelColor:"#4A73E2",onClick:n.onDownloadProjectAsync.bind(n)},{label:"Delete project",highlightColor:"rgba(182, 0, 0, 0.1)",labelColor:"#B60000",onClick:n.onDeleteProjectAsync.bind(n)}],n.componentDidMount=function(){n._cardContainerRect=n._cardContainer.getBoundingClientRect()},n.render=function(){return a.a.createElement("div",{className:"project-card-container",ref:function(t){n._cardContainer=t}},a.a.createElement("div",{className:"project-card-title"},a.a.createElement(h,{variant:i.TEXT_SMALL,color:"rgba(0, 0, 0, 0.6)"},n.props.project.name||"My project")),a.a.createElement("div",{className:"project-image-container",onMouseOver:n.openActions},a.a.createElement("div",{style:{background:"url("+n.props.project.thumbnailUrl+") no-repeat center",backgroundSize:"contain",width:"100%"}}),n.state.actionsVisible&&a.a.createElement("div",{className:"project-actions-container",onMouseLeave:n.closeActions},a.a.createElement("div",{className:"project-actions-icon-container",onClick:n.onAddToSceneAsync,onMouseEnter:function(){n.onSetHighlightAdd(!0)},onMouseLeave:function(){n.onSetHighlightAdd(!1)}},a.a.createElement(wt,{fill:n.state.addHighlighted?"#4A73E2":"black",opacity:n.state.addHighlighted?"1":"0.6"}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:n.state.addHighlighted?"#4A73E2":"rgba(0, 0, 0, 0.6)"},"Add to scene")),a.a.createElement(u,{size:24}),a.a.createElement("div",{className:"project-actions-icon-container",onClick:n.onEdit,onMouseEnter:function(){n.onSetHighlightedEdit(!0)},onMouseLeave:function(){n.onSetHighlightedEdit(!1)}},a.a.createElement(G,{fill:n.state.editHighlighted?"#4A73E2":"black",opacity:n.state.editHighlighted?"1":"0.6"}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:n.state.editHighlighted?"#4A73E2":"rgba(0, 0, 0, 0.6)"},"Edit")),a.a.createElement(u,{size:24}),a.a.createElement("div",{ref:function(t){n._moreIconContainer=t},className:"project-actions-icon-container",onMouseEnter:function(){n.onSetHighlightedMore(!0)},onMouseLeave:function(){n.onSetHighlightedMore(!1)},onClick:n.onToggleMoreMenuVisible},a.a.createElement(q,{fill:n.state.moreHighlighted?"#4A73E2":"black",opacity:n.state.moreHighlighted?"1":"0.6"}),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_X_SMALL,color:n.state.moreHighlighted?"#4A73E2":"rgba(0, 0, 0, 0.6)"},"More")))),n.state.moreMenuVisible&&a.a.createElement("div",{onMouseEnter:n.openActions,onMouseLeave:n.closeActions},a.a.createElement(_t,{left:n._cardContainerRect.left,top:n._moreIconRect.bottom,width:240,pointerLeft:n._moreIconRect.left-n._cardContainerRect.left+n._moreIconRect.width/2,menuItems:n._moreMenuItems})))},n.onEdit=function(){n.props.onEdit(n.props.project)},n.openActions=function(){n.setState({actionsVisible:!0})},n.closeActions=function(){n.setState({actionsVisible:!1})},n.onAddToSceneAsync=function(){return St(n,void 0,Promise,(function(){var t;return Tt(this,(function(e){switch(e.label){case 0:return this.props.onStartAddingToScene(),[4,this.props.openProject(this.props.project)];case 1:return t=e.sent(),this.props.onAddToScene(t),[2]}}))}))},n.onSetHighlightAdd=function(t){n.setState({addHighlighted:t})},n.onSetHighlightedEdit=function(t){n.setState({editHighlighted:t})},n.onSetHighlightedMore=function(t){n.setState({moreHighlighted:t})},n.onToggleMoreMenuVisible=function(){n._cardContainerRect=n._cardContainer.getBoundingClientRect(),n._moreIconRect=n._moreIconContainer.getBoundingClientRect(),n.setState({moreMenuVisible:!n.state.moreMenuVisible})},n.state={actionsVisible:!1,addHighlighted:!1,editHighlighted:!1,moreHighlighted:!1,moreMenuVisible:!1},n}return Et(e,t),e.prototype.onDownloadProjectAsync=function(){this.setState({moreMenuVisible:!1,actionsVisible:!1}),this.props.onDownloadProject(this.props.project)},e.prototype.onDeleteProjectAsync=function(){return St(this,void 0,Promise,(function(){return Tt(this,(function(t){switch(t.label){case 0:return this.setState({moreMenuVisible:!1,actionsVisible:!1}),[4,this.props.deleteProject(this.props.project)];case 1:return t.sent(),this.props.onDelete(),[2]}}))}))},e}(a.a.Component),Mt=(n(48),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),Ct=function(t){function e(e){var n=t.call(this,e)||this;return n.render=function(){return a.a.createElement("progress",{className:"circular-progress"})},n}return Mt(e,t),e}(a.a.Component),Ot=n(16),Pt=n.n(Ot),kt=(n(50),function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}()),It=function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))},Lt=function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}},Rt=function(t){function e(e){var n=t.call(this,e)||this;return n.componentDidMount=function(){n.fetchProjectsForUserAsync()},n.render=function(){return[a.a.createElement("div",{key:"backdrop",className:"user-profile-backdrop",onClick:n.props.onClose}),a.a.createElement("div",{key:"profile-container",className:"user-profile-container"},a.a.createElement("div",{className:"user-profile-dialog"},n.state.showLoadingOverlay&&a.a.createElement("div",{className:"user-profile-loading-overlay"},a.a.createElement(Ct,null),a.a.createElement(u,{size:10}),a.a.createElement(h,{variant:i.HEADING_SMALL,color:"#4A73E2"},n.state.loadingOverlayMessage)),a.a.createElement("div",{className:"user-profile-dialog-title"},a.a.createElement("img",{className:"user-profile-close-button",src:ft.a,onClick:n.props.onClose}),a.a.createElement("div",{className:"user-profile-title-container"},a.a.createElement(h,{variant:i.TEXT_LARGE,color:"rgba(0, 0, 0, 0.9)"},"Your Profile"))),a.a.createElement("div",{className:"user-profile-main-info"},a.a.createElement("div",{className:"user-profile-main-info-left-side"},a.a.createElement("img",{src:n.props.user.photoURL||Pt.a,className:"user-profile-image"}),a.a.createElement("div",{className:"user-profile-info"},a.a.createElement(h,{variant:i.TEXT_LARGE,color:"rgba(0, 0, 0, 0.6)"},n.props.user.email),a.a.createElement(u,{size:4}),a.a.createElement(h,{variant:i.TEXT_SMALL,color:"rgba(0, 0, 0, 0.6)"},"Google account"))),a.a.createElement("div",{className:"user-profile-main-info-right-side"},a.a.createElement(g,{theme:O,label:"Logout",onClick:n.onUserLogoutAsync}))),a.a.createElement("div",{className:"user-profile-items"},a.a.createElement(h,{color:"rgba(0, 0, 0, 0.6)",variant:i.TEXT_LARGE},"Projects (",n.state.userProjects.length,")"),a.a.createElement(u,{size:12}),a.a.createElement("div",{className:"user-profile-project-list-grid"},n.state.userProjects.map((function(t){return a.a.createElement(At,{deleteProject:function(){},openProject:function(){},key:t.id,project:t,onDelete:n.onProjectDeleted,onAddToScene:n.onAddToScene,onStartAddingToScene:n.onStartAddingToScene,onDownloadProject:n.onDownloadProjectAsync,onEdit:n.onEditAsync})}))))))]},n.onEditAsync=function(t){return It(n,void 0,Promise,(function(){var e;return Lt(this,(function(n){switch(n.label){case 0:return this.setState({showLoadingOverlay:!0,loadingOverlayMessage:"Preparing your project for edit. This may take a while..."}),[4,this.props.openProject(t)];case 1:return e=n.sent(),this.props.onClose({edit:e}),this.setState({showLoadingOverlay:!1}),[2]}}))}))},n.fetchProjectsForUserAsync=function(){return It(n,void 0,Promise,(function(){var t;return Lt(this,(function(e){switch(e.label){case 0:return[4,this.props.getAllProjectsForUser()];case 1:return(t=e.sent())?(this.setState({userProjects:t}),[2]):[2]}}))}))},n.onDownloadProjectAsync=function(t){return It(n,void 0,Promise,(function(){return Lt(this,(function(e){return this.setState({showLoadingOverlay:!0,loadingOverlayMessage:"Preparing your project for export. This may take a while..."}),this.props.saveProjectToFile(t),this.setState({showLoadingOverlay:!1}),[2]}))}))},n.onProjectDeleted=function(){n.fetchProjectsForUserAsync()},n.onUserLogoutAsync=function(){return It(n,void 0,Promise,(function(){return Lt(this,(function(t){switch(t.label){case 0:return[4,this.props.signOut()];case 1:return t.sent(),[2]}}))}))},n.onAddToScene=function(t){n.props.onClose(t),n.setState({showLoadingOverlay:!1})},n.onStartAddingToScene=function(){n.setState({showLoadingOverlay:!0,loadingOverlayMessage:"Loading the project. This may take a while..."})},n.state={userProjects:[],showLoadingOverlay:!1,loadingOverlayMessage:""},n}return kt(e,t),e}(a.a.Component),Dt=a.a.createContext(null)}]))},250:(t,e,n)=>{"use strict";var r;n.r(e),n.d(e,{NIL:()=>P,parse:()=>v,stringify:()=>c,v1:()=>m,v3:()=>T,v4:()=>A,v5:()=>O,validate:()=>s,version:()=>k});var i=new Uint8Array(16);function o(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(i)}const a=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(t){return"string"==typeof t&&a.test(t)};for(var u=[],l=0;l<256;++l)u.push((l+256).toString(16).substr(1));const c=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(u[t[e+0]]+u[t[e+1]]+u[t[e+2]]+u[t[e+3]]+"-"+u[t[e+4]]+u[t[e+5]]+"-"+u[t[e+6]]+u[t[e+7]]+"-"+u[t[e+8]]+u[t[e+9]]+"-"+u[t[e+10]]+u[t[e+11]]+u[t[e+12]]+u[t[e+13]]+u[t[e+14]]+u[t[e+15]]).toLowerCase();if(!s(n))throw TypeError("Stringified UUID is invalid");return n};var h,f,p=0,d=0;const m=function(t,e,n){var r=e&&n||0,i=e||new Array(16),a=(t=t||{}).node||h,s=void 0!==t.clockseq?t.clockseq:f;if(null==a||null==s){var u=t.random||(t.rng||o)();null==a&&(a=h=[1|u[0],u[1],u[2],u[3],u[4],u[5]]),null==s&&(s=f=16383&(u[6]<<8|u[7]))}var l=void 0!==t.msecs?t.msecs:Date.now(),m=void 0!==t.nsecs?t.nsecs:d+1,v=l-p+(m-d)/1e4;if(v<0&&void 0===t.clockseq&&(s=s+1&16383),(v<0||l>p)&&void 0===t.nsecs&&(m=0),m>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");p=l,d=m,f=s;var g=(1e4*(268435455&(l+=122192928e5))+m)%4294967296;i[r++]=g>>>24&255,i[r++]=g>>>16&255,i[r++]=g>>>8&255,i[r++]=255&g;var y=l/4294967296*1e4&268435455;i[r++]=y>>>8&255,i[r++]=255&y,i[r++]=y>>>24&15|16,i[r++]=y>>>16&255,i[r++]=s>>>8|128,i[r++]=255&s;for(var b=0;b<6;++b)i[r+b]=a[b];return e||c(i)},v=function(t){if(!s(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=255&e,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=255&e,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=255&e,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=255&e,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=255&e,n};function g(t,e,n){function r(t,r,i,o){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}(t)),"string"==typeof r&&(r=v(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+t.length);if(a.set(r),a.set(t,r.length),(a=n(a))[6]=15&a[6]|e,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return c(a)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function y(t){return 14+(t+64>>>9<<4)+1}function b(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function _(t,e,n,r,i,o){return b((a=b(b(e,t),b(r,o)))<<(s=i)|a>>>32-s,n);var a,s}function x(t,e,n,r,i,o,a){return _(e&n|~e&r,t,e,i,o,a)}function w(t,e,n,r,i,o,a){return _(e&r|n&~r,t,e,i,o,a)}function E(t,e,n,r,i,o,a){return _(e^n^r,t,e,i,o,a)}function S(t,e,n,r,i,o,a){return _(n^(e|~r),t,e,i,o,a)}const T=g("v3",48,(function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return function(t){for(var e=[],n=32*t.length,r="0123456789abcdef",i=0;i<n;i+=8){var o=t[i>>5]>>>i%32&255,a=parseInt(r.charAt(o>>>4&15)+r.charAt(15&o),16);e.push(a)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[y(e)-1]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,a=0;a<t.length;a+=16){var s=n,u=r,l=i,c=o;n=x(n,r,i,o,t[a],7,-680876936),o=x(o,n,r,i,t[a+1],12,-389564586),i=x(i,o,n,r,t[a+2],17,606105819),r=x(r,i,o,n,t[a+3],22,-1044525330),n=x(n,r,i,o,t[a+4],7,-176418897),o=x(o,n,r,i,t[a+5],12,1200080426),i=x(i,o,n,r,t[a+6],17,-1473231341),r=x(r,i,o,n,t[a+7],22,-45705983),n=x(n,r,i,o,t[a+8],7,1770035416),o=x(o,n,r,i,t[a+9],12,-1958414417),i=x(i,o,n,r,t[a+10],17,-42063),r=x(r,i,o,n,t[a+11],22,-1990404162),n=x(n,r,i,o,t[a+12],7,1804603682),o=x(o,n,r,i,t[a+13],12,-40341101),i=x(i,o,n,r,t[a+14],17,-1502002290),n=w(n,r=x(r,i,o,n,t[a+15],22,1236535329),i,o,t[a+1],5,-165796510),o=w(o,n,r,i,t[a+6],9,-1069501632),i=w(i,o,n,r,t[a+11],14,643717713),r=w(r,i,o,n,t[a],20,-373897302),n=w(n,r,i,o,t[a+5],5,-701558691),o=w(o,n,r,i,t[a+10],9,38016083),i=w(i,o,n,r,t[a+15],14,-660478335),r=w(r,i,o,n,t[a+4],20,-405537848),n=w(n,r,i,o,t[a+9],5,568446438),o=w(o,n,r,i,t[a+14],9,-1019803690),i=w(i,o,n,r,t[a+3],14,-187363961),r=w(r,i,o,n,t[a+8],20,1163531501),n=w(n,r,i,o,t[a+13],5,-1444681467),o=w(o,n,r,i,t[a+2],9,-51403784),i=w(i,o,n,r,t[a+7],14,1735328473),n=E(n,r=w(r,i,o,n,t[a+12],20,-1926607734),i,o,t[a+5],4,-378558),o=E(o,n,r,i,t[a+8],11,-2022574463),i=E(i,o,n,r,t[a+11],16,1839030562),r=E(r,i,o,n,t[a+14],23,-35309556),n=E(n,r,i,o,t[a+1],4,-1530992060),o=E(o,n,r,i,t[a+4],11,1272893353),i=E(i,o,n,r,t[a+7],16,-155497632),r=E(r,i,o,n,t[a+10],23,-1094730640),n=E(n,r,i,o,t[a+13],4,681279174),o=E(o,n,r,i,t[a],11,-358537222),i=E(i,o,n,r,t[a+3],16,-722521979),r=E(r,i,o,n,t[a+6],23,76029189),n=E(n,r,i,o,t[a+9],4,-640364487),o=E(o,n,r,i,t[a+12],11,-421815835),i=E(i,o,n,r,t[a+15],16,530742520),n=S(n,r=E(r,i,o,n,t[a+2],23,-995338651),i,o,t[a],6,-198630844),o=S(o,n,r,i,t[a+7],10,1126891415),i=S(i,o,n,r,t[a+14],15,-1416354905),r=S(r,i,o,n,t[a+5],21,-57434055),n=S(n,r,i,o,t[a+12],6,1700485571),o=S(o,n,r,i,t[a+3],10,-1894986606),i=S(i,o,n,r,t[a+10],15,-1051523),r=S(r,i,o,n,t[a+1],21,-2054922799),n=S(n,r,i,o,t[a+8],6,1873313359),o=S(o,n,r,i,t[a+15],10,-30611744),i=S(i,o,n,r,t[a+6],15,-1560198380),r=S(r,i,o,n,t[a+13],21,1309151649),n=S(n,r,i,o,t[a+4],6,-145523070),o=S(o,n,r,i,t[a+11],10,-1120210379),i=S(i,o,n,r,t[a+2],15,718787259),r=S(r,i,o,n,t[a+9],21,-343485551),n=b(n,s),r=b(r,u),i=b(i,l),o=b(o,c)}return[n,r,i,o]}(function(t){if(0===t.length)return[];for(var e=8*t.length,n=new Uint32Array(y(e)),r=0;r<e;r+=8)n[r>>5]|=(255&t[r/8])<<r%32;return n}(t),8*t.length))})),A=function(t,e,n){var r=(t=t||{}).random||(t.rng||o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return c(r)};function M(t,e,n,r){switch(t){case 0:return e&n^~e&r;case 1:return e^n^r;case 2:return e&n^e&r^n&r;case 3:return e^n^r}}function C(t,e){return t<<e|t>>>32-e}const O=g("v5",80,(function(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var i=0;i<r.length;++i)t.push(r.charCodeAt(i))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var o=t.length/4+2,a=Math.ceil(o/16),s=new Array(a),u=0;u<a;++u){for(var l=new Uint32Array(16),c=0;c<16;++c)l[c]=t[64*u+4*c]<<24|t[64*u+4*c+1]<<16|t[64*u+4*c+2]<<8|t[64*u+4*c+3];s[u]=l}s[a-1][14]=8*(t.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(t.length-1)&4294967295;for(var h=0;h<a;++h){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=s[h][p];for(var d=16;d<80;++d)f[d]=C(f[d-3]^f[d-8]^f[d-14]^f[d-16],1);for(var m=n[0],v=n[1],g=n[2],y=n[3],b=n[4],_=0;_<80;++_){var x=Math.floor(_/20),w=C(m,5)+M(x,v,g,y)+b+e[x]+f[_]>>>0;b=y,y=g,g=C(v,30)>>>0,v=m,m=w}n[0]=n[0]+m>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+g>>>0,n[3]=n[3]+y>>>0,n[4]=n[4]+b>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]})),P="00000000-0000-0000-0000-000000000000",k=function(t){if(!s(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},4405:(t,e,n)=>{"use strict";n.d(e,{Z:()=>u});var r=n(4311);t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Z.Buffer:void 0,s=a?a.allocUnsafe:void 0;const u=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},9268:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r});const r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g},3594:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(9268);t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.Z.process;const s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}()},4311:(t,e,n)=>{"use strict";n.d(e,{Z:()=>o});var r=n(9268),i="object"==typeof self&&self&&self.Object===Object&&self;const o=r.Z||i||Function("return this")()},9138:(t,e,n)=>{"use strict";n.d(e,{Z:()=>s});var r=n(4311);t=n.hmd(t);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Z.Buffer:void 0;const s=(a?a.isBuffer:void 0)||function(){return!1}},8056:(t,e,n)=>{var r="__lodash_hash_undefined__",i=9007199254740991,o=/^\[object .+?Constructor\]$/,a=/^(?:0|[1-9]\d*)$/,s="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,l=s||u||Function("return this")();function c(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function h(t,e){return!(!t||!t.length)&&function(t,e,n){if(e!=e)return function(t,e,n,r){for(var i=t.length,o=-1;++o<i;)if(e(t[o],o,t))return o;return-1}(t,d);for(var r=-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e)>-1}function f(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function p(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function d(t){return t!=t}function m(t,e){return t.has(e)}function v(t,e){return function(n){return t(e(n))}}var g,y=Array.prototype,b=Function.prototype,_=Object.prototype,x=l["__core-js_shared__"],w=(g=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",E=b.toString,S=_.hasOwnProperty,T=_.toString,A=RegExp("^"+E.call(S).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=l.Symbol,C=v(Object.getPrototypeOf,Object),O=_.propertyIsEnumerable,P=y.splice,k=M?M.isConcatSpreadable:void 0,I=Object.getOwnPropertySymbols,L=Math.max,R=H(l,"Map"),D=H(Object,"create");function N(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function F(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function j(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function U(t){var e=-1,n=t?t.length:0;for(this.__data__=new j;++e<n;)this.add(t[e])}function z(t,e){for(var n,r,i=t.length;i--;)if((n=t[i][0])===(r=e)||n!=n&&r!=r)return i;return-1}function B(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=q),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?B(s,e-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function V(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function H(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return function(t){return!(!J(t)||(e=t,w&&w in e))&&($(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?A:o).test(function(t){if(null!=t){try{return E.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var e}(n)?n:void 0}N.prototype.clear=function(){this.__data__=D?D(null):{}},N.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},N.prototype.get=function(t){var e=this.__data__;if(D){var n=e[t];return n===r?void 0:n}return S.call(e,t)?e[t]:void 0},N.prototype.has=function(t){var e=this.__data__;return D?void 0!==e[t]:S.call(e,t)},N.prototype.set=function(t,e){return this.__data__[t]=D&&void 0===e?r:e,this},F.prototype.clear=function(){this.__data__=[]},F.prototype.delete=function(t){var e=this.__data__,n=z(e,t);return!(n<0||(n==e.length-1?e.pop():P.call(e,n,1),0))},F.prototype.get=function(t){var e=this.__data__,n=z(e,t);return n<0?void 0:e[n][1]},F.prototype.has=function(t){return z(this.__data__,t)>-1},F.prototype.set=function(t,e){var n=this.__data__,r=z(n,t);return r<0?n.push([t,e]):n[r][1]=e,this},j.prototype.clear=function(){this.__data__={hash:new N,map:new(R||F),string:new N}},j.prototype.delete=function(t){return V(this,t).delete(t)},j.prototype.get=function(t){return V(this,t).get(t)},j.prototype.has=function(t){return V(this,t).has(t)},j.prototype.set=function(t,e){return V(this,t).set(t,e),this},U.prototype.add=U.prototype.push=function(t){return this.__data__.set(t,r),this},U.prototype.has=function(t){return this.__data__.has(t)};var G=I?v(I,Object):ot,W=I?function(t){for(var e=[];t;)p(e,G(t)),t=C(t);return e}:ot;function q(t){return Z(t)||Q(t)||!!(k&&t&&t[k])}function X(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}function Y(t){if("string"==typeof t||function(t){return"symbol"==typeof t||tt(t)&&"[object Symbol]"==T.call(t)}(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Q(t){return function(t){return tt(t)&&K(t)}(t)&&S.call(t,"callee")&&(!O.call(t,"callee")||"[object Arguments]"==T.call(t))}var Z=Array.isArray;function K(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!$(t)}function $(t){var e=J(t)?T.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}function J(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function tt(t){return!!t&&"object"==typeof t}function et(t){return K(t)?function(t,e){var n=Z(t)||Q(t)?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],r=n.length,i=!!r;for(var o in t)!e&&!S.call(t,o)||i&&("length"==o||X(o,r))||n.push(o);return n}(t,!0):function(t){if(!J(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e,n,r=(n=(e=t)&&e.constructor,e===("function"==typeof n&&n.prototype||_)),i=[];for(var o in t)("constructor"!=o||!r&&S.call(t,o))&&i.push(o);return i}(t)}var nt,rt,it=(nt=function(t,e){return null==t?{}:(e=f(B(e,1),Y),function(t,e){return function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=t[a];n(0,a)&&(o[a]=s)}return o}(t=Object(t),e,(function(e,n){return n in t}))}(t,function(t,e,n,r){var i=-1,o=h,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;e.length>=200&&(o=m,a=!1,e=new U(e));t:for(;++i<s;){var c=t[i],f=c;if(c=0!==c?c:0,a&&f==f){for(var p=l;p--;)if(e[p]===f)continue t;u.push(c)}else o(e,f,r)||u.push(c)}return u}(function(t){return function(t,e,n){var r=e(t);return Z(t)?r:p(r,n(t))}(t,et,W)}(t),e)))},rt=L(void 0===rt?nt.length-1:rt,0),function(){for(var t=arguments,e=-1,n=L(t.length-rt,0),r=Array(n);++e<n;)r[e]=t[rt+e];e=-1;for(var i=Array(rt+1);++e<rt;)i[e]=t[e];return i[rt]=r,c(nt,this,i)});function ot(){return[]}t.exports=it},7126:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();function a(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function s(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var u=Object.prototype,l=u.hasOwnProperty,c=u.toString,h=o.Symbol,f=u.propertyIsEnumerable,p=h?h.isConcatSpreadable:void 0,d=Math.max;function m(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=v),i||(i=[]);++o<a;){var u=t[o];e>0&&n(u)?e>1?m(u,e-1,n,r,i):s(i,u):r||(i[i.length]=u)}return i}function v(t){return y(t)||function(t){return function(t){return b(t)&&function(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}(t.length)&&!function(t){var e=function(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}(t)?c.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}(t)}(t)&&l.call(t,"callee")&&(!f.call(t,"callee")||"[object Arguments]"==c.call(t))}(t)||!!(p&&t&&t[p])}function g(t){if("string"==typeof t||function(t){return"symbol"==typeof t||b(t)&&"[object Symbol]"==c.call(t)}(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}var y=Array.isArray;function b(t){return!!t&&"object"==typeof t}var _,x,w=(_=function(t,e){return null==t?{}:function(t,e){return function(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=t[a];n(0,a)&&(o[a]=s)}return o}(t=Object(t),e,(function(e,n){return n in t}))}(t,function(t,e){for(var n=-1,r=t?t.length:0,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}(m(e,1),g))},x=d(void 0===x?_.length-1:x,0),function(){for(var t=arguments,e=-1,n=d(t.length-x,0),r=Array(n);++e<n;)r[e]=t[x+e];e=-1;for(var i=Array(x+1);++e<x;)i[e]=t[e];return i[x]=r,a(_,this,i)});t.exports=w},2545:(t,e,n)=>{var r=n(1822)(n(7400),"DataView");t.exports=r},6586:(t,e,n)=>{var r=n(7753),i=n(2452),o=n(2115),a=n(8256),s=n(7426);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},6301:(t,e,n)=>{var r=n(9417),i=n(2709),o=n(6165),a=n(1873),s=n(2556);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},4538:(t,e,n)=>{var r=n(1822)(n(7400),"Map");t.exports=r},4554:(t,e,n)=>{var r=n(9448),i=n(7738),o=n(6575),a=n(7238),s=n(8738);function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=r,u.prototype.delete=i,u.prototype.get=o,u.prototype.has=a,u.prototype.set=s,t.exports=u},4825:(t,e,n)=>{var r=n(1822)(n(7400),"Promise");t.exports=r},6151:(t,e,n)=>{var r=n(1822)(n(7400),"Set");t.exports=r},2485:(t,e,n)=>{var r=n(4554),i=n(8639),o=n(8379);function a(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new r;++e<n;)this.add(t[e])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,t.exports=a},3694:(t,e,n)=>{var r=n(6301),i=n(7354),o=n(5863),a=n(2367),s=n(3878),u=n(7569);function l(t){var e=this.__data__=new r(t);this.size=e.size}l.prototype.clear=i,l.prototype.delete=o,l.prototype.get=a,l.prototype.has=s,l.prototype.set=u,t.exports=l},6539:(t,e,n)=>{var r=n(7400).Symbol;t.exports=r},9942:(t,e,n)=>{var r=n(7400).Uint8Array;t.exports=r},6902:(t,e,n)=>{var r=n(1822)(n(7400),"WeakMap");t.exports=r},594:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}},263:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}},8213:(t,e,n)=>{var r=n(4701),i=n(2900),o=n(9785),a=n(3854),s=n(2383),u=n(8519),l=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=o(t),c=!n&&i(t),h=!n&&!c&&a(t),f=!n&&!c&&!h&&u(t),p=n||c||h||f,d=p?r(t.length,String):[],m=d.length;for(var v in t)!e&&!l.call(t,v)||p&&("length"==v||h&&("offset"==v||"parent"==v)||f&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||s(v,m))||d.push(v);return d}},6070:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}},7141:t=>{t.exports=function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}},756:t=>{t.exports=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}},1928:(t,e,n)=>{var r=n(8799),i=n(5638),o=Object.prototype.hasOwnProperty;t.exports=function(t,e,n){var a=t[e];o.call(t,e)&&i(a,n)&&(void 0!==n||e in t)||r(t,e,n)}},3382:(t,e,n)=>{var r=n(5638);t.exports=function(t,e){for(var n=t.length;n--;)if(r(t[n][0],e))return n;return-1}},1876:(t,e,n)=>{var r=n(5159),i=n(98);t.exports=function(t,e){return t&&r(e,i(e),t)}},5947:(t,e,n)=>{var r=n(5159),i=n(3893);t.exports=function(t,e){return t&&r(e,i(e),t)}},8799:(t,e,n)=>{var r=n(2630);t.exports=function(t,e,n){"__proto__"==e&&r?r(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},699:(t,e,n)=>{var r=n(3694),i=n(594),o=n(1928),a=n(1876),s=n(5947),u=n(2734),l=n(7561),c=n(7262),h=n(7048),f=n(1385),p=n(9759),d=n(3533),m=n(6541),v=n(2078),g=n(7635),y=n(9785),b=n(3854),_=n(8247),x=n(1611),w=n(7614),E=n(98),S=n(3893),T="[object Arguments]",A="[object Function]",M="[object Object]",C={};C[T]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[M]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[A]=C["[object WeakMap]"]=!1,t.exports=function t(e,n,O,P,k,I){var L,R=1&n,D=2&n,N=4&n;if(O&&(L=k?O(e,P,k,I):O(e)),void 0!==L)return L;if(!x(e))return e;var F=y(e);if(F){if(L=m(e),!R)return l(e,L)}else{var j=d(e),U=j==A||"[object GeneratorFunction]"==j;if(b(e))return u(e,R);if(j==M||j==T||U&&!k){if(L=D||U?{}:g(e),!R)return D?h(e,s(L,e)):c(e,a(L,e))}else{if(!C[j])return k?e:{};L=v(e,j,R)}}I||(I=new r);var z=I.get(e);if(z)return z;I.set(e,L),w(e)?e.forEach((function(r){L.add(t(r,n,O,r,e,I))})):_(e)&&e.forEach((function(r,i){L.set(i,t(r,n,O,i,e,I))}));var B=F?void 0:(N?D?p:f:D?S:E)(e);return i(B||e,(function(r,i){B&&(r=e[i=r]),o(L,i,t(r,n,O,i,e,I))})),L}},158:(t,e,n)=>{var r=n(1611),i=Object.create,o=function(){function t(){}return function(e){if(!r(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();t.exports=o},2033:(t,e,n)=>{var r=n(6194),i=n(6789)(r);t.exports=i},9819:(t,e,n)=>{var r=n(8911)();t.exports=r},6194:(t,e,n)=>{var r=n(9819),i=n(98);t.exports=function(t,e){return t&&r(t,e,i)}},9867:(t,e,n)=>{var r=n(6747),i=n(7948);t.exports=function(t,e){for(var n=0,o=(e=r(e,t)).length;null!=t&&n<o;)t=t[i(e[n++])];return n&&n==o?t:void 0}},1324:(t,e,n)=>{var r=n(7141),i=n(9785);t.exports=function(t,e,n){var o=e(t);return i(t)?o:r(o,n(t))}},9736:(t,e,n)=>{var r=n(6539),i=n(4840),o=n(1258),a=r?r.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":a&&a in Object(t)?i(t):o(t)}},1610:t=>{t.exports=function(t,e){return null!=t&&e in Object(t)}},5829:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return i(t)&&"[object Arguments]"==r(t)}},2866:(t,e,n)=>{var r=n(2772),i=n(2360);t.exports=function t(e,n,o,a,s){return e===n||(null==e||null==n||!i(e)&&!i(n)?e!=e&&n!=n:r(e,n,o,a,t,s))}},2772:(t,e,n)=>{var r=n(3694),i=n(7042),o=n(370),a=n(9584),s=n(3533),u=n(9785),l=n(3854),c=n(8519),h="[object Arguments]",f="[object Array]",p="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,m,v,g){var y=u(t),b=u(e),_=y?f:s(t),x=b?f:s(e),w=(_=_==h?p:_)==p,E=(x=x==h?p:x)==p,S=_==x;if(S&&l(t)){if(!l(e))return!1;y=!0,w=!1}if(S&&!w)return g||(g=new r),y||c(t)?i(t,e,n,m,v,g):o(t,e,_,n,m,v,g);if(!(1&n)){var T=w&&d.call(t,"__wrapped__"),A=E&&d.call(e,"__wrapped__");if(T||A){var M=T?t.value():t,C=A?e.value():e;return g||(g=new r),v(M,C,n,m,g)}}return!!S&&(g||(g=new r),a(t,e,n,m,v,g))}},7657:(t,e,n)=>{var r=n(3533),i=n(2360);t.exports=function(t){return i(t)&&"[object Map]"==r(t)}},9850:(t,e,n)=>{var r=n(3694),i=n(2866);t.exports=function(t,e,n,o){var a=n.length,s=a,u=!o;if(null==t)return!s;for(t=Object(t);a--;){var l=n[a];if(u&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++a<s;){var c=(l=n[a])[0],h=t[c],f=l[1];if(u&&l[2]){if(void 0===h&&!(c in t))return!1}else{var p=new r;if(o)var d=o(h,f,c,t,e,p);if(!(void 0===d?i(f,h,3,o,p):d))return!1}}return!0}},6729:(t,e,n)=>{var r=n(8338),i=n(9678),o=n(1611),a=n(6532),s=/^\[object .+?Constructor\]$/,u=Function.prototype,l=Object.prototype,c=u.toString,h=l.hasOwnProperty,f=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!o(t)||i(t))&&(r(t)?f:s).test(a(t))}},6903:(t,e,n)=>{var r=n(3533),i=n(2360);t.exports=function(t){return i(t)&&"[object Set]"==r(t)}},6972:(t,e,n)=>{var r=n(9736),i=n(4194),o=n(2360),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,t.exports=function(t){return o(t)&&i(t.length)&&!!a[r(t)]}},9278:(t,e,n)=>{var r=n(1410),i=n(7518),o=n(1137),a=n(9785),s=n(6001);t.exports=function(t){return"function"==typeof t?t:null==t?o:"object"==typeof t?a(t)?i(t[0],t[1]):r(t):s(t)}},186:(t,e,n)=>{var r=n(6016),i=n(962),o=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},9464:(t,e,n)=>{var r=n(1611),i=n(6016),o=n(1586),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!r(t))return o(t);var e=i(t),n=[];for(var s in t)("constructor"!=s||!e&&a.call(t,s))&&n.push(s);return n}},7375:(t,e,n)=>{var r=n(2033),i=n(68);t.exports=function(t,e){var n=-1,o=i(t)?Array(t.length):[];return r(t,(function(t,r,i){o[++n]=e(t,r,i)})),o}},1410:(t,e,n)=>{var r=n(9850),i=n(5102),o=n(5042);t.exports=function(t){var e=i(t);return 1==e.length&&e[0][2]?o(e[0][0],e[0][1]):function(n){return n===t||r(n,t,e)}}},7518:(t,e,n)=>{var r=n(2866),i=n(9729),o=n(9749),a=n(318),s=n(8302),u=n(5042),l=n(7948);t.exports=function(t,e){return a(t)&&s(e)?u(l(t),e):function(n){var a=i(n,t);return void 0===a&&a===e?o(n,t):r(e,a,3)}}},517:t=>{t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},301:(t,e,n)=>{var r=n(9867);t.exports=function(t){return function(e){return r(e,t)}}},4701:t=>{t.exports=function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}},4282:(t,e,n)=>{var r=n(6539),i=n(6070),o=n(9785),a=n(5193),s=r?r.prototype:void 0,u=s?s.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(o(e))return i(e,t)+"";if(a(e))return u?u.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},9334:t=>{t.exports=function(t){return function(e){return t(e)}}},5581:t=>{t.exports=function(t,e){return t.has(e)}},2079:(t,e,n)=>{var r=n(1137);t.exports=function(t){return"function"==typeof t?t:r}},6747:(t,e,n)=>{var r=n(9785),i=n(318),o=n(3419),a=n(5567);t.exports=function(t,e){return r(t)?t:i(t,e)?[t]:o(a(t))}},5825:(t,e,n)=>{var r=n(9942);t.exports=function(t){var e=new t.constructor(t.byteLength);return new r(e).set(new r(t)),e}},2734:(t,e,n)=>{t=n.nmd(t);var r=n(7400),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},1859:(t,e,n)=>{var r=n(5825);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}},9377:t=>{var e=/\w*$/;t.exports=function(t){var n=new t.constructor(t.source,e.exec(t));return n.lastIndex=t.lastIndex,n}},4116:(t,e,n)=>{var r=n(6539),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;t.exports=function(t){return o?Object(o.call(t)):{}}},3428:(t,e,n)=>{var r=n(5825);t.exports=function(t,e){var n=e?r(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},7561:t=>{t.exports=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},5159:(t,e,n)=>{var r=n(1928),i=n(8799);t.exports=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,u=e.length;++s<u;){var l=e[s],c=o?o(n[l],t[l],l,n,t):void 0;void 0===c&&(c=t[l]),a?i(n,l,c):r(n,l,c)}return n}},7262:(t,e,n)=>{var r=n(5159),i=n(3080);t.exports=function(t,e){return r(t,i(t),e)}},7048:(t,e,n)=>{var r=n(5159),i=n(791);t.exports=function(t,e){return r(t,i(t),e)}},4937:(t,e,n)=>{var r=n(7400)["__core-js_shared__"];t.exports=r},6789:(t,e,n)=>{var r=n(68);t.exports=function(t,e){return function(n,i){if(null==n)return n;if(!r(n))return t(n,i);for(var o=n.length,a=e?o:-1,s=Object(n);(e?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},8911:t=>{t.exports=function(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}},2630:(t,e,n)=>{var r=n(1822),i=function(){try{var t=r(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=i},7042:(t,e,n)=>{var r=n(2485),i=n(756),o=n(5581);t.exports=function(t,e,n,a,s,u){var l=1&n,c=t.length,h=e.length;if(c!=h&&!(l&&h>c))return!1;var f=u.get(t),p=u.get(e);if(f&&p)return f==e&&p==t;var d=-1,m=!0,v=2&n?new r:void 0;for(u.set(t,e),u.set(e,t);++d<c;){var g=t[d],y=e[d];if(a)var b=l?a(y,g,d,e,t,u):a(g,y,d,t,e,u);if(void 0!==b){if(b)continue;m=!1;break}if(v){if(!i(e,(function(t,e){if(!o(v,e)&&(g===t||s(g,t,n,a,u)))return v.push(e)}))){m=!1;break}}else if(g!==y&&!s(g,y,n,a,u)){m=!1;break}}return u.delete(t),u.delete(e),m}},370:(t,e,n)=>{var r=n(6539),i=n(9942),o=n(5638),a=n(7042),s=n(9383),u=n(3735),l=r?r.prototype:void 0,c=l?l.valueOf:void 0;t.exports=function(t,e,n,r,l,h,f){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!h(new i(t),new i(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=s;case"[object Set]":var d=1&r;if(p||(p=u),t.size!=e.size&&!d)return!1;var m=f.get(t);if(m)return m==e;r|=2,f.set(t,e);var v=a(p(t),p(e),r,l,h,f);return f.delete(t),v;case"[object Symbol]":if(c)return c.call(t)==c.call(e)}return!1}},9584:(t,e,n)=>{var r=n(1385),i=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,o,a,s){var u=1&n,l=r(t),c=l.length;if(c!=r(e).length&&!u)return!1;for(var h=c;h--;){var f=l[h];if(!(u?f in e:i.call(e,f)))return!1}var p=s.get(t),d=s.get(e);if(p&&d)return p==e&&d==t;var m=!0;s.set(t,e),s.set(e,t);for(var v=u;++h<c;){var g=t[f=l[h]],y=e[f];if(o)var b=u?o(y,g,f,e,t,s):o(g,y,f,t,e,s);if(!(void 0===b?g===y||a(g,y,n,o,s):b)){m=!1;break}v||(v="constructor"==f)}if(m&&!v){var _=t.constructor,x=e.constructor;_==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(m=!1)}return s.delete(t),s.delete(e),m}},9120:(t,e,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;t.exports=r},1385:(t,e,n)=>{var r=n(1324),i=n(3080),o=n(98);t.exports=function(t){return r(t,o,i)}},9759:(t,e,n)=>{var r=n(1324),i=n(791),o=n(3893);t.exports=function(t){return r(t,o,i)}},5899:(t,e,n)=>{var r=n(4479);t.exports=function(t,e){var n=t.__data__;return r(e)?n["string"==typeof e?"string":"hash"]:n.map}},5102:(t,e,n)=>{var r=n(8302),i=n(98);t.exports=function(t){for(var e=i(t),n=e.length;n--;){var o=e[n],a=t[o];e[n]=[o,a,r(a)]}return e}},1822:(t,e,n)=>{var r=n(6729),i=n(5371);t.exports=function(t,e){var n=i(t,e);return r(n)?n:void 0}},2173:(t,e,n)=>{var r=n(8023)(Object.getPrototypeOf,Object);t.exports=r},4840:(t,e,n)=>{var r=n(6539),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;t.exports=function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}},3080:(t,e,n)=>{var r=n(263),i=n(5937),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(t){return null==t?[]:(t=Object(t),r(a(t),(function(e){return o.call(t,e)})))}:i;t.exports=s},791:(t,e,n)=>{var r=n(7141),i=n(2173),o=n(3080),a=n(5937),s=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)r(e,o(t)),t=i(t);return e}:a;t.exports=s},3533:(t,e,n)=>{var r=n(2545),i=n(4538),o=n(4825),a=n(6151),s=n(6902),u=n(9736),l=n(6532),c="[object Map]",h="[object Promise]",f="[object Set]",p="[object WeakMap]",d="[object DataView]",m=l(r),v=l(i),g=l(o),y=l(a),b=l(s),_=u;(r&&_(new r(new ArrayBuffer(1)))!=d||i&&_(new i)!=c||o&&_(o.resolve())!=h||a&&_(new a)!=f||s&&_(new s)!=p)&&(_=function(t){var e=u(t),n="[object Object]"==e?t.constructor:void 0,r=n?l(n):"";if(r)switch(r){case m:return d;case v:return c;case g:return h;case y:return f;case b:return p}return e}),t.exports=_},5371:t=>{t.exports=function(t,e){return null==t?void 0:t[e]}},731:(t,e,n)=>{var r=n(6747),i=n(2900),o=n(9785),a=n(2383),s=n(4194),u=n(7948);t.exports=function(t,e,n){for(var l=-1,c=(e=r(e,t)).length,h=!1;++l<c;){var f=u(e[l]);if(!(h=null!=t&&n(t,f)))break;t=t[f]}return h||++l!=c?h:!!(c=null==t?0:t.length)&&s(c)&&a(f,c)&&(o(t)||i(t))}},7753:(t,e,n)=>{var r=n(5718);t.exports=function(){this.__data__=r?r(null):{},this.size=0}},2452:t=>{t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},2115:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0}},8256:(t,e,n)=>{var r=n(5718),i=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return r?void 0!==e[t]:i.call(e,t)}},7426:(t,e,n)=>{var r=n(5718);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this}},6541:t=>{var e=Object.prototype.hasOwnProperty;t.exports=function(t){var n=t.length,r=new t.constructor(n);return n&&"string"==typeof t[0]&&e.call(t,"index")&&(r.index=t.index,r.input=t.input),r}},2078:(t,e,n)=>{var r=n(5825),i=n(1859),o=n(9377),a=n(4116),s=n(3428);t.exports=function(t,e,n){var u=t.constructor;switch(e){case"[object ArrayBuffer]":return r(t);case"[object Boolean]":case"[object Date]":return new u(+t);case"[object DataView]":return i(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(t,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(t);case"[object RegExp]":return o(t);case"[object Set]":return new u;case"[object Symbol]":return a(t)}}},7635:(t,e,n)=>{var r=n(158),i=n(2173),o=n(6016);t.exports=function(t){return"function"!=typeof t.constructor||o(t)?{}:r(i(t))}},2383:t=>{var e=/^(?:0|[1-9]\d*)$/;t.exports=function(t,n){var r=typeof t;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&e.test(t))&&t>-1&&t%1==0&&t<n}},318:(t,e,n)=>{var r=n(9785),i=n(5193),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;t.exports=function(t,e){if(r(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!i(t))||a.test(t)||!o.test(t)||null!=e&&t in Object(e)}},4479:t=>{t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},9678:(t,e,n)=>{var r,i=n(4937),o=(r=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+r:"";t.exports=function(t){return!!o&&o in t}},6016:t=>{var e=Object.prototype;t.exports=function(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||e)}},8302:(t,e,n)=>{var r=n(1611);t.exports=function(t){return t==t&&!r(t)}},9417:t=>{t.exports=function(){this.__data__=[],this.size=0}},2709:(t,e,n)=>{var r=n(3382),i=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=r(e,t);return!(n<0||(n==e.length-1?e.pop():i.call(e,n,1),--this.size,0))}},6165:(t,e,n)=>{var r=n(3382);t.exports=function(t){var e=this.__data__,n=r(e,t);return n<0?void 0:e[n][1]}},1873:(t,e,n)=>{var r=n(3382);t.exports=function(t){return r(this.__data__,t)>-1}},2556:(t,e,n)=>{var r=n(3382);t.exports=function(t,e){var n=this.__data__,i=r(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}},9448:(t,e,n)=>{var r=n(6586),i=n(6301),o=n(4538);t.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7738:(t,e,n)=>{var r=n(5899);t.exports=function(t){var e=r(this,t).delete(t);return this.size-=e?1:0,e}},6575:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).get(t)}},7238:(t,e,n)=>{var r=n(5899);t.exports=function(t){return r(this,t).has(t)}},8738:(t,e,n)=>{var r=n(5899);t.exports=function(t,e){var n=r(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}},9383:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}},5042:t=>{t.exports=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}}},2941:(t,e,n)=>{var r=n(6651);t.exports=function(t){var e=r(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},5718:(t,e,n)=>{var r=n(1822)(Object,"create");t.exports=r},962:(t,e,n)=>{var r=n(8023)(Object.keys,Object);t.exports=r},1586:t=>{t.exports=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}},8125:(t,e,n)=>{t=n.nmd(t);var r=n(9120),i=e&&!e.nodeType&&e,o=i&&t&&!t.nodeType&&t,a=o&&o.exports===i&&r.process,s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}();t.exports=s},1258:t=>{var e=Object.prototype.toString;t.exports=function(t){return e.call(t)}},8023:t=>{t.exports=function(t,e){return function(n){return t(e(n))}}},7400:(t,e,n)=>{var r=n(9120),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();t.exports=o},8639:t=>{t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},8379:t=>{t.exports=function(t){return this.__data__.has(t)}},3735:t=>{t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},7354:(t,e,n)=>{var r=n(6301);t.exports=function(){this.__data__=new r,this.size=0}},5863:t=>{t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},2367:t=>{t.exports=function(t){return this.__data__.get(t)}},3878:t=>{t.exports=function(t){return this.__data__.has(t)}},7569:(t,e,n)=>{var r=n(6301),i=n(4538),o=n(4554);t.exports=function(t,e){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(t,e),this.size=n.size,this}},3419:(t,e,n)=>{var r=n(2941),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(i,(function(t,n,r,i){e.push(r?i.replace(o,"$1"):n||t)})),e}));t.exports=a},7948:(t,e,n)=>{var r=n(5193);t.exports=function(t){if("string"==typeof t||r(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},6532:t=>{var e=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return e.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},454:(t,e,n)=>{var r=n(699);t.exports=function(t){return r(t,5)}},4495:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a=9007199254740991,s="[object Arguments]",u="[object Array]",l="[object Boolean]",c="[object Date]",h="[object Number]",f="[object Object]",p="[object RegExp]",d="[object String]",m=/[&<>"']/g,v=RegExp(m.source),g=/^(?:0|[1-9]\d*)$/,y="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,b="object"==typeof self&&self&&self.Object===Object&&self,_=y||b||Function("return this")();function x(t,e){return t.push.apply(t,e),t}function w(t){return function(e){return null==e?i:e[t]}}function E(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}e&&!e.nodeType&&e&&t&&t.nodeType;var S,T,A,M=(S={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},function(t){return null==S?i:S[t]}),C=Array.prototype,O=Object.prototype,P=O.hasOwnProperty,k=0,I=O.toString,L=_._,R=Object.create,D=O.propertyIsEnumerable,N=_.isFinite,F=(T=Object.keys,A=Object,function(t){return T(A(t))}),j=Math.max;function U(t){return t instanceof B?t:new B(t)}var z=function(){function t(){}return function(e){if(!Lt(e))return{};if(R)return R(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function B(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e}function V(t,e,n){var r=t[e];P.call(t,e)&&Ct(r,n)&&(n!==i||e in t)||H(t,e,n)}function H(t,e,n){t[e]=n}function G(t,e,n){if("function"!=typeof t)throw new TypeError(o);return setTimeout((function(){t.apply(i,n)}),e)}B.prototype=z(U.prototype),B.prototype.constructor=B;var W,q=(W=K,function(t,e){if(null==t)return t;if(!kt(t))return W(t,e);for(var n=t.length,r=-1,i=Object(t);++r<n&&!1!==e(i[r],r,i););return t});function X(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s:n(s,u)))var u=s,l=a}return l}function Y(t,e){var n=[];return q(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function Q(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=pt),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?Q(s,e-1,n,r,i):x(i,s):r||(i[i.length]=s)}return i}var Z=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t};function K(t,e){return t&&Z(t,e,Ht)}function $(t,e){return Y(e,(function(e){return It(t[e])}))}function J(t){return function(t){return I.call(t)}(t)}function tt(t,e){return t>e}var et=Kt;function nt(t,e,n,r,o){return t===e||(null==t||null==e||!Rt(t)&&!Rt(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var m=Pt(t),v=Pt(e),g=m?u:J(t),y=v?u:J(e),b=(g=g==s?f:g)==f,_=(y=y==s?f:y)==f,x=g==y;a||(a=[]);var w=xt(a,(function(e){return e[0]==t})),E=xt(a,(function(t){return t[0]==e}));if(w&&E)return w[1]==e;if(a.push([t,e]),a.push([e,t]),x&&!b){var S=m?function(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;for(var f=-1,p=!0,d=2&n?[]:i;++f<u;){var m=t[f],v=e[f];if(d){if(!ct(e,(function(t,e){if(!bt(d,e)&&(m===t||o(m,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(m!==v&&!o(m,v,n,r,a)){p=!1;break}}return p}(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case l:case c:case h:return Ct(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case p:case d:return t==e+""}return!1}(t,e,g);return a.pop(),S}if(!(1&n)){var T=b&&P.call(t,"__wrapped__"),A=_&&P.call(e,"__wrapped__");if(T||A)return S=o(T?t.value():t,A?e.value():e,n,r,a),a.pop(),S}return!!x&&(S=function(t,e,n,r,i,o){var a=1&n,s=Ht(t),u=s.length;if(u!=Ht(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:P.call(e,c)))return!1}var h=o.get(t),f=o.get(e);if(h&&f)return h==e&&f==t;for(var p=!0,d=a;++l<u;){var m=t[c=s[l]],v=e[c];if(m!==v&&!i(m,v,n,r,o)){p=!1;break}d||(d="constructor"==c)}if(p&&!d){var g=t.constructor,y=e.constructor;g==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(p=!1)}return p}(t,e,n,r,o,a),a.pop(),S)}(t,e,n,r,nt,o))}function rt(t){return"function"==typeof t?t:null==t?Xt:("object"==typeof t?at:w)(t)}function it(t,e){return t<e}function ot(t,e){var n=-1,r=kt(t)?Array(t.length):[];return q(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function at(t){var e=F(t);return function(n){var r=e.length;if(null==n)return!r;for(n=Object(n);r--;){var i=e[r];if(!(i in n)||!nt(t[i],n[i],3))return!1}return!0}}function st(t,e){return vt(mt(t,e,Xt),t+"")}function ut(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=Array(i);++r<i;)o[r]=t[r+e];return o}function lt(t){return ut(t,0,t.length)}function ct(t,e){var n;return q(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ht(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?H(n,u,l):V(n,u,l)}return n}function ft(t){return st((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,e=Object(e);++r<o;){var s=n[r];s&&t(e,s,r,a)}return e}))}function pt(t){return Pt(t)||Ot(t)}function dt(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}function mt(t,e,n){return e=j(e===i?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=j(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),t.apply(this,s)}}var vt=Xt;function gt(t){return null!=t&&t.length?Q(t,1):[]}function yt(t){return t&&t.length?t[0]:i}function bt(t,e,n){for(var r=null==t?0:t.length,i=((n="number"==typeof n?n<0?j(r+n,0):n:0)||0)-1,o=e==e;++i<r;){var a=t[i];if(o?a===e:a!=a)return i}return-1}var _t,xt=(_t=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Ft(n);return i<0&&(i=j(r+i,0)),function(t,e,n,r){for(var i=t.length,o=n+-1;++o<i;)if(e(t[o],o,t))return o;return-1}(t,rt(e),i)},function(t,e,n){var r=Object(t);if(!kt(t)){var o=rt(e);t=Ht(t),e=function(t){return o(r[t],t,r)}}var a=_t(t,e,n);return a>-1?r[o?t[a]:a]:i});function wt(t,e){return q(t,rt(e))}function Et(t,e,n){return E(t,rt(e),n,arguments.length<3,q)}function St(t,e){var n;if("function"!=typeof e)throw new TypeError(o);return t=Ft(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Tt=st((function(t,e,n){return function(t,e,n,r){if("function"!=typeof t)throw new TypeError(o);var i=1&e,a=function(t){return function(){var e=arguments,n=z(t.prototype),r=t.apply(n,e);return Lt(r)?r:n}}(t);return function e(){for(var o=-1,s=arguments.length,u=-1,l=r.length,c=Array(l+s),h=this&&this!==_&&this instanceof e?a:t;++u<l;)c[u]=r[u];for(;s--;)c[u++]=arguments[++o];return h.apply(i?n:this,c)}}(t,33,e,n)})),At=st((function(t,e){return G(t,1,e)})),Mt=st((function(t,e,n){return G(t,jt(e)||0,n)}));function Ct(t,e){return t===e||t!=t&&e!=e}var Ot=et(function(){return arguments}())?et:function(t){return Rt(t)&&P.call(t,"callee")&&!D.call(t,"callee")},Pt=Array.isArray;function kt(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!It(t)}function It(t){if(!Lt(t))return!1;var e=J(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}function Lt(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function Rt(t){return null!=t&&"object"==typeof t}function Dt(t){return"number"==typeof t||Rt(t)&&J(t)==h}function Nt(t){return"string"==typeof t||!Pt(t)&&Rt(t)&&J(t)==d}var Ft=Number,jt=Number;function Ut(t){return"string"==typeof t?t:null==t?"":t+""}var zt=ft((function(t,e){ht(e,F(e),t)})),Bt=ft((function(t,e){ht(e,dt(e),t)})),Vt=st((function(t,e){t=Object(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&function(t,e,n){if(!Lt(n))return!1;var r=typeof e;return!!("number"==r?kt(n)&&function(t,e){var n=typeof t;return!!(e=null==e?a:e)&&("number"==n||"symbol"!=n&&g.test(t))&&t>-1&&t%1==0&&t<e}(e,n.length):"string"==r&&e in n)&&Ct(n[e],t)}(e[0],e[1],o)&&(r=1);++n<r;)for(var s=e[n],u=Gt(s),l=-1,c=u.length;++l<c;){var h=u[l],f=t[h];(f===i||Ct(f,O[h])&&!P.call(t,h))&&(t[h]=s[h])}return t})),Ht=F,Gt=dt,Wt=function(t){return vt(mt(t,i,gt),t+"")}((function(t,e){return null==t?{}:function(t,e){return t=Object(t),Et(e,(function(e,n){return n in t&&(e[n]=t[n]),e}),{})}(t,e)}));function qt(t){return null==t?[]:function(t,e){return ot(e,(function(e){return t[e]}))}(t,Ht(t))}function Xt(t){return t}var Yt,Qt=rt;function Zt(t,e,n){var r=Ht(e),i=$(e,r);null!=n||Lt(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=$(e,Ht(e)));var o=!(Lt(n)&&"chain"in n&&!n.chain),a=It(t);return q(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=lt(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,x([this.value()],arguments))})})),t}function Kt(){}U.assignIn=Bt,U.before=St,U.bind=Tt,U.chain=function(t){var e=U(t);return e.__chain__=!0,e},U.compact=function(t){return Y(t,Boolean)},U.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return x(Pt(n)?lt(n):[n],Q(e,1))},U.create=function(t,e){var n=z(t);return null==e?n:zt(n,e)},U.defaults=Vt,U.defer=At,U.delay=Mt,U.filter=function(t,e){return Y(t,rt(e))},U.flatten=gt,U.flattenDeep=function(t){return null!=t&&t.length?Q(t,1/0):[]},U.iteratee=Qt,U.keys=Ht,U.map=function(t,e){return ot(t,rt(e))},U.matches=function(t){return at(zt({},t))},U.mixin=Zt,U.negate=function(t){if("function"!=typeof t)throw new TypeError(o);return function(){var e=arguments;return!t.apply(this,e)}},U.once=function(t){return St(2,t)},U.pick=Wt,U.slice=function(t,e,n){var r=null==t?0:t.length;return e=null==e?0:+e,n=n===i?r:+n,r?ut(t,e,n):[]},U.sortBy=function(t,e){var n=0;return e=rt(e),ot(ot(t,(function(t,r,i){return{value:t,index:n++,criteria:e(t,r,i)}})).sort((function(t,e){return function(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=e!==i,s=null===e,u=e==e;if(!s&&t>e||r&&a&&u||!n&&u||!o)return 1;if(!r&&t<e||s&&n&&o||!a&&o||!u)return-1}return 0}(t.criteria,e.criteria)||t.index-e.index})),w("value"))},U.tap=function(t,e){return e(t),t},U.thru=function(t,e){return e(t)},U.toArray=function(t){return kt(t)?t.length?lt(t):[]:qt(t)},U.values=qt,U.extend=Bt,Zt(U,U),U.clone=function(t){return Lt(t)?Pt(t)?lt(t):ht(t,F(t)):t},U.escape=function(t){return(t=Ut(t))&&v.test(t)?t.replace(m,M):t},U.every=function(t,e,n){return function(t,e){var n=!0;return q(t,(function(t,r,i){return n=!!e(t,r,i)})),n}(t,rt(e=n?i:e))},U.find=xt,U.forEach=wt,U.has=function(t,e){return null!=t&&P.call(t,e)},U.head=yt,U.identity=Xt,U.indexOf=bt,U.isArguments=Ot,U.isArray=Pt,U.isBoolean=function(t){return!0===t||!1===t||Rt(t)&&J(t)==l},U.isDate=function(t){return Rt(t)&&J(t)==c},U.isEmpty=function(t){return kt(t)&&(Pt(t)||Nt(t)||It(t.splice)||Ot(t))?!t.length:!F(t).length},U.isEqual=function(t,e){return nt(t,e)},U.isFinite=function(t){return"number"==typeof t&&N(t)},U.isFunction=It,U.isNaN=function(t){return Dt(t)&&t!=+t},U.isNull=function(t){return null===t},U.isNumber=Dt,U.isObject=Lt,U.isRegExp=function(t){return Rt(t)&&J(t)==p},U.isString=Nt,U.isUndefined=function(t){return t===i},U.last=function(t){var e=null==t?0:t.length;return e?t[e-1]:i},U.max=function(t){return t&&t.length?X(t,Xt,tt):i},U.min=function(t){return t&&t.length?X(t,Xt,it):i},U.noConflict=function(){return _._===this&&(_._=L),this},U.noop=Kt,U.reduce=Et,U.result=function(t,e,n){var r=null==t?i:t[e];return r===i&&(r=n),It(r)?r.call(t):r},U.size=function(t){return null==t?0:(t=kt(t)?t:F(t)).length},U.some=function(t,e,n){return ct(t,rt(e=n?i:e))},U.uniqueId=function(t){var e=++k;return Ut(t)+e},U.each=wt,U.first=yt,Zt(U,(Yt={},K(U,(function(t,e){P.call(U.prototype,e)||(Yt[e]=t)})),Yt),{chain:!1}),U.VERSION="4.17.20",q(["pop","join","replace","reverse","split","push","shift","sort","splice","unshift"],(function(t){var e=(/^(?:replace|split)$/.test(t)?String.prototype:C)[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|join|replace|shift)$/.test(t);U.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Pt(i)?i:[],t)}return this[n]((function(n){return e.apply(Pt(n)?n:[],t)}))}})),U.prototype.toJSON=U.prototype.valueOf=U.prototype.value=function(){return t=this.__wrapped__,Et(this.__actions__,(function(t,e){return e.func.apply(e.thisArg,x([t],e.args))}),t);var t},_._=U,(r=function(){return U}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},5638:t=>{t.exports=function(t,e){return t===e||t!=t&&e!=e}},4916:(t,e,n)=>{var r=n(6194),i=n(2079);t.exports=function(t,e){return t&&r(t,i(e))}},9729:(t,e,n)=>{var r=n(9867);t.exports=function(t,e,n){var i=null==t?void 0:r(t,e);return void 0===i?n:i}},9749:(t,e,n)=>{var r=n(1610),i=n(731);t.exports=function(t,e){return null!=t&&i(t,e,r)}},1137:t=>{t.exports=function(t){return t}},2900:(t,e,n)=>{var r=n(5829),i=n(2360),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,u=r(function(){return arguments}())?r:function(t){return i(t)&&a.call(t,"callee")&&!s.call(t,"callee")};t.exports=u},9785:t=>{var e=Array.isArray;t.exports=e},68:(t,e,n)=>{var r=n(8338),i=n(4194);t.exports=function(t){return null!=t&&i(t.length)&&!r(t)}},3854:(t,e,n)=>{t=n.nmd(t);var r=n(7400),i=n(7714),o=e&&!e.nodeType&&e,a=o&&t&&!t.nodeType&&t,s=a&&a.exports===o?r.Buffer:void 0,u=(s?s.isBuffer:void 0)||i;t.exports=u},8338:(t,e,n)=>{var r=n(9736),i=n(1611);t.exports=function(t){if(!i(t))return!1;var e=r(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},4194:t=>{t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},8247:(t,e,n)=>{var r=n(7657),i=n(9334),o=n(8125),a=o&&o.isMap,s=a?i(a):r;t.exports=s},1611:t=>{t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},2360:t=>{t.exports=function(t){return null!=t&&"object"==typeof t}},861:(t,e,n)=>{var r=n(9736),i=n(2173),o=n(2360),a=Function.prototype,s=Object.prototype,u=a.toString,l=s.hasOwnProperty,c=u.call(Object);t.exports=function(t){if(!o(t)||"[object Object]"!=r(t))return!1;var e=i(t);if(null===e)return!0;var n=l.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==c}},7614:(t,e,n)=>{var r=n(6903),i=n(9334),o=n(8125),a=o&&o.isSet,s=a?i(a):r;t.exports=s},7206:(t,e,n)=>{var r=n(9736),i=n(9785),o=n(2360);t.exports=function(t){return"string"==typeof t||!i(t)&&o(t)&&"[object String]"==r(t)}},5193:(t,e,n)=>{var r=n(9736),i=n(2360);t.exports=function(t){return"symbol"==typeof t||i(t)&&"[object Symbol]"==r(t)}},8519:(t,e,n)=>{var r=n(6972),i=n(9334),o=n(8125),a=o&&o.isTypedArray,s=a?i(a):r;t.exports=s},98:(t,e,n)=>{var r=n(8213),i=n(186),o=n(68);t.exports=function(t){return o(t)?r(t):i(t)}},3893:(t,e,n)=>{var r=n(8213),i=n(9464),o=n(68);t.exports=function(t){return o(t)?r(t,!0):i(t)}},8784:function(t,e,n){var r;t=n.nmd(t),function(){var i,o="Expected a function",a="__lodash_hash_undefined__",s="__lodash_placeholder__",u=32,l=128,c=1/0,h=9007199254740991,f=NaN,p=4294967295,d=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",u],["partialRight",64],["rearg",256]],m="[object Arguments]",v="[object Array]",g="[object Boolean]",y="[object Date]",b="[object Error]",_="[object Function]",x="[object GeneratorFunction]",w="[object Map]",E="[object Number]",S="[object Object]",T="[object Promise]",A="[object RegExp]",M="[object Set]",C="[object String]",O="[object Symbol]",P="[object WeakMap]",k="[object ArrayBuffer]",I="[object DataView]",L="[object Float32Array]",R="[object Float64Array]",D="[object Int8Array]",N="[object Int16Array]",F="[object Int32Array]",j="[object Uint8Array]",U="[object Uint8ClampedArray]",z="[object Uint16Array]",B="[object Uint32Array]",V=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,G=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,q=/[&<>"']/g,X=RegExp(W.source),Y=RegExp(q.source),Q=/<%-([\s\S]+?)%>/g,Z=/<%([\s\S]+?)%>/g,K=/<%=([\s\S]+?)%>/g,$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,nt=RegExp(et.source),rt=/^\s+|\s+$/g,it=/^\s+/,ot=/\s+$/,at=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,st=/\{\n\/\* \[wrapped with (.+)\] \*/,ut=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ct=/\\(\\)?/g,ht=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ft=/\w*$/,pt=/^[-+]0x[0-9a-f]+$/i,dt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,vt=/^0o[0-7]+$/i,gt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,xt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",wt="a-z\\xdf-\\xf6\\xf8-\\xff",Et="A-Z\\xc0-\\xd6\\xd8-\\xde",St="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Tt="["+St+"]",At="["+xt+"]",Mt="\\d+",Ct="["+wt+"]",Ot="[^\\ud800-\\udfff"+St+Mt+"\\u2700-\\u27bf"+wt+Et+"]",Pt="\\ud83c[\\udffb-\\udfff]",kt="[^\\ud800-\\udfff]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",Lt="[\\ud800-\\udbff][\\udc00-\\udfff]",Rt="["+Et+"]",Dt="(?:"+Ct+"|"+Ot+")",Nt="(?:"+Rt+"|"+Ot+")",Ft="(?:['’](?:d|ll|m|re|s|t|ve))?",jt="(?:['’](?:D|LL|M|RE|S|T|VE))?",Ut="(?:"+At+"|"+Pt+")?",zt="[\\ufe0e\\ufe0f]?",Bt=zt+Ut+"(?:\\u200d(?:"+[kt,It,Lt].join("|")+")"+zt+Ut+")*",Vt="(?:"+["[\\u2700-\\u27bf]",It,Lt].join("|")+")"+Bt,Ht="(?:"+[kt+At+"?",At,It,Lt,"[\\ud800-\\udfff]"].join("|")+")",Gt=RegExp("['’]","g"),Wt=RegExp(At,"g"),qt=RegExp(Pt+"(?="+Pt+")|"+Ht+Bt,"g"),Xt=RegExp([Rt+"?"+Ct+"+"+Ft+"(?="+[Tt,Rt,"$"].join("|")+")",Nt+"+"+jt+"(?="+[Tt,Rt+Dt,"$"].join("|")+")",Rt+"?"+Dt+"+"+Ft,Rt+"+"+jt,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Mt,Vt].join("|"),"g"),Yt=RegExp("[\\u200d\\ud800-\\udfff"+xt+"\\ufe0e\\ufe0f]"),Qt=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Kt=-1,$t={};$t[L]=$t[R]=$t[D]=$t[N]=$t[F]=$t[j]=$t[U]=$t[z]=$t[B]=!0,$t[m]=$t[v]=$t[k]=$t[g]=$t[I]=$t[y]=$t[b]=$t[_]=$t[w]=$t[E]=$t[S]=$t[A]=$t[M]=$t[C]=$t[P]=!1;var Jt={};Jt[m]=Jt[v]=Jt[k]=Jt[I]=Jt[g]=Jt[y]=Jt[L]=Jt[R]=Jt[D]=Jt[N]=Jt[F]=Jt[w]=Jt[E]=Jt[S]=Jt[A]=Jt[M]=Jt[C]=Jt[O]=Jt[j]=Jt[U]=Jt[z]=Jt[B]=!0,Jt[b]=Jt[_]=Jt[P]=!1;var te={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ee=parseFloat,ne=parseInt,re="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,ie="object"==typeof self&&self&&self.Object===Object&&self,oe=re||ie||Function("return this")(),ae=e&&!e.nodeType&&e,se=ae&&t&&!t.nodeType&&t,ue=se&&se.exports===ae,le=ue&&re.process,ce=function(){try{return se&&se.require&&se.require("util").types||le&&le.binding&&le.binding("util")}catch(t){}}(),he=ce&&ce.isArrayBuffer,fe=ce&&ce.isDate,pe=ce&&ce.isMap,de=ce&&ce.isRegExp,me=ce&&ce.isSet,ve=ce&&ce.isTypedArray;function ge(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ye(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function be(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function _e(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function xe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function we(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Ee(t,e){return!(null==t||!t.length)&&Le(t,e,0)>-1}function Se(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Te(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ae(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Me(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ce(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Oe(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Pe=Fe("length");function ke(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ie(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Le(t,e,n){return e==e?function(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ie(t,De,n)}function Re(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function De(t){return t!=t}function Ne(t,e){var n=null==t?0:t.length;return n?ze(t,e)/n:f}function Fe(t){return function(e){return null==e?i:e[t]}}function je(t){return function(e){return null==t?i:t[e]}}function Ue(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function ze(t,e){for(var n,r=-1,o=t.length;++r<o;){var a=e(t[r]);a!==i&&(n=n===i?a:n+a)}return n}function Be(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ve(t){return function(e){return t(e)}}function He(t,e){return Te(e,(function(e){return t[e]}))}function Ge(t,e){return t.has(e)}function We(t,e){for(var n=-1,r=t.length;++n<r&&Le(e,t[n],0)>-1;);return n}function qe(t,e){for(var n=t.length;n--&&Le(e,t[n],0)>-1;);return n}function Xe(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var Ye=je({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"}),Qe=je({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ze(t){return"\\"+te[t]}function Ke(t){return Yt.test(t)}function $e(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function Je(t,e){return function(n){return t(e(n))}}function tn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n];a!==e&&a!==s||(t[n]=s,o[i++]=n)}return o}function en(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function nn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function rn(t){return Ke(t)?function(t){for(var e=qt.lastIndex=0;qt.test(t);)++e;return e}(t):Pe(t)}function on(t){return Ke(t)?function(t){return t.match(qt)||[]}(t):function(t){return t.split("")}(t)}var an=je({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),sn=function t(e){var n,r=(e=null==e?oe:sn.defaults(oe.Object(),e,sn.pick(oe,Zt))).Array,xt=e.Date,wt=e.Error,Et=e.Function,St=e.Math,Tt=e.Object,At=e.RegExp,Mt=e.String,Ct=e.TypeError,Ot=r.prototype,Pt=Et.prototype,kt=Tt.prototype,It=e["__core-js_shared__"],Lt=Pt.toString,Rt=kt.hasOwnProperty,Dt=0,Nt=(n=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ft=kt.toString,jt=Lt.call(Tt),Ut=oe._,zt=At("^"+Lt.call(Rt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Bt=ue?e.Buffer:i,Vt=e.Symbol,Ht=e.Uint8Array,qt=Bt?Bt.allocUnsafe:i,Yt=Je(Tt.getPrototypeOf,Tt),te=Tt.create,re=kt.propertyIsEnumerable,ie=Ot.splice,ae=Vt?Vt.isConcatSpreadable:i,se=Vt?Vt.iterator:i,le=Vt?Vt.toStringTag:i,ce=function(){try{var t=uo(Tt,"defineProperty");return t({},"",{}),t}catch(t){}}(),Pe=e.clearTimeout!==oe.clearTimeout&&e.clearTimeout,je=xt&&xt.now!==oe.Date.now&&xt.now,un=e.setTimeout!==oe.setTimeout&&e.setTimeout,ln=St.ceil,cn=St.floor,hn=Tt.getOwnPropertySymbols,fn=Bt?Bt.isBuffer:i,pn=e.isFinite,dn=Ot.join,mn=Je(Tt.keys,Tt),vn=St.max,gn=St.min,yn=xt.now,bn=e.parseInt,_n=St.random,xn=Ot.reverse,wn=uo(e,"DataView"),En=uo(e,"Map"),Sn=uo(e,"Promise"),Tn=uo(e,"Set"),An=uo(e,"WeakMap"),Mn=uo(Tt,"create"),Cn=An&&new An,On={},Pn=jo(wn),kn=jo(En),In=jo(Sn),Ln=jo(Tn),Rn=jo(An),Dn=Vt?Vt.prototype:i,Nn=Dn?Dn.valueOf:i,Fn=Dn?Dn.toString:i;function jn(t){if(es(t)&&!Ga(t)&&!(t instanceof Vn)){if(t instanceof Bn)return t;if(Rt.call(t,"__wrapped__"))return Uo(t)}return new Bn(t)}var Un=function(){function t(){}return function(e){if(!ts(e))return{};if(te)return te(e);t.prototype=e;var n=new t;return t.prototype=i,n}}();function zn(){}function Bn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=i}function Vn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=p,this.__views__=[]}function Hn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Wn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function qn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Wn;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Gn(t);this.size=e.size}function Yn(t,e){var n=Ga(t),r=!n&&Ha(t),i=!n&&!r&&Ya(t),o=!n&&!r&&!i&&ls(t),a=n||r||i||o,s=a?Be(t.length,Mt):[],u=s.length;for(var l in t)!e&&!Rt.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||vo(l,u))||s.push(l);return s}function Qn(t){var e=t.length;return e?t[Wr(0,e-1)]:i}function Zn(t,e){return Lo(Ai(t),or(e,0,t.length))}function Kn(t){return Lo(Ai(t))}function $n(t,e,n){(n!==i&&!za(t[e],n)||n===i&&!(e in t))&&rr(t,e,n)}function Jn(t,e,n){var r=t[e];Rt.call(t,e)&&za(r,n)&&(n!==i||e in t)||rr(t,e,n)}function tr(t,e){for(var n=t.length;n--;)if(za(t[n][0],e))return n;return-1}function er(t,e,n,r){return cr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function nr(t,e){return t&&Mi(e,ks(e),t)}function rr(t,e,n){"__proto__"==e&&ce?ce(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ir(t,e){for(var n=-1,o=e.length,a=r(o),s=null==t;++n<o;)a[n]=s?i:As(t,e[n]);return a}function or(t,e,n){return t==t&&(n!==i&&(t=t<=n?t:n),e!==i&&(t=t>=e?t:e)),t}function ar(t,e,n,r,o,a){var s,u=1&e,l=2&e,c=4&e;if(n&&(s=o?n(t,r,o,a):n(t)),s!==i)return s;if(!ts(t))return t;var h=Ga(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Rt.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Ai(t,s)}else{var f=ho(t),p=f==_||f==x;if(Ya(t))return _i(t,u);if(f==S||f==m||p&&!o){if(s=l||p?{}:po(t),!u)return l?function(t,e){return Mi(t,co(t),e)}(t,function(t,e){return t&&Mi(e,Is(e),t)}(s,t)):function(t,e){return Mi(t,lo(t),e)}(t,nr(s,t))}else{if(!Jt[f])return o?t:{};s=function(t,e,n){var r,i=t.constructor;switch(e){case k:return xi(t);case g:case y:return new i(+t);case I:return function(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case R:case D:case N:case F:case j:case U:case z:case B:return wi(t,n);case w:return new i;case E:case C:return new i(t);case A:return function(t){var e=new t.constructor(t.source,ft.exec(t));return e.lastIndex=t.lastIndex,e}(t);case M:return new i;case O:return r=t,Nn?Tt(Nn.call(r)):{}}}(t,f,u)}}a||(a=new Xn);var d=a.get(t);if(d)return d;a.set(t,s),as(t)?t.forEach((function(r){s.add(ar(r,e,n,r,t,a))})):ns(t)&&t.forEach((function(r,i){s.set(i,ar(r,e,n,i,t,a))}));var v=h?i:(c?l?eo:to:l?Is:ks)(t);return be(v||t,(function(r,i){v&&(r=t[i=r]),Jn(s,i,ar(r,e,n,i,t,a))})),s}function sr(t,e,n){var r=n.length;if(null==t)return!r;for(t=Tt(t);r--;){var o=n[r],a=e[o],s=t[o];if(s===i&&!(o in t)||!a(s))return!1}return!0}function ur(t,e,n){if("function"!=typeof t)throw new Ct(o);return Oo((function(){t.apply(i,n)}),e)}function lr(t,e,n,r){var i=-1,o=Ee,a=!0,s=t.length,u=[],l=e.length;if(!s)return u;n&&(e=Te(e,Ve(n))),r?(o=Se,a=!1):e.length>=200&&(o=Ge,a=!1,e=new qn(e));t:for(;++i<s;){var c=t[i],h=null==n?c:n(c);if(c=r||0!==c?c:0,a&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}jn.templateSettings={escape:Q,evaluate:Z,interpolate:K,variable:"",imports:{_:jn}},jn.prototype=zn.prototype,jn.prototype.constructor=jn,Bn.prototype=Un(zn.prototype),Bn.prototype.constructor=Bn,Vn.prototype=Un(zn.prototype),Vn.prototype.constructor=Vn,Hn.prototype.clear=function(){this.__data__=Mn?Mn(null):{},this.size=0},Hn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Hn.prototype.get=function(t){var e=this.__data__;if(Mn){var n=e[t];return n===a?i:n}return Rt.call(e,t)?e[t]:i},Hn.prototype.has=function(t){var e=this.__data__;return Mn?e[t]!==i:Rt.call(e,t)},Hn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Mn&&e===i?a:e,this},Gn.prototype.clear=function(){this.__data__=[],this.size=0},Gn.prototype.delete=function(t){var e=this.__data__,n=tr(e,t);return!(n<0||(n==e.length-1?e.pop():ie.call(e,n,1),--this.size,0))},Gn.prototype.get=function(t){var e=this.__data__,n=tr(e,t);return n<0?i:e[n][1]},Gn.prototype.has=function(t){return tr(this.__data__,t)>-1},Gn.prototype.set=function(t,e){var n=this.__data__,r=tr(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},Wn.prototype.clear=function(){this.size=0,this.__data__={hash:new Hn,map:new(En||Gn),string:new Hn}},Wn.prototype.delete=function(t){var e=ao(this,t).delete(t);return this.size-=e?1:0,e},Wn.prototype.get=function(t){return ao(this,t).get(t)},Wn.prototype.has=function(t){return ao(this,t).has(t)},Wn.prototype.set=function(t,e){var n=ao(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},qn.prototype.add=qn.prototype.push=function(t){return this.__data__.set(t,a),this},qn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Gn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Gn){var r=n.__data__;if(!En||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new Wn(r)}return n.set(t,e),this.size=n.size,this};var cr=Pi(yr),hr=Pi(br,!0);function fr(t,e){var n=!0;return cr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function pr(t,e,n){for(var r=-1,o=t.length;++r<o;){var a=t[r],s=e(a);if(null!=s&&(u===i?s==s&&!us(s):n(s,u)))var u=s,l=a}return l}function dr(t,e){var n=[];return cr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function mr(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=mo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?mr(s,e-1,n,r,i):Ae(i,s):r||(i[i.length]=s)}return i}var vr=ki(),gr=ki(!0);function yr(t,e){return t&&vr(t,e,ks)}function br(t,e){return t&&gr(t,e,ks)}function _r(t,e){return we(e,(function(e){return Ka(t[e])}))}function xr(t,e){for(var n=0,r=(e=vi(e,t)).length;null!=t&&n<r;)t=t[Fo(e[n++])];return n&&n==r?t:i}function wr(t,e,n){var r=e(t);return Ga(t)?r:Ae(r,n(t))}function Er(t){return null==t?t===i?"[object Undefined]":"[object Null]":le&&le in Tt(t)?function(t){var e=Rt.call(t,le),n=t[le];try{t[le]=i;var r=!0}catch(t){}var o=Ft.call(t);return r&&(e?t[le]=n:delete t[le]),o}(t):function(t){return Ft.call(t)}(t)}function Sr(t,e){return t>e}function Tr(t,e){return null!=t&&Rt.call(t,e)}function Ar(t,e){return null!=t&&e in Tt(t)}function Mr(t,e,n){for(var o=n?Se:Ee,a=t[0].length,s=t.length,u=s,l=r(s),c=1/0,h=[];u--;){var f=t[u];u&&e&&(f=Te(f,Ve(e))),c=gn(f.length,c),l[u]=!n&&(e||a>=120&&f.length>=120)?new qn(u&&f):i}f=t[0];var p=-1,d=l[0];t:for(;++p<a&&h.length<c;){var m=f[p],v=e?e(m):m;if(m=n||0!==m?m:0,!(d?Ge(d,v):o(h,v,n))){for(u=s;--u;){var g=l[u];if(!(g?Ge(g,v):o(t[u],v,n)))continue t}d&&d.push(v),h.push(m)}}return h}function Cr(t,e,n){var r=null==(t=To(t,e=vi(e,t)))?t:t[Fo(Zo(e))];return null==r?i:ge(r,t,n)}function Or(t){return es(t)&&Er(t)==m}function Pr(t,e,n,r,o){return t===e||(null==t||null==e||!es(t)&&!es(e)?t!=t&&e!=e:function(t,e,n,r,o,a){var s=Ga(t),u=Ga(e),l=s?v:ho(t),c=u?v:ho(e),h=(l=l==m?S:l)==S,f=(c=c==m?S:c)==S,p=l==c;if(p&&Ya(t)){if(!Ya(e))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new Xn),s||ls(t)?$i(t,e,n,r,o,a):function(t,e,n,r,i,o,a){switch(n){case I:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case k:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case g:case y:case E:return za(+t,+e);case b:return t.name==e.name&&t.message==e.message;case A:case C:return t==e+"";case w:var s=$e;case M:var u=1&r;if(s||(s=en),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=$i(s(t),s(e),r,i,o,a);return a.delete(t),c;case O:if(Nn)return Nn.call(t)==Nn.call(e)}return!1}(t,e,l,n,r,o,a);if(!(1&n)){var d=h&&Rt.call(t,"__wrapped__"),_=f&&Rt.call(e,"__wrapped__");if(d||_){var x=d?t.value():t,T=_?e.value():e;return a||(a=new Xn),o(x,T,n,r,a)}}return!!p&&(a||(a=new Xn),function(t,e,n,r,o,a){var s=1&n,u=to(t),l=u.length;if(l!=to(e).length&&!s)return!1;for(var c=l;c--;){var h=u[c];if(!(s?h in e:Rt.call(e,h)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var d=!0;a.set(t,e),a.set(e,t);for(var m=s;++c<l;){var v=t[h=u[c]],g=e[h];if(r)var y=s?r(g,v,h,e,t,a):r(v,g,h,t,e,a);if(!(y===i?v===g||o(v,g,n,r,a):y)){d=!1;break}m||(m="constructor"==h)}if(d&&!m){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,r,o,a))}(t,e,n,r,Pr,o))}function kr(t,e,n,r){var o=n.length,a=o,s=!r;if(null==t)return!a;for(t=Tt(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var l=(u=n[o])[0],c=t[l],h=u[1];if(s&&u[2]){if(c===i&&!(l in t))return!1}else{var f=new Xn;if(r)var p=r(c,h,l,t,e,f);if(!(p===i?Pr(h,c,3,r,f):p))return!1}}return!0}function Ir(t){return!(!ts(t)||(e=t,Nt&&Nt in e))&&(Ka(t)?zt:mt).test(jo(t));var e}function Lr(t){return"function"==typeof t?t:null==t?ru:"object"==typeof t?Ga(t)?jr(t[0],t[1]):Fr(t):fu(t)}function Rr(t){if(!xo(t))return mn(t);var e=[];for(var n in Tt(t))Rt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Dr(t,e){return t<e}function Nr(t,e){var n=-1,i=qa(t)?r(t.length):[];return cr(t,(function(t,r,o){i[++n]=e(t,r,o)})),i}function Fr(t){var e=so(t);return 1==e.length&&e[0][2]?Eo(e[0][0],e[0][1]):function(n){return n===t||kr(n,t,e)}}function jr(t,e){return yo(t)&&wo(e)?Eo(Fo(t),e):function(n){var r=As(n,t);return r===i&&r===e?Ms(n,t):Pr(e,r,3)}}function Ur(t,e,n,r,o){t!==e&&vr(e,(function(a,s){if(o||(o=new Xn),ts(a))!function(t,e,n,r,o,a,s){var u=Mo(t,n),l=Mo(e,n),c=s.get(l);if(c)$n(t,n,c);else{var h=a?a(u,l,n+"",t,e,s):i,f=h===i;if(f){var p=Ga(l),d=!p&&Ya(l),m=!p&&!d&&ls(l);h=l,p||d||m?Ga(u)?h=u:Xa(u)?h=Ai(u):d?(f=!1,h=_i(l,!0)):m?(f=!1,h=wi(l,!0)):h=[]:is(l)||Ha(l)?(h=u,Ha(u)?h=gs(u):ts(u)&&!Ka(u)||(h=po(l))):f=!1}f&&(s.set(l,h),o(h,l,r,a,s),s.delete(l)),$n(t,n,h)}}(t,e,s,n,Ur,r,o);else{var u=r?r(Mo(t,s),a,s+"",t,e,o):i;u===i&&(u=a),$n(t,s,u)}}),Is)}function zr(t,e){var n=t.length;if(n)return vo(e+=e<0?n:0,n)?t[e]:i}function Br(t,e,n){e=e.length?Te(e,(function(t){return Ga(t)?function(e){return xr(e,1===t.length?t[0]:t)}:t})):[ru];var r=-1;return e=Te(e,Ve(oo())),function(t,e){var r=t.length;for(t.sort((function(t,e){return function(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;++r<a;){var u=Ei(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}));r--;)t[r]=t[r].value;return t}(Nr(t,(function(t,n,i){return{criteria:Te(e,(function(e){return e(t)})),index:++r,value:t}})))}function Vr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=xr(t,a);n(s,a)&&Zr(o,vi(a,t),s)}return o}function Hr(t,e,n,r){var i=r?Re:Le,o=-1,a=e.length,s=t;for(t===e&&(e=Ai(e)),n&&(s=Te(t,Ve(n)));++o<a;)for(var u=0,l=e[o],c=n?n(l):l;(u=i(s,c,u,r))>-1;)s!==t&&ie.call(s,u,1),ie.call(t,u,1);return t}function Gr(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;vo(i)?ie.call(t,i,1):ui(t,i)}}return t}function Wr(t,e){return t+cn(_n()*(e-t+1))}function qr(t,e){var n="";if(!t||e<1||e>h)return n;do{e%2&&(n+=t),(e=cn(e/2))&&(t+=t)}while(e);return n}function Xr(t,e){return Po(So(t,e,ru),t+"")}function Yr(t){return Qn(zs(t))}function Qr(t,e){var n=zs(t);return Lo(n,or(e,0,n.length))}function Zr(t,e,n,r){if(!ts(t))return t;for(var o=-1,a=(e=vi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var l=Fo(e[o]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(o!=s){var h=u[l];(c=r?r(h,l,u):i)===i&&(c=ts(h)?h:vo(e[o+1])?[]:{})}Jn(u,l,c),u=u[l]}return t}var Kr=Cn?function(t,e){return Cn.set(t,e),t}:ru,$r=ce?function(t,e){return ce(t,"toString",{configurable:!0,enumerable:!1,value:tu(e),writable:!0})}:ru;function Jr(t){return Lo(zs(t))}function ti(t,e,n){var i=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var a=r(o);++i<o;)a[i]=t[i+e];return a}function ei(t,e){var n;return cr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function ni(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!us(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ri(t,e,ru,n)}function ri(t,e,n,r){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,l=us(e),c=e===i;o<a;){var h=cn((o+a)/2),f=n(t[h]),p=f!==i,d=null===f,m=f==f,v=us(f);if(s)var g=r||m;else g=c?m&&(r||p):u?m&&p&&(r||!d):l?m&&p&&!d&&(r||!v):!d&&!v&&(r?f<=e:f<e);g?o=h+1:a=h}return gn(a,4294967294)}function ii(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function oi(t){return"number"==typeof t?t:us(t)?f:+t}function ai(t){if("string"==typeof t)return t;if(Ga(t))return Te(t,ai)+"";if(us(t))return Fn?Fn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function si(t,e,n){var r=-1,i=Ee,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=Se;else if(o>=200){var l=e?null:qi(t);if(l)return en(l);a=!1,i=Ge,u=new qn}else u=e?[]:s;t:for(;++r<o;){var c=t[r],h=e?e(c):c;if(c=n||0!==c?c:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(c)}else i(u,h,n)||(u!==s&&u.push(h),s.push(c))}return s}function ui(t,e){return null==(t=To(t,e=vi(e,t)))||delete t[Fo(Zo(e))]}function li(t,e,n,r){return Zr(t,e,n(xr(t,e)),r)}function ci(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?ti(t,r?0:o,r?o+1:i):ti(t,r?o+1:0,r?i:o)}function hi(t,e){var n=t;return n instanceof Vn&&(n=n.value()),Me(e,(function(t,e){return e.func.apply(e.thisArg,Ae([t],e.args))}),n)}function fi(t,e,n){var i=t.length;if(i<2)return i?si(t[0]):[];for(var o=-1,a=r(i);++o<i;)for(var s=t[o],u=-1;++u<i;)u!=o&&(a[o]=lr(a[o]||s,t[u],e,n));return si(mr(a,1),e,n)}function pi(t,e,n){for(var r=-1,o=t.length,a=e.length,s={};++r<o;){var u=r<a?e[r]:i;n(s,t[r],u)}return s}function di(t){return Xa(t)?t:[]}function mi(t){return"function"==typeof t?t:ru}function vi(t,e){return Ga(t)?t:yo(t,e)?[t]:No(ys(t))}var gi=Xr;function yi(t,e,n){var r=t.length;return n=n===i?r:n,!e&&n>=r?t:ti(t,e,n)}var bi=Pe||function(t){return oe.clearTimeout(t)};function _i(t,e){if(e)return t.slice();var n=t.length,r=qt?qt(n):new t.constructor(n);return t.copy(r),r}function xi(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function wi(t,e){var n=e?xi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ei(t,e){if(t!==e){var n=t!==i,r=null===t,o=t==t,a=us(t),s=e!==i,u=null===e,l=e==e,c=us(e);if(!u&&!c&&!a&&t>e||a&&s&&l&&!u&&!c||r&&s&&l||!n&&l||!o)return 1;if(!r&&!a&&!c&&t<e||c&&n&&o&&!r&&!a||u&&n&&o||!s&&o||!l)return-1}return 0}function Si(t,e,n,i){for(var o=-1,a=t.length,s=n.length,u=-1,l=e.length,c=vn(a-s,0),h=r(l+c),f=!i;++u<l;)h[u]=e[u];for(;++o<s;)(f||o<a)&&(h[n[o]]=t[o]);for(;c--;)h[u++]=t[o++];return h}function Ti(t,e,n,i){for(var o=-1,a=t.length,s=-1,u=n.length,l=-1,c=e.length,h=vn(a-u,0),f=r(h+c),p=!i;++o<h;)f[o]=t[o];for(var d=o;++l<c;)f[d+l]=e[l];for(;++s<u;)(p||o<a)&&(f[d+n[s]]=t[o++]);return f}function Ai(t,e){var n=-1,i=t.length;for(e||(e=r(i));++n<i;)e[n]=t[n];return e}function Mi(t,e,n,r){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],l=r?r(n[u],t[u],u,n,t):i;l===i&&(l=t[u]),o?rr(n,u,l):Jn(n,u,l)}return n}function Ci(t,e){return function(n,r){var i=Ga(n)?ye:er,o=e?e():{};return i(n,t,oo(r,2),o)}}function Oi(t){return Xr((function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:i,s=o>2?n[2]:i;for(a=t.length>3&&"function"==typeof a?(o--,a):i,s&&go(n[0],n[1],s)&&(a=o<3?i:a,o=1),e=Tt(e);++r<o;){var u=n[r];u&&t(e,u,r,a)}return e}))}function Pi(t,e){return function(n,r){if(null==n)return n;if(!qa(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Tt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function ki(t){return function(e,n,r){for(var i=-1,o=Tt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Ii(t){return function(e){var n=Ke(e=ys(e))?on(e):i,r=n?n[0]:e.charAt(0),o=n?yi(n,1).join(""):e.slice(1);return r[t]()+o}}function Li(t){return function(e){return Me(Ks(Hs(e).replace(Gt,"")),t,"")}}function Ri(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Un(t.prototype),r=t.apply(n,e);return ts(r)?r:n}}function Di(t){return function(e,n,r){var o=Tt(e);if(!qa(e)){var a=oo(n,3);e=ks(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,r);return s>-1?o[a?e[s]:s]:i}}function Ni(t){return Ji((function(e){var n=e.length,r=n,a=Bn.prototype.thru;for(t&&e.reverse();r--;){var s=e[r];if("function"!=typeof s)throw new Ct(o);if(a&&!u&&"wrapper"==ro(s))var u=new Bn([],!0)}for(r=u?r:n;++r<n;){var l=ro(s=e[r]),c="wrapper"==l?no(s):i;u=c&&bo(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?u[ro(c[0])].apply(u,c[3]):1==s.length&&bo(s)?u[l]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ga(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Fi(t,e,n,o,a,s,u,c,h,f){var p=e&l,d=1&e,m=2&e,v=24&e,g=512&e,y=m?i:Ri(t);return function i(){for(var l=arguments.length,b=r(l),_=l;_--;)b[_]=arguments[_];if(v)var x=io(i),w=Xe(b,x);if(o&&(b=Si(b,o,a,v)),s&&(b=Ti(b,s,u,v)),l-=w,v&&l<f){var E=tn(b,x);return Gi(t,e,Fi,i.placeholder,n,b,E,c,h,f-l)}var S=d?n:this,T=m?S[t]:t;return l=b.length,c?b=Ao(b,c):g&&l>1&&b.reverse(),p&&h<l&&(b.length=h),this&&this!==oe&&this instanceof i&&(T=y||Ri(T)),T.apply(S,b)}}function ji(t,e){return function(n,r){return function(t,e,n,r){return yr(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Ui(t,e){return function(n,r){var o;if(n===i&&r===i)return e;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=ai(n),r=ai(r)):(n=oi(n),r=oi(r)),o=t(n,r)}return o}}function zi(t){return Ji((function(e){return e=Te(e,Ve(oo())),Xr((function(n){var r=this;return t(e,(function(t){return ge(t,r,n)}))}))}))}function Bi(t,e){var n=(e=e===i?" ":ai(e)).length;if(n<2)return n?qr(e,t):e;var r=qr(e,ln(t/rn(e)));return Ke(e)?yi(on(r),0,t).join(""):r.slice(0,t)}function Vi(t){return function(e,n,o){return o&&"number"!=typeof o&&go(e,n,o)&&(n=o=i),e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n,i){for(var o=-1,a=vn(ln((e-t)/(n||1)),0),s=r(a);a--;)s[i?a:++o]=t,t+=n;return s}(e,n,o=o===i?e<n?1:-1:ps(o),t)}}function Hi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=vs(e),n=vs(n)),t(e,n)}}function Gi(t,e,n,r,o,a,s,l,c,h){var f=8&e;e|=f?u:64,4&(e&=~(f?64:u))||(e&=-4);var p=[t,e,o,f?a:i,f?s:i,f?i:a,f?i:s,l,c,h],d=n.apply(i,p);return bo(t)&&Co(d,p),d.placeholder=r,ko(d,t,e)}function Wi(t){var e=St[t];return function(t,n){if(t=vs(t),(n=null==n?0:gn(ds(n),292))&&pn(t)){var r=(ys(t)+"e").split("e");return+((r=(ys(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var qi=Tn&&1/en(new Tn([,-0]))[1]==c?function(t){return new Tn(t)}:uu;function Xi(t){return function(e){var n=ho(e);return n==w?$e(e):n==M?nn(e):function(t,e){return Te(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Yi(t,e,n,a,c,h,f,p){var d=2&e;if(!d&&"function"!=typeof t)throw new Ct(o);var m=a?a.length:0;if(m||(e&=-97,a=c=i),f=f===i?f:vn(ds(f),0),p=p===i?p:ds(p),m-=c?c.length:0,64&e){var v=a,g=c;a=c=i}var y=d?i:no(t),b=[t,e,n,a,c,v,g,h,f,p];if(y&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,a=r==l&&8==n||r==l&&256==n&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!a)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Si(c,u,e[4]):u,t[4]=c?tn(t[3],s):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Ti(c,u,e[6]):u,t[6]=c?tn(t[5],s):e[6]),(u=e[7])&&(t[7]=u),r&l&&(t[8]=null==t[8]?e[8]:gn(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i}(b,y),t=b[0],e=b[1],n=b[2],a=b[3],c=b[4],!(p=b[9]=b[9]===i?d?0:t.length:vn(b[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,n){var o=Ri(t);return function a(){for(var s=arguments.length,u=r(s),l=s,c=io(a);l--;)u[l]=arguments[l];var h=s<3&&u[0]!==c&&u[s-1]!==c?[]:tn(u,c);return(s-=h.length)<n?Gi(t,e,Fi,a.placeholder,i,u,h,i,i,n-s):ge(this&&this!==oe&&this instanceof a?o:t,this,u)}}(t,e,p):e!=u&&33!=e||c.length?Fi.apply(i,b):function(t,e,n,i){var o=1&e,a=Ri(t);return function e(){for(var s=-1,u=arguments.length,l=-1,c=i.length,h=r(c+u),f=this&&this!==oe&&this instanceof e?a:t;++l<c;)h[l]=i[l];for(;u--;)h[l++]=arguments[++s];return ge(f,o?n:this,h)}}(t,e,n,a);else var _=function(t,e,n){var r=1&e,i=Ri(t);return function e(){return(this&&this!==oe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return ko((y?Kr:Co)(_,b),t,e)}function Qi(t,e,n,r){return t===i||za(t,kt[n])&&!Rt.call(r,n)?e:t}function Zi(t,e,n,r,o,a){return ts(t)&&ts(e)&&(a.set(e,t),Ur(t,e,i,Zi,a),a.delete(e)),t}function Ki(t){return is(t)?i:t}function $i(t,e,n,r,o,a){var s=1&n,u=t.length,l=e.length;if(u!=l&&!(s&&l>u))return!1;var c=a.get(t),h=a.get(e);if(c&&h)return c==e&&h==t;var f=-1,p=!0,d=2&n?new qn:i;for(a.set(t,e),a.set(e,t);++f<u;){var m=t[f],v=e[f];if(r)var g=s?r(v,m,f,e,t,a):r(m,v,f,t,e,a);if(g!==i){if(g)continue;p=!1;break}if(d){if(!Oe(e,(function(t,e){if(!Ge(d,e)&&(m===t||o(m,t,n,r,a)))return d.push(e)}))){p=!1;break}}else if(m!==v&&!o(m,v,n,r,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function Ji(t){return Po(So(t,i,Wo),t+"")}function to(t){return wr(t,ks,lo)}function eo(t){return wr(t,Is,co)}var no=Cn?function(t){return Cn.get(t)}:uu;function ro(t){for(var e=t.name+"",n=On[e],r=Rt.call(On,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function io(t){return(Rt.call(jn,"placeholder")?jn:t).placeholder}function oo(){var t=jn.iteratee||iu;return t=t===iu?Lr:t,arguments.length?t(arguments[0],arguments[1]):t}function ao(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function so(t){for(var e=ks(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,wo(i)]}return e}function uo(t,e){var n=function(t,e){return null==t?i:t[e]}(t,e);return Ir(n)?n:i}var lo=hn?function(t){return null==t?[]:(t=Tt(t),we(hn(t),(function(e){return re.call(t,e)})))}:mu,co=hn?function(t){for(var e=[];t;)Ae(e,lo(t)),t=Yt(t);return e}:mu,ho=Er;function fo(t,e,n){for(var r=-1,i=(e=vi(e,t)).length,o=!1;++r<i;){var a=Fo(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ja(i)&&vo(a,i)&&(Ga(t)||Ha(t))}function po(t){return"function"!=typeof t.constructor||xo(t)?{}:Un(Yt(t))}function mo(t){return Ga(t)||Ha(t)||!!(ae&&t&&t[ae])}function vo(t,e){var n=typeof t;return!!(e=null==e?h:e)&&("number"==n||"symbol"!=n&&gt.test(t))&&t>-1&&t%1==0&&t<e}function go(t,e,n){if(!ts(n))return!1;var r=typeof e;return!!("number"==r?qa(n)&&vo(e,n.length):"string"==r&&e in n)&&za(n[e],t)}function yo(t,e){if(Ga(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!us(t))||J.test(t)||!$.test(t)||null!=e&&t in Tt(e)}function bo(t){var e=ro(t),n=jn[e];if("function"!=typeof n||!(e in Vn.prototype))return!1;if(t===n)return!0;var r=no(n);return!!r&&t===r[0]}(wn&&ho(new wn(new ArrayBuffer(1)))!=I||En&&ho(new En)!=w||Sn&&ho(Sn.resolve())!=T||Tn&&ho(new Tn)!=M||An&&ho(new An)!=P)&&(ho=function(t){var e=Er(t),n=e==S?t.constructor:i,r=n?jo(n):"";if(r)switch(r){case Pn:return I;case kn:return w;case In:return T;case Ln:return M;case Rn:return P}return e});var _o=It?Ka:vu;function xo(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||kt)}function wo(t){return t==t&&!ts(t)}function Eo(t,e){return function(n){return null!=n&&n[t]===e&&(e!==i||t in Tt(n))}}function So(t,e,n){return e=vn(e===i?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=vn(i.length-e,0),s=r(a);++o<a;)s[o]=i[e+o];o=-1;for(var u=r(e+1);++o<e;)u[o]=i[o];return u[e]=n(s),ge(t,this,u)}}function To(t,e){return e.length<2?t:xr(t,ti(e,0,-1))}function Ao(t,e){for(var n=t.length,r=gn(e.length,n),o=Ai(t);r--;){var a=e[r];t[r]=vo(a,n)?o[a]:i}return t}function Mo(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Co=Io(Kr),Oo=un||function(t,e){return oe.setTimeout(t,e)},Po=Io($r);function ko(t,e,n){var r=e+"";return Po(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(at,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return be(d,(function(n){var r="_."+n[0];e&n[1]&&!Ee(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(st);return e?e[1].split(ut):[]}(r),n)))}function Io(t){var e=0,n=0;return function(){var r=yn(),o=16-(r-n);if(n=r,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(i,arguments)}}function Lo(t,e){var n=-1,r=t.length,o=r-1;for(e=e===i?r:e;++n<e;){var a=Wr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Ro,Do,No=(Ro=Ra((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,(function(t,n,r,i){e.push(r?i.replace(ct,"$1"):n||t)})),e}),(function(t){return 500===Do.size&&Do.clear(),t})),Do=Ro.cache,Ro);function Fo(t){if("string"==typeof t||us(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function jo(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Uo(t){if(t instanceof Vn)return t.clone();var e=new Bn(t.__wrapped__,t.__chain__);return e.__actions__=Ai(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zo=Xr((function(t,e){return Xa(t)?lr(t,mr(e,1,Xa,!0)):[]})),Bo=Xr((function(t,e){var n=Zo(e);return Xa(n)&&(n=i),Xa(t)?lr(t,mr(e,1,Xa,!0),oo(n,2)):[]})),Vo=Xr((function(t,e){var n=Zo(e);return Xa(n)&&(n=i),Xa(t)?lr(t,mr(e,1,Xa,!0),i,n):[]}));function Ho(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=vn(r+i,0)),Ie(t,oo(e,3),i)}function Go(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r-1;return n!==i&&(o=ds(n),o=n<0?vn(r+o,0):gn(o,r-1)),Ie(t,oo(e,3),o,!0)}function Wo(t){return null!=t&&t.length?mr(t,1):[]}function qo(t){return t&&t.length?t[0]:i}var Xo=Xr((function(t){var e=Te(t,di);return e.length&&e[0]===t[0]?Mr(e):[]})),Yo=Xr((function(t){var e=Zo(t),n=Te(t,di);return e===Zo(n)?e=i:n.pop(),n.length&&n[0]===t[0]?Mr(n,oo(e,2)):[]})),Qo=Xr((function(t){var e=Zo(t),n=Te(t,di);return(e="function"==typeof e?e:i)&&n.pop(),n.length&&n[0]===t[0]?Mr(n,i,e):[]}));function Zo(t){var e=null==t?0:t.length;return e?t[e-1]:i}var Ko=Xr($o);function $o(t,e){return t&&t.length&&e&&e.length?Hr(t,e):t}var Jo=Ji((function(t,e){var n=null==t?0:t.length,r=ir(t,e);return Gr(t,Te(e,(function(t){return vo(t,n)?+t:t})).sort(Ei)),r}));function ta(t){return null==t?t:xn.call(t)}var ea=Xr((function(t){return si(mr(t,1,Xa,!0))})),na=Xr((function(t){var e=Zo(t);return Xa(e)&&(e=i),si(mr(t,1,Xa,!0),oo(e,2))})),ra=Xr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,si(mr(t,1,Xa,!0),i,e)}));function ia(t){if(!t||!t.length)return[];var e=0;return t=we(t,(function(t){if(Xa(t))return e=vn(t.length,e),!0})),Be(e,(function(e){return Te(t,Fe(e))}))}function oa(t,e){if(!t||!t.length)return[];var n=ia(t);return null==e?n:Te(n,(function(t){return ge(e,i,t)}))}var aa=Xr((function(t,e){return Xa(t)?lr(t,e):[]})),sa=Xr((function(t){return fi(we(t,Xa))})),ua=Xr((function(t){var e=Zo(t);return Xa(e)&&(e=i),fi(we(t,Xa),oo(e,2))})),la=Xr((function(t){var e=Zo(t);return e="function"==typeof e?e:i,fi(we(t,Xa),i,e)})),ca=Xr(ia),ha=Xr((function(t){var e=t.length,n=e>1?t[e-1]:i;return n="function"==typeof n?(t.pop(),n):i,oa(t,n)}));function fa(t){var e=jn(t);return e.__chain__=!0,e}function pa(t,e){return e(t)}var da=Ji((function(t){var e=t.length,n=e?t[0]:0,r=this.__wrapped__,o=function(e){return ir(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Vn&&vo(n)?((r=r.slice(n,+n+(e?1:0))).__actions__.push({func:pa,args:[o],thisArg:i}),new Bn(r,this.__chain__).thru((function(t){return e&&!t.length&&t.push(i),t}))):this.thru(o)})),ma=Ci((function(t,e,n){Rt.call(t,n)?++t[n]:rr(t,n,1)})),va=Di(Ho),ga=Di(Go);function ya(t,e){return(Ga(t)?be:cr)(t,oo(e,3))}function ba(t,e){return(Ga(t)?_e:hr)(t,oo(e,3))}var _a=Ci((function(t,e,n){Rt.call(t,n)?t[n].push(e):rr(t,n,[e])})),xa=Xr((function(t,e,n){var i=-1,o="function"==typeof e,a=qa(t)?r(t.length):[];return cr(t,(function(t){a[++i]=o?ge(e,t,n):Cr(t,e,n)})),a})),wa=Ci((function(t,e,n){rr(t,n,e)}));function Ea(t,e){return(Ga(t)?Te:Nr)(t,oo(e,3))}var Sa=Ci((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]})),Ta=Xr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&go(t,e[0],e[1])?e=[]:n>2&&go(e[0],e[1],e[2])&&(e=[e[0]]),Br(t,mr(e,1),[])})),Aa=je||function(){return oe.Date.now()};function Ma(t,e,n){return e=n?i:e,e=t&&null==e?t.length:e,Yi(t,l,i,i,i,i,e)}function Ca(t,e){var n;if("function"!=typeof e)throw new Ct(o);return t=ds(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=i),n}}var Oa=Xr((function(t,e,n){var r=1;if(n.length){var i=tn(n,io(Oa));r|=u}return Yi(t,r,e,n,i)})),Pa=Xr((function(t,e,n){var r=3;if(n.length){var i=tn(n,io(Pa));r|=u}return Yi(e,r,t,n,i)}));function ka(t,e,n){var r,a,s,u,l,c,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new Ct(o);function m(e){var n=r,o=a;return r=a=i,h=e,u=t.apply(o,n)}function v(t){return h=t,l=Oo(y,e),f?m(t):u}function g(t){var n=t-c;return c===i||n>=e||n<0||p&&t-h>=s}function y(){var t=Aa();if(g(t))return b(t);l=Oo(y,function(t){var n=e-(t-c);return p?gn(n,s-(t-h)):n}(t))}function b(t){return l=i,d&&r?m(t):(r=a=i,u)}function _(){var t=Aa(),n=g(t);if(r=arguments,a=this,c=t,n){if(l===i)return v(c);if(p)return bi(l),l=Oo(y,e),m(c)}return l===i&&(l=Oo(y,e)),u}return e=vs(e)||0,ts(n)&&(f=!!n.leading,s=(p="maxWait"in n)?vn(vs(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),_.cancel=function(){l!==i&&bi(l),h=0,r=c=a=l=i},_.flush=function(){return l===i?u:b(Aa())},_}var Ia=Xr((function(t,e){return ur(t,1,e)})),La=Xr((function(t,e,n){return ur(t,vs(e)||0,n)}));function Ra(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ct(o);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Ra.Cache||Wn),n}function Da(t){if("function"!=typeof t)throw new Ct(o);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Ra.Cache=Wn;var Na=gi((function(t,e){var n=(e=1==e.length&&Ga(e[0])?Te(e[0],Ve(oo())):Te(mr(e,1),Ve(oo()))).length;return Xr((function(r){for(var i=-1,o=gn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return ge(t,this,r)}))})),Fa=Xr((function(t,e){var n=tn(e,io(Fa));return Yi(t,u,i,e,n)})),ja=Xr((function(t,e){var n=tn(e,io(ja));return Yi(t,64,i,e,n)})),Ua=Ji((function(t,e){return Yi(t,256,i,i,i,e)}));function za(t,e){return t===e||t!=t&&e!=e}var Ba=Hi(Sr),Va=Hi((function(t,e){return t>=e})),Ha=Or(function(){return arguments}())?Or:function(t){return es(t)&&Rt.call(t,"callee")&&!re.call(t,"callee")},Ga=r.isArray,Wa=he?Ve(he):function(t){return es(t)&&Er(t)==k};function qa(t){return null!=t&&Ja(t.length)&&!Ka(t)}function Xa(t){return es(t)&&qa(t)}var Ya=fn||vu,Qa=fe?Ve(fe):function(t){return es(t)&&Er(t)==y};function Za(t){if(!es(t))return!1;var e=Er(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!is(t)}function Ka(t){if(!ts(t))return!1;var e=Er(t);return e==_||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $a(t){return"number"==typeof t&&t==ds(t)}function Ja(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=h}function ts(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function es(t){return null!=t&&"object"==typeof t}var ns=pe?Ve(pe):function(t){return es(t)&&ho(t)==w};function rs(t){return"number"==typeof t||es(t)&&Er(t)==E}function is(t){if(!es(t)||Er(t)!=S)return!1;var e=Yt(t);if(null===e)return!0;var n=Rt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==jt}var os=de?Ve(de):function(t){return es(t)&&Er(t)==A},as=me?Ve(me):function(t){return es(t)&&ho(t)==M};function ss(t){return"string"==typeof t||!Ga(t)&&es(t)&&Er(t)==C}function us(t){return"symbol"==typeof t||es(t)&&Er(t)==O}var ls=ve?Ve(ve):function(t){return es(t)&&Ja(t.length)&&!!$t[Er(t)]},cs=Hi(Dr),hs=Hi((function(t,e){return t<=e}));function fs(t){if(!t)return[];if(qa(t))return ss(t)?on(t):Ai(t);if(se&&t[se])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[se]());var e=ho(t);return(e==w?$e:e==M?en:zs)(t)}function ps(t){return t?(t=vs(t))===c||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function ds(t){var e=ps(t),n=e%1;return e==e?n?e-n:e:0}function ms(t){return t?or(ds(t),0,p):0}function vs(t){if("number"==typeof t)return t;if(us(t))return f;if(ts(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ts(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(rt,"");var n=dt.test(t);return n||vt.test(t)?ne(t.slice(2),n?2:8):pt.test(t)?f:+t}function gs(t){return Mi(t,Is(t))}function ys(t){return null==t?"":ai(t)}var bs=Oi((function(t,e){if(xo(e)||qa(e))Mi(e,ks(e),t);else for(var n in e)Rt.call(e,n)&&Jn(t,n,e[n])})),_s=Oi((function(t,e){Mi(e,Is(e),t)})),xs=Oi((function(t,e,n,r){Mi(e,Is(e),t,r)})),ws=Oi((function(t,e,n,r){Mi(e,ks(e),t,r)})),Es=Ji(ir),Ss=Xr((function(t,e){t=Tt(t);var n=-1,r=e.length,o=r>2?e[2]:i;for(o&&go(e[0],e[1],o)&&(r=1);++n<r;)for(var a=e[n],s=Is(a),u=-1,l=s.length;++u<l;){var c=s[u],h=t[c];(h===i||za(h,kt[c])&&!Rt.call(t,c))&&(t[c]=a[c])}return t})),Ts=Xr((function(t){return t.push(i,Zi),ge(Rs,i,t)}));function As(t,e,n){var r=null==t?i:xr(t,e);return r===i?n:r}function Ms(t,e){return null!=t&&fo(t,e,Ar)}var Cs=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),t[e]=n}),tu(ru)),Os=ji((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ft.call(e)),Rt.call(t,e)?t[e].push(n):t[e]=[n]}),oo),Ps=Xr(Cr);function ks(t){return qa(t)?Yn(t):Rr(t)}function Is(t){return qa(t)?Yn(t,!0):function(t){if(!ts(t))return function(t){var e=[];if(null!=t)for(var n in Tt(t))e.push(n);return e}(t);var e=xo(t),n=[];for(var r in t)("constructor"!=r||!e&&Rt.call(t,r))&&n.push(r);return n}(t)}var Ls=Oi((function(t,e,n){Ur(t,e,n)})),Rs=Oi((function(t,e,n,r){Ur(t,e,n,r)})),Ds=Ji((function(t,e){var n={};if(null==t)return n;var r=!1;e=Te(e,(function(e){return e=vi(e,t),r||(r=e.length>1),e})),Mi(t,eo(t),n),r&&(n=ar(n,7,Ki));for(var i=e.length;i--;)ui(n,e[i]);return n})),Ns=Ji((function(t,e){return null==t?{}:function(t,e){return Vr(t,e,(function(e,n){return Ms(t,n)}))}(t,e)}));function Fs(t,e){if(null==t)return{};var n=Te(eo(t),(function(t){return[t]}));return e=oo(e),Vr(t,n,(function(t,n){return e(t,n[0])}))}var js=Xi(ks),Us=Xi(Is);function zs(t){return null==t?[]:He(t,ks(t))}var Bs=Li((function(t,e,n){return e=e.toLowerCase(),t+(n?Vs(e):e)}));function Vs(t){return Zs(ys(t).toLowerCase())}function Hs(t){return(t=ys(t))&&t.replace(yt,Ye).replace(Wt,"")}var Gs=Li((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Ws=Li((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),qs=Ii("toLowerCase"),Xs=Li((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()})),Ys=Li((function(t,e,n){return t+(n?" ":"")+Zs(e)})),Qs=Li((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),Zs=Ii("toUpperCase");function Ks(t,e,n){return t=ys(t),(e=n?i:e)===i?function(t){return Qt.test(t)}(t)?function(t){return t.match(Xt)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var $s=Xr((function(t,e){try{return ge(t,i,e)}catch(t){return Za(t)?t:new wt(t)}})),Js=Ji((function(t,e){return be(e,(function(e){e=Fo(e),rr(t,e,Oa(t[e],t))})),t}));function tu(t){return function(){return t}}var eu=Ni(),nu=Ni(!0);function ru(t){return t}function iu(t){return Lr("function"==typeof t?t:ar(t,1))}var ou=Xr((function(t,e){return function(n){return Cr(n,t,e)}})),au=Xr((function(t,e){return function(n){return Cr(t,n,e)}}));function su(t,e,n){var r=ks(e),i=_r(e,r);null!=n||ts(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=_r(e,ks(e)));var o=!(ts(n)&&"chain"in n&&!n.chain),a=Ka(t);return be(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=Ai(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,Ae([this.value()],arguments))})})),t}function uu(){}var lu=zi(Te),cu=zi(xe),hu=zi(Oe);function fu(t){return yo(t)?Fe(Fo(t)):function(t){return function(e){return xr(e,t)}}(t)}var pu=Vi(),du=Vi(!0);function mu(){return[]}function vu(){return!1}var gu,yu=Ui((function(t,e){return t+e}),0),bu=Wi("ceil"),_u=Ui((function(t,e){return t/e}),1),xu=Wi("floor"),wu=Ui((function(t,e){return t*e}),1),Eu=Wi("round"),Su=Ui((function(t,e){return t-e}),0);return jn.after=function(t,e){if("function"!=typeof e)throw new Ct(o);return t=ds(t),function(){if(--t<1)return e.apply(this,arguments)}},jn.ary=Ma,jn.assign=bs,jn.assignIn=_s,jn.assignInWith=xs,jn.assignWith=ws,jn.at=Es,jn.before=Ca,jn.bind=Oa,jn.bindAll=Js,jn.bindKey=Pa,jn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ga(t)?t:[t]},jn.chain=fa,jn.chunk=function(t,e,n){e=(n?go(t,e,n):e===i)?1:vn(ds(e),0);var o=null==t?0:t.length;if(!o||e<1)return[];for(var a=0,s=0,u=r(ln(o/e));a<o;)u[s++]=ti(t,a,a+=e);return u},jn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},jn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return Ae(Ga(n)?Ai(n):[n],mr(e,1))},jn.cond=function(t){var e=null==t?0:t.length,n=oo();return t=e?Te(t,(function(t){if("function"!=typeof t[1])throw new Ct(o);return[n(t[0]),t[1]]})):[],Xr((function(n){for(var r=-1;++r<e;){var i=t[r];if(ge(i[0],this,n))return ge(i[1],this,n)}}))},jn.conforms=function(t){return function(t){var e=ks(t);return function(n){return sr(n,t,e)}}(ar(t,1))},jn.constant=tu,jn.countBy=ma,jn.create=function(t,e){var n=Un(t);return null==e?n:nr(n,e)},jn.curry=function t(e,n,r){var o=Yi(e,8,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.curryRight=function t(e,n,r){var o=Yi(e,16,i,i,i,i,i,n=r?i:n);return o.placeholder=t.placeholder,o},jn.debounce=ka,jn.defaults=Ss,jn.defaultsDeep=Ts,jn.defer=Ia,jn.delay=La,jn.difference=zo,jn.differenceBy=Bo,jn.differenceWith=Vo,jn.drop=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=n||e===i?1:ds(e))<0?0:e,r):[]},jn.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,0,(e=r-(e=n||e===i?1:ds(e)))<0?0:e):[]},jn.dropRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0,!0):[]},jn.dropWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!0):[]},jn.fill=function(t,e,n,r){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&go(t,e,n)&&(n=0,r=o),function(t,e,n,r){var o=t.length;for((n=ds(n))<0&&(n=-n>o?0:o+n),(r=r===i||r>o?o:ds(r))<0&&(r+=o),r=n>r?0:ms(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},jn.filter=function(t,e){return(Ga(t)?we:dr)(t,oo(e,3))},jn.flatMap=function(t,e){return mr(Ea(t,e),1)},jn.flatMapDeep=function(t,e){return mr(Ea(t,e),c)},jn.flatMapDepth=function(t,e,n){return n=n===i?1:ds(n),mr(Ea(t,e),n)},jn.flatten=Wo,jn.flattenDeep=function(t){return null!=t&&t.length?mr(t,c):[]},jn.flattenDepth=function(t,e){return null!=t&&t.length?mr(t,e=e===i?1:ds(e)):[]},jn.flip=function(t){return Yi(t,512)},jn.flow=eu,jn.flowRight=nu,jn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},jn.functions=function(t){return null==t?[]:_r(t,ks(t))},jn.functionsIn=function(t){return null==t?[]:_r(t,Is(t))},jn.groupBy=_a,jn.initial=function(t){return null!=t&&t.length?ti(t,0,-1):[]},jn.intersection=Xo,jn.intersectionBy=Yo,jn.intersectionWith=Qo,jn.invert=Cs,jn.invertBy=Os,jn.invokeMap=xa,jn.iteratee=iu,jn.keyBy=wa,jn.keys=ks,jn.keysIn=Is,jn.map=Ea,jn.mapKeys=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,e(t,r,i),t)})),n},jn.mapValues=function(t,e){var n={};return e=oo(e,3),yr(t,(function(t,r,i){rr(n,r,e(t,r,i))})),n},jn.matches=function(t){return Fr(ar(t,1))},jn.matchesProperty=function(t,e){return jr(t,ar(e,1))},jn.memoize=Ra,jn.merge=Ls,jn.mergeWith=Rs,jn.method=ou,jn.methodOf=au,jn.mixin=su,jn.negate=Da,jn.nthArg=function(t){return t=ds(t),Xr((function(e){return zr(e,t)}))},jn.omit=Ds,jn.omitBy=function(t,e){return Fs(t,Da(oo(e)))},jn.once=function(t){return Ca(2,t)},jn.orderBy=function(t,e,n,r){return null==t?[]:(Ga(e)||(e=null==e?[]:[e]),Ga(n=r?i:n)||(n=null==n?[]:[n]),Br(t,e,n))},jn.over=lu,jn.overArgs=Na,jn.overEvery=cu,jn.overSome=hu,jn.partial=Fa,jn.partialRight=ja,jn.partition=Sa,jn.pick=Ns,jn.pickBy=Fs,jn.property=fu,jn.propertyOf=function(t){return function(e){return null==t?i:xr(t,e)}},jn.pull=Ko,jn.pullAll=$o,jn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,oo(n,2)):t},jn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Hr(t,e,i,n):t},jn.pullAt=Jo,jn.range=pu,jn.rangeRight=du,jn.rearg=Ua,jn.reject=function(t,e){return(Ga(t)?we:dr)(t,Da(oo(e,3)))},jn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=oo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return Gr(t,i),n},jn.rest=function(t,e){if("function"!=typeof t)throw new Ct(o);return Xr(t,e=e===i?e:ds(e))},jn.reverse=ta,jn.sampleSize=function(t,e,n){return e=(n?go(t,e,n):e===i)?1:ds(e),(Ga(t)?Zn:Qr)(t,e)},jn.set=function(t,e,n){return null==t?t:Zr(t,e,n)},jn.setWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:Zr(t,e,n,r)},jn.shuffle=function(t){return(Ga(t)?Kn:Jr)(t)},jn.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&go(t,e,n)?(e=0,n=r):(e=null==e?0:ds(e),n=n===i?r:ds(n)),ti(t,e,n)):[]},jn.sortBy=Ta,jn.sortedUniq=function(t){return t&&t.length?ii(t):[]},jn.sortedUniqBy=function(t,e){return t&&t.length?ii(t,oo(e,2)):[]},jn.split=function(t,e,n){return n&&"number"!=typeof n&&go(t,e,n)&&(e=n=i),(n=n===i?p:n>>>0)?(t=ys(t))&&("string"==typeof e||null!=e&&!os(e))&&!(e=ai(e))&&Ke(t)?yi(on(t),0,n):t.split(e,n):[]},jn.spread=function(t,e){if("function"!=typeof t)throw new Ct(o);return e=null==e?0:vn(ds(e),0),Xr((function(n){var r=n[e],i=yi(n,0,e);return r&&Ae(i,r),ge(t,this,i)}))},jn.tail=function(t){var e=null==t?0:t.length;return e?ti(t,1,e):[]},jn.take=function(t,e,n){return t&&t.length?ti(t,0,(e=n||e===i?1:ds(e))<0?0:e):[]},jn.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?ti(t,(e=r-(e=n||e===i?1:ds(e)))<0?0:e,r):[]},jn.takeRightWhile=function(t,e){return t&&t.length?ci(t,oo(e,3),!1,!0):[]},jn.takeWhile=function(t,e){return t&&t.length?ci(t,oo(e,3)):[]},jn.tap=function(t,e){return e(t),t},jn.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Ct(o);return ts(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ka(t,e,{leading:r,maxWait:e,trailing:i})},jn.thru=pa,jn.toArray=fs,jn.toPairs=js,jn.toPairsIn=Us,jn.toPath=function(t){return Ga(t)?Te(t,Fo):us(t)?[t]:Ai(No(ys(t)))},jn.toPlainObject=gs,jn.transform=function(t,e,n){var r=Ga(t),i=r||Ya(t)||ls(t);if(e=oo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:ts(t)&&Ka(o)?Un(Yt(t)):{}}return(i?be:yr)(t,(function(t,r,i){return e(n,t,r,i)})),n},jn.unary=function(t){return Ma(t,1)},jn.union=ea,jn.unionBy=na,jn.unionWith=ra,jn.uniq=function(t){return t&&t.length?si(t):[]},jn.uniqBy=function(t,e){return t&&t.length?si(t,oo(e,2)):[]},jn.uniqWith=function(t,e){return e="function"==typeof e?e:i,t&&t.length?si(t,i,e):[]},jn.unset=function(t,e){return null==t||ui(t,e)},jn.unzip=ia,jn.unzipWith=oa,jn.update=function(t,e,n){return null==t?t:li(t,e,mi(n))},jn.updateWith=function(t,e,n,r){return r="function"==typeof r?r:i,null==t?t:li(t,e,mi(n),r)},jn.values=zs,jn.valuesIn=function(t){return null==t?[]:He(t,Is(t))},jn.without=aa,jn.words=Ks,jn.wrap=function(t,e){return Fa(mi(e),t)},jn.xor=sa,jn.xorBy=ua,jn.xorWith=la,jn.zip=ca,jn.zipObject=function(t,e){return pi(t||[],e||[],Jn)},jn.zipObjectDeep=function(t,e){return pi(t||[],e||[],Zr)},jn.zipWith=ha,jn.entries=js,jn.entriesIn=Us,jn.extend=_s,jn.extendWith=xs,su(jn,jn),jn.add=yu,jn.attempt=$s,jn.camelCase=Bs,jn.capitalize=Vs,jn.ceil=bu,jn.clamp=function(t,e,n){return n===i&&(n=e,e=i),n!==i&&(n=(n=vs(n))==n?n:0),e!==i&&(e=(e=vs(e))==e?e:0),or(vs(t),e,n)},jn.clone=function(t){return ar(t,4)},jn.cloneDeep=function(t){return ar(t,5)},jn.cloneDeepWith=function(t,e){return ar(t,5,e="function"==typeof e?e:i)},jn.cloneWith=function(t,e){return ar(t,4,e="function"==typeof e?e:i)},jn.conformsTo=function(t,e){return null==e||sr(t,e,ks(e))},jn.deburr=Hs,jn.defaultTo=function(t,e){return null==t||t!=t?e:t},jn.divide=_u,jn.endsWith=function(t,e,n){t=ys(t),e=ai(e);var r=t.length,o=n=n===i?r:or(ds(n),0,r);return(n-=e.length)>=0&&t.slice(n,o)==e},jn.eq=za,jn.escape=function(t){return(t=ys(t))&&Y.test(t)?t.replace(q,Qe):t},jn.escapeRegExp=function(t){return(t=ys(t))&&nt.test(t)?t.replace(et,"\\$&"):t},jn.every=function(t,e,n){var r=Ga(t)?xe:fr;return n&&go(t,e,n)&&(e=i),r(t,oo(e,3))},jn.find=va,jn.findIndex=Ho,jn.findKey=function(t,e){return ke(t,oo(e,3),yr)},jn.findLast=ga,jn.findLastIndex=Go,jn.findLastKey=function(t,e){return ke(t,oo(e,3),br)},jn.floor=xu,jn.forEach=ya,jn.forEachRight=ba,jn.forIn=function(t,e){return null==t?t:vr(t,oo(e,3),Is)},jn.forInRight=function(t,e){return null==t?t:gr(t,oo(e,3),Is)},jn.forOwn=function(t,e){return t&&yr(t,oo(e,3))},jn.forOwnRight=function(t,e){return t&&br(t,oo(e,3))},jn.get=As,jn.gt=Ba,jn.gte=Va,jn.has=function(t,e){return null!=t&&fo(t,e,Tr)},jn.hasIn=Ms,jn.head=qo,jn.identity=ru,jn.includes=function(t,e,n,r){t=qa(t)?t:zs(t),n=n&&!r?ds(n):0;var i=t.length;return n<0&&(n=vn(i+n,0)),ss(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Le(t,e,n)>-1},jn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:ds(n);return i<0&&(i=vn(r+i,0)),Le(t,e,i)},jn.inRange=function(t,e,n){return e=ps(e),n===i?(n=e,e=0):n=ps(n),function(t,e,n){return t>=gn(e,n)&&t<vn(e,n)}(t=vs(t),e,n)},jn.invoke=Ps,jn.isArguments=Ha,jn.isArray=Ga,jn.isArrayBuffer=Wa,jn.isArrayLike=qa,jn.isArrayLikeObject=Xa,jn.isBoolean=function(t){return!0===t||!1===t||es(t)&&Er(t)==g},jn.isBuffer=Ya,jn.isDate=Qa,jn.isElement=function(t){return es(t)&&1===t.nodeType&&!is(t)},jn.isEmpty=function(t){if(null==t)return!0;if(qa(t)&&(Ga(t)||"string"==typeof t||"function"==typeof t.splice||Ya(t)||ls(t)||Ha(t)))return!t.length;var e=ho(t);if(e==w||e==M)return!t.size;if(xo(t))return!Rr(t).length;for(var n in t)if(Rt.call(t,n))return!1;return!0},jn.isEqual=function(t,e){return Pr(t,e)},jn.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:i)?n(t,e):i;return r===i?Pr(t,e,i,n):!!r},jn.isError=Za,jn.isFinite=function(t){return"number"==typeof t&&pn(t)},jn.isFunction=Ka,jn.isInteger=$a,jn.isLength=Ja,jn.isMap=ns,jn.isMatch=function(t,e){return t===e||kr(t,e,so(e))},jn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:i,kr(t,e,so(e),n)},jn.isNaN=function(t){return rs(t)&&t!=+t},jn.isNative=function(t){if(_o(t))throw new wt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},jn.isNil=function(t){return null==t},jn.isNull=function(t){return null===t},jn.isNumber=rs,jn.isObject=ts,jn.isObjectLike=es,jn.isPlainObject=is,jn.isRegExp=os,jn.isSafeInteger=function(t){return $a(t)&&t>=-9007199254740991&&t<=h},jn.isSet=as,jn.isString=ss,jn.isSymbol=us,jn.isTypedArray=ls,jn.isUndefined=function(t){return t===i},jn.isWeakMap=function(t){return es(t)&&ho(t)==P},jn.isWeakSet=function(t){return es(t)&&"[object WeakSet]"==Er(t)},jn.join=function(t,e){return null==t?"":dn.call(t,e)},jn.kebabCase=Gs,jn.last=Zo,jn.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var o=r;return n!==i&&(o=(o=ds(n))<0?vn(r+o,0):gn(o,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ie(t,De,o,!0)},jn.lowerCase=Ws,jn.lowerFirst=qs,jn.lt=cs,jn.lte=hs,jn.max=function(t){return t&&t.length?pr(t,ru,Sr):i},jn.maxBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Sr):i},jn.mean=function(t){return Ne(t,ru)},jn.meanBy=function(t,e){return Ne(t,oo(e,2))},jn.min=function(t){return t&&t.length?pr(t,ru,Dr):i},jn.minBy=function(t,e){return t&&t.length?pr(t,oo(e,2),Dr):i},jn.stubArray=mu,jn.stubFalse=vu,jn.stubObject=function(){return{}},jn.stubString=function(){return""},jn.stubTrue=function(){return!0},jn.multiply=wu,jn.nth=function(t,e){return t&&t.length?zr(t,ds(e)):i},jn.noConflict=function(){return oe._===this&&(oe._=Ut),this},jn.noop=uu,jn.now=Aa,jn.pad=function(t,e,n){t=ys(t);var r=(e=ds(e))?rn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return Bi(cn(i),n)+t+Bi(ln(i),n)},jn.padEnd=function(t,e,n){t=ys(t);var r=(e=ds(e))?rn(t):0;return e&&r<e?t+Bi(e-r,n):t},jn.padStart=function(t,e,n){t=ys(t);var r=(e=ds(e))?rn(t):0;return e&&r<e?Bi(e-r,n)+t:t},jn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),bn(ys(t).replace(it,""),e||0)},jn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&go(t,e,n)&&(e=n=i),n===i&&("boolean"==typeof e?(n=e,e=i):"boolean"==typeof t&&(n=t,t=i)),t===i&&e===i?(t=0,e=1):(t=ps(t),e===i?(e=t,t=0):e=ps(e)),t>e){var r=t;t=e,e=r}if(n||t%1||e%1){var o=_n();return gn(t+o*(e-t+ee("1e-"+((o+"").length-1))),e)}return Wr(t,e)},jn.reduce=function(t,e,n){var r=Ga(t)?Me:Ue,i=arguments.length<3;return r(t,oo(e,4),n,i,cr)},jn.reduceRight=function(t,e,n){var r=Ga(t)?Ce:Ue,i=arguments.length<3;return r(t,oo(e,4),n,i,hr)},jn.repeat=function(t,e,n){return e=(n?go(t,e,n):e===i)?1:ds(e),qr(ys(t),e)},jn.replace=function(){var t=arguments,e=ys(t[0]);return t.length<3?e:e.replace(t[1],t[2])},jn.result=function(t,e,n){var r=-1,o=(e=vi(e,t)).length;for(o||(o=1,t=i);++r<o;){var a=null==t?i:t[Fo(e[r])];a===i&&(r=o,a=n),t=Ka(a)?a.call(t):a}return t},jn.round=Eu,jn.runInContext=t,jn.sample=function(t){return(Ga(t)?Qn:Yr)(t)},jn.size=function(t){if(null==t)return 0;if(qa(t))return ss(t)?rn(t):t.length;var e=ho(t);return e==w||e==M?t.size:Rr(t).length},jn.snakeCase=Xs,jn.some=function(t,e,n){var r=Ga(t)?Oe:ei;return n&&go(t,e,n)&&(e=i),r(t,oo(e,3))},jn.sortedIndex=function(t,e){return ni(t,e)},jn.sortedIndexBy=function(t,e,n){return ri(t,e,oo(n,2))},jn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=ni(t,e);if(r<n&&za(t[r],e))return r}return-1},jn.sortedLastIndex=function(t,e){return ni(t,e,!0)},jn.sortedLastIndexBy=function(t,e,n){return ri(t,e,oo(n,2),!0)},jn.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=ni(t,e,!0)-1;if(za(t[n],e))return n}return-1},jn.startCase=Ys,jn.startsWith=function(t,e,n){return t=ys(t),n=null==n?0:or(ds(n),0,t.length),e=ai(e),t.slice(n,n+e.length)==e},jn.subtract=Su,jn.sum=function(t){return t&&t.length?ze(t,ru):0},jn.sumBy=function(t,e){return t&&t.length?ze(t,oo(e,2)):0},jn.template=function(t,e,n){var r=jn.templateSettings;n&&go(t,e,n)&&(e=i),t=ys(t),e=xs({},e,r,Qi);var o,a,s=xs({},e.imports,r.imports,Qi),u=ks(s),l=He(s,u),c=0,h=e.interpolate||bt,f="__p += '",p=At((e.escape||bt).source+"|"+h.source+"|"+(h===K?ht:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),d="//# sourceURL="+(Rt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Kt+"]")+"\n";t.replace(p,(function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(c,u).replace(_t,Ze),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e})),f+="';\n";var m=Rt.call(e,"variable")&&e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(a?f.replace(V,""):f).replace(H,"$1").replace(G,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=$s((function(){return Et(u,d+"return "+f).apply(i,l)}));if(v.source=f,Za(v))throw v;return v},jn.times=function(t,e){if((t=ds(t))<1||t>h)return[];var n=p,r=gn(t,p);e=oo(e),t-=p;for(var i=Be(r,e);++n<t;)e(n);return i},jn.toFinite=ps,jn.toInteger=ds,jn.toLength=ms,jn.toLower=function(t){return ys(t).toLowerCase()},jn.toNumber=vs,jn.toSafeInteger=function(t){return t?or(ds(t),-9007199254740991,h):0===t?t:0},jn.toString=ys,jn.toUpper=function(t){return ys(t).toUpperCase()},jn.trim=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(rt,"");if(!t||!(e=ai(e)))return t;var r=on(t),o=on(e);return yi(r,We(r,o),qe(r,o)+1).join("")},jn.trimEnd=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(ot,"");if(!t||!(e=ai(e)))return t;var r=on(t);return yi(r,0,qe(r,on(e))+1).join("")},jn.trimStart=function(t,e,n){if((t=ys(t))&&(n||e===i))return t.replace(it,"");if(!t||!(e=ai(e)))return t;var r=on(t);return yi(r,We(r,on(e))).join("")},jn.truncate=function(t,e){var n=30,r="...";if(ts(e)){var o="separator"in e?e.separator:o;n="length"in e?ds(e.length):n,r="omission"in e?ai(e.omission):r}var a=(t=ys(t)).length;if(Ke(t)){var s=on(t);a=s.length}if(n>=a)return t;var u=n-rn(r);if(u<1)return r;var l=s?yi(s,0,u).join(""):t.slice(0,u);if(o===i)return l+r;if(s&&(u+=l.length-u),os(o)){if(t.slice(u).search(o)){var c,h=l;for(o.global||(o=At(o.source,ys(ft.exec(o))+"g")),o.lastIndex=0;c=o.exec(h);)var f=c.index;l=l.slice(0,f===i?u:f)}}else if(t.indexOf(ai(o),u)!=u){var p=l.lastIndexOf(o);p>-1&&(l=l.slice(0,p))}return l+r},jn.unescape=function(t){return(t=ys(t))&&X.test(t)?t.replace(W,an):t},jn.uniqueId=function(t){var e=++Dt;return ys(t)+e},jn.upperCase=Qs,jn.upperFirst=Zs,jn.each=ya,jn.eachRight=ba,jn.first=qo,su(jn,(gu={},yr(jn,(function(t,e){Rt.call(jn.prototype,e)||(gu[e]=t)})),gu),{chain:!1}),jn.VERSION="4.17.20",be(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){jn[t].placeholder=jn})),be(["drop","take"],(function(t,e){Vn.prototype[t]=function(n){n=n===i?1:vn(ds(n),0);var r=this.__filtered__&&!e?new Vn(this):this.clone();return r.__filtered__?r.__takeCount__=gn(n,r.__takeCount__):r.__views__.push({size:gn(n,p),type:t+(r.__dir__<0?"Right":"")}),r},Vn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),be(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;Vn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:oo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),be(["head","last"],(function(t,e){var n="take"+(e?"Right":"");Vn.prototype[t]=function(){return this[n](1).value()[0]}})),be(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");Vn.prototype[t]=function(){return this.__filtered__?new Vn(this):this[n](1)}})),Vn.prototype.compact=function(){return this.filter(ru)},Vn.prototype.find=function(t){return this.filter(t).head()},Vn.prototype.findLast=function(t){return this.reverse().find(t)},Vn.prototype.invokeMap=Xr((function(t,e){return"function"==typeof t?new Vn(this):this.map((function(n){return Cr(n,t,e)}))})),Vn.prototype.reject=function(t){return this.filter(Da(oo(t)))},Vn.prototype.slice=function(t,e){t=ds(t);var n=this;return n.__filtered__&&(t>0||e<0)?new Vn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==i&&(n=(e=ds(e))<0?n.dropRight(-e):n.take(e-t)),n)},Vn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Vn.prototype.toArray=function(){return this.take(p)},yr(Vn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),o=jn[r?"take"+("last"==e?"Right":""):e],a=r||/^find/.test(e);o&&(jn.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof Vn,l=s[0],c=u||Ga(e),h=function(t){var e=o.apply(jn,Ae([t],s));return r&&f?e[0]:e};c&&n&&"function"==typeof l&&1!=l.length&&(u=c=!1);var f=this.__chain__,p=!!this.__actions__.length,d=a&&!f,m=u&&!p;if(!a&&c){e=m?e:new Vn(this);var v=t.apply(e,s);return v.__actions__.push({func:pa,args:[h],thisArg:i}),new Bn(v,f)}return d&&m?t.apply(this,s):(v=this.thru(h),d?r?v.value()[0]:v.value():v)})})),be(["pop","push","shift","sort","splice","unshift"],(function(t){var e=Ot[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);jn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ga(i)?i:[],t)}return this[n]((function(n){return e.apply(Ga(n)?n:[],t)}))}})),yr(Vn.prototype,(function(t,e){var n=jn[e];if(n){var r=n.name+"";Rt.call(On,r)||(On[r]=[]),On[r].push({name:e,func:n})}})),On[Fi(i,2).name]=[{name:"wrapper",func:i}],Vn.prototype.clone=function(){var t=new Vn(this.__wrapped__);return t.__actions__=Ai(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Ai(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Ai(this.__views__),t},Vn.prototype.reverse=function(){if(this.__filtered__){var t=new Vn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Vn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ga(t),r=e<0,i=n?t.length:0,o=function(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=gn(e,t+a);break;case"takeRight":t=vn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,l=r?s:a-1,c=this.__iteratees__,h=c.length,f=0,p=gn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return hi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var m=-1,v=t[l+=e];++m<h;){var g=c[m],y=g.iteratee,b=g.type,_=y(v);if(2==b)v=_;else if(!_){if(1==b)continue t;break t}}d[f++]=v}return d},jn.prototype.at=da,jn.prototype.chain=function(){return fa(this)},jn.prototype.commit=function(){return new Bn(this.value(),this.__chain__)},jn.prototype.next=function(){this.__values__===i&&(this.__values__=fs(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?i:this.__values__[this.__index__++]}},jn.prototype.plant=function(t){for(var e,n=this;n instanceof zn;){var r=Uo(n);r.__index__=0,r.__values__=i,e?o.__wrapped__=r:e=r;var o=r;n=n.__wrapped__}return o.__wrapped__=t,e},jn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Vn){var e=t;return this.__actions__.length&&(e=new Vn(this)),(e=e.reverse()).__actions__.push({func:pa,args:[ta],thisArg:i}),new Bn(e,this.__chain__)}return this.thru(ta)},jn.prototype.toJSON=jn.prototype.valueOf=jn.prototype.value=function(){return hi(this.__wrapped__,this.__actions__)},jn.prototype.first=jn.prototype.head,se&&(jn.prototype[se]=function(){return this}),jn}();oe._=sn,(r=function(){return sn}.call(e,n,e,t))===i||(t.exports=r)}.call(this)},5807:(t,e,n)=>{var r=n(6070),i=n(9278),o=n(7375),a=n(9785);t.exports=function(t,e){return(a(t)?r:o)(t,i(e,3))}},6651:(t,e,n)=>{var r=n(4554);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,t.exports=i},6001:(t,e,n)=>{var r=n(517),i=n(301),o=n(318),a=n(7948);t.exports=function(t){return o(t)?r(a(t)):i(t)}},5937:t=>{t.exports=function(){return[]}},7714:t=>{t.exports=function(){return!1}},5567:(t,e,n)=>{var r=n(4282);t.exports=function(t){return null==t?"":r(t)}},2525:t=>{"use strict";var e=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;function i(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,o){for(var a,s,u=i(t),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))n.call(a,c)&&(u[c]=a[c]);if(e){s=e(a);for(var h=0;h<s.length;h++)r.call(a,s[h])&&(u[s[h]]=a[s[h]])}}return u}},8772:(t,e,n)=>{"use strict";var r=n(331);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},3615:(t,e,n)=>{t.exports=n(8772)()},331:t=>{"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3577:(t,e,n)=>{"use strict";var r=n(7378),i=n(2525),o=n(1102);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(a(227));function s(t,e,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(t){this.onError(t)}}var u=!1,l=null,c=!1,h=null,f={onError:function(t){u=!0,l=t}};function p(t,e,n,r,i,o,a,c,h){u=!1,l=null,s.apply(f,arguments)}var d=null,m=null,v=null;function g(t,e,n){var r=t.type||"unknown-event";t.currentTarget=v(n),function(t,e,n,r,i,o,s,f,d){if(p.apply(this,arguments),u){if(!u)throw Error(a(198));var m=l;u=!1,l=null,c||(c=!0,h=m)}}(r,e,void 0,t),t.currentTarget=null}var y=null,b={};function _(){if(y)for(var t in b){var e=b[t],n=y.indexOf(t);if(!(-1<n))throw Error(a(96,t));if(!w[n]){if(!e.extractEvents)throw Error(a(97,t));for(var r in w[n]=e,n=e.eventTypes){var i=void 0,o=n[r],s=e,u=r;if(E.hasOwnProperty(u))throw Error(a(99,u));E[u]=o;var l=o.phasedRegistrationNames;if(l){for(i in l)l.hasOwnProperty(i)&&x(l[i],s,u);i=!0}else o.registrationName?(x(o.registrationName,s,u),i=!0):i=!1;if(!i)throw Error(a(98,r,t))}}}}function x(t,e,n){if(S[t])throw Error(a(100,t));S[t]=e,T[t]=e.eventTypes[n].dependencies}var w=[],E={},S={},T={};function A(t){var e,n=!1;for(e in t)if(t.hasOwnProperty(e)){var r=t[e];if(!b.hasOwnProperty(e)||b[e]!==r){if(b[e])throw Error(a(102,e));b[e]=r,n=!0}}n&&_()}var M=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),C=null,O=null,P=null;function k(t){if(t=m(t)){if("function"!=typeof C)throw Error(a(280));var e=t.stateNode;e&&(e=d(e),C(t.stateNode,t.type,e))}}function I(t){O?P?P.push(t):P=[t]:O=t}function L(){if(O){var t=O,e=P;if(P=O=null,k(t),e)for(t=0;t<e.length;t++)k(e[t])}}function R(t,e){return t(e)}function D(t,e,n,r,i){return t(e,n,r,i)}function N(){}var F=R,j=!1,U=!1;function z(){null===O&&null===P||(N(),L())}function B(t,e,n){if(U)return t(e,n);U=!0;try{return F(t,e,n)}finally{U=!1,z()}}var V=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H=Object.prototype.hasOwnProperty,G={},W={};function q(t,e,n,r,i,o){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o}var X={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){X[t]=new q(t,0,!1,t,null,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];X[e]=new q(e,1,!1,t[1],null,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){X[t]=new q(t,2,!1,t.toLowerCase(),null,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){X[t]=new q(t,2,!1,t,null,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){X[t]=new q(t,3,!1,t.toLowerCase(),null,!1)})),["checked","multiple","muted","selected"].forEach((function(t){X[t]=new q(t,3,!0,t,null,!1)})),["capture","download"].forEach((function(t){X[t]=new q(t,4,!1,t,null,!1)})),["cols","rows","size","span"].forEach((function(t){X[t]=new q(t,6,!1,t,null,!1)})),["rowSpan","start"].forEach((function(t){X[t]=new q(t,5,!1,t.toLowerCase(),null,!1)}));var Y=/[\-:]([a-z])/g;function Q(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(Y,Q);X[e]=new q(e,1,!1,t,null,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(Y,Q);X[e]=new q(e,1,!1,t,"http://www.w3.org/1999/xlink",!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(Y,Q);X[e]=new q(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1)})),["tabIndex","crossOrigin"].forEach((function(t){X[t]=new q(t,1,!1,t.toLowerCase(),null,!1)})),X.xlinkHref=new q("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach((function(t){X[t]=new q(t,1,!1,t.toLowerCase(),null,!0)}));var Z=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function K(t,e,n,r){var i=X.hasOwnProperty(e)?X[e]:null;(null!==i?0===i.type:!r&&2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1]))||(function(t,e,n,r){if(null==e||function(t,e,n,r){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,i,r)&&(n=null),r||null===i?function(t){return!!H.call(W,t)||!H.call(G,t)&&(V.test(t)?W[t]=!0:(G[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=null===n?3!==i.type&&"":n:(e=i.attributeName,r=i.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}Z.hasOwnProperty("ReactCurrentDispatcher")||(Z.ReactCurrentDispatcher={current:null}),Z.hasOwnProperty("ReactCurrentBatchConfig")||(Z.ReactCurrentBatchConfig={suspense:null});var $=/^(.*)[\\\/]/,J="function"==typeof Symbol&&Symbol.for,tt=J?Symbol.for("react.element"):60103,et=J?Symbol.for("react.portal"):60106,nt=J?Symbol.for("react.fragment"):60107,rt=J?Symbol.for("react.strict_mode"):60108,it=J?Symbol.for("react.profiler"):60114,ot=J?Symbol.for("react.provider"):60109,at=J?Symbol.for("react.context"):60110,st=J?Symbol.for("react.concurrent_mode"):60111,ut=J?Symbol.for("react.forward_ref"):60112,lt=J?Symbol.for("react.suspense"):60113,ct=J?Symbol.for("react.suspense_list"):60120,ht=J?Symbol.for("react.memo"):60115,ft=J?Symbol.for("react.lazy"):60116,pt=J?Symbol.for("react.block"):60121,dt="function"==typeof Symbol&&Symbol.iterator;function mt(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=dt&&t[dt]||t["@@iterator"])?t:null}function vt(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case nt:return"Fragment";case et:return"Portal";case it:return"Profiler";case rt:return"StrictMode";case lt:return"Suspense";case ct:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case at:return"Context.Consumer";case ot:return"Context.Provider";case ut:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case ht:return vt(t.type);case pt:return vt(t.render);case ft:if(t=1===t._status?t._result:null)return vt(t)}return null}function gt(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=vt(t.type);n=null,r&&(n=vt(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace($,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}function yt(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function bt(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function _t(t){t._valueTracker||(t._valueTracker=function(t){var e=bt(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(t){r=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(t){r=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function xt(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=bt(t)?t.checked?"true":"false":t.value),(t=r)!==n&&(e.setValue(t),!0)}function wt(t,e){var n=e.checked;return i({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function Et(t,e){var n=null==e.defaultValue?"":e.defaultValue,r=null!=e.checked?e.checked:e.defaultChecked;n=yt(null!=e.value?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function St(t,e){null!=(e=e.checked)&&K(t,"checked",e,!1)}function Tt(t,e){St(t,e);var n=yt(e.value),r=e.type;if(null!=n)"number"===r?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===r||"reset"===r)return void t.removeAttribute("value");e.hasOwnProperty("value")?Mt(t,e.type,n):e.hasOwnProperty("defaultValue")&&Mt(t,e.type,yt(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function At(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!("submit"!==r&&"reset"!==r||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function Mt(t,e,n){"number"===e&&t.ownerDocument.activeElement===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function Ct(t,e){return t=i({children:void 0},e),(e=function(t){var e="";return r.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function Ot(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+yt(n),e=null,i=0;i<t.length;i++){if(t[i].value===n)return t[i].selected=!0,void(r&&(t[i].defaultSelected=!0));null!==e||t[i].disabled||(e=t[i])}null!==e&&(e.selected=!0)}}function Pt(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return i({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kt(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:yt(n)}}function It(t,e){var n=yt(e.value),r=yt(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=r&&(t.defaultValue=""+r)}function Lt(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}function Rt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dt(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?Rt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var Nt,Ft,jt=(Ft=function(t,e){if("http://www.w3.org/2000/svg"!==t.namespaceURI||"innerHTML"in t)t.innerHTML=e;else{for((Nt=Nt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Nt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,r){MSApp.execUnsafeLocalFunction((function(){return Ft(t,e)}))}:Ft);function Ut(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}function zt(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bt={animationend:zt("Animation","AnimationEnd"),animationiteration:zt("Animation","AnimationIteration"),animationstart:zt("Animation","AnimationStart"),transitionend:zt("Transition","TransitionEnd")},Vt={},Ht={};function Gt(t){if(Vt[t])return Vt[t];if(!Bt[t])return t;var e,n=Bt[t];for(e in n)if(n.hasOwnProperty(e)&&e in Ht)return Vt[t]=n[e];return t}M&&(Ht=document.createElement("div").style,"AnimationEvent"in window||(delete Bt.animationend.animation,delete Bt.animationiteration.animation,delete Bt.animationstart.animation),"TransitionEvent"in window||delete Bt.transitionend.transition);var Wt=Gt("animationend"),qt=Gt("animationiteration"),Xt=Gt("animationstart"),Yt=Gt("transitionend"),Qt="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Zt=new("function"==typeof WeakMap?WeakMap:Map);function Kt(t){var e=Zt.get(t);return void 0===e&&(e=new Map,Zt.set(t,e)),e}function $t(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Jt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&null!==(t=t.alternate)&&(e=t.memoizedState),null!==e)return e.dehydrated}return null}function te(t){if($t(t)!==t)throw Error(a(188))}function ee(t,e){if(null==e)throw Error(a(30));return null==t?e:Array.isArray(t)?Array.isArray(e)?(t.push.apply(t,e),t):(t.push(e),t):Array.isArray(e)?[t].concat(e):[t,e]}function ne(t,e,n){Array.isArray(t)?t.forEach(e,n):t&&e.call(n,t)}var re=null;function ie(t){if(t){var e=t._dispatchListeners,n=t._dispatchInstances;if(Array.isArray(e))for(var r=0;r<e.length&&!t.isPropagationStopped();r++)g(t,e[r],n[r]);else e&&g(t,e,n);t._dispatchListeners=null,t._dispatchInstances=null,t.isPersistent()||t.constructor.release(t)}}function oe(t){if(null!==t&&(re=ee(re,t)),t=re,re=null,t){if(ne(t,ie),re)throw Error(a(95));if(c)throw t=h,c=!1,h=null,t}}function ae(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}function se(t){if(!M)return!1;var e=(t="on"+t)in document;return e||((e=document.createElement("div")).setAttribute(t,"return;"),e="function"==typeof e[t]),e}var ue=[];function le(t){t.topLevelType=null,t.nativeEvent=null,t.targetInst=null,t.ancestors.length=0,10>ue.length&&ue.push(t)}function ce(t,e,n,r){if(ue.length){var i=ue.pop();return i.topLevelType=t,i.eventSystemFlags=r,i.nativeEvent=e,i.targetInst=n,i}return{topLevelType:t,eventSystemFlags:r,nativeEvent:e,targetInst:n,ancestors:[]}}function he(t){var e=t.targetInst,n=e;do{if(!n){t.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(e=n.tag)&&6!==e||t.ancestors.push(n),n=Cn(r)}while(n);for(n=0;n<t.ancestors.length;n++){e=t.ancestors[n];var i=ae(t.nativeEvent);r=t.topLevelType;var o=t.nativeEvent,a=t.eventSystemFlags;0===n&&(a|=64);for(var s=null,u=0;u<w.length;u++){var l=w[u];l&&(l=l.extractEvents(r,e,o,i,a))&&(s=ee(s,l))}oe(s)}}function fe(t,e,n){if(!n.has(t)){switch(t){case"scroll":qe(e,"scroll",!0);break;case"focus":case"blur":qe(e,"focus",!0),qe(e,"blur",!0),n.set("blur",null),n.set("focus",null);break;case"cancel":case"close":se(t)&&qe(e,t,!0);break;case"invalid":case"submit":case"reset":break;default:-1===Qt.indexOf(t)&&We(t,e)}n.set(t,null)}}var pe,de,me,ve=!1,ge=[],ye=null,be=null,_e=null,xe=new Map,we=new Map,Ee=[],Se="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),Te="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function Ae(t,e,n,r,i){return{blockedOn:t,topLevelType:e,eventSystemFlags:32|n,nativeEvent:i,container:r}}function Me(t,e){switch(t){case"focus":case"blur":ye=null;break;case"dragenter":case"dragleave":be=null;break;case"mouseover":case"mouseout":_e=null;break;case"pointerover":case"pointerout":xe.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":we.delete(e.pointerId)}}function Ce(t,e,n,r,i,o){return null===t||t.nativeEvent!==o?(t=Ae(e,n,r,i,o),null!==e&&null!==(e=On(e))&&de(e),t):(t.eventSystemFlags|=r,t)}function Oe(t){var e=Cn(t.target);if(null!==e){var n=$t(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Jt(n)))return t.blockedOn=e,void o.unstable_runWithPriority(t.priority,(function(){me(n)}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function Pe(t){if(null!==t.blockedOn)return!1;var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);if(null!==e){var n=On(e);return null!==n&&de(n),t.blockedOn=e,!1}return!0}function ke(t,e,n){Pe(t)&&n.delete(e)}function Ie(){for(ve=!1;0<ge.length;){var t=ge[0];if(null!==t.blockedOn){null!==(t=On(t.blockedOn))&&pe(t);break}var e=Ze(t.topLevelType,t.eventSystemFlags,t.container,t.nativeEvent);null!==e?t.blockedOn=e:ge.shift()}null!==ye&&Pe(ye)&&(ye=null),null!==be&&Pe(be)&&(be=null),null!==_e&&Pe(_e)&&(_e=null),xe.forEach(ke),we.forEach(ke)}function Le(t,e){t.blockedOn===e&&(t.blockedOn=null,ve||(ve=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,Ie)))}function Re(t){function e(e){return Le(e,t)}if(0<ge.length){Le(ge[0],t);for(var n=1;n<ge.length;n++){var r=ge[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==ye&&Le(ye,t),null!==be&&Le(be,t),null!==_e&&Le(_e,t),xe.forEach(e),we.forEach(e),n=0;n<Ee.length;n++)(r=Ee[n]).blockedOn===t&&(r.blockedOn=null);for(;0<Ee.length&&null===(n=Ee[0]).blockedOn;)Oe(n),null===n.blockedOn&&Ee.shift()}var De={},Ne=new Map,Fe=new Map,je=["abort","abort",Wt,"animationEnd",qt,"animationIteration",Xt,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Yt,"transitionEnd","waiting","waiting"];function Ue(t,e){for(var n=0;n<t.length;n+=2){var r=t[n],i=t[n+1],o="on"+(i[0].toUpperCase()+i.slice(1));o={phasedRegistrationNames:{bubbled:o,captured:o+"Capture"},dependencies:[r],eventPriority:e},Fe.set(r,e),Ne.set(r,o),De[i]=o}}Ue("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ue("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ue(je,2);for(var ze="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Be=0;Be<ze.length;Be++)Fe.set(ze[Be],0);var Ve=o.unstable_UserBlockingPriority,He=o.unstable_runWithPriority,Ge=!0;function We(t,e){qe(e,t,!1)}function qe(t,e,n){var r=Fe.get(e);switch(void 0===r?2:r){case 0:r=Xe.bind(null,e,1,t);break;case 1:r=Ye.bind(null,e,1,t);break;default:r=Qe.bind(null,e,1,t)}n?t.addEventListener(e,r,!0):t.addEventListener(e,r,!1)}function Xe(t,e,n,r){j||N();var i=Qe,o=j;j=!0;try{D(i,t,e,n,r)}finally{(j=o)||z()}}function Ye(t,e,n,r){He(Ve,Qe.bind(null,t,e,n,r))}function Qe(t,e,n,r){if(Ge)if(0<ge.length&&-1<Se.indexOf(t))t=Ae(null,t,e,n,r),ge.push(t);else{var i=Ze(t,e,n,r);if(null===i)Me(t,r);else if(-1<Se.indexOf(t))t=Ae(i,t,e,n,r),ge.push(t);else if(!function(t,e,n,r,i){switch(e){case"focus":return ye=Ce(ye,t,e,n,r,i),!0;case"dragenter":return be=Ce(be,t,e,n,r,i),!0;case"mouseover":return _e=Ce(_e,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return xe.set(o,Ce(xe.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,we.set(o,Ce(we.get(o)||null,t,e,n,r,i)),!0}return!1}(i,t,e,n,r)){Me(t,r),t=ce(t,r,null,e);try{B(he,t)}finally{le(t)}}}}function Ze(t,e,n,r){if(null!==(n=Cn(n=ae(r)))){var i=$t(n);if(null===i)n=null;else{var o=i.tag;if(13===o){if(null!==(n=Jt(i)))return n;n=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;n=null}else i!==n&&(n=null)}}t=ce(t,r,n,e);try{B(he,t)}finally{le(t)}return null}var Ke={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$e=["Webkit","ms","Moz","O"];function Je(t,e,n){return null==e||"boolean"==typeof e||""===e?"":n||"number"!=typeof e||0===e||Ke.hasOwnProperty(t)&&Ke[t]?(""+e).trim():e+"px"}function tn(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Je(n,e[n],r);"float"===n&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}Object.keys(Ke).forEach((function(t){$e.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ke[e]=Ke[t]}))}));var en=i({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function nn(t,e){if(e){if(en[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t,""));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!=typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!=typeof e.style)throw Error(a(62,""))}}function rn(t,e){if(-1===t.indexOf("-"))return"string"==typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var on="http://www.w3.org/1999/xhtml";function an(t,e){var n=Kt(t=9===t.nodeType||11===t.nodeType?t:t.ownerDocument);e=T[e];for(var r=0;r<e.length;r++)fe(e[r],t,n)}function sn(){}function un(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function ln(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cn(t,e){var n,r=ln(t);for(t=0;r;){if(3===r.nodeType){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}t:{for(;r;){if(r.nextSibling){r=r.nextSibling;break t}r=r.parentNode}r=void 0}r=ln(r)}}function hn(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?hn(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function fn(){for(var t=window,e=un();e instanceof t.HTMLIFrameElement;){try{var n="string"==typeof e.contentWindow.location.href}catch(t){n=!1}if(!n)break;e=un((t=e.contentWindow).document)}return e}function pn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var dn="$?",mn="$!",vn=null,gn=null;function yn(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function bn(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"==typeof e.children||"number"==typeof e.children||"object"==typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var _n="function"==typeof setTimeout?setTimeout:void 0,xn="function"==typeof clearTimeout?clearTimeout:void 0;function wn(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function En(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||n===mn||n===dn){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Sn=Math.random().toString(36).slice(2),Tn="__reactInternalInstance$"+Sn,An="__reactEventHandlers$"+Sn,Mn="__reactContainere$"+Sn;function Cn(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Mn]||n[Tn]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=En(t);null!==t;){if(n=t[Tn])return n;t=En(t)}return e}n=(t=n).parentNode}return null}function On(t){return!(t=t[Tn]||t[Mn])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function Pn(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function kn(t){return t[An]||null}function In(t){do{t=t.return}while(t&&5!==t.tag);return t||null}function Ln(t,e){var n=t.stateNode;if(!n)return null;var r=d(n);if(!r)return null;n=r[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!r;break t;default:t=!1}if(t)return null;if(n&&"function"!=typeof n)throw Error(a(231,e,typeof n));return n}function Rn(t,e,n){(e=Ln(t,n.dispatchConfig.phasedRegistrationNames[e]))&&(n._dispatchListeners=ee(n._dispatchListeners,e),n._dispatchInstances=ee(n._dispatchInstances,t))}function Dn(t){if(t&&t.dispatchConfig.phasedRegistrationNames){for(var e=t._targetInst,n=[];e;)n.push(e),e=In(e);for(e=n.length;0<e--;)Rn(n[e],"captured",t);for(e=0;e<n.length;e++)Rn(n[e],"bubbled",t)}}function Nn(t,e,n){t&&n&&n.dispatchConfig.registrationName&&(e=Ln(t,n.dispatchConfig.registrationName))&&(n._dispatchListeners=ee(n._dispatchListeners,e),n._dispatchInstances=ee(n._dispatchInstances,t))}function Fn(t){ne(t,Dn)}var jn=null,Un=null,zn=null;function Bn(){if(zn)return zn;var t,e,n=Un,r=n.length,i="value"in jn?jn.value:jn.textContent,o=i.length;for(t=0;t<r&&n[t]===i[t];t++);var a=r-t;for(e=1;e<=a&&n[r-e]===i[o-e];e++);return zn=i.slice(t,1<e?1-e:void 0)}function Vn(){return!0}function Hn(){return!1}function Gn(t,e,n,r){for(var i in this.dispatchConfig=t,this._targetInst=e,this.nativeEvent=n,t=this.constructor.Interface)t.hasOwnProperty(i)&&((e=t[i])?this[i]=e(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Vn:Hn,this.isPropagationStopped=Hn,this}function Wn(t,e,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,t,e,n,r),i}return new this(t,e,n,r)}function qn(t){if(!(t instanceof this))throw Error(a(279));t.destructor(),10>this.eventPool.length&&this.eventPool.push(t)}function Xn(t){t.eventPool=[],t.getPooled=Wn,t.release=qn}i(Gn.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!=typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=Vn)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!=typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=Vn)},persist:function(){this.isPersistent=Vn},isPersistent:Hn,destructor:function(){var t,e=this.constructor.Interface;for(t in e)this[t]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Hn,this._dispatchInstances=this._dispatchListeners=null}}),Gn.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Gn.extend=function(t){function e(){}function n(){return r.apply(this,arguments)}var r=this;e.prototype=r.prototype;var o=new e;return i(o,n.prototype),n.prototype=o,n.prototype.constructor=n,n.Interface=i({},r.Interface,t),n.extend=r.extend,Xn(n),n},Xn(Gn);var Yn=Gn.extend({data:null}),Qn=Gn.extend({data:null}),Zn=[9,13,27,32],Kn=M&&"CompositionEvent"in window,$n=null;M&&"documentMode"in document&&($n=document.documentMode);var Jn=M&&"TextEvent"in window&&!$n,tr=M&&(!Kn||$n&&8<$n&&11>=$n),er=String.fromCharCode(32),nr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},rr=!1;function ir(t,e){switch(t){case"keyup":return-1!==Zn.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function or(t){return"object"==typeof(t=t.detail)&&"data"in t?t.data:null}var ar=!1,sr={eventTypes:nr,extractEvents:function(t,e,n,r){var i;if(Kn)t:{switch(t){case"compositionstart":var o=nr.compositionStart;break t;case"compositionend":o=nr.compositionEnd;break t;case"compositionupdate":o=nr.compositionUpdate;break t}o=void 0}else ar?ir(t,n)&&(o=nr.compositionEnd):"keydown"===t&&229===n.keyCode&&(o=nr.compositionStart);return o?(tr&&"ko"!==n.locale&&(ar||o!==nr.compositionStart?o===nr.compositionEnd&&ar&&(i=Bn()):(Un="value"in(jn=r)?jn.value:jn.textContent,ar=!0)),o=Yn.getPooled(o,e,n,r),(i||null!==(i=or(n)))&&(o.data=i),Fn(o),i=o):i=null,(t=Jn?function(t,e){switch(t){case"compositionend":return or(e);case"keypress":return 32!==e.which?null:(rr=!0,er);case"textInput":return(t=e.data)===er&&rr?null:t;default:return null}}(t,n):function(t,e){if(ar)return"compositionend"===t||!Kn&&ir(t,e)?(t=Bn(),zn=Un=jn=null,ar=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tr&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))?((e=Qn.getPooled(nr.beforeInput,e,n,r)).data=t,Fn(e)):e=null,null===i?e:null===e?i:[i,e]}},ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lr(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!ur[t.type]:"textarea"===e}var cr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function hr(t,e,n){return(t=Gn.getPooled(cr.change,t,e,n)).type="change",I(n),Fn(t),t}var fr=null,pr=null;function dr(t){oe(t)}function mr(t){if(xt(Pn(t)))return t}function vr(t,e){if("change"===t)return e}var gr=!1;function yr(){fr&&(fr.detachEvent("onpropertychange",br),pr=fr=null)}function br(t){if("value"===t.propertyName&&mr(pr))if(t=hr(pr,t,ae(t)),j)oe(t);else{j=!0;try{R(dr,t)}finally{j=!1,z()}}}function _r(t,e,n){"focus"===t?(yr(),pr=n,(fr=e).attachEvent("onpropertychange",br)):"blur"===t&&yr()}function xr(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return mr(pr)}function wr(t,e){if("click"===t)return mr(e)}function Er(t,e){if("input"===t||"change"===t)return mr(e)}M&&(gr=se("input")&&(!document.documentMode||9<document.documentMode));var Sr={eventTypes:cr,_isInputEventSupported:gr,extractEvents:function(t,e,n,r){var i=e?Pn(e):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=vr;else if(lr(i))if(gr)a=Er;else{a=xr;var s=_r}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(a=wr);if(a&&(a=a(t,e)))return hr(a,n,r);s&&s(t,i,e),"blur"===t&&(t=i._wrapperState)&&t.controlled&&"number"===i.type&&Mt(i,"number",i.value)}},Tr=Gn.extend({view:null,detail:null}),Ar={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mr(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=Ar[t])&&!!e[t]}function Cr(){return Mr}var Or=0,Pr=0,kr=!1,Ir=!1,Lr=Tr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Cr,button:null,buttons:null,relatedTarget:function(t){return t.relatedTarget||(t.fromElement===t.srcElement?t.toElement:t.fromElement)},movementX:function(t){if("movementX"in t)return t.movementX;var e=Or;return Or=t.screenX,kr?"mousemove"===t.type?t.screenX-e:0:(kr=!0,0)},movementY:function(t){if("movementY"in t)return t.movementY;var e=Pr;return Pr=t.screenY,Ir?"mousemove"===t.type?t.screenY-e:0:(Ir=!0,0)}}),Rr=Lr.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),Dr={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Nr={eventTypes:Dr,extractEvents:function(t,e,n,r,i){var o="mouseover"===t||"pointerover"===t,a="mouseout"===t||"pointerout"===t;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=e,null!==(e=(e=n.relatedTarget||n.toElement)?Cn(e):null)&&(e!==$t(e)||5!==e.tag&&6!==e.tag)&&(e=null)):a=null,a===e)return null;if("mouseout"===t||"mouseover"===t)var s=Lr,u=Dr.mouseLeave,l=Dr.mouseEnter,c="mouse";else"pointerout"!==t&&"pointerover"!==t||(s=Rr,u=Dr.pointerLeave,l=Dr.pointerEnter,c="pointer");if(t=null==a?o:Pn(a),o=null==e?o:Pn(e),(u=s.getPooled(u,a,n,r)).type=c+"leave",u.target=t,u.relatedTarget=o,(n=s.getPooled(l,e,n,r)).type=c+"enter",n.target=o,n.relatedTarget=t,c=e,(r=a)&&c)t:{for(l=c,a=0,t=s=r;t;t=In(t))a++;for(t=0,e=l;e;e=In(e))t++;for(;0<a-t;)s=In(s),a--;for(;0<t-a;)l=In(l),t--;for(;a--;){if(s===l||s===l.alternate)break t;s=In(s),l=In(l)}s=null}else s=null;for(l=s,s=[];r&&r!==l&&(null===(a=r.alternate)||a!==l);)s.push(r),r=In(r);for(r=[];c&&c!==l&&(null===(a=c.alternate)||a!==l);)r.push(c),c=In(c);for(c=0;c<s.length;c++)Nn(s[c],"bubbled",u);for(c=r.length;0<c--;)Nn(r[c],"captured",n);return 0==(64&i)?[u]:[u,n]}},Fr="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},jr=Object.prototype.hasOwnProperty;function Ur(t,e){if(Fr(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!jr.call(e,n[r])||!Fr(t[n[r]],e[n[r]]))return!1;return!0}var zr=M&&"documentMode"in document&&11>=document.documentMode,Br={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},Vr=null,Hr=null,Gr=null,Wr=!1;function qr(t,e){var n=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;return Wr||null==Vr||Vr!==un(n)?null:(n="selectionStart"in(n=Vr)&&pn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},Gr&&Ur(Gr,n)?null:(Gr=n,(t=Gn.getPooled(Br.select,Hr,t,e)).type="select",t.target=Vr,Fn(t),t))}var Xr={eventTypes:Br,extractEvents:function(t,e,n,r,i,o){if(!(o=!(i=o||(r.window===r?r.document:9===r.nodeType?r:r.ownerDocument)))){t:{i=Kt(i),o=T.onSelect;for(var a=0;a<o.length;a++)if(!i.has(o[a])){i=!1;break t}i=!0}o=!i}if(o)return null;switch(i=e?Pn(e):window,t){case"focus":(lr(i)||"true"===i.contentEditable)&&(Vr=i,Hr=e,Gr=null);break;case"blur":Gr=Hr=Vr=null;break;case"mousedown":Wr=!0;break;case"contextmenu":case"mouseup":case"dragend":return Wr=!1,qr(n,r);case"selectionchange":if(zr)break;case"keydown":case"keyup":return qr(n,r)}return null}},Yr=Gn.extend({animationName:null,elapsedTime:null,pseudoElement:null}),Qr=Gn.extend({clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Zr=Tr.extend({relatedTarget:null});function Kr(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}var $r={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Jr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ti=Tr.extend({key:function(t){if(t.key){var e=$r[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=Kr(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Jr[t.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Cr,charCode:function(t){return"keypress"===t.type?Kr(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?Kr(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}}),ei=Lr.extend({dataTransfer:null}),ni=Tr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Cr}),ri=Gn.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),ii=Lr.extend({deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:null,deltaMode:null}),oi={eventTypes:De,extractEvents:function(t,e,n,r){var i=Ne.get(t);if(!i)return null;switch(t){case"keypress":if(0===Kr(n))return null;case"keydown":case"keyup":t=ti;break;case"blur":case"focus":t=Zr;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":t=Lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":t=ei;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":t=ni;break;case Wt:case qt:case Xt:t=Yr;break;case Yt:t=ri;break;case"scroll":t=Tr;break;case"wheel":t=ii;break;case"copy":case"cut":case"paste":t=Qr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":t=Rr;break;default:t=Gn}return Fn(e=t.getPooled(i,e,n,r)),e}};if(y)throw Error(a(101));y=Array.prototype.slice.call("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),_(),d=kn,m=On,v=Pn,A({SimpleEventPlugin:oi,EnterLeaveEventPlugin:Nr,ChangeEventPlugin:Sr,SelectEventPlugin:Xr,BeforeInputEventPlugin:sr});var ai=[],si=-1;function ui(t){0>si||(t.current=ai[si],ai[si]=null,si--)}function li(t,e){si++,ai[si]=t.current,t.current=e}var ci={},hi={current:ci},fi={current:!1},pi=ci;function di(t,e){var n=t.type.contextTypes;if(!n)return ci;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function mi(t){return null!=t.childContextTypes}function vi(){ui(fi),ui(hi)}function gi(t,e,n){if(hi.current!==ci)throw Error(a(168));li(hi,e),li(fi,n)}function yi(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(a(108,vt(e)||"Unknown",o));return i({},n,{},r)}function bi(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ci,pi=hi.current,li(hi,t),li(fi,fi.current),!0}function _i(t,e,n){var r=t.stateNode;if(!r)throw Error(a(169));n?(t=yi(t,e,pi),r.__reactInternalMemoizedMergedChildContext=t,ui(fi),ui(hi),li(hi,t)):ui(fi),li(fi,n)}var xi=o.unstable_runWithPriority,wi=o.unstable_scheduleCallback,Ei=o.unstable_cancelCallback,Si=o.unstable_requestPaint,Ti=o.unstable_now,Ai=o.unstable_getCurrentPriorityLevel,Mi=o.unstable_ImmediatePriority,Ci=o.unstable_UserBlockingPriority,Oi=o.unstable_NormalPriority,Pi=o.unstable_LowPriority,ki=o.unstable_IdlePriority,Ii={},Li=o.unstable_shouldYield,Ri=void 0!==Si?Si:function(){},Di=null,Ni=null,Fi=!1,ji=Ti(),Ui=1e4>ji?Ti:function(){return Ti()-ji};function zi(){switch(Ai()){case Mi:return 99;case Ci:return 98;case Oi:return 97;case Pi:return 96;case ki:return 95;default:throw Error(a(332))}}function Bi(t){switch(t){case 99:return Mi;case 98:return Ci;case 97:return Oi;case 96:return Pi;case 95:return ki;default:throw Error(a(332))}}function Vi(t,e){return t=Bi(t),xi(t,e)}function Hi(t,e,n){return t=Bi(t),wi(t,e,n)}function Gi(t){return null===Di?(Di=[t],Ni=wi(Mi,qi)):Di.push(t),Ii}function Wi(){if(null!==Ni){var t=Ni;Ni=null,Ei(t)}qi()}function qi(){if(!Fi&&null!==Di){Fi=!0;var t=0;try{var e=Di;Vi(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Di=null}catch(e){throw null!==Di&&(Di=Di.slice(t+1)),wi(Mi,Wi),e}finally{Fi=!1}}}function Xi(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}function Yi(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var Qi={current:null},Zi=null,Ki=null,$i=null;function Ji(){$i=Ki=Zi=null}function to(t){var e=Qi.current;ui(Qi),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function no(t,e){Zi=t,$i=Ki=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(Pa=!0),t.firstContext=null)}function ro(t,e){if($i!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||($i=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Ki){if(null===Zi)throw Error(a(308));Ki=e,Zi.dependencies={expirationTime:0,firstContext:e,responders:null}}else Ki=Ki.next=e;return t._currentValue}var io=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function so(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function lo(t,e){var n=t.alternate;null!==n&&ao(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function co(t,e,n,r){var o=t.updateQueue;io=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&null!==(u=u.updateQueue)&&(u.baseQueue=s)}if(null!==a){u=a.next;var l=o.baseState,c=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var m={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=m,h=l):p=p.next=m,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),su(s,d.suspenseConfig);t:{var v=t,g=d;switch(s=e,m=n,g.tag){case 1:if("function"==typeof(v=g.payload)){l=v.call(m,l,s);break t}l=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(s="function"==typeof(v=g.payload)?v.call(m,l,s):v))break t;l=i({},l,s);break t;case 2:io=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=l:p.next=f,o.baseState=h,o.baseQueue=p,uu(c),t.expirationTime=c,t.memoizedState=l}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(a(191,r));r.call(i)}}}var fo=Z.ReactCurrentBatchConfig,po=(new r.Component).refs;function mo(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var vo={isMounted:function(t){return!!(t=t._reactInternalFiber)&&$t(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=fo.suspense;(i=so(r=Qs(r,t,i),i)).payload=e,null!=n&&(i.callback=n),uo(t,i),Zs(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Ys(),i=fo.suspense;(i=so(r=Qs(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),uo(t,i),Zs(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Ys(),r=fo.suspense;(r=so(n=Qs(n,t,r),r)).tag=2,null!=e&&(r.callback=e),uo(t,r),Zs(t,n)}};function go(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!(e.prototype&&e.prototype.isPureReactComponent&&Ur(n,r)&&Ur(i,o))}function yo(t,e,n){var r=!1,i=ci,o=e.contextType;return"object"==typeof o&&null!==o?o=ro(o):(i=mi(e)?pi:hi.current,o=(r=null!=(r=e.contextTypes))?di(t,i):ci),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=vo,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function bo(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&vo.enqueueReplaceState(e,e.state,null)}function _o(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=po,oo(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ro(o):(o=mi(e)?pi:hi.current,i.context=di(t,o)),co(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(mo(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&vo.enqueueReplaceState(i,i.state,null),co(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var xo=Array.isArray;function wo(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===po&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function Eo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function So(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=Cu(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function s(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=ku(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=wo(t,e,n),r.return=t,r):((r=Ou(n.type,n.key,n.props,null,t.mode,r)).ref=wo(t,e,n),r.return=t,r)}function c(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Iu(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function h(t,e,n,r,o){return null===e||7!==e.tag?((e=Pu(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function f(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ku(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case tt:return(n=Ou(e.type,e.key,e.props,null,t.mode,n)).ref=wo(t,null,e),n.return=t,n;case et:return(e=Iu(e,t.mode,n)).return=t,e}if(xo(e)||mt(e))return(e=Pu(e,t.mode,n,null)).return=t,e;Eo(t,e)}return null}function p(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case tt:return n.key===i?n.type===nt?h(t,e,n.props.children,r,i):l(t,e,n,r):null;case et:return n.key===i?c(t,e,n,r):null}if(xo(n)||mt(n))return null!==i?null:h(t,e,n,r,null);Eo(t,n)}return null}function d(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case tt:return t=t.get(null===r.key?n:r.key)||null,r.type===nt?h(e,t,r.props.children,i,r.key):l(e,t,r,i);case et:return c(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(xo(r)||mt(r))return h(e,t=t.get(n)||null,r,i,null);Eo(e,r)}return null}function m(i,a,s,u){for(var l=null,c=null,h=a,m=a=0,v=null;null!==h&&m<s.length;m++){h.index>m?(v=h,h=null):v=h.sibling;var g=p(i,h,s[m],u);if(null===g){null===h&&(h=v);break}t&&h&&null===g.alternate&&e(i,h),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g,h=v}if(m===s.length)return n(i,h),l;if(null===h){for(;m<s.length;m++)null!==(h=f(i,s[m],u))&&(a=o(h,a,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);m<s.length;m++)null!==(v=d(h,i,m,s[m],u))&&(t&&null!==v.alternate&&h.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v);return t&&h.forEach((function(t){return e(i,t)})),l}function v(i,s,u,l){var c=mt(u);if("function"!=typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,m=s,v=s=0,g=null,y=u.next();null!==m&&!y.done;v++,y=u.next()){m.index>v?(g=m,m=null):g=m.sibling;var b=p(i,m,y.value,l);if(null===b){null===m&&(m=g);break}t&&m&&null===b.alternate&&e(i,m),s=o(b,s,v),null===h?c=b:h.sibling=b,h=b,m=g}if(y.done)return n(i,m),c;if(null===m){for(;!y.done;v++,y=u.next())null!==(y=f(i,y.value,l))&&(s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return c}for(m=r(i,m);!y.done;v++,y=u.next())null!==(y=d(m,i,v,y.value,l))&&(t&&null!==y.alternate&&m.delete(null===y.key?v:y.key),s=o(y,s,v),null===h?c=y:h.sibling=y,h=y);return t&&m.forEach((function(t){return e(i,t)})),c}return function(t,r,o,u){var l="object"==typeof o&&null!==o&&o.type===nt&&null===o.key;l&&(o=o.props.children);var c="object"==typeof o&&null!==o;if(c)switch(o.$$typeof){case tt:t:{for(c=o.key,l=r;null!==l;){if(l.key===c){switch(l.tag){case 7:if(o.type===nt){n(t,l.sibling),(r=i(l,o.props.children)).return=t,t=r;break t}break;default:if(l.elementType===o.type){n(t,l.sibling),(r=i(l,o.props)).ref=wo(t,l,o),r.return=t,t=r;break t}}n(t,l);break}e(t,l),l=l.sibling}o.type===nt?((r=Pu(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=Ou(o.type,o.key,o.props,null,t.mode,u)).ref=wo(t,r,o),u.return=t,t=u)}return s(t);case et:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=Iu(o,t.mode,u)).return=t,t=r}return s(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=ku(o,t.mode,u)).return=t,t=r),s(t);if(xo(o))return m(t,r,o,u);if(mt(o))return v(t,r,o,u);if(c&&Eo(t,o),void 0===o&&!l)switch(t.tag){case 1:case 0:throw t=t.type,Error(a(152,t.displayName||t.name||"Component"))}return n(t,r)}}var To=So(!0),Ao=So(!1),Mo={},Co={current:Mo},Oo={current:Mo},Po={current:Mo};function ko(t){if(t===Mo)throw Error(a(174));return t}function Io(t,e){switch(li(Po,e),li(Oo,t),li(Co,Mo),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dt(null,"");break;default:e=Dt(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}ui(Co),li(Co,e)}function Lo(){ui(Co),ui(Oo),ui(Po)}function Ro(t){ko(Po.current);var e=ko(Co.current),n=Dt(e,t.type);e!==n&&(li(Oo,t),li(Co,n))}function Do(t){Oo.current===t&&(ui(Co),ui(Oo))}var No={current:0};function Fo(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===dn||n.data===mn))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function jo(t,e){return{responder:t,props:e}}var Uo=Z.ReactCurrentDispatcher,zo=Z.ReactCurrentBatchConfig,Bo=0,Vo=null,Ho=null,Go=null,Wo=!1;function qo(){throw Error(a(321))}function Xo(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function Yo(t,e,n,r,i,o){if(Bo=o,Vo=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,Uo.current=null===t||null===t.memoizedState?ga:ya,t=n(r,i),e.expirationTime===Bo){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(a(301));o+=1,Go=Ho=null,e.updateQueue=null,Uo.current=ba,t=n(r,i)}while(e.expirationTime===Bo)}if(Uo.current=va,e=null!==Ho&&null!==Ho.next,Bo=0,Go=Ho=Vo=null,Wo=!1,e)throw Error(a(300));return t}function Qo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Go?Vo.memoizedState=Go=t:Go=Go.next=t,Go}function Zo(){if(null===Ho){var t=Vo.alternate;t=null!==t?t.memoizedState:null}else t=Ho.next;var e=null===Go?Vo.memoizedState:Go.next;if(null!==e)Go=e,Ho=t;else{if(null===t)throw Error(a(310));t={memoizedState:(Ho=t).memoizedState,baseState:Ho.baseState,baseQueue:Ho.baseQueue,queue:Ho.queue,next:null},null===Go?Vo.memoizedState=Go=t:Go=Go.next=t}return Go}function Ko(t,e){return"function"==typeof e?e(t):e}function $o(t){var e=Zo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=Ho,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=s=o=null,l=i;do{var c=l.expirationTime;if(c<Bo){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=r):u=u.next=h,c>Vo.expirationTime&&(Vo.expirationTime=c,uu(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),su(c,l.suspenseConfig),r=l.eagerReducer===t?l.eagerState:t(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=s,Fr(r,e.memoizedState)||(Pa=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Jo(t){var e=Zo(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=t(o,s.action),s=s.next}while(s!==i);Fr(o,e.memoizedState)||(Pa=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ta(t){var e=Qo();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Ko,lastRenderedState:t}).dispatch=ma.bind(null,Vo,t),[e.memoizedState,t]}function ea(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=Vo.updateQueue)?(e={lastEffect:null},Vo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function na(){return Zo().memoizedState}function ra(t,e,n,r){var i=Qo();Vo.effectTag|=t,i.memoizedState=ea(1|e,n,void 0,void 0===r?null:r)}function ia(t,e,n,r){var i=Zo();r=void 0===r?null:r;var o=void 0;if(null!==Ho){var a=Ho.memoizedState;if(o=a.destroy,null!==r&&Xo(r,a.deps))return void ea(e,n,o,r)}Vo.effectTag|=t,i.memoizedState=ea(1|e,n,o,r)}function oa(t,e){return ra(516,4,t,e)}function aa(t,e){return ia(516,4,t,e)}function sa(t,e){return ia(4,2,t,e)}function ua(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function la(t,e,n){return n=null!=n?n.concat([t]):null,ia(4,2,ua.bind(null,e,t),n)}function ca(){}function ha(t,e){return Qo().memoizedState=[t,void 0===e?null:e],t}function fa(t,e){var n=Zo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function pa(t,e){var n=Zo();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&Xo(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function da(t,e,n){var r=zi();Vi(98>r?98:r,(function(){t(!0)})),Vi(97<r?97:r,(function(){var r=zo.suspense;zo.suspense=void 0===e?null:e;try{t(!1),n()}finally{zo.suspense=r}}))}function ma(t,e,n){var r=Ys(),i=fo.suspense;i={expirationTime:r=Qs(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===Vo||null!==o&&o===Vo)Wo=!0,i.expirationTime=Bo,Vo.expirationTime=Bo;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,Fr(s,a))return}catch(t){}Zs(t,r)}}var va={readContext:ro,useCallback:qo,useContext:qo,useEffect:qo,useImperativeHandle:qo,useLayoutEffect:qo,useMemo:qo,useReducer:qo,useRef:qo,useState:qo,useDebugValue:qo,useResponder:qo,useDeferredValue:qo,useTransition:qo},ga={readContext:ro,useCallback:ha,useContext:ro,useEffect:oa,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,ra(4,2,ua.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ra(4,2,t,e)},useMemo:function(t,e){var n=Qo();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Qo();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=ma.bind(null,Vo,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},Qo().memoizedState=t},useState:ta,useDebugValue:ca,useResponder:jo,useDeferredValue:function(t,e){var n=ta(t),r=n[0],i=n[1];return oa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=ta(!1),n=e[0];return e=e[1],[ha(da.bind(null,e,t),[e,t]),n]}},ya={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:pa,useReducer:$o,useRef:na,useState:function(){return $o(Ko)},useDebugValue:ca,useResponder:jo,useDeferredValue:function(t,e){var n=$o(Ko),r=n[0],i=n[1];return aa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=$o(Ko),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},ba={readContext:ro,useCallback:fa,useContext:ro,useEffect:aa,useImperativeHandle:la,useLayoutEffect:sa,useMemo:pa,useReducer:Jo,useRef:na,useState:function(){return Jo(Ko)},useDebugValue:ca,useResponder:jo,useDeferredValue:function(t,e){var n=Jo(Ko),r=n[0],i=n[1];return aa((function(){var n=zo.suspense;zo.suspense=void 0===e?null:e;try{i(t)}finally{zo.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Jo(Ko),n=e[0];return e=e[1],[fa(da.bind(null,e,t),[e,t]),n]}},_a=null,xa=null,wa=!1;function Ea(t,e){var n=Au(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function Sa(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ta(t){if(wa){var e=xa;if(e){var n=e;if(!Sa(t,e)){if(!(e=wn(n.nextSibling))||!Sa(t,e))return t.effectTag=-1025&t.effectTag|2,wa=!1,void(_a=t);Ea(_a,n)}_a=t,xa=wn(e.firstChild)}else t.effectTag=-1025&t.effectTag|2,wa=!1,_a=t}}function Aa(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;_a=t}function Ma(t){if(t!==_a)return!1;if(!wa)return Aa(t),wa=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!bn(e,t.memoizedProps))for(e=xa;e;)Ea(t,e),e=wn(e.nextSibling);if(Aa(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){xa=wn(t.nextSibling);break t}e--}else"$"!==n&&n!==mn&&n!==dn||e++}t=t.nextSibling}xa=null}}else xa=_a?wn(t.stateNode.nextSibling):null;return!0}function Ca(){xa=_a=null,wa=!1}var Oa=Z.ReactCurrentOwner,Pa=!1;function ka(t,e,n,r){e.child=null===t?Ao(e,null,n,r):To(e,t.child,n,r)}function Ia(t,e,n,r,i){n=n.render;var o=e.ref;return no(e,i),r=Yo(t,e,n,r,o,i),null===t||Pa?(e.effectTag|=1,ka(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ya(t,e,i))}function La(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||Mu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Ou(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ra(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:Ur)(i,r)&&t.ref===e.ref)?Ya(t,e,o):(e.effectTag|=1,(t=Cu(a,r)).ref=e.ref,t.return=e,e.child=t)}function Ra(t,e,n,r,i,o){return null!==t&&Ur(t.memoizedProps,r)&&t.ref===e.ref&&(Pa=!1,i<o)?(e.expirationTime=t.expirationTime,Ya(t,e,o)):Na(t,e,n,r,o)}function Da(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function Na(t,e,n,r,i){var o=mi(n)?pi:hi.current;return o=di(e,o),no(e,i),n=Yo(t,e,n,r,o,i),null===t||Pa?(e.effectTag|=1,ka(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Ya(t,e,i))}function Fa(t,e,n,r,i){if(mi(n)){var o=!0;bi(e)}else o=!1;if(no(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),yo(e,n,r),_o(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;l="object"==typeof l&&null!==l?ro(l):di(e,l=mi(n)?pi:hi.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&bo(e,a,r,l),io=!1;var f=e.memoizedState;a.state=f,co(e,r,a,i),u=e.memoizedState,s!==r||f!==u||fi.current||io?("function"==typeof c&&(mo(e,n,c,r),u=e.memoizedState),(s=io||go(e,n,s,r,f,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,ao(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:Yi(e.type,s),u=a.context,l="object"==typeof(l=n.contextType)&&null!==l?ro(l):di(e,l=mi(n)?pi:hi.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&bo(e,a,r,l),io=!1,u=e.memoizedState,a.state=u,co(e,r,a,i),f=e.memoizedState,s!==r||u!==f||fi.current||io?("function"==typeof c&&(mo(e,n,c,r),f=e.memoizedState),(c=io||go(e,n,s,r,u,f,l))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return ja(t,e,n,r,o,i)}function ja(t,e,n,r,i,o){Da(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&_i(e,n,!1),Ya(t,e,o);r=e.stateNode,Oa.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=To(e,t.child,null,o),e.child=To(e,null,s,o)):ka(t,e,s,o),e.memoizedState=r.state,i&&_i(e,n,!0),e.child}function Ua(t){var e=t.stateNode;e.pendingContext?gi(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gi(0,e.context,!1),Io(t,e.containerInfo)}var za,Ba,Va,Ha={dehydrated:null,retryTime:0};function Ga(t,e,n){var r,i=e.mode,o=e.pendingProps,a=No.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),li(No,1&a),null===t){if(void 0!==o.fallback&&Ta(e),s){if(s=o.fallback,(o=Pu(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Pu(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=Ha,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Ao(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=Cu(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=Cu(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=Ha,e.child=n,i}return n=To(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=Pu(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=Pu(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=Ha,e.child=o,n}return e.memoizedState=null,e.child=To(e,t,o.children,n)}function Wa(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),eo(t.return,e)}function qa(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function Xa(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(ka(t,e,r.children,n),0!=(2&(r=No.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Wa(t,n);else if(19===t.tag)Wa(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(li(No,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===Fo(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),qa(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===Fo(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}qa(e,!0,n,null,o,e.lastEffect);break;case"together":qa(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Ya(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&uu(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Cu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Cu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Qa(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Za(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return mi(e.type)&&vi(),null;case 3:return Lo(),ui(fi),ui(hi),(n=e.stateNode).pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==t&&null!==t.child||!Ma(e)||(e.effectTag|=4),null;case 5:Do(e),n=ko(Po.current);var o=e.type;if(null!==t&&null!=e.stateNode)Ba(t,e,o,r,n),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(a(166));return null}if(t=ko(Co.current),Ma(e)){r=e.stateNode,o=e.type;var s=e.memoizedProps;switch(r[Tn]=e,r[An]=s,o){case"iframe":case"object":case"embed":We("load",r);break;case"video":case"audio":for(t=0;t<Qt.length;t++)We(Qt[t],r);break;case"source":We("error",r);break;case"img":case"image":case"link":We("error",r),We("load",r);break;case"form":We("reset",r),We("submit",r);break;case"details":We("toggle",r);break;case"input":Et(r,s),We("invalid",r),an(n,"onChange");break;case"select":r._wrapperState={wasMultiple:!!s.multiple},We("invalid",r),an(n,"onChange");break;case"textarea":kt(r,s),We("invalid",r),an(n,"onChange")}for(var u in nn(o,s),t=null,s)if(s.hasOwnProperty(u)){var l=s[u];"children"===u?"string"==typeof l?r.textContent!==l&&(t=["children",l]):"number"==typeof l&&r.textContent!==""+l&&(t=["children",""+l]):S.hasOwnProperty(u)&&null!=l&&an(n,u)}switch(o){case"input":_t(r),At(r,s,!0);break;case"textarea":_t(r),Lt(r);break;case"select":case"option":break;default:"function"==typeof s.onClick&&(r.onclick=sn)}n=t,e.updateQueue=n,null!==n&&(e.effectTag|=4)}else{switch(u=9===n.nodeType?n:n.ownerDocument,t===on&&(t=Rt(o)),t===on?"script"===o?((t=u.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"==typeof r.is?t=u.createElement(o,{is:r.is}):(t=u.createElement(o),"select"===o&&(u=t,r.multiple?u.multiple=!0:r.size&&(u.size=r.size))):t=u.createElementNS(t,o),t[Tn]=e,t[An]=r,za(t,e),e.stateNode=t,u=rn(o,r),o){case"iframe":case"object":case"embed":We("load",t),l=r;break;case"video":case"audio":for(l=0;l<Qt.length;l++)We(Qt[l],t);l=r;break;case"source":We("error",t),l=r;break;case"img":case"image":case"link":We("error",t),We("load",t),l=r;break;case"form":We("reset",t),We("submit",t),l=r;break;case"details":We("toggle",t),l=r;break;case"input":Et(t,r),l=wt(t,r),We("invalid",t),an(n,"onChange");break;case"option":l=Ct(t,r);break;case"select":t._wrapperState={wasMultiple:!!r.multiple},l=i({},r,{value:void 0}),We("invalid",t),an(n,"onChange");break;case"textarea":kt(t,r),l=Pt(t,r),We("invalid",t),an(n,"onChange");break;default:l=r}nn(o,l);var c=l;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?tn(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&jt(t,h):"children"===s?"string"==typeof h?("textarea"!==o||""!==h)&&Ut(t,h):"number"==typeof h&&Ut(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?null!=h&&an(n,s):null!=h&&K(t,s,h,u))}switch(o){case"input":_t(t),At(t,r,!1);break;case"textarea":_t(t),Lt(t);break;case"option":null!=r.value&&t.setAttribute("value",""+yt(r.value));break;case"select":t.multiple=!!r.multiple,null!=(n=r.value)?Ot(t,!!r.multiple,n,!1):null!=r.defaultValue&&Ot(t,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof l.onClick&&(t.onclick=sn)}yn(o,r)&&(e.effectTag|=4)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)Va(0,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(a(166));n=ko(Po.current),ko(Co.current),Ma(e)?(n=e.stateNode,r=e.memoizedProps,n[Tn]=e,n.nodeValue!==r&&(e.effectTag|=4)):((n=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[Tn]=e,e.stateNode=n)}return null;case 13:return ui(No),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(n=null!==r,r=!1,null===t?void 0!==e.memoizedProps.fallback&&Ma(e):(r=null!==(o=t.memoizedState),n||null===o||null!==(o=t.child.sibling)&&(null!==(s=e.firstEffect)?(e.firstEffect=o,o.nextEffect=s):(e.firstEffect=e.lastEffect=o,o.nextEffect=null),o.effectTag=8)),n&&!r&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&No.current)?Os===ws&&(Os=Es):(Os!==ws&&Os!==Es||(Os=Ss),0!==Rs&&null!==As&&(Du(As,Cs),Nu(As,Rs)))),(n||r)&&(e.effectTag|=4),null);case 4:return Lo(),null;case 10:return to(e),null;case 17:return mi(e.type)&&vi(),null;case 19:if(ui(No),null===(r=e.memoizedState))return null;if(o=0!=(64&e.effectTag),null===(s=r.rendering)){if(o)Qa(r,!1);else if(Os!==ws||null!==t&&0!=(64&t.effectTag))for(s=e.child;null!==s;){if(null!==(t=Fo(s))){for(e.effectTag|=64,Qa(r,!1),null!==(o=t.updateQueue)&&(e.updateQueue=o,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,r=e.child;null!==r;)s=n,(o=r).effectTag&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(t=o.alternate)?(o.childExpirationTime=0,o.expirationTime=s,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null):(o.childExpirationTime=t.childExpirationTime,o.expirationTime=t.expirationTime,o.child=t.child,o.memoizedProps=t.memoizedProps,o.memoizedState=t.memoizedState,o.updateQueue=t.updateQueue,s=t.dependencies,o.dependencies=null===s?null:{expirationTime:s.expirationTime,firstContext:s.firstContext,responders:s.responders}),r=r.sibling;return li(No,1&No.current|2),e.child}s=s.sibling}}else{if(!o)if(null!==(t=Fo(s))){if(e.effectTag|=64,o=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.effectTag|=4),Qa(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,o=!0,Qa(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(s.sibling=e.child,e.child=s):(null!==(n=r.last)?n.sibling=s:e.child=s,r.last=s)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=Ui()+500),n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,e=No.current,li(No,o?1&e|2:1&e),n):null}throw Error(a(156,e.tag))}function Ka(t){switch(t.tag){case 1:mi(t.type)&&vi();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(Lo(),ui(fi),ui(hi),0!=(64&(e=t.effectTag)))throw Error(a(285));return t.effectTag=-4097&e|64,t;case 5:return Do(t),null;case 13:return ui(No),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return ui(No),null;case 4:return Lo(),null;case 10:return to(t),null;default:return null}}function $a(t,e){return{value:t,source:e,stack:gt(e)}}za=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ba=function(t,e,n,r,o){var a=t.memoizedProps;if(a!==r){var s,u,l=e.stateNode;switch(ko(Co.current),t=null,n){case"input":a=wt(l,a),r=wt(l,r),t=[];break;case"option":a=Ct(l,a),r=Ct(l,r),t=[];break;case"select":a=i({},a,{value:void 0}),r=i({},r,{value:void 0}),t=[];break;case"textarea":a=Pt(l,a),r=Pt(l,r),t=[];break;default:"function"!=typeof a.onClick&&"function"==typeof r.onClick&&(l.onclick=sn)}for(s in nn(n,r),n=null,a)if(!r.hasOwnProperty(s)&&a.hasOwnProperty(s)&&null!=a[s])if("style"===s)for(u in l=a[s])l.hasOwnProperty(u)&&(n||(n={}),n[u]="");else"dangerouslySetInnerHTML"!==s&&"children"!==s&&"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(S.hasOwnProperty(s)?t||(t=[]):(t=t||[]).push(s,null));for(s in r){var c=r[s];if(l=null!=a?a[s]:void 0,r.hasOwnProperty(s)&&c!==l&&(null!=c||null!=l))if("style"===s)if(l){for(u in l)!l.hasOwnProperty(u)||c&&c.hasOwnProperty(u)||(n||(n={}),n[u]="");for(u in c)c.hasOwnProperty(u)&&l[u]!==c[u]&&(n||(n={}),n[u]=c[u])}else n||(t||(t=[]),t.push(s,n)),n=c;else"dangerouslySetInnerHTML"===s?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(t=t||[]).push(s,c)):"children"===s?l===c||"string"!=typeof c&&"number"!=typeof c||(t=t||[]).push(s,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&(S.hasOwnProperty(s)?(null!=c&&an(o,s),t||l===c||(t=[])):(t=t||[]).push(s,c))}n&&(t=t||[]).push("style",n),o=t,(e.updateQueue=o)&&(e.effectTag|=4)}},Va=function(t,e,n,r){n!==r&&(e.effectTag|=4)};var Ja="function"==typeof WeakSet?WeakSet:Set;function ts(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=gt(n)),null!==n&&vt(n.type),e=e.value,null!==t&&1===t.tag&&vt(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function es(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){_u(t,e)}else e.current=null}function ns(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yi(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(a(163))}function rs(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function is(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function os(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void is(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:Yi(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&yn(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Re(n)))));case 19:case 17:case 20:case 21:return}throw Error(a(163))}function as(t,e,n){switch("function"==typeof Su&&Su(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;Vi(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){_u(i,t)}}t=t.next}while(t!==r)}))}break;case 1:es(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){_u(t,e)}}(e,n);break;case 5:es(e);break;case 4:fs(t,e,n)}}function ss(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&ss(e)}function us(t){return 5===t.tag||3===t.tag||4===t.tag}function ls(t){t:{for(var e=t.return;null!==e;){if(us(e)){var n=e;break t}e=e.return}throw Error(a(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(a(161))}16&n.effectTag&&(Ut(e,""),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||us(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?cs(t,n,e):hs(t,n,e)}function cs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!=(n=n._reactRootContainer)||null!==e.onclick||(e.onclick=sn));else if(4!==r&&null!==(t=t.child))for(cs(t,e,n),t=t.sibling;null!==t;)cs(t,e,n),t=t.sibling}function hs(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==r&&null!==(t=t.child))for(hs(t,e,n),t=t.sibling;null!==t;)hs(t,e,n),t=t.sibling}function fs(t,e,n){for(var r,i,o=e,s=!1;;){if(!s){s=o.return;t:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}s=s.return}s=!0}if(5===o.tag||6===o.tag){t:for(var u=t,l=o,c=n,h=l;;)if(as(u,h,c),null!==h.child&&4!==h.tag)h.child.return=h,h=h.child;else{if(h===l)break t;for(;null===h.sibling;){if(null===h.return||h.return===l)break t;h=h.return}h.sibling.return=h.return,h=h.sibling}i?(u=r,l=o.stateNode,8===u.nodeType?u.parentNode.removeChild(l):u.removeChild(l)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(as(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function ps(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void rs(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps,i=null!==t?t.memoizedProps:r;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[An]=r,"input"===t&&"radio"===r.type&&null!=r.name&&St(n,r),rn(t,i),e=rn(t,r),i=0;i<o.length;i+=2){var s=o[i],u=o[i+1];"style"===s?tn(n,u):"dangerouslySetInnerHTML"===s?jt(n,u):"children"===s?Ut(n,u):K(n,s,u,e)}switch(t){case"input":Tt(n,r);break;case"textarea":It(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(t=r.value)?Ot(n,!!r.multiple,t,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ot(n,!!r.multiple,r.defaultValue,!0):Ot(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((e=e.stateNode).hydrate&&(e.hydrate=!1,Re(e.containerInfo)));case 12:return;case 13:if(n=e,null===e.memoizedState?r=!1:(r=!0,n=e.child,Ns=Ui()),null!==n)t:for(t=n;;){if(5===t.tag)o=t.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=t.stateNode,i=null!=(i=t.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=Je("display",i));else if(6===t.tag)t.stateNode.nodeValue=r?"":t.memoizedProps;else{if(13===t.tag&&null!==t.memoizedState&&null===t.memoizedState.dehydrated){(o=t.child.sibling).return=t,t=o;continue}if(null!==t.child){t.child.return=t,t=t.child;continue}}if(t===n)break;for(;null===t.sibling;){if(null===t.return||t.return===n)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}return void ds(e);case 19:return void ds(e);case 17:return}throw Error(a(163))}function ds(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Ja),e.forEach((function(e){var r=wu.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var ms="function"==typeof WeakMap?WeakMap:Map;function vs(t,e,n){(n=so(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){js||(js=!0,Us=r),ts(t,e)},n}function gs(t,e,n){(n=so(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return ts(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===zs?zs=new Set([this]):zs.add(this),ts(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var ys,bs=Math.ceil,_s=Z.ReactCurrentDispatcher,xs=Z.ReactCurrentOwner,ws=0,Es=3,Ss=4,Ts=0,As=null,Ms=null,Cs=0,Os=ws,Ps=null,ks=1073741823,Is=1073741823,Ls=null,Rs=0,Ds=!1,Ns=0,Fs=null,js=!1,Us=null,zs=null,Bs=!1,Vs=null,Hs=90,Gs=null,Ws=0,qs=null,Xs=0;function Ys(){return 0!=(48&Ts)?1073741821-(Ui()/10|0):0!==Xs?Xs:Xs=1073741821-(Ui()/10|0)}function Qs(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=zi();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&Ts))return Cs;if(null!==n)t=Xi(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=Xi(t,150,100);break;case 97:case 96:t=Xi(t,5e3,250);break;case 95:t=2;break;default:throw Error(a(326))}return null!==As&&t===Cs&&--t,t}function Zs(t,e){if(50<Ws)throw Ws=0,qs=null,Error(a(185));if(null!==(t=Ks(t,e))){var n=zi();1073741823===e?0!=(8&Ts)&&0==(48&Ts)?eu(t):(Js(t),0===Ts&&Wi()):Js(t),0==(4&Ts)||98!==n&&99!==n||(null===Gs?Gs=new Map([[t,e]]):(void 0===(n=Gs.get(t))||n>e)&&Gs.set(t,e))}}function Ks(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(As===i&&(uu(e),Os===Ss&&Du(i,Cs)),Nu(i,e)),i}function $s(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!Ru(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Js(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=Gi(eu.bind(null,t));else{var e=$s(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Ys();if(r=1073741823===e?99:1===e||2===e?95:0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==Ii&&Ei(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?Gi(eu.bind(null,t)):Hi(r,tu.bind(null,t),{timeout:10*(1073741821-e)-Ui()}),t.callbackNode=e}}}function tu(t,e){if(Xs=0,e)return Fu(t,e=Ys()),Js(t),null;var n=$s(t);if(0!==n){if(e=t.callbackNode,0!=(48&Ts))throw Error(a(327));if(gu(),t===As&&n===Cs||iu(t,n),null!==Ms){var r=Ts;Ts|=16;for(var i=au();;)try{cu();break}catch(e){ou(t,e)}if(Ji(),Ts=r,_s.current=i,1===Os)throw e=Ps,iu(t,n),Du(t,n),Js(t),e;if(null===Ms)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=Os,As=null,r){case ws:case 1:throw Error(a(345));case 2:Fu(t,2<n?2:n);break;case Es:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=pu(i)),1073741823===ks&&10<(i=Ns+500-Ui())){if(Ds){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,iu(t,n);break}}if(0!==(o=$s(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=_n(du.bind(null,t),i);break}du(t);break;case Ss:if(Du(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=pu(i)),Ds&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,iu(t,n);break}if(0!==(i=$s(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==Is?r=10*(1073741821-Is)-Ui():1073741823===ks?r=0:(r=10*(1073741821-ks)-5e3,0>(r=(i=Ui())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*bs(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=_n(du.bind(null,t),r);break}du(t);break;case 5:if(1073741823!==ks&&null!==Ls){o=ks;var s=Ls;if(0>=(r=0|s.busyMinDurationMs)?r=0:(i=0|s.busyDelayMs,r=(o=Ui()-(10*(1073741821-o)-(0|s.timeoutMs||5e3)))<=i?0:i+r-o),10<r){Du(t,n),t.timeoutHandle=_n(du.bind(null,t),r);break}}du(t);break;default:throw Error(a(329))}if(Js(t),t.callbackNode===e)return tu.bind(null,t)}}return null}function eu(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&Ts))throw Error(a(327));if(gu(),t===As&&e===Cs||iu(t,e),null!==Ms){var n=Ts;Ts|=16;for(var r=au();;)try{lu();break}catch(e){ou(t,e)}if(Ji(),Ts=n,_s.current=r,1===Os)throw n=Ps,iu(t,e),Du(t,e),Js(t),n;if(null!==Ms)throw Error(a(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,As=null,du(t),Js(t)}return null}function nu(t,e){var n=Ts;Ts|=1;try{return t(e)}finally{0===(Ts=n)&&Wi()}}function ru(t,e){var n=Ts;Ts&=-2,Ts|=8;try{return t(e)}finally{0===(Ts=n)&&Wi()}}function iu(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,xn(n)),null!==Ms)for(n=Ms.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&vi();break;case 3:Lo(),ui(fi),ui(hi);break;case 5:Do(r);break;case 4:Lo();break;case 13:case 19:ui(No);break;case 10:to(r)}n=n.return}As=t,Ms=Cu(t.current,null),Cs=e,Os=ws,Ps=null,Is=ks=1073741823,Ls=null,Rs=0,Ds=!1}function ou(t,e){for(;;){try{if(Ji(),Uo.current=va,Wo)for(var n=Vo.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(Bo=0,Go=Ho=Vo=null,Wo=!1,null===Ms||null===Ms.return)return Os=1,Ps=e,Ms=null;t:{var i=t,o=Ms.return,a=Ms,s=e;if(e=Cs,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&No.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(f){var m=h.updateQueue;if(null===m){var v=new Set;v.add(u),h.updateQueue=v}else m.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=so(1073741823,null);g.tag=2,uo(a,g)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new ms,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var b=xu.bind(null,i,u,a);u.then(b,b)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((vt(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+gt(a))}5!==Os&&(Os=2),s=$a(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,lo(h,vs(h,u,e));break t;case 1:u=s;var _=h.type,x=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===zs||!zs.has(x)))){h.effectTag|=4096,h.expirationTime=e,lo(h,gs(h,u,e));break t}}h=h.return}while(null!==h)}Ms=fu(Ms)}catch(t){e=t;continue}break}}function au(){var t=_s.current;return _s.current=va,null===t?va:t}function su(t,e){t<ks&&2<t&&(ks=t),null!==e&&t<Is&&2<t&&(Is=t,Ls=e)}function uu(t){t>Rs&&(Rs=t)}function lu(){for(;null!==Ms;)Ms=hu(Ms)}function cu(){for(;null!==Ms&&!Li();)Ms=hu(Ms)}function hu(t){var e=ys(t.alternate,t,Cs);return t.memoizedProps=t.pendingProps,null===e&&(e=fu(t)),xs.current=null,e}function fu(t){Ms=t;do{var e=Ms.alternate;if(t=Ms.return,0==(2048&Ms.effectTag)){if(e=Za(e,Ms,Cs),1===Cs||1!==Ms.childExpirationTime){for(var n=0,r=Ms.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}Ms.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=Ms.firstEffect),null!==Ms.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=Ms.firstEffect),t.lastEffect=Ms.lastEffect),1<Ms.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=Ms:t.firstEffect=Ms,t.lastEffect=Ms))}else{if(null!==(e=Ka(Ms)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=Ms.sibling))return e;Ms=t}while(null!==Ms);return Os===ws&&(Os=5),null}function pu(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function du(t){var e=zi();return Vi(99,mu.bind(null,t,e)),null}function mu(t,e){do{gu()}while(null!==Vs);if(0!=(48&Ts))throw Error(a(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(a(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=pu(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===As&&(Ms=As=null,Cs=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=Ts;Ts|=32,xs.current=null,vn=Ge;var s=fn();if(pn(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else t:{var l=(u=(u=s.ownerDocument)&&u.defaultView||window).getSelection&&u.getSelection();if(l&&0!==l.rangeCount){u=l.anchorNode;var c=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{u.nodeType,h.nodeType}catch(t){u=null;break t}var f=0,p=-1,d=-1,m=0,v=0,g=s,y=null;e:for(;;){for(var b;g!==u||0!==c&&3!==g.nodeType||(p=f+c),g!==h||0!==l&&3!==g.nodeType||(d=f+l),3===g.nodeType&&(f+=g.nodeValue.length),null!==(b=g.firstChild);)y=g,g=b;for(;;){if(g===s)break e;if(y===u&&++m===c&&(p=f),y===h&&++v===l&&(d=f),null!==(b=g.nextSibling))break;y=(g=y).parentNode}g=b}u=-1===p||-1===d?null:{start:p,end:d}}else u=null}u=u||{start:0,end:0}}else u=null;gn={activeElementDetached:null,focusedElem:s,selectionRange:u},Ge=!1,Fs=i;do{try{vu()}catch(t){if(null===Fs)throw Error(a(330));_u(Fs,t),Fs=Fs.nextEffect}}while(null!==Fs);Fs=i;do{try{for(s=t,u=e;null!==Fs;){var _=Fs.effectTag;if(16&_&&Ut(Fs.stateNode,""),128&_){var x=Fs.alternate;if(null!==x){var w=x.ref;null!==w&&("function"==typeof w?w(null):w.current=null)}}switch(1038&_){case 2:ls(Fs),Fs.effectTag&=-3;break;case 6:ls(Fs),Fs.effectTag&=-3,ps(Fs.alternate,Fs);break;case 1024:Fs.effectTag&=-1025;break;case 1028:Fs.effectTag&=-1025,ps(Fs.alternate,Fs);break;case 4:ps(Fs.alternate,Fs);break;case 8:fs(s,c=Fs,u),ss(c)}Fs=Fs.nextEffect}}catch(t){if(null===Fs)throw Error(a(330));_u(Fs,t),Fs=Fs.nextEffect}}while(null!==Fs);if(w=gn,x=fn(),_=w.focusedElem,u=w.selectionRange,x!==_&&_&&_.ownerDocument&&hn(_.ownerDocument.documentElement,_)){null!==u&&pn(_)&&(x=u.start,void 0===(w=u.end)&&(w=x),"selectionStart"in _?(_.selectionStart=x,_.selectionEnd=Math.min(w,_.value.length)):(w=(x=_.ownerDocument||document)&&x.defaultView||window).getSelection&&(w=w.getSelection(),c=_.textContent.length,s=Math.min(u.start,c),u=void 0===u.end?s:Math.min(u.end,c),!w.extend&&s>u&&(c=u,u=s,s=c),c=cn(_,s),h=cn(_,u),c&&h&&(1!==w.rangeCount||w.anchorNode!==c.node||w.anchorOffset!==c.offset||w.focusNode!==h.node||w.focusOffset!==h.offset)&&((x=x.createRange()).setStart(c.node,c.offset),w.removeAllRanges(),s>u?(w.addRange(x),w.extend(h.node,h.offset)):(x.setEnd(h.node,h.offset),w.addRange(x))))),x=[];for(w=_;w=w.parentNode;)1===w.nodeType&&x.push({element:w,left:w.scrollLeft,top:w.scrollTop});for("function"==typeof _.focus&&_.focus(),_=0;_<x.length;_++)(w=x[_]).element.scrollLeft=w.left,w.element.scrollTop=w.top}Ge=!!vn,gn=vn=null,t.current=n,Fs=i;do{try{for(_=t;null!==Fs;){var E=Fs.effectTag;if(36&E&&os(_,Fs.alternate,Fs),128&E){x=void 0;var S=Fs.ref;if(null!==S){var T=Fs.stateNode;switch(Fs.tag){case 5:x=T;break;default:x=T}"function"==typeof S?S(x):S.current=x}}Fs=Fs.nextEffect}}catch(t){if(null===Fs)throw Error(a(330));_u(Fs,t),Fs=Fs.nextEffect}}while(null!==Fs);Fs=null,Ri(),Ts=o}else t.current=n;if(Bs)Bs=!1,Vs=t,Hs=e;else for(Fs=i;null!==Fs;)e=Fs.nextEffect,Fs.nextEffect=null,Fs=e;if(0===(e=t.firstPendingTime)&&(zs=null),1073741823===e?t===qs?Ws++:(Ws=0,qs=t):Ws=0,"function"==typeof Eu&&Eu(n.stateNode,r),Js(t),js)throw js=!1,t=Us,Us=null,t;return 0!=(8&Ts)||Wi(),null}function vu(){for(;null!==Fs;){var t=Fs.effectTag;0!=(256&t)&&ns(Fs.alternate,Fs),0==(512&t)||Bs||(Bs=!0,Hi(97,(function(){return gu(),null}))),Fs=Fs.nextEffect}}function gu(){if(90!==Hs){var t=97<Hs?97:Hs;return Hs=90,Vi(t,yu)}}function yu(){if(null===Vs)return!1;var t=Vs;if(Vs=null,0!=(48&Ts))throw Error(a(331));var e=Ts;for(Ts|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:rs(5,n),is(5,n)}}catch(e){if(null===t)throw Error(a(330));_u(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ts=e,Wi(),!0}function bu(t,e,n){uo(t,e=vs(t,e=$a(n,e),1073741823)),null!==(t=Ks(t,1073741823))&&Js(t)}function _u(t,e){if(3===t.tag)bu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){bu(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===zs||!zs.has(r))){uo(n,t=gs(n,t=$a(e,t),1073741823)),null!==(n=Ks(n,1073741823))&&Js(n);break}}n=n.return}}function xu(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),As===t&&Cs===n?Os===Ss||Os===Es&&1073741823===ks&&Ui()-Ns<500?iu(t,Cs):Ds=!0:Ru(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Js(t)))}function wu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(e=Qs(e=Ys(),t,null)),null!==(t=Ks(t,e))&&Js(t)}ys=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||fi.current)Pa=!0;else{if(r<n){switch(Pa=!1,e.tag){case 3:Ua(e),Ca();break;case 5:if(Ro(e),4&e.mode&&1!==n&&i.hidden)return e.expirationTime=e.childExpirationTime=1,null;break;case 1:mi(e.type)&&bi(e);break;case 4:Io(e,e.stateNode.containerInfo);break;case 10:r=e.memoizedProps.value,i=e.type._context,li(Qi,i._currentValue),i._currentValue=r;break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?Ga(t,e,n):(li(No,1&No.current),null!==(e=Ya(t,e,n))?e.sibling:null);li(No,1&No.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return Xa(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),li(No,No.current),!r)return null}return Ya(t,e,n)}Pa=!1}}else Pa=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=di(e,hi.current),no(e,n),i=Yo(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,mi(r)){var o=!0;bi(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,oo(e);var s=r.getDerivedStateFromProps;"function"==typeof s&&mo(e,r,s,t),i.updater=vo,e.stateNode=i,i._reactInternalFiber=e,_o(e,r,t,n),e=ja(null,e,r,!0,o,n)}else e.tag=0,ka(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return Mu(t)?1:0;if(null!=t){if((t=t.$$typeof)===ut)return 11;if(t===ht)return 14}return 2}(i),t=Yi(i,t),o){case 0:e=Na(null,e,i,t,n);break t;case 1:e=Fa(null,e,i,t,n);break t;case 11:e=Ia(null,e,i,t,n);break t;case 14:e=La(null,e,i,Yi(i.type,t),r,n);break t}throw Error(a(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,Na(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 1:return r=e.type,i=e.pendingProps,Fa(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 3:if(Ua(e),r=e.updateQueue,null===t||null===r)throw Error(a(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,ao(t,e),co(e,r,null,n),(r=e.memoizedState.element)===i)Ca(),e=Ya(t,e,n);else{if((i=e.stateNode.hydrate)&&(xa=wn(e.stateNode.containerInfo.firstChild),_a=e,i=wa=!0),i)for(n=Ao(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else ka(t,e,r,n),Ca();e=e.child}return e;case 5:return Ro(e),null===t&&Ta(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,s=i.children,bn(r,i)?s=null:null!==o&&bn(r,o)&&(e.effectTag|=16),Da(t,e),4&e.mode&&1!==n&&i.hidden?(e.expirationTime=e.childExpirationTime=1,e=null):(ka(t,e,s,n),e=e.child),e;case 6:return null===t&&Ta(e),null;case 13:return Ga(t,e,n);case 4:return Io(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=To(e,null,r,n):ka(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,Ia(t,e,r,i=e.elementType===r?i:Yi(r,i),n);case 7:return ka(t,e,e.pendingProps,n),e.child;case 8:case 12:return ka(t,e,e.pendingProps.children,n),e.child;case 10:t:{r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value;var u=e.type._context;if(li(Qi,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0==(o=Fr(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(s.children===i.children&&!fi.current){e=Ya(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===u.tag&&((c=so(n,null)).tag=2,uo(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),eo(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}ka(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,no(e,n),r=r(i=ro(i,o.unstable_observedBits)),e.effectTag|=1,ka(t,e,r,n),e.child;case 14:return o=Yi(i=e.type,e.pendingProps),La(t,e,i,o=Yi(i.type,o),r,n);case 15:return Ra(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Yi(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,mi(r)?(t=!0,bi(e)):t=!1,no(e,n),yo(e,r,i),_o(e,r,i,n),ja(null,e,r,!0,t,n);case 19:return Xa(t,e,n)}throw Error(a(156,e.tag))};var Eu=null,Su=null;function Tu(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Au(t,e,n,r){return new Tu(t,e,n,r)}function Mu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Cu(t,e){var n=t.alternate;return null===n?((n=Au(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ou(t,e,n,r,i,o){var s=2;if(r=t,"function"==typeof t)Mu(t)&&(s=1);else if("string"==typeof t)s=5;else t:switch(t){case nt:return Pu(n.children,i,o,e);case st:s=8,i|=7;break;case rt:s=8,i|=1;break;case it:return(t=Au(12,n,e,8|i)).elementType=it,t.type=it,t.expirationTime=o,t;case lt:return(t=Au(13,n,e,i)).type=lt,t.elementType=lt,t.expirationTime=o,t;case ct:return(t=Au(19,n,e,i)).elementType=ct,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case ot:s=10;break t;case at:s=9;break t;case ut:s=11;break t;case ht:s=14;break t;case ft:s=16,r=null;break t;case pt:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=Au(s,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function Pu(t,e,n,r){return(t=Au(7,t,r,e)).expirationTime=n,t}function ku(t,e,n){return(t=Au(6,t,null,e)).expirationTime=n,t}function Iu(t,e,n){return(e=Au(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Lu(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Ru(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function Du(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function Nu(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function Fu(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}function ju(t,e,n,r){var i=e.current,o=Ys(),s=fo.suspense;o=Qs(o,i,s);t:if(n){e:{if($t(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(mi(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(mi(l)){n=yi(n,l,u);break t}}n=u}else n=ci;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),uo(i,e),Zs(i,o),o}function Uu(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function zu(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function Bu(t,e){zu(t,e),(t=t.alternate)&&zu(t,e)}function Vu(t,e,n){var r=new Lu(t,e,n=null!=n&&!0===n.hydrate),i=Au(3,null,null,2===e?7:1===e?3:0);r.current=i,i.stateNode=r,oo(i),t[Mn]=r.current,n&&0!==e&&function(t,e){var n=Kt(e);Se.forEach((function(t){fe(t,e,n)})),Te.forEach((function(t){fe(t,e,n)}))}(0,9===t.nodeType?t:t.ownerDocument),this._internalRoot=r}function Hu(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function Gu(t,e,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var t=Uu(a);s.call(t)}}ju(e,a,t,i)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new Vu(t,0,e?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var t=Uu(a);u.call(t)}}ru((function(){ju(e,a,t,i)}))}return Uu(a)}Vu.prototype.render=function(t){ju(t,this._internalRoot,null,null)},Vu.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;ju(null,t,null,(function(){e[Mn]=null}))},pe=function(t){if(13===t.tag){var e=Xi(Ys(),150,100);Zs(t,e),Bu(t,e)}},de=function(t){13===t.tag&&(Zs(t,3),Bu(t,3))},me=function(t){if(13===t.tag){var e=Ys();Zs(t,e=Qs(e,t,null)),Bu(t,e)}},C=function(t,e,n){switch(e){case"input":if(Tt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=kn(r);if(!i)throw Error(a(90));xt(r),Tt(r,i)}}}break;case"textarea":It(t,n);break;case"select":null!=(e=n.value)&&Ot(t,!!n.multiple,e,!1)}},R=nu,D=function(t,e,n,r,i){var o=Ts;Ts|=4;try{return Vi(98,t.bind(null,e,n,r,i))}finally{0===(Ts=o)&&Wi()}},N=function(){0==(49&Ts)&&(function(){if(null!==Gs){var t=Gs;Gs=null,t.forEach((function(t,e){Fu(e,t),Js(e)})),Wi()}}(),gu())},F=function(t,e){var n=Ts;Ts|=2;try{return t(e)}finally{0===(Ts=n)&&Wi()}};!function(t){var e=t.findFiberByHostInstance;!function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);Eu=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},Su=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}}(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Z.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=function(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=$t(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return te(i),t;if(o===r)return te(i),e;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))}({findFiberByHostInstance:Cn,bundleType:0,version:"16.14.0",rendererPackageName:"react-dom"}),e.render=function(t,e,n){if(!Hu(e))throw Error(a(200));return Gu(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!Hu(t))throw Error(a(40));return!!t._reactRootContainer&&(ru((function(){Gu(null,null,t,!1,(function(){t._reactRootContainer=null,t[Mn]=null}))})),!0)},e.unstable_batchedUpdates=nu},1542:(t,e,n)=>{"use strict";!function t(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(t){console.error(t)}}(),t.exports=n(3577)},8702:(t,e)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,l=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,f=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,v=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case c:case h:case o:case s:case a:case p:return t;default:switch(t=t&&t.$$typeof){case l:case f:case v:case m:case u:return t;default:return e}}case i:return e}}}function w(t){return x(t)===h}e.AsyncMode=c,e.ConcurrentMode=h,e.ContextConsumer=l,e.ContextProvider=u,e.Element=r,e.ForwardRef=f,e.Fragment=o,e.Lazy=v,e.Memo=m,e.Portal=i,e.Profiler=s,e.StrictMode=a,e.Suspense=p,e.isAsyncMode=function(t){return w(t)||x(t)===c},e.isConcurrentMode=w,e.isContextConsumer=function(t){return x(t)===l},e.isContextProvider=function(t){return x(t)===u},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return x(t)===f},e.isFragment=function(t){return x(t)===o},e.isLazy=function(t){return x(t)===v},e.isMemo=function(t){return x(t)===m},e.isPortal=function(t){return x(t)===i},e.isProfiler=function(t){return x(t)===s},e.isStrictMode=function(t){return x(t)===a},e.isSuspense=function(t){return x(t)===p},e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===s||t===a||t===p||t===d||"object"==typeof t&&null!==t&&(t.$$typeof===v||t.$$typeof===m||t.$$typeof===u||t.$$typeof===l||t.$$typeof===f||t.$$typeof===y||t.$$typeof===b||t.$$typeof===_||t.$$typeof===g)},e.typeOf=x},9185:(t,e,n)=>{"use strict";t.exports=n(8702)},2610:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615),n(6054)],void 0===(o="function"==typeof(r=function(t,e,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var i=a(e),o=a(n);function a(t){return t&&t.__esModule?t:{default:t}}var s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=["Audio","BallTriangle","Bars","Circles","Grid","Hearts","Oval","Puff","Rings","TailSpin","ThreeDots","Watch","RevolvingDot","Triangle","Plane","MutatingDots","CradleLoader"];function c(t){var n,o=(0,e.useState)(!0),a=u(o,2),c=a[0],h=a[1];return(0,e.useEffect)((function(){var e=void 0;return t.timeout&&t.timeout>0&&(e=setTimeout((function(){h(!1)}),t.timeout)),function(){e&&clearTimeout(e)}})),t.visible&&"false"!==t.visible&&c?i.default.createElement("div",{"aria-busy":"true",className:t.className,style:t.style},i.default.createElement((n=t.type,l.includes(n)?r.Spinner[n]:r.Spinner.Audio),s({},t))):null}c.propTypes={type:o.default.oneOf([].concat(l)),style:o.default.objectOf(o.default.string),className:o.default.string,visible:o.default.oneOfType([o.default.bool,o.default.string]),timeout:o.default.number},c.defaultProps={type:"Audio",style:{},className:"",visible:!0,timeout:0}})?r.apply(e,i):r)||(t.exports=o)},2484:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Audio=function(t){return r.default.createElement("svg",{height:t.height,width:t.width,fill:t.color,viewBox:"0 0 55 80",xmlns:"http://www.w3.org/2000/svg","aria-label":t.label},r.default.createElement("g",{transform:"matrix(1 0 0 -1 0 80)"},r.default.createElement("rect",{width:"10",height:"20",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"4.3s",values:"20;45;57;80;64;32;66;45;64;23;66;13;64;56;34;34;2;23;76;79;20",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"15",width:"10",height:"80",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"80;55;33;5;75;23;73;33;12;14;60;80",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",width:"10",height:"50",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1.4s",values:"50;34;78;23;56;23;34;76;80;54;21;50",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"45",width:"10",height:"30",rx:"3"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"2s",values:"30;45;13;80;56;72;45;76;34;23;67;30",calcMode:"linear",repeatCount:"indefinite"}))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},677:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BallTriangle=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.BallTriangle=function(t){return r.default.createElement("svg",{height:t.height,width:t.width,stroke:t.color,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg","aria-label":t.label},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"5",cy:"50",r:t.radius},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"27",cy:"5",r:t.radius},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"49",cy:"50",r:t.radius},r.default.createElement("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",radius:5,label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},3610:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bars=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Bars=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,fill:t.color,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg","aria-label":t.label},r.default.createElement("rect",{y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"60",width:"15",height:"140",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},r.default.createElement("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},8575:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Circles=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Circles=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 135 135",xmlns:"http://www.w3.org/2000/svg",fill:t.color,"aria-label":t.label},r.default.createElement("path",{d:"M67.447 58c5.523 0 10-4.477 10-10s-4.477-10-10-10-10 4.477-10 10 4.477 10 10 10zm9.448 9.447c0 5.523 4.477 10 10 10 5.522 0 10-4.477 10-10s-4.478-10-10-10c-5.523 0-10 4.477-10 10zm-9.448 9.448c-5.523 0-10 4.477-10 10 0 5.522 4.477 10 10 10s10-4.478 10-10c0-5.523-4.477-10-10-10zM58 67.447c0-5.523-4.477-10-10-10s-10 4.477-10 10 4.477 10 10 10 10-4.477 10-10z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"-360 67 67",dur:"2.5s",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M28.19 40.31c6.627 0 12-5.374 12-12 0-6.628-5.373-12-12-12-6.628 0-12 5.372-12 12 0 6.626 5.372 12 12 12zm30.72-19.825c4.686 4.687 12.284 4.687 16.97 0 4.686-4.686 4.686-12.284 0-16.97-4.686-4.687-12.284-4.687-16.97 0-4.687 4.686-4.687 12.284 0 16.97zm35.74 7.705c0 6.627 5.37 12 12 12 6.626 0 12-5.373 12-12 0-6.628-5.374-12-12-12-6.63 0-12 5.372-12 12zm19.822 30.72c-4.686 4.686-4.686 12.284 0 16.97 4.687 4.686 12.285 4.686 16.97 0 4.687-4.686 4.687-12.284 0-16.97-4.685-4.687-12.283-4.687-16.97 0zm-7.704 35.74c-6.627 0-12 5.37-12 12 0 6.626 5.373 12 12 12s12-5.374 12-12c0-6.63-5.373-12-12-12zm-30.72 19.822c-4.686-4.686-12.284-4.686-16.97 0-4.686 4.687-4.686 12.285 0 16.97 4.686 4.687 12.284 4.687 16.97 0 4.687-4.685 4.687-12.283 0-16.97zm-35.74-7.704c0-6.627-5.372-12-12-12-6.626 0-12 5.373-12 12s5.374 12 12 12c6.628 0 12-5.373 12-12zm-19.823-30.72c4.687-4.686 4.687-12.284 0-16.97-4.686-4.686-12.284-4.686-16.97 0-4.687 4.686-4.687 12.284 0 16.97 4.686 4.687 12.284 4.687 16.97 0z"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 67 67",to:"360 67 67",dur:"8s",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},5703:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CradleLoader=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.CradleLoader=function(t){return r.default.createElement("div",{"aria-label":t.label,role:"presentation",className:"container"},r.default.createElement("div",{className:"react-spinner-loader-swing"},r.default.createElement("div",{className:"react-spinner-loader-swing-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-swing-r"})),r.default.createElement("div",{className:"react-spinner-loader-shadow"},r.default.createElement("div",{className:"react-spinner-loader-shadow-l"}),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",null),r.default.createElement("div",{className:"react-spinner-loader-shadow-r"})))};a.propTypes={label:i.default.string},a.defaultProps={label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},5172:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Grid=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Grid=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 105 105",fill:t.color,"aria-label":t.label},r.default.createElement("circle",{cx:"12.5",cy:"12.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"52.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"100ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"12.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"300ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"52.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"600ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"12.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"800ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"52.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"400ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"12.5",cy:"92.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"700ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"52.5",cy:"92.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"500ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"92.5",cy:"92.5",r:t.radius},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"200ms",dur:"1s",values:"1;.2;1",calcMode:"linear",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",radius:12.5,label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},4618:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hearts=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Hearts=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 140 64",xmlns:"http://www.w3.org/2000/svg",fill:t.color,"aria-label":t.label},r.default.createElement("path",{d:"M30.262 57.02L7.195 40.723c-5.84-3.976-7.56-12.06-3.842-18.063 3.715-6 11.467-7.65 17.306-3.68l4.52 3.76 2.6-5.274c3.717-6.002 11.47-7.65 17.305-3.68 5.84 3.97 7.56 12.054 3.842 18.062L34.49 56.118c-.897 1.512-2.793 1.915-4.228.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M105.512 56.12l-14.44-24.272c-3.716-6.008-1.996-14.093 3.843-18.062 5.835-3.97 13.588-2.322 17.306 3.68l2.6 5.274 4.52-3.76c5.84-3.97 13.592-2.32 17.307 3.68 3.718 6.003 1.998 14.088-3.842 18.064L109.74 57.02c-1.434 1.014-3.33.61-4.228-.9z",attributeName:"fill-opacity",from:"0",to:".5"},r.default.createElement("animate",{attributeName:"fill-opacity",begin:"0.7s",dur:"1.4s",values:"0.5;1;0.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("path",{d:"M67.408 57.834l-23.01-24.98c-5.864-6.15-5.864-16.108 0-22.248 5.86-6.14 15.37-6.14 21.234 0L70 16.168l4.368-5.562c5.863-6.14 15.375-6.14 21.235 0 5.863 6.14 5.863 16.098 0 22.247l-23.007 24.98c-1.43 1.556-3.757 1.556-5.188 0z"}))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},1686:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MutatingDots=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.MutatingDots=function(t){return r.default.createElement("svg",{id:"goo-loader",width:t.width,height:t.height,"aria-label":t.label},r.default.createElement("filter",{id:"fancy-goo"},r.default.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"6",result:"blur"}),r.default.createElement("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 19 -9",result:"goo"}),r.default.createElement("feComposite",{in:"SourceGraphic",in2:"goo",operator:"atop"})),r.default.createElement("g",{filter:"url(#fancy-goo)"},r.default.createElement("animateTransform",{id:"mainAnim",attributeName:"transform",attributeType:"XML",type:"rotate",from:"0 50 50",to:"359 50 50",dur:"1.2s",repeatCount:"indefinite"}),r.default.createElement("circle",{cx:"50%",cy:"40",r:t.radius,fill:t.color},r.default.createElement("animate",{id:"cAnim1",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0;cAnim1.end+0.2s",calcMode:"spline",values:"40;20;40",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5; 0.175, 0.885, 0.320, 1.5"})),r.default.createElement("circle",{cx:"50%",cy:"60",r:t.radius,fill:t.secondaryColor},r.default.createElement("animate",{id:"cAnim2",attributeType:"XML",attributeName:"cy",dur:"0.6s",begin:"0.4s;cAnim2.end+0.2s",calcMode:"spline",values:"60;80;60",keyTimes:"0;0.3;1",keySplines:"0.175, 0.885, 0.320, 1.5;0.175, 0.885, 0.320, 1.5"}))))};a.propTypes={width:i.default.number,secondaryColor:i.default.string,height:i.default.number,color:i.default.string,radius:i.default.number,label:i.default.string},a.defaultProps={width:80,height:90,color:"green",radius:11,secondaryColor:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},2524:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Oval=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Oval=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:t.color,"aria-label":t.label},r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:t.radius}),r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:18}})?r.apply(e,i):r)||(t.exports=o)},2287:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Plane=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Plane=function(t){return r.default.createElement("svg",{className:"react-spinner-loader-svg-calLoader",xmlns:"http://www.w3.org/2000/svg",width:"230",height:"230","aria-label":t.label},r.default.createElement("desc",null,"Plane animation. Loading "),r.default.createElement("path",{className:"react-spinner-loader-cal-loader__path",style:{stroke:t.secondaryColor},d:"M86.429 40c63.616-20.04 101.511 25.08 107.265 61.93 6.487 41.54-18.593 76.99-50.6 87.643-59.46 19.791-101.262-23.577-107.142-62.616C29.398 83.441 59.945 48.343 86.43 40z",fill:"none",stroke:"#0099cc",strokeWidth:"4",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"10 10 10 10 10 10 10 432",strokeDashoffset:"77"}),r.default.createElement("path",{className:"cal-loader__plane",style:{fill:t.color},d:"M141.493 37.93c-1.087-.927-2.942-2.002-4.32-2.501-2.259-.824-3.252-.955-9.293-1.172-4.017-.146-5.197-.23-5.47-.37-.766-.407-1.526-1.448-7.114-9.773-4.8-7.145-5.344-7.914-6.327-8.976-1.214-1.306-1.396-1.378-3.79-1.473-1.036-.04-2-.043-2.153-.002-.353.1-.87.586-1 .952-.139.399-.076.71.431 2.22.241.72 1.029 3.386 1.742 5.918 1.644 5.844 2.378 8.343 2.863 9.705.206.601.33 1.1.275 1.125-.24.097-10.56 1.066-11.014 1.032a3.532 3.532 0 0 1-1.002-.276l-.487-.246-2.044-2.613c-2.234-2.87-2.228-2.864-3.35-3.309-.717-.287-2.82-.386-3.276-.163-.457.237-.727.644-.737 1.152-.018.39.167.805 1.916 4.373 1.06 2.166 1.964 4.083 1.998 4.27.04.179.004.521-.076.75-.093.228-1.109 2.064-2.269 4.088-1.921 3.34-2.11 3.711-2.123 4.107-.008.25.061.557.168.725.328.512.72.644 1.966.676 1.32.029 2.352-.236 3.05-.762.222-.171 1.275-1.313 2.412-2.611 1.918-2.185 2.048-2.32 2.45-2.505.241-.111.601-.232.82-.271.267-.058 2.213.201 5.912.8 3.036.48 5.525.894 5.518.914 0 .026-.121.306-.27.638-.54 1.198-1.515 3.842-3.35 9.021-1.029 2.913-2.107 5.897-2.4 6.62-.703 1.748-.725 1.833-.594 2.286.137.46.45.833.872 1.012.41.177 3.823.24 4.37.085.852-.25 1.44-.688 2.312-1.724 1.166-1.39 3.169-3.948 6.771-8.661 5.8-7.583 6.561-8.49 7.387-8.702.233-.065 2.828-.056 5.784.011 5.827.138 6.64.09 8.62-.5 2.24-.67 4.035-1.65 5.517-3.016 1.136-1.054 1.135-1.014.207-1.962-.357-.38-.767-.777-.902-.893z",fill:"#000033"}))};a.propTypes={secondaryColor:i.default.string,color:i.default.string,label:i.default.string},a.defaultProps={secondaryColor:"grey",color:"#FFA500",label:"async-loading"}})?r.apply(e,i):r)||(t.exports=o)},3685:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Puff=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Puff=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg",stroke:t.color,"aria-label":t.label},r.default.createElement("g",{fill:"none",fillRule:"evenodd",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:t.radius},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:t.radius},r.default.createElement("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"}))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:1}})?r.apply(e,i):r)||(t.exports=o)},685:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RevolvingDot=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.RevolvingDot=function(t){return r.default.createElement("svg",{version:"1.1",width:t.width,height:t.height,xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px","aria-label":t.label},r.default.createElement("circle",{fill:"none",stroke:t.color,strokeWidth:"4",cx:"50",cy:"50",r:t.radius+38,style:{opacity:.5}}),r.default.createElement("circle",{fill:t.color,stroke:t.color,strokeWidth:"3",cx:"8",cy:"54",r:t.radius},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:6}})?r.apply(e,i):r)||(t.exports=o)},5453:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Rings=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Rings=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg",stroke:t.color,"aria-label":t.label},r.default.createElement("g",{fill:"none",fillRule:"evenodd",transform:"translate(1 1)",strokeWidth:"2"},r.default.createElement("circle",{cx:"22",cy:"22",r:t.radius,strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:t.radius,strokeOpacity:"0"},r.default.createElement("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeOpacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"strokeWidth",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"22",cy:"22",r:t.radius+2},r.default.createElement("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"}))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",radius:6,label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},3131:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TailSpin=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.TailSpin=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg","aria-label":t.label},r.default.createElement("defs",null,r.default.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},r.default.createElement("stop",{stopColor:t.color,stopOpacity:"0",offset:"0%"}),r.default.createElement("stop",{stopColor:t.color,stopOpacity:".631",offset:"63.146%"}),r.default.createElement("stop",{stopColor:t.color,offset:"100%"}))),r.default.createElement("g",{fill:"none",fillRule:"evenodd"},r.default.createElement("g",{transform:"translate(1 1)"},r.default.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",id:"Oval-2",stroke:t.color,strokeWidth:"2"},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),r.default.createElement("circle",{fill:"#fff",cx:"36",cy:"18",r:t.radius},r.default.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})))))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",radius:1,label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},466:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThreeDots=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.ThreeDots=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:t.color,"aria-label":t.label},r.default.createElement("circle",{cx:"15",cy:"15",r:t.radius+6},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"60",cy:"15",r:t.radius,attributeName:"fillOpacity",from:"1",to:"0.3"},r.default.createElement("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})),r.default.createElement("circle",{cx:"105",cy:"15",r:t.radius+6},r.default.createElement("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),r.default.createElement("animate",{attributeName:"fillOpacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:9}})?r.apply(e,i):r)||(t.exports=o)},3176:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Triangle=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Triangle=function(t){return r.default.createElement("div",{className:"react-spinner-loader-svg"},r.default.createElement("svg",{id:"triangle",width:t.width,height:t.height,viewBox:"-3 -4 39 39","aria-label":t.label},r.default.createElement("polygon",{fill:"transparent",stroke:t.color,strokeWidth:"1",points:"16,0 32,32 0,32"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading"}})?r.apply(e,i):r)||(t.exports=o)},6167:function(t,e,n){var r,i,o;i=[e,n(7378),n(3615)],void 0===(o="function"==typeof(r=function(t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Watch=void 0;var r=o(e),i=o(n);function o(t){return t&&t.__esModule?t:{default:t}}var a=t.Watch=function(t){return r.default.createElement("svg",{width:t.width,height:t.height,version:"1.1",id:"L2",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 100 100",xmlSpace:"preserve","aria-label":t.label},r.default.createElement("circle",{fill:"none",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",cx:"50",cy:"50",r:t.radius}),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"85",y2:"50.5"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})),r.default.createElement("line",{fill:"none",strokeLinecap:"round",stroke:t.color,strokeWidth:"4",strokeMiterlimit:"10",x1:"50",y1:"50",x2:"49.5",y2:"74"},r.default.createElement("animateTransform",{attributeName:"transform",dur:"15s",type:"rotate",from:"0 50 50",to:"360 50 50",repeatCount:"indefinite"})))};a.propTypes={height:i.default.oneOfType([i.default.string,i.default.number]),width:i.default.oneOfType([i.default.string,i.default.number]),color:i.default.string,label:i.default.string,radius:i.default.number},a.defaultProps={height:80,width:80,color:"green",label:"audio-loading",radius:48}})?r.apply(e,i):r)||(t.exports=o)},6054:function(t,e,n){var r,i,o;i=[e,n(8575),n(6167),n(2484),n(677),n(3610),n(5703),n(5172),n(4618),n(1686),n(2524),n(2287),n(3685),n(685),n(5453),n(3131),n(466),n(3176)],void 0===(o="function"==typeof(r=function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m,v,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Spinner=void 0,t.Spinner={Circles:e.Circles,Audio:r.Audio,BallTriangle:i.BallTriangle,Bars:o.Bars,CradleLoader:a.CradleLoader,Grid:s.Grid,Hearts:u.Hearts,MutatingDots:l.MutatingDots,Oval:c.Oval,Plane:h.Plane,Puff:f.Puff,RevolvingDot:p.RevolvingDot,Rings:d.Rings,TailSpin:m.TailSpin,ThreeDots:v.ThreeDots,Triangle:g.Triangle,Watch:n.Watch}})?r.apply(e,i):r)||(t.exports=o)},5528:(t,e,n)=>{t.exports=n(2610)},2470:function(t,e,n){"use strict";var r=this&&this.__values||function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},i=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(i(arguments[e]));return t},a=n(8429),s=[];t.exports=function(t,e,n){var i,u;void 0===n&&(n=0);try{for(var l=r(s),c=l.next();!c.done;c=l.next()){var h=c.value;if(a(e,h.inputs)){if(Object.prototype.hasOwnProperty.call(h,"error"))throw h.error;if(Object.prototype.hasOwnProperty.call(h,"response"))return h.response;throw h.promise}}}catch(t){i={error:t}}finally{try{c&&!c.done&&(u=l.return)&&u.call(l)}finally{if(i)throw i.error}}var f={promise:t.apply(void 0,o(e)).then((function(t){f.response=t})).catch((function(t){f.error=t})).then((function(){n>0&&setTimeout((function(){var t=s.indexOf(f);-1!==t&&s.splice(t,1)}),n)})),inputs:e};throw s.push(f),f.promise}},8429:t=>{"use strict";var e=Array.isArray,n=Object.keys,r=Object.prototype.hasOwnProperty;t.exports=function t(i,o){if(i===o)return!0;if(i&&o&&"object"==typeof i&&"object"==typeof o){var a,s,u,l=e(i),c=e(o);if(l&&c){if((s=i.length)!=o.length)return!1;for(a=s;0!=a--;)if(!t(i[a],o[a]))return!1;return!0}if(l!=c)return!1;var h=i instanceof Date,f=o instanceof Date;if(h!=f)return!1;if(h&&f)return i.getTime()==o.getTime();var p=i instanceof RegExp,d=o instanceof RegExp;if(p!=d)return!1;if(p&&d)return i.toString()==o.toString();var m=n(i);if((s=m.length)!==n(o).length)return!1;for(a=s;0!=a--;)if(!r.call(o,m[a]))return!1;for(a=s;0!=a--;)if(!t(i[u=m[a]],o[u]))return!1;return!0}return i!=i&&o!=o}},5056:(t,e,n)=>{(t=n.nmd(t)).exports=function e(r){"use strict";var i=n(2525),o=n(7378),a=n(1102);function s(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;u.hasOwnProperty("ReactCurrentDispatcher")||(u.ReactCurrentDispatcher={current:null}),u.hasOwnProperty("ReactCurrentBatchConfig")||(u.ReactCurrentBatchConfig={suspense:null});var l="function"==typeof Symbol&&Symbol.for,c=l?Symbol.for("react.element"):60103,h=l?Symbol.for("react.portal"):60106,f=l?Symbol.for("react.fragment"):60107,p=l?Symbol.for("react.strict_mode"):60108,d=l?Symbol.for("react.profiler"):60114,m=l?Symbol.for("react.provider"):60109,v=l?Symbol.for("react.context"):60110,g=l?Symbol.for("react.concurrent_mode"):60111,y=l?Symbol.for("react.forward_ref"):60112,b=l?Symbol.for("react.suspense"):60113,_=l?Symbol.for("react.suspense_list"):60120,x=l?Symbol.for("react.memo"):60115,w=l?Symbol.for("react.lazy"):60116,E=l?Symbol.for("react.block"):60121,S="function"==typeof Symbol&&Symbol.iterator;function T(t){return null===t||"object"!=typeof t?null:"function"==typeof(t=S&&t[S]||t["@@iterator"])?t:null}function A(t){if(null==t)return null;if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t;switch(t){case f:return"Fragment";case h:return"Portal";case d:return"Profiler";case p:return"StrictMode";case b:return"Suspense";case _:return"SuspenseList"}if("object"==typeof t)switch(t.$$typeof){case v:return"Context.Consumer";case m:return"Context.Provider";case y:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case x:return A(t.type);case E:return A(t.render);case w:if(t=1===t._status?t._result:null)return A(t)}return null}function M(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!=(1026&(e=t).effectTag)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function C(t){if(M(t)!==t)throw Error(s(188))}function O(t){var e=t.alternate;if(!e){if(null===(e=M(t)))throw Error(s(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return C(i),t;if(o===r)return C(i),e;o=o.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,u=i.child;u;){if(u===n){a=!0,n=i,r=o;break}if(u===r){a=!0,r=i,n=o;break}u=u.sibling}if(!a){for(u=o.child;u;){if(u===n){a=!0,n=o,r=i;break}if(u===r){a=!0,r=o,n=i;break}u=u.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?t:e}function P(t){if(!(t=O(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}var k=r.getPublicInstance,I=r.getRootHostContext,L=r.getChildHostContext,R=r.prepareForCommit,D=r.resetAfterCommit,N=r.createInstance,F=r.appendInitialChild,j=r.finalizeInitialChildren,U=r.prepareUpdate,z=r.shouldSetTextContent,B=r.shouldDeprioritizeSubtree,V=r.createTextInstance,H=r.setTimeout,G=r.clearTimeout,W=r.noTimeout,q=r.isPrimaryRenderer,X=r.supportsMutation,Y=r.supportsPersistence,Q=r.supportsHydration,Z=r.appendChild,K=r.appendChildToContainer,$=r.commitTextUpdate,J=r.commitMount,tt=r.commitUpdate,et=r.insertBefore,nt=r.insertInContainerBefore,rt=r.removeChild,it=r.removeChildFromContainer,ot=r.resetTextContent,at=r.hideInstance,st=r.hideTextInstance,ut=r.unhideInstance,lt=r.unhideTextInstance,ct=r.cloneInstance,ht=r.createContainerChildSet,ft=r.appendChildToContainerChildSet,pt=r.finalizeContainerChildren,dt=r.replaceContainerChildren,mt=r.cloneHiddenInstance,vt=r.cloneHiddenTextInstance,gt=r.canHydrateInstance,yt=r.canHydrateTextInstance,bt=r.isSuspenseInstancePending,_t=r.isSuspenseInstanceFallback,xt=r.getNextHydratableSibling,wt=r.getFirstHydratableChild,Et=r.hydrateInstance,St=r.hydrateTextInstance,Tt=r.getNextHydratableInstanceAfterSuspenseInstance,At=r.commitHydratedContainer,Mt=r.commitHydratedSuspenseInstance,Ct=/^(.*)[\\\/]/;function Ot(t){var e="";do{t:switch(t.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break t;default:var r=t._debugOwner,i=t._debugSource,o=A(t.type);n=null,r&&(n=A(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(Ct,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}e+=n,t=t.return}while(t);return e}var Pt=[],kt=-1;function It(t){0>kt||(t.current=Pt[kt],Pt[kt]=null,kt--)}function Lt(t,e){kt++,Pt[kt]=t.current,t.current=e}var Rt={},Dt={current:Rt},Nt={current:!1},Ft=Rt;function jt(t,e){var n=t.type.contextTypes;if(!n)return Rt;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=e[i];return r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Ut(t){return null!=t.childContextTypes}function zt(){It(Nt),It(Dt)}function Bt(t,e,n){if(Dt.current!==Rt)throw Error(s(168));Lt(Dt,e),Lt(Nt,n)}function Vt(t,e,n){var r=t.stateNode;if(t=e.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var o in r=r.getChildContext())if(!(o in t))throw Error(s(108,A(e)||"Unknown",o));return i({},n,{},r)}function Ht(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rt,Ft=Dt.current,Lt(Dt,t),Lt(Nt,Nt.current),!0}function Gt(t,e,n){var r=t.stateNode;if(!r)throw Error(s(169));n?(t=Vt(t,e,Ft),r.__reactInternalMemoizedMergedChildContext=t,It(Nt),It(Dt),Lt(Dt,t)):It(Nt),Lt(Nt,n)}var Wt=a.unstable_runWithPriority,qt=a.unstable_scheduleCallback,Xt=a.unstable_cancelCallback,Yt=a.unstable_requestPaint,Qt=a.unstable_now,Zt=a.unstable_getCurrentPriorityLevel,Kt=a.unstable_ImmediatePriority,$t=a.unstable_UserBlockingPriority,Jt=a.unstable_NormalPriority,te=a.unstable_LowPriority,ee=a.unstable_IdlePriority,ne={},re=a.unstable_shouldYield,ie=void 0!==Yt?Yt:function(){},oe=null,ae=null,se=!1,ue=Qt(),le=1e4>ue?Qt:function(){return Qt()-ue};function ce(){switch(Zt()){case Kt:return 99;case $t:return 98;case Jt:return 97;case te:return 96;case ee:return 95;default:throw Error(s(332))}}function he(t){switch(t){case 99:return Kt;case 98:return $t;case 97:return Jt;case 96:return te;case 95:return ee;default:throw Error(s(332))}}function fe(t,e){return t=he(t),Wt(t,e)}function pe(t,e,n){return t=he(t),qt(t,e,n)}function de(t){return null===oe?(oe=[t],ae=qt(Kt,ve)):oe.push(t),ne}function me(){if(null!==ae){var t=ae;ae=null,Xt(t)}ve()}function ve(){if(!se&&null!==oe){se=!0;var t=0;try{var e=oe;fe(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),oe=null}catch(e){throw null!==oe&&(oe=oe.slice(t+1)),qt(Kt,me),e}finally{se=!1}}}function ge(t,e,n){return 1073741821-(1+((1073741821-t+e/10)/(n/=10)|0))*n}var ye="function"==typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t==1/e)||t!=t&&e!=e},be=Object.prototype.hasOwnProperty;function _e(t,e){if(ye(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!be.call(e,n[r])||!ye(t[n[r]],e[n[r]]))return!1;return!0}function xe(t,e){if(t&&t.defaultProps)for(var n in e=i({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}var we={current:null},Ee=null,Se=null,Te=null;function Ae(){Te=Se=Ee=null}function Me(t,e){t=t.type._context,q?(Lt(we,t._currentValue),t._currentValue=e):(Lt(we,t._currentValue2),t._currentValue2=e)}function Ce(t){var e=we.current;It(we),t=t.type._context,q?t._currentValue=e:t._currentValue2=e}function Oe(t,e){for(;null!==t;){var n=t.alternate;if(t.childExpirationTime<e)t.childExpirationTime=e,null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e);else{if(!(null!==n&&n.childExpirationTime<e))break;n.childExpirationTime=e}t=t.return}}function Pe(t,e){Ee=t,Te=Se=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(t.expirationTime>=e&&(ir=!0),t.firstContext=null)}function ke(t,e){if(Te!==t&&!1!==e&&0!==e)if("number"==typeof e&&1073741823!==e||(Te=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Se){if(null===Ee)throw Error(s(308));Se=e,Ee.dependencies={expirationTime:0,firstContext:e,responders:null}}else Se=Se.next=e;return q?t._currentValue:t._currentValue2}var Ie=!1;function Le(t){t.updateQueue={baseState:t.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function Re(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,baseQueue:t.baseQueue,shared:t.shared,effects:t.effects})}function De(t,e){return(t={expirationTime:t,suspenseConfig:e,tag:0,payload:null,callback:null,next:null}).next=t}function Ne(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function Fe(t,e){var n=t.alternate;null!==n&&Re(n,t),null===(n=(t=t.updateQueue).baseQueue)?(t.baseQueue=e.next=e,e.next=e):(e.next=n.next,n.next=e)}function je(t,e,n,r){var o=t.updateQueue;Ie=!1;var a=o.baseQueue,s=o.shared.pending;if(null!==s){if(null!==a){var u=a.next;a.next=s.next,s.next=u}a=s,o.shared.pending=null,null!==(u=t.alternate)&&null!==(u=u.updateQueue)&&(u.baseQueue=s)}if(null!==a){u=a.next;var l=o.baseState,c=0,h=null,f=null,p=null;if(null!==u)for(var d=u;;){if((s=d.expirationTime)<r){var m={expirationTime:d.expirationTime,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null};null===p?(f=p=m,h=l):p=p.next=m,s>c&&(c=s)}else{null!==p&&(p=p.next={expirationTime:1073741823,suspenseConfig:d.suspenseConfig,tag:d.tag,payload:d.payload,callback:d.callback,next:null}),zi(s,d.suspenseConfig);t:{var v=t,g=d;switch(s=e,m=n,g.tag){case 1:if("function"==typeof(v=g.payload)){l=v.call(m,l,s);break t}l=v;break t;case 3:v.effectTag=-4097&v.effectTag|64;case 0:if(null==(s="function"==typeof(v=g.payload)?v.call(m,l,s):v))break t;l=i({},l,s);break t;case 2:Ie=!0}}null!==d.callback&&(t.effectTag|=32,null===(s=o.effects)?o.effects=[d]:s.push(d))}if(null===(d=d.next)||d===u){if(null===(s=o.shared.pending))break;d=a.next=s.next,s.next=u,o.baseQueue=a=s,o.shared.pending=null}}null===p?h=l:p.next=f,o.baseState=h,o.baseQueue=p,Bi(c),t.expirationTime=c,t.memoizedState=l}}function Ue(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(null!==i){if(r.callback=null,r=i,i=n,"function"!=typeof r)throw Error(s(191,r));r.call(i)}}}var ze=u.ReactCurrentBatchConfig,Be=(new o.Component).refs;function Ve(t,e,n,r){n=null==(n=n(r,e=t.memoizedState))?e:i({},e,n),t.memoizedState=n,0===t.expirationTime&&(t.updateQueue.baseState=n)}var He={isMounted:function(t){return!!(t=t._reactInternalFiber)&&M(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternalFiber;var r=Mi(),i=ze.suspense;(i=De(r=Ci(r,t,i),i)).payload=e,null!=n&&(i.callback=n),Ne(t,i),Oi(t,r)},enqueueReplaceState:function(t,e,n){t=t._reactInternalFiber;var r=Mi(),i=ze.suspense;(i=De(r=Ci(r,t,i),i)).tag=1,i.payload=e,null!=n&&(i.callback=n),Ne(t,i),Oi(t,r)},enqueueForceUpdate:function(t,e){t=t._reactInternalFiber;var n=Mi(),r=ze.suspense;(r=De(n=Ci(n,t,r),r)).tag=2,null!=e&&(r.callback=e),Ne(t,r),Oi(t,n)}};function Ge(t,e,n,r,i,o,a){return"function"==typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(r,o,a):!(e.prototype&&e.prototype.isPureReactComponent&&_e(n,r)&&_e(i,o))}function We(t,e,n){var r=!1,i=Rt,o=e.contextType;return"object"==typeof o&&null!==o?o=ke(o):(i=Ut(e)?Ft:Dt.current,o=(r=null!=(r=e.contextTypes))?jt(t,i):Rt),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=He,t.stateNode=e,e._reactInternalFiber=t,r&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function qe(t,e,n,r){t=e.state,"function"==typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,r),"function"==typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&He.enqueueReplaceState(e,e.state,null)}function Xe(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=Be,Le(t);var o=e.contextType;"object"==typeof o&&null!==o?i.context=ke(o):(o=Ut(e)?Ft:Dt.current,i.context=jt(t,o)),je(t,n,i,r),i.state=t.memoizedState,"function"==typeof(o=e.getDerivedStateFromProps)&&(Ve(t,e,o,n),i.state=t.memoizedState),"function"==typeof e.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(e=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),e!==i.state&&He.enqueueReplaceState(i,i.state,null),je(t,n,i,r),i.state=t.memoizedState),"function"==typeof i.componentDidMount&&(t.effectTag|=4)}var Ye=Array.isArray;function Qe(t,e,n){if(null!==(t=n.ref)&&"function"!=typeof t&&"object"!=typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,t));var i=""+t;return null!==e&&null!==e.ref&&"function"==typeof e.ref&&e.ref._stringRef===i?e.ref:((e=function(t){var e=r.refs;e===Be&&(e=r.refs={}),null===t?delete e[i]:e[i]=t})._stringRef=i,e)}if("string"!=typeof t)throw Error(s(284));if(!n._owner)throw Error(s(290,t))}return t}function Ze(t,e){if("textarea"!==t.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e,""))}function Ke(t){function e(e,n){if(t){var r=e.lastEffect;null!==r?(r.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!t)return null;for(;null!==r;)e(n,r),r=r.sibling;return null}function r(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function i(t,e){return(t=uo(t,e)).index=0,t.sibling=null,t}function o(e,n,r){return e.index=r,t?null!==(r=e.alternate)?(r=r.index)<n?(e.effectTag=2,n):r:(e.effectTag=2,n):n}function a(e){return t&&null===e.alternate&&(e.effectTag=2),e}function u(t,e,n,r){return null===e||6!==e.tag?((e=ho(n,t.mode,r)).return=t,e):((e=i(e,n)).return=t,e)}function l(t,e,n,r){return null!==e&&e.elementType===n.type?((r=i(e,n.props)).ref=Qe(t,e,n),r.return=t,r):((r=lo(n.type,n.key,n.props,null,t.mode,r)).ref=Qe(t,e,n),r.return=t,r)}function p(t,e,n,r){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=fo(n,t.mode,r)).return=t,e):((e=i(e,n.children||[])).return=t,e)}function d(t,e,n,r,o){return null===e||7!==e.tag?((e=co(n,t.mode,r,o)).return=t,e):((e=i(e,n)).return=t,e)}function m(t,e,n){if("string"==typeof e||"number"==typeof e)return(e=ho(""+e,t.mode,n)).return=t,e;if("object"==typeof e&&null!==e){switch(e.$$typeof){case c:return(n=lo(e.type,e.key,e.props,null,t.mode,n)).ref=Qe(t,null,e),n.return=t,n;case h:return(e=fo(e,t.mode,n)).return=t,e}if(Ye(e)||T(e))return(e=co(e,t.mode,n,null)).return=t,e;Ze(t,e)}return null}function v(t,e,n,r){var i=null!==e?e.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:u(t,e,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case c:return n.key===i?n.type===f?d(t,e,n.props.children,r,i):l(t,e,n,r):null;case h:return n.key===i?p(t,e,n,r):null}if(Ye(n)||T(n))return null!==i?null:d(t,e,n,r,null);Ze(t,n)}return null}function g(t,e,n,r,i){if("string"==typeof r||"number"==typeof r)return u(e,t=t.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case c:return t=t.get(null===r.key?n:r.key)||null,r.type===f?d(e,t,r.props.children,i,r.key):l(e,t,r,i);case h:return p(e,t=t.get(null===r.key?n:r.key)||null,r,i)}if(Ye(r)||T(r))return d(e,t=t.get(n)||null,r,i,null);Ze(e,r)}return null}function y(i,a,s,u){for(var l=null,c=null,h=a,f=a=0,p=null;null!==h&&f<s.length;f++){h.index>f?(p=h,h=null):p=h.sibling;var d=v(i,h,s[f],u);if(null===d){null===h&&(h=p);break}t&&h&&null===d.alternate&&e(i,h),a=o(d,a,f),null===c?l=d:c.sibling=d,c=d,h=p}if(f===s.length)return n(i,h),l;if(null===h){for(;f<s.length;f++)null!==(h=m(i,s[f],u))&&(a=o(h,a,f),null===c?l=h:c.sibling=h,c=h);return l}for(h=r(i,h);f<s.length;f++)null!==(p=g(h,i,f,s[f],u))&&(t&&null!==p.alternate&&h.delete(null===p.key?f:p.key),a=o(p,a,f),null===c?l=p:c.sibling=p,c=p);return t&&h.forEach((function(t){return e(i,t)})),l}function b(i,a,u,l){var c=T(u);if("function"!=typeof c)throw Error(s(150));if(null==(u=c.call(u)))throw Error(s(151));for(var h=c=null,f=a,p=a=0,d=null,y=u.next();null!==f&&!y.done;p++,y=u.next()){f.index>p?(d=f,f=null):d=f.sibling;var b=v(i,f,y.value,l);if(null===b){null===f&&(f=d);break}t&&f&&null===b.alternate&&e(i,f),a=o(b,a,p),null===h?c=b:h.sibling=b,h=b,f=d}if(y.done)return n(i,f),c;if(null===f){for(;!y.done;p++,y=u.next())null!==(y=m(i,y.value,l))&&(a=o(y,a,p),null===h?c=y:h.sibling=y,h=y);return c}for(f=r(i,f);!y.done;p++,y=u.next())null!==(y=g(f,i,p,y.value,l))&&(t&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===h?c=y:h.sibling=y,h=y);return t&&f.forEach((function(t){return e(i,t)})),c}return function(t,r,o,u){var l="object"==typeof o&&null!==o&&o.type===f&&null===o.key;l&&(o=o.props.children);var p="object"==typeof o&&null!==o;if(p)switch(o.$$typeof){case c:t:{for(p=o.key,l=r;null!==l;){if(l.key===p){switch(l.tag){case 7:if(o.type===f){n(t,l.sibling),(r=i(l,o.props.children)).return=t,t=r;break t}break;default:if(l.elementType===o.type){n(t,l.sibling),(r=i(l,o.props)).ref=Qe(t,l,o),r.return=t,t=r;break t}}n(t,l);break}e(t,l),l=l.sibling}o.type===f?((r=co(o.props.children,t.mode,u,o.key)).return=t,t=r):((u=lo(o.type,o.key,o.props,null,t.mode,u)).ref=Qe(t,r,o),u.return=t,t=u)}return a(t);case h:t:{for(l=o.key;null!==r;){if(r.key===l){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(t,r.sibling),(r=i(r,o.children||[])).return=t,t=r;break t}n(t,r);break}e(t,r),r=r.sibling}(r=fo(o,t.mode,u)).return=t,t=r}return a(t)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(t,r.sibling),(r=i(r,o)).return=t,t=r):(n(t,r),(r=ho(o,t.mode,u)).return=t,t=r),a(t);if(Ye(o))return y(t,r,o,u);if(T(o))return b(t,r,o,u);if(p&&Ze(t,o),void 0===o&&!l)switch(t.tag){case 1:case 0:throw t=t.type,Error(s(152,t.displayName||t.name||"Component"))}return n(t,r)}}var $e=Ke(!0),Je=Ke(!1),tn={},en={current:tn},nn={current:tn},rn={current:tn};function on(t){if(t===tn)throw Error(s(174));return t}function an(t,e){Lt(rn,e),Lt(nn,t),Lt(en,tn),t=I(e),It(en),Lt(en,t)}function sn(){It(en),It(nn),It(rn)}function un(t){var e=on(rn.current),n=on(en.current);n!==(e=L(n,t.type,e))&&(Lt(nn,t),Lt(en,e))}function ln(t){nn.current===t&&(It(en),It(nn))}var cn={current:0};function hn(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||bt(n)||_t(n)))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!=(64&e.effectTag))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}function fn(t,e){return{responder:t,props:e}}var pn=u.ReactCurrentDispatcher,dn=u.ReactCurrentBatchConfig,mn=0,vn=null,gn=null,yn=null,bn=!1;function _n(){throw Error(s(321))}function xn(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ye(t[n],e[n]))return!1;return!0}function wn(t,e,n,r,i,o){if(mn=o,vn=e,e.memoizedState=null,e.updateQueue=null,e.expirationTime=0,pn.current=null===t||null===t.memoizedState?Wn:qn,t=n(r,i),e.expirationTime===mn){o=0;do{if(e.expirationTime=0,!(25>o))throw Error(s(301));o+=1,yn=gn=null,e.updateQueue=null,pn.current=Xn,t=n(r,i)}while(e.expirationTime===mn)}if(pn.current=Gn,e=null!==gn&&null!==gn.next,mn=0,yn=gn=vn=null,bn=!1,e)throw Error(s(300));return t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yn?vn.memoizedState=yn=t:yn=yn.next=t,yn}function Sn(){if(null===gn){var t=vn.alternate;t=null!==t?t.memoizedState:null}else t=gn.next;var e=null===yn?vn.memoizedState:yn.next;if(null!==e)yn=e,gn=t;else{if(null===t)throw Error(s(310));t={memoizedState:(gn=t).memoizedState,baseState:gn.baseState,baseQueue:gn.baseQueue,queue:gn.queue,next:null},null===yn?vn.memoizedState=yn=t:yn=yn.next=t}return yn}function Tn(t,e){return"function"==typeof e?e(t):e}function An(t){var e=Sn(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=gn,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var u=a=o=null,l=i;do{var c=l.expirationTime;if(c<mn){var h={expirationTime:l.expirationTime,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(a=u=h,o=r):u=u.next=h,c>vn.expirationTime&&(vn.expirationTime=c,Bi(c))}else null!==u&&(u=u.next={expirationTime:1073741823,suspenseConfig:l.suspenseConfig,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),zi(c,l.suspenseConfig),r=l.eagerReducer===t?l.eagerState:t(r,l.action);l=l.next}while(null!==l&&l!==i);null===u?o=r:u.next=a,ye(r,e.memoizedState)||(ir=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}return[e.memoizedState,n.dispatch]}function Mn(t){var e=Sn(),n=e.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=t(o,a.action),a=a.next}while(a!==i);ye(o,e.memoizedState)||(ir=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function Cn(t){var e=En();return"function"==typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:Tn,lastRenderedState:t}).dispatch=Hn.bind(null,vn,t),[e.memoizedState,t]}function On(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},null===(e=vn.updateQueue)?(e={lastEffect:null},vn.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t),t}function Pn(){return Sn().memoizedState}function kn(t,e,n,r){var i=En();vn.effectTag|=t,i.memoizedState=On(1|e,n,void 0,void 0===r?null:r)}function In(t,e,n,r){var i=Sn();r=void 0===r?null:r;var o=void 0;if(null!==gn){var a=gn.memoizedState;if(o=a.destroy,null!==r&&xn(r,a.deps))return void On(e,n,o,r)}vn.effectTag|=t,i.memoizedState=On(1|e,n,o,r)}function Ln(t,e){return kn(516,4,t,e)}function Rn(t,e){return In(516,4,t,e)}function Dn(t,e){return In(4,2,t,e)}function Nn(t,e){return"function"==typeof e?(t=t(),e(t),function(){e(null)}):null!=e?(t=t(),e.current=t,function(){e.current=null}):void 0}function Fn(t,e,n){return n=null!=n?n.concat([t]):null,In(4,2,Nn.bind(null,e,t),n)}function jn(){}function Un(t,e){return En().memoizedState=[t,void 0===e?null:e],t}function zn(t,e){var n=Sn();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&xn(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Bn(t,e){var n=Sn();e=void 0===e?null:e;var r=n.memoizedState;return null!==r&&null!==e&&xn(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Vn(t,e,n){var r=ce();fe(98>r?98:r,(function(){t(!0)})),fe(97<r?97:r,(function(){var r=dn.suspense;dn.suspense=void 0===e?null:e;try{t(!1),n()}finally{dn.suspense=r}}))}function Hn(t,e,n){var r=Mi(),i=ze.suspense;i={expirationTime:r=Ci(r,t,i),suspenseConfig:i,action:n,eagerReducer:null,eagerState:null,next:null};var o=e.pending;if(null===o?i.next=i:(i.next=o.next,o.next=i),e.pending=i,o=t.alternate,t===vn||null!==o&&o===vn)bn=!0,i.expirationTime=mn,vn.expirationTime=mn;else{if(0===t.expirationTime&&(null===o||0===o.expirationTime)&&null!==(o=e.lastRenderedReducer))try{var a=e.lastRenderedState,s=o(a,n);if(i.eagerReducer=o,i.eagerState=s,ye(s,a))return}catch(t){}Oi(t,r)}}var Gn={readContext:ke,useCallback:_n,useContext:_n,useEffect:_n,useImperativeHandle:_n,useLayoutEffect:_n,useMemo:_n,useReducer:_n,useRef:_n,useState:_n,useDebugValue:_n,useResponder:_n,useDeferredValue:_n,useTransition:_n},Wn={readContext:ke,useCallback:Un,useContext:ke,useEffect:Ln,useImperativeHandle:function(t,e,n){return n=null!=n?n.concat([t]):null,kn(4,2,Nn.bind(null,e,t),n)},useLayoutEffect:function(t,e){return kn(4,2,t,e)},useMemo:function(t,e){var n=En();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=void 0!==n?n(e):e,r.memoizedState=r.baseState=e,t=(t=r.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Hn.bind(null,vn,t),[r.memoizedState,t]},useRef:function(t){return t={current:t},En().memoizedState=t},useState:Cn,useDebugValue:jn,useResponder:fn,useDeferredValue:function(t,e){var n=Cn(t),r=n[0],i=n[1];return Ln((function(){var n=dn.suspense;dn.suspense=void 0===e?null:e;try{i(t)}finally{dn.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Cn(!1),n=e[0];return e=e[1],[Un(Vn.bind(null,e,t),[e,t]),n]}},qn={readContext:ke,useCallback:zn,useContext:ke,useEffect:Rn,useImperativeHandle:Fn,useLayoutEffect:Dn,useMemo:Bn,useReducer:An,useRef:Pn,useState:function(){return An(Tn)},useDebugValue:jn,useResponder:fn,useDeferredValue:function(t,e){var n=An(Tn),r=n[0],i=n[1];return Rn((function(){var n=dn.suspense;dn.suspense=void 0===e?null:e;try{i(t)}finally{dn.suspense=n}}),[t,e]),r},useTransition:function(t){var e=An(Tn),n=e[0];return e=e[1],[zn(Vn.bind(null,e,t),[e,t]),n]}},Xn={readContext:ke,useCallback:zn,useContext:ke,useEffect:Rn,useImperativeHandle:Fn,useLayoutEffect:Dn,useMemo:Bn,useReducer:Mn,useRef:Pn,useState:function(){return Mn(Tn)},useDebugValue:jn,useResponder:fn,useDeferredValue:function(t,e){var n=Mn(Tn),r=n[0],i=n[1];return Rn((function(){var n=dn.suspense;dn.suspense=void 0===e?null:e;try{i(t)}finally{dn.suspense=n}}),[t,e]),r},useTransition:function(t){var e=Mn(Tn),n=e[0];return e=e[1],[zn(Vn.bind(null,e,t),[e,t]),n]}},Yn=null,Qn=null,Zn=!1;function Kn(t,e){var n=ao(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.effectTag=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function $n(t,e){switch(t.tag){case 5:return null!==(e=gt(e,t.type,t.pendingProps))&&(t.stateNode=e,!0);case 6:return null!==(e=yt(e,t.pendingProps))&&(t.stateNode=e,!0);case 13:default:return!1}}function Jn(t){if(Zn){var e=Qn;if(e){var n=e;if(!$n(t,e)){if(!(e=xt(n))||!$n(t,e))return t.effectTag=-1025&t.effectTag|2,Zn=!1,void(Yn=t);Kn(Yn,n)}Yn=t,Qn=wt(e)}else t.effectTag=-1025&t.effectTag|2,Zn=!1,Yn=t}}function tr(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Yn=t}function er(t){if(!Q||t!==Yn)return!1;if(!Zn)return tr(t),Zn=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!z(e,t.memoizedProps))for(e=Qn;e;)Kn(t,e),e=xt(e);if(tr(t),13===t.tag){if(!Q)throw Error(s(316));if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(s(317));Qn=Tt(t)}else Qn=Yn?xt(t.stateNode):null;return!0}function nr(){Q&&(Qn=Yn=null,Zn=!1)}var rr=u.ReactCurrentOwner,ir=!1;function or(t,e,n,r){e.child=null===t?Je(e,null,n,r):$e(e,t.child,n,r)}function ar(t,e,n,r,i){n=n.render;var o=e.ref;return Pe(e,i),r=wn(t,e,n,r,o,i),null===t||ir?(e.effectTag|=1,or(t,e,r,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Er(t,e,i))}function sr(t,e,n,r,i,o){if(null===t){var a=n.type;return"function"!=typeof a||so(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=lo(n.type,null,r,null,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,ur(t,e,a,r,i,o))}return a=t.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:_e)(i,r)&&t.ref===e.ref)?Er(t,e,o):(e.effectTag|=1,(t=uo(a,r)).ref=e.ref,t.return=e,e.child=t)}function ur(t,e,n,r,i,o){return null!==t&&_e(t.memoizedProps,r)&&t.ref===e.ref&&(ir=!1,i<o)?(e.expirationTime=t.expirationTime,Er(t,e,o)):cr(t,e,n,r,o)}function lr(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.effectTag|=128)}function cr(t,e,n,r,i){var o=Ut(n)?Ft:Dt.current;return o=jt(e,o),Pe(e,i),n=wn(t,e,n,r,o,i),null===t||ir?(e.effectTag|=1,or(t,e,n,i),e.child):(e.updateQueue=t.updateQueue,e.effectTag&=-517,t.expirationTime<=i&&(t.expirationTime=0),Er(t,e,i))}function hr(t,e,n,r,i){if(Ut(n)){var o=!0;Ht(e)}else o=!1;if(Pe(e,i),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),We(e,n,r),Xe(e,n,r,i),r=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;l="object"==typeof l&&null!==l?ke(l):jt(e,l=Ut(n)?Ft:Dt.current);var c=n.getDerivedStateFromProps,h="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&qe(e,a,r,l),Ie=!1;var f=e.memoizedState;a.state=f,je(e,r,a,i),u=e.memoizedState,s!==r||f!==u||Nt.current||Ie?("function"==typeof c&&(Ve(e,n,c,r),u=e.memoizedState),(s=Ie||Ge(e,n,s,r,f,u,l))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(e.effectTag|=4)):("function"==typeof a.componentDidMount&&(e.effectTag|=4),e.memoizedProps=r,e.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(e.effectTag|=4),r=!1)}else a=e.stateNode,Re(t,e),s=e.memoizedProps,a.props=e.type===e.elementType?s:xe(e.type,s),u=a.context,l="object"==typeof(l=n.contextType)&&null!==l?ke(l):jt(e,l=Ut(n)?Ft:Dt.current),(h="function"==typeof(c=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&qe(e,a,r,l),Ie=!1,u=e.memoizedState,a.state=u,je(e,r,a,i),f=e.memoizedState,s!==r||u!==f||Nt.current||Ie?("function"==typeof c&&(Ve(e,n,c,r),f=e.memoizedState),(c=Ie||Ge(e,n,s,r,u,f,l))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(e.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(e.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),e.memoizedProps=r,e.memoizedState=f),a.props=r,a.state=f,a.context=l,r=c):("function"!=typeof a.componentDidUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&u===t.memoizedState||(e.effectTag|=256),r=!1);return fr(t,e,n,r,o,i)}function fr(t,e,n,r,i,o){lr(t,e);var a=0!=(64&e.effectTag);if(!r&&!a)return i&&Gt(e,n,!1),Er(t,e,o);r=e.stateNode,rr.current=e;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return e.effectTag|=1,null!==t&&a?(e.child=$e(e,t.child,null,o),e.child=$e(e,null,s,o)):or(t,e,s,o),e.memoizedState=r.state,i&&Gt(e,n,!0),e.child}function pr(t){var e=t.stateNode;e.pendingContext?Bt(0,e.pendingContext,e.pendingContext!==e.context):e.context&&Bt(0,e.context,!1),an(t,e.containerInfo)}var dr,mr,vr,gr,yr={dehydrated:null,retryTime:0};function br(t,e,n){var r,i=e.mode,o=e.pendingProps,a=cn.current,s=!1;if((r=0!=(64&e.effectTag))||(r=0!=(2&a)&&(null===t||null!==t.memoizedState)),r?(s=!0,e.effectTag&=-65):null!==t&&null===t.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),Lt(cn,1&a),null===t){if(void 0!==o.fallback&&Jn(e),s){if(s=o.fallback,(o=co(null,i,0,null)).return=e,0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=co(s,i,n,null)).return=e,o.sibling=n,e.memoizedState=yr,e.child=o,n}return i=o.children,e.memoizedState=null,e.child=Je(e,null,i,n)}if(null!==t.memoizedState){if(i=(t=t.child).sibling,s){if(o=o.fallback,(n=uo(t,t.pendingProps)).return=e,0==(2&e.mode)&&(s=null!==e.memoizedState?e.child.child:e.child)!==t.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=uo(i,o)).return=e,n.sibling=i,n.childExpirationTime=0,e.memoizedState=yr,e.child=n,i}return n=$e(e,t.child,o.children,n),e.memoizedState=null,e.child=n}if(t=t.child,s){if(s=o.fallback,(o=co(null,i,0,null)).return=e,o.child=t,null!==t&&(t.return=o),0==(2&e.mode))for(t=null!==e.memoizedState?e.child.child:e.child,o.child=t;null!==t;)t.return=o,t=t.sibling;return(n=co(s,i,n,null)).return=e,o.sibling=n,n.effectTag|=2,o.childExpirationTime=0,e.memoizedState=yr,e.child=o,n}return e.memoizedState=null,e.child=$e(e,t,o.children,n)}function _r(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e),Oe(t.return,e)}function xr(t,e,n,r,i,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function wr(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(or(t,e,r.children,n),0!=(2&(r=cn.current)))r=1&r|2,e.effectTag|=64;else{if(null!==t&&0!=(64&t.effectTag))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&_r(t,n);else if(19===t.tag)_r(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Lt(cn,r),0==(2&e.mode))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;null!==n;)null!==(t=n.alternate)&&null===hn(t)&&(i=n),n=n.sibling;null===(n=i)?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),xr(e,!1,i,n,o,e.lastEffect);break;case"backwards":for(n=null,i=e.child,e.child=null;null!==i;){if(null!==(t=i.alternate)&&null===hn(t)){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}xr(e,!0,n,null,o,e.lastEffect);break;case"together":xr(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function Er(t,e,n){null!==t&&(e.dependencies=t.dependencies);var r=e.expirationTime;if(0!==r&&Bi(r),e.childExpirationTime<n)return null;if(null!==t&&e.child!==t.child)throw Error(s(153));if(null!==e.child){for(n=uo(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=uo(t,t.pendingProps)).return=e;n.sibling=null}return e.child}function Sr(t){t.effectTag|=4}if(X)dr=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)F(t,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},mr=function(){},vr=function(t,e,n,r,i){if((t=t.memoizedProps)!==r){var o=e.stateNode,a=on(en.current);n=U(o,n,t,r,i,a),(e.updateQueue=n)&&Sr(e)}},gr=function(t,e,n,r){n!==r&&Sr(e)};else if(Y){dr=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=mt(o,i.type,i.memoizedProps,i)),F(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=vt(o,i.memoizedProps,i)),F(t,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,dr(t,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Tr=function(t,e,n,r){for(var i=e.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=mt(o,i.type,i.memoizedProps,i)),ft(t,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=vt(o,i.memoizedProps,i)),ft(t,o);else if(4!==i.tag){if(13===i.tag&&0!=(4&i.effectTag)&&(o=null!==i.memoizedState)){var a=i.child;if(null!==a&&(null!==a.child&&(a.child.return=a,Tr(t,a,!0,o)),null!==(o=a.sibling))){o.return=i,i=o;continue}}if(null!==i.child){i.child.return=i,i=i.child;continue}}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};mr=function(t){var e=t.stateNode;if(null!==t.firstEffect){var n=e.containerInfo,r=ht(n);Tr(r,t,!1,!1),e.pendingChildren=r,Sr(t),pt(n,r)}},vr=function(t,e,n,r,i){var o=t.stateNode,a=t.memoizedProps;if((t=null===e.firstEffect)&&a===r)e.stateNode=o;else{var s=e.stateNode,u=on(en.current),l=null;a!==r&&(l=U(s,n,a,r,i,u)),t&&null===l?e.stateNode=o:(o=ct(o,l,n,a,r,e,t,s),j(o,n,r,i,u)&&Sr(e),e.stateNode=o,t?Sr(e):dr(o,e,!1,!1))}},gr=function(t,e,n,r){n!==r?(t=on(rn.current),n=on(en.current),e.stateNode=V(r,t,n,e),Sr(e)):e.stateNode=t.stateNode}}else mr=function(){},vr=function(){},gr=function(){};function Ar(t,e){switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?e||null===t.tail?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Mr(t,e,n){var r=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ut(e.type)&&zt(),null;case 3:return sn(),It(Nt),It(Dt),(r=e.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(null===t||null===t.child)&&er(e)&&Sr(e),mr(e),null;case 5:ln(e);var i=on(rn.current);if(n=e.type,null!==t&&null!=e.stateNode)vr(t,e,n,r,i),t.ref!==e.ref&&(e.effectTag|=128);else{if(!r){if(null===e.stateNode)throw Error(s(166));return null}if(t=on(en.current),er(e)){if(!Q)throw Error(s(175));t=Et(e.stateNode,e.type,e.memoizedProps,i,t,e),e.updateQueue=t,null!==t&&Sr(e)}else{var o=N(n,r,i,t,e);dr(o,e,!1,!1),e.stateNode=o,j(o,n,r,i,t)&&Sr(e)}null!==e.ref&&(e.effectTag|=128)}return null;case 6:if(t&&null!=e.stateNode)gr(t,e,t.memoizedProps,r);else{if("string"!=typeof r&&null===e.stateNode)throw Error(s(166));if(t=on(rn.current),i=on(en.current),er(e)){if(!Q)throw Error(s(176));St(e.stateNode,e.memoizedProps,e)&&Sr(e)}else e.stateNode=V(r,t,i,e)}return null;case 13:return It(cn),r=e.memoizedState,0!=(64&e.effectTag)?(e.expirationTime=n,e):(r=null!==r,i=!1,null===t?void 0!==e.memoizedProps.fallback&&er(e):(i=null!==(n=t.memoizedState),r||null===n||null!==(n=t.child.sibling)&&(null!==(o=e.firstEffect)?(e.firstEffect=n,n.nextEffect=o):(e.firstEffect=e.lastEffect=n,n.nextEffect=null),n.effectTag=8)),r&&!i&&0!=(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!=(1&cn.current)?ui===ei&&(ui=ni):(ui!==ei&&ui!==ni||(ui=ri),0!==pi&&null!==oi&&(vo(oi,si),go(oi,pi)))),Y&&r&&(e.effectTag|=4),X&&(r||i)&&(e.effectTag|=4),null);case 4:return sn(),mr(e),null;case 10:return Ce(e),null;case 17:return Ut(e.type)&&zt(),null;case 19:if(It(cn),null===(r=e.memoizedState))return null;if(i=0!=(64&e.effectTag),null===(o=r.rendering)){if(i)Ar(r,!1);else if(ui!==ei||null!==t&&0!=(64&t.effectTag))for(t=e.child;null!==t;){if(null!==(o=hn(t))){for(e.effectTag|=64,Ar(r,!1),null!==(t=o.updateQueue)&&(e.updateQueue=t,e.effectTag|=4),null===r.lastEffect&&(e.firstEffect=null),e.lastEffect=r.lastEffect,t=n,r=e.child;null!==r;)n=t,(i=r).effectTag&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,null===(o=i.alternate)?(i.childExpirationTime=0,i.expirationTime=n,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null):(i.childExpirationTime=o.childExpirationTime,i.expirationTime=o.expirationTime,i.child=o.child,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,n=o.dependencies,i.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),r=r.sibling;return Lt(cn,1&cn.current|2),e.child}t=t.sibling}}else{if(!i)if(null!==(t=hn(o))){if(e.effectTag|=64,i=!0,null!==(t=t.updateQueue)&&(e.updateQueue=t,e.effectTag|=4),Ar(r,!0),null===r.tail&&"hidden"===r.tailMode&&!o.alternate)return null!==(e=e.lastEffect=r.lastEffect)&&(e.nextEffect=null),null}else 2*le()-r.renderingStartTime>r.tailExpiration&&1<n&&(e.effectTag|=64,i=!0,Ar(r,!1),e.expirationTime=e.childExpirationTime=n-1);r.isBackwards?(o.sibling=e.child,e.child=o):(null!==(t=r.last)?t.sibling=o:e.child=o,r.last=o)}return null!==r.tail?(0===r.tailExpiration&&(r.tailExpiration=le()+500),t=r.tail,r.rendering=t,r.tail=t.sibling,r.lastEffect=e.lastEffect,r.renderingStartTime=le(),t.sibling=null,e=cn.current,Lt(cn,i?1&e|2:1&e),t):null}throw Error(s(156,e.tag))}function Cr(t){switch(t.tag){case 1:Ut(t.type)&&zt();var e=t.effectTag;return 4096&e?(t.effectTag=-4097&e|64,t):null;case 3:if(sn(),It(Nt),It(Dt),0!=(64&(e=t.effectTag)))throw Error(s(285));return t.effectTag=-4097&e|64,t;case 5:return ln(t),null;case 13:return It(cn),4096&(e=t.effectTag)?(t.effectTag=-4097&e|64,t):null;case 19:return It(cn),null;case 4:return sn(),null;case 10:return Ce(t),null;default:return null}}function Or(t,e){return{value:t,source:e,stack:Ot(e)}}var Pr="function"==typeof WeakSet?WeakSet:Set;function kr(t,e){var n=e.source,r=e.stack;null===r&&null!==n&&(r=Ot(n)),null!==n&&A(n.type),e=e.value,null!==t&&1===t.tag&&A(t.type);try{console.error(e)}catch(t){setTimeout((function(){throw t}))}}function Ir(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Ji(t,e)}else e.current=null}function Lr(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.effectTag&&null!==t){var n=t.memoizedProps,r=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:xe(e.type,n),r),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(s(163))}function Rr(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.destroy;n.destroy=void 0,void 0!==r&&r()}n=n.next}while(n!==e)}}function Dr(t,e){if(null!==(e=null!==(e=e.updateQueue)?e.lastEffect:null)){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Nr(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:return void Dr(3,n);case 1:if(t=n.stateNode,4&n.effectTag)if(null===e)t.componentDidMount();else{var r=n.elementType===n.type?e.memoizedProps:xe(n.type,e.memoizedProps);t.componentDidUpdate(r,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate)}return void(null!==(e=n.updateQueue)&&Ue(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=k(n.child.stateNode);break;case 1:t=n.child.stateNode}Ue(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.effectTag&&J(t,n.type,n.memoizedProps,n));case 6:case 4:case 12:return;case 13:return void(Q&&null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&Mt(n)))));case 19:case 17:case 20:case 21:return}throw Error(s(163))}function Fr(t,e,n){switch("function"==typeof io&&io(e),e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var r=t.next;fe(97<n?97:n,(function(){var t=r;do{var n=t.destroy;if(void 0!==n){var i=e;try{n()}catch(t){Ji(i,t)}}t=t.next}while(t!==r)}))}break;case 1:Ir(e),"function"==typeof(n=e.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ji(t,e)}}(e,n);break;case 5:Ir(e);break;case 4:X?Gr(t,e,n):Y&&function(t){if(Y){t=t.stateNode.containerInfo;var e=ht(t);dt(t,e)}}(e)}}function jr(t,e,n){for(var r=e;;)if(Fr(t,r,n),null===r.child||X&&4===r.tag){if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Ur(t){var e=t.alternate;t.return=null,t.child=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.alternate=null,t.firstEffect=null,t.lastEffect=null,t.pendingProps=null,t.memoizedProps=null,t.stateNode=null,null!==e&&Ur(e)}function zr(t){return 5===t.tag||3===t.tag||4===t.tag}function Br(t){if(X){t:{for(var e=t.return;null!==e;){if(zr(e)){var n=e;break t}e=e.return}throw Error(s(160))}switch(e=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:e=e.containerInfo,r=!0;break;default:throw Error(s(161))}16&n.effectTag&&(ot(e),n.effectTag&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||zr(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break t}}r?Vr(t,n,e):Hr(t,n,e)}}function Vr(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?nt(n,t,e):K(n,t);else if(4!==r&&null!==(t=t.child))for(Vr(t,e,n),t=t.sibling;null!==t;)Vr(t,e,n),t=t.sibling}function Hr(t,e,n){var r=t.tag,i=5===r||6===r;if(i)t=i?t.stateNode:t.stateNode.instance,e?et(n,t,e):Z(n,t);else if(4!==r&&null!==(t=t.child))for(Hr(t,e,n),t=t.sibling;null!==t;)Hr(t,e,n),t=t.sibling}function Gr(t,e,n){for(var r,i,o=e,a=!1;;){if(!a){a=o.return;t:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break t;case 3:case 4:r=r.containerInfo,i=!0;break t}a=a.return}a=!0}if(5===o.tag||6===o.tag)jr(t,o,n),i?it(r,o.stateNode):rt(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(Fr(t,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===e)break;for(;null===o.sibling;){if(null===o.return||o.return===e)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Wr(t,e){if(X){switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void Rr(3,e);case 1:return;case 5:var n=e.stateNode;if(null!=n){var r=e.memoizedProps;t=null!==t?t.memoizedProps:r;var i=e.type,o=e.updateQueue;e.updateQueue=null,null!==o&&tt(n,o,i,t,r,e)}return;case 6:if(null===e.stateNode)throw Error(s(162));return n=e.memoizedProps,void $(e.stateNode,null!==t?t.memoizedProps:n,n);case 3:return void(Q&&(e=e.stateNode,e.hydrate&&(e.hydrate=!1,At(e.containerInfo))));case 12:return;case 13:return qr(e),void Xr(e);case 19:return void Xr(e);case 17:return}throw Error(s(163))}switch(e.tag){case 0:case 11:case 14:case 15:case 22:return void Rr(3,e);case 12:return;case 13:return qr(e),void Xr(e);case 19:return void Xr(e);case 3:Q&&(n=e.stateNode).hydrate&&(n.hydrate=!1,At(n.containerInfo))}t:if(Y){switch(e.tag){case 1:case 5:case 6:case 20:break t;case 3:case 4:e=e.stateNode,dt(e.containerInfo,e.pendingChildren);break t}throw Error(s(163))}}function qr(t){var e=t;if(null===t.memoizedState)var n=!1;else n=!0,e=t.child,mi=le();if(X&&null!==e)t:if(t=e,X)for(e=t;;){if(5===e.tag){var r=e.stateNode;n?at(r):ut(e.stateNode,e.memoizedProps)}else if(6===e.tag)r=e.stateNode,n?st(r):lt(r,e.memoizedProps);else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(r=e.child.sibling).return=e,e=r;continue}if(null!==e.child){e.child.return=e,e=e.child;continue}}if(e===t)break t;for(;null===e.sibling;){if(null===e.return||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}}function Xr(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new Pr),e.forEach((function(e){var r=eo.bind(null,t,e);n.has(e)||(n.add(e),e.then(r,r))}))}}var Yr="function"==typeof WeakMap?WeakMap:Map;function Qr(t,e,n){(n=De(n,null)).tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gi||(gi=!0,yi=r),kr(t,e)},n}function Zr(t,e,n){(n=De(n,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=e.value;n.payload=function(){return kr(t,e),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===bi?bi=new Set([this]):bi.add(this),kr(t,e));var n=e.stack;this.componentDidCatch(e.value,{componentStack:null!==n?n:""})}),n}var Kr,$r=Math.ceil,Jr=u.ReactCurrentDispatcher,ti=u.ReactCurrentOwner,ei=0,ni=3,ri=4,ii=0,oi=null,ai=null,si=0,ui=ei,li=null,ci=1073741823,hi=1073741823,fi=null,pi=0,di=!1,mi=0,vi=null,gi=!1,yi=null,bi=null,_i=!1,xi=null,wi=90,Ei=null,Si=0,Ti=null,Ai=0;function Mi(){return 0!=(48&ii)?1073741821-(le()/10|0):0!==Ai?Ai:Ai=1073741821-(le()/10|0)}function Ci(t,e,n){if(0==(2&(e=e.mode)))return 1073741823;var r=ce();if(0==(4&e))return 99===r?1073741823:1073741822;if(0!=(16&ii))return si;if(null!==n)t=ge(t,0|n.timeoutMs||5e3,250);else switch(r){case 99:t=1073741823;break;case 98:t=ge(t,150,100);break;case 97:case 96:t=ge(t,5e3,250);break;case 95:t=2;break;default:throw Error(s(326))}return null!==oi&&t===si&&--t,t}function Oi(t,e){if(50<Si)throw Si=0,Ti=null,Error(s(185));if(null!==(t=Pi(t,e))){var n=ce();1073741823===e?0!=(8&ii)&&0==(48&ii)?Ri(t):(Ii(t),0===ii&&me()):Ii(t),0==(4&ii)||98!==n&&99!==n||(null===Ei?Ei=new Map([[t,e]]):(void 0===(n=Ei.get(t))||n>e)&&Ei.set(t,e))}}function Pi(t,e){t.expirationTime<e&&(t.expirationTime=e);var n=t.alternate;null!==n&&n.expirationTime<e&&(n.expirationTime=e);var r=t.return,i=null;if(null===r&&3===t.tag)i=t.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<e&&(r.childExpirationTime=e),null!==n&&n.childExpirationTime<e&&(n.childExpirationTime=e),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(oi===i&&(Bi(e),ui===ri&&vo(i,si)),go(i,e)),i}function ki(t){var e=t.lastExpiredTime;if(0!==e)return e;if(!mo(t,e=t.firstPendingTime))return e;var n=t.lastPingedTime;return 2>=(t=n>(t=t.nextKnownPendingLevel)?n:t)&&e!==t?0:t}function Ii(t){if(0!==t.lastExpiredTime)t.callbackExpirationTime=1073741823,t.callbackPriority=99,t.callbackNode=de(Ri.bind(null,t));else{var e=ki(t),n=t.callbackNode;if(0===e)null!==n&&(t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90);else{var r=Mi();if(r=1073741823===e?99:1===e||2===e?95:0>=(r=10*(1073741821-e)-10*(1073741821-r))?99:250>=r?98:5250>=r?97:95,null!==n){var i=t.callbackPriority;if(t.callbackExpirationTime===e&&i>=r)return;n!==ne&&Xt(n)}t.callbackExpirationTime=e,t.callbackPriority=r,e=1073741823===e?de(Ri.bind(null,t)):pe(r,Li.bind(null,t),{timeout:10*(1073741821-e)-le()}),t.callbackNode=e}}}function Li(t,e){if(Ai=0,e)return yo(t,e=Mi()),Ii(t),null;var n=ki(t);if(0!==n){if(e=t.callbackNode,0!=(48&ii))throw Error(s(327));if(Zi(),t===oi&&n===si||Fi(t,n),null!==ai){var r=ii;ii|=16;for(var i=Ui();;)try{Hi();break}catch(e){ji(t,e)}if(Ae(),ii=r,Jr.current=i,1===ui)throw e=li,Fi(t,n),vo(t,n),Ii(t),e;if(null===ai)switch(i=t.finishedWork=t.current.alternate,t.finishedExpirationTime=n,r=ui,oi=null,r){case ei:case 1:throw Error(s(345));case 2:yo(t,2<n?2:n);break;case ni:if(vo(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=qi(i)),1073741823===ci&&10<(i=mi+500-le())){if(di){var o=t.lastPingedTime;if(0===o||o>=n){t.lastPingedTime=n,Fi(t,n);break}}if(0!==(o=ki(t))&&o!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}t.timeoutHandle=H(Xi.bind(null,t),i);break}Xi(t);break;case ri:if(vo(t,n),n===(r=t.lastSuspendedTime)&&(t.nextKnownPendingLevel=qi(i)),di&&(0===(i=t.lastPingedTime)||i>=n)){t.lastPingedTime=n,Fi(t,n);break}if(0!==(i=ki(t))&&i!==n)break;if(0!==r&&r!==n){t.lastPingedTime=r;break}if(1073741823!==hi?r=10*(1073741821-hi)-le():1073741823===ci?r=0:(r=10*(1073741821-ci)-5e3,0>(r=(i=le())-r)&&(r=0),(n=10*(1073741821-n)-i)<(r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$r(r/1960))-r)&&(r=n)),10<r){t.timeoutHandle=H(Xi.bind(null,t),r);break}Xi(t);break;case 5:if(1073741823!==ci&&null!==fi){o=ci;var a=fi;if(0>=(r=0|a.busyMinDurationMs)?r=0:(i=0|a.busyDelayMs,r=(o=le()-(10*(1073741821-o)-(0|a.timeoutMs||5e3)))<=i?0:i+r-o),10<r){vo(t,n),t.timeoutHandle=H(Xi.bind(null,t),r);break}}Xi(t);break;default:throw Error(s(329))}if(Ii(t),t.callbackNode===e)return Li.bind(null,t)}}return null}function Ri(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,0!=(48&ii))throw Error(s(327));if(Zi(),t===oi&&e===si||Fi(t,e),null!==ai){var n=ii;ii|=16;for(var r=Ui();;)try{Vi();break}catch(e){ji(t,e)}if(Ae(),ii=n,Jr.current=r,1===ui)throw n=li,Fi(t,e),vo(t,e),Ii(t),n;if(null!==ai)throw Error(s(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,oi=null,Xi(t),Ii(t)}return null}function Di(t,e){var n=ii;ii|=1;try{return t(e)}finally{0===(ii=n)&&me()}}function Ni(t,e){if(0!=(48&ii))throw Error(s(187));var n=ii;ii|=1;try{return fe(99,t.bind(null,e))}finally{ii=n,me()}}function Fi(t,e){t.finishedWork=null,t.finishedExpirationTime=0;var n=t.timeoutHandle;if(n!==W&&(t.timeoutHandle=W,G(n)),null!==ai)for(n=ai.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&zt();break;case 3:sn(),It(Nt),It(Dt);break;case 5:ln(r);break;case 4:sn();break;case 13:case 19:It(cn);break;case 10:Ce(r)}n=n.return}oi=t,ai=uo(t.current,null),si=e,ui=ei,li=null,hi=ci=1073741823,fi=null,pi=0,di=!1}function ji(t,e){for(;;){try{if(Ae(),pn.current=Gn,bn)for(var n=vn.memoizedState;null!==n;){var r=n.queue;null!==r&&(r.pending=null),n=n.next}if(mn=0,yn=gn=vn=null,bn=!1,null===ai||null===ai.return)return ui=1,li=e,ai=null;t:{var i=t,o=ai.return,a=ai,s=e;if(e=si,a.effectTag|=2048,a.firstEffect=a.lastEffect=null,null!==s&&"object"==typeof s&&"function"==typeof s.then){var u=s;if(0==(2&a.mode)){var l=a.alternate;l?(a.updateQueue=l.updateQueue,a.memoizedState=l.memoizedState,a.expirationTime=l.expirationTime):(a.updateQueue=null,a.memoizedState=null)}var c=0!=(1&cn.current),h=o;do{var f;if(f=13===h.tag){var p=h.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var d=h.memoizedProps;f=void 0!==d.fallback&&(!0!==d.unstable_avoidThisFallback||!c)}}if(f){var m=h.updateQueue;if(null===m){var v=new Set;v.add(u),h.updateQueue=v}else m.add(u);if(0==(2&h.mode)){if(h.effectTag|=64,a.effectTag&=-2981,1===a.tag)if(null===a.alternate)a.tag=17;else{var g=De(1073741823,null);g.tag=2,Ne(a,g)}a.expirationTime=1073741823;break t}s=void 0,a=e;var y=i.pingCache;if(null===y?(y=i.pingCache=new Yr,s=new Set,y.set(u,s)):void 0===(s=y.get(u))&&(s=new Set,y.set(u,s)),!s.has(a)){s.add(a);var b=to.bind(null,i,u,a);u.then(b,b)}h.effectTag|=4096,h.expirationTime=e;break t}h=h.return}while(null!==h);s=Error((A(a.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+Ot(a))}5!==ui&&(ui=2),s=Or(s,a),h=o;do{switch(h.tag){case 3:u=s,h.effectTag|=4096,h.expirationTime=e,Fe(h,Qr(h,u,e));break t;case 1:u=s;var _=h.type,x=h.stateNode;if(0==(64&h.effectTag)&&("function"==typeof _.getDerivedStateFromError||null!==x&&"function"==typeof x.componentDidCatch&&(null===bi||!bi.has(x)))){h.effectTag|=4096,h.expirationTime=e,Fe(h,Zr(h,u,e));break t}}h=h.return}while(null!==h)}ai=Wi(ai)}catch(t){e=t;continue}break}}function Ui(){var t=Jr.current;return Jr.current=Gn,null===t?Gn:t}function zi(t,e){t<ci&&2<t&&(ci=t),null!==e&&t<hi&&2<t&&(hi=t,fi=e)}function Bi(t){t>pi&&(pi=t)}function Vi(){for(;null!==ai;)ai=Gi(ai)}function Hi(){for(;null!==ai&&!re();)ai=Gi(ai)}function Gi(t){var e=Kr(t.alternate,t,si);return t.memoizedProps=t.pendingProps,null===e&&(e=Wi(t)),ti.current=null,e}function Wi(t){ai=t;do{var e=ai.alternate;if(t=ai.return,0==(2048&ai.effectTag)){if(e=Mr(e,ai,si),1===si||1!==ai.childExpirationTime){for(var n=0,r=ai.child;null!==r;){var i=r.expirationTime,o=r.childExpirationTime;i>n&&(n=i),o>n&&(n=o),r=r.sibling}ai.childExpirationTime=n}if(null!==e)return e;null!==t&&0==(2048&t.effectTag)&&(null===t.firstEffect&&(t.firstEffect=ai.firstEffect),null!==ai.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=ai.firstEffect),t.lastEffect=ai.lastEffect),1<ai.effectTag&&(null!==t.lastEffect?t.lastEffect.nextEffect=ai:t.firstEffect=ai,t.lastEffect=ai))}else{if(null!==(e=Cr(ai)))return e.effectTag&=2047,e;null!==t&&(t.firstEffect=t.lastEffect=null,t.effectTag|=2048)}if(null!==(e=ai.sibling))return e;ai=t}while(null!==ai);return ui===ei&&(ui=5),null}function qi(t){var e=t.expirationTime;return e>(t=t.childExpirationTime)?e:t}function Xi(t){var e=ce();return fe(99,Yi.bind(null,t,e)),null}function Yi(t,e){do{Zi()}while(null!==xi);if(0!=(48&ii))throw Error(s(327));var n=t.finishedWork,r=t.finishedExpirationTime;if(null===n)return null;if(t.finishedWork=null,t.finishedExpirationTime=0,n===t.current)throw Error(s(177));t.callbackNode=null,t.callbackExpirationTime=0,t.callbackPriority=90,t.nextKnownPendingLevel=0;var i=qi(n);if(t.firstPendingTime=i,r<=t.lastSuspendedTime?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:r<=t.firstSuspendedTime&&(t.firstSuspendedTime=r-1),r<=t.lastPingedTime&&(t.lastPingedTime=0),r<=t.lastExpiredTime&&(t.lastExpiredTime=0),t===oi&&(ai=oi=null,si=0),1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){var o=ii;ii|=32,ti.current=null,R(t.containerInfo),vi=i;do{try{Qi()}catch(t){if(null===vi)throw Error(s(330));Ji(vi,t),vi=vi.nextEffect}}while(null!==vi);vi=i;do{try{for(var a=t,u=e;null!==vi;){var l=vi.effectTag;if(16&l&&X&&ot(vi.stateNode),128&l){var c=vi.alternate;if(null!==c){var h=c.ref;null!==h&&("function"==typeof h?h(null):h.current=null)}}switch(1038&l){case 2:Br(vi),vi.effectTag&=-3;break;case 6:Br(vi),vi.effectTag&=-3,Wr(vi.alternate,vi);break;case 1024:vi.effectTag&=-1025;break;case 1028:vi.effectTag&=-1025,Wr(vi.alternate,vi);break;case 4:Wr(vi.alternate,vi);break;case 8:var f=a,p=vi,d=u;X?Gr(f,p,d):jr(f,p,d),Ur(p)}vi=vi.nextEffect}}catch(t){if(null===vi)throw Error(s(330));Ji(vi,t),vi=vi.nextEffect}}while(null!==vi);D(t.containerInfo),t.current=n,vi=i;do{try{for(l=t;null!==vi;){var m=vi.effectTag;if(36&m&&Nr(l,vi.alternate,vi),128&m){c=void 0;var v=vi.ref;if(null!==v){var g=vi.stateNode;switch(vi.tag){case 5:c=k(g);break;default:c=g}"function"==typeof v?v(c):v.current=c}}vi=vi.nextEffect}}catch(t){if(null===vi)throw Error(s(330));Ji(vi,t),vi=vi.nextEffect}}while(null!==vi);vi=null,ie(),ii=o}else t.current=n;if(_i)_i=!1,xi=t,wi=e;else for(vi=i;null!==vi;)e=vi.nextEffect,vi.nextEffect=null,vi=e;if(0===(e=t.firstPendingTime)&&(bi=null),1073741823===e?t===Ti?Si++:(Si=0,Ti=t):Si=0,"function"==typeof ro&&ro(n.stateNode,r),Ii(t),gi)throw gi=!1,t=yi,yi=null,t;return 0!=(8&ii)||me(),null}function Qi(){for(;null!==vi;){var t=vi.effectTag;0!=(256&t)&&Lr(vi.alternate,vi),0==(512&t)||_i||(_i=!0,pe(97,(function(){return Zi(),null}))),vi=vi.nextEffect}}function Zi(){if(90!==wi){var t=97<wi?97:wi;return wi=90,fe(t,Ki)}}function Ki(){if(null===xi)return!1;var t=xi;if(xi=null,0!=(48&ii))throw Error(s(331));var e=ii;for(ii|=32,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:case 22:Rr(5,n),Dr(5,n)}}catch(e){if(null===t)throw Error(s(330));Ji(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return ii=e,me(),!0}function $i(t,e,n){Ne(t,e=Qr(t,e=Or(n,e),1073741823)),null!==(t=Pi(t,1073741823))&&Ii(t)}function Ji(t,e){if(3===t.tag)$i(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){$i(n,t,e);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===bi||!bi.has(r))){Ne(n,t=Zr(n,t=Or(e,t),1073741823)),null!==(n=Pi(n,1073741823))&&Ii(n);break}}n=n.return}}function to(t,e,n){var r=t.pingCache;null!==r&&r.delete(e),oi===t&&si===n?ui===ri||ui===ni&&1073741823===ci&&le()-mi<500?Fi(t,si):di=!0:mo(t,n)&&(0!==(e=t.lastPingedTime)&&e<n||(t.lastPingedTime=n,Ii(t)))}function eo(t,e){var n=t.stateNode;null!==n&&n.delete(e),0==(e=0)&&(e=Ci(e=Mi(),t,null)),null!==(t=Pi(t,e))&&Ii(t)}Kr=function(t,e,n){var r=e.expirationTime;if(null!==t){var i=e.pendingProps;if(t.memoizedProps!==i||Nt.current)ir=!0;else{if(r<n){switch(ir=!1,e.tag){case 3:pr(e),nr();break;case 5:if(un(e),4&e.mode&&1!==n&&B(e.type,i))return e.expirationTime=e.childExpirationTime=1,null;break;case 1:Ut(e.type)&&Ht(e);break;case 4:an(e,e.stateNode.containerInfo);break;case 10:Me(e,e.memoizedProps.value);break;case 13:if(null!==e.memoizedState)return 0!==(r=e.child.childExpirationTime)&&r>=n?br(t,e,n):(Lt(cn,1&cn.current),null!==(e=Er(t,e,n))?e.sibling:null);Lt(cn,1&cn.current);break;case 19:if(r=e.childExpirationTime>=n,0!=(64&t.effectTag)){if(r)return wr(t,e,n);e.effectTag|=64}if(null!==(i=e.memoizedState)&&(i.rendering=null,i.tail=null),Lt(cn,cn.current),!r)return null}return Er(t,e,n)}ir=!1}}else ir=!1;switch(e.expirationTime=0,e.tag){case 2:if(r=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,i=jt(e,Dt.current),Pe(e,n),i=wn(null,e,r,t,i,n),e.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)){var o=!0;Ht(e)}else o=!1;e.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Le(e);var a=r.getDerivedStateFromProps;"function"==typeof a&&Ve(e,r,a,t),i.updater=He,e.stateNode=i,i._reactInternalFiber=e,Xe(e,r,t,n),e=fr(null,e,r,!0,o,n)}else e.tag=0,or(null,e,i,n),e=e.child;return e;case 16:t:{if(i=e.elementType,null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),t=e.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}}(i),1!==i._status)throw i._result;switch(i=i._result,e.type=i,o=e.tag=function(t){if("function"==typeof t)return so(t)?1:0;if(null!=t){if((t=t.$$typeof)===y)return 11;if(t===x)return 14}return 2}(i),t=xe(i,t),o){case 0:e=cr(null,e,i,t,n);break t;case 1:e=hr(null,e,i,t,n);break t;case 11:e=ar(null,e,i,t,n);break t;case 14:e=sr(null,e,i,xe(i.type,t),r,n);break t}throw Error(s(306,i,""))}return e;case 0:return r=e.type,i=e.pendingProps,cr(t,e,r,i=e.elementType===r?i:xe(r,i),n);case 1:return r=e.type,i=e.pendingProps,hr(t,e,r,i=e.elementType===r?i:xe(r,i),n);case 3:if(pr(e),r=e.updateQueue,null===t||null===r)throw Error(s(282));if(r=e.pendingProps,i=null!==(i=e.memoizedState)?i.element:null,Re(t,e),je(e,r,null,n),(r=e.memoizedState.element)===i)nr(),e=Er(t,e,n);else{if((i=e.stateNode.hydrate)&&(Q?(Qn=wt(e.stateNode.containerInfo),Yn=e,i=Zn=!0):i=!1),i)for(n=Je(e,null,r,n),e.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else or(t,e,r,n),nr();e=e.child}return e;case 5:return un(e),null===t&&Jn(e),r=e.type,i=e.pendingProps,o=null!==t?t.memoizedProps:null,a=i.children,z(r,i)?a=null:null!==o&&z(r,o)&&(e.effectTag|=16),lr(t,e),4&e.mode&&1!==n&&B(r,i)?(e.expirationTime=e.childExpirationTime=1,e=null):(or(t,e,a,n),e=e.child),e;case 6:return null===t&&Jn(e),null;case 13:return br(t,e,n);case 4:return an(e,e.stateNode.containerInfo),r=e.pendingProps,null===t?e.child=$e(e,null,r,n):or(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,ar(t,e,r,i=e.elementType===r?i:xe(r,i),n);case 7:return or(t,e,e.pendingProps,n),e.child;case 8:case 12:return or(t,e,e.pendingProps.children,n),e.child;case 10:t:{if(r=e.type._context,i=e.pendingProps,a=e.memoizedProps,Me(e,o=i.value),null!==a){var u=a.value;if(0==(o=ye(u,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(u,o):1073741823))){if(a.children===i.children&&!Nt.current){e=Er(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){a=u.child;for(var c=l.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===u.tag&&((c=De(n,null)).tag=2,Ne(u,c)),u.expirationTime<n&&(u.expirationTime=n),null!==(c=u.alternate)&&c.expirationTime<n&&(c.expirationTime=n),Oe(u.return,n),l.expirationTime<n&&(l.expirationTime=n);break}c=c.next}}else a=10===u.tag&&u.type===e.type?null:u.child;if(null!==a)a.return=u;else for(a=u;null!==a;){if(a===e){a=null;break}if(null!==(u=a.sibling)){u.return=a.return,a=u;break}a=a.return}u=a}}or(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=(o=e.pendingProps).children,Pe(e,n),r=r(i=ke(i,o.unstable_observedBits)),e.effectTag|=1,or(t,e,r,n),e.child;case 14:return o=xe(i=e.type,e.pendingProps),sr(t,e,i,o=xe(i.type,o),r,n);case 15:return ur(t,e,e.type,e.pendingProps,r,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:xe(r,i),null!==t&&(t.alternate=null,e.alternate=null,e.effectTag|=2),e.tag=1,Ut(r)?(t=!0,Ht(e)):t=!1,Pe(e,n),We(e,r,i),Xe(e,r,i,n),fr(null,e,r,!0,t,n);case 19:return wr(t,e,n)}throw Error(s(156,e.tag))};var no={current:!1},ro=null,io=null;function oo(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function ao(t,e,n,r){return new oo(t,e,n,r)}function so(t){return!(!(t=t.prototype)||!t.isReactComponent)}function uo(t,e){var n=t.alternate;return null===n?((n=ao(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=t.childExpirationTime,n.expirationTime=t.expirationTime,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{expirationTime:e.expirationTime,firstContext:e.firstContext,responders:e.responders},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function lo(t,e,n,r,i,o){var a=2;if(r=t,"function"==typeof t)so(t)&&(a=1);else if("string"==typeof t)a=5;else t:switch(t){case f:return co(n.children,i,o,e);case g:a=8,i|=7;break;case p:a=8,i|=1;break;case d:return(t=ao(12,n,e,8|i)).elementType=d,t.type=d,t.expirationTime=o,t;case b:return(t=ao(13,n,e,i)).type=b,t.elementType=b,t.expirationTime=o,t;case _:return(t=ao(19,n,e,i)).elementType=_,t.expirationTime=o,t;default:if("object"==typeof t&&null!==t)switch(t.$$typeof){case m:a=10;break t;case v:a=9;break t;case y:a=11;break t;case x:a=14;break t;case w:a=16,r=null;break t;case E:a=22;break t}throw Error(s(130,null==t?t:typeof t,""))}return(e=ao(a,n,e,i)).elementType=t,e.type=r,e.expirationTime=o,e}function co(t,e,n,r){return(t=ao(7,t,r,e)).expirationTime=n,t}function ho(t,e,n){return(t=ao(6,t,null,e)).expirationTime=n,t}function fo(t,e,n){return(e=ao(4,null!==t.children?t.children:[],t.key,e)).expirationTime=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function po(t,e,n){this.tag=e,this.current=null,this.containerInfo=t,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=W,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function mo(t,e){var n=t.firstSuspendedTime;return t=t.lastSuspendedTime,0!==n&&n>=e&&t<=e}function vo(t,e){var n=t.firstSuspendedTime,r=t.lastSuspendedTime;n<e&&(t.firstSuspendedTime=e),(r>e||0===n)&&(t.lastSuspendedTime=e),e<=t.lastPingedTime&&(t.lastPingedTime=0),e<=t.lastExpiredTime&&(t.lastExpiredTime=0)}function go(t,e){e>t.firstPendingTime&&(t.firstPendingTime=e);var n=t.firstSuspendedTime;0!==n&&(e>=n?t.firstSuspendedTime=t.lastSuspendedTime=t.nextKnownPendingLevel=0:e>=t.lastSuspendedTime&&(t.lastSuspendedTime=e+1),e>t.nextKnownPendingLevel&&(t.nextKnownPendingLevel=e))}function yo(t,e){var n=t.lastExpiredTime;(0===n||n>e)&&(t.lastExpiredTime=e)}var bo=null;function _o(t){var e=t._reactInternalFiber;if(void 0===e){if("function"==typeof t.render)throw Error(s(188));throw Error(s(268,Object.keys(t)))}return null===(t=P(e))?null:t.stateNode}function xo(t,e){null!==(t=t.memoizedState)&&null!==t.dehydrated&&t.retryTime<e&&(t.retryTime=e)}function wo(t,e){xo(t,e),(t=t.alternate)&&xo(t,e)}var Eo=u.IsSomeRendererActing,So="function"==typeof a.unstable_flushAllWithoutAsserting,To=a.unstable_flushAllWithoutAsserting||function(){for(var t=!1;Zi();)t=!0;return t};function Ao(e){try{To(),function(e){if(null===bo)try{var n=("require"+Math.random()).slice(0,7);bo=(t&&t[n])("timers").setImmediate}catch(t){bo=function(t){var e=new MessageChannel;e.port1.onmessage=t,e.port2.postMessage(void 0)}}bo(e)}((function(){To()?Ao(e):e()}))}catch(t){e(t)}}var Mo=0,Co=!1,Oo={__proto__:null,createContainer:function(t,e,n){return t=new po(t,e,n),e=ao(3,null,null,2===e?7:1===e?3:0),t.current=e,e.stateNode=t,Le(e),t},updateContainer:function(t,e,n,r){var i=e.current,o=Mi(),a=ze.suspense;o=Ci(o,i,a);t:if(n){e:{if(M(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(s(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(Ut(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(s(171))}if(1===n.tag){var l=n.type;if(Ut(l)){n=Vt(n,l,u);break t}}n=u}else n=Rt;return null===e.context?e.context=n:e.pendingContext=n,(e=De(o,a)).payload={element:t},null!==(r=void 0===r?null:r)&&(e.callback=r),Ne(i,e),Oi(i,o),o},batchedEventUpdates:function(t,e){var n=ii;ii|=2;try{return t(e)}finally{0===(ii=n)&&me()}},batchedUpdates:Di,unbatchedUpdates:function(t,e){var n=ii;ii&=-2,ii|=8;try{return t(e)}finally{0===(ii=n)&&me()}},deferredUpdates:function(t){return fe(97,t)},syncUpdates:function(t,e,n,r){return fe(99,t.bind(null,e,n,r))},discreteUpdates:function(t,e,n,r,i){var o=ii;ii|=4;try{return fe(98,t.bind(null,e,n,r,i))}finally{0===(ii=o)&&me()}},flushDiscreteUpdates:function(){0==(49&ii)&&(function(){if(null!==Ei){var t=Ei;Ei=null,t.forEach((function(t,e){yo(e,t),Ii(e)})),me()}}(),Zi())},flushControlled:function(t){var e=ii;ii|=1;try{fe(99,t)}finally{0===(ii=e)&&me()}},flushSync:Ni,flushPassiveEffects:Zi,IsThisRendererActing:no,getPublicRootInstance:function(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:return k(t.child.stateNode);default:return t.child.stateNode}},attemptSynchronousHydration:function(t){switch(t.tag){case 3:var e=t.stateNode;e.hydrate&&function(t,e){yo(t,e),Ii(t),0==(48&ii)&&me()}(e,e.firstPendingTime);break;case 13:Ni((function(){return Oi(t,1073741823)})),e=ge(Mi(),150,100),wo(t,e)}},attemptUserBlockingHydration:function(t){if(13===t.tag){var e=ge(Mi(),150,100);Oi(t,e),wo(t,e)}},attemptContinuousHydration:function(t){13===t.tag&&(Oi(t,3),wo(t,3))},attemptHydrationAtCurrentPriority:function(t){if(13===t.tag){var e=Mi();Oi(t,e=Ci(e,t,null)),wo(t,e)}},findHostInstance:_o,findHostInstanceWithWarning:function(t){return _o(t)},findHostInstanceWithNoPortals:function(t){return null===(t=function(t){if(!(t=O(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child&&4!==e.tag)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}(t))?null:20===t.tag?t.stateNode.instance:t.stateNode},shouldSuspend:function(){return!1},injectIntoDevTools:function(t){var e=t.findFiberByHostInstance;return function(t){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var e=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(e.isDisabled||!e.supportsFiber)return!0;try{var n=e.inject(t);ro=function(t){try{e.onCommitFiberRoot(n,t,void 0,64==(64&t.current.effectTag))}catch(t){}},io=function(t){try{e.onCommitFiberUnmount(n,t)}catch(t){}}}catch(t){}return!0}(i({},t,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:u.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=P(t))?null:t.stateNode},findFiberByHostInstance:function(t){return e?e(t):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))},act:function(t){function e(){Mo--,Eo.current=n,no.current=r}!1===Co&&(Co=!0,console.error("act(...) is not supported in production builds of React, and might not behave as expected.")),Mo++;var n=Eo.current,r=no.current;Eo.current=!0,no.current=!0;try{var i=Di(t)}catch(t){throw e(),t}if(null!==i&&"object"==typeof i&&"function"==typeof i.then)return{then:function(t,r){i.then((function(){1<Mo||!0===So&&!0===n?(e(),t()):Ao((function(n){e(),n?r(n):t()}))}),(function(t){e(),r(t)}))}};try{1!==Mo||!1!==So&&!1!==n||To(),e()}catch(t){throw e(),t}return{then:function(t){t()}}}},Po=Oo&&Oo.default||Oo;t.exports=Po.default||Po;var ko=t.exports;return t.exports=e,ko}},5861:(t,e,n)=>{"use strict";t.exports=n(5056)},5243:t=>{t.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},4039:(t,e,n)=>{var r=n(5243);t.exports=function t(e,n,i){return r(n)||(i=n||i,n=[]),i=i||{},e instanceof RegExp?function(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return c(t,e)}(e,n):r(e)?function(e,n,r){for(var i=[],o=0;o<e.length;o++)i.push(t(e[o],n,r).source);return c(new RegExp("(?:"+i.join("|")+")",h(r)),n)}(e,n,i):function(t,e,n){return f(o(t,n),e,n)}(e,n,i)},t.exports.parse=o,t.exports.compile=function(t,e){return s(o(t,e),e)},t.exports.tokensToFunction=s,t.exports.tokensToRegExp=f;var i=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function o(t,e){for(var n,r=[],o=0,a=0,s="",c=e&&e.delimiter||"/";null!=(n=i.exec(t));){var h=n[0],f=n[1],p=n.index;if(s+=t.slice(a,p),a=p+h.length,f)s+=f[1];else{var d=t[a],m=n[2],v=n[3],g=n[4],y=n[5],b=n[6],_=n[7];s&&(r.push(s),s="");var x=null!=m&&null!=d&&d!==m,w="+"===b||"*"===b,E="?"===b||"*"===b,S=n[2]||c,T=g||y;r.push({name:v||o++,prefix:m||"",delimiter:S,optional:E,repeat:w,partial:x,asterisk:!!_,pattern:T?l(T):_?".*":"[^"+u(S)+"]+?"})}}return a<t.length&&(s+=t.substr(a)),s&&r.push(s),r}function a(t){return encodeURI(t).replace(/[\/?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function s(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",h(e)));return function(e,i){for(var o="",s=e||{},u=(i||{}).pretty?a:encodeURIComponent,l=0;l<t.length;l++){var c=t[l];if("string"!=typeof c){var h,f=s[c.name];if(null==f){if(c.optional){c.partial&&(o+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(r(f)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(f)+"`");if(0===f.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var p=0;p<f.length;p++){if(h=u(f[p]),!n[l].test(h))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(h)+"`");o+=(0===p?c.prefix:c.delimiter)+h}}else{if(h=c.asterisk?encodeURI(f).replace(/[?#]/g,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})):u(f),!n[l].test(h))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+h+'"');o+=c.prefix+h}}else o+=c}return o}}function u(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function l(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function c(t,e){return t.keys=e,t}function h(t){return t&&t.sensitive?"":"i"}function f(t,e,n){r(e)||(n=e||n,e=[]);for(var i=(n=n||{}).strict,o=!1!==n.end,a="",s=0;s<t.length;s++){var l=t[s];if("string"==typeof l)a+=u(l);else{var f=u(l.prefix),p="(?:"+l.pattern+")";e.push(l),l.repeat&&(p+="(?:"+f+p+")*"),a+=p=l.optional?l.partial?f+"("+p+")?":"(?:"+f+"("+p+"))?":f+"("+p+")"}}var d=u(n.delimiter||"/"),m=a.slice(-d.length)===d;return i||(a=(m?a.slice(0,-d.length):a)+"(?:"+d+"(?=$))?"),a+=o?"$":i&&m?"":"(?="+d+"|$)",c(new RegExp("^"+a,h(n)),e)}},5901:(t,e,n)=>{"use strict";n.d(e,{Z:()=>l});var r=n(7378),i=n(6415);function o({debounce:t,scroll:e,polyfill:n}={debounce:0,scroll:!1}){const o=n||("undefined"==typeof window?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,l]=(0,r.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),c=(0,r.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s}),h=t?"number"==typeof t?t:t.scroll:null,f=t?"number"==typeof t?t:t.resize:null,p=(0,r.useRef)(!1);(0,r.useEffect)((()=>(p.current=!0,()=>{p.current=!1})));const[d,m,v]=(0,r.useMemo)((()=>{const t=()=>{if(!c.current.element)return;const{left:t,top:e,width:n,height:r,bottom:i,right:o,x:a,y:s}=c.current.element.getBoundingClientRect(),h={left:t,top:e,width:n,height:r,bottom:i,right:o,x:a,y:s};Object.freeze(h),p.current&&!u(c.current.lastBounds,h)&&l(c.current.lastBounds=h)};return[t,f?(0,i.debounce)(t,f):t,h?(0,i.debounce)(t,h):t]}),[l,h,f]);function g(){c.current.scrollContainers&&(c.current.scrollContainers.forEach((t=>t.removeEventListener("scroll",v,!0))),c.current.scrollContainers=null),c.current.resizeObserver&&(c.current.resizeObserver.disconnect(),c.current.resizeObserver=null)}function y(){c.current.element&&(c.current.resizeObserver=new o(v),c.current.resizeObserver.observe(c.current.element),e&&c.current.scrollContainers&&c.current.scrollContainers.forEach((t=>t.addEventListener("scroll",v,{capture:!0,passive:!0}))))}var b,_,x;return b=v,_=Boolean(e),(0,r.useEffect)((()=>{if(_){const t=b;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[b,_]),x=m,(0,r.useEffect)((()=>{const t=x;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}}),[x]),(0,r.useEffect)((()=>{g(),y()}),[e,v,m]),(0,r.useEffect)((()=>g),[]),[t=>{t&&t!==c.current.element&&(g(),c.current.element=t,c.current.scrollContainers=a(t),y())},s,d]}function a(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some((t=>"auto"===t||"scroll"===t))&&e.push(t),[...e,...a(t.parentElement)]}t=n.hmd(t);const s=["x","y","top","bottom","left","right","width","height"],u=(t,e)=>s.every((n=>t[n]===e[n]));Object.getOwnPropertyDescriptor&&Object.getOwnPropertyDescriptor(t,"exports").writable&&(t.exports=o);const l=o},1535:(t,e,n)=>{"use strict";var r=n(2525),i="function"==typeof Symbol&&Symbol.for,o=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,u=i?Symbol.for("react.strict_mode"):60108,l=i?Symbol.for("react.profiler"):60114,c=i?Symbol.for("react.provider"):60109,h=i?Symbol.for("react.context"):60110,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,d=i?Symbol.for("react.memo"):60115,m=i?Symbol.for("react.lazy"):60116,v="function"==typeof Symbol&&Symbol.iterator;function g(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function _(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}function x(){}function w(t,e,n){this.props=t,this.context=e,this.refs=b,this.updater=n||y}_.prototype.isReactComponent={},_.prototype.setState=function(t,e){if("object"!=typeof t&&"function"!=typeof t&&null!=t)throw Error(g(85));this.updater.enqueueSetState(this,t,e,"setState")},_.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},x.prototype=_.prototype;var E=w.prototype=new x;E.constructor=w,r(E,_.prototype),E.isPureReactComponent=!0;var S={current:null},T=Object.prototype.hasOwnProperty,A={key:!0,ref:!0,__self:!0,__source:!0};function M(t,e,n){var r,i={},a=null,s=null;if(null!=e)for(r in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)T.call(e,r)&&!A.hasOwnProperty(r)&&(i[r]=e[r]);var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in u=t.defaultProps)void 0===i[r]&&(i[r]=u[r]);return{$$typeof:o,type:t,key:a,ref:s,props:i,_owner:S.current}}function C(t){return"object"==typeof t&&null!==t&&t.$$typeof===o}var O=/\/+/g,P=[];function k(t,e,n,r){if(P.length){var i=P.pop();return i.result=t,i.keyPrefix=e,i.func=n,i.context=r,i.count=0,i}return{result:t,keyPrefix:e,func:n,context:r,count:0}}function I(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>P.length&&P.push(t)}function L(t,e,n,r){var i=typeof t;"undefined"!==i&&"boolean"!==i||(t=null);var s=!1;if(null===t)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case o:case a:s=!0}}if(s)return n(r,t,""===e?"."+D(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var u=0;u<t.length;u++){var l=e+D(i=t[u],u);s+=L(i,l,n,r)}else if("function"==typeof(l=null===t||"object"!=typeof t?null:"function"==typeof(l=v&&t[v]||t["@@iterator"])?l:null))for(t=l.call(t),u=0;!(i=t.next()).done;)s+=L(i=i.value,l=e+D(i,u++),n,r);else if("object"===i)throw n=""+t,Error(g(31,"[object Object]"===n?"object with keys {"+Object.keys(t).join(", ")+"}":n,""));return s}function R(t,e,n){return null==t?0:L(t,"",e,n)}function D(t,e){return"object"==typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,(function(t){return e[t]}))}(t.key):e.toString(36)}function N(t,e){t.func.call(t.context,e,t.count++)}function F(t,e,n){var r=t.result,i=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?j(t,r,n,(function(t){return t})):null!=t&&(C(t)&&(t=function(t,e){return{$$typeof:o,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(t,i+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(O,"$&/")+"/")+n)),r.push(t))}function j(t,e,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),R(t,F,e=k(e,o,r,i)),I(e)}var U={current:null};function z(){var t=U.current;if(null===t)throw Error(g(321));return t}var B={ReactCurrentDispatcher:U,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:S,IsSomeRendererActing:{current:!1},assign:r};e.Children={map:function(t,e,n){if(null==t)return t;var r=[];return j(t,r,null,e,n),r},forEach:function(t,e,n){if(null==t)return t;R(t,N,e=k(null,null,e,n)),I(e)},count:function(t){return R(t,(function(){return null}),null)},toArray:function(t){var e=[];return j(t,e,null,(function(t){return t})),e},only:function(t){if(!C(t))throw Error(g(143));return t}},e.Component=_,e.Fragment=s,e.Profiler=l,e.PureComponent=w,e.StrictMode=u,e.Suspense=p,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,e.cloneElement=function(t,e,n){if(null==t)throw Error(g(267,t));var i=r({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=S.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)T.call(e,c)&&!A.hasOwnProperty(c)&&(i[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)i.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];i.children=l}return{$$typeof:o,type:t.type,key:a,ref:s,props:i,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:h,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:c,_context:t},t.Consumer=t},e.createElement=M,e.createFactory=function(t){var e=M.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:f,render:t}},e.isValidElement=C,e.lazy=function(t){return{$$typeof:m,_ctor:t,_status:-1,_result:null}},e.memo=function(t,e){return{$$typeof:d,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return z().useCallback(t,e)},e.useContext=function(t,e){return z().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return z().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return z().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return z().useLayoutEffect(t,e)},e.useMemo=function(t,e){return z().useMemo(t,e)},e.useReducer=function(t,e,n){return z().useReducer(t,e,n)},e.useRef=function(t){return z().useRef(t)},e.useState=function(t){return z().useState(t)},e.version="16.14.0"},7378:(t,e,n)=>{"use strict";t.exports=n(1535)},8460:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.autoprefix=void 0;var r,i=(r=n(4916))&&r.__esModule?r:{default:r},o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a={borderRadius:function(t){return{msBorderRadius:t,MozBorderRadius:t,OBorderRadius:t,WebkitBorderRadius:t,borderRadius:t}},boxShadow:function(t){return{msBoxShadow:t,MozBoxShadow:t,OBoxShadow:t,WebkitBoxShadow:t,boxShadow:t}},userSelect:function(t){return{WebkitTouchCallout:t,KhtmlUserSelect:t,MozUserSelect:t,msUserSelect:t,WebkitUserSelect:t,userSelect:t}},flex:function(t){return{WebkitBoxFlex:t,MozBoxFlex:t,WebkitFlex:t,msFlex:t,flex:t}},flexBasis:function(t){return{WebkitFlexBasis:t,flexBasis:t}},justifyContent:function(t){return{WebkitJustifyContent:t,justifyContent:t}},transition:function(t){return{msTransition:t,MozTransition:t,OTransition:t,WebkitTransition:t,transition:t}},transform:function(t){return{msTransform:t,MozTransform:t,OTransform:t,WebkitTransform:t,transform:t}},absolute:function(t){var e=t&&t.split(" ");return{position:"absolute",top:e&&e[0],right:e&&e[1],bottom:e&&e[2],left:e&&e[3]}},extend:function(t,e){return e[t]||{extend:t}}},s=e.autoprefix=function(t){var e={};return(0,i.default)(t,(function(t,n){var r={};(0,i.default)(t,(function(t,e){var n=a[e];n?r=o({},r,n(t)):r[e]=t})),e[n]=r})),e};e.default=s},6987:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.active=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=(r=n(7378))&&r.__esModule?r:{default:r};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=e.active=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,u,l;a(this,r);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return u=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(e,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(t,i({},l.props,l.state)))},s(l,u)}return u(r,n),r}(o.default.Component)};e.default=l},6279:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hover=void 0;var r,i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=(r=n(7378))&&r.__esModule?r:{default:r};function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var l=e.hover=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,u,l;a(this,r);for(var c=arguments.length,h=Array(c),f=0;f<c;f++)h[f]=arguments[f];return u=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(h))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(e,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(t,i({},l.props,l.state)))},s(l,u)}return u(r,n),r}(o.default.Component)};e.default=l},7502:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.flattenNames=void 0;var r=s(n(7206)),i=s(n(4916)),o=s(n(861)),a=s(n(5807));function s(t){return t&&t.__esModule?t:{default:t}}var u=e.flattenNames=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(e,(function(e){Array.isArray(e)?t(e).map((function(t){return n.push(t)})):(0,o.default)(e)?(0,i.default)(e,(function(t,e){!0===t&&n.push(e),n.push(e+"-"+t)})):(0,r.default)(e)&&n.push(e)})),n};e.default=u},129:(t,e,n)=>{"use strict";e.tz=void 0;var r=l(n(7502)),i=l(n(8778)),o=l(n(8460)),a=l(n(6279)),s=l(n(6987)),u=l(n(1602));function l(t){return t&&t.__esModule?t:{default:t}}a.default,e.tz=a.default,s.default,u.default;e.ZP=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),u=(0,i.default)(t,s);return(0,o.default)(u)}},1602:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n={},r=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[t]=e};return 0===t&&r("first-child"),t===e-1&&r("last-child"),(0===t||t%2==0)&&r("even"),1===Math.abs(t%2)&&r("odd"),r("nth-child",t),n}},8778:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeClasses=void 0;var r=a(n(4916)),i=a(n(454)),o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function a(t){return t&&t.__esModule?t:{default:t}}var s=e.mergeClasses=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=t.default&&(0,i.default)(t.default)||{};return e.map((function(e){var i=t[e];return i&&(0,r.default)(i,(function(t,e){n[e]||(n[e]={}),n[e]=o({},n[e],i[e])})),e})),n};e.default=s},3431:(t,e)=>{"use strict";e.Z=void 0;e.Z=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}),(function(t){return t}))}},6248:t=>{var e=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function l(t,e,n,r){var i=e&&e.prototype instanceof v?e:v,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(t,e,n){var r=h;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===d){if("throw"===i)throw o;return P()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=d,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var u=c(t,e,n);if("normal"===u.type){if(r=n.done?d:f,u.arg===m)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r=d,n.method="throw",n.arg=u.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var h="suspendedStart",f="suspendedYield",p="executing",d="completed",m={};function v(){}function g(){}function y(){}var b={};b[o]=function(){return this};var _=Object.getPrototypeOf,x=_&&_(_(O([])));x&&x!==n&&r.call(x,o)&&(b=x);var w=y.prototype=v.prototype=Object.create(b);function E(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(i,o,a,s){var u=c(t[i],t,o);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(h).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(u.arg)}var i;this._invoke=function(t,r){function o(){return new e((function(e,i){n(t,r,e,i)}))}return i=i?i.then(o,o):o()}}function T(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,T(t,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var i=c(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,m;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function M(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function C(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function O(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:P}}function P(){return{value:e,done:!0}}return g.prototype=w.constructor=y,y.constructor=g,g.displayName=u(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===g||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},E(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new S(l(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},E(w),u(w,s,"Generator"),w[o]=function(){return this},w.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=O,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var u=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(u&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),M(n),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;M(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:O(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}},3323:(t,e)=>{"use strict";var n,r,i,o,a;if("undefined"==typeof window||"function"!=typeof MessageChannel){var s=null,u=null,l=function(){if(null!==s)try{var t=e.unstable_now();s(!0,t),s=null}catch(t){throw setTimeout(l,0),t}},c=Date.now();e.unstable_now=function(){return Date.now()-c},n=function(t){null!==s?setTimeout(n,0,t):(s=t,setTimeout(l,0))},r=function(t,e){u=setTimeout(t,e)},i=function(){clearTimeout(u)},o=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var h=window.performance,f=window.Date,p=window.setTimeout,d=window.clearTimeout;if("undefined"!=typeof console){var m=window.cancelAnimationFrame;"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")}if("object"==typeof h&&"function"==typeof h.now)e.unstable_now=function(){return h.now()};else{var v=f.now();e.unstable_now=function(){return f.now()-v}}var g=!1,y=null,b=-1,_=5,x=0;o=function(){return e.unstable_now()>=x},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):_=0<t?Math.floor(1e3/t):5};var w=new MessageChannel,E=w.port2;w.port1.onmessage=function(){if(null!==y){var t=e.unstable_now();x=t+_;try{y(!0,t)?E.postMessage(null):(g=!1,y=null)}catch(t){throw E.postMessage(null),t}}else g=!1},n=function(t){y=t,g||(g=!0,E.postMessage(null))},r=function(t,n){b=p((function(){t(e.unstable_now())}),n)},i=function(){d(b),b=-1}}function S(t,e){var n=t.length;t.push(e);t:for(;;){var r=n-1>>>1,i=t[r];if(!(void 0!==i&&0<M(i,e)))break t;t[r]=e,t[n]=i,n=r}}function T(t){return void 0===(t=t[0])?null:t}function A(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var r=0,i=t.length;r<i;){var o=2*(r+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>M(a,n))void 0!==u&&0>M(u,a)?(t[r]=u,t[s]=n,r=s):(t[r]=a,t[o]=n,r=o);else{if(!(void 0!==u&&0>M(u,n)))break t;t[r]=u,t[s]=n,r=s}}}return e}return null}function M(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],O=[],P=1,k=null,I=3,L=!1,R=!1,D=!1;function N(t){for(var e=T(O);null!==e;){if(null===e.callback)A(O);else{if(!(e.startTime<=t))break;A(O),e.sortIndex=e.expirationTime,S(C,e)}e=T(O)}}function F(t){if(D=!1,N(t),!R)if(null!==T(C))R=!0,n(j);else{var e=T(O);null!==e&&r(F,e.startTime-t)}}function j(t,n){R=!1,D&&(D=!1,i()),L=!0;var a=I;try{for(N(n),k=T(C);null!==k&&(!(k.expirationTime>n)||t&&!o());){var s=k.callback;if(null!==s){k.callback=null,I=k.priorityLevel;var u=s(k.expirationTime<=n);n=e.unstable_now(),"function"==typeof u?k.callback=u:k===T(C)&&A(C),N(n)}else A(C);k=T(C)}if(null!==k)var l=!0;else{var c=T(O);null!==c&&r(F,c.startTime-n),l=!1}return l}finally{k=null,I=a,L=!1}}function U(t){switch(t){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var z=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){R||L||(R=!0,n(j))},e.unstable_getCurrentPriorityLevel=function(){return I},e.unstable_getFirstCallbackNode=function(){return T(C)},e.unstable_next=function(t){switch(I){case 1:case 2:case 3:var e=3;break;default:e=I}var n=I;I=e;try{return t()}finally{I=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=z,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=I;I=t;try{return e()}finally{I=n}},e.unstable_scheduleCallback=function(t,o,a){var s=e.unstable_now();if("object"==typeof a&&null!==a){var u=a.delay;u="number"==typeof u&&0<u?s+u:s,a="number"==typeof a.timeout?a.timeout:U(t)}else a=U(t),u=s;return t={id:P++,callback:o,priorityLevel:t,startTime:u,expirationTime:a=u+a,sortIndex:-1},u>s?(t.sortIndex=u,S(O,t),null===T(C)&&t===T(O)&&(D?i():D=!0,r(F,u-s))):(t.sortIndex=a,S(C,t),R||L||(R=!0,n(j))),t},e.unstable_shouldYield=function(){var t=e.unstable_now();N(t);var n=T(C);return n!==k&&null!==k&&null!==n&&null!==n.callback&&n.startTime<=t&&n.expirationTime<k.expirationTime||o()},e.unstable_wrapCallback=function(t){var e=I;return function(){var n=I;I=e;try{return t.apply(this,arguments)}finally{I=n}}}},1102:(t,e,n)=>{"use strict";t.exports=n(3323)},7443:function(t){var e;t.exports=((e=function(){function t(t){return i.appendChild(t.dom),t}function n(t){for(var e=0;e<i.children.length;e++)i.children[e].style.display=e===t?"block":"none";r=t}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,u=t(new e.Panel("FPS","#0ff","#002")),l=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var c=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var t=(performance||Date).now();if(l.update(t-o,200),t>a+1e3&&(u.update(1e3*s/(t-a),100),a=t,s=0,c)){var e=performance.memory;c.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:i,setMode:n}}).Panel=function(t,e,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,u=48*a,l=3*a,c=2*a,h=3*a,f=15*a,p=74*a,d=30*a,m=document.createElement("canvas");m.width=s,m.height=u,m.style.cssText="width:80px;height:48px";var v=m.getContext("2d");return v.font="bold "+9*a+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=n,v.fillRect(0,0,s,u),v.fillStyle=e,v.fillText(t,l,c),v.fillRect(h,f,p,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h,f,p,d),{dom:m,update:function(u,g){r=Math.min(r,u),i=Math.max(i,u),v.fillStyle=n,v.globalAlpha=1,v.fillRect(0,0,s,f),v.fillStyle=e,v.fillText(o(u)+" "+t+" ("+o(r)+"-"+o(i)+")",l,c),v.drawImage(m,h+a,f,p-a,d,h,f,p-a,d),v.fillRect(h+p-a,f,a,d),v.fillStyle=n,v.globalAlpha=.9,v.fillRect(h+p-a,f,a,o((1-u/g)*d))}}},e)},6874:(t,e,n)=>{var r=n(8161);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},5584:(t,e,n)=>{var r=n(8739);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},476:(t,e,n)=>{var r=n(2318);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},1687:(t,e,n)=>{var r=n(2965);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},3277:(t,e,n)=>{var r=n(5973);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},7745:(t,e,n)=>{var r=n(3801);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},6643:(t,e,n)=>{var r=n(1590);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},3306:(t,e,n)=>{var r=n(3588);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},5916:(t,e,n)=>{var r=n(3099);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},3741:(t,e,n)=>{var r=n(4464);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},7335:(t,e,n)=>{var r=n(4042);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},1290:(t,e,n)=>{var r=n(7391);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},4360:(t,e,n)=>{var r=n(7074);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},1065:(t,e,n)=>{var r=n(646);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},8586:(t,e,n)=>{var r=n(8904);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},1635:(t,e,n)=>{var r=n(1383);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},7620:(t,e,n)=>{var r=n(2319);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},6225:(t,e,n)=>{var r=n(4183);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},4348:(t,e,n)=>{var r=n(6224);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},2573:(t,e,n)=>{var r=n(6263);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},5906:(t,e,n)=>{var r=n(8512);"string"==typeof r&&(r=[[t.id,r,""]]);n(4688)(r,{hmr:!0,transform:void 0}),r.locals&&(t.exports=r.locals)},4688:(t,e,n)=>{var r,i,o={},a=(r=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=r.apply(this,arguments)),i}),s=function(t){var e={};return function(n){if(void 0===e[n]){var r=t.call(this,n);if(r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}e[n]=r}return e[n]}}((function(t){return document.querySelector(t)})),u=null,l=0,c=[],h=n(6408);function f(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=o[r.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](r.parts[a]);for(;a<r.parts.length;a++)i.parts.push(y(r.parts[a],e))}else{var s=[];for(a=0;a<r.parts.length;a++)s.push(y(r.parts[a],e));o[r.id]={id:r.id,refs:1,parts:s}}}}function p(t,e){for(var n=[],r={},i=0;i<t.length;i++){var o=t[i],a=e.base?o[0]+e.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};r[a]?r[a].parts.push(s):n.push(r[a]={id:a,parts:[s]})}return n}function d(t,e){var n=s(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var r=c[c.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function m(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function v(t){var e=document.createElement("style");return t.attrs.type="text/css",g(e,t.attrs),d(t,e),e}function g(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function y(t,e){var n,r,i,o;if(e.transform&&t.css){if(!(o=e.transform(t.css)))return function(){};t.css=o}if(e.singleton){var a=l++;n=u||(u=v(e)),r=x.bind(null,n,a,!1),i=x.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",g(e,t.attrs),d(t,e),e}(e),r=E.bind(null,n,e),i=function(){m(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),r=w.bind(null,n),i=function(){m(n)});return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=p(t,e);return f(n,e),function(t){for(var r=[],i=0;i<n.length;i++){var a=n[i];(s=o[a.id]).refs--,r.push(s)}for(t&&f(p(t,e),e),i=0;i<r.length;i++){var s;if(0===(s=r[i]).refs){for(var u=0;u<s.parts.length;u++)s.parts[u]();delete o[s.id]}}}};var b,_=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function x(t,e,n,r){var i=n?"":r.css;if(t.styleSheet)t.styleSheet.cssText=_(e,i);else{var o=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function w(t,e){var n=e.css,r=e.media;if(r&&t.setAttribute("media",r),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function E(t,e,n){var r=n.css,i=n.sourceMap,o=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||o)&&(r=h(r)),i&&(r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([r],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}},6408:t=>{t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,r=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,o=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(o)?t:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?n+o:r+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},5081:(t,e,n)=>{"use strict";n.d(e,{Z:()=>r}),t=n.hmd(t);const r=function(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}("undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n.g?n.g:t)},4412:(t,e,n)=>{"use strict";n.r(e),n.d(e,{ACESFilmicToneMapping:()=>ot,AddEquation:()=>M,AddOperation:()=>J,AdditiveAnimationBlendMode:()=>Qe,AdditiveBlending:()=>E,AlphaFormat:()=>Ut,AlwaysDepth:()=>G,AlwaysStencilFunc:()=>Mn,AmbientLight:()=>xh,AmbientLightProbe:()=>Gh,AnimationClip:()=>Cc,AnimationLoader:()=>Nc,AnimationMixer:()=>wf,AnimationObjectGroup:()=>_f,AnimationUtils:()=>mc,ArcCurve:()=>Gc,ArrayCamera:()=>ks,ArrowHelper:()=>hp,Audio:()=>tf,AudioAnalyser:()=>sf,AudioContext:()=>Bh,AudioListener:()=>Jh,AudioLoader:()=>Vh,AxesHelper:()=>fp,AxisHelper:()=>id,BackSide:()=>g,BasicDepthPacking:()=>un,BasicShadowMap:()=>f,BinaryTextureLoader:()=>ld,Bone:()=>mu,BooleanKeyframeTrack:()=>xc,BoundingBoxHelper:()=>od,Box2:()=>kf,Box3:()=>zr,Box3Helper:()=>ap,BoxBufferGeometry:()=>yo,BoxGeometry:()=>go,BoxHelper:()=>op,BufferAttribute:()=>Ti,BufferGeometry:()=>Gi,BufferGeometryLoader:()=>Oh,ByteType:()=>Ct,Cache:()=>Pc,Camera:()=>Eo,CameraHelper:()=>np,CanvasRenderer:()=>fd,CanvasTexture:()=>Bu,CatmullRomCurve3:()=>Zc,CineonToneMapping:()=>it,CircleBufferGeometry:()=>nc,CircleGeometry:()=>ec,ClampToEdgeWrapping:()=>mt,Clock:()=>Yh,ClosedSplineCurve3:()=>ed,Color:()=>vi,ColorKeyframeTrack:()=>wc,CompressedTexture:()=>zu,CompressedTextureLoader:()=>Fc,ConeBufferGeometry:()=>tc,ConeGeometry:()=>Jl,CubeCamera:()=>Ao,CubeGeometry:()=>go,CubeReflectionMapping:()=>st,CubeRefractionMapping:()=>ut,CubeTexture:()=>Zo,CubeTextureLoader:()=>zc,CubeUVReflectionMapping:()=>ft,CubeUVRefractionMapping:()=>pt,CubicBezierCurve:()=>th,CubicBezierCurve3:()=>eh,CubicInterpolant:()=>gc,CullFaceBack:()=>s,CullFaceFront:()=>u,CullFaceFrontBack:()=>l,CullFaceNone:()=>a,Curve:()=>Vc,CurvePath:()=>uh,CustomBlending:()=>A,CylinderBufferGeometry:()=>$l,CylinderGeometry:()=>Kl,Cylindrical:()=>Of,DataTexture:()=>Co,DataTexture2DArray:()=>Ko,DataTexture3D:()=>$o,DataTextureLoader:()=>jc,DecrementStencilOp:()=>vn,DecrementWrapStencilOp:()=>yn,DefaultLoadingManager:()=>Ic,DepthFormat:()=>Wt,DepthStencilFormat:()=>qt,DepthTexture:()=>Vu,DirectionalLight:()=>_h,DirectionalLightHelper:()=>Jf,DirectionalLightShadow:()=>bh,DiscreteInterpolant:()=>bc,DodecahedronBufferGeometry:()=>el,DodecahedronGeometry:()=>tl,DoubleSide:()=>y,DstAlphaFactor:()=>j,DstColorFactor:()=>z,DynamicBufferAttribute:()=>Wp,DynamicCopyUsage:()=>Dn,DynamicDrawUsage:()=>On,DynamicReadUsage:()=>In,EdgesGeometry:()=>Zl,EdgesHelper:()=>ad,EllipseCurve:()=>Hc,EqualDepth:()=>X,EqualStencilFunc:()=>wn,EquirectangularReflectionMapping:()=>lt,EquirectangularRefractionMapping:()=>ct,Euler:()=>cr,EventDispatcher:()=>Fn,ExtrudeBufferGeometry:()=>Nl,ExtrudeGeometry:()=>Dl,Face3:()=>_i,Face4:()=>Pp,FaceColors:()=>Rp,FileLoader:()=>Dc,FlatShading:()=>b,Float32Attribute:()=>Jp,Float32BufferAttribute:()=>Li,Float64Attribute:()=>td,Float64BufferAttribute:()=>Ri,FloatType:()=>Lt,Fog:()=>Fs,FogExp2:()=>Ns,Font:()=>jh,FontLoader:()=>zh,FrontFaceDirectionCCW:()=>h,FrontFaceDirectionCW:()=>c,FrontSide:()=>v,Frustum:()=>ko,GammaEncoding:()=>en,Geometry:()=>vo,GeometryUtils:()=>hd,GreaterDepth:()=>Q,GreaterEqualDepth:()=>Y,GreaterEqualStencilFunc:()=>An,GreaterStencilFunc:()=>Sn,GridHelper:()=>Yf,Group:()=>Is,HalfFloatType:()=>Rt,HemisphereLight:()=>fh,HemisphereLightHelper:()=>Xf,HemisphereLightProbe:()=>Hh,IcosahedronBufferGeometry:()=>Ju,IcosahedronGeometry:()=>$u,ImageBitmapLoader:()=>Nh,ImageLoader:()=>Uc,ImageUtils:()=>Gn,ImmediateRenderObject:()=>Df,IncrementStencilOp:()=>mn,IncrementWrapStencilOp:()=>gn,InstancedBufferAttribute:()=>Ch,InstancedBufferGeometry:()=>Mh,InstancedInterleavedBuffer:()=>Sf,InstancedMesh:()=>_u,Int16Attribute:()=>Qp,Int16BufferAttribute:()=>Oi,Int32Attribute:()=>Kp,Int32BufferAttribute:()=>ki,Int8Attribute:()=>qp,Int8BufferAttribute:()=>Ai,IntType:()=>kt,InterleavedBuffer:()=>js,InterleavedBufferAttribute:()=>Bs,Interpolant:()=>vc,InterpolateDiscrete:()=>Ve,InterpolateLinear:()=>He,InterpolateSmooth:()=>Ge,InvertStencilOp:()=>bn,JSONLoader:()=>pd,KeepStencilOp:()=>pn,KeyframeTrack:()=>_c,LOD:()=>cu,LatheBufferGeometry:()=>ql,LatheGeometry:()=>Wl,Layers:()=>hr,LensFlare:()=>md,LessDepth:()=>W,LessEqualDepth:()=>q,LessEqualStencilFunc:()=>En,LessStencilFunc:()=>xn,Light:()=>hh,LightProbe:()=>Sh,LightShadow:()=>ph,Line:()=>Mu,Line3:()=>Rf,LineBasicMaterial:()=>xu,LineCurve:()=>nh,LineCurve3:()=>rh,LineDashedMaterial:()=>pc,LineLoop:()=>ku,LinePieces:()=>Ip,LineSegments:()=>Pu,LineStrip:()=>kp,LinearEncoding:()=>Je,LinearFilter:()=>wt,LinearInterpolant:()=>yc,LinearMipMapLinearFilter:()=>At,LinearMipMapNearestFilter:()=>St,LinearMipmapLinearFilter:()=>Tt,LinearMipmapNearestFilter:()=>Et,LinearToneMapping:()=>et,Loader:()=>Lc,LoaderUtils:()=>Ah,LoadingManager:()=>kc,LogLuvEncoding:()=>rn,LoopOnce:()=>Ue,LoopPingPong:()=>Be,LoopRepeat:()=>ze,LuminanceAlphaFormat:()=>Ht,LuminanceFormat:()=>Vt,MOUSE:()=>i,Material:()=>wi,MaterialLoader:()=>Th,Math:()=>Bn,MathUtils:()=>Bn,Matrix3:()=>Hn,Matrix4:()=>sr,MaxEquation:()=>k,Mesh:()=>uo,MeshBasicMaterial:()=>Ei,MeshDepthMaterial:()=>Ts,MeshDistanceMaterial:()=>As,MeshFaceMaterial:()=>Np,MeshLambertMaterial:()=>hc,MeshMatcapMaterial:()=>fc,MeshNormalMaterial:()=>cc,MeshPhongMaterial:()=>uc,MeshPhysicalMaterial:()=>sc,MeshStandardMaterial:()=>ac,MeshToonMaterial:()=>lc,MinEquation:()=>P,MirroredRepeatWrapping:()=>vt,MixOperation:()=>$,MultiMaterial:()=>Fp,MultiplyBlending:()=>T,MultiplyOperation:()=>K,NearestFilter:()=>gt,NearestMipMapLinearFilter:()=>xt,NearestMipMapNearestFilter:()=>bt,NearestMipmapLinearFilter:()=>_t,NearestMipmapNearestFilter:()=>yt,NeverDepth:()=>H,NeverStencilFunc:()=>_n,NoBlending:()=>x,NoColors:()=>Lp,NoToneMapping:()=>tt,NormalAnimationBlendMode:()=>Ye,NormalBlending:()=>w,NotEqualDepth:()=>Z,NotEqualStencilFunc:()=>Tn,NumberKeyframeTrack:()=>Ec,Object3D:()=>Tr,ObjectLoader:()=>kh,ObjectSpaceNormalMap:()=>hn,OctahedronBufferGeometry:()=>Ku,OctahedronGeometry:()=>Zu,OneFactor:()=>L,OneMinusDstAlphaFactor:()=>U,OneMinusDstColorFactor:()=>B,OneMinusSrcAlphaFactor:()=>F,OneMinusSrcColorFactor:()=>D,OrthographicCamera:()=>yh,PCFShadowMap:()=>p,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>Tp,ParametricBufferGeometry:()=>Wu,ParametricGeometry:()=>Gu,Particle:()=>Up,ParticleBasicMaterial:()=>Vp,ParticleSystem:()=>zp,ParticleSystemMaterial:()=>Hp,Path:()=>lh,PerspectiveCamera:()=>So,Plane:()=>ei,PlaneBufferGeometry:()=>No,PlaneGeometry:()=>Do,PlaneHelper:()=>sp,PointCloud:()=>jp,PointCloudMaterial:()=>Bp,PointLight:()=>gh,PointLightHelper:()=>Hf,Points:()=>Fu,PointsMaterial:()=>Iu,PolarGridHelper:()=>Qf,PolyhedronBufferGeometry:()=>Xu,PolyhedronGeometry:()=>qu,PositionalAudio:()=>af,PropertyBinding:()=>bf,PropertyMixer:()=>uf,QuadraticBezierCurve:()=>ih,QuadraticBezierCurve3:()=>oh,Quaternion:()=>Zn,QuaternionKeyframeTrack:()=>Tc,QuaternionLinearInterpolant:()=>Sc,REVISION:()=>r,RGBADepthPacking:()=>ln,RGBAFormat:()=>Bt,RGBAIntegerFormat:()=>$t,RGBA_ASTC_10x10_Format:()=>xe,RGBA_ASTC_10x5_Format:()=>ye,RGBA_ASTC_10x6_Format:()=>be,RGBA_ASTC_10x8_Format:()=>_e,RGBA_ASTC_12x10_Format:()=>we,RGBA_ASTC_12x12_Format:()=>Ee,RGBA_ASTC_4x4_Format:()=>ce,RGBA_ASTC_5x4_Format:()=>he,RGBA_ASTC_5x5_Format:()=>fe,RGBA_ASTC_6x5_Format:()=>pe,RGBA_ASTC_6x6_Format:()=>de,RGBA_ASTC_8x5_Format:()=>me,RGBA_ASTC_8x6_Format:()=>ve,RGBA_ASTC_8x8_Format:()=>ge,RGBA_BPTC_Format:()=>Se,RGBA_ETC2_EAC_Format:()=>le,RGBA_PVRTC_2BPPV1_Format:()=>ae,RGBA_PVRTC_4BPPV1_Format:()=>oe,RGBA_S3TC_DXT1_Format:()=>te,RGBA_S3TC_DXT3_Format:()=>ee,RGBA_S3TC_DXT5_Format:()=>ne,RGBDEncoding:()=>sn,RGBEEncoding:()=>nn,RGBEFormat:()=>Gt,RGBFormat:()=>zt,RGBIntegerFormat:()=>Kt,RGBM16Encoding:()=>an,RGBM7Encoding:()=>on,RGB_ETC1_Format:()=>se,RGB_ETC2_Format:()=>ue,RGB_PVRTC_2BPPV1_Format:()=>ie,RGB_PVRTC_4BPPV1_Format:()=>re,RGB_S3TC_DXT1_Format:()=>Jt,RGFormat:()=>Qt,RGIntegerFormat:()=>Zt,RawShaderMaterial:()=>oc,Ray:()=>Kr,Raycaster:()=>Tf,RectAreaLight:()=>wh,RedFormat:()=>Xt,RedIntegerFormat:()=>Yt,ReinhardToneMapping:()=>nt,RepeatWrapping:()=>dt,ReplaceStencilOp:()=>dn,ReverseSubtractEquation:()=>O,RingBufferGeometry:()=>Gl,RingGeometry:()=>Hl,SRGB8_ALPHA8_ASTC_10x10_Format:()=>Ne,SRGB8_ALPHA8_ASTC_10x5_Format:()=>Le,SRGB8_ALPHA8_ASTC_10x6_Format:()=>Re,SRGB8_ALPHA8_ASTC_10x8_Format:()=>De,SRGB8_ALPHA8_ASTC_12x10_Format:()=>Fe,SRGB8_ALPHA8_ASTC_12x12_Format:()=>je,SRGB8_ALPHA8_ASTC_4x4_Format:()=>Te,SRGB8_ALPHA8_ASTC_5x4_Format:()=>Ae,SRGB8_ALPHA8_ASTC_5x5_Format:()=>Me,SRGB8_ALPHA8_ASTC_6x5_Format:()=>Ce,SRGB8_ALPHA8_ASTC_6x6_Format:()=>Oe,SRGB8_ALPHA8_ASTC_8x5_Format:()=>Pe,SRGB8_ALPHA8_ASTC_8x6_Format:()=>ke,SRGB8_ALPHA8_ASTC_8x8_Format:()=>Ie,Scene:()=>Ar,SceneUtils:()=>dd,ShaderChunk:()=>Fo,ShaderLib:()=>jo,ShaderMaterial:()=>wo,ShadowMaterial:()=>ic,Shape:()=>ch,ShapeBufferGeometry:()=>Yl,ShapeGeometry:()=>Xl,ShapePath:()=>Fh,ShapeUtils:()=>Il,ShortType:()=>Ot,Skeleton:()=>du,SkeletonHelper:()=>Vf,SkinnedMesh:()=>hu,SmoothShading:()=>_,Sphere:()=>Hr,SphereBufferGeometry:()=>Vl,SphereGeometry:()=>Bl,Spherical:()=>Cf,SphericalHarmonics3:()=>Eh,SphericalReflectionMapping:()=>ht,Spline:()=>rd,SplineCurve:()=>ah,SplineCurve3:()=>nd,SpotLight:()=>mh,SpotLightHelper:()=>Ff,SpotLightShadow:()=>dh,Sprite:()=>eu,SpriteMaterial:()=>Vs,SrcAlphaFactor:()=>N,SrcAlphaSaturateFactor:()=>V,SrcColorFactor:()=>R,StaticCopyUsage:()=>Rn,StaticDrawUsage:()=>Cn,StaticReadUsage:()=>kn,StereoCamera:()=>Xh,StreamCopyUsage:()=>Nn,StreamDrawUsage:()=>Pn,StreamReadUsage:()=>Ln,StringKeyframeTrack:()=>Ac,SubtractEquation:()=>C,SubtractiveBlending:()=>S,TOUCH:()=>o,TangentSpaceNormalMap:()=>cn,TetrahedronBufferGeometry:()=>Qu,TetrahedronGeometry:()=>Yu,TextBufferGeometry:()=>zl,TextGeometry:()=>Ul,Texture:()=>qn,TextureLoader:()=>Bc,TorusBufferGeometry:()=>sl,TorusGeometry:()=>al,TorusKnotBufferGeometry:()=>ol,TorusKnotGeometry:()=>il,Triangle:()=>fi,TriangleFanDrawMode:()=>$e,TriangleStripDrawMode:()=>Ke,TrianglesDrawMode:()=>Ze,TubeBufferGeometry:()=>rl,TubeGeometry:()=>nl,UVMapping:()=>at,Uint16Attribute:()=>Zp,Uint16BufferAttribute:()=>Pi,Uint32Attribute:()=>$p,Uint32BufferAttribute:()=>Ii,Uint8Attribute:()=>Xp,Uint8BufferAttribute:()=>Mi,Uint8ClampedAttribute:()=>Yp,Uint8ClampedBufferAttribute:()=>Ci,Uncharted2ToneMapping:()=>rt,Uniform:()=>Ef,UniformsLib:()=>Io,UniformsUtils:()=>xo,UnsignedByteType:()=>Mt,UnsignedInt248Type:()=>jt,UnsignedIntType:()=>It,UnsignedShort4444Type:()=>Dt,UnsignedShort5551Type:()=>Nt,UnsignedShort565Type:()=>Ft,UnsignedShortType:()=>Pt,VSMShadowMap:()=>m,Vector2:()=>Vn,Vector3:()=>Jn,Vector4:()=>Xn,VectorKeyframeTrack:()=>Mc,Vertex:()=>Gp,VertexColors:()=>Dp,VideoTexture:()=>Uu,WebGLCubeRenderTarget:()=>Mo,WebGLMultisampleRenderTarget:()=>Qn,WebGLRenderTarget:()=>Yn,WebGLRenderTargetCube:()=>cd,WebGLRenderer:()=>Ds,WebGLUtils:()=>Ps,WireframeGeometry:()=>Hu,WireframeHelper:()=>sd,WrapAroundEnding:()=>Xe,XHRLoader:()=>ud,ZeroCurvatureEnding:()=>We,ZeroFactor:()=>I,ZeroSlopeEnding:()=>qe,ZeroStencilOp:()=>fn,sRGBEncoding:()=>tn}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e});var r="116",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,u=2,l=3,c=0,h=1,f=0,p=1,d=2,m=3,v=0,g=1,y=2,b=1,_=2,x=0,w=1,E=2,S=3,T=4,A=5,M=100,C=101,O=102,P=103,k=104,I=200,L=201,R=202,D=203,N=204,F=205,j=206,U=207,z=208,B=209,V=210,H=0,G=1,W=2,q=3,X=4,Y=5,Q=6,Z=7,K=0,$=1,J=2,tt=0,et=1,nt=2,rt=3,it=4,ot=5,at=300,st=301,ut=302,lt=303,ct=304,ht=305,ft=306,pt=307,dt=1e3,mt=1001,vt=1002,gt=1003,yt=1004,bt=1004,_t=1005,xt=1005,wt=1006,Et=1007,St=1007,Tt=1008,At=1008,Mt=1009,Ct=1010,Ot=1011,Pt=1012,kt=1013,It=1014,Lt=1015,Rt=1016,Dt=1017,Nt=1018,Ft=1019,jt=1020,Ut=1021,zt=1022,Bt=1023,Vt=1024,Ht=1025,Gt=Bt,Wt=1026,qt=1027,Xt=1028,Yt=1029,Qt=1030,Zt=1031,Kt=1032,$t=1033,Jt=33776,te=33777,ee=33778,ne=33779,re=35840,ie=35841,oe=35842,ae=35843,se=36196,ue=37492,le=37496,ce=37808,he=37809,fe=37810,pe=37811,de=37812,me=37813,ve=37814,ge=37815,ye=37816,be=37817,_e=37818,xe=37819,we=37820,Ee=37821,Se=36492,Te=37840,Ae=37841,Me=37842,Ce=37843,Oe=37844,Pe=37845,ke=37846,Ie=37847,Le=37848,Re=37849,De=37850,Ne=37851,Fe=37852,je=37853,Ue=2200,ze=2201,Be=2202,Ve=2300,He=2301,Ge=2302,We=2400,qe=2401,Xe=2402,Ye=2500,Qe=2501,Ze=0,Ke=1,$e=2,Je=3e3,tn=3001,en=3007,nn=3002,rn=3003,on=3004,an=3005,sn=3006,un=3200,ln=3201,cn=0,hn=1,fn=0,pn=7680,dn=7681,mn=7682,vn=7683,gn=34055,yn=34056,bn=5386,_n=512,xn=513,wn=514,En=515,Sn=516,Tn=517,An=518,Mn=519,Cn=35044,On=35048,Pn=35040,kn=35045,In=35049,Ln=35041,Rn=35046,Dn=35050,Nn=35042;function Fn(){}Object.assign(Fn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}});for(var jn=[],Un=0;Un<256;Un++)jn[Un]=(Un<16?"0":"")+Un.toString(16);var zn,Bn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(jn[255&t]+jn[t>>8&255]+jn[t>>16&255]+jn[t>>24&255]+"-"+jn[255&e]+jn[e>>8&255]+"-"+jn[e>>16&15|64]+jn[e>>24&255]+"-"+jn[63&n|128]+jn[n>>8&255]+"-"+jn[n>>16&255]+jn[n>>24&255]+jn[255&r]+jn[r>>8&255]+jn[r>>16&255]+jn[r>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*Bn.DEG2RAD},radToDeg:function(t){return t*Bn.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,r,i){var o=Math.cos,a=Math.sin,s=o(n/2),u=a(n/2),l=o((e+r)/2),c=a((e+r)/2),h=o((e-r)/2),f=a((e-r)/2),p=o((r-e)/2),d=a((r-e)/2);switch(i){case"XYX":t.set(s*c,u*h,u*f,s*l);break;case"YZY":t.set(u*f,s*c,u*h,s*l);break;case"ZXZ":t.set(u*h,u*f,s*c,s*l);break;case"XZX":t.set(s*c,u*d,u*p,s*l);break;case"YXY":t.set(u*p,s*c,u*d,s*l);break;case"ZYZ":t.set(u*d,u*p,s*c,s*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}};function Vn(t,e){this.x=t||0,this.y=e||0}function Hn(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Vn.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(Vn.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(Hn.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,a,s,u){var l=this.elements;return l[0]=t,l[1]=r,l[2]=a,l[3]=e,l[4]=i,l[5]=s,l[6]=n,l[7]=o,l[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[3],s=n[6],u=n[1],l=n[4],c=n[7],h=n[2],f=n[5],p=n[8],d=r[0],m=r[3],v=r[6],g=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return i[0]=o*d+a*g+s*_,i[3]=o*m+a*y+s*x,i[6]=o*v+a*b+s*w,i[1]=u*d+l*g+c*_,i[4]=u*m+l*y+c*x,i[7]=u*v+l*b+c*w,i[2]=h*d+f*g+p*_,i[5]=h*m+f*y+p*x,i[8]=h*v+f*b+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],s=t[6],u=t[7],l=t[8];return e*o*l-e*a*u-n*i*l+n*a*s+r*i*u-r*o*s},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.");var n=t.elements,r=this.elements,i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],l=n[5],c=n[6],h=n[7],f=n[8],p=f*u-l*h,d=l*c-f*s,m=h*s-u*c,v=i*p+o*d+a*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);var g=1/v;return r[0]=p*g,r[1]=(a*h-f*o)*g,r[2]=(l*o-a*u)*g,r[3]=d*g,r[4]=(f*i-a*c)*g,r[5]=(a*s-l*i)*g,r[6]=m*g,r[7]=(o*c-h*i)*g,r[8]=(u*i-o*s)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,a){var s=Math.cos(i),u=Math.sin(i);this.set(n*s,n*u,-n*(s*o+u*a)+o+t,-r*u,r*s,-r*(-u*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],a=r[6],s=r[1],u=r[4],l=r[7];return r[0]=e*i+n*s,r[3]=e*o+n*u,r[6]=e*a+n*l,r[1]=-n*i+e*s,r[4]=-n*o+e*u,r[7]=-n*a+e*l,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Gn={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===zn&&(zn=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),zn.width=t.width,zn.height=t.height;var n=zn.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=zn}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Wn=0;function qn(t,e,n,r,i,o,a,s,u,l){Object.defineProperty(this,"id",{value:Wn++}),this.uuid=Bn.generateUUID(),this.name="",this.image=void 0!==t?t:qn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:qn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:mt,this.wrapT=void 0!==r?r:mt,this.magFilter=void 0!==i?i:wt,this.minFilter=void 0!==o?o:Tt,this.anisotropy=void 0!==u?u:1,this.format=void 0!==a?a:Bt,this.internalFormat=null,this.type=void 0!==s?s:Mt,this.offset=new Vn(0,0),this.repeat=new Vn(1,1),this.center=new Vn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Je,this.version=0,this.onUpdate=null}function Xn(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}function Yn(t,e,n){this.width=t,this.height=e,this.scissor=new Xn(0,0,t,e),this.scissorTest=!1,this.viewport=new Xn(0,0,t,e),n=n||{},this.texture=new qn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:wt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Qn(t,e,n){Yn.call(this,t,e,n),this.samples=4}function Zn(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}qn.DEFAULT_IMAGE=void 0,qn.DEFAULT_MAPPING=at,qn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:qn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var r=this.image;if(void 0===r.uuid&&(r.uuid=Bn.generateUUID()),!e&&void 0===t.images[r.uuid]){var i;if(Array.isArray(r)){i=[];for(var o=0,a=r.length;o<a;o++)i.push(Gn.getDataURL(r[o]))}else i=Gn.getDataURL(r);t.images[r.uuid]={uuid:r.uuid,url:i}}n.image=r.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==at)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case dt:t.x=t.x-Math.floor(t.x);break;case mt:t.x=t.x<0?0:1;break;case vt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case dt:t.y=t.y-Math.floor(t.y);break;case mt:t.y=t.y<0?0:1;break;case vt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(qn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(Xn.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(Xn.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=.01,a=.1,s=t.elements,u=s[0],l=s[4],c=s[8],h=s[1],f=s[5],p=s[9],d=s[2],m=s[6],v=s[10];if(Math.abs(l-h)<o&&Math.abs(c-d)<o&&Math.abs(p-m)<o){if(Math.abs(l+h)<a&&Math.abs(c+d)<a&&Math.abs(p+m)<a&&Math.abs(u+f+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var g=(u+1)/2,y=(f+1)/2,b=(v+1)/2,_=(l+h)/4,x=(c+d)/4,w=(p+m)/4;return g>y&&g>b?g<o?(n=0,r=.707106781,i=.707106781):(r=_/(n=Math.sqrt(g)),i=x/n):y>b?y<o?(n=.707106781,r=0,i=.707106781):(n=_/(r=Math.sqrt(y)),i=w/r):b<o?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(b)),r=w/i),this.set(n,r,i,e),this}var E=Math.sqrt((m-p)*(m-p)+(c-d)*(c-d)+(h-l)*(h-l));return Math.abs(E)<.001&&(E=1),this.x=(m-p)/E,this.y=(c-d)/E,this.z=(h-l)/E,this.w=Math.acos((u+f+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),Yn.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Yn,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Qn.prototype=Object.assign(Object.create(Yn.prototype),{constructor:Qn,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Yn.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(Zn,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,a){var s=n[r+0],u=n[r+1],l=n[r+2],c=n[r+3],h=i[o+0],f=i[o+1],p=i[o+2],d=i[o+3];if(c!==d||s!==h||u!==f||l!==p){var m=1-a,v=s*h+u*f+l*p+c*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),_=Math.atan2(b,v*g);m=Math.sin(m*_)/b,a=Math.sin(a*_)/b}var x=a*g;if(s=s*m+h*x,u=u*m+f*x,l=l*m+p*x,c=c*m+d*x,m===1-a){var w=1/Math.sqrt(s*s+u*u+l*l+c*c);s*=w,u*=w,l*=w,c*=w}}t[e]=s,t[e+1]=u,t[e+2]=l,t[e+3]=c},multiplyQuaternionsFlat:function(t,e,n,r,i,o){var a=n[r],s=n[r+1],u=n[r+2],l=n[r+3],c=i[o],h=i[o+1],f=i[o+2],p=i[o+3];return t[e]=a*p+l*c+s*f-u*h,t[e+1]=s*p+l*h+u*c-a*f,t[e+2]=u*p+l*f+a*h-s*c,t[e+3]=l*p-a*c-s*h-u*f,t}}),Object.defineProperties(Zn.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(Zn.prototype,{isQuaternion:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,a=Math.cos,s=Math.sin,u=a(n/2),l=a(r/2),c=a(i/2),h=s(n/2),f=s(r/2),p=s(i/2);switch(o){case"XYZ":this._x=h*l*c+u*f*p,this._y=u*f*c-h*l*p,this._z=u*l*p+h*f*c,this._w=u*l*c-h*f*p;break;case"YXZ":this._x=h*l*c+u*f*p,this._y=u*f*c-h*l*p,this._z=u*l*p-h*f*c,this._w=u*l*c+h*f*p;break;case"ZXY":this._x=h*l*c-u*f*p,this._y=u*f*c+h*l*p,this._z=u*l*p+h*f*c,this._w=u*l*c-h*f*p;break;case"ZYX":this._x=h*l*c-u*f*p,this._y=u*f*c+h*l*p,this._z=u*l*p-h*f*c,this._w=u*l*c+h*f*p;break;case"YZX":this._x=h*l*c+u*f*p,this._y=u*f*c+h*l*p,this._z=u*l*p-h*f*c,this._w=u*l*c-h*f*p;break;case"XZY":this._x=h*l*c-u*f*p,this._y=u*f*c-h*l*p,this._z=u*l*p+h*f*c,this._w=u*l*c+h*f*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],a=n[1],s=n[5],u=n[9],l=n[2],c=n[6],h=n[10],f=r+s+h;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-l)*e,this._z=(a-i)*e):r>s&&r>h?(e=2*Math.sqrt(1+r-s-h),this._w=(c-u)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(o+l)/e):s>h?(e=2*Math.sqrt(1+s-r-h),this._w=(o-l)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+h-r-s),this._w=(a-i)/e,this._x=(o+l)/e,this._y=(u+c)/e,this._z=.25*e),this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(Bn.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,a=e._x,s=e._y,u=e._z,l=e._w;return this._x=n*l+o*a+r*u-i*s,this._y=r*l+o*s+i*a-n*u,this._z=i*l+o*u+n*s-r*a,this._w=o*l-n*a-r*s-i*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,a=o*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var s=1-a*a;if(s<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize(),this._onChangeCallback(),this}var l=Math.sqrt(s),c=Math.atan2(l,a),h=Math.sin((1-e)*c)/l,f=Math.sin(e*c)/l;return this._w=o*h+this._w*f,this._x=n*h+this._x*f,this._y=r*h+this._y*f,this._z=i*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Kn=new Jn,$n=new Zn;function Jn(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(Jn.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion($n.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion($n.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,a=t.z,s=t.w,u=s*e+o*r-a*n,l=s*n+a*e-i*r,c=s*r+i*n-o*e,h=-i*e-o*n-a*r;return this.x=u*s+h*-i+l*-a-c*-o,this.y=l*s+h*-o+c*-i-u*-a,this.z=c*s+h*-a+u*-o-l*-i,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,a=e.y,s=e.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return Kn.copy(this).projectOnVector(t),this.sub(Kn)},reflect:function(t){return this.sub(Kn.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(Bn.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var tr=new Jn,er=new sr,nr=new Jn(0,0,0),rr=new Jn(1,1,1),ir=new Jn,or=new Jn,ar=new Jn;function sr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(sr.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=r,v[1]=i,v[5]=o,v[9]=a,v[13]=s,v[2]=u,v[6]=l,v[10]=c,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new sr).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,r=1/tr.setFromMatrixColumn(t,0).length(),i=1/tr.setFromMatrixColumn(t,1).length(),o=1/tr.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*i,e[5]=n[5]*i,e[6]=n[6]*i,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),u=Math.sin(r),l=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var h=o*l,f=o*c,p=a*l,d=a*c;e[0]=s*l,e[4]=-s*c,e[8]=u,e[1]=f+p*u,e[5]=h-d*u,e[9]=-a*s,e[2]=d-h*u,e[6]=p+f*u,e[10]=o*s}else if("YXZ"===t.order){var m=s*l,v=s*c,g=u*l,y=u*c;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*u,e[1]=o*c,e[5]=o*l,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order)m=s*l,v=s*c,g=u*l,y=u*c,e[0]=m-y*a,e[4]=-o*c,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*l,e[9]=y-m*a,e[2]=-o*u,e[6]=a,e[10]=o*s;else if("ZYX"===t.order)h=o*l,f=o*c,p=a*l,d=a*c,e[0]=s*l,e[4]=p*u-f,e[8]=h*u+d,e[1]=s*c,e[5]=d*u+h,e[9]=f*u-p,e[2]=-u,e[6]=a*s,e[10]=o*s;else if("YZX"===t.order){var b=o*s,_=o*u,x=a*s,w=a*u;e[0]=s*l,e[4]=w-b*c,e[8]=x*c+_,e[1]=c,e[5]=o*l,e[9]=-a*l,e[2]=-u*l,e[6]=_*c+x,e[10]=b-w*c}else"XZY"===t.order&&(b=o*s,_=o*u,x=a*s,w=a*u,e[0]=s*l,e[4]=-c,e[8]=u*l,e[1]=b*c+w,e[5]=o*l,e[9]=_*c-x,e[2]=x*c-_,e[6]=a*l,e[10]=w*c+b);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(nr,t,rr)},lookAt:function(t,e,n){var r=this.elements;return ar.subVectors(t,e),0===ar.lengthSq()&&(ar.z=1),ar.normalize(),ir.crossVectors(n,ar),0===ir.lengthSq()&&(1===Math.abs(n.z)?ar.x+=1e-4:ar.z+=1e-4,ar.normalize(),ir.crossVectors(n,ar)),ir.normalize(),or.crossVectors(ar,ir),r[0]=ir.x,r[4]=or.x,r[8]=ar.x,r[1]=ir.y,r[5]=or.y,r[9]=ar.y,r[2]=ir.z,r[6]=or.z,r[10]=ar.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],a=n[4],s=n[8],u=n[12],l=n[1],c=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],_=n[15],x=r[0],w=r[4],E=r[8],S=r[12],T=r[1],A=r[5],M=r[9],C=r[13],O=r[2],P=r[6],k=r[10],I=r[14],L=r[3],R=r[7],D=r[11],N=r[15];return i[0]=o*x+a*T+s*O+u*L,i[4]=o*w+a*A+s*P+u*R,i[8]=o*E+a*M+s*k+u*D,i[12]=o*S+a*C+s*I+u*N,i[1]=l*x+c*T+h*O+f*L,i[5]=l*w+c*A+h*P+f*R,i[9]=l*E+c*M+h*k+f*D,i[13]=l*S+c*C+h*I+f*N,i[2]=p*x+d*T+m*O+v*L,i[6]=p*w+d*A+m*P+v*R,i[10]=p*E+d*M+m*k+v*D,i[14]=p*S+d*C+m*I+v*N,i[3]=g*x+y*T+b*O+_*L,i[7]=g*w+y*A+b*P+_*R,i[11]=g*E+y*M+b*k+_*D,i[15]=g*S+y*C+b*I+_*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],a=t[5],s=t[9],u=t[13],l=t[2],c=t[6],h=t[10],f=t[14];return t[3]*(+i*s*c-r*u*c-i*a*h+n*u*h+r*a*f-n*s*f)+t[7]*(+e*s*f-e*u*h+i*o*h-r*o*f+r*u*l-i*s*l)+t[11]*(+e*u*c-e*a*f-i*o*c+n*o*f+i*a*l-n*u*l)+t[15]*(-r*a*l-e*s*c+e*a*h+r*o*c-n*o*h+n*s*l)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this},getInverse:function(t,e){void 0!==e&&console.warn("THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.");var n=this.elements,r=t.elements,i=r[0],o=r[1],a=r[2],s=r[3],u=r[4],l=r[5],c=r[6],h=r[7],f=r[8],p=r[9],d=r[10],m=r[11],v=r[12],g=r[13],y=r[14],b=r[15],_=p*y*h-g*d*h+g*c*m-l*y*m-p*c*b+l*d*b,x=v*d*h-f*y*h-v*c*m+u*y*m+f*c*b-u*d*b,w=f*g*h-v*p*h+v*l*m-u*g*m-f*l*b+u*p*b,E=v*p*c-f*g*c-v*l*d+u*g*d+f*l*y-u*p*y,S=i*_+o*x+a*w+s*E;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var T=1/S;return n[0]=_*T,n[1]=(g*d*s-p*y*s-g*a*m+o*y*m+p*a*b-o*d*b)*T,n[2]=(l*y*s-g*c*s+g*a*h-o*y*h-l*a*b+o*c*b)*T,n[3]=(p*c*s-l*d*s-p*a*h+o*d*h+l*a*m-o*c*m)*T,n[4]=x*T,n[5]=(f*y*s-v*d*s+v*a*m-i*y*m-f*a*b+i*d*b)*T,n[6]=(v*c*s-u*y*s-v*a*h+i*y*h+u*a*b-i*c*b)*T,n[7]=(u*d*s-f*c*s+f*a*h-i*d*h-u*a*m+i*c*m)*T,n[8]=w*T,n[9]=(v*p*s-f*g*s-v*o*m+i*g*m+f*o*b-i*p*b)*T,n[10]=(u*g*s-v*l*s+v*o*h-i*g*h-u*o*b+i*l*b)*T,n[11]=(f*l*s-u*p*s-f*o*h+i*p*h+u*o*m-i*l*m)*T,n[12]=E*T,n[13]=(f*g*a-v*p*a+v*o*d-i*g*d-f*o*y+i*p*y)*T,n[14]=(v*l*a-u*g*a-v*o*c+i*g*c+u*o*y-i*l*y)*T,n[15]=(u*p*a-f*l*a+f*o*c-i*p*c-u*o*d+i*l*d)*T,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,a=t.y,s=t.z,u=i*o,l=i*a;return this.set(u*o+n,u*a-r*s,u*s+r*a,0,u*a+r*s,l*a+n,l*s-r*o,0,u*s-r*a,l*s+r*o,i*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,a=e._z,s=e._w,u=i+i,l=o+o,c=a+a,h=i*u,f=i*l,p=i*c,d=o*l,m=o*c,v=a*c,g=s*u,y=s*l,b=s*c,_=n.x,x=n.y,w=n.z;return r[0]=(1-(d+v))*_,r[1]=(f+b)*_,r[2]=(p-y)*_,r[3]=0,r[4]=(f-b)*x,r[5]=(1-(h+v))*x,r[6]=(m+g)*x,r[7]=0,r[8]=(p+y)*w,r[9]=(m-g)*w,r[10]=(1-(h+d))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(t,e,n){var r=this.elements,i=tr.set(r[0],r[1],r[2]).length(),o=tr.set(r[4],r[5],r[6]).length(),a=tr.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),t.x=r[12],t.y=r[13],t.z=r[14],er.copy(this);var s=1/i,u=1/o,l=1/a;return er.elements[0]*=s,er.elements[1]*=s,er.elements[2]*=s,er.elements[4]*=u,er.elements[5]*=u,er.elements[6]*=u,er.elements[8]*=l,er.elements[9]*=l,er.elements[10]*=l,e.setFromRotationMatrix(er),n.x=i,n.y=o,n.z=a,this},makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*i/(e-t),u=2*i/(n-r),l=(e+t)/(e-t),c=(n+r)/(n-r),h=-(o+i)/(o-i),f=-2*o*i/(o-i);return a[0]=s,a[4]=0,a[8]=l,a[12]=0,a[1]=0,a[5]=u,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var a=this.elements,s=1/(e-t),u=1/(n-r),l=1/(o-i),c=(e+t)*s,h=(n+r)*u,f=(o+i)*l;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*u,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*l,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var ur=new sr,lr=new Zn;function cr(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||cr.DefaultOrder}function hr(){this.mask=1}cr.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],cr.DefaultOrder="XYZ",Object.defineProperties(cr.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(cr.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=Bn.clamp,i=t.elements,o=i[0],a=i[4],s=i[8],u=i[1],l=i[5],c=i[9],h=i[2],f=i[6],p=i[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(r(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(f,l),this._z=0);break;case"YXZ":this._x=Math.asin(-r(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,l)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(r(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,l)):(this._y=0,this._z=Math.atan2(u,o));break;case"ZYX":this._y=Math.asin(-r(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,o)):(this._x=0,this._z=Math.atan2(-a,l));break;case"YZX":this._z=Math.asin(r(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-r(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(f,l),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-c,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return ur.makeRotationFromQuaternion(t),this.setFromRotationMatrix(ur,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return lr.setFromEuler(this),this.setFromQuaternion(lr,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Jn(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(hr.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var fr=0,pr=new Jn,dr=new Zn,mr=new sr,vr=new Jn,gr=new Jn,yr=new Jn,br=new Zn,_r=new Jn(1,0,0),xr=new Jn(0,1,0),wr=new Jn(0,0,1),Er={type:"added"},Sr={type:"removed"};function Tr(){Object.defineProperty(this,"id",{value:fr++}),this.uuid=Bn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Tr.DefaultUp.clone();var t=new Jn,e=new cr,n=new Zn,r=new Jn(1,1,1);e._onChange((function(){n.setFromEuler(e,!1)})),n._onChange((function(){e.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new sr},normalMatrix:{value:new Hn}}),this.matrix=new sr,this.matrixWorld=new sr,this.matrixAutoUpdate=Tr.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new hr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Ar(){Tr.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Tr.DefaultUp=new Jn(0,1,0),Tr.DefaultMatrixAutoUpdate=!0,Tr.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Tr,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return dr.setFromAxisAngle(t,e),this.quaternion.multiply(dr),this},rotateOnWorldAxis:function(t,e){return dr.setFromAxisAngle(t,e),this.quaternion.premultiply(dr),this},rotateX:function(t){return this.rotateOnAxis(_r,t)},rotateY:function(t){return this.rotateOnAxis(xr,t)},rotateZ:function(t){return this.rotateOnAxis(wr,t)},translateOnAxis:function(t,e){return pr.copy(t).applyQuaternion(this.quaternion),this.position.add(pr.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(_r,t)},translateY:function(t){return this.translateOnAxis(xr,t)},translateZ:function(t){return this.translateOnAxis(wr,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(mr.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?vr.copy(t):vr.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),gr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?mr.lookAt(gr,vr,this.up):mr.lookAt(vr,gr,this.up),this.quaternion.setFromRotationMatrix(mr),r&&(mr.extractRotation(r.matrixWorld),dr.setFromRotationMatrix(mr),this.quaternion.premultiply(dr.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Er)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(Sr)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),mr.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),mr.multiply(t.parent.matrixWorld)),t.applyMatrix4(mr),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Jn),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Zn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,t,yr),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Jn),this.updateMatrixWorld(!0),this.matrixWorld.decompose(gr,br,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Jn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,i=0,o=r.length;i<o;i++)r[i].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,u=a.length;s<u;s++){var l=a[s];i(t.shapes,l)}else i(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(s=0,u=this.material.length;s<u;s++)c.push(i(t.materials,this.material[s]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0)for(r.children=[],s=0;s<this.children.length;s++)r.children.push(this.children[s].toJSON(t).object);if(e){var h=m(t.geometries),f=m(t.materials),p=m(t.textures),d=m(t.images);a=m(t.shapes),h.length>0&&(n.geometries=h),f.length>0&&(n.materials=f),p.length>0&&(n.textures=p),d.length>0&&(n.images=d),a.length>0&&(n.shapes=a)}return n.object=r,n;function m(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}}),Ar.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Ar,isScene:!0,copy:function(t,e){return Tr.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=Tr.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Mr=[new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn],Cr=new Jn,Or=new zr,Pr=new Jn,kr=new Jn,Ir=new Jn,Lr=new Jn,Rr=new Jn,Dr=new Jn,Nr=new Jn,Fr=new Jn,jr=new Jn,Ur=new Jn;function zr(t,e){this.min=void 0!==t?t:new Jn(1/0,1/0,1/0),this.max=void 0!==e?e:new Jn(-1/0,-1/0,-1/0)}function Br(t,e,n,r,i){var o,a;for(o=0,a=t.length-3;o<=a;o+=3){Ur.fromArray(t,o);var s=i.x*Math.abs(Ur.x)+i.y*Math.abs(Ur.y)+i.z*Math.abs(Ur.z),u=e.dot(Ur),l=n.dot(Ur),c=r.dot(Ur);if(Math.max(-Math.max(u,l,c),Math.min(u,l,c))>s)return!1}return!0}Object.assign(zr.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.length;s<u;s+=3){var l=t[s],c=t[s+1],h=t[s+2];l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,a=-1/0,s=0,u=t.count;s<u;s++){var l=t.getX(s),c=t.getY(s),h=t.getZ(s);l<e&&(e=l),c<n&&(n=c),h<r&&(r=h),l>i&&(i=l),c>o&&(o=c),h>a&&(a=h)}return this.min.set(e,n,r),this.max.set(i,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Cr.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Jn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Jn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),Or.copy(e.boundingBox),Or.applyMatrix4(t.matrixWorld),this.union(Or));for(var n=t.children,r=0,i=n.length;r<i;r++)this.expandByObject(n[r]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Jn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,Cr),Cr.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(Nr),Fr.subVectors(this.max,Nr),Pr.subVectors(t.a,Nr),kr.subVectors(t.b,Nr),Ir.subVectors(t.c,Nr),Lr.subVectors(kr,Pr),Rr.subVectors(Ir,kr),Dr.subVectors(Pr,Ir);var e=[0,-Lr.z,Lr.y,0,-Rr.z,Rr.y,0,-Dr.z,Dr.y,Lr.z,0,-Lr.x,Rr.z,0,-Rr.x,Dr.z,0,-Dr.x,-Lr.y,Lr.x,0,-Rr.y,Rr.x,0,-Dr.y,Dr.x,0];return!!Br(e,Pr,kr,Ir,Fr)&&!!Br(e=[1,0,0,0,1,0,0,0,1],Pr,kr,Ir,Fr)&&(jr.crossVectors(Lr,Rr),Br(e=[jr.x,jr.y,jr.z],Pr,kr,Ir,Fr))},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Jn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Cr.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(Cr).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()||(Mr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Mr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Mr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Mr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Mr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Mr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Mr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Mr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Mr)),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Vr=new zr;function Hr(t,e){this.center=void 0!==t?t:new Jn,this.radius=void 0!==e?e:-1}Object.assign(Hr.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):Vr.setFromPoints(t).getCenter(n);for(var r=0,i=0,o=t.length;i<o;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Jn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new zr),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Gr=new Jn,Wr=new Jn,qr=new Jn,Xr=new Jn,Yr=new Jn,Qr=new Jn,Zr=new Jn;function Kr(t,e){this.origin=void 0!==t?t:new Jn,this.direction=void 0!==e?e:new Jn(0,0,-1)}Object.assign(Kr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Jn),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Gr)),this},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Jn),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=Gr.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Gr.copy(this.direction).multiplyScalar(e).add(this.origin),Gr.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,r){Wr.copy(t).add(e).multiplyScalar(.5),qr.copy(e).sub(t).normalize(),Xr.copy(this.origin).sub(Wr);var i,o,a,s,u=.5*t.distanceTo(e),l=-this.direction.dot(qr),c=Xr.dot(this.direction),h=-Xr.dot(qr),f=Xr.lengthSq(),p=Math.abs(1-l*l);if(p>0)if(o=l*c-h,s=u*p,(i=l*h-c)>=0)if(o>=-s)if(o<=s){var d=1/p;a=(i*=d)*(i+l*(o*=d)+2*c)+o*(l*i+o+2*h)+f}else o=u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o=-u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;else o<=-s?a=-(i=Math.max(0,-(-l*u+c)))*i+(o=i>0?-u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f:o<=s?(i=0,a=(o=Math.min(Math.max(-u,-h),u))*(o+2*h)+f):a=-(i=Math.max(0,-(l*u+c)))*i+(o=i>0?u:Math.min(Math.max(-u,-h),u))*(o+2*h)+f;else o=l>0?-u:u,a=-(i=Math.max(0,-(l*o+c)))*i+o*(o+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(i).add(this.origin),r&&r.copy(qr).multiplyScalar(o).add(Wr),a},intersectSphere:function(t,e){Gr.subVectors(t.center,this.origin);var n=Gr.dot(this.direction),r=Gr.dot(Gr)-n*n,i=t.radius*t.radius;if(r>i)return null;var o=Math.sqrt(i-r),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,r,i,o,a,s,u=1/this.direction.x,l=1/this.direction.y,c=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,r=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,r=(t.min.x-h.x)*u),l>=0?(i=(t.min.y-h.y)*l,o=(t.max.y-h.y)*l):(i=(t.max.y-h.y)*l,o=(t.min.y-h.y)*l),n>o||i>r?null:((i>n||n!=n)&&(n=i),(o<r||r!=r)&&(r=o),c>=0?(a=(t.min.z-h.z)*c,s=(t.max.z-h.z)*c):(a=(t.max.z-h.z)*c,s=(t.min.z-h.z)*c),n>s||a>r?null:((a>n||n!=n)&&(n=a),(s<r||r!=r)&&(r=s),r<0?null:this.at(n>=0?n:r,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,Gr)},intersectTriangle:function(t,e,n,r,i){Yr.subVectors(e,t),Qr.subVectors(n,t),Zr.crossVectors(Yr,Qr);var o,a=this.direction.dot(Zr);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Xr.subVectors(this.origin,t);var s=o*this.direction.dot(Qr.crossVectors(Xr,Qr));if(s<0)return null;var u=o*this.direction.dot(Yr.cross(Xr));if(u<0)return null;if(s+u>a)return null;var l=-o*Xr.dot(Zr);return l<0?null:this.at(l/a,i)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var $r=new Jn,Jr=new Jn,ti=new Hn;function ei(t,e){this.normal=void 0!==t?t:new Jn(1,0,0),this.constant=void 0!==e?e:0}Object.assign(ei.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var r=$r.subVectors(n,e).cross(Jr.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Jn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Jn);var n=t.delta($r),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;var i=-(t.start.dot(this.normal)+this.constant)/r;return i<0||i>1?void 0:e.copy(n).multiplyScalar(i).add(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Jn),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||ti.getNormalMatrix(t),r=this.coplanarPoint($r).applyMatrix4(t),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var ni=new Jn,ri=new Jn,ii=new Jn,oi=new Jn,ai=new Jn,si=new Jn,ui=new Jn,li=new Jn,ci=new Jn,hi=new Jn;function fi(t,e,n){this.a=void 0!==t?t:new Jn,this.b=void 0!==e?e:new Jn,this.c=void 0!==n?n:new Jn}Object.assign(fi,{getNormal:function(t,e,n,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Jn),r.subVectors(n,e),ni.subVectors(t,e),r.cross(ni);var i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)},getBarycoord:function(t,e,n,r,i){ni.subVectors(r,e),ri.subVectors(n,e),ii.subVectors(t,e);var o=ni.dot(ni),a=ni.dot(ri),s=ni.dot(ii),u=ri.dot(ri),l=ri.dot(ii),c=o*u-a*a;if(void 0===i&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),i=new Jn),0===c)return i.set(-2,-1,-1);var h=1/c,f=(u*s-a*l)*h,p=(o*l-a*s)*h;return i.set(1-f-p,p,f)},containsPoint:function(t,e,n,r){return fi.getBarycoord(t,e,n,r,oi),oi.x>=0&&oi.y>=0&&oi.x+oi.y<=1},getUV:function(t,e,n,r,i,o,a,s){return this.getBarycoord(t,e,n,r,oi),s.set(0,0),s.addScaledVector(i,oi.x),s.addScaledVector(o,oi.y),s.addScaledVector(a,oi.z),s},isFrontFacing:function(t,e,n,r){return ni.subVectors(n,e),ri.subVectors(t,e),ni.cross(ri).dot(r)<0}}),Object.assign(fi.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return ni.subVectors(this.c,this.b),ri.subVectors(this.a,this.b),.5*ni.cross(ri).length()},getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Jn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return fi.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new ei),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return fi.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,r,i){return fi.getUV(t,this.a,this.b,this.c,e,n,r,i)},containsPoint:function(t){return fi.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return fi.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Jn);var n,r,i=this.a,o=this.b,a=this.c;ai.subVectors(o,i),si.subVectors(a,i),li.subVectors(t,i);var s=ai.dot(li),u=si.dot(li);if(s<=0&&u<=0)return e.copy(i);ci.subVectors(t,o);var l=ai.dot(ci),c=si.dot(ci);if(l>=0&&c<=l)return e.copy(o);var h=s*c-l*u;if(h<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(i).addScaledVector(ai,n);hi.subVectors(t,a);var f=ai.dot(hi),p=si.dot(hi);if(p>=0&&f<=p)return e.copy(a);var d=f*u-s*p;if(d<=0&&u>=0&&p<=0)return r=u/(u-p),e.copy(i).addScaledVector(si,r);var m=l*p-f*c;if(m<=0&&c-l>=0&&f-p>=0)return ui.subVectors(a,o),r=(c-l)/(c-l+(f-p)),e.copy(o).addScaledVector(ui,r);var v=1/(m+d+h);return n=d*v,r=h*v,e.copy(i).addScaledVector(ai,n).addScaledVector(si,r)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var pi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},di={h:0,s:0,l:0},mi={h:0,s:0,l:0};function vi(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function gi(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function yi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function bi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function _i(t,e,n,r,i,o){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new Jn,this.vertexNormals=Array.isArray(r)?r:[],this.color=i&&i.isColor?i:new vi,this.vertexColors=Array.isArray(i)?i:[],this.materialIndex=void 0!==o?o:0}Object.assign(vi.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=Bn.euclideanModulo(t,1),e=Bn.clamp(e,0,1),n=Bn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var r=n<=.5?n*(1+e):n+e-n*e,i=2*n-r;this.r=gi(i,r,t+1/3),this.g=gi(i,r,t),this.b=gi(i,r,t-1/3)}return this},setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,i=n[1],o=n[2];switch(i){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(r[1])/360,s=parseInt(r[2],10)/100,u=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var l=n[1],c=l.length;if(3===c)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===c)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=pi[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=yi(t.r),this.g=yi(t.g),this.b=yi(t.b),this},copyLinearToSRGB:function(t){return this.r=bi(t.r),this.g=bi(t.g),this.b=bi(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,a=Math.max(r,i,o),s=Math.min(r,i,o),u=(s+a)/2;if(s===a)e=0,n=0;else{var l=a-s;switch(n=u<=.5?l/(a+s):l/(2-a-s),a){case r:e=(i-o)/l+(i<o?6:0);break;case i:e=(o-r)/l+2;break;case o:e=(r-i)/l+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(di),di.h+=t,di.s+=e,di.l+=n,this.setHSL(di.h,di.s,di.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(di),t.getHSL(mi);var n=Bn.lerp(di.h,mi.h,e),r=Bn.lerp(di.s,mi.s,e),i=Bn.lerp(di.l,mi.l,e);return this.setHSL(n,r,i),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}}),vi.NAMES=pi,Object.assign(_i.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var xi=0;function wi(){Object.defineProperty(this,"id",{value:xi++}),this.uuid=Bn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=w,this.side=v,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=N,this.blendDst=F,this.blendEquation=M,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=q,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Mn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=pn,this.stencilZFail=pn,this.stencilZPass=pn,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function Ei(t){wi.call(this),this.type="MeshBasicMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}wi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:wi,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===b;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function r(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==w&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==v&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var i=r(t.textures),o=r(t.images);i.length>0&&(n.textures=i),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var r=e.length;n=new Array(r);for(var i=0;i!==r;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(wi.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Ei.prototype=Object.create(wi.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isMeshBasicMaterial=!0,Ei.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Si=new Jn;function Ti(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Cn,this.updateRange={offset:0,count:-1},this.version=0}function Ai(t,e,n){Ti.call(this,new Int8Array(t),e,n)}function Mi(t,e,n){Ti.call(this,new Uint8Array(t),e,n)}function Ci(t,e,n){Ti.call(this,new Uint8ClampedArray(t),e,n)}function Oi(t,e,n){Ti.call(this,new Int16Array(t),e,n)}function Pi(t,e,n){Ti.call(this,new Uint16Array(t),e,n)}function ki(t,e,n){Ti.call(this,new Int32Array(t),e,n)}function Ii(t,e,n){Ti.call(this,new Uint32Array(t),e,n)}function Li(t,e,n){Ti.call(this,new Float32Array(t),e,n)}function Ri(t,e,n){Ti.call(this,new Float64Array(t),e,n)}function Di(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ni(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(Ti.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ti.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new vi),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),o=new Vn),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),o=new Jn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new Xn),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){for(var e=0,n=this.count;e<n;e++)Si.x=this.getX(e),Si.y=this.getY(e),Si.z=this.getZ(e),Si.applyMatrix3(t),this.setXYZ(e,Si.x,Si.y,Si.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Si.x=this.getX(e),Si.y=this.getY(e),Si.z=this.getZ(e),Si.applyMatrix4(t),this.setXYZ(e,Si.x,Si.y,Si.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Si.x=this.getX(e),Si.y=this.getY(e),Si.z=this.getZ(e),Si.applyNormalMatrix(t),this.setXYZ(e,Si.x,Si.y,Si.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Si.x=this.getX(e),Si.y=this.getY(e),Si.z=this.getZ(e),Si.transformDirection(t),this.setXYZ(e,Si.x,Si.y,Si.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Ai.prototype=Object.create(Ti.prototype),Ai.prototype.constructor=Ai,Mi.prototype=Object.create(Ti.prototype),Mi.prototype.constructor=Mi,Ci.prototype=Object.create(Ti.prototype),Ci.prototype.constructor=Ci,Oi.prototype=Object.create(Ti.prototype),Oi.prototype.constructor=Oi,Pi.prototype=Object.create(Ti.prototype),Pi.prototype.constructor=Pi,ki.prototype=Object.create(Ti.prototype),ki.prototype.constructor=ki,Ii.prototype=Object.create(Ti.prototype),Ii.prototype.constructor=Ii,Li.prototype=Object.create(Ti.prototype),Li.prototype.constructor=Li,Ri.prototype=Object.create(Ti.prototype),Ri.prototype.constructor=Ri,Object.assign(Di.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var a=i[o];a.materialIndex!==r&&(r=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,a=i[1]&&i[1].length>0,s=t.morphTargets,u=s.length;if(u>0){e=[];for(var l=0;l<u;l++)e[l]={name:s[l].name,data:[]};this.morphTargets.position=e}var c,h=t.morphNormals,f=h.length;if(f>0){for(c=[],l=0;l<f;l++)c[l]={name:h[l].name,data:[]};this.morphTargets.normal=c}var p=t.skinIndices,d=t.skinWeights,m=p.length===r.length,v=d.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),l=0;l<n.length;l++){var g=n[l];this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var _,x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=g.color;this.colors.push(w,w,w)}!0===o&&(void 0!==(_=i[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Vn,new Vn,new Vn))),!0===a&&(void 0!==(_=i[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Vn,new Vn,new Vn)));for(var E=0;E<u;E++){var S=s[E].vertices;e[E].data.push(S[g.a],S[g.b],S[g.c])}for(E=0;E<f;E++){var T=h[E].vertexNormals[l];c[E].data.push(T.a,T.b,T.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(d[g.a],d[g.b],d[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var Fi=1,ji=new sr,Ui=new Tr,zi=new Jn,Bi=new zr,Vi=new zr,Hi=new Jn;function Gi(){Object.defineProperty(this,"id",{value:Fi+=2}),this.uuid=Bn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}Gi.prototype=Object.assign(Object.create(Fn.prototype),{constructor:Gi,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Ni(t)>65535?Ii:Pi)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new Hn).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return ji.makeRotationX(t),this.applyMatrix4(ji),this},rotateY:function(t){return ji.makeRotationY(t),this.applyMatrix4(ji),this},rotateZ:function(t){return ji.makeRotationZ(t),this.applyMatrix4(ji),this},translate:function(t,e,n){return ji.makeTranslation(t,e,n),this.applyMatrix4(ji),this},scale:function(t,e,n){return ji.makeScale(t,e,n),this.applyMatrix4(ji),this},lookAt:function(t){return Ui.lookAt(t),Ui.updateMatrix(),this.applyMatrix4(Ui.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(zi).negate(),this.translate(zi.x,zi.y,zi.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new Li(3*e.vertices.length,3),r=new Li(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new Li(e.lineDistances.length,1);this.setAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Li(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Di).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new Ti(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new Ti(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.setAttribute("color",new Ti(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new Ti(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new Ti(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[a],l=0,c=u.length;l<c;l++){var h=u[l],f=new Li(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new Li(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new Li(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new zr);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var i=e[n];Bi.setFromBufferAttribute(i),this.morphTargetsRelative?(Hi.addVectors(this.boundingBox.min,Bi.min),this.boundingBox.expandByPoint(Hi),Hi.addVectors(this.boundingBox.max,Bi.max),this.boundingBox.expandByPoint(Hi)):(this.boundingBox.expandByPoint(Bi.min),this.boundingBox.expandByPoint(Bi.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Hr);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(Bi.setFromBufferAttribute(t),e)for(var r=0,i=e.length;r<i;r++){var o=e[r];Vi.setFromBufferAttribute(o),this.morphTargetsRelative?(Hi.addVectors(Bi.min,Vi.min),Bi.expandByPoint(Hi),Hi.addVectors(Bi.max,Vi.max),Bi.expandByPoint(Hi)):(Bi.expandByPoint(Vi.min),Bi.expandByPoint(Vi.max))}Bi.getCenter(n);var a=0;for(r=0,i=t.count;r<i;r++)Hi.fromBufferAttribute(t,r),a=Math.max(a,n.distanceToSquared(Hi));if(e)for(r=0,i=e.length;r<i;r++){o=e[r];for(var s=this.morphTargetsRelative,u=0,l=o.count;u<l;u++)Hi.fromBufferAttribute(o,u),s&&(zi.fromBufferAttribute(t,u),Hi.add(zi)),a=Math.max(a,n.distanceToSquared(Hi))}this.boundingSphere.radius=Math.sqrt(a),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.setAttribute("normal",new Ti(new Float32Array(n.length),3));else for(var r=e.normal.array,i=0,o=r.length;i<o;i++)r[i]=0;var a,s,u,l=e.normal.array,c=new Jn,h=new Jn,f=new Jn,p=new Jn,d=new Jn;if(t){var m=t.array;for(i=0,o=t.count;i<o;i+=3)a=3*m[i+0],s=3*m[i+1],u=3*m[i+2],c.fromArray(n,a),h.fromArray(n,s),f.fromArray(n,u),p.subVectors(f,h),d.subVectors(c,h),p.cross(d),l[a]+=p.x,l[a+1]+=p.y,l[a+2]+=p.z,l[s]+=p.x,l[s+1]+=p.y,l[s+2]+=p.z,l[u]+=p.x,l[u+1]+=p.y,l[u+2]+=p.z}else for(i=0,o=n.length;i<o;i+=9)c.fromArray(n,i),h.fromArray(n,i+3),f.fromArray(n,i+6),p.subVectors(f,h),d.subVectors(c,h),p.cross(d),l[i]=p.x,l[i+1]=p.y,l[i+2]=p.z,l[i+3]=p.x,l[i+4]=p.y,l[i+5]=p.z,l[i+6]=p.x,l[i+7]=p.y,l[i+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],a=o.array,s=o.itemSize*e,u=Math.min(a.length,i.length-s),l=0,c=s;l<u;l++,c++)i[c]=a[l];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Hi.x=t.getX(e),Hi.y=t.getY(e),Hi.z=t.getZ(e),Hi.normalize(),t.setXYZ(e,Hi.x,Hi.y,Hi.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,r=t.itemSize,i=new n.constructor(e.length*r),o=0,a=0,s=0,u=e.length;s<u;s++){o=e[s]*r;for(var l=0;l<r;l++)i[a++]=n[o++]}return new Ti(i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Gi,n=this.index.array,r=this.attributes;for(var i in r){var o=t(r[i],n);e.setAttribute(i,o)}var a=this.morphAttributes;for(i in a){for(var s=[],u=a[i],l=0,c=u.length;l<c;l++)o=t(u[l],n),s.push(o);e.morphAttributes[i]=s}e.morphTargetsRelative=this.morphTargetsRelative;for(var h=this.groups,f=(l=0,h.length);l<f;l++){var p=h[l];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;null!==r&&(t.data.index={type:r.array.constructor.name,array:Array.prototype.slice.call(r.array)});var i=this.attributes;for(var n in i){var o=(f=i[n]).toJSON();""!==f.name&&(o.name=f.name),t.data.attributes[n]=o}var a={},s=!1;for(var n in this.morphAttributes){for(var u=this.morphAttributes[n],l=[],c=0,h=u.length;c<h;c++){var f;o=(f=u[c]).toJSON(),""!==f.name&&(o.name=f.name),l.push(o)}l.length>0&&(a[n]=l,s=!0)}s&&(t.data.morphAttributes=a,t.data.morphTargetsRelative=this.morphTargetsRelative);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var d=this.boundingSphere;return null!==d&&(t.data.boundingSphere={center:d.center.toArray(),radius:d.radius}),t},clone:function(){return(new Gi).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var a=o[e];this.setAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var u=[],l=s[e];for(n=0,r=l.length;n<r;n++)u.push(l[n].clone());this.morphAttributes[e]=u}this.morphTargetsRelative=t.morphTargetsRelative;var c=t.groups;for(n=0,r=c.length;n<r;n++){var h=c[n];this.addGroup(h.start,h.count,h.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Wi=new sr,qi=new Kr,Xi=new Hr,Yi=new Jn,Qi=new Jn,Zi=new Jn,Ki=new Jn,$i=new Jn,Ji=new Jn,to=new Jn,eo=new Jn,no=new Jn,ro=new Vn,io=new Vn,oo=new Vn,ao=new Jn,so=new Jn;function uo(t,e){Tr.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Gi,this.material=void 0!==e?e:new Ei,this.updateMorphTargets()}function lo(t,e,n,r,i,o,a,s){if(null===(e.side===g?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,e.side!==y,s)))return null;so.copy(s),so.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(so);return u<n.near||u>n.far?null:{distance:u,point:so.clone(),object:t}}function co(t,e,n,r,i,o,a,s,u,l,c,h){Yi.fromBufferAttribute(i,l),Qi.fromBufferAttribute(i,c),Zi.fromBufferAttribute(i,h);var f=t.morphTargetInfluences;if(e.morphTargets&&o&&f){to.set(0,0,0),eo.set(0,0,0),no.set(0,0,0);for(var p=0,d=o.length;p<d;p++){var m=f[p],v=o[p];0!==m&&(Ki.fromBufferAttribute(v,l),$i.fromBufferAttribute(v,c),Ji.fromBufferAttribute(v,h),a?(to.addScaledVector(Ki,m),eo.addScaledVector($i,m),no.addScaledVector(Ji,m)):(to.addScaledVector(Ki.sub(Yi),m),eo.addScaledVector($i.sub(Qi),m),no.addScaledVector(Ji.sub(Zi),m)))}Yi.add(to),Qi.add(eo),Zi.add(no)}t.isSkinnedMesh&&(t.boneTransform(l,Yi),t.boneTransform(c,Qi),t.boneTransform(h,Zi));var g=lo(t,e,n,r,Yi,Qi,Zi,ao);if(g){s&&(ro.fromBufferAttribute(s,l),io.fromBufferAttribute(s,c),oo.fromBufferAttribute(s,h),g.uv=fi.getUV(ao,Yi,Qi,Zi,ro,io,oo,new Vn)),u&&(ro.fromBufferAttribute(u,l),io.fromBufferAttribute(u,c),oo.fromBufferAttribute(u,h),g.uv2=fi.getUV(ao,Yi,Qi,Zi,ro,io,oo,new Vn));var y=new _i(l,c,h);fi.getNormal(Yi,Qi,Zi,y.normal),g.face=y}return g}uo.prototype=Object.assign(Object.create(Tr.prototype),{constructor:uo,isMesh:!0,copy:function(t){return Tr.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){var n,r=this.geometry,i=this.material,o=this.matrixWorld;if(void 0!==i&&(null===r.boundingSphere&&r.computeBoundingSphere(),Xi.copy(r.boundingSphere),Xi.applyMatrix4(o),!1!==t.ray.intersectsSphere(Xi)&&(Wi.getInverse(o),qi.copy(t.ray).applyMatrix4(Wi),null===r.boundingBox||!1!==qi.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var a,s,u,l,c,h,f,p,d,m=r.index,v=r.attributes.position,g=r.morphAttributes.position,y=r.morphTargetsRelative,b=r.attributes.uv,_=r.attributes.uv2,x=r.groups,w=r.drawRange;if(null!==m)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(d=i[(p=x[l]).materialIndex],c=Math.max(p.start,w.start),f=Math.min(p.start+p.count,w.start+w.count);c<f;c+=3)a=m.getX(c),s=m.getX(c+1),u=m.getX(c+2),(n=co(this,d,t,qi,v,g,y,b,_,a,s,u))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(l=Math.max(0,w.start),h=Math.min(m.count,w.start+w.count);l<h;l+=3)a=m.getX(l),s=m.getX(l+1),u=m.getX(l+2),(n=co(this,i,t,qi,v,g,y,b,_,a,s,u))&&(n.faceIndex=Math.floor(l/3),e.push(n));else if(void 0!==v)if(Array.isArray(i))for(l=0,h=x.length;l<h;l++)for(d=i[(p=x[l]).materialIndex],c=Math.max(p.start,w.start),f=Math.min(p.start+p.count,w.start+w.count);c<f;c+=3)(n=co(this,d,t,qi,v,g,y,b,_,a=c,s=c+1,u=c+2))&&(n.faceIndex=Math.floor(c/3),n.face.materialIndex=p.materialIndex,e.push(n));else for(l=Math.max(0,w.start),h=Math.min(v.count,w.start+w.count);l<h;l+=3)(n=co(this,i,t,qi,v,g,y,b,_,a=l,s=l+1,u=l+2))&&(n.faceIndex=Math.floor(l/3),e.push(n))}else if(r.isGeometry){var E,S,T,A,M=Array.isArray(i),C=r.vertices,O=r.faces,P=r.faceVertexUvs[0];P.length>0&&(A=P);for(var k=0,I=O.length;k<I;k++){var L=O[k],R=M?i[L.materialIndex]:i;if(void 0!==R&&(E=C[L.a],S=C[L.b],T=C[L.c],n=lo(this,R,t,qi,E,S,T,ao))){if(A&&A[k]){var D=A[k];ro.copy(D[0]),io.copy(D[1]),oo.copy(D[2]),n.uv=fi.getUV(ao,E,S,T,ro,io,oo,new Vn)}n.face=L,n.faceIndex=k,e.push(n)}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var ho=0,fo=new sr,po=new Tr,mo=new Jn;function vo(){Object.defineProperty(this,"id",{value:ho+=2}),this.uuid=Bn.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}vo.prototype=Object.assign(Object.create(Fn.prototype),{constructor:vo,isGeometry:!0,applyMatrix4:function(t){for(var e=(new Hn).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,a=i.vertexNormals.length;o<a;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return fo.makeRotationX(t),this.applyMatrix4(fo),this},rotateY:function(t){return fo.makeRotationY(t),this.applyMatrix4(fo),this},rotateZ:function(t){return fo.makeRotationZ(t),this.applyMatrix4(fo),this},translate:function(t,e,n){return fo.makeTranslation(t,e,n),this.applyMatrix4(fo),this},scale:function(t,e,n){return fo.makeScale(t,e,n),this.applyMatrix4(fo),this},lookAt:function(t){return po.lookAt(t),po.updateMatrix(),this.applyMatrix4(po.matrix),this},fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes;if(void 0===r.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var i=r.position.array,o=void 0!==r.normal?r.normal.array:void 0,a=void 0!==r.color?r.color.array:void 0,s=void 0!==r.uv?r.uv.array:void 0,u=void 0!==r.uv2?r.uv2.array:void 0;void 0!==u&&(this.faceVertexUvs[1]=[]);for(var l=0;l<i.length;l+=3)e.vertices.push((new Jn).fromArray(i,l)),void 0!==a&&e.colors.push((new vi).fromArray(a,l));function c(t,n,r,i){var l=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()],c=new _i(t,n,r,void 0===o?[]:[(new Jn).fromArray(o,3*t),(new Jn).fromArray(o,3*n),(new Jn).fromArray(o,3*r)],l,i);e.faces.push(c),void 0!==s&&e.faceVertexUvs[0].push([(new Vn).fromArray(s,2*t),(new Vn).fromArray(s,2*n),(new Vn).fromArray(s,2*r)]),void 0!==u&&e.faceVertexUvs[1].push([(new Vn).fromArray(u,2*t),(new Vn).fromArray(u,2*n),(new Vn).fromArray(u,2*r)])}var h=t.groups;if(h.length>0)for(l=0;l<h.length;l++)for(var f=h[l],p=f.start,d=p,m=p+f.count;d<m;d+=3)void 0!==n?c(n[d],n[d+1],n[d+2],f.materialIndex):c(d,d+1,d+2,f.materialIndex);else if(void 0!==n)for(l=0;l<n.length;l+=3)c(n[l],n[l+1],n[l+2]);else for(l=0;l<i.length/3;l+=3)c(l,l+1,l+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(mo).negate(),this.translate(mo.x,mo.y,mo.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new sr;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(r),this},computeFaceNormals:function(){for(var t=new Jn,e=new Jn,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],o=this.vertices[i.a],a=this.vertices[i.b],s=this.vertices[i.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new Jn;if(t){var s,u,l,c=new Jn,h=new Jn;for(r=0,i=this.faces.length;r<i;r++)o=this.faces[r],s=this.vertices[o.a],u=this.vertices[o.b],l=this.vertices[o.c],c.subVectors(l,u),h.subVectors(s,u),c.cross(h),a[o.a].add(c),a[o.b].add(c),a[o.c].add(c)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(o=this.faces[r]).a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var f=(o=this.faces[r]).vertexNormals;3===f.length?(f[0].copy(a[o.a]),f[1].copy(a[o.b]),f[2].copy(a[o.c])):(f[0]=a[o.a].clone(),f[1]=a[o.b].clone(),f[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var o=new vo;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)u=new Jn,l={a:new Jn,b:new Jn,c:new Jn},a.push(u),s.push(l)}var u,l,c=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],u=c.faceNormals[n],l=c.vertexNormals[n],u.copy(i.normal),l.a.copy(i.vertexNormals[0]),l.b.copy(i.vertexNormals[1]),l.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new zr),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new Hr),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,u=t.faces,l=this.colors,c=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new Hn).getNormalMatrix(e));for(var h=0,f=a.length;h<f;h++){var p=a[h].clone();void 0!==e&&p.applyMatrix4(e),o.push(p)}for(h=0,f=c.length;h<f;h++)l.push(c[h].clone());for(h=0,f=u.length;h<f;h++){var d,m,v,g=u[h],y=g.vertexNormals,b=g.vertexColors;(d=new _i(g.a+i,g.b+i,g.c+i)).normal.copy(g.normal),void 0!==r&&d.normal.applyMatrix3(r).normalize();for(var _=0,x=y.length;_<x;_++)m=y[_].clone(),void 0!==r&&m.applyMatrix3(r).normalize(),d.vertexNormals.push(m);for(d.color.copy(g.color),_=0,x=b.length;_<x;_++)v=b[_],d.vertexColors.push(v.clone());d.materialIndex=g.materialIndex+n,s.push(d)}for(h=0,f=t.faceVertexUvs.length;h<f;h++){var w=t.faceVertexUvs[h];for(void 0===this.faceVertexUvs[h]&&(this.faceVertexUvs[h]=[]),_=0,x=w.length;_<x;_++){for(var E=w[_],S=[],T=0,A=E.length;T<A;T++)S.push(E[T].clone());this.faceVertexUvs[h].push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,a,s,u={},l=[],c=[],h=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h)]?(u[e]=n,l.push(this.vertices[n]),c[n]=l.length-1):c[n]=c[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var d=f[n];for(this.faces.splice(d,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(d,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new Jn(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort((function(t,e){return t.materialIndex-e.materialIndex}));var r,i,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),a&&a.length===e&&(i=[]),n=0;n<e;n++){var s=t[n]._id;r&&r.push(o[s]),i&&i.push(a[s])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var a=[],s=[],u={},l=[],c={},h=[],f={};for(i=0;i<this.faces.length;i++){var p=this.faces[i],d=void 0!==this.faceVertexUvs[0][i],m=p.normal.length()>0,v=p.vertexNormals.length>0,g=1!==p.color.r||1!==p.color.g||1!==p.color.b,y=p.vertexColors.length>0,b=0;if(b=E(b,0,0),b=E(b,1,!0),b=E(b,2,!1),b=E(b,3,d),b=E(b,4,m),b=E(b,5,v),b=E(b,6,g),b=E(b,7,y),a.push(b),a.push(p.a,p.b,p.c),a.push(p.materialIndex),d){var _=this.faceVertexUvs[0][i];a.push(A(_[0]),A(_[1]),A(_[2]))}if(m&&a.push(S(p.normal)),v){var x=p.vertexNormals;a.push(S(x[0]),S(x[1]),S(x[2]))}if(g&&a.push(T(p.color)),y){var w=p.vertexColors;a.push(T(w[0]),T(w[1]),T(w[2]))}}function E(t,e,n){return n?t|1<<e:t&~(1<<e)}function S(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]||(u[e]=s.length/3,s.push(t.x,t.y,t.z)),u[e]}function T(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]||(c[e]=l.length,l.push(t.getHex())),c[e]}function A(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]||(f[e]=h.length/2,h.push(t.x,t.y)),f[e]}return t.data={},t.data.vertices=r,t.data.normals=s,l.length>0&&(t.data.colors=l),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new vo).copy(this)},copy:function(t){var e,n,r,i,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var l=t.faces;for(e=0,n=l.length;e<n;e++)this.faces.push(l[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var h=c[r],f=[];for(o=0,a=h.length;o<a;o++){var p=h[o];f.push(p.clone())}this.faceVertexUvs[e].push(f)}}var d=t.morphTargets;for(e=0,n=d.length;e<n;e++){var m={};if(m.name=d[e].name,void 0!==d[e].vertices)for(m.vertices=[],r=0,i=d[e].vertices.length;r<i;r++)m.vertices.push(d[e].vertices[r].clone());if(void 0!==d[e].normals)for(m.normals=[],r=0,i=d[e].normals.length;r<i;r++)m.normals.push(d[e].normals[r].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],r=0,i=v[e].vertexNormals.length;r<i;r++){var y=v[e].vertexNormals[r],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],r=0,i=v[e].faceNormals.length;r<i;r++)g.faceNormals.push(v[e].faceNormals[r].clone());this.morphNormals.push(g)}var _=t.skinWeights;for(e=0,n=_.length;e<n;e++)this.skinWeights.push(_[e].clone());var x=t.skinIndices;for(e=0,n=x.length;e<n;e++)this.skinIndices.push(x[e].clone());var w=t.lineDistances;for(e=0,n=w.length;e<n;e++)this.lineDistances.push(w[e]);var E=t.boundingBox;null!==E&&(this.boundingBox=E.clone());var S=t.boundingSphere;return null!==S&&(this.boundingSphere=S.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});class go extends vo{constructor(t,e,n,r,i,o){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o},this.fromBufferGeometry(new yo(t,e,n,r,i,o)),this.mergeVertices()}}class yo extends Gi{constructor(t,e,n,r,i,o){super(),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,r=Math.floor(r)||1,i=Math.floor(i)||1,o=Math.floor(o)||1;var s=[],u=[],l=[],c=[],h=0,f=0;function p(t,e,n,r,i,o,p,d,m,v,g){var y,b,_=o/m,x=p/v,w=o/2,E=p/2,S=d/2,T=m+1,A=v+1,M=0,C=0,O=new Jn;for(b=0;b<A;b++){var P=b*x-E;for(y=0;y<T;y++){var k=y*_-w;O[t]=k*r,O[e]=P*i,O[n]=S,u.push(O.x,O.y,O.z),O[t]=0,O[e]=0,O[n]=d>0?1:-1,l.push(O.x,O.y,O.z),c.push(y/m),c.push(1-b/v),M+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var I=h+y+T*b,L=h+y+T*(b+1),R=h+(y+1)+T*(b+1),D=h+(y+1)+T*b;s.push(I,L,D),s.push(L,R,D),C+=6}a.addGroup(f,C,g),f+=C,h+=M}p("z","y","x",-1,-1,n,e,t,o,i,0),p("z","y","x",1,-1,n,e,-t,o,i,1),p("x","z","y",1,1,t,n,e,r,o,2),p("x","z","y",1,-1,t,n,-e,r,o,3),p("x","y","z",1,-1,t,e,n,r,i,4),p("x","y","z",-1,-1,t,e,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new Li(u,3)),this.setAttribute("normal",new Li(l,3)),this.setAttribute("uv",new Li(c,2))}}function bo(t){var e={};for(var n in t)for(var r in e[n]={},t[n]){var i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture)?e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}return e}function _o(t){for(var e={},n=0;n<t.length;n++){var r=bo(t[n]);for(var i in r)e[i]=r[i]}return e}var xo={clone:bo,merge:_o};function wo(t){wi.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Eo(){Tr.call(this),this.type="Camera",this.matrixWorldInverse=new sr,this.projectionMatrix=new sr,this.projectionMatrixInverse=new sr}function So(t,e,n,r){Eo.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}wo.prototype=Object.create(wi.prototype),wo.prototype.constructor=wo,wo.prototype.isShaderMaterial=!0,wo.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=bo(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},wo.prototype.toJSON=function(t){var e=wi.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var r=this.uniforms[n].value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var i={};for(var o in this.extensions)!0===this.extensions[o]&&(i[o]=!0);return Object.keys(i).length>0&&(e.extensions=i),e},Eo.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Eo,isCamera:!0,copy:function(t,e){return Tr.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Jn),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Tr.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){Tr.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),So.prototype=Object.assign(Object.create(Eo.prototype),{constructor:So,isPerspectiveCamera:!0,copy:function(t,e){return Eo.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Bn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*Bn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Bn.RAD2DEG*Math.atan(Math.tan(.5*Bn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,r,i,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*Bn.DEG2RAD*this.fov)/this.zoom,n=2*e,r=this.aspect*n,i=-.5*r,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;i+=o.offsetX*r/a,e-=o.offsetY*n/s,r*=o.width/a,n*=o.height/s}var u=this.filmOffset;0!==u&&(i+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Tr.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var To=90;function Ao(t,e,n,r){Tr.call(this),this.type="CubeCamera";var i=new So(To,1,t,e);i.up.set(0,-1,0),i.lookAt(new Jn(1,0,0)),this.add(i);var o=new So(To,1,t,e);o.up.set(0,-1,0),o.lookAt(new Jn(-1,0,0)),this.add(o);var a=new So(To,1,t,e);a.up.set(0,0,1),a.lookAt(new Jn(0,1,0)),this.add(a);var s=new So(To,1,t,e);s.up.set(0,0,-1),s.lookAt(new Jn(0,-1,0)),this.add(s);var u=new So(To,1,t,e);u.up.set(0,-1,0),u.lookAt(new Jn(0,0,1)),this.add(u);var l=new So(To,1,t,e);l.up.set(0,-1,0),l.lookAt(new Jn(0,0,-1)),this.add(l),r=r||{format:zt,magFilter:wt,minFilter:wt},this.renderTarget=new Mo(n,r),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),r=this.renderTarget,c=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,t.setRenderTarget(r,0),t.render(e,i),t.setRenderTarget(r,1),t.render(e,o),t.setRenderTarget(r,2),t.render(e,a),t.setRenderTarget(r,3),t.render(e,s),t.setRenderTarget(r,4),t.render(e,u),r.texture.generateMipmaps=c,t.setRenderTarget(r,5),t.render(e,l),t.setRenderTarget(n)},this.clear=function(t,e,n,r){for(var i=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,r);t.setRenderTarget(i)}}function Mo(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),Yn.call(this,t,t,e)}function Co(t,e,n,r,i,o,a,s,u,l,c,h){qn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==u?u:gt,this.minFilter=void 0!==l?l:gt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Ao.prototype=Object.create(Tr.prototype),Ao.prototype.constructor=Ao,Mo.prototype=Object.create(Yn.prototype),Mo.prototype.constructor=Mo,Mo.prototype.isWebGLCubeRenderTarget=!0,Mo.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=e.format,this.texture.encoding=e.encoding;var n=new Ar,r={uniforms:{tEquirect:{value:null}},vertexShader:["varying vec3 vWorldDirection;","vec3 transformDirection( in vec3 dir, in mat4 matrix ) {","\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );","}","void main() {","\tvWorldDirection = transformDirection( position, modelMatrix );","\t#include <begin_vertex>","\t#include <project_vertex>","}"].join("\n"),fragmentShader:["uniform sampler2D tEquirect;","varying vec3 vWorldDirection;","#define RECIPROCAL_PI 0.31830988618","#define RECIPROCAL_PI2 0.15915494","void main() {","\tvec3 direction = normalize( vWorldDirection );","\tvec2 sampleUV;","\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;","\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;","\tgl_FragColor = texture2D( tEquirect, sampleUV );","}"].join("\n")},i=new wo({type:"CubemapFromEquirect",uniforms:bo(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:g,blending:x});i.uniforms.tEquirect.value=e;var o=new uo(new yo(5,5,5),i);n.add(o);var a=new Ao(1,10,1);return a.renderTarget=this,a.renderTarget.texture.name="CubeCameraTexture",a.update(t,n),o.geometry.dispose(),o.material.dispose(),this},Co.prototype=Object.create(qn.prototype),Co.prototype.constructor=Co,Co.prototype.isDataTexture=!0;var Oo=new Hr,Po=new Jn;function ko(t,e,n,r,i,o){this.planes=[void 0!==t?t:new ei,void 0!==e?e:new ei,void 0!==n?n:new ei,void 0!==r?r:new ei,void 0!==i?i:new ei,void 0!==o?o:new ei]}Object.assign(ko.prototype,{set:function(t,e,n,r,i,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=n[5],l=n[6],c=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-r,c-s,d-h,y-m).normalize(),e[1].setComponents(a+r,c+s,d+h,y+m).normalize(),e[2].setComponents(a+i,c+u,d+f,y+v).normalize(),e[3].setComponents(a-i,c-u,d-f,y-v).normalize(),e[4].setComponents(a-o,c-l,d-p,y-g).normalize(),e[5].setComponents(a+o,c+l,d+p,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Oo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Oo)},intersectsSprite:function(t){return Oo.center.set(0,0,0),Oo.radius=.7071067811865476,Oo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Oo)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++)if(e[i].distanceToPoint(n)<r)return!1;return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(Po.x=r.normal.x>0?t.max.x:t.min.x,Po.y=r.normal.y>0?t.max.y:t.min.y,Po.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Po)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Io={common:{diffuse:{value:new vi(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Vn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vi(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new vi(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new vi(15658734)},opacity:{value:1},center:{value:new Vn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}}};function Lo(){var t=null,e=!1,n=null;function r(i,o){!1!==e&&(n(i,o),t.requestAnimationFrame(r))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(r),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Ro(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=r.get(e);n&&(t.deleteBuffer(n.buffer),r.delete(e))},update:function(e,i){e.isInterleavedBufferAttribute&&(e=e.data);var o=r.get(e);void 0===o?r.set(e,function(e,n){var r=e.array,i=e.usage,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,r,i),e.onUploadCallback();var a=5126;return r instanceof Float32Array?a=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?a=5123:r instanceof Int16Array?a=5122:r instanceof Uint32Array?a=5125:r instanceof Int32Array?a=5124:r instanceof Int8Array?a=5120:r instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}(e,i)):o.version<e.version&&(function(e,r,i){var o=r.array,a=r.updateRange;t.bindBuffer(i,e),-1===a.count?t.bufferSubData(i,0,o):(n?t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(i,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}(o.buffer,e,i),o.version=e.version)}}}function Do(t,e,n,r){vo.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new No(t,e,n,r)),this.mergeVertices()}function No(t,e,n,r){Gi.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,a=(t=t||1)/2,s=(e=e||1)/2,u=Math.floor(n)||1,l=Math.floor(r)||1,c=u+1,h=l+1,f=t/u,p=e/l,d=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(i=0;i<c;i++){var b=i*f-a;m.push(b,-y,0),v.push(0,0,1),g.push(i/u),g.push(1-o/l)}}for(o=0;o<l;o++)for(i=0;i<u;i++){var _=i+c*o,x=i+c*(o+1),w=i+1+c*(o+1),E=i+1+c*o;d.push(_,x,E),d.push(x,w,E)}this.setIndex(d),this.setAttribute("position",new Li(m,3)),this.setAttribute("normal",new Li(v,3)),this.setAttribute("uv",new Li(g,2))}Do.prototype=Object.create(vo.prototype),Do.prototype.constructor=Do,No.prototype=Object.create(Gi.prototype),No.prototype.constructor=No;var Fo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},jo={basic:{uniforms:_o([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.fog]),vertexShader:Fo.meshbasic_vert,fragmentShader:Fo.meshbasic_frag},lambert:{uniforms:_o([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.fog,Io.lights,{emissive:{value:new vi(0)}}]),vertexShader:Fo.meshlambert_vert,fragmentShader:Fo.meshlambert_frag},phong:{uniforms:_o([Io.common,Io.specularmap,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.fog,Io.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:Fo.meshphong_vert,fragmentShader:Fo.meshphong_frag},standard:{uniforms:_o([Io.common,Io.envmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.roughnessmap,Io.metalnessmap,Io.fog,Io.lights,{emissive:{value:new vi(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Fo.meshphysical_vert,fragmentShader:Fo.meshphysical_frag},toon:{uniforms:_o([Io.common,Io.specularmap,Io.aomap,Io.lightmap,Io.emissivemap,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.gradientmap,Io.fog,Io.lights,{emissive:{value:new vi(0)},specular:{value:new vi(1118481)},shininess:{value:30}}]),vertexShader:Fo.meshtoon_vert,fragmentShader:Fo.meshtoon_frag},matcap:{uniforms:_o([Io.common,Io.bumpmap,Io.normalmap,Io.displacementmap,Io.fog,{matcap:{value:null}}]),vertexShader:Fo.meshmatcap_vert,fragmentShader:Fo.meshmatcap_frag},points:{uniforms:_o([Io.points,Io.fog]),vertexShader:Fo.points_vert,fragmentShader:Fo.points_frag},dashed:{uniforms:_o([Io.common,Io.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Fo.linedashed_vert,fragmentShader:Fo.linedashed_frag},depth:{uniforms:_o([Io.common,Io.displacementmap]),vertexShader:Fo.depth_vert,fragmentShader:Fo.depth_frag},normal:{uniforms:_o([Io.common,Io.bumpmap,Io.normalmap,Io.displacementmap,{opacity:{value:1}}]),vertexShader:Fo.normal_vert,fragmentShader:Fo.normal_frag},sprite:{uniforms:_o([Io.sprite,Io.fog]),vertexShader:Fo.sprite_vert,fragmentShader:Fo.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null}},vertexShader:Fo.background_vert,fragmentShader:Fo.background_frag},cube:{uniforms:_o([Io.envmap,{opacity:{value:1}}]),vertexShader:Fo.cube_vert,fragmentShader:Fo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Fo.equirect_vert,fragmentShader:Fo.equirect_frag},distanceRGBA:{uniforms:_o([Io.common,Io.displacementmap,{referencePosition:{value:new Jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Fo.distanceRGBA_vert,fragmentShader:Fo.distanceRGBA_frag},shadow:{uniforms:_o([Io.lights,Io.fog,{color:{value:new vi(0)},opacity:{value:1}}]),vertexShader:Fo.shadow_vert,fragmentShader:Fo.shadow_frag}};function Uo(t,e,n,r){var i,o,a=new vi(0),s=0,u=null,l=0,c=null;function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,r)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),h(a,s=void 0!==e?e:1)},getClearAlpha:function(){return s},setClearAlpha:function(t){h(a,s=t)},render:function(e,r,f,p){var d=r.background,m=t.xr,y=m.getSession&&m.getSession();if(y&&"additive"===y.environmentBlendMode&&(d=null),null===d?h(a,s):d&&d.isColor&&(h(d,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLCubeRenderTarget||d.mapping===ft)){void 0===o&&((o=new uo(new yo(1,1,1),new wo({type:"BackgroundCubeMaterial",uniforms:bo(jo.cube.uniforms),vertexShader:jo.cube.vertexShader,fragmentShader:jo.cube.fragmentShader,side:g,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var b=d.isWebGLCubeRenderTarget?d.texture:d;o.material.uniforms.envMap.value=b,o.material.uniforms.flipEnvMap.value=b.isCubeTexture?-1:1,u===d&&l===b.version&&c===t.toneMapping||(o.material.needsUpdate=!0,u=d,l=b.version,c=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===i&&((i=new uo(new No(2,2),new wo({type:"BackgroundMaterial",uniforms:bo(jo.background.uniforms),vertexShader:jo.background.vertexShader,fragmentShader:jo.background.fragmentShader,side:v,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(i.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(i)),i.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),i.material.uniforms.uvTransform.value.copy(d.matrix),u===d&&l===d.version&&c===t.toneMapping||(i.material.needsUpdate=!0,u=d,l=d.version,c=t.toneMapping),e.unshift(i,i.geometry,i.material,0,0,null))}}}function zo(t,e,n,r){var i,o=r.isWebGL2;this.setMode=function(t){i=t},this.render=function(e,r){t.drawArrays(i,e,r),n.update(r,i)},this.renderInstances=function(r,a,s,u){if(0!==u){var l,c;if(o)l=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](i,a,s,u),n.update(s,i,u)}}}function Bo(t,e,n){var r;function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,a=void 0!==n.precision?n.precision:"highp",s=i(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);var u=!0===n.logarithmicDepthBuffer,l=t.getParameter(34930),c=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),d=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=c>0,y=o||!!e.get("OES_texture_float");return{isWebGL2:o,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:a,logarithmicDepthBuffer:u,maxTextures:l,maxVertexTextures:c,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:o?t.getParameter(36183):0}}function Vo(){var t=this,e=null,n=0,r=!1,i=!1,o=new ei,a=new Hn,s={value:null,needsUpdate:!1};function u(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function l(e,n,r,i){var u=null!==e?e.length:0,l=null;if(0!==u){if(l=s.value,!0!==i||null===l){var c=r+4*u,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===l||l.length<c)&&(l=new Float32Array(c));for(var f=0,p=r;f!==u;++f,p+=4)o.copy(e[f]).applyMatrix4(h,a),o.normal.toArray(l,p),l[p+3]=o.constant}s.value=l,s.needsUpdate=!0}return t.numPlanes=u,t.numIntersection=0,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,i,o){var a=0!==t.length||i||0!==n||r;return r=i,e=l(t,o,0),n=t.length,a},this.beginShadows=function(){i=!0,l(null)},this.endShadows=function(){i=!1,u()},this.setState=function(t,o,a,c,h,f){if(!r||null===t||0===t.length||i&&!a)i?l(null):u();else{var p=i?0:n,d=4*p,m=h.clippingState||null;s.value=m,m=l(t,c,d,f);for(var v=0;v!==d;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function Ho(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return null===r&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=r,r}}}function Go(t,e,n){var r=new WeakMap,i=new WeakMap;function o(t){var a=t.target,s=r.get(a);for(var u in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[u]);a.removeEventListener("dispose",o),r.delete(a);var l=i.get(s);l&&(e.remove(l),i.delete(s)),n.memory.geometries--}function a(t){var n=[],r=t.index,o=t.attributes.position,a=0;if(null!==r){var s=r.array;a=r.version;for(var u=0,l=s.length;u<l;u+=3){var c=s[u+0],h=s[u+1],f=s[u+2];n.push(c,h,h,f,f,c)}}else for(s=o.array,a=o.version,u=0,l=s.length/3-1;u<l;u+=3)c=u+0,h=u+1,f=u+2,n.push(c,h,h,f,f,c);var p=new(Ni(n)>65535?Ii:Pi)(n,1);p.version=a,e.update(p,34963);var d=i.get(t);d&&e.remove(d),i.set(t,p)}return{get:function(t,e){var i=r.get(e);return i||(e.addEventListener("dispose",o),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Gi).setFromObject(t)),i=e._bufferGeometry),r.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.index,r=t.attributes;for(var i in null!==n&&e.update(n,34963),r)e.update(r[i],34962);var o=t.morphAttributes;for(var i in o)for(var a=o[i],s=0,u=a.length;s<u;s++)e.update(a[s],34962)},getWireframeAttribute:function(t){var e=i.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return i.get(t)}}}function Wo(t,e,n,r){var i,o,a,s=r.isWebGL2;this.setMode=function(t){i=t},this.setIndex=function(t){o=t.type,a=t.bytesPerElement},this.render=function(e,r){t.drawElements(i,r,o,e*a),n.update(r,i)},this.renderInstances=function(r,u,l,c){if(0!==c){var h,f;if(s)h=t,f="drawElementsInstanced";else if(f="drawElementsInstancedANGLE",null===(h=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");h[f](i,l,o,u*a,c),n.update(l,i,c)}}}function qo(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(r=r||1,e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function Xo(t,e){return Math.abs(e[1])-Math.abs(t[1])}function Yo(t){var e={},n=new Float32Array(8);return{update:function(r,i,o,a){var s=r.morphTargetInfluences,u=void 0===s?0:s.length,l=e[i.id];if(void 0===l){l=[];for(var c=0;c<u;c++)l[c]=[c,0];e[i.id]=l}var h=o.morphTargets&&i.morphAttributes.position,f=o.morphNormals&&i.morphAttributes.normal;for(c=0;c<u;c++)0!==(d=l[c])[1]&&(h&&i.deleteAttribute("morphTarget"+c),f&&i.deleteAttribute("morphNormal"+c));for(c=0;c<u;c++)(d=l[c])[0]=c,d[1]=s[c];l.sort(Xo);var p=0;for(c=0;c<8;c++){var d;if(d=l[c]){var m=d[0],v=d[1];if(v){h&&i.setAttribute("morphTarget"+c,h[m]),f&&i.setAttribute("morphNormal"+c,f[m]),n[c]=v,p+=v;continue}}n[c]=0}var g=i.morphTargetsRelative?1:1-p;a.getUniforms().setValue(t,"morphTargetBaseInfluence",g),a.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function Qo(t,e,n,r){var i=new WeakMap;return{update:function(t){var o=r.render.frame,a=t.geometry,s=e.get(t,a);return i.get(s)!==o&&(a.isGeometry&&s.updateFromObject(t),e.update(s),i.set(s,o)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){i=new WeakMap}}}function Zo(t,e,n,r,i,o,a,s,u,l){t=void 0!==t?t:[],e=void 0!==e?e:st,a=void 0!==a?a:zt,qn.call(this,t,e,n,r,i,o,a,s,u,l),this.flipY=!1}function Ko(t,e,n,r){qn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=gt,this.minFilter=gt,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function $o(t,e,n,r){qn.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:r||1},this.magFilter=gt,this.minFilter=gt,this.wrapR=mt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}jo.physical={uniforms:_o([jo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Vn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new vi(0)},transparency:{value:0}}]),vertexShader:Fo.meshphysical_vert,fragmentShader:Fo.meshphysical_frag},Zo.prototype=Object.create(qn.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isCubeTexture=!0,Object.defineProperty(Zo.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),Ko.prototype=Object.create(qn.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isDataTexture2DArray=!0,$o.prototype=Object.create(qn.prototype),$o.prototype.constructor=$o,$o.prototype.isDataTexture3D=!0;var Jo=new qn,ta=new Ko,ea=new $o,na=new Zo,ra=[],ia=[],oa=new Float32Array(16),aa=new Float32Array(9),sa=new Float32Array(4);function ua(t,e,n){var r=t[0];if(r<=0||r>0)return t;var i=e*n,o=ra[i];if(void 0===o&&(o=new Float32Array(i),ra[i]=o),0!==e){r.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function la(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function ca(t,e){for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}function ha(t,e){var n=ia[e];void 0===n&&(n=new Int32Array(e),ia[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function fa(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function pa(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(la(n,e))return;t.uniform2fv(this.addr,e),ca(n,e)}}function da(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(la(n,e))return;t.uniform3fv(this.addr,e),ca(n,e)}}function ma(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(la(n,e))return;t.uniform4fv(this.addr,e),ca(n,e)}}function va(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(la(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ca(n,e)}else{if(la(n,r))return;sa.set(r),t.uniformMatrix2fv(this.addr,!1,sa),ca(n,r)}}function ga(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(la(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ca(n,e)}else{if(la(n,r))return;aa.set(r),t.uniformMatrix3fv(this.addr,!1,aa),ca(n,r)}}function ya(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(la(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ca(n,e)}else{if(la(n,r))return;oa.set(r),t.uniformMatrix4fv(this.addr,!1,oa),ca(n,r)}}function ba(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTexture2D(e||Jo,i)}function _a(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||ta,i)}function xa(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||ea,i)}function wa(t,e,n){var r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.safeSetTextureCube(e||na,i)}function Ea(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Sa(t,e){var n=this.cache;la(n,e)||(t.uniform2iv(this.addr,e),ca(n,e))}function Ta(t,e){var n=this.cache;la(n,e)||(t.uniform3iv(this.addr,e),ca(n,e))}function Aa(t,e){var n=this.cache;la(n,e)||(t.uniform4iv(this.addr,e),ca(n,e))}function Ma(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Ca(t,e){t.uniform1fv(this.addr,e)}function Oa(t,e){t.uniform1iv(this.addr,e)}function Pa(t,e){t.uniform2iv(this.addr,e)}function ka(t,e){t.uniform3iv(this.addr,e)}function Ia(t,e){t.uniform4iv(this.addr,e)}function La(t,e){var n=ua(e,this.size,2);t.uniform2fv(this.addr,n)}function Ra(t,e){var n=ua(e,this.size,3);t.uniform3fv(this.addr,n)}function Da(t,e){var n=ua(e,this.size,4);t.uniform4fv(this.addr,n)}function Na(t,e){var n=ua(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Fa(t,e){var n=ua(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function ja(t,e){var n=ua(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Ua(t,e,n){var r=e.length,i=ha(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTexture2D(e[o]||Jo,i[o])}function za(t,e,n){var r=e.length,i=ha(n,r);t.uniform1iv(this.addr,i);for(var o=0;o!==r;++o)n.safeSetTextureCube(e[o]||na,i[o])}function Ba(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return fa;case 35664:return pa;case 35665:return da;case 35666:return ma;case 35674:return va;case 35675:return ga;case 35676:return ya;case 5124:case 35670:return Ea;case 35667:case 35671:return Sa;case 35668:case 35672:return Ta;case 35669:case 35673:return Aa;case 5125:return Ma;case 35678:case 36198:case 36298:case 36306:case 35682:return ba;case 35679:case 36299:case 36307:return xa;case 35680:case 36300:case 36308:case 36293:return wa;case 36289:case 36303:case 36311:case 36292:return _a}}(e.type)}function Va(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Ca;case 35664:return La;case 35665:return Ra;case 35666:return Da;case 35674:return Na;case 35675:return Fa;case 35676:return ja;case 5124:case 35670:return Oa;case 35667:case 35671:return Pa;case 35668:case 35672:return ka;case 35669:case 35673:return Ia;case 35678:case 36198:case 36298:case 36306:case 35682:return Ua;case 35680:case 36300:case 36308:case 36293:return za}}(e.type)}function Ha(t){this.id=t,this.seq=[],this.map={}}Va.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ca(e,t)},Ha.prototype.setValue=function(t,e,n){for(var r=this.seq,i=0,o=r.length;i!==o;++i){var a=r[i];a.setValue(t,e[a.id],n)}};var Ga=/([\w\d_]+)(\])?(\[|\.)?/g;function Wa(t,e){t.seq.push(e),t.map[e.id]=e}function qa(t,e,n){var r=t.name,i=r.length;for(Ga.lastIndex=0;;){var o=Ga.exec(r),a=Ga.lastIndex,s=o[1],u="]"===o[2],l=o[3];if(u&&(s|=0),void 0===l||"["===l&&a+2===i){Wa(n,void 0===l?new Ba(s,t,e):new Va(s,t,e));break}var c=n.map[s];void 0===c&&Wa(n,c=new Ha(s)),n=c}}function Xa(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var i=t.getActiveUniform(e,r);qa(i,t.getUniformLocation(e,i.name),this)}}function Ya(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}Xa.prototype.setValue=function(t,e,n,r){var i=this.map[e];void 0!==i&&i.setValue(t,n,r)},Xa.prototype.setOptional=function(t,e,n){var r=e[n];void 0!==r&&this.setValue(t,n,r)},Xa.upload=function(t,e,n,r){for(var i=0,o=e.length;i!==o;++i){var a=e[i],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,r)}},Xa.seqWithValue=function(t,e){for(var n=[],r=0,i=t.length;r!==i;++r){var o=t[r];o.id in e&&n.push(o)}return n};var Qa=0;function Za(t){switch(t){case Je:return["Linear","( value )"];case tn:return["sRGB","( value )"];case nn:return["RGBE","( value )"];case on:return["RGBM","( value, 7.0 )"];case an:return["RGBM","( value, 16.0 )"];case sn:return["RGBD","( value, 256.0 )"];case en:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case rn:return["LogLuv","( value )"];default:throw new Error("unsupported encoding: "+t)}}function Ka(t,e,n){var r=t.getShaderParameter(e,35713),i=t.getShaderInfoLog(e).trim();return r&&""===i?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+i+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function $a(t,e){var n=Za(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ja(t,e){var n;switch(e){case et:n="Linear";break;case nt:n="Reinhard";break;case rt:n="Uncharted2";break;case it:n="OptimizedCineon";break;case ot:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function ts(t){return""!==t}function es(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ns(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var rs=/^[ \t]*#include +<([\w\d./]+)>/gm;function is(t){return t.replace(rs,os)}function os(t,e){var n=Fo[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return is(n)}var as=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ss=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g;function us(t){return t.replace(ss,cs).replace(as,ls)}function ls(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),cs(0,e,n,r)}function cs(t,e,n,r){for(var i="",o=parseInt(e);o<parseInt(n);o++)i+=r.replace(/\[ i \]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function hs(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function fs(t,e,n){var r,i,o,a,s=t.getContext(),u=n.defines,l=n.vertexShader,c=n.fragmentShader,h=function(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===p?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===m&&(e="SHADOWMAP_TYPE_VSM"),e}(n),f=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case st:case ut:e="ENVMAP_TYPE_CUBE";break;case ft:case pt:e="ENVMAP_TYPE_CUBE_UV";break;case lt:case ct:e="ENVMAP_TYPE_EQUIREC";break;case ht:e="ENVMAP_TYPE_SPHERE"}return e}(n),v=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case ut:case ct:e="ENVMAP_MODE_REFRACTION"}return e}(n),g=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case K:e="ENVMAP_BLENDING_MULTIPLY";break;case $:e="ENVMAP_BLENDING_MIX";break;case J:e="ENVMAP_BLENDING_ADD"}return e}(n),y=t.gammaFactor>0?t.gammaFactor:1,b=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(ts).join("\n")}(n),_=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(u),x=s.createProgram();if(n.isRawShaderMaterial?((r=[_].filter(ts).join("\n")).length>0&&(r+="\n"),(i=[b,_].filter(ts).join("\n")).length>0&&(i+="\n")):(r=[hs(n),"#define SHADER_NAME "+n.shaderName,_,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ts).join("\n"),i=[b,hs(n),"#define SHADER_NAME "+n.shaderName,_,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.envMap?"#define "+v:"",n.envMap?"#define "+g:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==tt?"#define TONE_MAPPING":"",n.toneMapping!==tt?Fo.tonemapping_pars_fragment:"",n.toneMapping!==tt?Ja("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.matcapEncoding||n.envMapEncoding||n.emissiveMapEncoding||n.lightMapEncoding?Fo.encodings_pars_fragment:"",n.mapEncoding?$a("mapTexelToLinear",n.mapEncoding):"",n.matcapEncoding?$a("matcapTexelToLinear",n.matcapEncoding):"",n.envMapEncoding?$a("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?$a("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMapEncoding?$a("lightMapTexelToLinear",n.lightMapEncoding):"",n.outputEncoding?("linearToOutputTexel",o=n.outputEncoding,a=Za(o),"vec4 linearToOutputTexel( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"):"",n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(ts).join("\n")),l=ns(l=es(l=is(l),n),n),c=ns(c=es(c=is(c),n),n),l=us(l),c=us(c),n.isWebGL2&&!n.isRawShaderMaterial){var w=!1,E=/^\s*#version\s+300\s+es\s*\n/;n.isShaderMaterial&&null!==l.match(E)&&null!==c.match(E)&&(w=!0,l=l.replace(E,""),c=c.replace(E,"")),r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,i=["#version 300 es\n","#define varying in",w?"":"out highp vec4 pc_fragColor;",w?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+i}var S,T,A=i+c,M=Ya(s,35633,r+l),C=Ya(s,35632,A);if(s.attachShader(x,M),s.attachShader(x,C),void 0!==n.index0AttributeName?s.bindAttribLocation(x,0,n.index0AttributeName):!0===n.morphTargets&&s.bindAttribLocation(x,0,"position"),s.linkProgram(x),t.debug.checkShaderErrors){var O=s.getProgramInfoLog(x).trim(),P=s.getShaderInfoLog(M).trim(),k=s.getShaderInfoLog(C).trim(),I=!0,L=!0;if(!1===s.getProgramParameter(x,35714)){I=!1;var R=Ka(s,M,"vertex"),D=Ka(s,C,"fragment");console.error("THREE.WebGLProgram: shader error: ",s.getError(),"35715",s.getProgramParameter(x,35715),"gl.getProgramInfoLog",O,R,D)}else""!==O?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",O):""!==P&&""!==k||(L=!1);L&&(this.diagnostics={runnable:I,programLog:O,vertexShader:{log:P,prefix:r},fragmentShader:{log:k,prefix:i}})}return s.deleteShader(M),s.deleteShader(C),this.getUniforms=function(){return void 0===S&&(S=new Xa(s,x)),S},this.getAttributes=function(){return void 0===T&&(T=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),i=0;i<r;i++){var o=t.getActiveAttrib(e,i).name;n[o]=t.getAttribLocation(e,o)}return n}(s,x)),T},this.destroy=function(){s.deleteProgram(x),this.program=void 0},this.name=n.shaderName,this.id=Qa++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=M,this.fragmentShader=C,this}function ps(t,e,n){var r=[],i=n.isWebGL2,o=n.logarithmicDepthBuffer,a=n.floatVertexTextures,s=n.precision,u=n.maxVertexUniforms,l=n.vertexTextures,c={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},h=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen"];function f(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Je,e}this.getParameters=function(r,h,p,d,m,v,b){var _=d.fog,x=r.isMeshStandardMaterial?d.environment:null,w=r.envMap||x,E=c[r.type],S=b.isSkinnedMesh?function(t){var e=t.skeleton.bones;if(a)return 1024;var n=u,r=Math.floor((n-20)/4),i=Math.min(r,e.length);return i<e.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+e.length+" bones. This GPU supports "+i+"."),0):i}(b):0;null!==r.precision&&(s=n.getMaxPrecision(r.precision))!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",s,"instead.");var T=function(t,e){var n;if(e){var r=jo[e];n={name:t.type,uniforms:xo.clone(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader}}else n={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};return n}(r,E);r.onBeforeCompile(T,t);var A=t.getRenderTarget();return{isWebGL2:i,shaderID:E,shaderName:T.name,uniforms:T.uniforms,vertexShader:T.vertexShader,fragmentShader:T.fragmentShader,defines:r.defines,isRawShaderMaterial:r.isRawShaderMaterial,isShaderMaterial:r.isShaderMaterial,precision:s,instancing:!0===b.isInstancedMesh,supportsVertexTextures:l,outputEncoding:null!==A?f(A.texture):t.outputEncoding,map:!!r.map,mapEncoding:f(r.map),matcap:!!r.matcap,matcapEncoding:f(r.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:f(w),envMapCubeUV:!!w&&(w.mapping===ft||w.mapping===pt),lightMap:!!r.lightMap,lightMapEncoding:f(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:f(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===hn,tangentSpaceNormalMap:r.normalMapType===cn,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatMap||r.clearcoatRoughnessMap||r.clearcoatNormalMap||r.displacementMap),uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||!r.displacementMap),fog:!!_,useFog:r.fog,fogExp2:_&&_.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:o,skinning:r.skinning&&S>0,maxBones:S,useVertexTexture:a,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&p.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:tt,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===y,flipSided:r.side===g,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:i||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:i||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:i||null!==e.get("EXT_shader_texture_lod"),onBeforeCompile:r.onBeforeCompile}},this.getProgramCacheKey=function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);if(void 0===e.isRawShaderMaterial){for(var i=0;i<h.length;i++)n.push(e[h[i]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.onBeforeCompile.toString()),n.join()},this.acquireProgram=function(e,n){for(var i,o=0,a=r.length;o<a;o++){var s=r[o];if(s.cacheKey===n){++(i=s).usedTimes;break}}return void 0===i&&(i=new fs(t,n,e),r.push(i)),i},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function ds(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,r){t.get(e)[n]=r},dispose:function(){t=new WeakMap}}}function ms(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function vs(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function gs(){var t=[],e=0,n=[],r=[],i={id:-1};function o(n,r,o,a,s,u){var l=t[e];return void 0===l?(l={id:n.id,object:n,geometry:r,material:o,program:o.program||i,groupOrder:a,renderOrder:n.renderOrder,z:s,group:u},t[e]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=o,l.program=o.program||i,l.groupOrder=a,l.renderOrder=n.renderOrder,l.z=s,l.group=u),e++,l}return{opaque:n,transparent:r,init:function(){e=0,n.length=0,r.length=0},push:function(t,e,i,a,s,u){var l=o(t,e,i,a,s,u);(!0===i.transparent?r:n).push(l)},unshift:function(t,e,i,a,s,u){var l=o(t,e,i,a,s,u);(!0===i.transparent?r:n).unshift(l)},finish:function(){for(var n=e,r=t.length;n<r;n++){var i=t[n];if(null===i.id)break;i.id=null,i.object=null,i.geometry=null,i.material=null,i.program=null,i.group=null}},sort:function(t,e){n.length>1&&n.sort(t||ms),r.length>1&&r.sort(e||vs)}}}function ys(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}return{get:function(n,r){var i,o=t.get(n);return void 0===o?(i=new gs,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):void 0===(i=o.get(r))&&(i=new gs,o.set(r,i)),i},dispose:function(){t=new WeakMap}}}function bs(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Jn,color:new vi};break;case"SpotLight":n={position:new Jn,direction:new Jn,color:new vi,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Jn,color:new vi,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Jn,skyColor:new vi,groundColor:new vi};break;case"RectAreaLight":n={color:new vi,position:new Jn,halfWidth:new Jn,halfHeight:new Jn}}return t[e.id]=n,n}}}var _s=0;function xs(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function ws(){for(var t,e=new bs,n=(t={},{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new Vn};break;case"PointLight":n={shadowBias:0,shadowRadius:1,shadowMapSize:new Vn,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=n,n}}),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)r.probe.push(new Jn);var o=new Jn,a=new sr,s=new sr;return{setup:function(t,i,u){for(var l=0,c=0,h=0,f=0;f<9;f++)r.probe[f].set(0,0,0);var p=0,d=0,m=0,v=0,g=0,y=0,b=0,_=0,x=u.matrixWorldInverse;t.sort(xs),f=0;for(var w=t.length;f<w;f++){var E=t[f],S=E.color,T=E.intensity,A=E.distance,M=E.shadow&&E.shadow.map?E.shadow.map.texture:null;if(E.isAmbientLight)l+=S.r*T,c+=S.g*T,h+=S.b*T;else if(E.isLightProbe)for(var C=0;C<9;C++)r.probe[C].addScaledVector(E.sh.coefficients[C],T);else if(E.isDirectionalLight){if((k=e.get(E)).color.copy(E.color).multiplyScalar(E.intensity),k.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(x),E.castShadow){var O=E.shadow;(P=n.get(E)).shadowBias=O.bias,P.shadowRadius=O.radius,P.shadowMapSize=O.mapSize,r.directionalShadow[p]=P,r.directionalShadowMap[p]=M,r.directionalShadowMatrix[p]=E.shadow.matrix,y++}r.directional[p]=k,p++}else if(E.isSpotLight)(k=e.get(E)).position.setFromMatrixPosition(E.matrixWorld),k.position.applyMatrix4(x),k.color.copy(S).multiplyScalar(T),k.distance=A,k.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),k.direction.sub(o),k.direction.transformDirection(x),k.coneCos=Math.cos(E.angle),k.penumbraCos=Math.cos(E.angle*(1-E.penumbra)),k.decay=E.decay,E.castShadow&&(O=E.shadow,(P=n.get(E)).shadowBias=O.bias,P.shadowRadius=O.radius,P.shadowMapSize=O.mapSize,r.spotShadow[m]=P,r.spotShadowMap[m]=M,r.spotShadowMatrix[m]=E.shadow.matrix,_++),r.spot[m]=k,m++;else if(E.isRectAreaLight)(k=e.get(E)).color.copy(S).multiplyScalar(T),k.position.setFromMatrixPosition(E.matrixWorld),k.position.applyMatrix4(x),s.identity(),a.copy(E.matrixWorld),a.premultiply(x),s.extractRotation(a),k.halfWidth.set(.5*E.width,0,0),k.halfHeight.set(0,.5*E.height,0),k.halfWidth.applyMatrix4(s),k.halfHeight.applyMatrix4(s),r.rectArea[v]=k,v++;else if(E.isPointLight){var P;if((k=e.get(E)).position.setFromMatrixPosition(E.matrixWorld),k.position.applyMatrix4(x),k.color.copy(E.color).multiplyScalar(E.intensity),k.distance=E.distance,k.decay=E.decay,E.castShadow)O=E.shadow,(P=n.get(E)).shadowBias=O.bias,P.shadowRadius=O.radius,P.shadowMapSize=O.mapSize,P.shadowCameraNear=O.camera.near,P.shadowCameraFar=O.camera.far,r.pointShadow[d]=P,r.pointShadowMap[d]=M,r.pointShadowMatrix[d]=E.shadow.matrix,b++;r.point[d]=k,d++}else if(E.isHemisphereLight){var k;(k=e.get(E)).direction.setFromMatrixPosition(E.matrixWorld),k.direction.transformDirection(x),k.direction.normalize(),k.skyColor.copy(E.color).multiplyScalar(T),k.groundColor.copy(E.groundColor).multiplyScalar(T),r.hemi[g]=k,g++}}r.ambient[0]=l,r.ambient[1]=c,r.ambient[2]=h;var I=r.hash;I.directionalLength===p&&I.pointLength===d&&I.spotLength===m&&I.rectAreaLength===v&&I.hemiLength===g&&I.numDirectionalShadows===y&&I.numPointShadows===b&&I.numSpotShadows===_||(r.directional.length=p,r.spot.length=m,r.rectArea.length=v,r.point.length=d,r.hemi.length=g,r.directionalShadow.length=y,r.directionalShadowMap.length=y,r.pointShadow.length=b,r.pointShadowMap.length=b,r.spotShadow.length=_,r.spotShadowMap.length=_,r.directionalShadowMatrix.length=y,r.pointShadowMatrix.length=b,r.spotShadowMatrix.length=_,I.directionalLength=p,I.pointLength=d,I.spotLength=m,I.rectAreaLength=v,I.hemiLength=g,I.numDirectionalShadows=y,I.numPointShadows=b,I.numSpotShadows=_,r.version=_s++)},state:r}}function Es(){var t=new ws,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(r){t.setup(e,n,r)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Ss(){var t=new WeakMap;function e(n){var r=n.target;r.removeEventListener("dispose",e),t.delete(r)}return{get:function(n,r){var i;return!1===t.has(n)?(i=new Es,t.set(n,new WeakMap),t.get(n).set(r,i),n.addEventListener("dispose",e)):!1===t.get(n).has(r)?(i=new Es,t.get(n).set(r,i)):i=t.get(n).get(r),i},dispose:function(){t=new WeakMap}}}function Ts(t){wi.call(this),this.type="MeshDepthMaterial",this.depthPacking=un,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function As(t){wi.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function Ms(t,e,n){var r=new ko,i=new Vn,o=new Vn,a=new Xn,s=[],u=[],l={},c={0:g,1:v,2:y},h=new wo({defines:{SAMPLE_RATE:2/8,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vn},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=h.clone();f.defines.HORIZONAL_PASS=1;var d=new Gi;d.setAttribute("position",new Ti(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var b=new uo(d,h),_=this;function w(n,r){var i=e.update(b);h.uniforms.shadow_pass.value=n.map.texture,h.uniforms.resolution.value=n.mapSize,h.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(r,null,i,h,b,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(r,null,i,f,b,null)}function E(t,e,n){var r=t<<0|e<<1|n<<2,i=s[r];return void 0===i&&(i=new Ts({depthPacking:ln,morphTargets:t,skinning:e}),s[r]=i),i}function S(t,e,n){var r=t<<0|e<<1|n<<2,i=u[r];return void 0===i&&(i=new As({morphTargets:t,skinning:e}),u[r]=i),i}function T(e,n,r,i,o,a,s){var u=null,h=E,f=e.customDepthMaterial;if(!0===i.isPointLight&&(h=S,f=e.customDistanceMaterial),void 0===f){var p=!1;!0===r.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var d=!1;!0===e.isSkinnedMesh&&(!0===r.skinning?d=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e)),u=h(p,d,!0===e.isInstancedMesh)}else u=f;if(t.localClippingEnabled&&!0===r.clipShadows&&0!==r.clippingPlanes.length){var v=u.uuid,g=r.uuid,y=l[v];void 0===y&&(y={},l[v]=y);var b=y[g];void 0===b&&(b=u.clone(),y[g]=b),u=b}return u.visible=r.visible,u.wireframe=r.wireframe,u.side=s===m?null!==r.shadowSide?r.shadowSide:r.side:null!==r.shadowSide?r.shadowSide:c[r.side],u.clipShadows=r.clipShadows,u.clippingPlanes=r.clippingPlanes,u.clipIntersection=r.clipIntersection,u.wireframeLinewidth=r.wireframeLinewidth,u.linewidth=r.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=o,u.farDistance=a),u}function A(n,i,o,a,s){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===m)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var u=e.update(n),l=n.material;if(Array.isArray(l))for(var c=u.groups,h=0,f=c.length;h<f;h++){var p=c[h],d=l[p.materialIndex];if(d&&d.visible){var v=T(n,u,d,a,o.near,o.far,s);t.renderBufferDirect(o,null,u,v,n,p)}}else l.visible&&(v=T(n,u,l,a,o.near,o.far,s),t.renderBufferDirect(o,null,u,v,n,null))}for(var g=n.children,y=0,b=g.length;y<b;y++)A(g[y],i,o,a,s)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=p,this.render=function(e,s,u){if(!1!==_.enabled&&(!1!==_.autoUpdate||!1!==_.needsUpdate)&&0!==e.length){var l=t.getRenderTarget(),c=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),f=t.state;f.setBlending(x),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var p=0,d=e.length;p<d;p++){var v=e[p],g=v.shadow;if(void 0!==g){i.copy(g.mapSize);var y=g.getFrameExtents();if(i.multiply(y),o.copy(g.mapSize),(i.x>n||i.y>n)&&(i.x>n&&(o.x=Math.floor(n/y.x),i.x=o.x*y.x,g.mapSize.x=o.x),i.y>n&&(o.y=Math.floor(n/y.y),i.y=o.y*y.y,g.mapSize.y=o.y)),null===g.map&&!g.isPointLightShadow&&this.type===m){var b={minFilter:wt,magFilter:wt,format:Bt};g.map=new Yn(i.x,i.y,b),g.map.texture.name=v.name+".shadowMap",g.mapPass=new Yn(i.x,i.y,b),g.camera.updateProjectionMatrix()}null===g.map&&(b={minFilter:gt,magFilter:gt,format:Bt},g.map=new Yn(i.x,i.y,b),g.map.texture.name=v.name+".shadowMap",g.camera.updateProjectionMatrix()),t.setRenderTarget(g.map),t.clear();for(var E=g.getViewportCount(),S=0;S<E;S++){var T=g.getViewport(S);a.set(o.x*T.x,o.y*T.y,o.x*T.z,o.y*T.w),f.viewport(a),g.updateMatrices(v,S),r=g.getFrustum(),A(s,u,g.camera,v,this.type)}g.isPointLightShadow||this.type!==m||w(g,u)}else console.warn("THREE.WebGLShadowMap:",v,"has no shadow.")}_.needsUpdate=!1,t.setRenderTarget(l,c,h)}}}function Cs(t,e,n){var r=n.isWebGL2,i=new function(){var e=!1,n=new Xn,r=null,i=new Xn(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,r,o,a,s){!0===s&&(e*=a,r*=a,o*=a),n.set(e,r,o,a),!1===i.equals(n)&&(t.clearColor(e,r,o,a),i.copy(n))},reset:function(){e=!1,r=null,i.set(-1,0,0,0)}}},o=new function(){var e=!1,n=null,r=null,i=null;return{setTest:function(t){t?bt(2929):_t(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case H:t.depthFunc(512);break;case G:t.depthFunc(519);break;case W:t.depthFunc(513);break;case q:t.depthFunc(515);break;case X:t.depthFunc(514);break;case Y:t.depthFunc(518);break;case Q:t.depthFunc(516);break;case Z:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){i!==e&&(t.clearDepth(e),i=e)},reset:function(){e=!1,n=null,r=null,i=null}}},l=new function(){var e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null;return{setTest:function(t){e||(t?bt(2960):_t(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,a){r===e&&i===n&&o===a||(t.stencilFunc(e,n,a),r=e,i=n,o=a)},setOp:function(e,n,r){a===e&&s===n&&u===r||(t.stencilOp(e,n,r),a=e,s=n,u=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,n=null,r=null,i=null,o=null,a=null,s=null,u=null,l=null}}},c=t.getParameter(34921),h=new Uint8Array(c),f=new Uint8Array(c),p=new Uint8Array(c),d={},m=null,v=null,b=null,_=null,K=null,$=null,J=null,tt=null,et=null,nt=!1,rt=null,it=null,ot=null,at=null,st=null,ut=t.getParameter(35661),lt=!1,ct=0,ht=t.getParameter(7938);-1!==ht.indexOf("WebGL")?(ct=parseFloat(/^WebGL\ ([0-9])/.exec(ht)[1]),lt=ct>=1):-1!==ht.indexOf("OpenGL ES")&&(ct=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ht)[1]),lt=ct>=2);var ft=null,pt={},dt=new Xn,mt=new Xn;function vt(e,n,r){var i=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<r;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,i);return o}var gt={};function yt(n,i){h[n]=1,0===f[n]&&(t.enableVertexAttribArray(n),f[n]=1),p[n]!==i&&((r?t:e.get("ANGLE_instanced_arrays"))[r?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,i),p[n]=i)}function bt(e){!0!==d[e]&&(t.enable(e),d[e]=!0)}function _t(e){!1!==d[e]&&(t.disable(e),d[e]=!1)}gt[3553]=vt(3553,3553,1),gt[34067]=vt(34067,34069,6),i.setClear(0,0,0,1),o.setClear(1),l.setClear(0),bt(2929),o.setFunc(q),Tt(!1),At(s),bt(2884),St(x);var xt={[M]:32774,[C]:32778,[O]:32779};if(r)xt[P]=32775,xt[k]=32776;else{var wt=e.get("EXT_blend_minmax");null!==wt&&(xt[P]=wt.MIN_EXT,xt[k]=wt.MAX_EXT)}var Et={[I]:0,[L]:1,[R]:768,[N]:770,[V]:776,[z]:774,[j]:772,[D]:769,[F]:771,[B]:775,[U]:773};function St(e,n,r,i,o,a,s,u){if(e!==x){if(v||(bt(3042),v=!0),e===A)o=o||n,a=a||r,s=s||i,n===_&&o===J||(t.blendEquationSeparate(xt[n],xt[o]),_=n,J=o),r===K&&i===$&&a===tt&&s===et||(t.blendFuncSeparate(Et[r],Et[i],Et[a],Et[s]),K=r,$=i,tt=a,et=s),b=e,nt=null;else if(e!==b||u!==nt){if(_===M&&J===M||(t.blendEquation(32774),_=M,J=M),u)switch(e){case w:t.blendFuncSeparate(1,771,1,771);break;case E:t.blendFunc(1,1);break;case S:t.blendFuncSeparate(0,0,769,771);break;case T:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case w:t.blendFuncSeparate(770,771,1,771);break;case E:t.blendFunc(770,1);break;case S:t.blendFunc(0,769);break;case T:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}K=null,$=null,tt=null,et=null,b=e,nt=u}}else v&&(_t(3042),v=!1)}function Tt(e){rt!==e&&(e?t.frontFace(2304):t.frontFace(2305),rt=e)}function At(e){e!==a?(bt(2884),e!==it&&(e===s?t.cullFace(1029):e===u?t.cullFace(1028):t.cullFace(1032))):_t(2884),it=e}function Mt(e,n,r){e?(bt(32823),at===n&&st===r||(t.polygonOffset(n,r),at=n,st=r)):_t(32823)}function Ct(e){void 0===e&&(e=33984+ut-1),ft!==e&&(t.activeTexture(e),ft=e)}return{buffers:{color:i,depth:o,stencil:l},initAttributes:function(){for(var t=0,e=h.length;t<e;t++)h[t]=0},enableAttribute:function(t){yt(t,0)},enableAttributeAndDivisor:yt,disableUnusedAttributes:function(){for(var e=0,n=f.length;e!==n;++e)f[e]!==h[e]&&(t.disableVertexAttribArray(e),f[e]=0)},vertexAttribPointer:function(e,n,i,o,a,s){!0!==r||5124!==i&&5125!==i?t.vertexAttribPointer(e,n,i,o,a,s):t.vertexAttribIPointer(e,n,i,o,a,s)},enable:bt,disable:_t,useProgram:function(e){return m!==e&&(t.useProgram(e),m=e,!0)},setBlending:St,setMaterial:function(t,e){t.side===y?_t(2884):bt(2884);var n=t.side===g;e&&(n=!n),Tt(n),t.blending===w&&!1===t.transparent?St(x):St(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),o.setFunc(t.depthFunc),o.setTest(t.depthTest),o.setMask(t.depthWrite),i.setMask(t.colorWrite);var r=t.stencilWrite;l.setTest(r),r&&(l.setMask(t.stencilWriteMask),l.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),l.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),Mt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Tt,setCullFace:At,setLineWidth:function(e){e!==ot&&(lt&&t.lineWidth(e),ot=e)},setPolygonOffset:Mt,setScissorTest:function(t){t?bt(3089):_t(3089)},activeTexture:Ct,bindTexture:function(e,n){null===ft&&Ct();var r=pt[ft];void 0===r&&(r={type:void 0,texture:void 0},pt[ft]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||gt[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=pt[ft];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===dt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),dt.copy(e))},viewport:function(e){!1===mt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),mt.copy(e))},reset:function(){for(var e=0;e<f.length;e++)1===f[e]&&(t.disableVertexAttribArray(e),f[e]=0);d={},ft=null,pt={},m=null,b=null,rt=null,it=null,i.reset(),o.reset(),l.reset()}}}function Os(t,e,n,r,i,o,a){var s,u=i.isWebGL2,l=i.maxTextures,c=i.maxCubemapSize,h=i.maxTextureSize,f=i.maxSamples,p=new WeakMap,d=!1;try{d="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function m(t,e){return d?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(t,e,n,r){var i=1;if((t.width>r||t.height>r)&&(i=r/Math.max(t.width,t.height)),i<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?Bn.floorPowerOfTwo:Math.floor,a=o(i*t.width),u=o(i*t.height);void 0===s&&(s=m(a,u));var l=n?m(a,u):s;return l.width=a,l.height=u,l.getContext("2d").drawImage(t,0,0,a,u),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+u+")."),l}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return Bn.isPowerOfTwo(t.width)&&Bn.isPowerOfTwo(t.height)}function y(t,e){return t.generateMipmaps&&e&&t.minFilter!==gt&&t.minFilter!==wt}function b(e,n,i,o){t.generateMipmap(e),r.get(n).__maxMipLevel=Math.log(Math.max(i,o))*Math.LOG2E}function _(n,r,i){if(!1===u)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var o=r;return 6403===r&&(5126===i&&(o=33326),5131===i&&(o=33325),5121===i&&(o=33321)),6407===r&&(5126===i&&(o=34837),5131===i&&(o=34843),5121===i&&(o=32849)),6408===r&&(5126===i&&(o=34836),5131===i&&(o=34842),5121===i&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function x(t){return t===gt||t===yt||t===_t?9728:9729}function w(e){var n=e.target;n.removeEventListener("dispose",w),function(e){var n=r.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),r.remove(e))}(n),n.isVideoTexture&&p.delete(n),a.memory.textures--}function E(e){var n=e.target;n.removeEventListener("dispose",E),function(e){var n=r.get(e),i=r.get(e.texture);if(e){if(void 0!==i.__webglTexture&&t.deleteTexture(i.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);r.remove(e.texture),r.remove(e)}}(n),a.memory.textures--}var S=0;function T(t,e){var i=r.get(t);if(t.isVideoTexture&&function(t){var e=a.render.frame;p.get(t)!==e&&(p.set(t,e),t.update())}(t),t.version>0&&i.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void I(i,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,i.__webglTexture)}function A(e,i){if(6===e.image.length){var a=r.get(e);if(e.version>0&&a.__version!==e.version){k(a,e),n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),l=e.image[0]&&e.image[0].isDataTexture,h=[],f=0;f<6;f++)h[f]=s||l?l?e.image[f].image:e.image[f]:v(e.image[f],!1,!0,c);var p,d=h[0],m=g(d)||u,x=o.convert(e.format),w=o.convert(e.type),E=_(e.internalFormat,x,w);if(P(34067,e,m),s){for(f=0;f<6;f++){p=h[f].mipmaps;for(var S=0;S<p.length;S++){var T=p[S];e.format!==Bt&&e.format!==zt?null!==x?n.compressedTexImage2D(34069+f,S,E,T.width,T.height,0,T.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+f,S,E,T.width,T.height,0,x,w,T.data)}}a.__maxMipLevel=p.length-1}else{for(p=e.mipmaps,f=0;f<6;f++)if(l)for(n.texImage2D(34069+f,0,E,h[f].width,h[f].height,0,x,w,h[f].data),S=0;S<p.length;S++){var A=(T=p[S]).image[f].image;n.texImage2D(34069+f,S+1,E,A.width,A.height,0,x,w,A.data)}else for(n.texImage2D(34069+f,0,E,x,w,h[f]),S=0;S<p.length;S++)T=p[S],n.texImage2D(34069+f,S+1,E,x,w,T.image[f]);a.__maxMipLevel=p.length}y(e,m)&&b(34067,e,d.width,d.height),a.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+i),n.bindTexture(34067,a.__webglTexture)}}function M(t,e){n.activeTexture(33984+e),n.bindTexture(34067,r.get(t).__webglTexture)}var C={[dt]:10497,[mt]:33071,[vt]:33648},O={[gt]:9728,[yt]:9984,[_t]:9986,[wt]:9729,[Et]:9985,[Tt]:9987};function P(n,o,a){a?(t.texParameteri(n,10242,C[o.wrapS]),t.texParameteri(n,10243,C[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,C[o.wrapR]),t.texParameteri(n,10240,O[o.magFilter]),t.texParameteri(n,10241,O[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===mt&&o.wrapT===mt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,x(o.magFilter)),t.texParameteri(n,10241,x(o.minFilter)),o.minFilter!==gt&&o.minFilter!==wt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));var s=e.get("EXT_texture_filter_anisotropic");if(s){if(o.type===Lt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Rt&&null===(u||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function k(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",w),e.__webglTexture=t.createTexture(),a.memory.textures++)}function I(e,r,i){var a=3553;r.isDataTexture2DArray&&(a=35866),r.isDataTexture3D&&(a=32879),k(e,r),n.activeTexture(33984+i),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment);var s=function(t){return!u&&(t.wrapS!==mt||t.wrapT!==mt||t.minFilter!==gt&&t.minFilter!==wt)}(r)&&!1===g(r.image),l=v(r.image,s,!1,h),c=g(l)||u,f=o.convert(r.format),p=o.convert(r.type),d=_(r.internalFormat,f,p);P(a,r,c);var m,x=r.mipmaps;if(r.isDepthTexture)d=6402,u?d=r.type===Lt?36012:r.type===It?33190:r.type===jt?35056:33189:r.type===Lt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===Wt&&6402===d&&r.type!==Pt&&r.type!==It&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=Pt,p=o.convert(r.type)),r.format===qt&&6402===d&&(d=34041,r.type!==jt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=jt,p=o.convert(r.type))),n.texImage2D(3553,0,d,l.width,l.height,0,f,p,null);else if(r.isDataTexture)if(x.length>0&&c){for(var w=0,E=x.length;w<E;w++)m=x[w],n.texImage2D(3553,w,d,m.width,m.height,0,f,p,m.data);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,l.width,l.height,0,f,p,l.data),e.__maxMipLevel=0;else if(r.isCompressedTexture){for(w=0,E=x.length;w<E;w++)m=x[w],r.format!==Bt&&r.format!==zt?null!==f?n.compressedTexImage2D(3553,w,d,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,w,d,m.width,m.height,0,f,p,m.data);e.__maxMipLevel=x.length-1}else if(r.isDataTexture2DArray)n.texImage3D(35866,0,d,l.width,l.height,l.depth,0,f,p,l.data),e.__maxMipLevel=0;else if(r.isDataTexture3D)n.texImage3D(32879,0,d,l.width,l.height,l.depth,0,f,p,l.data),e.__maxMipLevel=0;else if(x.length>0&&c){for(w=0,E=x.length;w<E;w++)m=x[w],n.texImage2D(3553,w,d,f,p,m);r.generateMipmaps=!1,e.__maxMipLevel=x.length-1}else n.texImage2D(3553,0,d,f,p,l),e.__maxMipLevel=0;y(r,c)&&b(a,r,l.width,l.height),e.__version=r.version,r.onUpdate&&r.onUpdate(r)}function L(e,i,a,s){var u=o.convert(i.texture.format),l=o.convert(i.texture.type),c=_(i.texture.internalFormat,u,l);n.texImage2D(s,0,c,i.width,i.height,0,u,l,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,r.get(i.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function R(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var i=33189;if(r){var a=n.depthTexture;a&&a.isDepthTexture&&(a.type===Lt?i=36012:a.type===It&&(i=33190));var s=D(n);t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)}else t.renderbufferStorage(36161,i,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer)r?(s=D(n),t.renderbufferStorageMultisample(36161,s,35056,n.width,n.height)):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e);else{var u=o.convert(n.texture.format),l=o.convert(n.texture.type);i=_(n.texture.internalFormat,u,l),r?(s=D(n),t.renderbufferStorageMultisample(36161,s,i,n.width,n.height)):t.renderbufferStorage(36161,i,n.width,n.height)}t.bindRenderbuffer(36161,null)}function D(t){return u&&t.isWebGLMultisampleRenderTarget?Math.min(f,t.samples):0}var N=!1,F=!1;this.allocateTextureUnit=function(){var t=S;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),S+=1,t},this.resetTextureUnits=function(){S=0},this.setTexture2D=T,this.setTexture2DArray=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,i.__webglTexture))},this.setTexture3D=function(t,e){var i=r.get(t);t.version>0&&i.__version!==t.version?I(i,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,i.__webglTexture))},this.setTextureCube=A,this.setTextureCubeDynamic=M,this.setupRenderTarget=function(e){var i=r.get(e),s=r.get(e.texture);e.addEventListener("dispose",E),s.__webglTexture=t.createTexture(),a.memory.textures++;var l=!0===e.isWebGLCubeRenderTarget,c=!0===e.isWebGLMultisampleRenderTarget,h=g(e)||u;if(!u||e.texture.format!==zt||e.texture.type!==Lt&&e.texture.type!==Rt||(e.texture.format=Bt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),l){i.__webglFramebuffer=[];for(var f=0;f<6;f++)i.__webglFramebuffer[f]=t.createFramebuffer()}else if(i.__webglFramebuffer=t.createFramebuffer(),c)if(u){i.__webglMultisampledFramebuffer=t.createFramebuffer(),i.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,i.__webglColorRenderbuffer);var p=o.convert(e.texture.format),d=o.convert(e.texture.type),m=_(e.texture.internalFormat,p,d),v=D(e);t.renderbufferStorageMultisample(36161,v,m,e.width,e.height),t.bindFramebuffer(36160,i.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,i.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(i.__webglDepthRenderbuffer=t.createRenderbuffer(),R(i.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(l){for(n.bindTexture(34067,s.__webglTexture),P(34067,e.texture,h),f=0;f<6;f++)L(i.__webglFramebuffer[f],e,36064,34069+f);y(e.texture,h)&&b(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),P(3553,e.texture,h),L(i.__webglFramebuffer,e,36064,3553),y(e.texture,h)&&b(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&function(e){var n=r.get(e),i=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),T(n.depthTexture,0);var i=r.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Wt)t.framebufferTexture2D(36160,36096,3553,i,0);else{if(n.depthTexture.format!==qt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,i,0)}}(n.__webglFramebuffer,e)}else if(i){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),R(n.__webglDepthbuffer[o],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),R(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(y(e,g(t)||u)){var i=t.isWebGLCubeRenderTarget?34067:3553,o=r.get(e).__webglTexture;n.bindTexture(i,o),b(i,e,t.width,t.height),n.bindTexture(i,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget)if(u){var n=r.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var i=e.width,o=e.height,a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,i,o,0,0,i,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===N&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),N=!0),t=t.texture),T(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===F&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),F=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?A(t,e):M(t,e)}}function Ps(t,e,n){var r=n.isWebGL2;return{convert:function(t){var n;if(t===Mt)return 5121;if(t===Dt)return 32819;if(t===Nt)return 32820;if(t===Ft)return 33635;if(t===Ct)return 5120;if(t===Ot)return 5122;if(t===Pt)return 5123;if(t===kt)return 5124;if(t===It)return 5125;if(t===Lt)return 5126;if(t===Rt)return r?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(t===Ut)return 6406;if(t===zt)return 6407;if(t===Bt)return 6408;if(t===Vt)return 6409;if(t===Ht)return 6410;if(t===Wt)return 6402;if(t===qt)return 34041;if(t===Xt)return 6403;if(t===Yt)return 36244;if(t===Qt)return 33319;if(t===Zt)return 33320;if(t===Kt)return 36248;if(t===$t)return 36249;if(t===Jt||t===te||t===ee||t===ne){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===Jt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===te)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===ee)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===ne)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===re||t===ie||t===oe||t===ae){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===re)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ie)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===oe)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ae)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===se)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===ue||t===le)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===ue)return n.COMPRESSED_RGB8_ETC2;if(t===le)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===ce||t===he||t===fe||t===pe||t===de||t===me||t===ve||t===ge||t===ye||t===be||t===_e||t===xe||t===we||t===Ee||t===Te||t===Ae||t===Me||t===Ce||t===Oe||t===Pe||t===ke||t===Ie||t===Le||t===Re||t===De||t===Ne||t===Fe||t===je?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:t===Se?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===jt?r?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function ks(t){So.call(this),this.cameras=t||[]}function Is(){Tr.call(this),this.type="Group"}function Ls(){this._targetRay=null,this._grip=null}function Rs(t,e){var n=this,r=null,i=1,o=null,a="local-floor",s=null,u=[],l=new Map,c=new So;c.layers.enable(1),c.viewport=new Xn;var h=new So;h.layers.enable(2),h.viewport=new Xn;var f=[c,h],p=new ks;p.layers.enable(1),p.layers.enable(2);var d=null,m=null;function v(t){var e=l.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function g(){l.forEach((function(t,e){t.disconnect(e)})),l.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(t){o=t,S.setContext(r),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}function b(t){for(var e=r.inputSources,n=0;n<u.length;n++)l.set(e[n],u[n]);for(n=0;n<t.removed.length;n++){var i=t.removed[n];(o=l.get(i))&&(o.dispatchEvent({type:"disconnected",data:i}),l.delete(i))}for(n=0;n<t.added.length;n++){var o;i=t.added[n],(o=l.get(i))&&o.dispatchEvent({type:"connected",data:i})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=u[t];return void 0===e&&(e=new Ls,u[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=u[t];return void 0===e&&(e=new Ls,u[t]=e),e.getGripSpace()},this.setFramebufferScaleFactor=function(t){i=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return r},this.setSession=function(t){if(null!==(r=t)){r.addEventListener("select",v),r.addEventListener("selectstart",v),r.addEventListener("selectend",v),r.addEventListener("squeeze",v),r.addEventListener("squeezestart",v),r.addEventListener("squeezeend",v),r.addEventListener("end",g);var n=e.getContextAttributes(),o={antialias:n.antialias,alpha:n.alpha,depth:n.depth,stencil:n.stencil,framebufferScaleFactor:i},s=new XRWebGLLayer(r,e,o);r.updateRenderState({baseLayer:s}),r.requestReferenceSpace(a).then(y),r.addEventListener("inputsourceschange",b)}};var _=new Jn,x=new Jn;function w(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}this.getCamera=function(t){p.near=h.near=c.near=t.near,p.far=h.far=c.far=t.far,d===p.near&&m===p.far||(r.updateRenderState({depthNear:p.near,depthFar:p.far}),d=p.near,m=p.far);var e=t.parent,n=p.cameras;w(p,e);for(var i=0;i<n.length;i++)w(n[i],e);t.matrixWorld.copy(p.matrixWorld);for(var o=t.children,a=(i=0,o.length);i<a;i++)o[i].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){_.setFromMatrixPosition(e.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);var r=_.distanceTo(x),i=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),u=(i[9]+1)/i[5],l=(i[9]-1)/i[5],c=(i[8]-1)/i[0],h=(o[8]+1)/o[0],f=a*c,p=a*h,d=r/(-c+h),m=d*-c;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=a+d,g=s+d,y=f-m,b=p+(r-m),w=u*s/g*v,E=l*s/g*v;t.projectionMatrix.makePerspective(y,b,w,E,v,g)}(p,c,h):p.projectionMatrix.copy(c.projectionMatrix),p};var E=null,S=new Lo;S.setAnimationLoop((function(e,n){if(null!==(s=n.getViewerPose(o))){var i=s.views,a=r.renderState.baseLayer;t.setFramebuffer(a.framebuffer);var l=!1;i.length!==p.cameras.length&&(p.cameras.length=0,l=!0);for(var c=0;c<i.length;c++){var h=i[c],d=a.getViewport(h),m=f[c];m.matrix.fromArray(h.transform.matrix),m.projectionMatrix.fromArray(h.projectionMatrix),m.viewport.set(d.x,d.y,d.width,d.height),0===c&&p.matrix.copy(m.matrix),!0===l&&p.cameras.push(m)}}var v=r.inputSources;for(c=0;c<u.length;c++){var g=u[c],y=v[c];g.update(y,n,o)}E&&E(e,n)})),this.setAnimationLoop=function(t){E=t},this.dispose=function(){}}function Ds(t){var e=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,r=void 0!==t.alpha&&t.alpha,i=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,u=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,l=void 0!==t.powerPreference?t.powerPreference:"default",c=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,h=null,f=null;this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Je,this.physicallyCorrectLights=!1,this.toneMapping=tt,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var p,d,m,v,y,b,_,x,w,E,S,T,A,M,C,O,P,k,I=this,L=!1,R=null,D=0,N=0,F=null,j=null,U=-1,z={geometry:null,program:null,wireframe:!1},B=null,V=null,H=new Xn,G=new Xn,W=null,q=e.width,X=e.height,Y=1,Q=null,Z=null,K=new Xn(0,0,q,X),$=new Xn(0,0,q,X),J=!1,et=new ko,nt=new Vo,rt=!1,it=!1,ot=new sr,at=new Jn;function st(){return null===F?Y:1}try{var ut={alpha:r,depth:i,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:u,powerPreference:l,failIfMajorPerformanceCaveat:c,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",pt,!1),null===(p=n||e.getContext("webgl",ut)||e.getContext("experimental-webgl",ut)))throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===p.getShaderPrecisionFormat&&(p.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function lt(){d=new Ho(p),!1===(m=new Bo(p,d,t)).isWebGL2&&(d.get("WEBGL_depth_texture"),d.get("OES_texture_float"),d.get("OES_texture_half_float"),d.get("OES_texture_half_float_linear"),d.get("OES_standard_derivatives"),d.get("OES_element_index_uint"),d.get("ANGLE_instanced_arrays")),d.get("OES_texture_float_linear"),k=new Ps(p,d,m),(v=new Cs(p,d,m)).scissor(G.copy($).multiplyScalar(Y).floor()),v.viewport(H.copy(K).multiplyScalar(Y).floor()),y=new qo(p),b=new ds,_=new Os(p,d,v,b,m,k,y),x=new Ro(p,m),w=new Go(p,x,y),E=new Qo(p,w,x,y),C=new Yo(p),S=new ps(I,d,m),T=new ys,A=new Ss,M=new Uo(I,v,E,s),O=new zo(p,d,y,m),P=new Wo(p,d,y,m),y.programs=S.programs,I.capabilities=m,I.extensions=d,I.properties=b,I.renderLists=T,I.state=v,I.info=y}lt();var ct=new Rs(I,p);this.xr=ct;var ht=new Ms(I,E,m.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),L=!0}function pt(){console.log("THREE.WebGLRenderer: Context Restored."),L=!1,lt()}function dt(t){var e=t.target;e.removeEventListener("dispose",dt),function(t){mt(t),b.remove(t)}(e)}function mt(t){var e=b.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}this.shadowMap=ht,this.getContext=function(){return p},this.getContextAttributes=function(){return p.getContextAttributes()},this.forceContextLoss=function(){var t=d.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=d.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Y},this.setPixelRatio=function(t){void 0!==t&&(Y=t,this.setSize(q,X,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new Vn),t.set(q,X)},this.setSize=function(t,n,r){ct.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,X=n,e.width=Math.floor(t*Y),e.height=Math.floor(n*Y),!1!==r&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new Vn),t.set(q*Y,X*Y).floor()},this.setDrawingBufferSize=function(t,n,r){q=t,X=n,Y=r,e.width=Math.floor(t*r),e.height=Math.floor(n*r),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new Xn),t.copy(H)},this.getViewport=function(t){return t.copy(K)},this.setViewport=function(t,e,n,r){t.isVector4?K.set(t.x,t.y,t.z,t.w):K.set(t,e,n,r),v.viewport(H.copy(K).multiplyScalar(Y).floor())},this.getScissor=function(t){return t.copy($)},this.setScissor=function(t,e,n,r){t.isVector4?$.set(t.x,t.y,t.z,t.w):$.set(t,e,n,r),v.scissor(G.copy($).multiplyScalar(Y).floor())},this.getScissorTest=function(){return J},this.setScissorTest=function(t){v.setScissorTest(J=t)},this.setOpaqueSort=function(t){Q=t},this.setTransparentSort=function(t){Z=t},this.getClearColor=function(){return M.getClearColor()},this.setClearColor=function(){M.setClearColor.apply(M,arguments)},this.getClearAlpha=function(){return M.getClearAlpha()},this.setClearAlpha=function(){M.setClearAlpha.apply(M,arguments)},this.clear=function(t,e,n){var r=0;(void 0===t||t)&&(r|=16384),(void 0===e||e)&&(r|=256),(void 0===n||n)&&(r|=1024),p.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",pt,!1),T.dispose(),A.dispose(),b.dispose(),E.dispose(),ct.dispose(),yt.stop()},this.renderBufferImmediate=function(t,e){v.initAttributes();var n=b.get(t);t.hasPositions&&!n.position&&(n.position=p.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=p.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=p.createBuffer()),t.hasColors&&!n.color&&(n.color=p.createBuffer());var r=e.getAttributes();t.hasPositions&&(p.bindBuffer(34962,n.position),p.bufferData(34962,t.positionArray,35048),v.enableAttribute(r.position),p.vertexAttribPointer(r.position,3,5126,!1,0,0)),t.hasNormals&&(p.bindBuffer(34962,n.normal),p.bufferData(34962,t.normalArray,35048),v.enableAttribute(r.normal),p.vertexAttribPointer(r.normal,3,5126,!1,0,0)),t.hasUvs&&(p.bindBuffer(34962,n.uv),p.bufferData(34962,t.uvArray,35048),v.enableAttribute(r.uv),p.vertexAttribPointer(r.uv,2,5126,!1,0,0)),t.hasColors&&(p.bindBuffer(34962,n.color),p.bufferData(34962,t.colorArray,35048),v.enableAttribute(r.color),p.vertexAttribPointer(r.color,3,5126,!1,0,0)),v.disableUnusedAttributes(),p.drawArrays(4,0,t.count),t.count=0};var vt=new Ar;this.renderBufferDirect=function(t,e,n,r,i,o){null===e&&(e=vt);var a=i.isMesh&&i.matrixWorld.determinant()<0,s=Et(t,e,r,i);v.setMaterial(r,a);var u=!1;z.geometry===n.id&&z.program===s.id&&z.wireframe===(!0===r.wireframe)||(z.geometry=n.id,z.program=s.id,z.wireframe=!0===r.wireframe,u=!0),(r.morphTargets||r.morphNormals)&&(C.update(i,n,r,s),u=!0),!0===i.isInstancedMesh&&(u=!0);var l=n.index,c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;var h,f=1;!0===r.wireframe&&(l=w.getWireframeAttribute(n),f=2);var g=O;null!==l&&(h=x.get(l),(g=P).setIndex(h)),u&&(function(t,e,n,r){if(!1!==m.isWebGL2||!t.isInstancedMesh&&!e.isInstancedBufferGeometry||null!==d.get("ANGLE_instanced_arrays")){v.initAttributes();var i=e.attributes,o=r.getAttributes(),a=n.defaultAttributeValues;for(var s in o){var u=o[s];if(u>=0){var l=i[s];if(void 0!==l){var c=l.normalized,h=l.itemSize;if(void 0===(E=x.get(l)))continue;var f=E.buffer,g=E.type,y=E.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,_=b.stride,w=l.offset;b&&b.isInstancedInterleavedBuffer?(v.enableAttributeAndDivisor(u,b.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=b.meshPerAttribute*b.count)):v.enableAttribute(u),p.bindBuffer(34962,f),v.vertexAttribPointer(u,h,g,c,_*y,w*y)}else l.isInstancedBufferAttribute?(v.enableAttributeAndDivisor(u,l.meshPerAttribute),void 0===e.maxInstancedCount&&(e.maxInstancedCount=l.meshPerAttribute*l.count)):v.enableAttribute(u),p.bindBuffer(34962,f),v.vertexAttribPointer(u,h,g,c,0,0)}else if("instanceMatrix"===s){var E;if(void 0===(E=x.get(t.instanceMatrix)))continue;f=E.buffer,g=E.type,v.enableAttributeAndDivisor(u+0,1),v.enableAttributeAndDivisor(u+1,1),v.enableAttributeAndDivisor(u+2,1),v.enableAttributeAndDivisor(u+3,1),p.bindBuffer(34962,f),p.vertexAttribPointer(u+0,4,g,!1,64,0),p.vertexAttribPointer(u+1,4,g,!1,64,16),p.vertexAttribPointer(u+2,4,g,!1,64,32),p.vertexAttribPointer(u+3,4,g,!1,64,48)}else if(void 0!==a){var S=a[s];if(void 0!==S)switch(S.length){case 2:p.vertexAttrib2fv(u,S);break;case 3:p.vertexAttrib3fv(u,S);break;case 4:p.vertexAttrib4fv(u,S);break;default:p.vertexAttrib1fv(u,S)}}}}v.disableUnusedAttributes()}}(i,n,r,s),null!==l&&p.bindBuffer(34963,h.buffer));var y=null!==l?l.count:c.count,b=n.drawRange.start*f,_=n.drawRange.count*f,E=null!==o?o.start*f:0,S=null!==o?o.count*f:1/0,T=Math.max(b,E),A=Math.min(y,b+_,E+S)-1,M=Math.max(0,A-T+1);if(0!==M){if(i.isMesh)!0===r.wireframe?(v.setLineWidth(r.wireframeLinewidth*st()),g.setMode(1)):g.setMode(4);else if(i.isLine){var k=r.linewidth;void 0===k&&(k=1),v.setLineWidth(k*st()),i.isLineSegments?g.setMode(1):i.isLineLoop?g.setMode(2):g.setMode(3)}else i.isPoints?g.setMode(0):i.isSprite&&g.setMode(4);i.isInstancedMesh?g.renderInstances(n,T,M,i.count):n.isInstancedBufferGeometry?g.renderInstances(n,T,M,n.maxInstancedCount):g.render(T,M)}},this.compile=function(t,e){(f=A.get(t,e)).init(),t.traverse((function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))})),f.setupLights(e);var n={};t.traverse((function(e){if(e.material)if(Array.isArray(e.material))for(var r=0;r<e.material.length;r++)e.material[r].uuid in n==0&&(wt(e.material[r],t,e),n[e.material[r].uuid]=!0);else e.material.uuid in n==0&&(wt(e.material,t,e),n[e.material.uuid]=!0)}))};var gt=null,yt=new Lo;function bt(t,e,n,r){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||et.intersectsSprite(t)){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);var i=E.update(t);(o=t.material).visible&&h.push(t,i,o,n,at.z,null)}}else if(t.isImmediateRenderObject)r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot),h.push(t,null,t.material,n,at.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==y.render.frame&&(t.skeleton.update(),t.skeleton.frame=y.render.frame),!t.frustumCulled||et.intersectsObject(t))){r&&at.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot),i=E.update(t);var o=t.material;if(Array.isArray(o))for(var a=i.groups,s=0,u=a.length;s<u;s++){var l=a[s],c=o[l.materialIndex];c&&c.visible&&h.push(t,i,c,n,at.z,l)}else o.visible&&h.push(t,i,o,n,at.z,null)}var p=t.children;for(s=0,u=p.length;s<u;s++)bt(p[s],e,n,r)}}function _t(t,e,n,r){for(var i=0,o=t.length;i<o;i++){var a=t[i],s=a.object,u=a.geometry,l=void 0===r?a.material:r,c=a.group;if(n.isArrayCamera){V=n;for(var h=n.cameras,p=0,d=h.length;p<d;p++){var m=h[p];s.layers.test(m.layers)&&(v.viewport(H.copy(m.viewport)),f.setupLights(m),xt(s,e,m,u,l,c))}}else V=null,xt(s,e,n,u,l,c)}}function xt(t,e,n,r,i,o){if(t.onBeforeRender(I,e,n,r,i,o),f=A.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var a=Et(n,e,i,t);v.setMaterial(i),z.geometry=null,z.program=null,z.wireframe=!1,function(t,e){t.render((function(t){I.renderBufferImmediate(t,e)}))}(t,a)}else I.renderBufferDirect(n,e,r,i,t,o);t.onAfterRender(I,e,n,r,i,o),f=A.get(e,V||n)}function wt(t,e,n){var r=b.get(t),i=f.state.lights,o=f.state.shadowsArray,a=i.state.version,s=S.getParameters(t,i.state,o,e,nt.numPlanes,nt.numIntersection,n),u=S.getProgramCacheKey(s),l=r.program,c=!0;if(void 0===l)t.addEventListener("dispose",dt);else if(l.cacheKey!==u)mt(t);else if(r.lightsStateVersion!==a)r.lightsStateVersion=a,c=!1;else{if(void 0!==s.shaderID)return;c=!1}c&&(l=S.acquireProgram(s,u),r.program=l,r.uniforms=s.uniforms,r.outputEncoding=s.outputEncoding,t.program=l);var h=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var p=0;p<I.maxMorphTargets;p++)h["morphTarget"+p]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals)for(t.numSupportedMorphNormals=0,p=0;p<I.maxMorphNormals;p++)h["morphNormal"+p]>=0&&t.numSupportedMorphNormals++;var d=r.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(r.numClippingPlanes=nt.numPlanes,r.numIntersection=nt.numIntersection,d.clippingPlanes=nt.uniform),r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=a,r.needsLights&&(d.ambientLightColor.value=i.state.ambient,d.lightProbe.value=i.state.probe,d.directionalLights.value=i.state.directional,d.directionalLightShadows.value=i.state.directionalShadow,d.spotLights.value=i.state.spot,d.spotLightShadows.value=i.state.spotShadow,d.rectAreaLights.value=i.state.rectArea,d.pointLights.value=i.state.point,d.pointLightShadows.value=i.state.pointShadow,d.hemisphereLights.value=i.state.hemi,d.directionalShadowMap.value=i.state.directionalShadowMap,d.directionalShadowMatrix.value=i.state.directionalShadowMatrix,d.spotShadowMap.value=i.state.spotShadowMap,d.spotShadowMatrix.value=i.state.spotShadowMatrix,d.pointShadowMap.value=i.state.pointShadowMap,d.pointShadowMatrix.value=i.state.pointShadowMatrix);var m=r.program.getUniforms(),v=Xa.seqWithValue(m.seq,d);r.uniformsList=v}function Et(t,e,n,r){_.resetTextureUnits();var i=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===F?I.outputEncoding:F.texture.encoding,s=b.get(n),u=f.state.lights;if(rt&&(it||t!==B)){var l=t===B&&n.id===U;nt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,l)}n.version===s.__version?void 0===s.program||n.fog&&s.fog!==i||s.environment!==o||s.needsLights&&s.lightsStateVersion!==u.state.version?wt(n,e,r):void 0===s.numClippingPlanes||s.numClippingPlanes===nt.numPlanes&&s.numIntersection===nt.numIntersection?s.outputEncoding!==a&&wt(n,e,r):wt(n,e,r):(wt(n,e,r),s.__version=n.version);var c,h,d=!1,y=!1,x=!1,w=s.program,E=w.getUniforms(),S=s.uniforms;if(v.useProgram(w.program)&&(d=!0,y=!0,x=!0),n.id!==U&&(U=n.id,y=!0),d||B!==t){if(E.setValue(p,"projectionMatrix",t.projectionMatrix),m.logarithmicDepthBuffer&&E.setValue(p,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),B!==t&&(B=t,y=!0,x=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var T=E.map.cameraPosition;void 0!==T&&T.setValue(p,at.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&E.setValue(p,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&E.setValue(p,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){E.setOptional(p,r,"bindMatrix"),E.setOptional(p,r,"bindMatrixInverse");var A=r.skeleton;if(A){var M=A.bones;if(m.floatVertexTextures){if(void 0===A.boneTexture){var C=Math.sqrt(4*M.length);C=Bn.ceilPowerOfTwo(C),C=Math.max(C,4);var O=new Float32Array(C*C*4);O.set(A.boneMatrices);var P=new Co(O,C,C,Bt,Lt);A.boneMatrices=O,A.boneTexture=P,A.boneTextureSize=C}E.setValue(p,"boneTexture",A.boneTexture,_),E.setValue(p,"boneTextureSize",A.boneTextureSize)}else E.setOptional(p,A,"boneMatrices")}}return(y||s.receiveShadow!==r.receiveShadow)&&(s.receiveShadow=r.receiveShadow,E.setValue(p,"receiveShadow",r.receiveShadow)),y&&(E.setValue(p,"toneMappingExposure",I.toneMappingExposure),E.setValue(p,"toneMappingWhitePoint",I.toneMappingWhitePoint),s.needsLights&&(h=x,(c=S).ambientLightColor.needsUpdate=h,c.lightProbe.needsUpdate=h,c.directionalLights.needsUpdate=h,c.directionalLightShadows.needsUpdate=h,c.pointLights.needsUpdate=h,c.pointLightShadows.needsUpdate=h,c.spotLights.needsUpdate=h,c.spotLightShadows.needsUpdate=h,c.rectAreaLights.needsUpdate=h,c.hemisphereLights.needsUpdate=h),i&&n.fog&&function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}(S,i),n.isMeshBasicMaterial?St(S,n):n.isMeshLambertMaterial?(St(S,n),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(S,n)):n.isMeshToonMaterial?(St(S,n),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(S,n)):n.isMeshPhongMaterial?(St(S,n),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(S,n)):n.isMeshStandardMaterial?(St(S,n,o),n.isMeshPhysicalMaterial?function(t,e,n){Tt(t,e,n),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===g&&t.clearcoatNormalScale.value.negate()),t.transparency.value=e.transparency}(S,n,o):Tt(S,n,o)):n.isMeshMatcapMaterial?(St(S,n),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(S,n)):n.isMeshDepthMaterial?(St(S,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(S,n)):n.isMeshDistanceMaterial?(St(S,n),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(S,n)):n.isMeshNormalMaterial?(St(S,n),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(S,n)):n.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(S,n),n.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(S,n)):n.isPointsMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Y,t.scale.value=.5*X,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(S,n):n.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(S,n):n.isShadowMaterial&&(S.color.value.copy(n.color),S.opacity.value=n.opacity),void 0!==S.ltc_1&&(S.ltc_1.value=Io.LTC_1),void 0!==S.ltc_2&&(S.ltc_2.value=Io.LTC_2),Xa.upload(p,s.uniformsList,S,_),n.isShaderMaterial&&(n.uniformsNeedUpdate=!1)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Xa.upload(p,s.uniformsList,S,_),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&E.setValue(p,"center",r.center),E.setValue(p,"modelViewMatrix",r.modelViewMatrix),E.setValue(p,"normalMatrix",r.normalMatrix),E.setValue(p,"modelMatrix",r.matrixWorld),w}function St(t,e,n){t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap);var r,i,o=e.envMap||n;o&&(t.envMap.value=o,t.flipEnvMap.value=o.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=b.get(o).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?r=e.map:e.specularMap?r=e.specularMap:e.displacementMap?r=e.displacementMap:e.normalMap?r=e.normalMap:e.bumpMap?r=e.bumpMap:e.roughnessMap?r=e.roughnessMap:e.metalnessMap?r=e.metalnessMap:e.alphaMap?r=e.alphaMap:e.emissiveMap&&(r=e.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix)),e.aoMap?i=e.aoMap:e.lightMap&&(i=e.lightMap),void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),t.uv2Transform.value.copy(i.matrix))}function Tt(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===g&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===g&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}yt.setAnimationLoop((function(t){ct.isPresenting||gt&&gt(t)})),"undefined"!=typeof window&&yt.setContext(window),this.setAnimationLoop=function(t){gt=t,ct.setAnimationLoop(t),yt.start()},this.render=function(t,e){var n,r;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),r=arguments[3]),e&&e.isCamera){if(!L){z.geometry=null,z.program=null,z.wireframe=!1,U=-1,B=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ct.enabled&&ct.isPresenting&&(e=ct.getCamera(e)),t.onBeforeRender(I,t,e,n||F),(f=A.get(t,e)).init(),ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),et.setFromProjectionMatrix(ot),it=this.localClippingEnabled,rt=nt.init(this.clippingPlanes,it,e),(h=T.get(t,e)).init(),bt(t,e,0,I.sortObjects),h.finish(),!0===I.sortObjects&&h.sort(Q,Z),rt&&nt.beginShadows();var i=f.state.shadowsArray;ht.render(i,t,e),f.setupLights(e),rt&&nt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),M.render(h,t,e,r);var o=h.opaque,a=h.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&_t(o,t,e,s),a.length&&_t(a,t,e,s)}else o.length&&_t(o,t,e),a.length&&_t(a,t,e);t.onAfterRender(I,t,e),null!==F&&(_.updateRenderTargetMipmap(F),_.updateMultisampleRenderTarget(F)),v.buffers.depth.setTest(!0),v.buffers.depth.setMask(!0),v.buffers.color.setMask(!0),v.setPolygonOffset(!1),h=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){R!==t&&null===F&&p.bindFramebuffer(36160,t),R=t},this.getActiveCubeFace=function(){return D},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return F},this.setRenderTarget=function(t,e,n){F=t,D=e,N=n,t&&void 0===b.get(t).__webglFramebuffer&&_.setupRenderTarget(t);var r=R,i=!1;if(t){var o=b.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(r=o[e||0],i=!0):r=t.isWebGLMultisampleRenderTarget?b.get(t).__webglMultisampledFramebuffer:o,H.copy(t.viewport),G.copy(t.scissor),W=t.scissorTest}else H.copy(K).multiplyScalar(Y).floor(),G.copy($).multiplyScalar(Y).floor(),W=J;if(j!==r&&(p.bindFramebuffer(36160,r),j=r),v.viewport(H),v.scissor(G),v.setScissorTest(W),i){var a=b.get(t.texture);p.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,r,i,o,a){if(t&&t.isWebGLRenderTarget){var s=b.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){var u=!1;s!==j&&(p.bindFramebuffer(36160,s),u=!0);try{var l=t.texture,c=l.format,h=l.type;if(c!==Bt&&k.convert(c)!==p.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===Mt||k.convert(h)===p.getParameter(35738)||h===Lt&&(m.isWebGL2||d.get("OES_texture_float")||d.get("WEBGL_color_buffer_float"))||h===Rt&&(m.isWebGL2?d.get("EXT_color_buffer_float"):d.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===p.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-i&&p.readPixels(e,n,r,i,k.convert(c),k.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{u&&p.bindFramebuffer(36160,j)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=k.convert(e.format);_.setTexture2D(e,0),p.copyTexImage2D(3553,n,a,t.x,t.y,i,o,0),v.unbindTexture()},this.copyTextureToTexture=function(t,e,n,r){void 0===r&&(r=0);var i=e.image.width,o=e.image.height,a=k.convert(n.format),s=k.convert(n.type);_.setTexture2D(n,0),e.isDataTexture?p.texSubImage2D(3553,r,t.x,t.y,i,o,a,s,e.image.data):e.isCompressedTexture?p.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):p.texSubImage2D(3553,r,t.x,t.y,a,s,e.image),0===r&&n.generateMipmaps&&p.generateMipmap(3553),v.unbindTexture()},this.initTexture=function(t){_.setTexture2D(t,0),v.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ns(t,e){this.name="",this.color=new vi(t),this.density=void 0!==e?e:25e-5}function Fs(t,e,n){this.name="",this.color=new vi(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function js(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Cn,this.updateRange={offset:0,count:-1},this.version=0}Ts.prototype=Object.create(wi.prototype),Ts.prototype.constructor=Ts,Ts.prototype.isMeshDepthMaterial=!0,Ts.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},As.prototype=Object.create(wi.prototype),As.prototype.constructor=As,As.prototype.isMeshDistanceMaterial=!0,As.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},ks.prototype=Object.assign(Object.create(So.prototype),{constructor:ks,isArrayCamera:!0}),Is.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Is,isGroup:!0}),Object.assign(Ls.prototype,{constructor:Ls,getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Is,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Is,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),this},update:function(t,e,n){var r=null,i=null,o=this._targetRay,a=this._grip;return t&&(null!==o&&null!==(r=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale)),null!==a&&t.gripSpace&&null!==(i=e.getPose(t.gripSpace,n))&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),this}}),Object.assign(Rs.prototype,Fn.prototype),Object.assign(Ns.prototype,{isFogExp2:!0,clone:function(){return new Ns(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Fs.prototype,{isFog:!0,clone:function(){return new Fs(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(js.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(js.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,i=this.stride;r<i;r++)this.array[t+r]=e.array[n+r];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}});var Us,zs=new Jn;function Bs(t,e,n,r){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===r}function Vs(t){wi.call(this),this.type="SpriteMaterial",this.color=new vi(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}Object.defineProperties(Bs.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Bs.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)zs.x=this.getX(e),zs.y=this.getY(e),zs.z=this.getZ(e),zs.applyMatrix4(t),this.setXYZ(e,zs.x,zs.y,zs.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=i,this}}),Vs.prototype=Object.create(wi.prototype),Vs.prototype.constructor=Vs,Vs.prototype.isSpriteMaterial=!0,Vs.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var Hs=new Jn,Gs=new Jn,Ws=new Jn,qs=new Vn,Xs=new Vn,Ys=new sr,Qs=new Jn,Zs=new Jn,Ks=new Jn,$s=new Vn,Js=new Vn,tu=new Vn;function eu(t){if(Tr.call(this),this.type="Sprite",void 0===Us){Us=new Gi;var e=new js(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);Us.setIndex([0,1,2,0,2,3]),Us.setAttribute("position",new Bs(e,3,0,!1)),Us.setAttribute("uv",new Bs(e,2,3,!1))}this.geometry=Us,this.material=void 0!==t?t:new Vs,this.center=new Vn(.5,.5)}function nu(t,e,n,r,i,o){qs.subVectors(t,n).addScalar(.5).multiply(r),void 0!==i?(Xs.x=o*qs.x-i*qs.y,Xs.y=i*qs.x+o*qs.y):Xs.copy(qs),t.copy(e),t.x+=Xs.x,t.y+=Xs.y,t.applyMatrix4(Ys)}eu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:eu,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gs.setFromMatrixScale(this.matrixWorld),Ys.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ws.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Gs.multiplyScalar(-Ws.z);var n,r,i=this.material.rotation;0!==i&&(r=Math.cos(i),n=Math.sin(i));var o=this.center;nu(Qs.set(-.5,-.5,0),Ws,o,Gs,n,r),nu(Zs.set(.5,-.5,0),Ws,o,Gs,n,r),nu(Ks.set(.5,.5,0),Ws,o,Gs,n,r),$s.set(0,0),Js.set(1,0),tu.set(1,1);var a=t.ray.intersectTriangle(Qs,Zs,Ks,!1,Hs);if(null!==a||(nu(Zs.set(-.5,.5,0),Ws,o,Gs,n,r),Js.set(0,1),null!==(a=t.ray.intersectTriangle(Qs,Ks,Zs,!1,Hs)))){var s=t.ray.origin.distanceTo(Hs);s<t.near||s>t.far||e.push({distance:s,point:Hs.clone(),uv:fi.getUV(Hs,Qs,Zs,Ks,$s,Js,tu,new Vn),face:null,object:this})}},clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return Tr.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}});var ru,iu,ou,au,su,uu=new Jn,lu=new Jn;function cu(){Tr.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function hu(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),uo.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new sr,this.bindMatrixInverse=new sr}cu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:cu,isLOD:!0,copy:function(t){Tr.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,r=e.length;n<r;n++){var i=e[n];this.addLevel(i.object.clone(),i.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,r=0;r<n.length&&!(e<n[r].distance);r++);return n.splice(r,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){for(var n=1,r=e.length;n<r&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){uu.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(uu);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){uu.setFromMatrixPosition(t.matrixWorld),lu.setFromMatrixPosition(this.matrixWorld);var n=uu.distanceTo(lu)/t.zoom;e[0].object.visible=!0;for(var r=1,i=e.length;r<i&&n>=e[r].distance;r++)e[r-1].object.visible=!1,e[r].object.visible=!0;for(this._currentLevel=r-1;r<i;r++)e[r].object.visible=!1}},toJSON:function(t){var e=Tr.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,r=0,i=n.length;r<i;r++){var o=n[r];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),hu.prototype=Object.assign(Object.create(uo.prototype),{constructor:hu,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new Xn,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){uo.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)},boneTransform:(ru=new Jn,iu=new Xn,ou=new Xn,au=new Jn,su=new sr,function(t,e){var n=this.skeleton,r=this.geometry;iu.fromBufferAttribute(r.attributes.skinIndex,t),ou.fromBufferAttribute(r.attributes.skinWeight,t),ru.fromBufferAttribute(r.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var i=0;i<4;i++){var o=ou.getComponent(i);if(0!==o){var a=iu.getComponent(i);su.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),e.addScaledVector(au.copy(ru).applyMatrix4(su),o)}}return e.applyMatrix4(this.bindMatrixInverse)})});var fu=new sr,pu=new sr;function du(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new sr)}}function mu(){Tr.call(this),this.type="Bone"}Object.assign(du.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new sr;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,i=0,o=t.length;i<o;i++){var a=t[i]?t[i].matrixWorld:pu;fu.multiplyMatrices(a,e[i]),fu.toArray(n,16*i)}void 0!==r&&(r.needsUpdate=!0)},clone:function(){return new du(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var r=this.bones[e];if(r.name===t)return r}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),mu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:mu,isBone:!0});var vu=new sr,gu=new sr,yu=[],bu=new uo;function _u(t,e,n){uo.call(this,t,e),this.instanceMatrix=new Ti(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function xu(t){wi.call(this),this.type="LineBasicMaterial",this.color=new vi(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.setValues(t)}_u.prototype=Object.assign(Object.create(uo.prototype),{constructor:_u,isInstancedMesh:!0,getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,r=this.count;if(bu.geometry=this.geometry,bu.material=this.material,void 0!==bu.material)for(var i=0;i<r;i++){this.getMatrixAt(i,vu),gu.multiplyMatrices(n,vu),bu.matrixWorld=gu,bu.raycast(t,yu);for(var o=0,a=yu.length;o<a;o++){var s=yu[o];s.instanceId=i,s.object=this,e.push(s)}yu.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),xu.prototype=Object.create(wi.prototype),xu.prototype.constructor=xu,xu.prototype.isLineBasicMaterial=!0,xu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this};var wu=new Jn,Eu=new Jn,Su=new sr,Tu=new Kr,Au=new Hr;function Mu(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),Tr.call(this),this.type="Line",this.geometry=void 0!==t?t:new Gi,this.material=void 0!==e?e:new xu}Mu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Mu,isLine:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,i=e.count;r<i;r++)wu.fromBufferAttribute(e,r-1),Eu.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=wu.distanceTo(Eu);t.setAttribute("lineDistance",new Li(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for((n=t.lineDistances)[0]=0,r=1,i=o.length;r<i;r++)n[r]=n[r-1],n[r]+=o[r-1].distanceTo(o[r])}return this},raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Au.copy(n.boundingSphere),Au.applyMatrix4(r),Au.radius+=i,!1!==t.ray.intersectsSphere(Au)){Su.getInverse(r),Tu.copy(t.ray).applyMatrix4(Su);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Jn,u=new Jn,l=new Jn,c=new Jn,h=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var f=n.index,p=n.attributes.position.array;if(null!==f)for(var d=f.array,m=0,v=d.length-1;m<v;m+=h){var g=d[m],y=d[m+1];s.fromArray(p,3*g),u.fromArray(p,3*y),Tu.distanceSqToSegment(s,u,c,l)>a||(c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else for(m=0,v=p.length/3-1;m<v;m+=h)s.fromArray(p,3*m),u.fromArray(p,3*m+3),Tu.distanceSqToSegment(s,u,c,l)>a||(c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}else if(n.isGeometry){var b=n.vertices,_=b.length;for(m=0;m<_-1;m+=h){var x;Tu.distanceSqToSegment(b[m],b[m+1],c,l)>a||(c.applyMatrix4(this.matrixWorld),(x=t.ray.origin.distanceTo(c))<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:m,face:null,faceIndex:null,object:this}))}}}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Cu=new Jn,Ou=new Jn;function Pu(t,e){Mu.call(this,t,e),this.type="LineSegments"}function ku(t,e){Mu.call(this,t,e),this.type="LineLoop"}function Iu(t){wi.call(this),this.type="PointsMaterial",this.color=new vi(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}Pu.prototype=Object.assign(Object.create(Mu.prototype),{constructor:Pu,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,i=e.count;r<i;r+=2)Cu.fromBufferAttribute(e,r),Ou.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Cu.distanceTo(Ou);t.setAttribute("lineDistance",new Li(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(t.isGeometry){var o=t.vertices;for(n=t.lineDistances,r=0,i=o.length;r<i;r+=2)Cu.copy(o[r]),Ou.copy(o[r+1]),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+Cu.distanceTo(Ou)}return this}}),ku.prototype=Object.assign(Object.create(Mu.prototype),{constructor:ku,isLineLoop:!0}),Iu.prototype=Object.create(wi.prototype),Iu.prototype.constructor=Iu,Iu.prototype.isPointsMaterial=!0,Iu.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Lu=new sr,Ru=new Kr,Du=new Hr,Nu=new Jn;function Fu(t,e){Tr.call(this),this.type="Points",this.geometry=void 0!==t?t:new Gi,this.material=void 0!==e?e:new Iu,this.updateMorphTargets()}function ju(t,e,n,r,i,o,a){var s=Ru.distanceSqToPoint(t);if(s<n){var u=new Jn;Ru.closestPointToPoint(t,u),u.applyMatrix4(r);var l=i.ray.origin.distanceTo(u);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:a})}}function Uu(t,e,n,r,i,o,a,s,u){qn.call(this,t,e,n,r,i,o,a,s,u),this.format=void 0!==a?a:zt,this.minFilter=void 0!==o?o:wt,this.magFilter=void 0!==i?i:wt,this.generateMipmaps=!1}function zu(t,e,n,r,i,o,a,s,u,l,c,h){qn.call(this,null,o,a,s,u,l,r,i,c,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Bu(t,e,n,r,i,o,a,s,u){qn.call(this,t,e,n,r,i,o,a,s,u),this.needsUpdate=!0}function Vu(t,e,n,r,i,o,a,s,u,l){if((l=void 0!==l?l:Wt)!==Wt&&l!==qt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===Wt&&(n=Pt),void 0===n&&l===qt&&(n=jt),qn.call(this,null,r,i,o,a,s,l,n,u),this.image={width:t,height:e},this.magFilter=void 0!==a?a:gt,this.minFilter=void 0!==s?s:gt,this.flipY=!1,this.generateMipmaps=!1}function Hu(t){Gi.call(this),this.type="WireframeGeometry";var e,n,r,i,o,a,s,u,l,c,h=[],f=[0,0],p={},d=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,r=m.length;e<r;e++){var v=m[e];for(n=0;n<3;n++)s=v[d[n]],u=v[d[(n+1)%3]],f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===p[l=f[0]+","+f[1]]&&(p[l]={index1:f[0],index2:f[1]})}for(l in p)a=p[l],c=t.vertices[a.index1],h.push(c.x,c.y,c.z),c=t.vertices[a.index2],h.push(c.x,c.y,c.z)}else if(t&&t.isBufferGeometry){var g,y,b,_,x,w,E;if(c=new Jn,null!==t.index){for(g=t.attributes.position,y=t.index,0===(b=t.groups).length&&(b=[{start:0,count:y.count,materialIndex:0}]),i=0,o=b.length;i<o;++i)for(e=x=(_=b[i]).start,r=x+_.count;e<r;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),u=y.getX(e+(n+1)%3),f[0]=Math.min(s,u),f[1]=Math.max(s,u),void 0===p[l=f[0]+","+f[1]]&&(p[l]={index1:f[0],index2:f[1]});for(l in p)a=p[l],c.fromBufferAttribute(g,a.index1),h.push(c.x,c.y,c.z),c.fromBufferAttribute(g,a.index2),h.push(c.x,c.y,c.z)}else for(e=0,r=(g=t.attributes.position).count/3;e<r;e++)for(n=0;n<3;n++)w=3*e+n,c.fromBufferAttribute(g,w),h.push(c.x,c.y,c.z),E=3*e+(n+1)%3,c.fromBufferAttribute(g,E),h.push(c.x,c.y,c.z)}this.setAttribute("position",new Li(h,3))}function Gu(t,e,n){vo.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new Wu(t,e,n)),this.mergeVertices()}function Wu(t,e,n){Gi.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var r,i,o=[],a=[],s=[],u=[],l=1e-5,c=new Jn,h=new Jn,f=new Jn,p=new Jn,d=new Jn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(r=0;r<=n;r++){var v=r/n;for(i=0;i<=e;i++){var g=i/e;t(g,v,h),a.push(h.x,h.y,h.z),g-l>=0?(t(g-l,v,f),p.subVectors(h,f)):(t(g+l,v,f),p.subVectors(f,h)),v-l>=0?(t(g,v-l,f),d.subVectors(h,f)):(t(g,v+l,f),d.subVectors(f,h)),c.crossVectors(p,d).normalize(),s.push(c.x,c.y,c.z),u.push(g,v)}}for(r=0;r<n;r++)for(i=0;i<e;i++){var y=r*m+i,b=r*m+i+1,_=(r+1)*m+i+1,x=(r+1)*m+i;o.push(y,b,x),o.push(b,_,x)}this.setIndex(o),this.setAttribute("position",new Li(a,3)),this.setAttribute("normal",new Li(s,3)),this.setAttribute("uv",new Li(u,2))}function qu(t,e,n,r){vo.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},this.fromBufferGeometry(new Xu(t,e,n,r)),this.mergeVertices()}function Xu(t,e,n,r){Gi.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r},n=n||1;var i=[],o=[];function a(t,e,n,r){var i,o,a=Math.pow(2,r),u=[];for(i=0;i<=a;i++){u[i]=[];var l=t.clone().lerp(n,i/a),c=e.clone().lerp(n,i/a),h=a-i;for(o=0;o<=h;o++)u[i][o]=0===o&&i===a?l:l.clone().lerp(c,o/h)}for(i=0;i<a;i++)for(o=0;o<2*(a-i)-1;o++){var f=Math.floor(o/2);o%2==0?(s(u[i][f+1]),s(u[i+1][f]),s(u[i][f])):(s(u[i][f+1]),s(u[i+1][f+1]),s(u[i+1][f]))}}function s(t){i.push(t.x,t.y,t.z)}function u(e,n){var r=3*e;n.x=t[r+0],n.y=t[r+1],n.z=t[r+2]}function l(t,e,n,r){r<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=r/2/Math.PI+.5)}function c(t){return Math.atan2(t.z,-t.x)}function h(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}!function(t){for(var n=new Jn,r=new Jn,i=new Jn,o=0;o<e.length;o+=3)u(e[o+0],n),u(e[o+1],r),u(e[o+2],i),a(n,r,i,t)}(r=r||0),function(t){for(var e=new Jn,n=0;n<i.length;n+=3)e.x=i[n+0],e.y=i[n+1],e.z=i[n+2],e.normalize().multiplyScalar(t),i[n+0]=e.x,i[n+1]=e.y,i[n+2]=e.z}(n),function(){for(var t=new Jn,e=0;e<i.length;e+=3){t.x=i[e+0],t.y=i[e+1],t.z=i[e+2];var n=c(t)/2/Math.PI+.5,r=h(t)/Math.PI+.5;o.push(n,1-r)}(function(){for(var t=new Jn,e=new Jn,n=new Jn,r=new Jn,a=new Vn,s=new Vn,u=new Vn,h=0,f=0;h<i.length;h+=9,f+=6){t.set(i[h+0],i[h+1],i[h+2]),e.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[f+0],o[f+1]),s.set(o[f+2],o[f+3]),u.set(o[f+4],o[f+5]),r.copy(t).add(e).add(n).divideScalar(3);var p=c(r);l(a,f+0,t,p),l(s,f+2,e,p),l(u,f+4,n,p)}})(),function(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],r=o[t+4],i=Math.max(e,n,r),a=Math.min(e,n,r);i>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),r<.2&&(o[t+4]+=1))}}()}(),this.setAttribute("position",new Li(i,3)),this.setAttribute("normal",new Li(i.slice(),3)),this.setAttribute("uv",new Li(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Yu(t,e){vo.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Qu(t,e)),this.mergeVertices()}function Qu(t,e){Xu.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Zu(t,e){vo.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ku(t,e)),this.mergeVertices()}function Ku(t,e){Xu.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function $u(t,e){vo.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ju(t,e)),this.mergeVertices()}function Ju(t,e){var n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];Xu.call(this,r,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function tl(t,e){vo.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new el(t,e)),this.mergeVertices()}function el(t,e){var n=(1+Math.sqrt(5))/2,r=1/n,i=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r];Xu.call(this,i,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function nl(t,e,n,r,i,o){vo.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new rl(t,e,n,r,i);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function rl(t,e,n,r,i){Gi.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:r,closed:i},e=e||64,n=n||1,r=r||8,i=i||!1;var o=t.computeFrenetFrames(e,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,u=new Jn,l=new Jn,c=new Vn,h=new Jn,f=[],p=[],d=[],m=[];function v(i){h=t.getPointAt(i/e,h);var a=o.normals[i],c=o.binormals[i];for(s=0;s<=r;s++){var d=s/r*Math.PI*2,m=Math.sin(d),v=-Math.cos(d);l.x=v*a.x+m*c.x,l.y=v*a.y+m*c.y,l.z=v*a.z+m*c.z,l.normalize(),p.push(l.x,l.y,l.z),u.x=h.x+n*l.x,u.y=h.y+n*l.y,u.z=h.z+n*l.z,f.push(u.x,u.y,u.z)}}!function(){for(a=0;a<e;a++)v(a);v(!1===i?e:0),function(){for(a=0;a<=e;a++)for(s=0;s<=r;s++)c.x=a/e,c.y=s/r,d.push(c.x,c.y)}(),function(){for(s=1;s<=e;s++)for(a=1;a<=r;a++){var t=(r+1)*(s-1)+(a-1),n=(r+1)*s+(a-1),i=(r+1)*s+a,o=(r+1)*(s-1)+a;m.push(t,n,o),m.push(n,i,o)}}()}(),this.setIndex(m),this.setAttribute("position",new Li(f,3)),this.setAttribute("normal",new Li(p,3)),this.setAttribute("uv",new Li(d,2))}function il(t,e,n,r,i,o,a){vo.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new ol(t,e,n,r,i,o)),this.mergeVertices()}function ol(t,e,n,r,i,o){Gi.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:r,p:i,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,r=Math.floor(r)||8,i=i||2,o=o||3;var a,s,u=[],l=[],c=[],h=[],f=new Jn,p=new Jn,d=new Jn,m=new Jn,v=new Jn,g=new Jn,y=new Jn;for(a=0;a<=n;++a){var b=a/n*i*Math.PI*2;for(M(b,i,o,t,d),M(b+.01,i,o,t,m),g.subVectors(m,d),y.addVectors(m,d),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=r;++s){var _=s/r*Math.PI*2,x=-e*Math.cos(_),w=e*Math.sin(_);f.x=d.x+(x*y.x+w*v.x),f.y=d.y+(x*y.y+w*v.y),f.z=d.z+(x*y.z+w*v.z),l.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),c.push(p.x,p.y,p.z),h.push(a/n),h.push(s/r)}}for(s=1;s<=n;s++)for(a=1;a<=r;a++){var E=(r+1)*(s-1)+(a-1),S=(r+1)*s+(a-1),T=(r+1)*s+a,A=(r+1)*(s-1)+a;u.push(E,S,A),u.push(S,T,A)}function M(t,e,n,r,i){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,u=Math.cos(s);i.x=r*(2+u)*.5*o,i.y=r*(2+u)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(u),this.setAttribute("position",new Li(l,3)),this.setAttribute("normal",new Li(c,3)),this.setAttribute("uv",new Li(h,2))}function al(t,e,n,r,i){vo.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},this.fromBufferGeometry(new sl(t,e,n,r,i)),this.mergeVertices()}function sl(t,e,n,r,i){Gi.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:i},t=t||1,e=e||.4,n=Math.floor(n)||8,r=Math.floor(r)||6,i=i||2*Math.PI;var o,a,s=[],u=[],l=[],c=[],h=new Jn,f=new Jn,p=new Jn;for(o=0;o<=n;o++)for(a=0;a<=r;a++){var d=a/r*i,m=o/n*Math.PI*2;f.x=(t+e*Math.cos(m))*Math.cos(d),f.y=(t+e*Math.cos(m))*Math.sin(d),f.z=e*Math.sin(m),u.push(f.x,f.y,f.z),h.x=t*Math.cos(d),h.y=t*Math.sin(d),p.subVectors(f,h).normalize(),l.push(p.x,p.y,p.z),c.push(a/r),c.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=r;a++){var v=(r+1)*o+a-1,g=(r+1)*(o-1)+a-1,y=(r+1)*(o-1)+a,b=(r+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.setAttribute("position",new Li(u,3)),this.setAttribute("normal",new Li(l,3)),this.setAttribute("uv",new Li(c,2))}Fu.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Fu,isPoints:!0,raycast:function(t,e){var n=this.geometry,r=this.matrixWorld,i=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Du.copy(n.boundingSphere),Du.applyMatrix4(r),Du.radius+=i,!1!==t.ray.intersectsSphere(Du)){Lu.getInverse(r),Ru.copy(t.ray).applyMatrix4(Lu);var o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var l=s.array,c=0,h=l.length;c<h;c++){var f=l[c];Nu.fromArray(u,3*f),ju(Nu,f,a,r,t,e,this)}else{c=0;for(var p=u.length/3;c<p;c++)Nu.fromArray(u,3*c),ju(Nu,c,a,r,t,e,this)}}else{var d=n.vertices;for(c=0,p=d.length;c<p;c++)ju(d[c],c,a,r,t,e,this)}}},updateMorphTargets:function(){var t,e,n,r=this.geometry;if(r.isBufferGeometry){var i=r.morphAttributes,o=Object.keys(i);if(o.length>0){var a=i[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=r.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Uu.prototype=Object.assign(Object.create(qn.prototype),{constructor:Uu,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),zu.prototype=Object.create(qn.prototype),zu.prototype.constructor=zu,zu.prototype.isCompressedTexture=!0,Bu.prototype=Object.create(qn.prototype),Bu.prototype.constructor=Bu,Bu.prototype.isCanvasTexture=!0,Vu.prototype=Object.create(qn.prototype),Vu.prototype.constructor=Vu,Vu.prototype.isDepthTexture=!0,Hu.prototype=Object.create(Gi.prototype),Hu.prototype.constructor=Hu,Gu.prototype=Object.create(vo.prototype),Gu.prototype.constructor=Gu,Wu.prototype=Object.create(Gi.prototype),Wu.prototype.constructor=Wu,qu.prototype=Object.create(vo.prototype),qu.prototype.constructor=qu,Xu.prototype=Object.create(Gi.prototype),Xu.prototype.constructor=Xu,Yu.prototype=Object.create(vo.prototype),Yu.prototype.constructor=Yu,Qu.prototype=Object.create(Xu.prototype),Qu.prototype.constructor=Qu,Zu.prototype=Object.create(vo.prototype),Zu.prototype.constructor=Zu,Ku.prototype=Object.create(Xu.prototype),Ku.prototype.constructor=Ku,$u.prototype=Object.create(vo.prototype),$u.prototype.constructor=$u,Ju.prototype=Object.create(Xu.prototype),Ju.prototype.constructor=Ju,tl.prototype=Object.create(vo.prototype),tl.prototype.constructor=tl,el.prototype=Object.create(Xu.prototype),el.prototype.constructor=el,nl.prototype=Object.create(vo.prototype),nl.prototype.constructor=nl,rl.prototype=Object.create(Gi.prototype),rl.prototype.constructor=rl,rl.prototype.toJSON=function(){var t=Gi.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},il.prototype=Object.create(vo.prototype),il.prototype.constructor=il,ol.prototype=Object.create(Gi.prototype),ol.prototype.constructor=ol,al.prototype=Object.create(vo.prototype),al.prototype.constructor=al,sl.prototype=Object.create(Gi.prototype),sl.prototype.constructor=sl;function ul(t,e,n,r,i){var o,a;if(i===function(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}(t,e,n,r)>0)for(o=e;o<n;o+=r)a=Ol(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=Ol(o,t[o],t[o+1],a);return a&&El(a,a.next)&&(Pl(a),a=a.next),a}function ll(t,e){if(!t)return t;e||(e=t);var n,r=t;do{if(n=!1,r.steiner||!El(r,r.next)&&0!==wl(r.prev,r,r.next))r=r.next;else{if(Pl(r),(r=e=r.prev)===r.next)break;n=!0}}while(n||r!==e);return e}function cl(t,e,n,r,i,o,a){if(t){!a&&o&&function(t,e,n,r){var i=t;do{null===i.z&&(i.z=yl(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var e,n,r,i,o,a,s,u,l=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,s=0,e=0;e<l&&(s++,r=r.nextZ);e++);for(u=l;s>0||u>0&&r;)0!==s&&(0===u||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,l*=2}while(a>1)}(i)}(t,r,i,o);for(var s,u,l=t;t.prev!==t.next;)if(s=t.prev,u=t.next,o?fl(t,r,i,o):hl(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),Pl(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?cl(t=pl(ll(t),e,n),e,n,r,i,o,2):2===a&&dl(t,e,n,r,i,o):cl(ll(t),e,n,r,i,o,1);break}}}function hl(t){var e=t.prev,n=t,r=t.next;if(wl(e,n,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(_l(e.x,e.y,n.x,n.y,r.x,r.y,i.x,i.y)&&wl(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function fl(t,e,n,r){var i=t.prev,o=t,a=t.next;if(wl(i,o,a)>=0)return!1;for(var s=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,l=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,h=yl(s,u,e,n,r),f=yl(l,c,e,n,r),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&_l(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&_l(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&wl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&_l(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&wl(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&_l(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&wl(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function pl(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!El(i,o)&&Sl(i,r,r.next,o)&&Ml(i,o)&&Ml(o,i)&&(e.push(i.i/n),e.push(r.i/n),e.push(o.i/n),Pl(r),Pl(r.next),r=t=o),r=r.next}while(r!==t);return ll(r)}function dl(t,e,n,r,i,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&xl(a,s)){var u=Cl(a,s);return a=ll(a,a.next),u=ll(u,u.next),cl(a,e,n,r,i,o),void cl(u,e,n,r,i,o)}s=s.next}a=a.next}while(a!==t)}function ml(t,e){return t.x-e.x}function vl(t,e){if(e=function(t,e){var n,r=e,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a){if(a=s,s===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!n)return null;if(i===a)return n;var u,l=n,c=n.x,h=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&_l(o<h?i:a,o,c,h,o<h?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),Ml(r,t)&&(u<f||u===f&&(r.x>n.x||r.x===n.x&&gl(n,r)))&&(n=r,f=u)),r=r.next}while(r!==l);return n}(t,e)){var n=Cl(e,t);ll(e,e.next),ll(n,n.next)}}function gl(t,e){return wl(t.prev,t,e.prev)<0&&wl(e.next,t,t.next)<0}function yl(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*i)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function bl(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function _l(t,e,n,r,i,o,a,s){return(i-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(r-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(i-a)*(r-s)>=0}function xl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Sl(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Ml(t,e)&&Ml(e,t)&&function(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(wl(t.prev,t,e.prev)||wl(t,e.prev,e))||El(t,e)&&wl(t.prev,t,t.next)>0&&wl(e.prev,e,e.next)>0)}function wl(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function El(t,e){return t.x===e.x&&t.y===e.y}function Sl(t,e,n,r){var i=Al(wl(t,e,n)),o=Al(wl(t,e,r)),a=Al(wl(n,r,t)),s=Al(wl(n,r,e));return i!==o&&a!==s||!(0!==i||!Tl(t,n,e))||!(0!==o||!Tl(t,r,e))||!(0!==a||!Tl(n,t,r))||!(0!==s||!Tl(n,e,r))}function Tl(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Al(t){return t>0?1:t<0?-1:0}function Ml(t,e){return wl(t.prev,t,t.next)<0?wl(t,e,t.next)>=0&&wl(t,t.prev,e)>=0:wl(t,e,t.prev)<0||wl(t,t.next,e)<0}function Cl(t,e){var n=new kl(t.i,t.x,t.y),r=new kl(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Ol(t,e,n,r){var i=new kl(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Pl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function kl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Il={area:function(t){for(var e=t.length,n=0,r=e-1,i=0;i<e;r=i++)n+=t[r].x*t[i].y-t[i].x*t[r].y;return.5*n},isClockWise:function(t){return Il.area(t)<0},triangulateShape:function(t,e){var n=[],r=[],i=[];Ll(t),Rl(n,t);var o=t.length;e.forEach(Ll);for(var a=0;a<e.length;a++)r.push(o),o+=e[a].length,Rl(n,e[a]);var s=function(t,e,n){n=n||2;var r,i,o,a,s,u,l,c=e&&e.length,h=c?e[0]*n:t.length,f=ul(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(c&&(f=function(t,e,n,r){var i,o,a,s=[];for(i=0,o=e.length;i<o;i++)(a=ul(t,e[i]*r,i<o-1?e[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),s.push(bl(a));for(s.sort(ml),i=0;i<s.length;i++)vl(s[i],n),n=ll(n,n.next);return n}(t,e,f,n)),t.length>80*n){r=o=t[0],i=a=t[1];for(var d=n;d<h;d+=n)(s=t[d])<r&&(r=s),(u=t[d+1])<i&&(i=u),s>o&&(o=s),u>a&&(a=u);l=0!==(l=Math.max(o-r,a-i))?1/l:0}return cl(f,p,n,r,i,l),p}(n,r);for(a=0;a<s.length;a+=3)i.push(s.slice(a,a+3));return i}};function Ll(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Rl(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function Dl(t,e){vo.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new Nl(t,e)),this.mergeVertices()}function Nl(t,e){Gi.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,r=[],i=[],o=0,a=t.length;o<a;o++)s(t[o]);function s(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,u=void 0!==e.depth?e.depth:100,l=void 0===e.bevelEnabled||e.bevelEnabled,c=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:c-2,f=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,d=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:Fl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),u=e.amount);var v,g,y,b,_,x,w,E,S=!1;d&&(v=d.getSpacedPoints(s),S=!0,l=!1,g=d.computeFrenetFrames(s,!1),y=new Jn,b=new Jn,_=new Jn),l||(p=0,c=0,h=0,f=0);var T=t.extractPoints(a),A=T.shape,M=T.holes;if(!Il.isClockWise(A))for(A=A.reverse(),w=0,E=M.length;w<E;w++)x=M[w],Il.isClockWise(x)&&(M[w]=x.reverse());var C=Il.triangulateShape(A,M),O=A;for(w=0,E=M.length;w<E;w++)x=M[w],A=A.concat(x);function P(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var k,I,L,R,D,N,F=A.length,j=C.length;function U(t,e,n){var r,i,o,a=t.x-e.x,s=t.y-e.y,u=n.x-t.x,l=n.y-t.y,c=a*a+s*s,h=a*l-s*u;if(Math.abs(h)>Number.EPSILON){var f=Math.sqrt(c),p=Math.sqrt(u*u+l*l),d=e.x-s/f,m=e.y+a/f,v=((n.x-l/p-d)*l-(n.y+u/p-m)*u)/(a*l-s*u),g=(r=d+a*v-t.x)*r+(i=m+s*v-t.y)*i;if(g<=2)return new Vn(r,i);o=Math.sqrt(g/2)}else{var y=!1;a>Number.EPSILON?u>Number.EPSILON&&(y=!0):a<-Number.EPSILON?u<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(r=-s,i=a,o=Math.sqrt(c)):(r=a,i=s,o=Math.sqrt(c/2))}return new Vn(r/o,i/o)}for(var z=[],B=0,V=O.length,H=V-1,G=B+1;B<V;B++,H++,G++)H===V&&(H=0),G===V&&(G=0),z[B]=U(O[B],O[H],O[G]);var W,q,X=[],Y=z.concat();for(w=0,E=M.length;w<E;w++){for(x=M[w],W=[],B=0,H=(V=x.length)-1,G=B+1;B<V;B++,H++,G++)H===V&&(H=0),G===V&&(G=0),W[B]=U(x[B],x[H],x[G]);X.push(W),Y=Y.concat(W)}for(k=0;k<p;k++){for(L=k/p,R=c*Math.cos(L*Math.PI/2),I=h*Math.sin(L*Math.PI/2)+f,B=0,V=O.length;B<V;B++)Z((D=P(O[B],z[B],I)).x,D.y,-R);for(w=0,E=M.length;w<E;w++)for(x=M[w],W=X[w],B=0,V=x.length;B<V;B++)Z((D=P(x[B],W[B],I)).x,D.y,-R)}for(I=h+f,B=0;B<F;B++)D=l?P(A[B],Y[B],I):A[B],S?(b.copy(g.normals[0]).multiplyScalar(D.x),y.copy(g.binormals[0]).multiplyScalar(D.y),_.copy(v[0]).add(b).add(y),Z(_.x,_.y,_.z)):Z(D.x,D.y,0);for(q=1;q<=s;q++)for(B=0;B<F;B++)D=l?P(A[B],Y[B],I):A[B],S?(b.copy(g.normals[q]).multiplyScalar(D.x),y.copy(g.binormals[q]).multiplyScalar(D.y),_.copy(v[q]).add(b).add(y),Z(_.x,_.y,_.z)):Z(D.x,D.y,u/s*q);for(k=p-1;k>=0;k--){for(L=k/p,R=c*Math.cos(L*Math.PI/2),I=h*Math.sin(L*Math.PI/2)+f,B=0,V=O.length;B<V;B++)Z((D=P(O[B],z[B],I)).x,D.y,u+R);for(w=0,E=M.length;w<E;w++)for(x=M[w],W=X[w],B=0,V=x.length;B<V;B++)D=P(x[B],W[B],I),S?Z(D.x,D.y+v[s-1].y,v[s-1].x+R):Z(D.x,D.y,u+R)}function Q(t,e){var n,r;for(B=t.length;--B>=0;){n=B,(r=B-1)<0&&(r=t.length-1);var i=0,o=s+2*p;for(i=0;i<o;i++){var a=F*i,u=F*(i+1);$(e+n+a,e+r+a,e+r+u,e+n+u)}}}function Z(t,e,n){o.push(t),o.push(e),o.push(n)}function K(t,e,i){J(t),J(e),J(i);var o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);tt(a[0]),tt(a[1]),tt(a[2])}function $(t,e,i,o){J(t),J(e),J(o),J(e),J(i),J(o);var a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);tt(s[0]),tt(s[1]),tt(s[3]),tt(s[1]),tt(s[2]),tt(s[3])}function J(t){r.push(o[3*t+0]),r.push(o[3*t+1]),r.push(o[3*t+2])}function tt(t){i.push(t.x),i.push(t.y)}!function(){var t=r.length/3;if(l){var e=0,i=F*e;for(B=0;B<j;B++)K((N=C[B])[2]+i,N[1]+i,N[0]+i);for(i=F*(e=s+2*p),B=0;B<j;B++)K((N=C[B])[0]+i,N[1]+i,N[2]+i)}else{for(B=0;B<j;B++)K((N=C[B])[2],N[1],N[0]);for(B=0;B<j;B++)K((N=C[B])[0]+F*s,N[1]+F*s,N[2]+F*s)}n.addGroup(t,r.length/3-t,0)}(),function(){var t=r.length/3,e=0;for(Q(O,e),e+=O.length,w=0,E=M.length;w<E;w++)Q(x=M[w],e),e+=x.length;n.addGroup(t,r.length/3-t,1)}()}this.setAttribute("position",new Li(r,3)),this.setAttribute("uv",new Li(i,2)),this.computeVertexNormals()}Dl.prototype=Object.create(vo.prototype),Dl.prototype.constructor=Dl,Dl.prototype.toJSON=function(){var t=vo.prototype.toJSON.call(this);return jl(this.parameters.shapes,this.parameters.options,t)},Nl.prototype=Object.create(Gi.prototype),Nl.prototype.constructor=Nl,Nl.prototype.toJSON=function(){var t=Gi.prototype.toJSON.call(this);return jl(this.parameters.shapes,this.parameters.options,t)};var Fl={generateTopUV:function(t,e,n,r,i){var o=e[3*n],a=e[3*n+1],s=e[3*r],u=e[3*r+1],l=e[3*i],c=e[3*i+1];return[new Vn(o,a),new Vn(s,u),new Vn(l,c)]},generateSideWallUV:function(t,e,n,r,i,o){var a=e[3*n],s=e[3*n+1],u=e[3*n+2],l=e[3*r],c=e[3*r+1],h=e[3*r+2],f=e[3*i],p=e[3*i+1],d=e[3*i+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-c)<.01?[new Vn(a,1-u),new Vn(l,1-h),new Vn(f,1-d),new Vn(m,1-g)]:[new Vn(s,1-u),new Vn(c,1-h),new Vn(p,1-d),new Vn(v,1-g)]}};function jl(t,e,n){if(n.shapes=[],Array.isArray(t))for(var r=0,i=t.length;r<i;r++){var o=t[r];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function Ul(t,e){vo.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new zl(t,e)),this.mergeVertices()}function zl(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new vo;var r=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),Nl.call(this,r,e),this.type="TextBufferGeometry"}function Bl(t,e,n,r,i,o,a){vo.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Vl(t,e,n,r,i,o,a)),this.mergeVertices()}function Vl(t,e,n,r,i,o,a){Gi.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),r=void 0!==r?r:0,i=void 0!==i?i:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,u,l=Math.min(o+a,Math.PI),c=0,h=[],f=new Jn,p=new Jn,d=[],m=[],v=[],g=[];for(u=0;u<=n;u++){var y=[],b=u/n,_=0;for(0==u&&0==o?_=.5/e:u==n&&l==Math.PI&&(_=-.5/e),s=0;s<=e;s++){var x=s/e;f.x=-t*Math.cos(r+x*i)*Math.sin(o+b*a),f.y=t*Math.cos(o+b*a),f.z=t*Math.sin(r+x*i)*Math.sin(o+b*a),m.push(f.x,f.y,f.z),p.copy(f).normalize(),v.push(p.x,p.y,p.z),g.push(x+_,1-b),y.push(c++)}h.push(y)}for(u=0;u<n;u++)for(s=0;s<e;s++){var w=h[u][s+1],E=h[u][s],S=h[u+1][s],T=h[u+1][s+1];(0!==u||o>0)&&d.push(w,E,T),(u!==n-1||l<Math.PI)&&d.push(E,S,T)}this.setIndex(d),this.setAttribute("position",new Li(m,3)),this.setAttribute("normal",new Li(v,3)),this.setAttribute("uv",new Li(g,2))}function Hl(t,e,n,r,i,o){vo.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},this.fromBufferGeometry(new Gl(t,e,n,r,i,o)),this.mergeVertices()}function Gl(t,e,n,r,i,o){Gi.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},t=t||.5,e=e||1,i=void 0!==i?i:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var a,s,u,l=[],c=[],h=[],f=[],p=t,d=(e-t)/(r=void 0!==r?Math.max(1,r):1),m=new Jn,v=new Vn;for(s=0;s<=r;s++){for(u=0;u<=n;u++)a=i+u/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),c.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,f.push(v.x,v.y);p+=d}for(s=0;s<r;s++){var g=s*(n+1);for(u=0;u<n;u++){var y=a=u+g,b=a+n+1,_=a+n+2,x=a+1;l.push(y,b,x),l.push(b,_,x)}}this.setIndex(l),this.setAttribute("position",new Li(c,3)),this.setAttribute("normal",new Li(h,3)),this.setAttribute("uv",new Li(f,2))}function Wl(t,e,n,r){vo.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},this.fromBufferGeometry(new ql(t,e,n,r)),this.mergeVertices()}function ql(t,e,n,r){Gi.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:r},e=Math.floor(e)||12,n=n||0,r=r||2*Math.PI,r=Bn.clamp(r,0,2*Math.PI);var i,o,a,s=[],u=[],l=[],c=1/e,h=new Jn,f=new Vn;for(o=0;o<=e;o++){var p=n+o*c*r,d=Math.sin(p),m=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*d,h.y=t[a].y,h.z=t[a].x*m,u.push(h.x,h.y,h.z),f.x=o/e,f.y=a/(t.length-1),l.push(f.x,f.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){var v=i=a+o*t.length,g=i+t.length,y=i+t.length+1,b=i+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.setAttribute("position",new Li(u,3)),this.setAttribute("uv",new Li(l,2)),this.computeVertexNormals(),r===2*Math.PI){var _=this.attributes.normal.array,x=new Jn,w=new Jn,E=new Jn;for(i=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)x.x=_[a+0],x.y=_[a+1],x.z=_[a+2],w.x=_[i+a+0],w.y=_[i+a+1],w.z=_[i+a+2],E.addVectors(x,w).normalize(),_[a+0]=_[i+a+0]=E.x,_[a+1]=_[i+a+1]=E.y,_[a+2]=_[i+a+2]=E.z}}function Xl(t,e){vo.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Yl(t,e)),this.mergeVertices()}function Yl(t,e){Gi.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],r=[],i=[],o=[],a=0,s=0;if(!1===Array.isArray(t))l(t);else for(var u=0;u<t.length;u++)l(t[u]),this.addGroup(a,s,u),a+=s,s=0;function l(t){var a,u,l,c=r.length/3,h=t.extractPoints(e),f=h.shape,p=h.holes;for(!1===Il.isClockWise(f)&&(f=f.reverse()),a=0,u=p.length;a<u;a++)l=p[a],!0===Il.isClockWise(l)&&(p[a]=l.reverse());var d=Il.triangulateShape(f,p);for(a=0,u=p.length;a<u;a++)l=p[a],f=f.concat(l);for(a=0,u=f.length;a<u;a++){var m=f[a];r.push(m.x,m.y,0),i.push(0,0,1),o.push(m.x,m.y)}for(a=0,u=d.length;a<u;a++){var v=d[a],g=v[0]+c,y=v[1]+c,b=v[2]+c;n.push(g,y,b),s+=3}}this.setIndex(n),this.setAttribute("position",new Li(r,3)),this.setAttribute("normal",new Li(i,3)),this.setAttribute("uv",new Li(o,2))}function Ql(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}function Zl(t,e){Gi.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,r,i,o,a=[],s=Math.cos(Bn.DEG2RAD*e),u=[0,0],l={},c=["a","b","c"];t.isBufferGeometry?(o=new vo).fromBufferGeometry(t):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,f=o.faces,p=0,d=f.length;p<d;p++)for(var m=f[p],v=0;v<3;v++)n=m[c[v]],r=m[c[(v+1)%3]],u[0]=Math.min(n,r),u[1]=Math.max(n,r),void 0===l[i=u[0]+","+u[1]]?l[i]={index1:u[0],index2:u[1],face1:p,face2:void 0}:l[i].face2=p;for(i in l){var g=l[i];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.setAttribute("position",new Li(a,3))}function Kl(t,e,n,r,i,o,a,s){vo.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new $l(t,e,n,r,i,o,a,s)),this.mergeVertices()}function $l(t,e,n,r,i,o,a,s){Gi.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};var u=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,r=Math.floor(r)||8,i=Math.floor(i)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var l=[],c=[],h=[],f=[],p=0,d=[],m=n/2,v=0;function g(n){var i,o,d,g=new Vn,y=new Jn,b=0,_=!0===n?t:e,x=!0===n?1:-1;for(o=p,i=1;i<=r;i++)c.push(0,m*x,0),h.push(0,x,0),f.push(.5,.5),p++;for(d=p,i=0;i<=r;i++){var w=i/r*s+a,E=Math.cos(w),S=Math.sin(w);y.x=_*S,y.y=m*x,y.z=_*E,c.push(y.x,y.y,y.z),h.push(0,x,0),g.x=.5*E+.5,g.y=.5*S*x+.5,f.push(g.x,g.y),p++}for(i=0;i<r;i++){var T=o+i,A=d+i;!0===n?l.push(A,A+1,T):l.push(A+1,A,T),b+=3}u.addGroup(v,b,!0===n?1:2),v+=b}!function(){var o,g,y=new Jn,b=new Jn,_=0,x=(e-t)/n;for(g=0;g<=i;g++){var w=[],E=g/i,S=E*(e-t)+t;for(o=0;o<=r;o++){var T=o/r,A=T*s+a,M=Math.sin(A),C=Math.cos(A);b.x=S*M,b.y=-E*n+m,b.z=S*C,c.push(b.x,b.y,b.z),y.set(M,x,C).normalize(),h.push(y.x,y.y,y.z),f.push(T,1-E),w.push(p++)}d.push(w)}for(o=0;o<r;o++)for(g=0;g<i;g++){var O=d[g][o],P=d[g+1][o],k=d[g+1][o+1],I=d[g][o+1];l.push(O,P,I),l.push(P,k,I),_+=6}u.addGroup(v,_,0),v+=_}(),!1===o&&(t>0&&g(!0),e>0&&g(!1)),this.setIndex(l),this.setAttribute("position",new Li(c,3)),this.setAttribute("normal",new Li(h,3)),this.setAttribute("uv",new Li(f,2))}function Jl(t,e,n,r,i,o,a){Kl.call(this,0,t,e,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function tc(t,e,n,r,i,o,a){$l.call(this,0,t,e,n,r,i,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}function ec(t,e,n,r){vo.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new nc(t,e,n,r)),this.mergeVertices()}function nc(t,e,n,r){Gi.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var i,o,a=[],s=[],u=[],l=[],c=new Jn,h=new Vn;for(s.push(0,0,0),u.push(0,0,1),l.push(.5,.5),o=0,i=3;o<=e;o++,i+=3){var f=n+o/e*r;c.x=t*Math.cos(f),c.y=t*Math.sin(f),s.push(c.x,c.y,c.z),u.push(0,0,1),h.x=(s[i]/t+1)/2,h.y=(s[i+1]/t+1)/2,l.push(h.x,h.y)}for(i=1;i<=e;i++)a.push(i,i+1,0);this.setIndex(a),this.setAttribute("position",new Li(s,3)),this.setAttribute("normal",new Li(u,3)),this.setAttribute("uv",new Li(l,2))}Ul.prototype=Object.create(vo.prototype),Ul.prototype.constructor=Ul,zl.prototype=Object.create(Nl.prototype),zl.prototype.constructor=zl,Bl.prototype=Object.create(vo.prototype),Bl.prototype.constructor=Bl,Vl.prototype=Object.create(Gi.prototype),Vl.prototype.constructor=Vl,Hl.prototype=Object.create(vo.prototype),Hl.prototype.constructor=Hl,Gl.prototype=Object.create(Gi.prototype),Gl.prototype.constructor=Gl,Wl.prototype=Object.create(vo.prototype),Wl.prototype.constructor=Wl,ql.prototype=Object.create(Gi.prototype),ql.prototype.constructor=ql,Xl.prototype=Object.create(vo.prototype),Xl.prototype.constructor=Xl,Xl.prototype.toJSON=function(){var t=vo.prototype.toJSON.call(this);return Ql(this.parameters.shapes,t)},Yl.prototype=Object.create(Gi.prototype),Yl.prototype.constructor=Yl,Yl.prototype.toJSON=function(){var t=Gi.prototype.toJSON.call(this);return Ql(this.parameters.shapes,t)},Zl.prototype=Object.create(Gi.prototype),Zl.prototype.constructor=Zl,Kl.prototype=Object.create(vo.prototype),Kl.prototype.constructor=Kl,$l.prototype=Object.create(Gi.prototype),$l.prototype.constructor=$l,Jl.prototype=Object.create(Kl.prototype),Jl.prototype.constructor=Jl,tc.prototype=Object.create($l.prototype),tc.prototype.constructor=tc,ec.prototype=Object.create(vo.prototype),ec.prototype.constructor=ec,nc.prototype=Object.create(Gi.prototype),nc.prototype.constructor=nc;var rc=Object.freeze({__proto__:null,WireframeGeometry:Hu,ParametricGeometry:Gu,ParametricBufferGeometry:Wu,TetrahedronGeometry:Yu,TetrahedronBufferGeometry:Qu,OctahedronGeometry:Zu,OctahedronBufferGeometry:Ku,IcosahedronGeometry:$u,IcosahedronBufferGeometry:Ju,DodecahedronGeometry:tl,DodecahedronBufferGeometry:el,PolyhedronGeometry:qu,PolyhedronBufferGeometry:Xu,TubeGeometry:nl,TubeBufferGeometry:rl,TorusKnotGeometry:il,TorusKnotBufferGeometry:ol,TorusGeometry:al,TorusBufferGeometry:sl,TextGeometry:Ul,TextBufferGeometry:zl,SphereGeometry:Bl,SphereBufferGeometry:Vl,RingGeometry:Hl,RingBufferGeometry:Gl,PlaneGeometry:Do,PlaneBufferGeometry:No,LatheGeometry:Wl,LatheBufferGeometry:ql,ShapeGeometry:Xl,ShapeBufferGeometry:Yl,ExtrudeGeometry:Dl,ExtrudeBufferGeometry:Nl,EdgesGeometry:Zl,ConeGeometry:Jl,ConeBufferGeometry:tc,CylinderGeometry:Kl,CylinderBufferGeometry:$l,CircleGeometry:ec,CircleBufferGeometry:nc,BoxGeometry:go,BoxBufferGeometry:yo});function ic(t){wi.call(this),this.type="ShadowMaterial",this.color=new vi(0),this.transparent=!0,this.setValues(t)}function oc(t){wo.call(this,t),this.type="RawShaderMaterial"}function ac(t){wi.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vi(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Vn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function sc(t){ac.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transparency=0,this.setValues(t)}function uc(t){wi.call(this),this.type="MeshPhongMaterial",this.color=new vi(16777215),this.specular=new vi(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Vn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function lc(t){wi.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new vi(16777215),this.specular=new vi(1118481),this.shininess=30,this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Vn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function cc(t){wi.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Vn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function hc(t){wi.call(this),this.type="MeshLambertMaterial",this.color=new vi(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vi(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=K,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function fc(t){wi.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new vi(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cn,this.normalScale=new Vn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function pc(t){xu.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}ic.prototype=Object.create(wi.prototype),ic.prototype.constructor=ic,ic.prototype.isShadowMaterial=!0,ic.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this},oc.prototype=Object.create(wo.prototype),oc.prototype.constructor=oc,oc.prototype.isRawShaderMaterial=!0,ac.prototype=Object.create(wi.prototype),ac.prototype.constructor=ac,ac.prototype.isMeshStandardMaterial=!0,ac.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},sc.prototype=Object.create(ac.prototype),sc.prototype.constructor=sc,sc.prototype.isMeshPhysicalMaterial=!0,sc.prototype.copy=function(t){return ac.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new vi).copy(t.sheen):this.sheen=null,this.transparency=t.transparency,this},uc.prototype=Object.create(wi.prototype),uc.prototype.constructor=uc,uc.prototype.isMeshPhongMaterial=!0,uc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},lc.prototype=Object.create(wi.prototype),lc.prototype.constructor=lc,lc.prototype.isMeshToonMaterial=!0,lc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},cc.prototype=Object.create(wi.prototype),cc.prototype.constructor=cc,cc.prototype.isMeshNormalMaterial=!0,cc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},hc.prototype=Object.create(wi.prototype),hc.prototype.constructor=hc,hc.prototype.isMeshLambertMaterial=!0,hc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},fc.prototype=Object.create(wi.prototype),fc.prototype.constructor=fc,fc.prototype.isMeshMatcapMaterial=!0,fc.prototype.copy=function(t){return wi.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},pc.prototype=Object.create(xu.prototype),pc.prototype.constructor=pc,pc.prototype.isLineDashedMaterial=!0,pc.prototype.copy=function(t){return xu.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var dc=Object.freeze({__proto__:null,ShadowMaterial:ic,SpriteMaterial:Vs,RawShaderMaterial:oc,ShaderMaterial:wo,PointsMaterial:Iu,MeshPhysicalMaterial:sc,MeshStandardMaterial:ac,MeshPhongMaterial:uc,MeshToonMaterial:lc,MeshNormalMaterial:cc,MeshLambertMaterial:hc,MeshDepthMaterial:Ts,MeshDistanceMaterial:As,MeshBasicMaterial:Ei,MeshMatcapMaterial:fc,LineDashedMaterial:pc,LineBasicMaterial:xu,Material:wi}),mc={arraySlice:function(t,e,n){return mc.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(e,n){return t[e]-t[n]})),n},sortedArray:function(t,e,n){for(var r=t.length,i=new t.constructor(r),o=0,a=0;a!==r;++o)for(var s=n[o]*e,u=0;u!==e;++u)i[a++]=t[s+u];return i},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var a=o[r];if(void 0!==a)if(Array.isArray(a))do{void 0!==(a=o[r])&&(e.push(o.time),n.push.apply(n,a)),o=t[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{void 0!==(a=o[r])&&(e.push(o.time),a.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(a=o[r])&&(e.push(o.time),n.push(a)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r,i){i=i||30;var o=t.clone();o.name=e;for(var a=[],s=0;s<o.tracks.length;++s){for(var u=o.tracks[s],l=u.getValueSize(),c=[],h=[],f=0;f<u.times.length;++f){var p=u.times[f]*i;if(!(p<n||p>=r)){c.push(u.times[f]);for(var d=0;d<l;++d)h.push(u.values[f*l+d])}}0!==c.length&&(u.times=mc.convertArray(c,u.times.constructor),u.values=mc.convertArray(h,u.values.constructor),a.push(u))}o.tracks=a;var m=1/0;for(s=0;s<o.tracks.length;++s)m>o.tracks[s].times[0]&&(m=o.tracks[s].times[0]);for(s=0;s<o.tracks.length;++s)o.tracks[s].shift(-1*m);return o.resetDuration(),o},makeClipAdditive:function(t,e,n,r){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===r||r<=0)&&(r=30);for(var i=t.tracks.length,o=e/r,a=0;a<i;++a){var s=n.tracks[a],u=s.ValueTypeName;if("bool"!==u&&"string"!==u){var l=t.tracks.find((function(t){return t.name===s.name&&t.ValueTypeName===u}));if(void 0!==l){var c,h=s.getValueSize(),f=s.times.length-1;if(o<=s.times[0])c=mc.arraySlice(s.values,0,s.valueSize);else if(o>=s.times[f]){var p=f*h;c=mc.arraySlice(s.values,p)}else{var d=s.createInterpolant();d.evaluate(o),c=d.resultBuffer}"quaternion"===u&&new Zn(c[0],c[1],c[2],c[3]).normalize().conjugate().toArray(c);for(var m=l.times.length,v=0;v<m;++v){var g=v*h;if("quaternion"===u)Zn.multiplyQuaternionsFlat(l.values,g,c,0,l.values,g);else for(var y=0;y<h;++y)l.values[g+y]-=c[y]}}}}return t.blendMode=Qe,t}};function vc(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function gc(t,e,n,r){vc.call(this,t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function yc(t,e,n,r){vc.call(this,t,e,n,r)}function bc(t,e,n,r){vc.call(this,t,e,n,r)}function _c(t,e,n,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=mc.convertArray(e,this.TimeBufferType),this.values=mc.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}function xc(t,e,n){_c.call(this,t,e,n)}function wc(t,e,n,r){_c.call(this,t,e,n,r)}function Ec(t,e,n,r){_c.call(this,t,e,n,r)}function Sc(t,e,n,r){vc.call(this,t,e,n,r)}function Tc(t,e,n,r){_c.call(this,t,e,n,r)}function Ac(t,e,n,r){_c.call(this,t,e,n,r)}function Mc(t,e,n,r){_c.call(this,t,e,n,r)}function Cc(t,e,n,r){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==r?r:Ye,this.uuid=Bn.generateUUID(),this.duration<0&&this.resetDuration()}function Oc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Ec;case"vector":case"vector2":case"vector3":case"vector4":return Mc;case"color":return wc;case"quaternion":return Tc;case"bool":case"boolean":return xc;case"string":return Ac}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];mc.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(vc.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],i=e[n-1];t:{e:{var o;n:{r:if(!(t<r)){for(var a=n+2;;){if(void 0===r){if(t<i)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,i)}if(n===a)break;if(i=r,t<(r=e[++n]))break e}o=e.length;break n}if(t>=i)break t;var s=e[1];for(t<s&&(n=2,i=s),a=n-2;;){if(void 0===i)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===a)break;if(r=i,t>=(i=e[--n-1]))break e}o=n,n=0}for(;n<o;){var u=n+o>>>1;t<e[u]?o=u:n=u+1}if(r=e[n],void 0===(i=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,i,t)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,t,r)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r,o=0;o!==r;++o)e[o]=n[i+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(vc.prototype,{beforeStart_:vc.prototype.copySampleValue_,afterEnd_:vc.prototype.copySampleValue_}),gc.prototype=Object.assign(Object.create(vc.prototype),{constructor:gc,DefaultSettings_:{endingStart:We,endingEnd:We},intervalChanged_:function(t,e,n){var r=this.parameterPositions,i=t-2,o=t+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case qe:i=t,a=2*e-n;break;case Xe:a=e+r[i=r.length-2]-r[i+1];break;default:i=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case qe:o=t,s=2*n-e;break;case Xe:o=1,s=n+r[1]-r[0];break;default:o=t-1,s=e}var u=.5*(n-e),l=this.valueSize;this._weightPrev=u/(e-a),this._weightNext=u/(s-n),this._offsetPrev=i*l,this._offsetNext=o*l},interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=this._offsetPrev,c=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(r-e),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,b=f*m-f*d,_=0;_!==a;++_)i[_]=v*o[l+_]+g*o[u+_]+y*o[s+_]+b*o[c+_];return i}}),yc.prototype=Object.assign(Object.create(vc.prototype),{constructor:yc,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=s-a,l=(n-e)/(r-e),c=1-l,h=0;h!==a;++h)i[h]=o[u+h]*c+o[s+h]*l;return i}}),bc.prototype=Object.assign(Object.create(vc.prototype),{constructor:bc,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(_c,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:mc.convertArray(t.times,Array),values:mc.convertArray(t.values,Array)};var r=t.getInterpolation();r!==t.DefaultInterpolation&&(e.interpolation=r)}return e.type=t.ValueTypeName,e}}),Object.assign(_c.prototype,{constructor:_c,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:He,InterpolantFactoryMethodDiscrete:function(t){return new bc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new yc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new gc(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case Ve:e=this.InterpolantFactoryMethodDiscrete;break;case He:e=this.InterpolantFactoryMethodLinear;break;case Ge:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ve;case this.InterpolantFactoryMethodLinear:return He;case this.InterpolantFactoryMethodSmooth:return Ge}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,r=n.length,i=0,o=r-1;i!==r&&n[i]<t;)++i;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==i||o!==r){i>=o&&(i=(o=Math.max(o,1))-1);var a=this.getValueSize();this.times=mc.arraySlice(n,i,o),this.values=mc.arraySlice(this.values,i*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==i;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==r&&mc.isTypedArray(r)){a=0;for(var u=r.length;a!==u;++a){var l=r[a];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}}return t},optimize:function(){for(var t=mc.arraySlice(this.times),e=mc.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Ge,i=1,o=t.length-1,a=1;a<o;++a){var s=!1,u=t[a];if(u!==t[a+1]&&(1!==a||u!==u[0]))if(r)s=!0;else for(var l=a*n,c=l-n,h=l+n,f=0;f!==n;++f){var p=e[l+f];if(p!==e[c+f]||p!==e[h+f]){s=!0;break}}if(s){if(a!==i){t[i]=t[a];var d=a*n,m=i*n;for(f=0;f!==n;++f)e[m+f]=e[d+f]}++i}}if(o>0){for(t[i]=t[o],d=o*n,m=i*n,f=0;f!==n;++f)e[m+f]=e[d+f];++i}return i!==t.length?(this.times=mc.arraySlice(t,0,i),this.values=mc.arraySlice(e,0,i*n)):(this.times=t,this.values=e),this},clone:function(){var t=mc.arraySlice(this.times,0),e=mc.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),xc.prototype=Object.assign(Object.create(_c.prototype),{constructor:xc,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Ve,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wc.prototype=Object.assign(Object.create(_c.prototype),{constructor:wc,ValueTypeName:"color"}),Ec.prototype=Object.assign(Object.create(_c.prototype),{constructor:Ec,ValueTypeName:"number"}),Sc.prototype=Object.assign(Object.create(vc.prototype),{constructor:Sc,interpolate_:function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,u=(n-e)/(r-e),l=s+a;s!==l;s+=4)Zn.slerpFlat(i,0,o,s-a,o,s,u);return i}}),Tc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Tc,ValueTypeName:"quaternion",DefaultInterpolation:He,InterpolantFactoryMethodLinear:function(t){return new Sc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Ac.prototype=Object.assign(Object.create(_c.prototype),{constructor:Ac,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Ve,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Mc.prototype=Object.assign(Object.create(_c.prototype),{constructor:Mc,ValueTypeName:"vector"}),Object.assign(Cc,{parse:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),i=0,o=n.length;i!==o;++i)e.push(Oc(n[i]).scale(r));return new Cc(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},i=0,o=n.length;i!==o;++i)e.push(_c.toJSON(n[i]));return r},CreateFromMorphTargetSequence:function(t,e,n,r){for(var i=e.length,o=[],a=0;a<i;a++){var s=[],u=[];s.push((a+i-1)%i,a,(a+1)%i),u.push(0,1,0);var l=mc.getKeyframeOrder(s);s=mc.sortedArray(s,1,l),u=mc.sortedArray(u,1,l),r||0!==s[0]||(s.push(i),u.push(u[0])),o.push(new Ec(".morphTargetInfluences["+e[a].name+"]",s,u).scale(1/n))}return new Cc(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var r={},i=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],u=s.name.match(i);if(u&&u.length>1){var l=r[h=u[1]];l||(r[h]=l=[]),l.push(s)}}var c=[];for(var h in r)c.push(Cc.CreateFromMorphTargetSequence(h,r[h],e,n));return c},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,i){if(0!==n.length){var o=[],a=[];mc.flattenJSON(n,o,a,r),0!==o.length&&i.push(new t(e,o,a))}},r=[],i=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.blendMode,u=t.hierarchy||[],l=0;l<u.length;l++){var c=u[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var h={},f=0;f<c.length;f++)if(c[f].morphTargets)for(var p=0;p<c[f].morphTargets.length;p++)h[c[f].morphTargets[p]]=-1;for(var d in h){var m=[],v=[];for(p=0;p!==c[f].morphTargets.length;++p){var g=c[f];m.push(g.time),v.push(g.morphTarget===d?1:0)}r.push(new Ec(".morphTargetInfluence["+d+"]",m,v))}o=h.length*(a||1)}else{var y=".bones["+e[l].name+"]";n(Mc,y+".position",c,"pos",r),n(Tc,y+".quaternion",c,"rot",r),n(Mc,y+".scale",c,"scl",r)}}return 0===r.length?null:new Cc(i,o,r,s)}}),Object.assign(Cc.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var r=this.tracks[e];t=Math.max(t,r.times[r.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Cc(this.name,this.duration,t,this.blendMode)}});var Pc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function kc(t,e,n){var r=this,i=!1,o=0,a=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===i&&void 0!==r.onStart&&r.onStart(t,o,a),i=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(i=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var r=u[e],i=u[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return i}return null}}var Ic=new kc;function Lc(t){this.manager=void 0!==t?t:Ic,this.crossOrigin="anonymous",this.path="",this.resourcePath=""}Object.assign(Lc.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise((function(r,i){n.load(t,r,e,i)}))},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this}});var Rc={};function Dc(t){Lc.call(this,t)}function Nc(t){Lc.call(this,t)}function Fc(t){Lc.call(this,t)}function jc(t){Lc.call(this,t)}function Uc(t){Lc.call(this,t)}function zc(t){Lc.call(this,t)}function Bc(t){Lc.call(this,t)}function Vc(){this.type="Curve",this.arcLengthDivisions=200}function Hc(t,e,n,r,i,o,a,s){Vc.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=r||1,this.aStartAngle=i||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Gc(t,e,n,r,i,o){Hc.call(this,t,e,n,n,r,i,o),this.type="ArcCurve"}function Wc(){var t=0,e=0,n=0,r=0;function i(i,o,a,s){t=i,e=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(t,e,n,r,o){i(e,n,o*(n-t),o*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,o,a,s){var u=(e-t)/o-(n-t)/(o+a)+(n-e)/a,l=(n-e)/a-(r-e)/(a+s)+(r-n)/s;i(e,n,u*=a,l*=a)},calc:function(i){var o=i*i;return t+e*i+n*o+r*(o*i)}}}Dc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Dc,load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Pc.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;if(void 0===Rc[t]){var a=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){var s=a[1],u=!!a[2],l=a[3];l=decodeURIComponent(l),u&&(l=atob(l));try{var c,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var f=new Uint8Array(l.length),p=0;p<l.length;p++)f[p]=l.charCodeAt(p);c="blob"===h?new Blob([f.buffer],{type:s}):f.buffer;break;case"document":var d=new DOMParser;c=d.parseFromString(l,s);break;case"json":c=JSON.parse(l);break;default:c=l}setTimeout((function(){e&&e(c),i.manager.itemEnd(t)}),0)}catch(e){setTimeout((function(){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}),0)}}else{Rc[t]=[],Rc[t].push({onLoad:e,onProgress:n,onError:r});var m=new XMLHttpRequest;for(var v in m.open("GET",t,!0),m.addEventListener("load",(function(e){var n=this.response,r=Rc[t];if(delete Rc[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),Pc.add(t,n);for(var o=0,a=r.length;o<a;o++)(s=r[o]).onLoad&&s.onLoad(n);i.manager.itemEnd(t)}else{for(o=0,a=r.length;o<a;o++){var s;(s=r[o]).onError&&s.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}}),!1),m.addEventListener("progress",(function(e){for(var n=Rc[t],r=0,i=n.length;r<i;r++){var o=n[r];o.onProgress&&o.onProgress(e)}}),!1),m.addEventListener("error",(function(e){var n=Rc[t];delete Rc[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),m.addEventListener("abort",(function(e){var n=Rc[t];delete Rc[t];for(var r=0,o=n.length;r<o;r++){var a=n[r];a.onError&&a.onError(e)}i.manager.itemError(t),i.manager.itemEnd(t)}),!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return i.manager.itemStart(t),m}Rc[t].push({onLoad:e,onProgress:n,onError:r})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Nc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Nc,load:function(t,e,n,r){var i=this,o=new Dc(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var r=Cc.parse(t[n]);e.push(r)}return e}}),Fc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Fc,load:function(t,e,n,r){var i=this,o=[],a=new zu;a.image=o;var s=new Dc(this.manager);function u(u){s.load(t[u],(function(t){var n=i.parse(t,!0);o[u]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=wt),a.format=n.format,a.needsUpdate=!0,e&&e(a))}),n,r)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,h=t.length;c<h;++c)u(c);else s.load(t,(function(t){var n=i.parse(t,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,s=0;s<r;s++){o[s]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+u]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=wt),a.format=n.format,a.needsUpdate=!0,e&&e(a)}),n,r);return a}}),jc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:jc,load:function(t,e,n,r){var i=this,o=new Co,a=new Dc(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,(function(t){var n=i.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:mt,o.wrapT=void 0!==n.wrapT?n.wrapT:mt,o.magFilter=void 0!==n.magFilter?n.magFilter:wt,o.minFilter=void 0!==n.minFilter?n.minFilter:wt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=Tt),1===n.mipmapCount&&(o.minFilter=wt),o.needsUpdate=!0,e&&e(o,n))}),n,r),o}}),Uc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Uc,load:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Pc.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),Pc.add(t,this),e&&e(this),i.manager.itemEnd(t)}function u(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",u,!1),r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",u,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(t),a.src=t,a}}),zc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:zc,load:function(t,e,n,r){var i=new Zo,o=new Uc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],(function(t){i.images[n]=t,6==++a&&(i.needsUpdate=!0,e&&e(i))}),void 0,r)}for(var u=0;u<t.length;++u)s(u);return i}}),Bc.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Bc,load:function(t,e,n,r){var i=new qn,o=new Uc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,(function(n){i.image=n;var r=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);i.format=r?zt:Bt,i.needsUpdate=!0,void 0!==e&&e(i)}),n,r),i}}),Object.assign(Vc.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,r=[],i=this.getPoint(0),o=0;for(r.push(0),n=1;n<=t;n++)o+=(e=this.getPoint(n/t)).distanceTo(i),r.push(o),i=e;return this.cacheArcLengths=r,r},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,r=this.getLengths(),i=0,o=r.length;n=e||t*r[o-1];for(var a,s=0,u=o-1;s<=u;)if((a=r[i=Math.floor(s+(u-s)/2)]-n)<0)s=i+1;else{if(!(a>0)){u=i;break}u=i-1}if(r[i=u]===n)return i/(o-1);var l=r[i];return(i+(n-l)/(r[i+1]-l))/(o-1)},getTangent:function(t,e){var n=1e-4,r=t-n,i=t+n;r<0&&(r=0),i>1&&(i=1);var o=this.getPoint(r),a=this.getPoint(i),s=e||(o.isVector2?new Vn:new Jn);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){var n,r,i,o=new Jn,a=[],s=[],u=[],l=new Jn,c=new sr;for(n=0;n<=t;n++)r=n/t,a[n]=this.getTangentAt(r,new Jn),a[n].normalize();s[0]=new Jn,u[0]=new Jn;var h=Number.MAX_VALUE,f=Math.abs(a[0].x),p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(f<=h&&(h=f,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),d<=h&&o.set(0,0,1),l.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],l),u[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),u[n]=u[n-1].clone(),l.crossVectors(a[n-1],a[n]),l.length()>Number.EPSILON&&(l.normalize(),i=Math.acos(Bn.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(c.makeRotationAxis(l,i))),u[n].crossVectors(a[n],s[n]);if(!0===e)for(i=Math.acos(Bn.clamp(s[0].dot(s[t]),-1,1)),i/=t,a[0].dot(l.crossVectors(s[0],s[t]))>0&&(i=-i),n=1;n<=t;n++)s[n].applyMatrix4(c.makeRotationAxis(a[n],i*n)),u[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:u}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Hc.prototype=Object.create(Vc.prototype),Hc.prototype.constructor=Hc,Hc.prototype.isEllipseCurve=!0,Hc.prototype.getPoint=function(t,e){for(var n=e||new Vn,r=2*Math.PI,i=this.aEndAngle-this.aStartAngle,o=Math.abs(i)<Number.EPSILON;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=o?0:r),!0!==this.aClockwise||o||(i===r?i=-r:i-=r);var a=this.aStartAngle+t*i,s=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var l=Math.cos(this.aRotation),c=Math.sin(this.aRotation),h=s-this.aX,f=u-this.aY;s=h*l-f*c+this.aX,u=h*c+f*l+this.aY}return n.set(s,u)},Hc.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Hc.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Hc.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Gc.prototype=Object.create(Hc.prototype),Gc.prototype.constructor=Gc,Gc.prototype.isArcCurve=!0;var qc=new Jn,Xc=new Wc,Yc=new Wc,Qc=new Wc;function Zc(t,e,n,r){Vc.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=r||.5}function Kc(t,e,n,r,i){var o=.5*(r-e),a=.5*(i-n),s=t*t;return(2*n-2*r+o+a)*(t*s)+(-3*n+3*r-2*o-a)*s+o*t+n}function $c(t,e,n,r){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,r)}function Jc(t,e,n,r,i){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,r)+function(t,e){return t*t*t*e}(t,i)}function th(t,e,n,r){Vc.call(this),this.type="CubicBezierCurve",this.v0=t||new Vn,this.v1=e||new Vn,this.v2=n||new Vn,this.v3=r||new Vn}function eh(t,e,n,r){Vc.call(this),this.type="CubicBezierCurve3",this.v0=t||new Jn,this.v1=e||new Jn,this.v2=n||new Jn,this.v3=r||new Jn}function nh(t,e){Vc.call(this),this.type="LineCurve",this.v1=t||new Vn,this.v2=e||new Vn}function rh(t,e){Vc.call(this),this.type="LineCurve3",this.v1=t||new Jn,this.v2=e||new Jn}function ih(t,e,n){Vc.call(this),this.type="QuadraticBezierCurve",this.v0=t||new Vn,this.v1=e||new Vn,this.v2=n||new Vn}function oh(t,e,n){Vc.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Jn,this.v1=e||new Jn,this.v2=n||new Jn}function ah(t){Vc.call(this),this.type="SplineCurve",this.points=t||[]}Zc.prototype=Object.create(Vc.prototype),Zc.prototype.constructor=Zc,Zc.prototype.isCatmullRomCurve3=!0,Zc.prototype.getPoint=function(t,e){var n,r,i,o,a=e||new Jn,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,c=Math.floor(l),h=l-c;if(this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/u)+1)*u:0===h&&c===u-1&&(c=u-2,h=1),this.closed||c>0?n=s[(c-1)%u]:(qc.subVectors(s[0],s[1]).add(s[0]),n=qc),r=s[c%u],i=s[(c+1)%u],this.closed||c+2<u?o=s[(c+2)%u]:(qc.subVectors(s[u-1],s[u-2]).add(s[u-1]),o=qc),"centripetal"===this.curveType||"chordal"===this.curveType){var f="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(r),f),d=Math.pow(r.distanceToSquared(i),f),m=Math.pow(i.distanceToSquared(o),f);d<1e-4&&(d=1),p<1e-4&&(p=d),m<1e-4&&(m=d),Xc.initNonuniformCatmullRom(n.x,r.x,i.x,o.x,p,d,m),Yc.initNonuniformCatmullRom(n.y,r.y,i.y,o.y,p,d,m),Qc.initNonuniformCatmullRom(n.z,r.z,i.z,o.z,p,d,m)}else"catmullrom"===this.curveType&&(Xc.initCatmullRom(n.x,r.x,i.x,o.x,this.tension),Yc.initCatmullRom(n.y,r.y,i.y,o.y,this.tension),Qc.initCatmullRom(n.z,r.z,i.z,o.z,this.tension));return a.set(Xc.calc(h),Yc.calc(h),Qc.calc(h)),a},Zc.prototype.copy=function(t){Vc.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Zc.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Zc.prototype.fromJSON=function(t){Vc.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Jn).fromArray(r))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},th.prototype=Object.create(Vc.prototype),th.prototype.constructor=th,th.prototype.isCubicBezierCurve=!0,th.prototype.getPoint=function(t,e){var n=e||new Vn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Jc(t,r.x,i.x,o.x,a.x),Jc(t,r.y,i.y,o.y,a.y)),n},th.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},th.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},th.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},eh.prototype=Object.create(Vc.prototype),eh.prototype.constructor=eh,eh.prototype.isCubicBezierCurve3=!0,eh.prototype.getPoint=function(t,e){var n=e||new Jn,r=this.v0,i=this.v1,o=this.v2,a=this.v3;return n.set(Jc(t,r.x,i.x,o.x,a.x),Jc(t,r.y,i.y,o.y,a.y),Jc(t,r.z,i.z,o.z,a.z)),n},eh.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},eh.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},eh.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},nh.prototype=Object.create(Vc.prototype),nh.prototype.constructor=nh,nh.prototype.isLineCurve=!0,nh.prototype.getPoint=function(t,e){var n=e||new Vn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},nh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},nh.prototype.getTangent=function(t,e){return(e||new Vn).copy(this.v2).sub(this.v1).normalize()},nh.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},nh.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},nh.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},rh.prototype=Object.create(Vc.prototype),rh.prototype.constructor=rh,rh.prototype.isLineCurve3=!0,rh.prototype.getPoint=function(t,e){var n=e||new Jn;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},rh.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},rh.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},rh.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},rh.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ih.prototype=Object.create(Vc.prototype),ih.prototype.constructor=ih,ih.prototype.isQuadraticBezierCurve=!0,ih.prototype.getPoint=function(t,e){var n=e||new Vn,r=this.v0,i=this.v1,o=this.v2;return n.set($c(t,r.x,i.x,o.x),$c(t,r.y,i.y,o.y)),n},ih.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},ih.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},ih.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},oh.prototype=Object.create(Vc.prototype),oh.prototype.constructor=oh,oh.prototype.isQuadraticBezierCurve3=!0,oh.prototype.getPoint=function(t,e){var n=e||new Jn,r=this.v0,i=this.v1,o=this.v2;return n.set($c(t,r.x,i.x,o.x),$c(t,r.y,i.y,o.y),$c(t,r.z,i.z,o.z)),n},oh.prototype.copy=function(t){return Vc.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},oh.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},oh.prototype.fromJSON=function(t){return Vc.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},ah.prototype=Object.create(Vc.prototype),ah.prototype.constructor=ah,ah.prototype.isSplineCurve=!0,ah.prototype.getPoint=function(t,e){var n=e||new Vn,r=this.points,i=(r.length-1)*t,o=Math.floor(i),a=i-o,s=r[0===o?o:o-1],u=r[o],l=r[o>r.length-2?r.length-1:o+1],c=r[o>r.length-3?r.length-1:o+2];return n.set(Kc(a,s.x,u.x,l.x,c.x),Kc(a,s.y,u.y,l.y,c.y)),n},ah.prototype.copy=function(t){Vc.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push(r.clone())}return this},ah.prototype.toJSON=function(){var t=Vc.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var r=this.points[e];t.points.push(r.toArray())}return t},ah.prototype.fromJSON=function(t){Vc.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var r=t.points[e];this.points.push((new Vn).fromArray(r))}return this};var sh=Object.freeze({__proto__:null,ArcCurve:Gc,CatmullRomCurve3:Zc,CubicBezierCurve:th,CubicBezierCurve3:eh,EllipseCurve:Hc,LineCurve:nh,LineCurve3:rh,QuadraticBezierCurve:ih,QuadraticBezierCurve3:oh,SplineCurve:ah});function uh(){Vc.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function lh(t){uh.call(this),this.type="Path",this.currentPoint=new Vn,t&&this.setFromPoints(t)}function ch(t){lh.call(this,t),this.uuid=Bn.generateUUID(),this.type="Shape",this.holes=[]}function hh(t,e){Tr.call(this),this.type="Light",this.color=new vi(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function fh(t,e,n){hh.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Tr.DefaultUp),this.updateMatrix(),this.groundColor=new vi(e)}function ph(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new Vn(512,512),this.map=null,this.mapPass=null,this.matrix=new sr,this._frustum=new ko,this._frameExtents=new Vn(1,1),this._viewportCount=1,this._viewports=[new Xn(0,0,1,1)]}function dh(){ph.call(this,new So(50,1,.5,500))}function mh(t,e,n,r,i,o){hh.call(this,t,e),this.type="SpotLight",this.position.copy(Tr.DefaultUp),this.updateMatrix(),this.target=new Tr,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==r?r:Math.PI/3,this.penumbra=void 0!==i?i:0,this.decay=void 0!==o?o:1,this.shadow=new dh}function vh(){ph.call(this,new So(90,1,.5,500)),this._frameExtents=new Vn(4,2),this._viewportCount=6,this._viewports=[new Xn(2,1,1,1),new Xn(0,1,1,1),new Xn(3,1,1,1),new Xn(1,1,1,1),new Xn(3,0,1,1),new Xn(1,0,1,1)],this._cubeDirections=[new Jn(1,0,0),new Jn(-1,0,0),new Jn(0,0,1),new Jn(0,0,-1),new Jn(0,1,0),new Jn(0,-1,0)],this._cubeUps=[new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,0,1),new Jn(0,0,-1)]}function gh(t,e,n,r){hh.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==r?r:1,this.shadow=new vh}function yh(t,e,n,r,i,o){Eo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==r?r:-1,this.near=void 0!==i?i:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function bh(){ph.call(this,new yh(-5,5,5,-5,.5,500))}function _h(t,e){hh.call(this,t,e),this.type="DirectionalLight",this.position.copy(Tr.DefaultUp),this.updateMatrix(),this.target=new Tr,this.shadow=new bh}function xh(t,e){hh.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function wh(t,e,n,r){hh.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}function Eh(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Jn)}function Sh(t,e){hh.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Eh}function Th(t){Lc.call(this,t),this.textures={}}uh.prototype=Object.assign(Object.create(Vc.prototype),{constructor:uh,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new nh(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),r=0;r<n.length;){if(n[r]>=e){var i=n[r]-e,o=this.curves[r],a=o.getLength(),s=0===a?0:1-i/a;return o.getPointAt(s)}r++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],r=0,i=this.curves;r<i.length;r++)for(var o=i[r],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),u=0;u<s.length;u++){var l=s[u];e&&e.equals(l)||(n.push(l),e=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Vc.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push(r.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Vc.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var r=this.curves[e];t.curves.push(r.toJSON())}return t},fromJSON:function(t){Vc.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var r=t.curves[e];this.curves.push((new sh[r.type]).fromJSON(r))}return this}}),lh.prototype=Object.assign(Object.create(uh.prototype),{constructor:lh,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var n=new nh(this.currentPoint.clone(),new Vn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,r){var i=new ih(this.currentPoint.clone(),new Vn(t,e),new Vn(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this},bezierCurveTo:function(t,e,n,r,i,o){var a=new th(this.currentPoint.clone(),new Vn(t,e),new Vn(n,r),new Vn(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this},splineThru:function(t){var e=new ah([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,r,i,o){var a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,r,i,o),this},absarc:function(t,e,n,r,i,o){return this.absellipse(t,e,n,n,r,i,o),this},ellipse:function(t,e,n,r,i,o,a,s){var u=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(t+u,e+l,n,r,i,o,a,s),this},absellipse:function(t,e,n,r,i,o,a,s){var u=new Hc(t,e,n,r,i,o,a,s);if(this.curves.length>0){var l=u.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(u);var c=u.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return uh.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=uh.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return uh.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),ch.prototype=Object.assign(Object.create(lh.prototype),{constructor:ch,getPointsHoles:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){lh.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push(r.clone())}return this},toJSON:function(){var t=lh.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var r=this.holes[e];t.holes.push(r.toJSON())}return t},fromJSON:function(t){lh.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var r=t.holes[e];this.holes.push((new lh).fromJSON(r))}return this}}),hh.prototype=Object.assign(Object.create(Tr.prototype),{constructor:hh,isLight:!0,copy:function(t){return Tr.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=Tr.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),fh.prototype=Object.assign(Object.create(hh.prototype),{constructor:fh,isHemisphereLight:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ph.prototype,{_projScreenMatrix:new sr,_lightPositionWorld:new Jn,_lookTarget:new Jn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,r=this._projScreenMatrix,i=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),i.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(i),e.updateMatrixWorld(),r.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(r),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),dh.prototype=Object.assign(Object.create(ph.prototype),{constructor:dh,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*Bn.RAD2DEG*t.angle,r=this.mapSize.width/this.mapSize.height,i=t.distance||e.far;n===e.fov&&r===e.aspect&&i===e.far||(e.fov=n,e.aspect=r,e.far=i,e.updateProjectionMatrix()),ph.prototype.updateMatrices.call(this,t)}}),mh.prototype=Object.assign(Object.create(hh.prototype),{constructor:mh,isSpotLight:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),vh.prototype=Object.assign(Object.create(ph.prototype),{constructor:vh,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,r=this.matrix,i=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;i.setFromMatrixPosition(t.matrixWorld),n.position.copy(i),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),r.makeTranslation(-i.x,-i.y,-i.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),gh.prototype=Object.assign(Object.create(hh.prototype),{constructor:gh,isPointLight:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),yh.prototype=Object.assign(Object.create(Eo.prototype),{constructor:yh,isOrthographicCamera:!0,copy:function(t,e){return Eo.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,i=n-t,o=n+t,a=r+e,s=r-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,l=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o=(i+=u*this.view.offsetX)+u*this.view.width,s=(a-=l*this.view.offsetY)-l*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=Tr.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),bh.prototype=Object.assign(Object.create(ph.prototype),{constructor:bh,isDirectionalLightShadow:!0,updateMatrices:function(t){ph.prototype.updateMatrices.call(this,t)}}),_h.prototype=Object.assign(Object.create(hh.prototype),{constructor:_h,isDirectionalLight:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),xh.prototype=Object.assign(Object.create(hh.prototype),{constructor:xh,isAmbientLight:!0}),wh.prototype=Object.assign(Object.create(hh.prototype),{constructor:wh,isRectAreaLight:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=hh.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(Eh.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*r),e.addScaledVector(o[2],.488603*i),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*r*1.092548),e.addScaledVector(o[5],r*i*1.092548),e.addScaledVector(o[6],.315392*(3*i*i-1)),e.addScaledVector(o[7],n*i*1.092548),e.addScaledVector(o[8],.546274*(n*n-r*r)),e},getIrradianceAt:function(t,e){var n=t.x,r=t.y,i=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*r),e.addScaledVector(o[2],1.023328*i),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*r),e.addScaledVector(o[5],.858086*r*i),e.addScaledVector(o[6],.743125*i*i-.247708),e.addScaledVector(o[7],.858086*n*i),e.addScaledVector(o[8],.429043*(n*n-r*r)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}),Object.assign(Eh,{getBasisAt:function(t,e){var n=t.x,r=t.y,i=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*i,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*i,e[6]=.315392*(3*i*i-1),e[7]=1.092548*n*i,e[8]=.546274*(n*n-r*r)}}),Sh.prototype=Object.assign(Object.create(hh.prototype),{constructor:Sh,isLightProbe:!0,copy:function(t){return hh.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=hh.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),Th.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Th,load:function(t,e,n,r){var i=this,o=new Dc(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var r=new dc[t.type];if(void 0!==t.uuid&&(r.uuid=t.uuid),void 0!==t.name&&(r.name=t.name),void 0!==t.color&&r.color.setHex(t.color),void 0!==t.roughness&&(r.roughness=t.roughness),void 0!==t.metalness&&(r.metalness=t.metalness),void 0!==t.sheen&&(r.sheen=(new vi).setHex(t.sheen)),void 0!==t.emissive&&r.emissive.setHex(t.emissive),void 0!==t.specular&&r.specular.setHex(t.specular),void 0!==t.shininess&&(r.shininess=t.shininess),void 0!==t.clearcoat&&(r.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(r.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(r.fog=t.fog),void 0!==t.flatShading&&(r.flatShading=t.flatShading),void 0!==t.blending&&(r.blending=t.blending),void 0!==t.combine&&(r.combine=t.combine),void 0!==t.side&&(r.side=t.side),void 0!==t.opacity&&(r.opacity=t.opacity),void 0!==t.transparent&&(r.transparent=t.transparent),void 0!==t.alphaTest&&(r.alphaTest=t.alphaTest),void 0!==t.depthTest&&(r.depthTest=t.depthTest),void 0!==t.depthWrite&&(r.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(r.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(r.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(r.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(r.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(r.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(r.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(r.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(r.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(r.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(r.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(r.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(r.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(r.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(r.rotation=t.rotation),1!==t.linewidth&&(r.linewidth=t.linewidth),void 0!==t.dashSize&&(r.dashSize=t.dashSize),void 0!==t.gapSize&&(r.gapSize=t.gapSize),void 0!==t.scale&&(r.scale=t.scale),void 0!==t.polygonOffset&&(r.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(r.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(r.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(r.skinning=t.skinning),void 0!==t.morphTargets&&(r.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(r.morphNormals=t.morphNormals),void 0!==t.dithering&&(r.dithering=t.dithering),void 0!==t.vertexTangents&&(r.vertexTangents=t.vertexTangents),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.toneMapped&&(r.toneMapped=t.toneMapped),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?r.vertexColors=t.vertexColors>0:r.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var i in t.uniforms){var o=t.uniforms[i];switch(r.uniforms[i]={},o.type){case"t":r.uniforms[i].value=n(o.value);break;case"c":r.uniforms[i].value=(new vi).setHex(o.value);break;case"v2":r.uniforms[i].value=(new Vn).fromArray(o.value);break;case"v3":r.uniforms[i].value=(new Jn).fromArray(o.value);break;case"v4":r.uniforms[i].value=(new Xn).fromArray(o.value);break;case"m3":r.uniforms[i].value=(new Hn).fromArray(o.value);case"m4":r.uniforms[i].value=(new sr).fromArray(o.value);break;default:r.uniforms[i].value=o.value}}if(void 0!==t.defines&&(r.defines=t.defines),void 0!==t.vertexShader&&(r.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(r.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)r.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(r.flatShading=1===t.shading),void 0!==t.size&&(r.size=t.size),void 0!==t.sizeAttenuation&&(r.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(r.map=n(t.map)),void 0!==t.matcap&&(r.matcap=n(t.matcap)),void 0!==t.alphaMap&&(r.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(r.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(r.bumpScale=t.bumpScale),void 0!==t.normalMap&&(r.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(r.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),r.normalScale=(new Vn).fromArray(s)}return void 0!==t.displacementMap&&(r.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(r.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(r.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(r.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(r.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(r.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(r.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(r.specularMap=n(t.specularMap)),void 0!==t.envMap&&(r.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(r.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(r.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(r.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(r.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(r.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(r.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(r.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(r.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(r.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(r.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(r.clearcoatNormalScale=(new Vn).fromArray(t.clearcoatNormalScale)),r},setTextures:function(t){return this.textures=t,this}});var Ah={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function Mh(){Gi.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ch(t,e,n,r){"number"==typeof n&&(r=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Ti.call(this,t,e,n),this.meshPerAttribute=r||1}function Oh(t){Lc.call(this,t)}Mh.prototype=Object.assign(Object.create(Gi.prototype),{constructor:Mh,isInstancedBufferGeometry:!0,copy:function(t){return Gi.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Gi.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Ch.prototype=Object.assign(Object.create(Ti.prototype),{constructor:Ch,isInstancedBufferAttribute:!0,copy:function(t){return Ti.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Ti.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Oh.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Oh,load:function(t,e,n,r){var i=this,o=new Dc(i.manager);o.setPath(i.path),o.load(t,(function(t){e(i.parse(JSON.parse(t)))}),n,r)},parse:function(t){var e=t.isInstancedBufferGeometry?new Mh:new Gi,n=t.data.index;if(void 0!==n){var r=new Ph[n.type](n.array);e.setIndex(new Ti(r,1))}var i=t.data.attributes;for(var o in i){var a=i[o],s=(r=new Ph[a.type](a.array),new(a.isInstancedBufferAttribute?Ch:Ti)(r,a.itemSize,a.normalized));void 0!==a.name&&(s.name=a.name),e.setAttribute(o,s)}var u=t.data.morphAttributes;if(u)for(var o in u){for(var l=u[o],c=[],h=0,f=l.length;h<f;h++)a=l[h],s=new Ti(r=new Ph[a.type](a.array),a.itemSize,a.normalized),void 0!==a.name&&(s.name=a.name),c.push(s);e.morphAttributes[o]=c}t.data.morphTargetsRelative&&(e.morphTargetsRelative=!0);var p=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==p){h=0;for(var d=p.length;h!==d;++h){var m=p[h];e.addGroup(m.start,m.count,m.materialIndex)}}var v=t.data.boundingSphere;if(void 0!==v){var g=new Jn;void 0!==v.center&&g.fromArray(v.center),e.boundingSphere=new Hr(g,v.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e}});var Ph={Int8Array,Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function kh(t){Lc.call(this,t)}kh.prototype=Object.assign(Object.create(Lc.prototype),{constructor:kh,load:function(t,e,n,r){var i=this,o=""===this.path?Ah.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new Dc(i.manager);a.setPath(this.path),a.load(t,(function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==r&&r(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?i.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)}),n,r)},parse:function(t,e){var n=this.parseShape(t.shapes),r=this.parseGeometries(t.geometries,n),i=this.parseImages(t.images,(function(){void 0!==e&&e(s)})),o=this.parseTextures(t.textures,i),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,r,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,r=t.length;n<r;n++){var i=(new ch).fromJSON(t[n]);e[i.uuid]=i}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var r=new Oh,i=0,o=t.length;i<o;i++){var a,s=t[i];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new rc[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new rc[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new rc[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new rc[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new rc[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new rc[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new rc[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new rc[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new rc[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new rc[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new rc[s.type]((new sh[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new rc[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new rc[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var u=[],l=0,c=s.shapes.length;l<c;l++){var h=e[s.shapes[l]];u.push(h)}a=new rc[s.type](u,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(u=[],l=0,c=s.shapes.length;l<c;l++)h=e[s.shapes[l]],u.push(h);var f=s.options.extrudePath;void 0!==f&&(s.options.extrudePath=(new sh[f.type]).fromJSON(f)),a=new rc[s.type](u,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},r={};if(void 0!==t){var i=new Th;i.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var u=[],l=0;l<s.materials.length;l++){var c=s.materials[l];void 0===n[c.uuid]&&(n[c.uuid]=i.parse(c)),u.push(n[c.uuid])}r[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var r=t[n],i=Cc.parse(r);void 0!==r.uuid&&(i.uuid=r.uuid),e.push(i)}return e},parseImages:function(t,e){var n=this,r={};function i(t){return n.manager.itemStart(t),o.load(t,(function(){n.manager.itemEnd(t)}),void 0,(function(){n.manager.itemError(t),n.manager.itemEnd(t)}))}if(void 0!==t&&t.length>0){var o=new Uc(new kc(e));o.setCrossOrigin(this.crossOrigin);for(var a=0,s=t.length;a<s;a++){var u=t[a],l=u.url;if(Array.isArray(l)){r[u.uuid]=[];for(var c=0,h=l.length;c<h;c++){var f=l[c],p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:n.resourcePath+f;r[u.uuid].push(i(p))}}else p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u.url)?u.url:n.resourcePath+u.url,r[u.uuid]=i(p)}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var r={};if(void 0!==t)for(var i=0,o=t.length;i<o;i++){var a,s=t[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),(a=Array.isArray(e[s.image])?new Zo(e[s.image]):new qn(e[s.image])).needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,Lh)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],Rh),a.wrapT=n(s.wrap[1],Rh)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,Dh)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,Dh)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),r[s.uuid]=a}return r},parseObject:function(t,e,n){var r;function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],r=0,i=t.length;r<i;r++){var o=t[r];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new Ar,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new vi(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new Fs(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new Ns(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new So(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new yh(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new xh(t.color,t.intensity);break;case"DirectionalLight":r=new _h(t.color,t.intensity);break;case"PointLight":r=new gh(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new wh(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new mh(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new fh(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=(new Sh).fromJSON(t);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":r=new uo(a=i(t.geometry),s=o(t.material));break;case"InstancedMesh":var a=i(t.geometry),s=o(t.material),u=t.count,l=t.instanceMatrix;(r=new _u(a,s,u)).instanceMatrix=new Ti(new Float32Array(l.array),16);break;case"LOD":r=new cu;break;case"Line":r=new Mu(i(t.geometry),o(t.material),t.mode);break;case"LineLoop":r=new ku(i(t.geometry),o(t.material));break;case"LineSegments":r=new Pu(i(t.geometry),o(t.material));break;case"PointCloud":case"Points":r=new Fu(i(t.geometry),o(t.material));break;case"Sprite":r=new eu(o(t.material));break;case"Group":r=new Is;break;default:r=new Tr}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children)for(var c=t.children,h=0;h<c.length;h++)r.add(this.parseObject(c[h],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);for(var f=t.levels,p=0;p<f.length;p++){var d=f[p],m=r.getObjectByProperty("uuid",d.object);void 0!==m&&r.addLevel(m,d.distance)}}return r}});var Ih,Lh={UVMapping:at,CubeReflectionMapping:st,CubeRefractionMapping:ut,EquirectangularReflectionMapping:lt,EquirectangularRefractionMapping:ct,SphericalReflectionMapping:ht,CubeUVReflectionMapping:ft,CubeUVRefractionMapping:pt},Rh={RepeatWrapping:dt,ClampToEdgeWrapping:mt,MirroredRepeatWrapping:vt},Dh={NearestFilter:gt,NearestMipmapNearestFilter:yt,NearestMipmapLinearFilter:_t,LinearFilter:wt,LinearMipmapNearestFilter:Et,LinearMipmapLinearFilter:Tt};function Nh(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),Lc.call(this,t),this.options=void 0}function Fh(){this.type="ShapePath",this.color=new vi,this.subPaths=[],this.currentPath=null}function jh(t){this.type="Font",this.data=t}function Uh(t,e,n,r,i){var o=i.glyphs[t]||i.glyphs["?"];if(o){var a,s,u,l,c,h,f,p,d=new Fh;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;)switch(m[v++]){case"m":a=m[v++]*e+n,s=m[v++]*e+r,d.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+r,d.lineTo(a,s);break;case"q":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,d.quadraticCurveTo(c,h,u,l);break;case"b":u=m[v++]*e+n,l=m[v++]*e+r,c=m[v++]*e+n,h=m[v++]*e+r,f=m[v++]*e+n,p=m[v++]*e+r,d.bezierCurveTo(c,h,f,p,u,l)}return{offsetX:o.ha*e,path:d}}console.error('THREE.Font: character "'+t+'" does not exists in font family '+i.familyName+".")}function zh(t){Lc.call(this,t)}Nh.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Nh,setOptions:function(t){return this.options=t,this},load:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var i=this,o=Pc.get(t);if(void 0!==o)return i.manager.itemStart(t),setTimeout((function(){e&&e(o),i.manager.itemEnd(t)}),0),o;fetch(t).then((function(t){return t.blob()})).then((function(t){return void 0===i.options?createImageBitmap(t):createImageBitmap(t,i.options)})).then((function(n){Pc.add(t,n),e&&e(n),i.manager.itemEnd(t)})).catch((function(e){r&&r(e),i.manager.itemError(t),i.manager.itemEnd(t)})),i.manager.itemStart(t)}}),Object.assign(Fh.prototype,{moveTo:function(t,e){return this.currentPath=new lh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,r){return this.currentPath.quadraticCurveTo(t,e,n,r),this},bezierCurveTo:function(t,e,n,r,i,o){return this.currentPath.bezierCurveTo(t,e,n,r,i,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n],o=new ch;o.curves=i.curves,e.push(o)}return e}function r(t,e){for(var n=e.length,r=!1,i=n-1,o=0;o<n;i=o++){var a=e[i],s=e[o],u=s.x-a.x,l=s.y-a.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(a=e[o],u=-u,s=e[i],l=-l),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var c=l*(t.x-a.x)-u*(t.y-a.y);if(0===c)return!0;if(c<0)continue;r=!r}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return r}var i=Il.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,u,l=[];if(1===o.length)return s=o[0],(u=new ch).curves=s.curves,l.push(u),l;var c=!i(o[0].getPoints());c=t?!c:c;var h,f,p=[],d=[],m=[],v=0;d[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)a=i(h=(s=o[g]).getPoints()),(a=t?!a:a)?(!c&&d[v]&&v++,d[v]={s:new ch,p:h},d[v].s.curves=s.curves,c&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!d[0])return n(o);if(d.length>1){for(var b=!1,_=[],x=0,w=d.length;x<w;x++)p[x]=[];for(x=0,w=d.length;x<w;x++)for(var E=m[x],S=0;S<E.length;S++){for(var T=E[S],A=!0,M=0;M<d.length;M++)r(T.p,d[M].p)&&(x!==M&&_.push({froms:x,tos:M,hole:S}),A?(A=!1,p[M].push(T)):b=!0);A&&p[x].push(T)}_.length>0&&(b||(m=p))}g=0;for(var C=d.length;g<C;g++){u=d[g].s,l.push(u);for(var O=0,P=(f=m[g]).length;O<P;O++)u.holes.push(f[O].h)}return l}}),Object.assign(jh.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],r=function(t,e,n){for(var r=Array.from?Array.from(t):String(t).split(""),i=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[],s=0,u=0,l=0;l<r.length;l++){var c=r[l];if("\n"===c)s=0,u-=o;else{var h=Uh(c,i,s,u,n);s+=h.offsetX,a.push(h.path)}}return a}(t,e,this.data),i=0,o=r.length;i<o;i++)Array.prototype.push.apply(n,r[i].toShapes());return n}}),zh.prototype=Object.assign(Object.create(Lc.prototype),{constructor:zh,load:function(t,e,n,r){var i=this,o=new Dc(this.manager);o.setPath(this.path),o.load(t,(function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var r=i.parse(n);e&&e(r)}),n,r)},parse:function(t){return new jh(t)}});var Bh={getContext:function(){return void 0===Ih&&(Ih=new(window.AudioContext||window.webkitAudioContext)),Ih},setContext:function(t){Ih=t}};function Vh(t){Lc.call(this,t)}function Hh(t,e,n){Sh.call(this,void 0,n);var r=(new vi).set(t),i=(new vi).set(e),o=new Jn(r.r,r.g,r.b),a=new Jn(i.r,i.g,i.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}function Gh(t,e){Sh.call(this,void 0,e);var n=(new vi).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Vh.prototype=Object.assign(Object.create(Lc.prototype),{constructor:Vh,load:function(t,e,n,r){var i=new Dc(this.manager);i.setResponseType("arraybuffer"),i.setPath(this.path),i.load(t,(function(t){var n=t.slice(0);Bh.getContext().decodeAudioData(n,(function(t){e(t)}))}),n,r)}}),Hh.prototype=Object.assign(Object.create(Sh.prototype),{constructor:Hh,isHemisphereLightProbe:!0,copy:function(t){return Sh.prototype.copy.call(this,t),this},toJSON:function(t){return Sh.prototype.toJSON.call(this,t)}}),Gh.prototype=Object.assign(Object.create(Sh.prototype),{constructor:Gh,isAmbientLightProbe:!0,copy:function(t){return Sh.prototype.copy.call(this,t),this},toJSON:function(t){return Sh.prototype.toJSON.call(this,t)}});var Wh=new sr,qh=new sr;function Xh(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new So,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new So,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function Yh(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}Object.assign(Xh.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,r,i=t.projectionMatrix.clone(),o=e.eyeSep/2,a=o*e.near/e.focus,s=e.near*Math.tan(Bn.DEG2RAD*e.fov*.5)/e.zoom;qh.elements[12]=-o,Wh.elements[12]=o,n=-s*e.aspect+a,r=s*e.aspect+a,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraL.projectionMatrix.copy(i),n=-s*e.aspect-a,r=s*e.aspect-a,i.elements[0]=2*e.near/(r-n),i.elements[8]=(r+n)/(r-n),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(qh),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Wh)}}),Object.assign(Yh.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var Qh=new Jn,Zh=new Zn,Kh=new Jn,$h=new Jn;function Jh(){Tr.call(this),this.type="AudioListener",this.context=Bh.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Yh}function tf(t){Tr.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}Jh.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Jh,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){Tr.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Qh,Zh,Kh),$h.set(0,0,-1).applyQuaternion(Zh),e.positionX){var r=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Qh.x,r),e.positionY.linearRampToValueAtTime(Qh.y,r),e.positionZ.linearRampToValueAtTime(Qh.z,r),e.forwardX.linearRampToValueAtTime($h.x,r),e.forwardY.linearRampToValueAtTime($h.y,r),e.forwardZ.linearRampToValueAtTime($h.z,r),e.upX.linearRampToValueAtTime(n.x,r),e.upY.linearRampToValueAtTime(n.y,r),e.upZ.linearRampToValueAtTime(n.z,r)}else e.setPosition(Qh.x,Qh.y,Qh.z),e.setOrientation($h.x,$h.y,$h.z,n.x,n.y,n.z)}}),tf.prototype=Object.assign(Object.create(Tr.prototype),{constructor:tf,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var ef=new Jn,nf=new Zn,rf=new Jn,of=new Jn;function af(t){tf.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function sf(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function uf(t,e,n){var r,i,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}af.prototype=Object.assign(Object.create(tf.prototype),{constructor:af,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(Tr.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(ef,nf,rf),of.set(0,0,1).applyQuaternion(nf);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(ef.x,n),e.positionY.linearRampToValueAtTime(ef.y,n),e.positionZ.linearRampToValueAtTime(ef.z,n),e.orientationX.linearRampToValueAtTime(of.x,n),e.orientationY.linearRampToValueAtTime(of.y,n),e.orientationZ.linearRampToValueAtTime(of.z,n)}else e.setPosition(ef.x,ef.y,ef.z),e.setOrientation(of.x,of.y,of.z)}}}),Object.assign(sf.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(uf.prototype,{accumulate:function(t,e){var n=this.buffer,r=this.valueSize,i=t*r+r,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==r;++a)n[i+a]=n[a];o=e}else{var s=e/(o+=e);this._mixBufferRegion(n,i,0,s,r)}this.cumulativeWeight=o},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){var s=e*this._origIndex;this._mixBufferRegion(n,r,s,1-i,e)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var u=e,l=e+e;u!==l;++u)if(n[u]!==n[u+e]){a.setValue(n,r);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var i=n,o=r;i!==o;++i)e[i]=e[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){var t=this._addIndex*this.valueSize;this.buffer.fill(0,t,t+this.valueSize)},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;this.buffer.copyWithin(e,t,this.valueSize)},_select:function(t,e,n,r,i){if(r>=.5)for(var o=0;o!==i;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,r){Zn.slerpFlat(t,e,t,e,t,n,r)},_slerpAdditive:function(t,e,n,r,i){var o=this._workIndex*i;Zn.multiplyQuaternionsFlat(t,o,t,e,t,n),Zn.slerpFlat(t,e,t,e,t,o,r)},_lerp:function(t,e,n,r,i){for(var o=1-r,a=0;a!==i;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*r}},_lerpAdditive:function(t,e,n,r,i){for(var o=0;o!==i;++o){var a=e+o;t[a]=t[a]+t[n+o]*r}}});var lf=new RegExp("[\\[\\]\\.:\\/]","g"),cf="[^\\[\\]\\.:\\/]",hf="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",ff=/((?:WC+[\/:])*)/.source.replace("WC",cf),pf=/(WCOD+)?/.source.replace("WCOD",hf),df=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",cf),mf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",cf),vf=new RegExp("^"+ff+pf+df+mf+"$"),gf=["material","materials","bones"];function yf(t,e,n){var r=n||bf.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}function bf(t,e,n){this.path=e,this.parsedPath=n||bf.parseTrackName(e),this.node=bf.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function _f(){this.uuid=Bn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var r=this;this.stats={objects:{get total(){return r._objects.length},get inUse(){return this.total-r.nCachedObjects_}},get bindingsPerObject(){return r._bindings.length}}}function xf(t,e,n,r){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=r||e.blendMode;for(var i=e.tracks,o=i.length,a=new Array(o),s={endingStart:We,endingEnd:We},u=0;u!==o;++u){var l=i[u].createInterpolant(null);a[u]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ze,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function wf(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Ef(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function Sf(t,e,n){js.call(this,t,e),this.meshPerAttribute=n||1}function Tf(t,e,n,r){this.ray=new Kr(t,e),this.near=n||0,this.far=r||1/0,this.camera=null,this.layers=new hr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function Af(t,e){return t.distance-e.distance}function Mf(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===r)for(var i=t.children,o=0,a=i.length;o<a;o++)Mf(i[o],e,n,!0)}function Cf(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function Of(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}Object.assign(yf.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(bf,{Composite:yf,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new bf.Composite(t,e,n):new bf(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(lf,"")},parseTrackName:function(t){var e=vf.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var i=n.nodeName.substring(r+1);-1!==gf.indexOf(i)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=i)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function(t){for(var n=0;n<t.length;n++){var i=t[n];if(i.name===e||i.uuid===e)return i;var o=r(i.children);if(o)return o}return null},i=r(t.children);if(i)return i}return null}}),Object.assign(bf.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)t[e++]=n[r]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++]},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,r=0,i=n.length;r!==i;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,r=e.propertyName,i=e.propertyIndex;if(t||(t=bf.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[r];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var l=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===i){i=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===i){i=a;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][u]}else{var c=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(bf.prototype,{_getValue_unbound:bf.prototype.getValue,_setValue_unbound:bf.prototype.setValue}),Object.assign(_f.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,u=void 0,l=0,c=arguments.length;l!==c;++l){var h=arguments[l],f=h.uuid,p=r[f];if(void 0===p){p=e++,r[f]=p,t.push(h);for(var d=0,m=s;d!==m;++d)a[d].push(new bf(h,i[d],o[d]))}else if(p<n){u=t[p];var v=--n,g=t[v];for(r[g.uuid]=p,t[p]=g,r[f]=v,t[v]=h,d=0,m=s;d!==m;++d){var y=a[d],b=y[v],_=y[p];y[p]=b,void 0===_&&(_=new bf(h,i[d],o[d])),y[v]=_}}else t[p]!==u&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,i=r.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],u=s.uuid,l=n[u];if(void 0!==l&&l>=e){var c=e++,h=t[c];n[h.uuid]=l,t[l]=h,n[u]=c,t[c]=s;for(var f=0,p=i;f!==p;++f){var d=r[f],m=d[c],v=d[l];d[l]=m,d[c]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,r=this._indicesByUUID,i=this._bindings,o=i.length,a=0,s=arguments.length;a!==s;++a){var u=arguments[a],l=u.uuid,c=r[l];if(void 0!==c)if(delete r[l],c<n){var h=--n,f=t[h],p=t[y=--e];r[f.uuid]=c,t[c]=f,r[p.uuid]=h,t[h]=p,t.pop();for(var d=0,m=o;d!==m;++d){var v=(b=i[d])[h],g=b[y];b[c]=v,b[h]=g,b.pop()}}else{var y;for(r[(p=t[y=--e]).uuid]=c,t[c]=p,t.pop(),d=0,m=o;d!==m;++d){var b;(b=i[d])[c]=b[y],b.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,r=n[t],i=this._bindings;if(void 0!==r)return i[r];var o=this._paths,a=this._parsedPaths,s=this._objects,u=s.length,l=this.nCachedObjects_,c=new Array(u);r=i.length,n[t]=r,o.push(t),a.push(e),i.push(c);for(var h=l,f=s.length;h!==f;++h){var p=s[h];c[h]=new bf(p,t,e)}return c},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}),Object.assign(xf.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,i=t._clip.duration,o=i/r,a=r/i;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var r=this._mixer,i=r.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=i,s[1]=i+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,r){if(this.enabled){var i=this._startTime;if(null!==i){var o=(t-i)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,l=this._propertyBindings;switch(this.blendMode){case Qe:for(var c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulateAdditive(s);break;case Ye:default:for(c=0,h=u.length;c!==h;++c)u[c].evaluate(a),l[c].accumulate(r,s)}}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var r=n.evaluate(t)[0];e*=r,t>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,r=this.loop,i=this._loopCount,o=r===Be;if(0===t)return-1===i?e:o&&1==(1&i)?n-e:e;if(r===Ue){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===i&&(t>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,i+=Math.abs(a);var s=this.repetitions-i;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1==(1&i))return n-e}return e},_setEndings:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=qe,r.endingEnd=qe):(r.endingStart=t?this.zeroSlopeAtStart?qe:We:Xe,r.endingEnd=e?this.zeroSlopeAtEnd?qe:We:Xe)},_scheduleFading:function(t,e,n){var r=this._mixer,i=r.time,o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=e,a[1]=i+t,s[1]=n,this}}),wf.prototype=Object.assign(Object.create(Fn.prototype),{constructor:wf,_bindAction:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,i=r.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,l=u[s];void 0===l&&(l={},u[s]=l);for(var c=0;c!==i;++c){var h=r[c],f=h.name,p=l[f];if(void 0!==p)o[c]=p;else{if(void 0!==(p=o[c])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=e&&e._propertyBindings[c].binding.parsedPath;++(p=new uf(bf.create(n,f,d),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,f),o[c]=p}a[c].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var i=t._propertyBindings,o=0,a=i.length;o!==a;++o){var s=i[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.useCount&&(i.restoreOriginalState(),this._takeBackBinding(i))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var r=this._actions,i=this._actionsByClip,o=i[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,i[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=r.length,r.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var i=t._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,u=s[s.length-1],l=t._byClipCacheIndex;u._byClipCacheIndex=l,s[l]=u,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var i=e[n];0==--i.referenceCount&&this._removeInactiveBinding(i)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_addInactiveBinding:function(t,e,n){var r=this._bindingsByRootAndName,i=r[e],o=this._bindings;void 0===i&&(i={},r[e]=i),i[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,i=e[r];t._cacheIndex=r,e[r]=t,i._cacheIndex=n,e[n]=i},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new yc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,i=e[r];t.__cacheIndex=r,e[r]=t,i.__cacheIndex=n,e[n]=i},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var r=e||this._root,i=r.uuid,o="string"==typeof t?Cc.findByName(r,t):t,a=null!==o?o.uuid:t,s=this._actionsByClip[a],u=null;if(void 0===n&&(n=null!==o?o.blendMode:Ye),void 0!==s){var l=s.actionByRoot[i];if(void 0!==l&&l.blendMode===n)return l;u=s.knownActions[0],null===o&&(o=u._clip)}if(null===o)return null;var c=new xf(this,o,e,n);return this._bindAction(c,u),this._addInactiveAction(c,a,i),c},existingAction:function(t,e){var n=e||this._root,r=n.uuid,i="string"==typeof t?Cc.findByName(n,t):t,o=i?i.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,r=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var i=0;i!==e;++i)t[i].reset();for(i=0;i!==r;++i)n[i].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,r=this.time+=t,i=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(r,t,i,o);var s=this._bindings,u=this._nActiveBindings;for(a=0;a!==u;++a)s[a].apply(o);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){for(var o=i.knownActions,a=0,s=o.length;a!==s;++a){var u=o[a];this._deactivateAction(u);var l=u._cacheIndex,c=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,c._cacheIndex=l,e[l]=c,e.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var i=n[r].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var o=this._bindingsByRootAndName[e];if(void 0!==o)for(var a in o){var s=o[a];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Ef.prototype.clone=function(){return new Ef(void 0===this.value.clone?this.value:this.value.clone())},Sf.prototype=Object.assign(Object.create(js.prototype),{constructor:Sf,isInstancedInterleavedBuffer:!0,copy:function(t){return js.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(Tf.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var r=n||[];return Mf(t,this,r,e),r.sort(Af),r},intersectObjects:function(t,e,n){var r=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),r;for(var i=0,o=t.length;i<o;i++)Mf(t[i],this,r,e);return r.sort(Af),r}}),Object.assign(Cf.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Bn.clamp(e/this.radius,-1,1))),this}}),Object.assign(Of.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var Pf=new Vn;function kf(t,e){this.min=void 0!==t?t:new Vn(1/0,1/0),this.max=void 0!==e?e:new Vn(-1/0,-1/0)}Object.assign(kf.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=Pf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new Vn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new Vn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new Vn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new Vn),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return Pf.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var If=new Jn,Lf=new Jn;function Rf(t,e){this.start=void 0!==t?t:new Jn,this.end=void 0!==e?e:new Jn}function Df(t){Tr.call(this),this.material=t,this.render=function(){}}Object.assign(Rf.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Jn),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Jn),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Jn),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){If.subVectors(t,this.start),Lf.subVectors(this.end,this.start);var n=Lf.dot(Lf),r=Lf.dot(If)/n;return e&&(r=Bn.clamp(r,0,1)),r},closestPointToPoint:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Jn),this.delta(n).multiplyScalar(r).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),Df.prototype=Object.create(Tr.prototype),Df.prototype.constructor=Df,Df.prototype.isImmediateRenderObject=!0;var Nf=new Jn;function Ff(t,e){Tr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Gi,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,o=1;i<32;i++,o++){var a=i/32*Math.PI*2,s=o/32*Math.PI*2;r.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new Li(r,3));var u=new xu({fog:!1,toneMapped:!1});this.cone=new Pu(n,u),this.add(this.cone),this.update()}Ff.prototype=Object.create(Tr.prototype),Ff.prototype.constructor=Ff,Ff.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Ff.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Nf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Nf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var jf=new Jn,Uf=new sr,zf=new sr;function Bf(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,Bf(t.children[n]));return e}function Vf(t){for(var e=Bf(t),n=new Gi,r=[],i=[],o=new vi(0,0,1),a=new vi(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new Li(r,3)),n.setAttribute("color",new Li(i,3));var l=new xu({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});Pu.call(this,n,l),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Hf(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var r=new Vl(e,4,2),i=new Ei({wireframe:!0,fog:!1,toneMapped:!1});uo.call(this,r,i),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}Vf.prototype=Object.create(Pu.prototype),Vf.prototype.constructor=Vf,Vf.prototype.isSkeletonHelper=!0,Vf.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,r=n.getAttribute("position");zf.getInverse(this.root.matrixWorld);for(var i=0,o=0;i<e.length;i++){var a=e[i];a.parent&&a.parent.isBone&&(Uf.multiplyMatrices(zf,a.matrixWorld),jf.setFromMatrixPosition(Uf),r.setXYZ(o,jf.x,jf.y,jf.z),Uf.multiplyMatrices(zf,a.parent.matrixWorld),jf.setFromMatrixPosition(Uf),r.setXYZ(o+1,jf.x,jf.y,jf.z),o+=2)}n.getAttribute("position").needsUpdate=!0,Tr.prototype.updateMatrixWorld.call(this,t)},Hf.prototype=Object.create(uo.prototype),Hf.prototype.constructor=Hf,Hf.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Hf.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Gf=new Jn,Wf=new vi,qf=new vi;function Xf(t,e,n){Tr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var r=new Ku(e);r.rotateY(.5*Math.PI),this.material=new Ei({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Ti(o,3)),this.add(new uo(r,this.material)),this.update()}function Yf(t,e,n,r){t=t||10,e=e||10,n=new vi(void 0!==n?n:4473924),r=new vi(void 0!==r?r:8947848);for(var i=e/2,o=t/e,a=t/2,s=[],u=[],l=0,c=0,h=-a;l<=e;l++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var f=l===i?n:r;f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3,f.toArray(u,c),c+=3}var p=new Gi;p.setAttribute("position",new Li(s,3)),p.setAttribute("color",new Li(u,3));var d=new xu({vertexColors:!0,toneMapped:!1});Pu.call(this,p,d),this.type="GridHelper"}function Qf(t,e,n,r,i,o){t=t||10,e=e||16,n=n||8,r=r||64,i=new vi(void 0!==i?i:4473924),o=new vi(void 0!==o?o:8947848);var a,s,u,l,c,h,f,p=[],d=[];for(l=0;l<=e;l++)u=l/e*(2*Math.PI),a=Math.sin(u)*t,s=Math.cos(u)*t,p.push(0,0,0),p.push(a,0,s),f=1&l?i:o,d.push(f.r,f.g,f.b),d.push(f.r,f.g,f.b);for(l=0;l<=n;l++)for(f=1&l?i:o,h=t-t/n*l,c=0;c<r;c++)u=c/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),d.push(f.r,f.g,f.b),u=(c+1)/r*(2*Math.PI),a=Math.sin(u)*h,s=Math.cos(u)*h,p.push(a,0,s),d.push(f.r,f.g,f.b);var m=new Gi;m.setAttribute("position",new Li(p,3)),m.setAttribute("color",new Li(d,3));var v=new xu({vertexColors:!0,toneMapped:!1});Pu.call(this,m,v),this.type="PolarGridHelper"}Xf.prototype=Object.create(Tr.prototype),Xf.prototype.constructor=Xf,Xf.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Xf.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Wf.copy(this.light.color),qf.copy(this.light.groundColor);for(var n=0,r=e.count;n<r;n++){var i=n<r/2?Wf:qf;e.setXYZ(n,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(Gf.setFromMatrixPosition(this.light.matrixWorld).negate())},Yf.prototype=Object.assign(Object.create(Pu.prototype),{constructor:Yf,copy:function(t){return Pu.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Qf.prototype=Object.create(Pu.prototype),Qf.prototype.constructor=Qf;var Zf=new Jn,Kf=new Jn,$f=new Jn;function Jf(t,e,n){Tr.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var r=new Gi;r.setAttribute("position",new Li([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var i=new xu({fog:!1,toneMapped:!1});this.lightPlane=new Mu(r,i),this.add(this.lightPlane),(r=new Gi).setAttribute("position",new Li([0,0,0,0,0,1],3)),this.targetLine=new Mu(r,i),this.add(this.targetLine),this.update()}Jf.prototype=Object.create(Tr.prototype),Jf.prototype.constructor=Jf,Jf.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Jf.prototype.update=function(){Zf.setFromMatrixPosition(this.light.matrixWorld),Kf.setFromMatrixPosition(this.light.target.matrixWorld),$f.subVectors(Kf,Zf),this.lightPlane.lookAt(Kf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Kf),this.targetLine.scale.z=$f.length()};var tp=new Jn,ep=new Eo;function np(t){var e=new Gi,n=new xu({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={},a=new vi(16755200),s=new vi(16711680),u=new vi(43775),l=new vi(16777215),c=new vi(3355443);function h(t,e,n){f(t,n),f(e,n)}function f(t,e){r.push(0,0,0),i.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(r.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",u),h("u2","u3",u),h("u3","u1",u),h("c","t",l),h("p","c",c),h("cn1","cn2",c),h("cn3","cn4",c),h("cf1","cf2",c),h("cf3","cf4",c),e.setAttribute("position",new Li(r,3)),e.setAttribute("color",new Li(i,3)),Pu.call(this,e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function rp(t,e,n,r,i,o,a){tp.set(i,o,a).unproject(r);var s=e[t];if(void 0!==s)for(var u=n.getAttribute("position"),l=0,c=s.length;l<c;l++)u.setXYZ(s[l],tp.x,tp.y,tp.z)}np.prototype=Object.create(Pu.prototype),np.prototype.constructor=np,np.prototype.update=function(){var t=this.geometry,e=this.pointMap;ep.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),rp("c",e,t,ep,0,0,-1),rp("t",e,t,ep,0,0,1),rp("n1",e,t,ep,-1,-1,-1),rp("n2",e,t,ep,1,-1,-1),rp("n3",e,t,ep,-1,1,-1),rp("n4",e,t,ep,1,1,-1),rp("f1",e,t,ep,-1,-1,1),rp("f2",e,t,ep,1,-1,1),rp("f3",e,t,ep,-1,1,1),rp("f4",e,t,ep,1,1,1),rp("u1",e,t,ep,.7,1.1,-1),rp("u2",e,t,ep,-.7,1.1,-1),rp("u3",e,t,ep,0,2,-1),rp("cf1",e,t,ep,-1,0,1),rp("cf2",e,t,ep,1,0,1),rp("cf3",e,t,ep,0,-1,1),rp("cf4",e,t,ep,0,1,1),rp("cn1",e,t,ep,-1,0,-1),rp("cn2",e,t,ep,1,0,-1),rp("cn3",e,t,ep,0,-1,-1),rp("cn4",e,t,ep,0,1,-1),t.getAttribute("position").needsUpdate=!0};var ip=new zr;function op(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Gi;i.setIndex(new Ti(n,1)),i.setAttribute("position",new Ti(r,3)),Pu.call(this,i,new xu({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function ap(t,e){this.type="Box3Helper",this.box=t,e=e||16776960;var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Gi;r.setIndex(new Ti(n,1)),r.setAttribute("position",new Li([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Pu.call(this,r,new xu({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function sp(t,e,n){this.plane=t,this.size=void 0===e?1:e;var r=void 0!==n?n:16776960,i=new Gi;i.setAttribute("position",new Li([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),i.computeBoundingSphere(),Mu.call(this,i,new xu({color:r,toneMapped:!1})),this.type="PlaneHelper";var o=new Gi;o.setAttribute("position",new Li([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),o.computeBoundingSphere(),this.add(new uo(o,new Ei({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}op.prototype=Object.create(Pu.prototype),op.prototype.constructor=op,op.prototype.update=function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&ip.setFromObject(this.object),!ip.isEmpty()){var e=ip.min,n=ip.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=e.x,i[4]=n.y,i[5]=n.z,i[6]=e.x,i[7]=e.y,i[8]=n.z,i[9]=n.x,i[10]=e.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=e.z,i[15]=e.x,i[16]=n.y,i[17]=e.z,i[18]=e.x,i[19]=e.y,i[20]=e.z,i[21]=n.x,i[22]=e.y,i[23]=e.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}},op.prototype.setFromObject=function(t){return this.object=t,this.update(),this},op.prototype.copy=function(t){return Pu.prototype.copy.call(this,t),this.object=t.object,this},op.prototype.clone=function(){return(new this.constructor).copy(this)},ap.prototype=Object.create(Pu.prototype),ap.prototype.constructor=ap,ap.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),Tr.prototype.updateMatrixWorld.call(this,t))},sp.prototype=Object.create(Mu.prototype),sp.prototype.constructor=sp,sp.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?g:v,this.lookAt(this.plane.normal),Tr.prototype.updateMatrixWorld.call(this,t)};var up,lp,cp=new Jn;function hp(t,e,n,r,i,o){Tr.call(this),this.type="ArrowHelper",void 0===t&&(t=new Jn(0,0,1)),void 0===e&&(e=new Jn(0,0,0)),void 0===n&&(n=1),void 0===r&&(r=16776960),void 0===i&&(i=.2*n),void 0===o&&(o=.2*i),void 0===up&&((up=new Gi).setAttribute("position",new Li([0,0,0,0,1,0],3)),(lp=new $l(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new Mu(up,new xu({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new uo(lp,new Ei({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,i,o)}function fp(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new Gi;n.setAttribute("position",new Li(e,3)),n.setAttribute("color",new Li([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var r=new xu({vertexColors:!0,toneMapped:!1});Pu.call(this,n,r),this.type="AxesHelper"}hp.prototype=Object.create(Tr.prototype),hp.prototype.constructor=hp,hp.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{cp.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(cp,e)}},hp.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},hp.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},hp.prototype.copy=function(t){return Tr.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},hp.prototype.clone=function(){return(new this.constructor).copy(this)},fp.prototype=Object.create(Pu.prototype),fp.prototype.constructor=fp;var pp=Math.pow(2,8),dp=[.125,.215,.35,.446,.526,.582],mp=5+dp.length,vp={[Je]:0,[tn]:1,[nn]:2,[on]:3,[an]:4,[sn]:5,[en]:6},gp=new yh,{_lodPlanes:yp,_sizeLods:bp,_sigmas:_p}=function(){for(var t=[],e=[],n=[],r=8,i=0;i<mp;i++){var o=Math.pow(2,r);e.push(o);var a=1/o;i>4?a=dp[i-8+4-1]:0==i&&(a=0),n.push(a);for(var s=1/(o-1),u=-s/2,l=1+s/2,c=[u,u,l,u,l,l,u,u,l,l,u,l],h=new Float32Array(108),f=new Float32Array(72),p=new Float32Array(36),d=0;d<6;d++){var m=d%3*2/3-1,v=d>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];h.set(g,18*d),f.set(c,12*d);var y=[d,d,d,d,d,d];p.set(y,6*d)}var b=new Gi;b.setAttribute("position",new Ti(h,3)),b.setAttribute("uv",new Ti(f,2)),b.setAttribute("faceIndex",new Ti(p,1)),t.push(b),r>4&&r--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),xp=null,wp=(1+Math.sqrt(5))/2,Ep=1/wp,Sp=[new Jn(1,1,1),new Jn(-1,1,1),new Jn(1,1,-1),new Jn(-1,1,-1),new Jn(0,wp,Ep),new Jn(0,wp,-Ep),new Jn(Ep,0,wp),new Jn(-Ep,0,wp),new Jn(wp,Ep,0),new Jn(-wp,Ep,0)];function Tp(t){var e;this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=(20,(e=new oc({defines:{n:20},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:new Float32Array(20)},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:new Jn(0,1,0)},inputEncoding:{value:vp[Je]},outputEncoding:{value:vp[Je]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:x,depthTest:!1,depthWrite:!1})).type="SphericalGaussianBlur",e),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function Ap(t){var e=new Yn(3*pp,3*pp,t);return e.texture.mapping=ft,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Mp(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Cp(){var t=new oc({uniforms:{envMap:{value:null},texelSize:{value:new Vn(1,1)},inputEncoding:{value:vp[Je]},outputEncoding:{value:vp[Je]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:x,depthTest:!1,depthWrite:!1});return t.type="EquirectangularToCubeUV",t}function Op(){var t=new oc({uniforms:{envMap:{value:null},inputEncoding:{value:vp[Je]},outputEncoding:{value:vp[Je]}},vertexShader:"\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t",fragmentShader:"\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t",blending:x,depthTest:!1,depthWrite:!1});return t.type="CubemapToCubeUV",t}function Pp(t,e,n,r,i,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new _i(t,e,n,i,o,a)}Tp.prototype={constructor:Tp,fromScene:function(t,e=0,n=.1,r=100){xp=this._renderer.getRenderTarget();var i=this._allocateTargets();return this._sceneToCubeUV(t,n,r,i),e>0&&this._blur(i,0,0,e),this._applyPMREM(i),this._cleanup(i),i},fromEquirectangular:function(t){return t.magFilter=gt,t.minFilter=gt,t.generateMipmaps=!1,this.fromCubemap(t)},fromCubemap:function(t){xp=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=Op(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=Cp(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<yp.length;t++)yp[t].dispose()},_cleanup:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(xp),t.scissorTest=!1,t.setSize(t.width,t.height)},_allocateTargets:function(t){var e,n={magFilter:gt,minFilter:gt,generateMipmaps:!1,type:Mt,format:Gt,encoding:(e=t,void 0===e||e.type!==Mt||e.encoding!==Je&&e.encoding!==tn&&e.encoding!==en?nn:t.encoding),depthBuffer:!1,stencilBuffer:!1},r=Ap(n);return r.depthBuffer=!t,this._pingPongRenderTarget=Ap(n),r},_compileMaterial:function(t){var e=new Ar;e.add(new uo(yp[0],t)),this._renderer.compile(e,gp)},_sceneToCubeUV:function(t,e,n,r){var i=new So(90,1,e,n),o=[1,1,1,1,-1,1],a=[1,1,-1,-1,-1,1],s=this._renderer,u=s.outputEncoding,l=s.toneMapping,c=s.toneMappingExposure,h=s.getClearColor(),f=s.getClearAlpha();s.toneMapping=et,s.toneMappingExposure=1,s.outputEncoding=Je,t.scale.z*=-1;var p=t.background;if(p&&p.isColor){p.convertSRGBToLinear();var d=Math.max(p.r,p.g,p.b),m=Math.min(Math.max(Math.ceil(Math.log2(d)),-128),127);p=p.multiplyScalar(Math.pow(2,-m));var v=(m+128)/255;s.setClearColor(p,v),t.background=null}for(var g=0;g<6;g++){var y=g%3;0==y?(i.up.set(0,o[g],0),i.lookAt(a[g],0,0)):1==y?(i.up.set(0,0,o[g]),i.lookAt(0,a[g],0)):(i.up.set(0,o[g],0),i.lookAt(0,0,a[g])),Mp(r,y*pp,g>2?pp:0,pp,pp),s.setRenderTarget(r),s.render(t,i)}s.toneMapping=l,s.toneMappingExposure=c,s.outputEncoding=u,s.setClearColor(h,f),t.scale.z*=-1},_textureToCubeUV:function(t,e){var n=new Ar,r=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Op()):null==this._equirectShader&&(this._equirectShader=Cp());var i=t.isCubeTexture?this._cubemapShader:this._equirectShader;n.add(new uo(yp[0],i));var o=i.uniforms;o.envMap.value=t,t.isCubeTexture||o.texelSize.value.set(1/t.image.width,1/t.image.height),o.inputEncoding.value=vp[t.encoding],o.outputEncoding.value=vp[e.texture.encoding],Mp(e,0,0,3*pp,2*pp),r.setRenderTarget(e),r.render(n,gp)},_applyPMREM:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var r=1;r<mp;r++){var i=Math.sqrt(_p[r]*_p[r]-_p[r-1]*_p[r-1]),o=Sp[(r-1)%Sp.length];this._blur(t,r-1,r,i,o)}e.autoClear=n},_blur:function(t,e,n,r,i){var o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,r,"latitudinal",i),this._halfBlur(o,t,n,n,r,"longitudinal",i)},_halfBlur:function(t,e,n,r,i,o,a){var s=this._renderer,u=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");var l=new Ar;l.add(new uo(yp[r],u));var c=u.uniforms,h=bp[n]-1,f=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/f,d=isFinite(i)?1+Math.floor(3*p):20;d>20&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);for(var m=[],v=0,g=0;g<20;++g){var y=g/p,b=Math.exp(-y*y/2);m.push(b),0==g?v+=b:g<d&&(v+=2*b)}for(g=0;g<m.length;g++)m[g]=m[g]/v;c.envMap.value=t.texture,c.samples.value=d,c.weights.value=m,c.latitudinal.value="latitudinal"===o,a&&(c.poleAxis.value=a),c.dTheta.value=f,c.mipInt.value=8-n,c.inputEncoding.value=vp[t.texture.encoding],c.outputEncoding.value=vp[t.texture.encoding];var _=bp[r];Mp(e,y=3*Math.max(0,pp-2*_),(0===r?0:2*pp)+2*_*(r>4?r-8+4:0),3*_,2*_),s.setRenderTarget(e),s.render(l,gp)}};var kp=0,Ip=1,Lp=0,Rp=1,Dp=2;function Np(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Fp(t){return void 0===t&&(t=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function jp(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Fu(t,e)}function Up(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new eu(t)}function zp(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Fu(t,e)}function Bp(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Iu(t)}function Vp(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Iu(t)}function Hp(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Iu(t)}function Gp(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Jn(t,e,n)}function Wp(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Ti(t,e).setUsage(On)}function qp(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Ai(t,e)}function Xp(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Mi(t,e)}function Yp(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Ci(t,e)}function Qp(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Oi(t,e)}function Zp(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Pi(t,e)}function Kp(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new ki(t,e)}function $p(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Ii(t,e)}function Jp(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Li(t,e)}function td(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ri(t,e)}function ed(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zc.call(this,t),this.type="catmullrom",this.closed=!0}function nd(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Zc.call(this,t),this.type="catmullrom"}function rd(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Zc.call(this,t),this.type="catmullrom"}function id(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new fp(t)}function od(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new op(t,e)}function ad(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Pu(new Zl(t.geometry),new xu({color:void 0!==e?e:16777215}))}function sd(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Pu(new Hu(t.geometry),new xu({color:void 0!==e?e:16777215}))}function ud(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Dc(t)}function ld(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new jc(t)}function cd(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Mo(t,n)}Vc.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Vc.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(uh.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new vo,n=0,r=t.length;n<r;n++){var i=t[n];e.vertices.push(new Jn(i.x,i.y,i.z||0))}return e}}),Object.assign(lh.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),ed.prototype=Object.create(Zc.prototype),nd.prototype=Object.create(Zc.prototype),rd.prototype=Object.create(Zc.prototype),Object.assign(rd.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Yf.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Vf.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Lc.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ah.extractUrlBase(t)}}),Lc.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(kh.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(kf.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(zr.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(Hr.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),ko.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Rf.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Bn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Bn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Bn.ceilPowerOfTwo(t)}}),Object.assign(Hn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(sr.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,r,i,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,i,o)}}),ei.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Zn.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Kr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(fi.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(fi,{barycoordFromPoint:function(t,e,n,r,i){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),fi.getBarycoord(t,e,n,r,i)},normal:function(t,e,n,r){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),fi.getNormal(t,e,n,r)}}),Object.assign(ch.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Dl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Xl(this,t)}}),Object.assign(Vn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Jn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Xn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(vo.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")},applyMatrix:function(t){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.assign(Tr.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Tr.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(uo.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(uo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),Ze},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(cu.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(du.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),hu.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Vc.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),So.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(hh.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Ti.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===On},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(On)}}}),Object.assign(Ti.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?On:Cn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Gi.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Ti(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Gi.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Tf.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(js.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===On},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(js.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?On:Cn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(Nl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Ef.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(wi.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vi}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===b}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(uc.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(wo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ds.prototype,{clearTarget:function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(Ds.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?tn:Je}}}),Object.defineProperties(Ms.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(tf.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Vh).load(t,(function(t){e.setBuffer(t)})),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),sf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Ao.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};var hd={merge:function(t,e,n){var r;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),r=e.matrix,e=e.geometry),t.merge(e,r,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function fd(){console.error("THREE.CanvasRenderer has been removed")}function pd(){console.error("THREE.JSONLoader has been removed.")}Gn.crossOrigin=void 0,Gn.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var i=new Bc;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Gn.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var i=new zc;i.setCrossOrigin(this.crossOrigin);var o=i.load(t,n,void 0,r);return e&&(o.mapping=e),o},Gn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Gn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var dd={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function md(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}}))},8317:t=>{function e(){}e.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function i(){r.off(t,i),e.apply(n,arguments)}return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),r=0,i=n.length;r<i;r++)n[r].fn.apply(n[r].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],i=[];if(r&&e)for(var o=0,a=r.length;o<a;o++)r[o].fn!==e&&r[o].fn._!==e&&i.push(r[o]);return i.length?n[t]=i:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e},3198:(t,e,n)=>{var r;!function(i){var o=/^\s+/,a=/\s+$/,s=0,u=i.round,l=i.min,c=i.max,h=i.random;function f(t,e){if(e=e||{},(t=t||"")instanceof f)return t;if(!(this instanceof f))return new f(t,e);var n=function(t){var e,n,r,s={r:0,g:0,b:0},u=1,h=null,f=null,p=null,d=!1,m=!1;return"string"==typeof t&&(t=function(t){t=t.replace(o,"").replace(a,"").toLowerCase();var e,n=!1;if(P[t])t=P[t],n=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};return(e=H.rgb.exec(t))?{r:e[1],g:e[2],b:e[3]}:(e=H.rgba.exec(t))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=H.hsl.exec(t))?{h:e[1],s:e[2],l:e[3]}:(e=H.hsla.exec(t))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=H.hsv.exec(t))?{h:e[1],s:e[2],v:e[3]}:(e=H.hsva.exec(t))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=H.hex8.exec(t))?{r:D(e[1]),g:D(e[2]),b:D(e[3]),a:U(e[4]),format:n?"name":"hex8"}:(e=H.hex6.exec(t))?{r:D(e[1]),g:D(e[2]),b:D(e[3]),format:n?"name":"hex"}:(e=H.hex4.exec(t))?{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),a:U(e[4]+""+e[4]),format:n?"name":"hex8"}:!!(e=H.hex3.exec(t))&&{r:D(e[1]+""+e[1]),g:D(e[2]+""+e[2]),b:D(e[3]+""+e[3]),format:n?"name":"hex"}}(t)),"object"==typeof t&&(G(t.r)&&G(t.g)&&G(t.b)?(e=t.r,n=t.g,r=t.b,s={r:255*L(e,255),g:255*L(n,255),b:255*L(r,255)},d=!0,m="%"===String(t.r).substr(-1)?"prgb":"rgb"):G(t.h)&&G(t.s)&&G(t.v)?(h=F(t.s),f=F(t.v),s=function(t,e,n){t=6*L(t,360),e=L(e,100),n=L(n,100);var r=i.floor(t),o=t-r,a=n*(1-e),s=n*(1-o*e),u=n*(1-(1-o)*e),l=r%6;return{r:255*[n,s,a,a,u,n][l],g:255*[u,n,n,s,a,a][l],b:255*[a,a,u,n,n,s][l]}}(t.h,h,f),d=!0,m="hsv"):G(t.h)&&G(t.s)&&G(t.l)&&(h=F(t.s),p=F(t.l),s=function(t,e,n){var r,i,o;function a(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}if(t=L(t,360),e=L(e,100),n=L(n,100),0===e)r=i=o=n;else{var s=n<.5?n*(1+e):n+e-n*e,u=2*n-s;r=a(u,s,t+1/3),i=a(u,s,t),o=a(u,s,t-1/3)}return{r:255*r,g:255*i,b:255*o}}(t.h,h,p),d=!0,m="hsl"),t.hasOwnProperty("a")&&(u=t.a)),u=I(u),{ok:d,format:t.format||m,r:l(255,c(s.r,0)),g:l(255,c(s.g,0)),b:l(255,c(s.b,0)),a:u}}(t);this._originalInput=t,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=u(100*this._a)/100,this._format=e.format||n.format,this._gradientType=e.gradientType,this._r<1&&(this._r=u(this._r)),this._g<1&&(this._g=u(this._g)),this._b<1&&(this._b=u(this._b)),this._ok=n.ok,this._tc_id=s++}function p(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var r,i,o=c(t,e,n),a=l(t,e,n),s=(o+a)/2;if(o==a)r=i=0;else{var u=o-a;switch(i=s>.5?u/(2-o-a):u/(o+a),o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,l:s}}function d(t,e,n){t=L(t,255),e=L(e,255),n=L(n,255);var r,i,o=c(t,e,n),a=l(t,e,n),s=o,u=o-a;if(i=0===o?0:u/o,o==a)r=0;else{switch(o){case t:r=(e-n)/u+(e<n?6:0);break;case e:r=(n-t)/u+2;break;case n:r=(t-e)/u+4}r/=6}return{h:r,s:i,v:s}}function m(t,e,n,r){var i=[N(u(t).toString(16)),N(u(e).toString(16)),N(u(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function v(t,e,n,r){return[N(j(r)),N(u(t).toString(16)),N(u(e).toString(16)),N(u(n).toString(16))].join("")}function g(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s-=e/100,n.s=R(n.s),f(n)}function y(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.s+=e/100,n.s=R(n.s),f(n)}function b(t){return f(t).desaturate(100)}function _(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l+=e/100,n.l=R(n.l),f(n)}function x(t,e){e=0===e?0:e||10;var n=f(t).toRgb();return n.r=c(0,l(255,n.r-u(-e/100*255))),n.g=c(0,l(255,n.g-u(-e/100*255))),n.b=c(0,l(255,n.b-u(-e/100*255))),f(n)}function w(t,e){e=0===e?0:e||10;var n=f(t).toHsl();return n.l-=e/100,n.l=R(n.l),f(n)}function E(t,e){var n=f(t).toHsl(),r=(n.h+e)%360;return n.h=r<0?360+r:r,f(n)}function S(t){var e=f(t).toHsl();return e.h=(e.h+180)%360,f(e)}function T(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+120)%360,s:e.s,l:e.l}),f({h:(n+240)%360,s:e.s,l:e.l})]}function A(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+90)%360,s:e.s,l:e.l}),f({h:(n+180)%360,s:e.s,l:e.l}),f({h:(n+270)%360,s:e.s,l:e.l})]}function M(t){var e=f(t).toHsl(),n=e.h;return[f(t),f({h:(n+72)%360,s:e.s,l:e.l}),f({h:(n+216)%360,s:e.s,l:e.l})]}function C(t,e,n){e=e||6,n=n||30;var r=f(t).toHsl(),i=360/n,o=[f(t)];for(r.h=(r.h-(i*e>>1)+720)%360;--e;)r.h=(r.h+i)%360,o.push(f(r));return o}function O(t,e){e=e||6;for(var n=f(t).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/e;e--;)a.push(f({h:r,s:i,v:o})),o=(o+s)%1;return a}f.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},getLuminance:function(){var t,e,n,r=this.toRgb();return t=r.r/255,e=r.g/255,n=r.b/255,.2126*(t<=.03928?t/12.92:i.pow((t+.055)/1.055,2.4))+.7152*(e<=.03928?e/12.92:i.pow((e+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:i.pow((n+.055)/1.055,2.4))},setAlpha:function(t){return this._a=I(t),this._roundA=u(100*this._a)/100,this},toHsv:function(){var t=d(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=d(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+r+"%)":"hsva("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var t=p(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=p(this._r,this._g,this._b),e=u(360*t.h),n=u(100*t.s),r=u(100*t.l);return 1==this._a?"hsl("+e+", "+n+"%, "+r+"%)":"hsla("+e+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return m(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return function(t,e,n,r,i){var o=[N(u(t).toString(16)),N(u(e).toString(16)),N(u(n).toString(16)),N(j(r))];return i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1)?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:u(this._r),g:u(this._g),b:u(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+u(this._r)+", "+u(this._g)+", "+u(this._b)+")":"rgba("+u(this._r)+", "+u(this._g)+", "+u(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:u(100*L(this._r,255))+"%",g:u(100*L(this._g,255))+"%",b:u(100*L(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+u(100*L(this._r,255))+"%, "+u(100*L(this._g,255))+"%, "+u(100*L(this._b,255))+"%)":"rgba("+u(100*L(this._r,255))+"%, "+u(100*L(this._g,255))+"%, "+u(100*L(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(k[m(this._r,this._g,this._b,!0)]||!1)},toFilter:function(t){var e="#"+v(this._r,this._g,this._b,this._a),n=e,r=this._gradientType?"GradientType = 1, ":"";if(t){var i=f(t);n="#"+v(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,r=this._a<1&&this._a>=0;return e||!r||"hex"!==t&&"hex6"!==t&&"hex3"!==t&&"hex4"!==t&&"hex8"!==t&&"name"!==t?("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),"hex"!==t&&"hex6"!==t||(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex4"===t&&(n=this.toHex8String(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString()):"name"===t&&0===this._a?this.toName():this.toRgbString()},clone:function(){return f(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(x,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(E,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(C,arguments)},complement:function(){return this._applyCombination(S,arguments)},monochromatic:function(){return this._applyCombination(O,arguments)},splitcomplement:function(){return this._applyCombination(M,arguments)},triad:function(){return this._applyCombination(T,arguments)},tetrad:function(){return this._applyCombination(A,arguments)}},f.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]="a"===r?t[r]:F(t[r]));t=n}return f(t,e)},f.equals=function(t,e){return!(!t||!e)&&f(t).toRgbString()==f(e).toRgbString()},f.random=function(){return f.fromRatio({r:h(),g:h(),b:h()})},f.mix=function(t,e,n){n=0===n?0:n||50;var r=f(t).toRgb(),i=f(e).toRgb(),o=n/100;return f({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},f.readability=function(t,e){var n=f(t),r=f(e);return(i.max(n.getLuminance(),r.getLuminance())+.05)/(i.min(n.getLuminance(),r.getLuminance())+.05)},f.isReadable=function(t,e,n){var r,i,o,a,s,u=f.readability(t,e);switch(i=!1,(o=n,"AA"!==(a=((o=o||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==a&&(a="AA"),"small"!==(s=(o.size||"small").toLowerCase())&&"large"!==s&&(s="small"),r={level:a,size:s}).level+r.size){case"AAsmall":case"AAAlarge":i=u>=4.5;break;case"AAlarge":i=u>=3;break;case"AAAsmall":i=u>=7}return i},f.mostReadable=function(t,e,n){var r,i,o,a,s=null,u=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var l=0;l<e.length;l++)(r=f.readability(t,e[l]))>u&&(u=r,s=f(e[l]));return f.isReadable(t,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,f.mostReadable(t,["#fff","#000"],n))};var P=f.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},k=f.hexNames=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}(P);function I(t){return t=parseFloat(t),(isNaN(t)||t<0||t>1)&&(t=1),t}function L(t,e){(function(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)})(t)&&(t="100%");var n=function(t){return"string"==typeof t&&-1!=t.indexOf("%")}(t);return t=l(e,c(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),i.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function R(t){return l(1,c(0,t))}function D(t){return parseInt(t,16)}function N(t){return 1==t.length?"0"+t:""+t}function F(t){return t<=1&&(t=100*t+"%"),t}function j(t){return i.round(255*parseFloat(t)).toString(16)}function U(t){return D(t)/255}var z,B,V,H=(B="[\\s|\\(]+("+(z="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",V="[\\s|\\(]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")[,|\\s]+("+z+")\\s*\\)?",{CSS_UNIT:new RegExp(z),rgb:new RegExp("rgb"+B),rgba:new RegExp("rgba"+V),hsl:new RegExp("hsl"+B),hsla:new RegExp("hsla"+V),hsv:new RegExp("hsv"+B),hsva:new RegExp("hsva"+V),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(t){return!!H.CSS_UNIT.exec(t)}t.exports?t.exports=f:void 0===(r=function(){return f}.call(e,n,e,t))||(t.exports=r)}(Math)},1077:function(t,e,n){!function(t,e,n,r){"use strict";var i=n.defineWorkerModule({name:"Typr Font Parser",dependencies:[function(){var t=self,e={parse:function(t){var n=e._bin,r=new Uint8Array(t);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var u=n.readUint(r,i);i+=4,a.push(e._readFont(r,u))}return a}return[e._readFont(r,0)]},_readFont:function(t,n){var r=e._bin,i=n;r.readFixed(t,n),n+=4;var o=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],s={_data:t,_offset:i},u={},l=0;l<o;l++){var c=r.readASCII(t,n,4);n+=4,r.readUint(t,n),n+=4;var h=r.readUint(t,n);n+=4;var f=r.readUint(t,n);n+=4,u[c]={offset:h,length:f}}for(l=0;l<a.length;l++){var p=a[l];u[p]&&(s[p.trim()]=e[p.trim()].parse(t,u[p].offset,u[p].length,s))}return s},_tabOffset:function(t,n,r){for(var i=e._bin,o=i.readUshort(t,r+4),a=r+12,s=0;s<o;s++){var u=i.readASCII(t,a,4);a+=4,i.readUint(t,a),a+=4;var l=i.readUint(t,a);if(a+=4,i.readUint(t,a),a+=4,u==n)return l}return 0}};return e._bin={readFixed:function(t,e){return(t[e]<<8|t[e+1])+(t[e+2]<<8|t[e+3])/65540},readF2dot14:function(t,n){return e._bin.readShort(t,n)/16384},readInt:function(t,n){var r=e._bin.t.uint8;return r[0]=t[n+3],r[1]=t[n+2],r[2]=t[n+1],r[3]=t[n],e._bin.t.int32[0]},readInt8:function(t,n){return e._bin.t.uint8[0]=t[n],e._bin.t.int8[0]},readShort:function(t,n){var r=e._bin.t.uint8;return r[1]=t[n],r[0]=t[n+1],e._bin.t.int16[0]},readUshort:function(t,e){return t[e]<<8|t[e+1]},readUshorts:function(t,n,r){for(var i=[],o=0;o<r;o++)i.push(e._bin.readUshort(t,n+2*o));return i},readUint:function(t,n){var r=e._bin.t.uint8;return r[3]=t[n],r[2]=t[n+1],r[1]=t[n+2],r[0]=t[n+3],e._bin.t.uint32[0]},readUint64:function(t,n){return 4294967296*e._bin.readUint(t,n)+e._bin.readUint(t,n+4)},readASCII:function(t,e,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(t[e+i]);return r},readUnicode:function(t,e,n){for(var r="",i=0;i<n;i++){var o=t[e++]<<8|t[e++];r+=String.fromCharCode(o)}return r},_tdec:t.TextDecoder?new t.TextDecoder:null,readUTF8:function(t,n,r){var i=e._bin._tdec;return i&&0==n&&r==t.length?i.decode(t):e._bin.readASCII(t,n,r)},readBytes:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(t[e+i]);return r},readASCIIArray:function(t,e,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(t[e+i]));return r}},e._bin.t={buff:new ArrayBuffer(8)},e._bin.t.int8=new Int8Array(e._bin.t.buff),e._bin.t.uint8=new Uint8Array(e._bin.t.buff),e._bin.t.int16=new Int16Array(e._bin.t.buff),e._bin.t.uint16=new Uint16Array(e._bin.t.buff),e._bin.t.int32=new Int32Array(e._bin.t.buff),e._bin.t.uint32=new Uint32Array(e._bin.t.buff),e._lctf={},e._lctf.parse=function(t,n,r,i,o){var a=e._bin,s={},u=n;a.readFixed(t,n),n+=4;var l=a.readUshort(t,n);n+=2;var c=a.readUshort(t,n);n+=2;var h=a.readUshort(t,n);return n+=2,s.scriptList=e._lctf.readScriptList(t,u+l),s.featureList=e._lctf.readFeatureList(t,u+c),s.lookupList=e._lctf.readLookupList(t,u+h,o),s},e._lctf.readLookupList=function(t,n,r){var i=e._bin,o=n,a=[],s=i.readUshort(t,n);n+=2;for(var u=0;u<s;u++){var l=i.readUshort(t,n);n+=2;var c=e._lctf.readLookupTable(t,o+l,r);a.push(c)}return a},e._lctf.readLookupTable=function(t,n,r){var i=e._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(t,n),n+=2,a.flag=i.readUshort(t,n),n+=2;var s=i.readUshort(t,n);n+=2;for(var u=0;u<s;u++){var l=i.readUshort(t,n);n+=2;var c=r(t,a.ltype,o+l);a.tabs.push(c)}return a},e._lctf.numOfOnes=function(t){for(var e=0,n=0;n<32;n++)0!=(t>>>n&1)&&e++;return e},e._lctf.readClassDef=function(t,n){var r=e._bin,i=[],o=r.readUshort(t,n);if(n+=2,1==o){var a=r.readUshort(t,n);n+=2;var s=r.readUshort(t,n);n+=2;for(var u=0;u<s;u++)i.push(a+u),i.push(a+u),i.push(r.readUshort(t,n)),n+=2}if(2==o){var l=r.readUshort(t,n);for(n+=2,u=0;u<l;u++)i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2,i.push(r.readUshort(t,n)),n+=2}return i},e._lctf.getInterval=function(t,e){for(var n=0;n<t.length;n+=3){var r=t[n],i=t[n+1];if(t[n+2],r<=e&&e<=i)return n}return-1},e._lctf.readCoverage=function(t,n){var r=e._bin,i={};i.fmt=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(t,n,o)),2==i.fmt&&(i.tab=r.readUshorts(t,n,3*o)),i},e._lctf.coverageIndex=function(t,n){var r=t.tab;if(1==t.fmt)return r.indexOf(n);if(2==t.fmt){var i=e._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},e._lctf.readFeatureList=function(t,n){var r=e._bin,i=n,o=[],a=r.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var u=r.readASCII(t,n,4);n+=4;var l=r.readUshort(t,n);n+=2,o.push({tag:u.trim(),tab:e._lctf.readFeatureTable(t,i+l)})}return o},e._lctf.readFeatureTable=function(t,n){var r=e._bin;r.readUshort(t,n),n+=2;var i=r.readUshort(t,n);n+=2;for(var o=[],a=0;a<i;a++)o.push(r.readUshort(t,n+2*a));return o},e._lctf.readScriptList=function(t,n){var r=e._bin,i=n,o={},a=r.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var u=r.readASCII(t,n,4);n+=4;var l=r.readUshort(t,n);n+=2,o[u.trim()]=e._lctf.readScriptTable(t,i+l)}return o},e._lctf.readScriptTable=function(t,n){var r=e._bin,i=n,o={},a=r.readUshort(t,n);n+=2,o.default=e._lctf.readLangSysTable(t,i+a);var s=r.readUshort(t,n);n+=2;for(var u=0;u<s;u++){var l=r.readASCII(t,n,4);n+=4;var c=r.readUshort(t,n);n+=2,o[l.trim()]=e._lctf.readLangSysTable(t,i+c)}return o},e._lctf.readLangSysTable=function(t,n){var r=e._bin,i={};r.readUshort(t,n),n+=2,i.reqFeature=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);return n+=2,i.features=r.readUshorts(t,n,o),i},e.CFF={},e.CFF.parse=function(t,n,r){var i=e._bin;(t=new Uint8Array(t.buffer,n,r))[n=0],t[++n],t[++n],t[++n],n++;var o=[];n=e.CFF.readIndex(t,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(t,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var u=[];n=e.CFF.readIndex(t,n,u);var l=[];for(s=0;s<u.length-1;s++)l.push(e.CFF.readDict(t,n+u[s],n+u[s+1]));n+=u[u.length-1];var c=l[0],h=[];n=e.CFF.readIndex(t,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readASCII(t,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],e.CFF.readSubrs(t,n,c),c.CharStrings){n=c.CharStrings,h=[],n=e.CFF.readIndex(t,n,h);var p=[];for(s=0;s<h.length-1;s++)p.push(i.readBytes(t,n+h[s],h[s+1]-h[s]));c.CharStrings=p}if(c.ROS){n=c.FDArray;var d=[];for(n=e.CFF.readIndex(t,n,d),c.FDArray=[],s=0;s<d.length-1;s++){var m=e.CFF.readDict(t,n+d[s],n+d[s+1]);e.CFF._readFDict(t,m,f),c.FDArray.push(m)}n+=d[d.length-1],n=c.FDSelect,c.FDSelect=[];var v=t[n];if(n++,3!=v)throw v;var g=i.readUshort(t,n);for(n+=2,s=0;s<g+1;s++)c.FDSelect.push(i.readUshort(t,n),t[n+2]),n+=3}return c.Encoding&&(c.Encoding=e.CFF.readEncoding(t,c.Encoding,c.CharStrings.length)),c.charset&&(c.charset=e.CFF.readCharset(t,c.charset,c.CharStrings.length)),e.CFF._readFDict(t,c,f),c},e.CFF._readFDict=function(t,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=e.CFF.readDict(t,i,i+n.Private[0]),n.Private.Subrs&&e.CFF.readSubrs(t,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},e.CFF.readSubrs=function(t,n,r){var i=e._bin,o=[];n=e.CFF.readIndex(t,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var u=0;u<o.length-1;u++)r.Subrs.push(i.readBytes(t,n+o[u],o[u+1]-o[u]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(t,e){for(var n=0;n<t.charset.length;n++)if(t.charset[n]==e)return n;return-1},e.CFF.glyphBySE=function(t,n){return n<0||n>255?-1:e.CFF.glyphByUnicode(t,e.CFF.tableSE[n])},e.CFF.readEncoding=function(t,n,r){e._bin;var i=[".notdef"],o=t[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=t[n];n++;for(var s=0;s<a;s++)i.push(t[n+s]);return i},e.CFF.readCharset=function(t,n,r){var i=e._bin,o=[".notdef"],a=t[n];if(n++,0==a)for(var s=0;s<r;s++){var u=i.readUshort(t,n);n+=2,o.push(u)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){u=i.readUshort(t,n),n+=2;var l=0;for(1==a?(l=t[n],n++):(l=i.readUshort(t,n),n+=2),s=0;s<=l;s++)o.push(u),u++}}return o},e.CFF.readIndex=function(t,n,r){var i=e._bin,o=i.readUshort(t,n)+1,a=t[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(t[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(t,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(t,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},e.CFF.getCharString=function(t,n,r){var i=e._bin,o=t[n],a=t[n+1],s=(t[n+2],t[n+3],t[n+4],1),u=null,l=null;o<=20&&(u=o,s=1),12==o&&(u=100*o+a,s=2),21<=o&&o<=27&&(u=o,s=1),28==o&&(l=i.readShort(t,n+1),s=3),29<=o&&o<=31&&(u=o,s=1),32<=o&&o<=246&&(l=o-139,s=1),247<=o&&o<=250&&(l=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(l=256*-(o-251)-a-108,s=2),255==o&&(l=i.readInt(t,n+1)/65535,s=5),r.val=null!=l?l:"o"+u,r.size=s},e.CFF.readCharString=function(t,n,r){for(var i=n+r,o=e._bin,a=[];n<i;){var s=t[n],u=t[n+1],l=(t[n+2],t[n+3],t[n+4],1),c=null,h=null;s<=20&&(c=s,l=1),12==s&&(c=100*s+u,l=2),19!=s&&20!=s||(c=s,l=2),21<=s&&s<=27&&(c=s,l=1),28==s&&(h=o.readShort(t,n+1),l=3),29<=s&&s<=31&&(c=s,l=1),32<=s&&s<=246&&(h=s-139,l=1),247<=s&&s<=250&&(h=256*(s-247)+u+108,l=2),251<=s&&s<=254&&(h=256*-(s-251)-u-108,l=2),255==s&&(h=o.readInt(t,n+1)/65535,l=5),a.push(null!=h?h:"o"+c),n+=l}return a},e.CFF.readDict=function(t,n,r){for(var i=e._bin,o={},a=[];n<r;){var s=t[n],u=t[n+1],l=(t[n+2],t[n+3],t[n+4],1),c=null,h=null;if(28==s&&(h=i.readShort(t,n+1),l=3),29==s&&(h=i.readInt(t,n+1),l=5),32<=s&&s<=246&&(h=s-139,l=1),247<=s&&s<=250&&(h=256*(s-247)+u+108,l=2),251<=s&&s<=254&&(h=256*-(s-251)-u-108,l=2),255==s)throw h=i.readInt(t,n+1)/65535,l=5,"unknown number";if(30==s){var f=[];for(l=1;;){var p=t[n+l];l++;var d=p>>4,m=15&p;if(15!=d&&f.push(d),15!=m&&f.push(m),15==m)break}for(var v="",g=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<f.length;y++)v+=g[f[y]];h=parseFloat(v)}s<=21&&(c=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],l=1,12==s&&(c=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][u],l=2)),null!=c?(o[c]=1==a.length?a[0]:a,a=[]):a.push(h),n+=l}return o},e.cmap={},e.cmap.parse=function(t,n,r){t=new Uint8Array(t.buffer,n,r),n=0;var i=e._bin,o={};i.readUshort(t,n),n+=2;var a=i.readUshort(t,n);n+=2;var s=[];o.tables=[];for(var u=0;u<a;u++){var l=i.readUshort(t,n);n+=2;var c=i.readUshort(t,n);n+=2;var h=i.readUint(t,n);n+=4;var f="p"+l+"e"+c,p=s.indexOf(h);if(-1==p){var d;p=o.tables.length,s.push(h);var m=i.readUshort(t,h);0==m?d=e.cmap.parse0(t,h):4==m?d=e.cmap.parse4(t,h):6==m?d=e.cmap.parse6(t,h):12==m?d=e.cmap.parse12(t,h):console.log("unknown format: "+m,l,c,h),o.tables.push(d)}if(null!=o[f])throw"multiple tables for one platform+encoding";o[f]=p}return o},e.cmap.parse0=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(t[n+a]);return i},e.cmap.parse4=function(t,n){var r=e._bin,i=n,o={};o.format=r.readUshort(t,n),n+=2;var a=r.readUshort(t,n);n+=2,r.readUshort(t,n),n+=2;var s=r.readUshort(t,n);n+=2;var u=s/2;o.searchRange=r.readUshort(t,n),n+=2,o.entrySelector=r.readUshort(t,n),n+=2,o.rangeShift=r.readUshort(t,n),n+=2,o.endCount=r.readUshorts(t,n,u),n+=2*u,n+=2,o.startCount=r.readUshorts(t,n,u),n+=2*u,o.idDelta=[];for(var l=0;l<u;l++)o.idDelta.push(r.readShort(t,n)),n+=2;for(o.idRangeOffset=r.readUshorts(t,n,u),n+=2*u,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(t,n)),n+=2;return o},e.cmap.parse6=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,r.readUshort(t,n),n+=2,i.firstCode=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(t,n)),n+=2;return i},e.cmap.parse12=function(t,n){var r=e._bin,i={};i.format=r.readUshort(t,n),n+=2,n+=2,r.readUint(t,n),n+=4,r.readUint(t,n),n+=4;var o=r.readUint(t,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,u=r.readUint(t,s+0),l=r.readUint(t,s+4),c=r.readUint(t,s+8);i.groups.push([u,l,c])}return i},e.glyf={},e.glyf.parse=function(t,e,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},e.glyf._parseGlyf=function(t,n){var r=e._bin,i=t._data,o=e._tabOffset(i,"glyf",t._offset)+t.loca[n];if(t.loca[n]==t.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var u=r.readUshort(i,o);if(o+=2,i.length-o<u)return null;a.instructions=r.readBytes(i,o,u),o+=u;var l=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<l;s++){var c=i[o];if(o++,a.flags.push(c),0!=(8&c)){var h=i[o];o++;for(var f=0;f<h;f++)a.flags.push(c),s++}}for(a.xs=[],s=0;s<l;s++){var p=0!=(2&a.flags[s]),d=0!=(16&a.flags[s]);p?(a.xs.push(d?i[o]:-i[o]),o++):d?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<l;s++)p=0!=(4&a.flags[s]),d=0!=(32&a.flags[s]),p?(a.ys.push(d?i[o]:-i[o]),o++):d?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,v=0;for(s=0;s<l;s++)m+=a.xs[s],v+=a.ys[s],a.xs[s]=m,a.ys[s]=v}else{var g;a.parts=[];do{g=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&g){var b=r.readShort(i,o);o+=2;var _=r.readShort(i,o);o+=2}else b=r.readInt8(i,o),o++,_=r.readInt8(i,o),o++;2&g?(y.m.tx=b,y.m.ty=_):(y.p1=b,y.p2=_),8&g?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&g?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&g&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&g);if(256&g){var x=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<x;s++)a.instr.push(i[o]),o++}}return a},e.GPOS={},e.GPOS.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GPOS.subt)},e.GPOS.subt=function(t,n,r){var i=e._bin,o=r,a={};if(a.fmt=i.readUshort(t,r),r+=2,1==n||2==n||3==n||7==n||8==n&&a.fmt<=2){var s=i.readUshort(t,r);r+=2,a.coverage=e._lctf.readCoverage(t,s+o)}if(1==n&&1==a.fmt){var u=i.readUshort(t,r);r+=2;var l=e._lctf.numOfOnes(u);0!=u&&(a.pos=e.GPOS.readValueRecord(t,r,u))}else if(2==n){u=i.readUshort(t,r),r+=2;var c=i.readUshort(t,r);r+=2,l=e._lctf.numOfOnes(u);var h=e._lctf.numOfOnes(c);if(1==a.fmt){a.pairsets=[];var f=i.readUshort(t,r);r+=2;for(var p=0;p<f;p++){var d=o+i.readUshort(t,r);r+=2;var m=i.readUshort(t,d);d+=2;for(var v=[],g=0;g<m;g++){var y=i.readUshort(t,d);d+=2,0!=u&&(S=e.GPOS.readValueRecord(t,d,u),d+=2*l),0!=c&&(T=e.GPOS.readValueRecord(t,d,c),d+=2*h),v.push({gid2:y,val1:S,val2:T})}a.pairsets.push(v)}}if(2==a.fmt){var b=i.readUshort(t,r);r+=2;var _=i.readUshort(t,r);r+=2;var x=i.readUshort(t,r);r+=2;var w=i.readUshort(t,r);for(r+=2,a.classDef1=e._lctf.readClassDef(t,o+b),a.classDef2=e._lctf.readClassDef(t,o+_),a.matrix=[],p=0;p<x;p++){var E=[];for(g=0;g<w;g++){var S=null,T=null;0!=a.valFmt1&&(S=e.GPOS.readValueRecord(t,r,a.valFmt1),r+=2*l),0!=a.valFmt2&&(T=e.GPOS.readValueRecord(t,r,a.valFmt2),r+=2*h),E.push({val1:S,val2:T})}a.matrix.push(E)}}}return a},e.GPOS.readValueRecord=function(t,n,r){var i=e._bin,o=[];return o.push(1&r?i.readShort(t,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(t,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(t,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(t,n):0),n+=8&r?2:0,o},e.GSUB={},e.GSUB.parse=function(t,n,r,i){return e._lctf.parse(t,n,r,i,e.GSUB.subt)},e.GSUB.subt=function(t,n,r){var i=e._bin,o=r,a={};if(a.fmt=i.readUshort(t,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&a.fmt<=2||6==n&&a.fmt<=2){var s=i.readUshort(t,r);r+=2,a.coverage=e._lctf.readCoverage(t,o+s)}if(1==n){if(1==a.fmt)a.delta=i.readShort(t,r),r+=2;else if(2==a.fmt){var u=i.readUshort(t,r);r+=2,a.newg=i.readUshorts(t,r,u),r+=2*a.newg.length}}else if(4==n){a.vals=[],u=i.readUshort(t,r),r+=2;for(var l=0;l<u;l++){var c=i.readUshort(t,r);r+=2,a.vals.push(e.GSUB.readLigatureSet(t,o+c))}}else if(5==n){if(2==a.fmt){var h=i.readUshort(t,r);r+=2,a.cDef=e._lctf.readClassDef(t,o+h),a.scset=[];var f=i.readUshort(t,r);for(r+=2,l=0;l<f;l++){var p=i.readUshort(t,r);r+=2,a.scset.push(0==p?null:e.GSUB.readSubClassSet(t,o+p))}}}else if(6==n&&3==a.fmt){for(l=0;l<3;l++){u=i.readUshort(t,r),r+=2;for(var d=[],m=0;m<u;m++)d.push(e._lctf.readCoverage(t,o+i.readUshort(t,r+2*m)));r+=2*u,0==l&&(a.backCvg=d),1==l&&(a.inptCvg=d),2==l&&(a.ahedCvg=d)}u=i.readUshort(t,r),r+=2,a.lookupRec=e.GSUB.readSubstLookupRecords(t,r,u)}return a},e.GSUB.readSubClassSet=function(t,n){var r=e._bin.readUshort,i=n,o=[],a=r(t,n);n+=2;for(var s=0;s<a;s++){var u=r(t,n);n+=2,o.push(e.GSUB.readSubClassRule(t,i+u))}return o},e.GSUB.readSubClassRule=function(t,n){var r=e._bin.readUshort,i={},o=r(t,n),a=r(t,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(t,n)),n+=2;return i.substLookupRecords=e.GSUB.readSubstLookupRecords(t,n,a),i},e.GSUB.readSubstLookupRecords=function(t,n,r){for(var i=e._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(t,n),i(t,n+2)),n+=4;return o},e.GSUB.readChainSubClassSet=function(t,n){var r=e._bin,i=n,o=[],a=r.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var u=r.readUshort(t,n);n+=2,o.push(e.GSUB.readChainSubClassRule(t,i+u))}return o},e.GSUB.readChainSubClassRule=function(t,n){for(var r=e._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(t,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(t,n,s),n+=2*i[o[a]].length}return s=r.readUshort(t,n),n+=2,i.subst=r.readUshorts(t,n,2*s),n+=2*i.subst.length,i},e.GSUB.readLigatureSet=function(t,n){var r=e._bin,i=n,o=[],a=r.readUshort(t,n);n+=2;for(var s=0;s<a;s++){var u=r.readUshort(t,n);n+=2,o.push(e.GSUB.readLigature(t,i+u))}return o},e.GSUB.readLigature=function(t,n){var r=e._bin,i={chain:[]};i.nglyph=r.readUshort(t,n),n+=2;var o=r.readUshort(t,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(t,n)),n+=2;return i},e.head={},e.head.parse=function(t,n,r){var i=e._bin,o={};return i.readFixed(t,n),n+=4,o.fontRevision=i.readFixed(t,n),n+=4,i.readUint(t,n),n+=4,i.readUint(t,n),n+=4,o.flags=i.readUshort(t,n),n+=2,o.unitsPerEm=i.readUshort(t,n),n+=2,o.created=i.readUint64(t,n),n+=8,o.modified=i.readUint64(t,n),n+=8,o.xMin=i.readShort(t,n),n+=2,o.yMin=i.readShort(t,n),n+=2,o.xMax=i.readShort(t,n),n+=2,o.yMax=i.readShort(t,n),n+=2,o.macStyle=i.readUshort(t,n),n+=2,o.lowestRecPPEM=i.readUshort(t,n),n+=2,o.fontDirectionHint=i.readShort(t,n),n+=2,o.indexToLocFormat=i.readShort(t,n),n+=2,o.glyphDataFormat=i.readShort(t,n),n+=2,o},e.hhea={},e.hhea.parse=function(t,n,r){var i=e._bin,o={};return i.readFixed(t,n),n+=4,o.ascender=i.readShort(t,n),n+=2,o.descender=i.readShort(t,n),n+=2,o.lineGap=i.readShort(t,n),n+=2,o.advanceWidthMax=i.readUshort(t,n),n+=2,o.minLeftSideBearing=i.readShort(t,n),n+=2,o.minRightSideBearing=i.readShort(t,n),n+=2,o.xMaxExtent=i.readShort(t,n),n+=2,o.caretSlopeRise=i.readShort(t,n),n+=2,o.caretSlopeRun=i.readShort(t,n),n+=2,o.caretOffset=i.readShort(t,n),n+=2,n+=8,o.metricDataFormat=i.readShort(t,n),n+=2,o.numberOfHMetrics=i.readUshort(t,n),n+=2,o},e.hmtx={},e.hmtx.parse=function(t,n,r,i){for(var o=e._bin,a={aWidth:[],lsBearing:[]},s=0,u=0,l=0;l<i.maxp.numGlyphs;l++)l<i.hhea.numberOfHMetrics&&(s=o.readUshort(t,n),n+=2,u=o.readShort(t,n),n+=2),a.aWidth.push(s),a.lsBearing.push(u);return a},e.kern={},e.kern.parse=function(t,n,r,i){var o=e._bin,a=o.readUshort(t,n);if(n+=2,1==a)return e.kern.parseV1(t,n-2,r,i);var s=o.readUshort(t,n);n+=2;for(var u={glyph1:[],rval:[]},l=0;l<s;l++){n+=2,r=o.readUshort(t,n),n+=2;var c=o.readUshort(t,n);n+=2;var h=c>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=e.kern.readFormat0(t,n,u)}return u},e.kern.parseV1=function(t,n,r,i){var o=e._bin;o.readFixed(t,n),n+=4;var a=o.readUint(t,n);n+=4;for(var s={glyph1:[],rval:[]},u=0;u<a;u++){o.readUint(t,n),n+=4;var l=o.readUshort(t,n);n+=2,o.readUshort(t,n),n+=2;var c=l>>>8;if(0!=(c&=15))throw"unknown kern table format: "+c;n=e.kern.readFormat0(t,n,s)}return s},e.kern.readFormat0=function(t,n,r){var i=e._bin,o=-1,a=i.readUshort(t,n);n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2,i.readUshort(t,n),n+=2;for(var s=0;s<a;s++){var u=i.readUshort(t,n);n+=2;var l=i.readUshort(t,n);n+=2;var c=i.readShort(t,n);n+=2,u!=o&&(r.glyph1.push(u),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(l),h.vals.push(c),o=u}return n},e.loca={},e.loca.parse=function(t,n,r,i){var o=e._bin,a=[],s=i.head.indexToLocFormat,u=i.maxp.numGlyphs+1;if(0==s)for(var l=0;l<u;l++)a.push(o.readUshort(t,n+(l<<1))<<1);if(1==s)for(l=0;l<u;l++)a.push(o.readUint(t,n+(l<<2)));return a},e.maxp={},e.maxp.parse=function(t,n,r){var i=e._bin,o={},a=i.readUint(t,n);return n+=4,o.numGlyphs=i.readUshort(t,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(t,n),n+=2,o.maxContours=i.readUshort(t,n),n+=2,o.maxCompositePoints=i.readUshort(t,n),n+=2,o.maxCompositeContours=i.readUshort(t,n),n+=2,o.maxZones=i.readUshort(t,n),n+=2,o.maxTwilightPoints=i.readUshort(t,n),n+=2,o.maxStorage=i.readUshort(t,n),n+=2,o.maxFunctionDefs=i.readUshort(t,n),n+=2,o.maxInstructionDefs=i.readUshort(t,n),n+=2,o.maxStackElements=i.readUshort(t,n),n+=2,o.maxSizeOfInstructions=i.readUshort(t,n),n+=2,o.maxComponentElements=i.readUshort(t,n),n+=2,o.maxComponentDepth=i.readUshort(t,n),n+=2),o},e.name={},e.name.parse=function(t,n,r){var i=e._bin,o={};i.readUshort(t,n),n+=2;var a=i.readUshort(t,n);n+=2,i.readUshort(t,n);for(var s,u=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],l=n+=2,c=0;c<a;c++){var h=i.readUshort(t,n);n+=2;var f=i.readUshort(t,n);n+=2;var p=i.readUshort(t,n);n+=2;var d=i.readUshort(t,n);n+=2;var m=i.readUshort(t,n);n+=2;var v=i.readUshort(t,n);n+=2;var g,y=u[d],b=l+12*a+v;if(0==h)g=i.readUnicode(t,b,m/2);else if(3==h&&0==f)g=i.readUnicode(t,b,m/2);else if(0==f)g=i.readASCII(t,b,m);else if(1==f)g=i.readUnicode(t,b,m/2);else if(3==f)g=i.readUnicode(t,b,m/2);else{if(1!=h)throw"unknown encoding "+f+", platformID: "+h;g=i.readASCII(t,b,m),console.log("reading unknown MAC encoding "+f+" as ASCII")}var _="p"+h+","+p.toString(16);null==o[_]&&(o[_]={}),o[_][y]=g,o[_]._lang=p}for(var x in o)if(null!=o[x].postScriptName&&1033==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&0==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName&&3084==o[x]._lang)return o[x];for(var x in o)if(null!=o[x].postScriptName)return o[x];for(var x in o){s=x;break}return console.log("returning name table with languageID "+o[s]._lang),o[s]},e["OS/2"]={},e["OS/2"].parse=function(t,n,r){var i=e._bin.readUshort(t,n);n+=2;var o={};if(0==i)e["OS/2"].version0(t,n,o);else if(1==i)e["OS/2"].version1(t,n,o);else if(2==i||3==i||4==i)e["OS/2"].version2(t,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;e["OS/2"].version5(t,n,o)}return o},e["OS/2"].version0=function(t,n,r){var i=e._bin;return r.xAvgCharWidth=i.readShort(t,n),n+=2,r.usWeightClass=i.readUshort(t,n),n+=2,r.usWidthClass=i.readUshort(t,n),n+=2,r.fsType=i.readUshort(t,n),n+=2,r.ySubscriptXSize=i.readShort(t,n),n+=2,r.ySubscriptYSize=i.readShort(t,n),n+=2,r.ySubscriptXOffset=i.readShort(t,n),n+=2,r.ySubscriptYOffset=i.readShort(t,n),n+=2,r.ySuperscriptXSize=i.readShort(t,n),n+=2,r.ySuperscriptYSize=i.readShort(t,n),n+=2,r.ySuperscriptXOffset=i.readShort(t,n),n+=2,r.ySuperscriptYOffset=i.readShort(t,n),n+=2,r.yStrikeoutSize=i.readShort(t,n),n+=2,r.yStrikeoutPosition=i.readShort(t,n),n+=2,r.sFamilyClass=i.readShort(t,n),n+=2,r.panose=i.readBytes(t,n,10),n+=10,r.ulUnicodeRange1=i.readUint(t,n),n+=4,r.ulUnicodeRange2=i.readUint(t,n),n+=4,r.ulUnicodeRange3=i.readUint(t,n),n+=4,r.ulUnicodeRange4=i.readUint(t,n),n+=4,r.achVendID=[i.readInt8(t,n),i.readInt8(t,n+1),i.readInt8(t,n+2),i.readInt8(t,n+3)],n+=4,r.fsSelection=i.readUshort(t,n),n+=2,r.usFirstCharIndex=i.readUshort(t,n),n+=2,r.usLastCharIndex=i.readUshort(t,n),n+=2,r.sTypoAscender=i.readShort(t,n),n+=2,r.sTypoDescender=i.readShort(t,n),n+=2,r.sTypoLineGap=i.readShort(t,n),n+=2,r.usWinAscent=i.readUshort(t,n),n+=2,r.usWinDescent=i.readUshort(t,n),n+2},e["OS/2"].version1=function(t,n,r){var i=e._bin;return n=e["OS/2"].version0(t,n,r),r.ulCodePageRange1=i.readUint(t,n),n+=4,r.ulCodePageRange2=i.readUint(t,n),n+4},e["OS/2"].version2=function(t,n,r){var i=e._bin;return n=e["OS/2"].version1(t,n,r),r.sxHeight=i.readShort(t,n),n+=2,r.sCapHeight=i.readShort(t,n),n+=2,r.usDefault=i.readUshort(t,n),n+=2,r.usBreak=i.readUshort(t,n),n+=2,r.usMaxContext=i.readUshort(t,n),n+2},e["OS/2"].version5=function(t,n,r){var i=e._bin;return n=e["OS/2"].version2(t,n,r),r.usLowerOpticalPointSize=i.readUshort(t,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(t,n),n+2},e.post={},e.post.parse=function(t,n,r){var i=e._bin,o={};return o.version=i.readFixed(t,n),n+=4,o.italicAngle=i.readFixed(t,n),n+=4,o.underlinePosition=i.readShort(t,n),n+=2,o.underlineThickness=i.readShort(t,n),n+=2,o},e.SVG={},e.SVG.parse=function(t,n,r){var i=e._bin,o={entries:[]},a=n;i.readUshort(t,n),n+=2;var s=i.readUint(t,n);n+=4,i.readUint(t,n),n+=4,n=s+a;var u=i.readUshort(t,n);n+=2;for(var l=0;l<u;l++){var c=i.readUshort(t,n);n+=2;var h=i.readUshort(t,n);n+=2;var f=i.readUint(t,n);n+=4;var p=i.readUint(t,n);n+=4;for(var d=new Uint8Array(t.buffer,a+f+s,p),m=i.readUTF8(d,0,d.length),v=c;v<=h;v++)o.entries[v]=m}return o},e.SVG.toPath=function(t){var n={cmds:[],crds:[]};if(null==t)return n;for(var r=(new DOMParser).parseFromString(t,"image/svg+xml").firstChild;"svg"!=r.tagName;)r=r.nextSibling;var i=r.getAttribute("viewBox");i=i?i.trim().split(" ").map(parseFloat):[0,0,1e3,1e3],e.SVG._toPath(r.children,n);for(var o=0;o<n.crds.length;o+=2){var a=n.crds[o],s=n.crds[o+1];a-=i[0],s=-(s-=i[1]),n.crds[o]=a,n.crds[o+1]=s}return n},e.SVG._toPath=function(t,n,r){for(var i=0;i<t.length;i++){var o=t[i],a=o.tagName,s=o.getAttribute("fill");if(null==s&&(s=r),"g"==a)e.SVG._toPath(o.children,n,s);else if("path"==a){n.cmds.push(s||"#000000");var u=o.getAttribute("d"),l=e.SVG._tokens(u);e.SVG._toksToPath(l,n),n.cmds.push("X")}else"defs"==a||console.log(a,o)}},e.SVG._tokens=function(t){for(var e=[],n=0,r=!1,i="";n<t.length;){var o=t.charCodeAt(n),a=t.charAt(n);n++;var s=48<=o&&o<=57||"."==a||"-"==a;r?"-"==a?(e.push(parseFloat(i)),i=a):s?i+=a:(e.push(parseFloat(i)),","!=a&&" "!=a&&e.push(a),r=!1):s?(i=a,r=!0):","!=a&&" "!=a&&e.push(a)}return r&&e.push(parseFloat(i)),e},e.SVG._toksToPath=function(t,n){for(var r=0,i=0,o=0,a=0,s=0,u={M:2,L:2,H:1,V:1,S:4,C:6},l=n.cmds,c=n.crds;r<t.length;){var h=t[r];if(r++,"z"==h)l.push("Z"),i=a,o=s;else for(var f=h.toUpperCase(),p=u[f],d=e.SVG._reps(t,r,p),m=0;m<d;m++){var v=0,g=0;if(h!=f&&(v=i,g=o),"M"==f)i=v+t[r++],o=g+t[r++],l.push("M"),c.push(i,o),a=i,s=o;else if("L"==f)i=v+t[r++],o=g+t[r++],l.push("L"),c.push(i,o);else if("H"==f)i=v+t[r++],l.push("L"),c.push(i,o);else if("V"==f)o=g+t[r++],l.push("L"),c.push(i,o);else if("C"==f){var y=v+t[r++],b=g+t[r++],_=v+t[r++],x=g+t[r++],w=v+t[r++],E=g+t[r++];l.push("C"),c.push(y,b,_,x,w,E),i=w,o=E}else if("S"==f){var S=Math.max(c.length-4,0);y=i+i-c[S],b=o+o-c[S+1],_=v+t[r++],x=g+t[r++],w=v+t[r++],E=g+t[r++],l.push("C"),c.push(y,b,_,x,w,E),i=w,o=E}else console.log("Unknown SVG command "+h)}}},e.SVG._reps=function(t,e,n){for(var r=e;r<t.length&&"string"!=typeof t[r];)r+=n;return(r-e)/n},null==e&&(e={}),null==e.U&&(e.U={}),e.U.codeToGlyph=function(t,e){var n=t.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return e>=i.map.length?0:i.map[e];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(e<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>e?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[e-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:e+i.idDelta[o])}if(12==i.format){if(e>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=e&&e<=s[1])return s[2]+(e-s[0])}return 0}throw"unknown cmap table format "+i.format},e.U.glyphToPath=function(t,n){var r={cmds:[],crds:[]};if(t.SVG&&t.SVG.entries[n]){var i=t.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=e.SVG.toPath(i),t.SVG.entries[n]=i),i)}if(t.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:t.CFF.Private?t.CFF.Private.defaultWidthX:0,open:!1},a=t.CFF,s=t.CFF.Private;if(a.ROS){for(var u=0;a.FDSelect[u+2]<=n;)u+=2;s=a.FDArray[a.FDSelect[u+1]].Private}e.U._drawCFF(t.CFF.CharStrings[n],o,a,s,r)}else t.glyf&&e.U._drawGlyf(n,t,r);return r},e.U._drawGlyf=function(t,n,r){var i=n.glyf[t];null==i&&(i=n.glyf[t]=e.glyf._parseGlyf(n,t)),null!=i&&(i.noc>-1?e.U._simpleGlyph(i,r):e.U._compoGlyph(i,n,r))},e.U._simpleGlyph=function(t,n){for(var r=0;r<t.noc;r++){for(var i=0==r?0:t.endPts[r-1]+1,o=t.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,u=a==o?i:a+1,l=1&t.flags[a],c=1&t.flags[s],h=1&t.flags[u],f=t.xs[a],p=t.ys[a];if(a==i)if(l){if(!c){e.U.P.moveTo(n,f,p);continue}e.U.P.moveTo(n,t.xs[s],t.ys[s])}else c?e.U.P.moveTo(n,t.xs[s],t.ys[s]):e.U.P.moveTo(n,(t.xs[s]+f)/2,(t.ys[s]+p)/2);l?c&&e.U.P.lineTo(n,f,p):h?e.U.P.qcurveTo(n,f,p,t.xs[u],t.ys[u]):e.U.P.qcurveTo(n,f,p,(f+t.xs[u])/2,(p+t.ys[u])/2)}e.U.P.closePath(n)}},e.U._compoGlyph=function(t,n,r){for(var i=0;i<t.parts.length;i++){var o={cmds:[],crds:[]},a=t.parts[i];e.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,u=0;u<o.crds.length;u+=2){var l=o.crds[u],c=o.crds[u+1];r.crds.push(l*s.a+c*s.b+s.tx),r.crds.push(l*s.c+c*s.d+s.ty)}for(u=0;u<o.cmds.length;u++)r.cmds.push(o.cmds[u])}},e.U._getGlyphClass=function(t,n){var r=e._lctf.getInterval(n,t);return-1==r?0:n[r+2]},e.U.getPairAdjustment=function(t,n,r){if(t.GPOS)for(var i=t.GPOS,o=i.lookupList,a=i.featureList,s=[],u=0;u<a.length;u++){var l=a[u];if("kern"==l.tag)for(var c=0;c<l.tab.length;c++)if(!s[l.tab[c]]){s[l.tab[c]]=!0;for(var h=o[l.tab[c]],f=0;f<h.tabs.length;f++)if(null!=h.tabs[u]){var p,d=h.tabs[f];if(!d.coverage||-1!=(p=e._lctf.coverageIndex(d.coverage,n)))if(1==h.ltype);else if(2==h.ltype){var m;if(1==d.fmt){var v=d.pairsets[p];for(u=0;u<v.length;u++)v[u].gid2==r&&(m=v[u])}else if(2==d.fmt){var g=e.U._getGlyphClass(n,d.classDef1),y=e.U._getGlyphClass(r,d.classDef2);m=d.matrix[g][y]}if(m&&m.val2)return m.val2[2]}}}}if(t.kern){var b=t.kern.glyph1.indexOf(n);if(-1!=b){var _=t.kern.rval[b].glyph2.indexOf(r);if(-1!=_)return t.kern.rval[b].vals[_]}}return 0},e.U.stringToGlyphs=function(t,n){for(var r=[],i=0;i<n.length;i++)(o=n.codePointAt(i))>65535&&i++,r.push(e.U.codeToGlyph(t,o));for(i=0;i<n.length;i++){var o;if(2367==(o=n.codePointAt(i))){var a=r[i-1];r[i-1]=r[i],r[i]=a}o>65535&&i++}var s=t.GSUB;if(null==s)return r;for(var u=s.lookupList,l=s.featureList,c=["rlig","liga","mset","isol","init","fina","medi","half","pres","blws"],h=[],f=0;f<l.length;f++){var p=l[f];if(-1!=c.indexOf(p.tag))for(var d=0;d<p.tab.length;d++)if(!h[p.tab[d]]){h[p.tab[d]]=!0;for(var m=u[p.tab[d]],v=0;v<r.length;v++){var g=e.U._getWPfeature(n,v);-1!="isol,init,fina,medi".indexOf(p.tag)&&p.tag!=g||e.U._applySubs(r,v,m,u)}}}return r},e.U._getWPfeature=function(t,e){var n='\n\t" ,.:;!?()  ،',r="آأؤإاةدذرزوٱٲٳٵٶٷڈډڊڋڌڍڎڏڐڑڒړڔڕږڗژڙۀۃۄۅۆۇۈۉۊۋۍۏےۓەۮۯܐܕܖܗܘܙܞܨܪܬܯݍݙݚݛݫݬݱݳݴݸݹࡀࡆࡇࡉࡔࡧࡩࡪࢪࢫࢬࢮࢱࢲࢹૅેૉ૊૎૏ૐ૑૒૝ૡ૤૯஁ஃ஄அஉ஌எஏ஑னப஫஬",i=0==e||-1!=n.indexOf(t[e-1]),o=e==t.length-1||-1!=n.indexOf(t[e+1]);return i||-1==r.indexOf(t[e-1])||(i=!0),o||-1==r.indexOf(t[e])||(o=!0),o||-1=="ꡲ્૗".indexOf(t[e+1])||(o=!0),i||-1=="ꡲ્૗".indexOf(t[e])||(i=!0),i?o?"isol":"init":o?"fina":"medi"},e.U._applySubs=function(t,n,r,i){for(var o=t.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,u=r.tabs[a];if(!u.coverage||-1!=(s=e._lctf.coverageIndex(u.coverage,t[n])))if(1==r.ltype)t[n],1==u.fmt?t[n]=t[n]+u.delta:t[n]=u.newg[s];else if(4==r.ltype)for(var l=u.vals[s],c=0;c<l.length;c++){var h=l[c],f=h.chain.length;if(!(f>o)){for(var p=!0,d=0,m=0;m<f;m++){for(;-1==t[n+d+(1+m)];)d++;h.chain[m]!=t[n+d+(1+m)]&&(p=!1)}if(p){for(t[n]=h.nglyph,m=0;m<f+d;m++)t[n+m+1]=-1;break}}}else if(5==r.ltype&&2==u.fmt)for(var v=e._lctf.getInterval(u.cDef,t[n]),g=u.cDef[v+2],y=u.scset[g],b=0;b<y.length;b++){var _=y[b],x=_.input;if(!(x.length>o)){for(p=!0,m=0;m<x.length;m++){var w=e._lctf.getInterval(u.cDef,t[n+1+m]);if(-1==v&&u.cDef[w+2]!=x[m]){p=!1;break}}if(p){var E=_.substLookupRecords;for(c=0;c<E.length;c+=2)E[c],E[c+1]}}}else if(6==r.ltype&&3==u.fmt){if(!e.U._glsCovered(t,u.backCvg,n-u.backCvg.length))continue;if(!e.U._glsCovered(t,u.inptCvg,n))continue;if(!e.U._glsCovered(t,u.ahedCvg,n+u.inptCvg.length))continue;var S=u.lookupRec;for(b=0;b<S.length;b+=2){v=S[b];var T=i[S[b+1]];e.U._applySubs(t,n+v,T,i)}}}},e.U._glsCovered=function(t,n,r){for(var i=0;i<n.length;i++)if(-1==e._lctf.coverageIndex(n[i],t[r+i]))return!1;return!0},e.U.glyphsToPath=function(t,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var u=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,l=e.U.glyphToPath(t,s),c=0;c<l.crds.length;c+=2)i.crds.push(l.crds[c]+o),i.crds.push(l.crds[c+1]);for(r&&i.cmds.push(r),c=0;c<l.cmds.length;c++)i.cmds.push(l.cmds[c]);r&&i.cmds.push("X"),o+=t.hmtx.aWidth[s],a<n.length-1&&(o+=e.U.getPairAdjustment(t,s,u))}}return i},e.U.pathToSVG=function(t,e){null==e&&(e=5);for(var n=[],r=0,i={M:2,L:2,Q:4,C:6},o=0;o<t.cmds.length;o++){var a=t.cmds[o],s=r+(i[a]?i[a]:0);for(n.push(a);r<s;){var u=t.crds[r++];n.push(parseFloat(u.toFixed(e))+(r==s?"":" "))}}return n.join("")},e.U.pathToContext=function(t,e){for(var n=0,r=t.crds,i=0;i<t.cmds.length;i++){var o=t.cmds[i];"M"==o?(e.moveTo(r[n],r[n+1]),n+=2):"L"==o?(e.lineTo(r[n],r[n+1]),n+=2):"C"==o?(e.bezierCurveTo(r[n],r[n+1],r[n+2],r[n+3],r[n+4],r[n+5]),n+=6):"Q"==o?(e.quadraticCurveTo(r[n],r[n+1],r[n+2],r[n+3]),n+=4):"#"==o.charAt(0)?(e.beginPath(),e.fillStyle=o):"Z"==o?e.closePath():"X"==o&&e.fill()}},e.U.P={},e.U.P.moveTo=function(t,e,n){t.cmds.push("M"),t.crds.push(e,n)},e.U.P.lineTo=function(t,e,n){t.cmds.push("L"),t.crds.push(e,n)},e.U.P.curveTo=function(t,e,n,r,i,o,a){t.cmds.push("C"),t.crds.push(e,n,r,i,o,a)},e.U.P.qcurveTo=function(t,e,n,r,i){t.cmds.push("Q"),t.crds.push(e,n,r,i)},e.U.P.closePath=function(t){t.cmds.push("Z")},e.U._drawCFF=function(t,n,r,i,o){for(var a=n.stack,s=n.nStems,u=n.haveWidth,l=n.width,c=n.open,h=0,f=n.x,p=n.y,d=0,m=0,v=0,g=0,y=0,b=0,_=0,x=0,w=0,E=0,S={val:0,size:0};h<t.length;){e.CFF.getCharString(t,h,S);var T=S.val;if(h+=S.size,"o1"==T||"o18"==T)a.length%2!=0&&!u&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,u=!0;else if("o3"==T||"o23"==T)a.length%2!=0&&!u&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,u=!0;else if("o4"==T)a.length>1&&!u&&(l=a.shift()+i.nominalWidthX,u=!0),c&&e.U.P.closePath(o),p+=a.pop(),e.U.P.moveTo(o,f,p),c=!0;else if("o5"==T)for(;a.length>0;)f+=a.shift(),p+=a.shift(),e.U.P.lineTo(o,f,p);else if("o6"==T||"o7"==T)for(var A=a.length,M="o6"==T,C=0;C<A;C++){var O=a.shift();M?f+=O:p+=O,M=!M,e.U.P.lineTo(o,f,p)}else if("o8"==T||"o24"==T){A=a.length;for(var P=0;P+6<=A;)d=f+a.shift(),m=p+a.shift(),v=d+a.shift(),g=m+a.shift(),f=v+a.shift(),p=g+a.shift(),e.U.P.curveTo(o,d,m,v,g,f,p),P+=6;"o24"==T&&(f+=a.shift(),p+=a.shift(),e.U.P.lineTo(o,f,p))}else{if("o11"==T)break;if("o1234"==T||"o1235"==T||"o1236"==T||"o1237"==T)"o1234"==T&&(m=p,v=(d=f+a.shift())+a.shift(),E=g=m+a.shift(),b=g,x=p,f=(_=(y=(w=v+a.shift())+a.shift())+a.shift())+a.shift(),e.U.P.curveTo(o,d,m,v,g,w,E),e.U.P.curveTo(o,y,b,_,x,f,p)),"o1235"==T&&(d=f+a.shift(),m=p+a.shift(),v=d+a.shift(),g=m+a.shift(),w=v+a.shift(),E=g+a.shift(),y=w+a.shift(),b=E+a.shift(),_=y+a.shift(),x=b+a.shift(),f=_+a.shift(),p=x+a.shift(),a.shift(),e.U.P.curveTo(o,d,m,v,g,w,E),e.U.P.curveTo(o,y,b,_,x,f,p)),"o1236"==T&&(d=f+a.shift(),m=p+a.shift(),v=d+a.shift(),E=g=m+a.shift(),b=g,_=(y=(w=v+a.shift())+a.shift())+a.shift(),x=b+a.shift(),f=_+a.shift(),e.U.P.curveTo(o,d,m,v,g,w,E),e.U.P.curveTo(o,y,b,_,x,f,p)),"o1237"==T&&(d=f+a.shift(),m=p+a.shift(),v=d+a.shift(),g=m+a.shift(),w=v+a.shift(),E=g+a.shift(),y=w+a.shift(),b=E+a.shift(),_=y+a.shift(),x=b+a.shift(),Math.abs(_-f)>Math.abs(x-p)?f=_+a.shift():p=x+a.shift(),e.U.P.curveTo(o,d,m,v,g,w,E),e.U.P.curveTo(o,y,b,_,x,f,p));else if("o14"==T){if(a.length>0&&!u&&(l=a.shift()+r.nominalWidthX,u=!0),4==a.length){var k=a.shift(),I=a.shift(),L=a.shift(),R=a.shift(),D=e.CFF.glyphBySE(r,L),N=e.CFF.glyphBySE(r,R);e.U._drawCFF(r.CharStrings[D],n,r,i,o),n.x=k,n.y=I,e.U._drawCFF(r.CharStrings[N],n,r,i,o)}c&&(e.U.P.closePath(o),c=!1)}else if("o19"==T||"o20"==T)a.length%2!=0&&!u&&(l=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,u=!0,h+=s+7>>3;else if("o21"==T)a.length>2&&!u&&(l=a.shift()+i.nominalWidthX,u=!0),p+=a.pop(),f+=a.pop(),c&&e.U.P.closePath(o),e.U.P.moveTo(o,f,p),c=!0;else if("o22"==T)a.length>1&&!u&&(l=a.shift()+i.nominalWidthX,u=!0),f+=a.pop(),c&&e.U.P.closePath(o),e.U.P.moveTo(o,f,p),c=!0;else if("o25"==T){for(;a.length>6;)f+=a.shift(),p+=a.shift(),e.U.P.lineTo(o,f,p);d=f+a.shift(),m=p+a.shift(),v=d+a.shift(),g=m+a.shift(),f=v+a.shift(),p=g+a.shift(),e.U.P.curveTo(o,d,m,v,g,f,p)}else if("o26"==T)for(a.length%2&&(f+=a.shift());a.length>0;)d=f,m=p+a.shift(),f=v=d+a.shift(),p=(g=m+a.shift())+a.shift(),e.U.P.curveTo(o,d,m,v,g,f,p);else if("o27"==T)for(a.length%2&&(p+=a.shift());a.length>0;)m=p,v=(d=f+a.shift())+a.shift(),g=m+a.shift(),f=v+a.shift(),p=g,e.U.P.curveTo(o,d,m,v,g,f,p);else if("o10"==T||"o29"==T){var F="o10"==T?i:r;if(0==a.length)console.log("error: empty stack");else{var j=a.pop(),U=F.Subrs[j+F.Bias];n.x=f,n.y=p,n.nStems=s,n.haveWidth=u,n.width=l,n.open=c,e.U._drawCFF(U,n,r,i,o),f=n.x,p=n.y,s=n.nStems,u=n.haveWidth,l=n.width,c=n.open}}else if("o30"==T||"o31"==T){var z=a.length,B=(P=0,"o31"==T);for(P+=z-(A=-3&z);P<A;)B?(m=p,v=(d=f+a.shift())+a.shift(),p=(g=m+a.shift())+a.shift(),A-P==5?(f=v+a.shift(),P++):f=v,B=!1):(d=f,m=p+a.shift(),v=d+a.shift(),g=m+a.shift(),f=v+a.shift(),A-P==5?(p=g+a.shift(),P++):p=g,B=!0),e.U.P.curveTo(o,d,m,v,g,f,p),P+=4}else{if("o"==(T+"").charAt(0))throw console.log("Unknown operation: "+T,t),T;a.push(T)}}}n.x=f,n.y=p,n.nStems=s,n.haveWidth=u,n.width=l,n.open=c},e},function(){var t=function(){var t={};function e(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}function n(t,n){this.source=t,this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=n,this.destLen=0,this.ltree=new e,this.dtree=new e}var r=new e,i=new e,o=new Uint8Array(30),a=new Uint16Array(30),s=new Uint8Array(30),u=new Uint16Array(30),l=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=new e,h=new Uint8Array(320);function f(t,e,n,r){var i,o;for(i=0;i<n;++i)t[i]=0;for(i=0;i<30-n;++i)t[i+n]=i/n|0;for(o=r,i=0;i<30;++i)e[i]=o,o+=1<<t[i]}var p=new Uint16Array(16);function d(t,e,n,r){var i,o;for(i=0;i<16;++i)t.table[i]=0;for(i=0;i<r;++i)t.table[e[n+i]]++;for(t.table[0]=0,o=0,i=0;i<16;++i)p[i]=o,o+=t.table[i];for(i=0;i<r;++i)e[n+i]&&(t.trans[p[e[n+i]]++]=i)}function m(t){t.bitcount--||(t.tag=t.source[t.sourceIndex++],t.bitcount=7);var e=1&t.tag;return t.tag>>>=1,e}function v(t,e,n){if(!e)return n;for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var r=t.tag&65535>>>16-e;return t.tag>>>=e,t.bitcount-=e,r+n}function g(t,e){for(;t.bitcount<24;)t.tag|=t.source[t.sourceIndex++]<<t.bitcount,t.bitcount+=8;var n=0,r=0,i=0,o=t.tag;do{r=2*r+(1&o),o>>>=1,++i,n+=e.table[i],r-=e.table[i]}while(r>=0);return t.tag=o,t.bitcount-=i,e.trans[n+r]}function y(t,e,n){var r,i,o,a,s,u;for(r=v(t,5,257),i=v(t,5,1),o=v(t,4,4),a=0;a<19;++a)h[a]=0;for(a=0;a<o;++a){var f=v(t,3,0);h[l[a]]=f}for(d(c,h,0,19),s=0;s<r+i;){var p=g(t,c);switch(p){case 16:var m=h[s-1];for(u=v(t,2,3);u;--u)h[s++]=m;break;case 17:for(u=v(t,3,3);u;--u)h[s++]=0;break;case 18:for(u=v(t,7,11);u;--u)h[s++]=0;break;default:h[s++]=p}}d(e,h,0,r),d(n,h,r,i)}function b(t,e,n){for(;;){var r,i,l,c,h=g(t,e);if(256===h)return 0;if(h<256)t.dest[t.destLen++]=h;else for(r=v(t,o[h-=257],a[h]),i=g(t,n),c=l=t.destLen-v(t,s[i],u[i]);c<l+r;++c)t.dest[t.destLen++]=t.dest[c]}}function _(t){for(var e,n;t.bitcount>8;)t.sourceIndex--,t.bitcount-=8;if((e=256*(e=t.source[t.sourceIndex+1])+t.source[t.sourceIndex])!==(65535&~(256*t.source[t.sourceIndex+3]+t.source[t.sourceIndex+2])))return-3;for(t.sourceIndex+=4,n=e;n;--n)t.dest[t.destLen++]=t.source[t.sourceIndex++];return t.bitcount=0,0}return function(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[168+n]=280+n;for(n=0;n<112;++n)t.trans[176+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n}(r,i),f(o,a,4,3),f(s,u,2,1),o[28]=0,a[28]=258,t.exports=function(t,e){var o,a,s=new n(t,e);do{switch(o=m(s),v(s,2,0)){case 0:a=_(s);break;case 1:a=b(s,r,i);break;case 2:y(s,s.ltree,s.dtree),a=b(s,s.ltree,s.dtree);break;default:a=-3}if(0!==a)throw new Error("Data error")}while(!o);return s.destLen<s.dest.length?"function"==typeof s.dest.slice?s.dest.slice(0,s.destLen):s.dest.subarray(0,s.destLen):s.dest},t.exports}();return function(e){return function(t,e){var n=new DataView(t),r=0;function i(){var t=n.getUint16(r);return r+=2,t}function o(){var t=n.getUint32(r);return r+=4,t}function a(t){y.setUint16(b,t),b+=2}function s(t){y.setUint32(b,t),b+=4}for(var u={signature:o(),flavor:o(),length:o(),numTables:i(),reserved:i(),totalSfntSize:o(),majorVersion:i(),minorVersion:i(),metaOffset:o(),metaLength:o(),metaOrigLength:o(),privOffset:o(),privLength:o()},l=0;Math.pow(2,l)<=u.numTables;)l++;l--;for(var c=16*Math.pow(2,l),h=16*u.numTables-c,f=12,p=[],d=0;d<u.numTables;d++)p.push({tag:o(),offset:o(),compLength:o(),origLength:o(),origChecksum:o()}),f+=16;var m,v=new Uint8Array(12+16*p.length+p.reduce((function(t,e){return t+e.origLength+4}),0)),g=v.buffer,y=new DataView(g),b=0;return s(u.flavor),a(u.numTables),a(c),a(l),a(h),p.forEach((function(t){s(t.tag),s(t.origChecksum),s(f),s(t.origLength),t.outOffset=f,(f+=t.origLength)%4!=0&&(f+=4-f%4)})),p.forEach((function(n){var r=t.slice(n.offset,n.offset+n.compLength);if(n.compLength!=n.origLength){var i=new Uint8Array(n.origLength);e(new Uint8Array(r,2),i)}else i=new Uint8Array(r);v.set(i,n.outOffset);var o=0;(f=n.outOffset+n.origLength)%4!=0&&(o=4-f%4),v.set(new Uint8Array(o).buffer,n.outOffset+n.origLength),m=f+o})),g.slice(0,m)}(e,t)}},function(t,e){var n={M:2,L:2,Q:4,C:6,Z:0};return function(r){var i,o,a,s=new Uint8Array(r,0,4),u=t._bin.readASCII(s,0,4);if("wOFF"===u)r=e(r);else if("wOF2"===u)throw new Error("woff2 fonts not supported");return i=t.parse(r)[0],o=Object.create(null),a={unitsPerEm:i.head.unitsPerEm,ascender:i.hhea.ascender,descender:i.hhea.descender,forEachGlyph:function(e,r,s,u){var l=0,c=1/a.unitsPerEm*r,h=t.U.stringToGlyphs(i,e),f=0;return h.forEach((function(a){if(-1!==a){var h=o[a];if(!h){var p,d,m,v,g=t.U.glyphToPath(i,a),y=g.cmds,b=g.crds;if(b.length){p=d=1/0,m=v=-1/0;for(var _=0,x=b.length;_<x;_+=2){var w=b[_],E=b[_+1];w<p&&(p=w),E<d&&(d=E),w>m&&(m=w),E>v&&(v=E)}}else p=m=d=v=0;h=o[a]={index:a,advanceWidth:i.hmtx.aWidth[a],xMin:p,yMin:d,xMax:m,yMax:v,pathCommandCount:y.length,forEachPathCommand:function(t){for(var e=0,r=[],i=0,o=y.length;i<o;i++){var a=n[y[i]];r.length=1+a,r[0]=y[i];for(var s=1;s<=a;s++)r[s]=b[e++];t.apply(null,r)}}}}u.call(null,h,l,f),h.advanceWidth&&(l+=h.advanceWidth*c),s&&(l+=s*r)}f+=e.codePointAt(f)>65535?2:1})),l}}}}],init:function(t,e,n){return n(t(),e())}}),o={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,textureWidth:2048},a=new e.Color;var s,u=Object.create(null);function l(t,n){if((t=c({},t)).font=(h=t.font||o.defaultFontURL,s||(s="undefined"==typeof document?{}:document.createElement("a")),s.href=h,s.href),t.text=""+t.text,t.sdfGlyphSize=t.sdfGlyphSize||o.sdfGlyphSize,null!=t.colorRanges){var r={};for(var i in t.colorRanges)if(t.colorRanges.hasOwnProperty(i)){var l=t.colorRanges[i];"number"!=typeof l&&(l=a.set(l).getHex()),r[i]=l}t.colorRanges=r}var h;Object.freeze(t);var p=o.textureWidth,d=t.sdfGlyphSize,m=t.font+"@"+d,v=u[m];v||((v=u[m]={sdfTexture:new e.DataTexture(new Uint8Array(d*p),p,d,e.LuminanceFormat,void 0,void 0,void 0,void 0,e.LinearFilter,e.LinearFilter)}).sdfTexture.font=t.font),f(t).then((function(e){e.newGlyphSDFs&&(e.newGlyphSDFs.forEach((function(t){for(var e=t.textureData,n=t.atlasIndex,r=v.sdfTexture.image;r.data.length<(n+1)*d*d;){var i=new Uint8Array(2*r.data.length);i.set(r.data),r.data=i,r.height*=2}for(var o=r.width/d,a=0;a<d;a++)for(var s=a*d,u=r.width*d*Math.floor(n/o)+n%o*d+a*r.width,l=0;l<d;l++)r.data[u+l]=e[s+l]})),v.sdfTexture.needsUpdate=!0),n(Object.freeze({parameters:t,sdfTexture:v.sdfTexture,sdfGlyphSize:d,sdfMinDistancePercent:.125,glyphBounds:e.glyphBounds,glyphAtlasIndices:e.glyphAtlasIndices,glyphColors:e.glyphColors,caretPositions:e.caretPositions,caretHeight:e.caretHeight,chunkedBounds:e.chunkedBounds,ascender:e.ascender,descender:e.descender,lineHeight:e.lineHeight,topBaseline:e.topBaseline,totalBounds:e.totalBounds,totalBlockSize:e.totalBlockSize,timings:e.timings}))}))}function c(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var h=n.defineWorkerModule({name:"FontProcessor",dependencies:[o,.125,i,function(t){var e=t.xMin,n=t.yMin,r=t.xMax-e,i=t.yMax-n,o=1/0,a={0:null,1:null,2:null,3:null,data:null,cx:Math.round(e+r/2),cy:Math.round(n+i/2),r:Math.pow(2,Math.floor(Math.log(Math.max(r,i))*Math.LOG2E)),minX:o,minY:o,maxX:-1/0,maxY:-1/0};function s(t,e){var n=t.minX,r=t.minY,i=t.maxX,o=t.maxY,a=t.cx,u=t.cy;n<e.minX&&(e.minX=n),r<e.minY&&(e.minY=r),i>e.maxX&&(e.maxX=i),o>e.maxY&&(e.maxY=o);var l=e.data;if(l)if(l.cx===a&&l.cy===u){for(;l.next;)l=l.next;l.next=t}else e.data=null,s(l,e),s(t,e);else{var c=(u<e.cy?0:2)+(a<e.cx?0:1);e[c]?s(t,e[c]):e[c]={0:null,1:null,2:null,3:null,data:t,cx:e.cx+e.r/2*(c%2?1:-1),cy:e.cy+e.r/2*(c<2?-1:1),r:e.r/2,minX:n,minY:r,maxX:i,maxY:o}}}function u(t){l(a,t)}function l(t,e){if(!1!==e(t)&&!t.data)for(var n=0;n<4;n++)null!==t[n]&&l(t[n],e)}function c(t,e,n,r,i,o){var a=i-n,s=o-r,u=a*a+s*s,l=u?Math.max(0,Math.min(1,((t-n)*a+(e-r)*s)/u)):0,c=t-(n+l*a),h=e-(r+l*s);return c*c+h*h}return{addLineSegment:function(t,e,n,r){s({x0:t,y0:e,x1:n,y1:r,cx:(t+n)/2,cy:(e+r)/2,minX:Math.min(t,n),minY:Math.min(e,r),maxX:Math.max(t,n),maxY:Math.max(e,r),next:null},a)},findNearestSignedDistance:function(t,e,n){var r=n,i=r*r;return u((function(n){if(t-r>n.maxX||t+r<n.minX||e-r>n.maxY||e+r<n.minY)return!1;for(var o=n.data;o;o=o.next){var a=c(t,e,o.x0,o.y0,o.x1,o.y1);a<i&&(i=a,r=Math.sqrt(a))}})),function(t,e){var n=!1;return u((function(r){if(r.maxX<t||r.minY>e||r.maxY<e)return!1;for(var i=r.data;i;i=i.next){var o=i.x0,a=i.y0,s=i.x1,u=i.y1;a>e!=u>e&&t<(s-o)*(e-a)/(u-a)+o&&(n=!n)}})),n}(t,e)||(r=-r),r}}},function(t,e){var n=e.sdfDistancePercent;function r(t,e,n,r,i,o,a){var s=1-a;return{x:s*s*t+2*s*a*n+a*a*i,y:s*s*e+2*s*a*r+a*a*o}}function i(t,e,n,r,i,o,a,s,u){var l=1-u;return{x:l*l*l*t+3*l*l*u*n+3*l*u*u*i+u*u*u*a,y:l*l*l*e+3*l*l*u*r+3*l*u*u*o+u*u*u*s}}return function(e,o){var a=new Uint8Array(o*o),s=e.xMax-e.xMin,u=e.yMax-e.yMin,l=Math.max(s,u)*n,c=(s+2*l)/o,h=(u+2*l)/o,f=e.xMin-l-c,p=e.yMin-l-h,d=e.xMax+l+c,m=e.yMax+l+h;if(e.pathCommandCount){var v,g,y,b,_=t(e);e.forEachPathCommand((function(t,e,n,o,a,s,u){switch(t){case"M":y=v=e,b=g=n;break;case"L":e===y&&n===b||_.addLineSegment(y,b,y=e,b=n);break;case"Q":for(var l={x:y,y:b},c=1;c<16;c++){var h=r(y,b,e,n,o,a,c/15);_.addLineSegment(l.x,l.y,h.x,h.y),l=h}y=o,b=a;break;case"C":for(var f={x:y,y:b},p=1;p<16;p++){var d=i(y,b,e,n,o,a,s,u,p/15);_.addLineSegment(f.x,f.y,d.x,d.y),f=d}y=s,b=u;break;case"Z":y===v&&b===g||_.addLineSegment(y,b,v,g)}}));for(var x=0;x<o;x++)for(var w=0;w<o;w++){var E=_.findNearestSignedDistance(f+(d-f)*(x+.5)/o,p+(m-p)*(w+.5)/o,l),S=isFinite(E)?Math.round(255*(1+E/l)*.5):E;S=Math.max(0,Math.min(255,S)),a[w*o+x]=S}}return{textureData:a,renderingBounds:[f,p,d,m]}}},function(t,e,n){var r=n.defaultFontUrl,i=Object.create(null),o=Object.create(null),a=1/0;function s(e,n){e||(e=r);var i=o[e];i?i.pending?i.pending.push(n):n(i):(o[e]={pending:[n]},function(e,n){!function i(){var o=function(t){console.error("Failure loading font "+e+(e===r?"":"; trying fallback"),t),e!==r&&(e=r,i())};try{var a=new XMLHttpRequest;a.open("get",e,!0),a.responseType="arraybuffer",a.onload=function(){if(a.status>=400)o(new Error(a.statusText));else if(a.status>0)try{var e=t(a.response);n(e)}catch(t){o(t)}},a.onerror=o,a.send()}catch(t){o(t)}}()}(e,(function(t){var n=o[e].pending;o[e]=t,n.forEach((function(e){return e(t)}))})))}function u(t,n,o){var u=t.text;void 0===u&&(u="");var f=t.font;void 0===f&&(f=r);var p=t.sdfGlyphSize;void 0===p&&(p=64);var d=t.fontSize;void 0===d&&(d=1);var m=t.letterSpacing;void 0===m&&(m=0);var v=t.lineHeight;void 0===v&&(v="normal");var g=t.maxWidth;void 0===g&&(g=a);var y=t.textAlign;void 0===y&&(y="left");var b=t.textIndent;void 0===b&&(b=0);var _=t.whiteSpace;void 0===_&&(_="normal");var x=t.overflowWrap;void 0===x&&(x="normal");var w=t.anchorX;void 0===w&&(w=0);var E=t.anchorY;void 0===E&&(E=0);var S=t.includeCaretPositions;void 0===S&&(S=!1);var T=t.chunkedBoundsSize;void 0===T&&(T=8192);var A=t.colorRanges;void 0===A&&(A=null),void 0===o&&(o=!1);var M=c(),C={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};u.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),u=u.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),d=+d,m=+m,g=+g,v=v||"normal",b=+b,function(t,e,n){t||(t=r);var o=t+"@"+e,a=i[o];a?n(a):s(t,(function(t){a=i[o]||(i[o]={fontObj:t,glyphs:{},glyphCount:0}),n(a)}))}(f,p,(function(t){var r=t.fontObj,i=isFinite(g),s=null,f=null,O=null,P=null,k=null,I=null,L=null,R=0,D=0,N="nowrap"!==_,F=r.ascender,j=r.descender,U=r.unitsPerEm;C.fontLoad=c()-M;var z=c(),B=d/U;"normal"===v&&(v=(F-j)/U);var V=((v*=d)-(F-j)*B)/2,H=-(d+V),G=Math.min(v,(F-j)*B),W=(F+j)/2*B-G/2,q=b,X=new h,Y=[X];if(r.forEachGlyph(u,d,m,(function(t,e,n){var r,o=u.charAt(n),a=t.advanceWidth*B,s=X.count;if("isEmpty"in t||(t.isWhitespace=!!o&&/\s/.test(o),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax),t.isWhitespace||t.isEmpty||D++,N&&i&&!t.isWhitespace&&e+a+q>g&&s){if(X.glyphAt(s-1).glyphObj.isWhitespace)r=new h,q=-e;else for(var l=s;l--;){if(0===l&&"break-word"===x){r=new h,q=-e;break}if(X.glyphAt(l).glyphObj.isWhitespace){var c=(r=X.splitAt(l+1)).glyphAt(0).x;q-=c;for(var f=r.count;f--;)r.glyphAt(f).x-=c;break}}r&&(X.isSoftWrapped=!0,X=r,Y.push(X),R=g)}var p=X.glyphAt(X.count);p.glyphObj=t,p.x=e+q,p.width=a,p.charIndex=n,"\n"===o&&(X=new h,Y.push(X),q=-(e+a+m*d)+b)})),Y.forEach((function(t){for(var e=t.count;e--;){var n=t.glyphAt(e),r=n.glyphObj,i=n.x,o=n.width;if(!r.isWhitespace)return t.width=i+o,void(t.width>R&&(R=t.width))}})),!o){var Q=0,Z=0;if(w&&("number"==typeof w?Q=-w:"string"==typeof w&&(Q=-R*("left"===w?0:"center"===w?.5:"right"===w?1:l(w)))),E)if("number"==typeof E)Z=-E;else if("string"==typeof E){var K=Y.length*v;Z="top"===E?0:"top-baseline"===E?-H:"middle"===E?K/2:"bottom"===E?K:"bottom-baseline"===E?K-V+j*B:l(E)*K}f=new Float32Array(4*D),O=new Float32Array(D),I=[a,a,-1/0,-1/0],L=[];var $=H;S&&(k=new Float32Array(3*u.length)),A&&(P=new Uint8Array(3*D));var J,tt,et=0,nt=-1,rt=-1;Y.forEach((function(n){var r=n.count,i=n.width;if(r>0){var o=0,l=0;if("center"===y)o=(R-i)/2;else if("right"===y)o=R-i;else if("justify"===y&&n.isSoftWrapped){for(var h=0,d=r;d--;)if(!n.glyphAt(d).glyphObj.isWhitespace){for(;d--;)n.glyphAt(d).glyphObj,n.glyphAt(d).glyphObj.isWhitespace&&h++;break}l=(R-i)/h}for(var m=0;m<r;m++){var g=n.glyphAt(m),b=g.glyphObj;if(o&&(g.x+=o),0!==l&&b.isWhitespace&&(o+=l,g.width+=l),S){var _=g.charIndex;for(k[3*_]=g.x+Q,k[3*_+1]=g.x+g.width+Q,k[3*_+2]=$+W+Z;_-nt>1;)k[3*(nt+1)]=k[3*nt+1],k[3*(nt+1)+1]=k[3*nt+1],k[3*(nt+1)+2]=k[3*nt+2],nt++;nt=_}if(A)for(var x=g.charIndex;x>rt;)rt++,A.hasOwnProperty(rt)&&(tt=A[rt]);if(!b.isWhitespace&&!b.isEmpty){var w=et++,E=t.glyphs[b.index];if(!E){var M=c(),D=e(b,p);C.sdf[u.charAt(g.charIndex)]=c()-M,D.atlasIndex=t.glyphCount++,s||(s=[]),s.push(D),E=t.glyphs[b.index]={atlasIndex:D.atlasIndex,glyphObj:b,renderingBounds:D.renderingBounds}}var N=E.renderingBounds,F=4*w,j=f[F]=g.x+N[0]*B+Q,U=f[F+1]=$+N[1]*B+Z,z=f[F+2]=g.x+N[2]*B+Q,V=f[F+3]=$+N[3]*B+Z;if(j<I[0]&&(I[0]=j),U<I[1]&&(I[1]=U),z>I[2]&&(I[2]=z),V>I[3]&&(I[3]=V),w%T==0&&(J={start:w,end:w,rect:[a,a,-1/0,-1/0]},L.push(J)),J.end++,j<J.rect[0]&&(J.rect[0]=j),U<J.rect[1]&&(J.rect[1]=U),z>J.rect[2]&&(J.rect[2]=z),V>J.rect[3]&&(J.rect[3]=V),O[w]=E.atlasIndex,A){var H=3*w;P[H]=tt>>16&255,P[H+1]=tt>>8&255,P[H+2]=255&tt}}}}$-=v}))}for(var it in C.sdf)C.sdfTotal+=C.sdf[it];C.layout=c()-z-C.sdfTotal,C.total=c()-M,n({glyphBounds:f,glyphAtlasIndices:O,caretPositions:k,caretHeight:G,glyphColors:P,chunkedBounds:L,ascender:F*B,descender:j*B,lineHeight:v,topBaseline:H,totalBounds:I,totalBlockSize:[R,Y.length*v],newGlyphSDFs:s,timings:C})}))}function l(t){var e=t.match(/^([\d.]+)%$/),n=e?parseFloat(e[1]):NaN;return isNaN(n)?0:n/100}function c(){return(self.performance||Date).now()}function h(){this.data=[]}return h.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/4)},glyphAt:function(t){var e=h.flyweight;return e.data=this.data,e.index=t,e},splitAt:function(t){var e=new h;return e.data=this.data.splice(4*t),e}},h.flyweight=["glyphObj","x","width","charIndex"].reduce((function(t,e,n,r){return Object.defineProperty(t,e,{get:function(){return this.data[4*this.index+n]},set:function(t){this.data[4*this.index+n]=t}}),t}),{data:null,index:0}),{process:u,measure:function(t,e){u(t,(function(t){e({width:t.totalBlockSize[0],height:t.totalBlockSize[1]})}),{metricsOnly:!0})},loadFont:s}}],init:function(t,e,n,r,i,o){return o(n,i(r,{sdfDistancePercent:e}),{defaultFontUrl:t.defaultFontURL})}}),f=n.defineWorkerModule({name:"TextBuilder",dependencies:[h,n.ThenableWorkerModule],init:function(t,e){return function(n){var r=new e;return t.process(n,r.resolve),r}},getTransferables:function(t){var e=[t.glyphBounds.buffer,t.glyphAtlasIndices.buffer];return t.caretPositions&&e.push(t.caretPositions.buffer),t.newGlyphSDFs&&t.newGlyphSDFs.forEach((function(t){e.push(t.textureData.buffer)})),e}}),p={};var d=new e.Vector3,m="aTroikaGlyphIndex",v=function(t){function n(){t.call(this),this.detail=1,this.boundingSphere=new e.Sphere}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={detail:{configurable:!0}};return n.prototype.computeBoundingSphere=function(){},r.detail.set=function(t){var n=this;if(t!==this._detail){this._detail=t,("number"!=typeof t||t<1)&&(t=1);var r=function(t){var n=p[t];return n||(n=p[t]=new e.PlaneBufferGeometry(1,1,t,t).translate(.5,.5,0)),n}(t);["position","normal","uv"].forEach((function(t){n.attributes[t]=r.attributes[t].clone()})),this.setIndex(r.getIndex().clone())}},r.detail.get=function(){return this._detail},n.prototype.updateGlyphs=function(t,e,n,r,i){g(this,"aTroikaGlyphBounds",t,4),g(this,m,e,1),g(this,"aTroikaGlyphColor",i,3),this._chunkedBounds=r,y(this,e.length);var o=this.boundingSphere;o.center.set((n[0]+n[2])/2,(n[1]+n[3])/2,0),o.radius=o.center.distanceTo(d.set(n[0],n[1],0))},n.prototype.applyClipRect=function(t){var e=this.getAttribute(m).count,n=this._chunkedBounds;if(n)for(var r=n.length;r--;){e=n[r].end;var i=n[r].rect;if(i[1]<t.w&&i[3]>t.y&&i[0]<t.z&&i[2]>t.x)break}y(this,e)},Object.defineProperties(n.prototype,r),n}(e.InstancedBufferGeometry);function g(t,n,r,i){var o=t.getAttribute(n);r?o&&o.array.length===r.length?(o.array.set(r),o.needsUpdate=!0):(t.setAttribute(n,new e.InstancedBufferAttribute(r,i)),delete t._maxInstanceCount,t.dispose()):o&&t.deleteAttribute(n)}function y(t,e){t[t.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=e}v.prototype.setAttribute||(v.prototype.setAttribute=function(t,e){return this.attributes[t]=e,this});function b(t){var n=r.createDerivedMaterial(t,{extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new e.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFMinDistancePct:{value:0},uTroikaTotalBounds:{value:new e.Vector4(0,0,0,0)},uTroikaClipRect:{value:new e.Vector4(0,0,0,0)},uTroikaOrient:{value:new e.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\nvarying vec3 vTroikaGlyphColor;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nvec4 clippedBounds = vec4(\n  clamp(bounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(bounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\nvTroikaGlyphUV = clippedXY.xy;\n\nfloat cols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvTroikaSDFTextureUV = vec2(\n  mod(aTroikaGlyphIndex, cols) + clippedXY.x,\n  floor(aTroikaGlyphIndex / cols) + clippedXY.y\n) * uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = vec2(\n  (position.x - uTroikaTotalBounds.x) / (uTroikaTotalBounds.z - uTroikaTotalBounds.x),\n  (position.y - uTroikaTotalBounds.y) / (uTroikaTotalBounds.w - uTroikaTotalBounds.y)\n);\n\nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform float uTroikaSDFMinDistancePct;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaSDFTextureUV;\nvarying vec2 vTroikaGlyphUV;\n\nfloat troikaGetTextAlpha() {\n  float troikaSDFValue = texture2D(uTroikaSDFTexture, vTroikaSDFTextureUV).r;\n  \n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(0.5, troikaSDFValue);\n  #else\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  float aaDist = min(\n    0.5,\n    0.5 * min(\n      fwidth(vTroikaGlyphUV.x),\n      fwidth(vTroikaGlyphUV.y)\n    )\n  ) / uTroikaSDFMinDistancePct;\n  #else\n  float aaDist = 0.01;\n  #endif\n  \n  float alpha = uTroikaSDFDebug ? troikaSDFValue : smoothstep(\n    0.5 - aaDist,\n    0.5 + aaDist,\n    troikaSDFValue\n  );\n  #endif\n  \n  return alpha;\n}\n",fragmentColorTransform:"\nfloat troikaAlphaMult = troikaGetTextAlpha();\nif (troikaAlphaMult == 0.0) {\n  discard;\n} else {\n  gl_FragColor.a *= troikaAlphaMult;\n}\n",customRewriter:function(t){var e=t.vertexShader,n=t.fragmentShader,i=/\buniform\s+vec3\s+diffuse\b/;return i.test(n)&&(n=n.replace(i,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),i.test(e)||(e=e.replace(r.voidMainRegExp,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:n}}});return n.transparent=!0,Object.defineProperties(n,{isTroikaTextMaterial:{value:!0},shadowSide:{get:function(){return this.side},set:function(){}}}),n}var _=new e.MeshBasicMaterial({color:16777215,side:e.DoubleSide,transparent:!0}),x=new e.Matrix4,w=new e.Vector3,E=new e.Vector3,S=[],T=new e.Vector3,A="+x+y",M=new e.Mesh(new e.PlaneBufferGeometry(1,1).translate(.5,.5,0),_),C={type:"syncstart"},O={type:"synccomplete"},P=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],k=P.concat("material","color","depthOffset","clipRect","orientation","glyphGeometryDetail"),I=function(t){function e(){var e=new v;t.call(this,e,null),this.text="",this.anchorX=0,this.anchorY=0,this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.depthOffset=0,this.clipRect=null,this.orientation=A,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textRenderInfo:{configurable:!0},material:{configurable:!0},glyphGeometryDetail:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return e.prototype.sync=function(t){var e=this;this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(C),l({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},(function(n){e._isSyncing=!1,e._textRenderInfo=n,e.geometry.updateGlyphs(n.glyphBounds,n.glyphAtlasIndices,n.totalBounds,n.chunkedBounds,n.glyphColors);var r=e._queuedSyncs;r&&(e._queuedSyncs=null,e._needsSync=!0,e.sync((function(){r.forEach((function(t){return t&&t()}))}))),e.dispatchEvent(O),t&&t()}))))},e.prototype.onBeforeRender=function(){this.sync(),this._prepareForRender()},e.prototype.dispose=function(){this.geometry.dispose()},n.textRenderInfo.get=function(){return this._textRenderInfo||null},n.material.get=function(){var t=this._derivedMaterial,e=this._baseMaterial||_;return t&&t.baseMaterial===e||(t=this._derivedMaterial=b(e),e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),t},n.material.set=function(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t},n.glyphGeometryDetail.get=function(){return this.geometry.detail},n.glyphGeometryDetail.set=function(t){this.geometry.detail=t},n.customDepthMaterial.get=function(){return this.material.getDepthMaterial()},n.customDistanceMaterial.get=function(){return this.material.getDistanceMaterial()},e.prototype._prepareForRender=function(){var t=this._derivedMaterial,e=t.uniforms,n=this.textRenderInfo;if(n){var r=n.sdfTexture,i=n.totalBounds;e.uTroikaSDFTexture.value=r,e.uTroikaSDFTextureSize.value.set(r.image.width,r.image.height),e.uTroikaSDFGlyphSize.value=n.sdfGlyphSize,e.uTroikaSDFMinDistancePct.value=n.sdfMinDistancePercent,e.uTroikaTotalBounds.value.fromArray(i),e.uTroikaUseGlyphColors.value=!!n.glyphColors;var o=this.clipRect;o&&Array.isArray(o)&&4===o.length?e.uTroikaClipRect.value.set(Math.max(i[0],o[0]),Math.max(i[1],o[1]),Math.min(i[2],o[2]),Math.min(i[3],o[3])):e.uTroikaClipRect.value.fromArray(i),this.geometry.applyClipRect(e.uTroikaClipRect.value)}e.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;var a=this.color;null!=a&&t.color&&t.color.isColor&&a!==t._troikaColor&&t.color.set(t._troikaColor=a);var s=this.orientation||A;if(s!==t._orientation){var u=e.uTroikaOrient.value,l=(s=s.replace(/[^-+xyz]/g,""))!==A&&s.match(/^([-+])([xyz])([-+])([xyz])$/);if(l){var c=l[1],h=l[2],f=l[3],p=l[4];w.set(0,0,0)[h]="-"===c?1:-1,E.set(0,0,0)[p]="-"===f?-1:1,x.lookAt(T,w.cross(E),E),u.setFromMatrix4(x)}else u.identity();t._orientation=s}},e.prototype.raycast=function(t,e){var n=this.textRenderInfo;if(n){var r=n.totalBounds;M.matrixWorld.multiplyMatrices(this.matrixWorld,x.set(r[2]-r[0],0,0,r[0],0,r[3]-r[1],0,r[1],0,0,1,0,0,0,0,1)),S.length=0,M.raycast(t,S);for(var i=0;i<S.length;i++)S[i].object=this,e.push(S[i])}},e.prototype.copy=function(e){var n=this;return t.prototype.copy.call(this,e),k.forEach((function(t){n[t]=e[t]})),this},e.prototype.clone=function(){return(new this.constructor).copy(this)},Object.defineProperties(e.prototype,n),e}(e.Mesh);P.forEach((function(t){var e="_private_"+t;Object.defineProperty(I.prototype,t,{get:function(){return this[e]},set:function(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})}));var L=!1;Object.defineProperty(I.prototype,"anchor",{get:function(){return this._deprecated_anchor},set:function(t){this._deprecated_anchor=t,L||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),L=!0),Array.isArray(t)?(this.anchorX=100*(+t[0]||0)+"%",this.anchorY=100*(+t[1]||0)+"%"):this.anchorX=this.anchorY=0}});var R=new WeakMap;var D=new WeakMap;t.GlyphsGeometry=v,t.Text=I,t.configureTextBuilder=function(t){c(o,t)},t.createTextDerivedMaterial=b,t.fontProcessorWorkerModule=h,t.getCaretAtPoint=function(t,e,n){var r=null,i=t.caretHeight,o=function(t){var e=D.get(t);if(!e){var n=t.caretPositions,r=t.caretHeight;e=new Map;for(var i=0;i<n.length;i+=3){var o=n[i+2],a=e.get(o);a||e.set(o,a=[]),a.push({x:n[i],y:o,height:r,charIndex:i/3}),i+3>=n.length&&a.push({x:n[i+1],y:o,height:r,charIndex:i/3+1})}}return D.set(t,e),e}(t),a=1/0;return o.forEach((function(t,e){Math.abs(n-(e+i/2))<Math.abs(n-(a+i/2))&&(a=e)})),o.get(a).forEach((function(t){(!r||Math.abs(e-t.x)<Math.abs(e-r.x))&&(r=t)})),r},t.getSelectionRects=function(t,e,n){var r;if(t){var i=R.get(t);if(i&&i.start===e&&i.end===n)return i.rects;var o=t.caretPositions,a=t.caretHeight,s=t.totalBounds;if(n<e){var u=e;e=n,n=u}e=Math.max(e,0),n=Math.min(n,o.length+1);for(var l=new Map,c=e;c<n;c++){var h=o[3*c],f=o[3*c+1],p=o[3*c+2],d=l.get(p);d?(d.left=Math.max(Math.min(d.left,h),s[0]),d.right=Math.min(Math.max(d.right,f),s[2])):(d={left:h,right:f,bottom:p,top:p+a},l.set(p,d))}r=[],l.forEach((function(t){r.push(t)})),R.set(t,{start:e,end:n,rects:r})}return r},t.preloadFont=function(t,e){var n=t.font,r=t.characters;l({font:n,sdfGlyphSize:t.sdfGlyphSize,text:Array.isArray(r)?r.join("\n"):""+r},e)},Object.defineProperty(t,"__esModule",{value:!0})}(e,n(4412),n(2684),n(8478))},8478:function(t,e,n){!function(t,e){"use strict";var n=/\bvoid\s+main\s*\(\s*\)\s*{/g;function r(t){return t.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(t,n){var i=e.ShaderChunk[n];return i?r(i):t}))}var i=Object.assign||function(){for(var t=arguments,e=arguments[0],n=1,r=arguments.length;n<r;n++){var i=t[n];if(i)for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e},o=Date.now(),a=new WeakMap;function s(t,n){var f=function(t){return JSON.stringify(t,l)}(n),p=a.get(t);if(p||(p=Object.create(null),a.set(t,p)),p[f])return p[f].clone();var d,m,v=function(t){var e=h.get(t);return null==e&&h.set(t,e=++c),e}(f),g="_derivedShaders"+v,y="_onBeforeCompile"+v;function b(e){t.onBeforeCompile.call(this,e);var a=this[g]||(this[g]={vertex:{},fragment:{}}),s=a.vertex,l=a.fragment;if(s.source!==e.vertexShader||l.source!==e.fragmentShader){var c=function(t,e,n){var i=t.vertexShader,o=t.fragmentShader,a=e.vertexDefs,s=e.vertexMainIntro,l=e.vertexMainOutro,c=e.vertexTransform,h=e.fragmentDefs,f=e.fragmentMainIntro,p=e.fragmentMainOutro,d=e.fragmentColorTransform,m=e.customRewriter,v=e.timeUniform;if(a=a||"",s=s||"",l=l||"",h=h||"",f=f||"",p=p||"",(c||m)&&(i=r(i)),(d||m)&&(o=r(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"))),m){var g=m({vertexShader:i,fragmentShader:o});i=g.vertexShader,o=g.fragmentShader}if(d){var y=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(function(t){return y.push(t),""})),p=d+"\n"+y.join("\n")+"\n"+p}if(v){var b="\nuniform float "+v+";\n";a=b+a,h=b+h}return c&&(a=a+"\nvec3 troika_position_"+n+";\nvec3 troika_normal_"+n+";\nvec2 troika_uv_"+n+";\nvoid troikaVertexTransform"+n+"(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  "+c+"\n}\n",s="\ntroika_position_"+n+" = vec3(position);\ntroika_normal_"+n+" = vec3(normal);\ntroika_uv_"+n+" = vec2(uv);\ntroikaVertexTransform"+n+"(troika_position_"+n+", troika_normal_"+n+", troika_uv_"+n+");\n"+s+"\n",i=i.replace(/\b(position|normal|uv)\b/g,(function(t,e,r,i){return/\battribute\s+vec[23]\s+$/.test(i.substr(0,r))?e:"troika_"+e+"_"+n}))),{vertexShader:i=u(i,n,a,s,l),fragmentShader:o=u(o,n,h,f,p)}}(e,n,v);s.source=e.vertexShader,s.result=c.vertexShader,l.source=e.fragmentShader,l.result=c.fragmentShader}e.vertexShader=s.result,e.fragmentShader=l.result,i(e.uniforms,this.uniforms),n.timeUniform&&(e.uniforms[n.timeUniform]={get value(){return Date.now()-o}}),this[y]&&this[y](e)}function _(){t.constructor.apply(this,arguments),this._listeners=void 0}_.prototype=Object.create(t,{constructor:{value:_},isDerivedMaterial:{value:!0},baseMaterial:{value:t},onBeforeCompile:{get:function(){return b},set:function(t){this[y]=t}},copy:{value:function(n){return t.copy.call(this,n),t.isShaderMaterial||t.isDerivedMaterial||(this.extensions=i({},n.extensions),this.defines=i({},n.defines),this.uniforms=e.UniformsUtils.clone(n.uniforms)),this}},getDepthMaterial:{value:function(){var r=this._depthMaterial;return r||(m||((m=s(t.isDerivedMaterial?t.getDepthMaterial():new e.MeshDepthMaterial({depthPacking:e.RGBADepthPacking}),n)).defines.IS_DEPTH_MATERIAL=""),(r=this._depthMaterial=m.clone()).uniforms=this.uniforms),r}},getDistanceMaterial:{value:function(){var r=this._distanceMaterial;return r||(d||((d=s(t.isDerivedMaterial?t.getDistanceMaterial():new e.MeshDistanceMaterial,n)).defines.IS_DISTANCE_MATERIAL=""),(r=this._distanceMaterial=d.clone()).uniforms=this.uniforms),r}},dispose:{value:function(){var e=this._depthMaterial,n=this._distanceMaterial;e&&e.dispose(),n&&n.dispose(),t.dispose.call(this)}}});var x=new _;return x.copy(t),x.uniforms=i(e.UniformsUtils.clone(t.uniforms||{}),n.uniforms),x.defines=i({},t.defines,n.defines),x.defines["TROIKA_DERIVED_MATERIAL_"+v]="",x.extensions=i({},t.extensions,n.extensions),p[f]=x,x.clone()}function u(t,e,r,i,o){return(i||o||r)&&(t=t.replace(n,"\n"+r+"\nvoid troikaOrigMain"+e+"() {"),t+="\nvoid main() {\n  "+i+"\n  troikaOrigMain"+e+"();\n  "+o+"\n}"),t}function l(t,e){return"uniforms"===t?void 0:"function"==typeof e?e.toString():e}var c=0,h=new Map;var f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};var p=function(t){this.name=t,this.textureUniform="dataTex_"+t,this.textureSizeUniform="dataTexSize_"+t,this.multiplierUniform="dataMultiplier_"+t,this.dataSizeUniform="dataSize_"+t,this.readFunction="readData_"+t,this._raw=new Float32Array(0),this._texture=new e.DataTexture(new Uint8Array(0),0,1),this._length=0,this._multiplier=1},d={length:{configurable:!0}};function m(t,e,n){var r=255*t,i=r%1*255,o=i%1*255,a=o%1*255;return r&=255,i&=255,o&=255,a=255&Math.round(a),e[n]=r,e[n+1]=i,e[n+2]=o,e[n+3]=a,e}d.length.set=function(t){if(t!==this._length){var e=Math.pow(2,Math.ceil(Math.log2(t))),n=this._raw;e<n.length?this._raw=n.subarray(0,e):e>n.length&&(this._raw=new Float32Array(e),this._raw.set(n)),this._length=t}},d.length.get=function(){return this._length},p.prototype.push=function(t){return this.set(this.length++,t)},p.prototype.setArray=function(t){this.length=t.length,this._raw.set(t),this._needsRepack=!0},p.prototype.get=function(t){return this._raw[t]},p.prototype.set=function(t,e){t+1>this._length&&(this.length=t+1),e!==this._raw[t]&&(this._raw[t]=e,m(e/this._multiplier,this._texture.image.data,4*t),this._needsMultCheck=!0)},p.prototype.clone=function(){var t=new p(this.name);return t.setArray(this._raw),t},p.prototype.getShaderUniforms=function(){var t,e=this;return(t={})[this.textureUniform]={get value(){return e._sync(),e._texture}},t[this.textureSizeUniform]={get value(){return e._sync(),e._texture.image.width}},t[this.dataSizeUniform]={get value(){return e._sync(),e.length}},t[this.multiplierUniform]={get value(){return e._sync(),e._multiplier}},t},p.prototype.getShaderHeaderCode=function(){var t=this,e=t.textureUniform,n=t.textureSizeUniform,r=t.dataSizeUniform,i=t.multiplierUniform;return"\nuniform sampler2D "+e+";\nuniform float "+n+";\nuniform float "+r+";\nuniform float "+i+";\n\nfloat "+t.readFunction+"(float index) {\n  vec2 texUV = vec2((index + 0.5) / "+n+", 0.5);\n  vec4 pixel = texture2D("+e+", texUV);\n  return dot(pixel, 1.0 / vec4(1.0, 255.0, 65025.0, 16581375.0)) * "+i+";\n}\n"},p.prototype._sync=function(){var t=this._texture,e=this._raw,n=this._needsRepack;if(e.length!==t.image.width&&(t.image={data:new Uint8Array(4*e.length),width:e.length,height:1},n=!0),n||this._needsMultCheck){var r=this._raw.reduce((function(t,e){return Math.max(t,e)}),0),i=Math.pow(2,Math.ceil(Math.log2(r)));i!==this._multiplier&&(this._multiplier=i,n=!0),t.needsUpdate=!0,this._needsMultCheck=!1}if(n){for(var o=0,a=e.length,s=this._multiplier;o<a;o++)m(e[o]/s,t.image.data,4*o);this._needsRepack=!1}},Object.defineProperties(p.prototype,d);var v=null,g=new e.MeshStandardMaterial({color:16777215,side:e.DoubleSide}),y=function(t){function n(){t.call(this,n.getGeometry(),g),this.pointA=new e.Vector3,this.controlA=new e.Vector3,this.controlB=new e.Vector3,this.pointB=new e.Vector3,this.radius=.01,this.dashArray=new e.Vector2,this.dashOffset=0,this.frustumCulled=!1}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={material:{configurable:!0},customDepthMaterial:{configurable:!0},customDistanceMaterial:{configurable:!0}};return n.getGeometry=function(){return v||(v=new e.CylinderBufferGeometry(1,1,1,6,64).translate(0,.5,0))},r.material.get=function(){var t=this._derivedMaterial,n=this._baseMaterial||g;return t&&t.baseMaterial===n||(t=this._derivedMaterial=function(t){return s(t,{uniforms:{pointA:{value:new e.Vector3},controlA:{value:new e.Vector3},controlB:{value:new e.Vector3},pointB:{value:new e.Vector3},radius:{value:.01},dashing:{value:new e.Vector3}},vertexDefs:"\nuniform vec3 pointA;\nuniform vec3 controlA;\nuniform vec3 controlB;\nuniform vec3 pointB;\nuniform float radius;\nvarying float bezierT;\n\nvec3 cubicBezier(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  float b0 = t2 * t2 * t2;\n  float b1 = 3.0 * t * t2 * t2;\n  float b2 = 3.0 * t * t * t2;\n  float b3 = t * t * t;\n  return b0 * p1 + b1 * c1 + b2 * c2 + b3 * p2;\n}\n\nvec3 cubicBezierDerivative(vec3 p1, vec3 c1, vec3 c2, vec3 p2, float t) {\n  float t2 = 1.0 - t;\n  return -3.0 * p1 * t2 * t2 +\n    c1 * (3.0 * t2 * t2 - 6.0 * t2 * t) +\n    c2 * (6.0 * t2 * t - 3.0 * t * t) +\n    3.0 * p2 * t * t;\n}\n",vertexTransform:'\nfloat t = position.y;\nbezierT = t;\nvec3 bezierCenterPos = cubicBezier(pointA, controlA, controlB, pointB, t);\nvec3 bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t));\n\n// Make "sideways" always perpendicular to the camera ray; this ensures that any twists\n// in the cylinder occur where you won\'t see them: \nvec3 viewDirection = normalMatrix * vec3(0.0, 0.0, 1.0);\nif (bezierDir == viewDirection) {\n  bezierDir = normalize(cubicBezierDerivative(pointA, controlA, controlB, pointB, t == 1.0 ? t - 0.0001 : t + 0.0001));\n}\nvec3 sideways = normalize(cross(bezierDir, viewDirection));\nvec3 upish = normalize(cross(sideways, bezierDir));\n\n// Build a matrix for transforming this disc in the cylinder:\nmat4 discTx;\ndiscTx[0].xyz = sideways * radius;\ndiscTx[1].xyz = bezierDir * radius;\ndiscTx[2].xyz = upish * radius;\ndiscTx[3].xyz = bezierCenterPos;\ndiscTx[3][3] = 1.0;\n\n// Apply transform, ignoring original y\nposition = (discTx * vec4(position.x, 0.0, position.z, 1.0)).xyz;\nnormal = normalize(mat3(discTx) * normal);\n',fragmentDefs:"\nuniform vec3 dashing;\nvarying float bezierT;\n",fragmentMainIntro:"\nif (dashing.x + dashing.y > 0.0) {\n  float dashFrac = mod(bezierT - dashing.z, dashing.x + dashing.y);\n  if (dashFrac > dashing.x) {\n    discard;\n  }\n}\n"})}(n),n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.dispose()}))),t},r.material.set=function(t){this._baseMaterial=t},r.customDepthMaterial.get=function(){return this.material.getDepthMaterial()},r.customDistanceMaterial.get=function(){return this.material.getDistanceMaterial()},n.prototype.onBeforeRender=function(t){var e=this.material.uniforms,n=this,r=n.pointA,i=n.controlA,o=n.controlB,a=n.pointB,s=n.radius,u=n.dashArray,l=n.dashOffset;e.pointA.value.copy(r),e.controlA.value.copy(i),e.controlB.value.copy(o),e.pointB.value.copy(a),e.radius.value=s,e.dashing.value.set(u.x,u.y,l||0)},n.prototype.raycast=function(t,e){},Object.defineProperties(n.prototype,r),n}(e.Mesh);t.BezierMesh=y,t.ShaderFloatArray=p,t.createDerivedMaterial=s,t.expandShaderIncludes=r,t.getShaderUniformTypes=function(t){for(var e,n=/\buniform\s+(int|float|vec[234])\s+([A-Za-z_][\w]*)/g,r=Object.create(null);null!==(e=n.exec(t));)r[e[2]]=e[1];return r},t.getShadersForMaterial=function(t){var n=f[t.type];return n?e.ShaderLib[n]:t},t.voidMainRegExp=n,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(4412))},2684:function(t,e){!function(t){"use strict";function e(){var t,n=0,r=[],i=0,o=0;var a=p((function(t){o||u(1,t)})),s=p((function(t){o||u(-1,t)}));function u(e,r){o++;var i=0;try{r===v&&d();var a=e>0&&f(r);a?a.call(r,p((function(t){i++,u(1,t)})),p((function(t){i++,u(-1,t)}))):(n=e,t=r,l())}catch(t){n||i||u(-1,t)}}function l(){i||(setTimeout(c,0),i=1)}function c(){var t=r;i=0,r=[],t.forEach(h)}function h(t){t()}function f(t){var e=t&&(m(t)||"object"==typeof t)&&t.then;return m(e)&&e}function p(t){var e=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];e++||t.apply(this,n)}}function d(){throw new TypeError("Chaining cycle detected")}var m=function(t){return"function"==typeof t},v={then:function(i,o){var a=e();return r.push((function(){var e=n>0?i:o;if(m(e))try{var r=e(t);r===a&&d();var s=f(r);s?s.call(r,a.resolve,a.reject):a.resolve(r)}catch(t){a.reject(t)}else a[n>0?"resolve":"reject"](t)})),n&&l(),a},resolve:a,reject:s};return v}function n(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return{then:n.then.bind(n),resolve:t,reject:e}}e.all=n.all=function(t){var e=0,n=[],i=r();return 0===t.length?i.resolve([]):t.forEach((function(o,a){var s=r();s.resolve(o),s.then((function(r){e++,n[a]=r,e===t.length&&i.resolve(n)}),i.reject)})),i};var r="function"==typeof Promise?n:e;function i(){var t=Object.create(null);function e(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var u=r.init;void 0===u&&(u=function(){});var l=r.getTransferables;if(void 0===l&&(l=null),!t[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(e(n,(function(t){if(t instanceof Error)throw t})),n=t[n.id].value),n})),u=n("<"+a+">.init",u),l&&(l=n("<"+a+">.getTransferables",l));var c=null;"function"==typeof u?c=u.apply(void 0,s):console.error("worker module init function failed to rehydrate"),t[o]={id:o,value:c,getTransferables:l},i(c)}catch(t){t&&t.noLog||console.error(t),i(t)}}function n(t,e){var n=void 0;self.troikaDefine=function(t){return n=t};var r=URL.createObjectURL(new Blob(["/** "+t.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+e+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(t){console.error(t)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&e(a,(function(t){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof t}})})),"callModule"===o&&function(e,n){var r,i=e.id,o=e.args;t[i]&&"function"==typeof t[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=t[i]).value.apply(r,o);a&&"function"==typeof a.then?a.then(s,(function(t){return n(t instanceof Error?t:new Error(""+t))})):s(a)}catch(t){n(t)}function s(e){try{var r=t[i].getTransferables&&t[i].getTransferables(e);r&&Array.isArray(r)&&r.length||(r=void 0),n(e,r)}catch(t){console.error(t),n(t)}}}(a,(function(t,e){t instanceof Error?postMessage({messageId:i,success:!1,error:t.message}):postMessage({messageId:i,success:!0,result:t},e||void 0)}))}catch(t){postMessage({messageId:i,success:!1,error:t.stack})}}))}var o=function(){var t=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),t=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return o=function(){return t},t},a=0,s=0,u=!1,l=Object.create(null),c=Object.create(null);function h(t){if(!(t&&"function"==typeof t.init||u))throw new Error("requires `options.init` function");var e=t.dependencies,n=t.init,i=t.getTransferables,s=t.workerId;if(!o())return function(t){var e=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];return e._getInitResult().then((function(e){if("function"==typeof e)return e.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return e._getInitResult=function(){var n=t.dependencies,i=t.init;n=Array.isArray(n)?n.map((function(t){return t&&t._getInitResult?t._getInitResult():t})):[];var o=r.all(n).then((function(t){return i.apply(null,t)}));return e._getInitResult=function(){return o},o},e}(t);null==s&&(s="#default");var l="workerModule"+ ++a,c=t.name||l,d=null;function m(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return d||(d=p(s,"registerModule",m.workerModuleData)),d.then((function(e){if(e.isCallable)return p(s,"callModule",{id:l,args:t});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return e=e&&e.map((function(t){return"function"!=typeof t||t.workerModuleData||(u=!0,t=h({workerId:s,name:"<"+c+"> function dependency: "+t.name,init:"function(){return (\n"+f(t)+"\n)}"}),u=!1),t&&t.workerModuleData&&(t=t.workerModuleData),t})),m.workerModuleData={isWorkerModule:!0,id:l,name:c,dependencies:e,init:f(n),getTransferables:i&&f(i)},m}function f(t){var e=t.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function p(t,e,n){var o=r(),a=++s;return c[a]=function(t){t.success?o.resolve(t.result):o.reject(new Error("Error in worker "+e+" call: "+t.error))},c._count++,c.count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),function(t){var e=l[t];if(!e){var n=f(i);(e=l[t]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+t.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(t){var e=t.data,n=e.messageId,r=c[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete c[n],c.count--,r(e)}}return e}(t).postMessage({messageId:a,action:e,data:n}),o}c._count=0;var d=h({name:"Thenable",dependencies:[r],init:function(t){return t}});t.Thenable=r,t.ThenableWorkerModule=d,t.defineWorkerModule=h,t.stringifyFunction=f,Object.defineProperty(t,"__esModule",{value:!0})}(e)},9312:(t,e,n)=>{"use strict";n.r(e),n.d(e,{__extends:()=>i,__assign:()=>o,__rest:()=>a,__decorate:()=>s,__param:()=>u,__metadata:()=>l,__awaiter:()=>c,__generator:()=>h,__createBinding:()=>f,__exportStar:()=>p,__values:()=>d,__read:()=>m,__spread:()=>v,__spreadArrays:()=>g,__await:()=>y,__asyncGenerator:()=>b,__asyncDelegator:()=>_,__asyncValues:()=>x,__makeTemplateObject:()=>w,__importStar:()=>E,__importDefault:()=>S,__classPrivateFieldGet:()=>T,__classPrivateFieldSet:()=>A});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function l(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function f(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}function p(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function m(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(m(arguments[e]));return t}function g(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(u,l):c(o[0][2],n)}catch(t){c(o[0][3],t)}var n}function u(t){s("next",t)}function l(t){s("throw",t)}function c(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function _(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function x(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}function T(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function A(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}}},e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={id:r,loaded:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.hmd=t=>((t=Object.create(t)).children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.p="",(()=>{"use strict";var t={};n.r(t),n.d(t,{assert:()=>Ha,assertContextRunning:()=>Wa,assertRange:()=>Ga,log:()=>Ya,setLogger:()=>Xa,warn:()=>Qa});var e={};n.r(e);var r={};n.r(r),n.d(r,{AMOscillator:()=>Ju,AMSynth:()=>kl,Abs:()=>ml,Add:()=>al,AmplitudeEnvelope:()=>Cl,Analyser:()=>Jc,AudioToGain:()=>Ku,AutoFilter:()=>vc,AutoPanner:()=>yc,AutoWah:()=>_c,BaseContext:()=>Ls,BiquadFilter:()=>Il,BitCrusher:()=>wc,Buffer:()=>Ih,BufferSource:()=>Rh,Buffers:()=>Lh,Channel:()=>sh,Chebyshev:()=>Sc,Chorus:()=>Oc,Clock:()=>wu,Compressor:()=>fh,Context:()=>Rs,Convolver:()=>yh,CrossFade:()=>pc,DCMeter:()=>rh,Delay:()=>Eu,Destination:()=>Eh,Distortion:()=>Pc,Draw:()=>Ch,DuoSynth:()=>Nl,EQ3:()=>gh,Emitter:()=>Is,Envelope:()=>Sl,FFT:()=>nh,FMOscillator:()=>tl,FMSynth:()=>Fl,FatOscillator:()=>nl,FeedbackCombFilter:()=>Xl,FeedbackDelay:()=>Ic,Filter:()=>Ll,Follower:()=>bc,Freeverb:()=>Fc,Frequency:()=>iu,FrequencyClass:()=>eu,FrequencyEnvelope:()=>Rl,FrequencyShifter:()=>Rc,Gain:()=>du,GainToAudio:()=>vl,Gate:()=>ph,GrainPlayer:()=>dl,GreaterThan:()=>_l,GreaterThanZero:()=>bl,IntervalTimeline:()=>ku,JCReverb:()=>Bc,LFO:()=>ll,Limiter:()=>dh,Listener:()=>Ah,Loop:()=>tc,LowpassCombFilter:()=>Ql,Master:()=>Sh,MembraneSynth:()=>zl,Merge:()=>Ac,MetalSynth:()=>Ul,Meter:()=>eh,MidSideCompressor:()=>mh,MidSideMerge:()=>Yc,MidSideSplit:()=>Xc,Midi:()=>Mu,MidiClass:()=>Au,MonoSynth:()=>Dl,MultibandCompressor:()=>vh,MultibandSplit:()=>uh,Multiply:()=>$u,Negate:()=>gl,Noise:()=>Bu,NoiseSynth:()=>Bl,Offline:()=>Su,OfflineContext:()=>Us,OmniOscillator:()=>ol,OnePoleFilter:()=>Yl,Oscillator:()=>Yu,PWMOscillator:()=>rl,PanVol:()=>ah,Panner:()=>gc,Panner3D:()=>ch,Param:()=>lu,Part:()=>ec,Pattern:()=>hc,Phaser:()=>Wc,PingPongDelay:()=>Hc,PitchShift:()=>Gc,Player:()=>fl,Players:()=>pl,PluckSynth:()=>Zl,PolySynth:()=>Kl,Pow:()=>xl,PulseOscillator:()=>el,Recorder:()=>hh,Reverb:()=>qc,Sampler:()=>$l,Scale:()=>sl,ScaleExp:()=>wl,Sequence:()=>fc,Signal:()=>gu,Solo:()=>oh,Split:()=>Tc,StateTimeline:()=>uu,StereoWidener:()=>Zc,Subtract:()=>yl,SyncedSignal:()=>El,Synth:()=>Ol,Ticks:()=>Ou,TicksClass:()=>Cu,Time:()=>tu,TimeClass:()=>Js,Timeline:()=>Ms,ToneAudioBuffer:()=>js,ToneAudioBuffers:()=>Tu,ToneAudioNode:()=>cu,ToneBufferSource:()=>zu,ToneEvent:()=>Jl,ToneOscillatorNode:()=>Xu,Transport:()=>xh,TransportTime:()=>au,TransportTimeClass:()=>ou,Tremolo:()=>Kc,Unit:()=>e,UserMedia:()=>Wu,Vibrato:()=>$c,Volume:()=>Lu,WaveShaper:()=>Zu,Waveform:()=>ih,Zero:()=>ul,connect:()=>fu,connectSeries:()=>hu,connectSignal:()=>yu,context:()=>Ph,dbToGain:()=>Ws,debug:()=>t,defaultArg:()=>ys,disconnect:()=>pu,ftom:()=>Qs,gainToDb:()=>qs,getContext:()=>Vs,getDestination:()=>Th,getDraw:()=>Oh,getListener:()=>Mh,getTransport:()=>wh,immediate:()=>_h,intervalToFrequencyRatio:()=>Xs,isArray:()=>ns,isBoolean:()=>es,isDefined:()=>Ka,isFunction:()=>$a,isNote:()=>is,isNumber:()=>Ja,isObject:()=>ts,isString:()=>rs,isUndef:()=>Za,loaded:()=>kh,mtof:()=>Ks,now:()=>bh,optionsFromArguments:()=>gs,setContext:()=>Hs,start:()=>Gs,supported:()=>Ba,version:()=>Cn});var i={};n.r(i),n.d(i,{BassDrum:()=>wd,Clap:()=>Ed,Claves:()=>Sd,Congas:()=>Td,Cowbell:()=>Ad,Cymbal:()=>Md,HiHatClosed:()=>Cd,HitHatOpen:()=>Od,Maracas:()=>Pd,Rimshot:()=>kd,SnareDrum:()=>Id,TomToms:()=>Ld});var o=n(7378),a=n(1542);function s(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n(6248);var u=n(3615),l=n.n(u);function c(){return(c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function h(t){return"/"===t.charAt(0)}function f(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function p(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}const d=function t(e,n){if(e===n)return!0;if(null==e||null==n)return!1;if(Array.isArray(e))return Array.isArray(n)&&e.length===n.length&&e.every((function(e,r){return t(e,n[r])}));if("object"==typeof e||"object"==typeof n){var r=p(e),i=p(n);return r!==e||i!==n?t(r,i):Object.keys(Object.assign({},e,n)).every((function(r){return t(e[r],n[r])}))}return!1};const m=function(t,e){if(!t)throw new Error("Invariant failed")};function v(t){return"/"===t.charAt(0)?t:"/"+t}function g(t){return"/"===t.charAt(0)?t.substr(1):t}function y(t,e){return function(t,e){return 0===t.toLowerCase().indexOf(e.toLowerCase())&&-1!=="/?#".indexOf(t.charAt(e.length))}(t,e)?t.substr(e.length):t}function b(t){return"/"===t.charAt(t.length-1)?t.slice(0,-1):t}function _(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function x(t,e,n,r){var i;"string"==typeof t?(i=function(t){var e=t||"/",n="",r="",i=e.indexOf("#");-1!==i&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return-1!==o&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:"?"===n?"":n,hash:"#"===r?"":r}}(t)).state=e:(void 0===(i=c({},t)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==e&&void 0===i.state&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(t){throw t instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):t}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(t,e){void 0===e&&(e="");var n,r=t&&t.split("/")||[],i=e&&e.split("/")||[],o=t&&h(t),a=e&&h(e),s=o||a;if(t&&h(t)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var l=0,c=i.length;c>=0;c--){var p=i[c];"."===p?f(i,c):".."===p?(f(i,c),l++):l&&(f(i,c),l--)}if(!s)for(;l--;l)i.unshift("..");!s||""===i[0]||i[0]&&h(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function w(){var t=null,e=[];return{setPrompt:function(e){return t=e,function(){t===e&&(t=null)}},confirmTransitionTo:function(e,n,r,i){if(null!=t){var o="function"==typeof t?t(e,n):t;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(t){var n=!0;function r(){n&&t.apply(void 0,arguments)}return e.push(r),function(){n=!1,e=e.filter((function(t){return t!==r}))}},notifyListeners:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];e.forEach((function(t){return t.apply(void 0,n)}))}}}var E=!("undefined"==typeof window||!window.document||!window.document.createElement);function S(t,e){e(window.confirm(t))}var T="hashchange",A={hashbang:{encodePath:function(t){return"!"===t.charAt(0)?t:"!/"+g(t)},decodePath:function(t){return"!"===t.charAt(0)?t.substr(1):t}},noslash:{encodePath:g,decodePath:v},slash:{encodePath:v,decodePath:v}};function M(t){var e=t.indexOf("#");return-1===e?t:t.slice(0,e)}function C(){var t=window.location.href,e=t.indexOf("#");return-1===e?"":t.substring(e+1)}function O(t){window.location.replace(M(window.location.href)+"#"+t)}function P(t){void 0===t&&(t={}),E||m(!1);var e=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),t),r=n.getUserConfirmation,i=void 0===r?S:r,o=n.hashType,a=void 0===o?"slash":o,s=t.basename?b(v(t.basename)):"",u=A[a],l=u.encodePath,h=u.decodePath;function f(){var t=h(C());return s&&(t=y(t,s)),x(t)}var p=w();function d(t){c(z,t),z.length=e.length,p.notifyListeners(z.location,z.action)}var g=!1,P=null;function k(){var t,e,n=C(),r=l(n);if(n!==r)O(r);else{var o=f(),a=z.location;if(!g&&(e=o,(t=a).pathname===e.pathname&&t.search===e.search&&t.hash===e.hash))return;if(P===_(o))return;P=null,function(t){if(g)g=!1,d();else{p.confirmTransitionTo(t,"POP",i,(function(e){e?d({action:"POP",location:t}):function(t){var e=z.location,n=D.lastIndexOf(_(e));-1===n&&(n=0);var r=D.lastIndexOf(_(t));-1===r&&(r=0);var i=n-r;i&&(g=!0,N(i))}(t)}))}}(o)}}var I=C(),L=l(I);I!==L&&O(L);var R=f(),D=[_(R)];function N(t){e.go(t)}var F=0;function j(t){1===(F+=t)&&1===t?window.addEventListener(T,k):0===F&&window.removeEventListener(T,k)}var U=!1,z={length:e.length,action:"POP",location:R,createHref:function(t){var e=document.querySelector("base"),n="";return e&&e.getAttribute("href")&&(n=M(window.location.href)),n+"#"+l(s+_(t))},push:function(t,e){var n="PUSH",r=x(t,void 0,void 0,z.location);p.confirmTransitionTo(r,n,i,(function(t){if(t){var e=_(r),i=l(s+e);if(C()!==i){P=e,function(t){window.location.hash=t}(i);var o=D.lastIndexOf(_(z.location)),a=D.slice(0,o+1);a.push(e),D=a,d({action:n,location:r})}else d()}}))},replace:function(t,e){var n="REPLACE",r=x(t,void 0,void 0,z.location);p.confirmTransitionTo(r,n,i,(function(t){if(t){var e=_(r),i=l(s+e);C()!==i&&(P=e,O(i));var o=D.indexOf(_(z.location));-1!==o&&(D[o]=e),d({action:n,location:r})}}))},go:N,goBack:function(){N(-1)},goForward:function(){N(1)},block:function(t){void 0===t&&(t=!1);var e=p.setPrompt(t);return U||(j(1),U=!0),function(){return U&&(U=!1,j(-1)),e()}},listen:function(t){var e=p.appendListener(t);return j(1),function(){j(-1),e()}}};return z}var k=1073741823,I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:{};function L(t){var e=[];return{on:function(t){e.push(t)},off:function(t){e=e.filter((function(e){return e!==t}))},get:function(){return t},set:function(n,r){t=n,e.forEach((function(e){return e(t,r)}))}}}const R=o.createContext||function(t,e){var n,r,i,a="__create-react-context-"+((I[i="__global_unique_id__"]=(I[i]||0)+1)+"__"),u=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).emitter=L(e.props.value),e}s(n,t);var r=n.prototype;return r.getChildContext=function(){var t;return(t={})[a]=this.emitter,t},r.componentWillReceiveProps=function(t){if(this.props.value!==t.value){var n,r=this.props.value,i=t.value;!function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}(r,i)?(n="function"==typeof e?e(r,i):k,0!=(n|=0)&&this.emitter.set(t.value,n)):n=0}},r.render=function(){return this.props.children},n}(o.Component);u.childContextTypes=((n={})[a]=l().object.isRequired,n);var c=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).state={value:t.getValue()},t.onUpdate=function(e,n){0!=((0|t.observedBits)&n)&&t.setState({value:t.getValue()})},t}s(n,e);var r=n.prototype;return r.componentWillReceiveProps=function(t){var e=t.observedBits;this.observedBits=null==e?k:e},r.componentDidMount=function(){this.context[a]&&this.context[a].on(this.onUpdate);var t=this.props.observedBits;this.observedBits=null==t?k:t},r.componentWillUnmount=function(){this.context[a]&&this.context[a].off(this.onUpdate)},r.getValue=function(){return this.context[a]?this.context[a].get():t},r.render=function(){return(t=this.props.children,Array.isArray(t)?t[0]:t)(this.state.value);var t},n}(o.Component);return c.contextTypes=((r={})[a]=l().object,r),{Provider:u,Consumer:c}};var D=n(4039),N=n.n(D),F=n(9185);function j(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}var U=n(5839),z=n.n(U),B=function(t){var e=R();return e.displayName="Router-History",e}(),V=function(t){var e=R();return e.displayName="Router",e}(),H=function(t){function e(e){var n;return(n=t.call(this,e)||this).state={location:e.history.location},n._isMounted=!1,n._pendingLocation=null,e.staticContext||(n.unlisten=e.history.listen((function(t){n._isMounted?n.setState({location:t}):n._pendingLocation=t}))),n}s(e,t),e.computeRootMatch=function(t){return{path:"/",url:"/",params:{},isExact:"/"===t}};var n=e.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return o.createElement(V.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},o.createElement(B.Provider,{children:this.props.children||null,value:this.props.history}))},e}(o.Component);o.Component;var G=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(t){this.props.onUpdate&&this.props.onUpdate.call(this,this,t)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(o.Component),W={},q=0;function X(t,e){return void 0===t&&(t="/"),void 0===e&&(e={}),"/"===t?t:function(t){if(W[t])return W[t];var e=N().compile(t);return q<1e4&&(W[t]=e,q++),e}(t)(e,{pretty:!0})}function Y(t){var e=t.computedMatch,n=t.to,r=t.push,i=void 0!==r&&r;return o.createElement(V.Consumer,null,(function(t){t||m(!1);var r=t.history,a=t.staticContext,s=i?r.push:r.replace,u=x(e?"string"==typeof n?X(n,e.params):c({},n,{pathname:X(n.pathname,e.params)}):n);return a?(s(u),null):o.createElement(G,{onMount:function(){s(u)},onUpdate:function(t,e){var n,r,i=x(e.to);n=i,r=c({},u,{key:i.key}),n.pathname===r.pathname&&n.search===r.search&&n.hash===r.hash&&n.key===r.key&&d(n.state,r.state)||s(u)},to:n})}))}var Q={},Z=0;function K(t,e){void 0===e&&(e={}),("string"==typeof e||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,l=void 0!==u&&u;return[].concat(r).reduce((function(e,n){if(!n&&""!==n)return null;if(e)return e;var r=function(t,e){var n=""+e.end+e.strict+e.sensitive,r=Q[n]||(Q[n]={});if(r[t])return r[t];var i=[],o={regexp:N()(t,i,e),keys:i};return Z<1e4&&(r[t]=o,Z++),o}(n,{end:o,strict:s,sensitive:l}),i=r.regexp,a=r.keys,u=i.exec(t);if(!u)return null;var c=u[0],h=u.slice(1),f=t===c;return o&&!f?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:f,params:a.reduce((function(t,e,n){return t[e.name]=h[n],t}),{})}}),null)}var $=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.render=function(){var t=this;return o.createElement(V.Consumer,null,(function(e){e||m(!1);var n=t.props.location||e.location,r=c({},e,{location:n,match:t.props.computedMatch?t.props.computedMatch:t.props.path?K(n.pathname,t.props):e.match}),i=t.props,a=i.children,s=i.component,u=i.render;return Array.isArray(a)&&0===a.length&&(a=null),o.createElement(V.Provider,{value:r},r.match?a?"function"==typeof a?a(r):a:s?o.createElement(s,r):u?u(r):null:"function"==typeof a?a(r):null)}))},e}(o.Component);o.Component;var J=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e.prototype.render=function(){var t=this;return o.createElement(V.Consumer,null,(function(e){e||m(!1);var n,r,i=t.props.location||e.location;return o.Children.forEach(t.props.children,(function(t){if(null==r&&o.isValidElement(t)){n=t;var a=t.props.path||t.props.from;r=a?K(i.pathname,c({},t.props,{path:a})):e.match}})),r?o.cloneElement(n,{location:i,computedMatch:r}):null}))},e}(o.Component);function tt(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(e){var n=e.wrappedComponentRef,r=j(e,["wrappedComponentRef"]);return o.createElement(V.Consumer,null,(function(e){return e||m(!1),o.createElement(t,c({},r,e,{ref:n}))}))};return n.displayName=e,n.WrappedComponent=t,z()(n,t)}o.useContext,o.Component;var et=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).history=P(e.props),e}return s(e,t),e.prototype.render=function(){return o.createElement(H,{history:this.history,children:this.props.children})},e}(o.Component),nt=function(t,e){return"function"==typeof t?t(e):t},rt=function(t,e){return"string"==typeof t?x(t,null,null,e):t},it=function(t){return t},ot=o.forwardRef;void 0===ot&&(ot=it);var at=ot((function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,a=j(t,["innerRef","navigate","onClick"]),s=a.target,u=c({},a,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||s&&"_self"!==s||function(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}(t)||(t.preventDefault(),r())}});return u.ref=it!==ot&&e||n,o.createElement("a",u)})),st=ot((function(t,e){var n=t.component,r=void 0===n?at:n,i=t.replace,a=t.to,s=t.innerRef,u=j(t,["component","replace","to","innerRef"]);return o.createElement(V.Consumer,null,(function(t){t||m(!1);var n=t.history,l=rt(nt(a,t.location),t.location),h=l?n.createHref(l):"",f=c({},u,{href:h,navigate:function(){var e=nt(a,t.location);(i?n.replace:n.push)(e)}});return it!==ot?f.ref=e||s:f.innerRef=s,o.createElement(r,f)}))})),ut=function(t){return t},lt=o.forwardRef;void 0===lt&&(lt=ut),lt((function(t,e){var n=t["aria-current"],r=void 0===n?"page":n,i=t.activeClassName,a=void 0===i?"active":i,s=t.activeStyle,u=t.className,l=t.exact,h=t.isActive,f=t.location,p=t.sensitive,d=t.strict,v=t.style,g=t.to,y=t.innerRef,b=j(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return o.createElement(V.Consumer,null,(function(t){t||m(!1);var n=f||t.location,i=rt(nt(g,n),n),_=i.pathname,x=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),w=x?K(n.pathname,{path:x,exact:l,sensitive:p,strict:d}):null,E=!!(h?h(w,n):w),S=E?function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((function(t){return t})).join(" ")}(u,a):u,T=E?c({},v,{},s):v,A=c({"aria-current":E&&r||null,className:S,style:T,to:i},b);return ut!==lt?A.ref=e||y:A.innerRef=y,o.createElement(st,A)}))}));var ct=o.createContext(null),ht=function(t){t()},ft=function(){return ht},pt={notify:function(){}},dt=function(){function t(t,e){this.store=t,this.parentSub=e,this.unsubscribe=null,this.listeners=pt,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var e=t.prototype;return e.addNestedSub=function(t){return this.trySubscribe(),this.listeners.subscribe(t)},e.notifyNestedSubs=function(){this.listeners.notify()},e.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},e.isSubscribed=function(){return Boolean(this.unsubscribe)},e.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=function(){var t=ft(),e=null,n=null;return{clear:function(){e=null,n=null},notify:function(){t((function(){for(var t=e;t;)t.callback(),t=t.next}))},get:function(){for(var t=[],n=e;n;)t.push(n),n=n.next;return t},subscribe:function(t){var r=!0,i=n={callback:t,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())},e.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=pt)},t}();const mt=function(t){var e=t.store,n=t.context,r=t.children,i=(0,o.useMemo)((function(){var t=new dt(e);return t.onStateChange=t.notifyNestedSubs,{store:e,subscription:t}}),[e]),a=(0,o.useMemo)((function(){return e.getState()}),[e]);(0,o.useEffect)((function(){var t=i.subscription;return t.trySubscribe(),a!==e.getState()&&t.notifyNestedSubs(),function(){t.tryUnsubscribe(),t.onStateChange=null}}),[i,a]);var s=n||ct;return o.createElement(s.Provider,{value:i},r)};var vt="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?o.useLayoutEffect:o.useEffect,gt=[],yt=[null,null];function bt(t,e){var n=t[1];return[e.payload,n+1]}function _t(t,e,n){vt((function(){return t.apply(void 0,e)}),n)}function xt(t,e,n,r,i,o,a){t.current=r,e.current=i,n.current=!1,o.current&&(o.current=null,a())}function wt(t,e,n,r,i,o,a,s,u,l){if(t){var c=!1,h=null,f=function(){if(!c){var t,n,f=e.getState();try{t=r(f,i.current)}catch(t){n=t,h=t}n||(h=null),t===o.current?a.current||u():(o.current=t,s.current=t,a.current=!0,l({type:"STORE_UPDATED",payload:{error:n}}))}};return n.onStateChange=f,n.trySubscribe(),f(),function(){if(c=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}}var Et=function(){return[null,0]};function St(t,e){void 0===e&&(e={});var n=e,r=n.getDisplayName,i=void 0===r?function(t){return"ConnectAdvanced("+t+")"}:r,a=n.methodName,s=void 0===a?"connectAdvanced":a,u=n.renderCountProp,l=void 0===u?void 0:u,h=n.shouldHandleStateChanges,f=void 0===h||h,p=n.storeKey,d=void 0===p?"store":p,m=(n.withRef,n.forwardRef),v=void 0!==m&&m,g=n.context,y=void 0===g?ct:g,b=j(n,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]),_=y;return function(e){var n=e.displayName||e.name||"Component",r=i(n),a=c({},b,{getDisplayName:i,methodName:s,renderCountProp:l,shouldHandleStateChanges:f,storeKey:d,displayName:r,wrappedComponentName:n,WrappedComponent:e}),u=b.pure,h=u?o.useMemo:function(t){return t()};function p(n){var r=(0,o.useMemo)((function(){var t=n.reactReduxForwardedRef,e=j(n,["reactReduxForwardedRef"]);return[n.context,t,e]}),[n]),i=r[0],s=r[1],u=r[2],l=(0,o.useMemo)((function(){return i&&i.Consumer&&(0,F.isContextConsumer)(o.createElement(i.Consumer,null))?i:_}),[i,_]),p=(0,o.useContext)(l),d=Boolean(n.store)&&Boolean(n.store.getState)&&Boolean(n.store.dispatch);Boolean(p)&&Boolean(p.store);var m=d?n.store:p.store,v=(0,o.useMemo)((function(){return function(e){return t(e.dispatch,a)}(m)}),[m]),g=(0,o.useMemo)((function(){if(!f)return yt;var t=new dt(m,d?null:p.subscription),e=t.notifyNestedSubs.bind(t);return[t,e]}),[m,d,p]),y=g[0],b=g[1],x=(0,o.useMemo)((function(){return d?p:c({},p,{subscription:y})}),[d,p,y]),w=(0,o.useReducer)(bt,gt,Et),E=w[0][0],S=w[1];if(E&&E.error)throw E.error;var T=(0,o.useRef)(),A=(0,o.useRef)(u),M=(0,o.useRef)(),C=(0,o.useRef)(!1),O=h((function(){return M.current&&u===A.current?M.current:v(m.getState(),u)}),[m,E,u]);_t(xt,[A,T,C,u,O,M,b]),_t(wt,[f,m,y,v,A,T,C,M,b,S],[m,y,v]);var P=(0,o.useMemo)((function(){return o.createElement(e,c({},O,{ref:s}))}),[s,e,O]);return(0,o.useMemo)((function(){return f?o.createElement(l.Provider,{value:x},P):P}),[l,P,x])}var m=u?o.memo(p):p;if(m.WrappedComponent=e,m.displayName=r,v){var g=o.forwardRef((function(t,e){return o.createElement(m,c({},t,{reactReduxForwardedRef:e}))}));return g.displayName=r,g.WrappedComponent=e,z()(g,e)}return z()(m,e)}}function Tt(t,e){return t===e?0!==t||0!==e||1/t==1/e:t!=t&&e!=e}function At(t,e){if(Tt(t,e))return!0;if("object"!=typeof t||null===t||"object"!=typeof e||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!Tt(t[n[i]],e[n[i]]))return!1;return!0}var Mt=n(5081),Ct=function(){return Math.random().toString(36).substring(7).split("").join(".")},Ot={INIT:"@@redux/INIT"+Ct(),REPLACE:"@@redux/REPLACE"+Ct(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ct()}};function Pt(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function kt(t,e){var n=e&&e.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+t+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function It(t,e){return function(){return e(t.apply(this,arguments))}}function Lt(t){return function(e,n){var r=t(e,n);function i(){return r}return i.dependsOnOwnProps=!1,i}}function Rt(t){return null!==t.dependsOnOwnProps&&void 0!==t.dependsOnOwnProps?Boolean(t.dependsOnOwnProps):1!==t.length}function Dt(t,e){return function(e,n){n.displayName;var r=function(t,e){return r.dependsOnOwnProps?r.mapToProps(t,e):r.mapToProps(t)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,n){r.mapToProps=t,r.dependsOnOwnProps=Rt(t);var i=r(e,n);return"function"==typeof i&&(r.mapToProps=i,r.dependsOnOwnProps=Rt(i),i=r(e,n)),i},r}}const Nt=[function(t){return"function"==typeof t?Dt(t):void 0},function(t){return t?void 0:Lt((function(t){return{dispatch:t}}))},function(t){return t&&"object"==typeof t?Lt((function(e){return function(t,e){if("function"==typeof t)return It(t,e);if("object"!=typeof t||null===t)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===t?"null":typeof t)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in t){var i=t[r];"function"==typeof i&&(n[r]=It(i,e))}return n}(t,e)})):void 0}],Ft=[function(t){return"function"==typeof t?Dt(t):void 0},function(t){return t?void 0:Lt((function(){return{}}))}];function jt(t,e,n){return c({},n,t,e)}const Ut=[function(t){return"function"==typeof t?function(t){return function(e,n){n.displayName;var r,i=n.pure,o=n.areMergedPropsEqual,a=!1;return function(e,n,s){var u=t(e,n,s);return a?i&&o(u,r)||(r=u):(a=!0,r=u),r}}}(t):void 0},function(t){return t?void 0:function(){return jt}}];function zt(t,e,n,r){return function(i,o){return n(t(i,o),e(r,o),o)}}function Bt(t,e,n,r,i){var o,a,s,u,l,c=i.areStatesEqual,h=i.areOwnPropsEqual,f=i.areStatePropsEqual,p=!1;return function(i,d){return p?function(i,p){var d,m,v=!h(p,a),g=!c(i,o);return o=i,a=p,v&&g?(s=t(o,a),e.dependsOnOwnProps&&(u=e(r,a)),l=n(s,u,a)):v?(t.dependsOnOwnProps&&(s=t(o,a)),e.dependsOnOwnProps&&(u=e(r,a)),l=n(s,u,a)):g?(d=t(o,a),m=!f(d,s),s=d,m&&(l=n(s,u,a)),l):l}(i,d):(s=t(o=i,a=d),u=e(r,a),l=n(s,u,a),p=!0,l)}}function Vt(t,e){var n=e.initMapStateToProps,r=e.initMapDispatchToProps,i=e.initMergeProps,o=j(e,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(t,o),s=r(t,o),u=i(t,o);return(o.pure?Bt:zt)(a,s,u,t,o)}function Ht(t,e,n){for(var r=e.length-1;r>=0;r--){var i=e[r](t);if(i)return i}return function(e,r){throw new Error("Invalid value of type "+typeof t+" for "+n+" argument when connecting component "+r.wrappedComponentName+".")}}function Gt(t,e){return t===e}function Wt(t){var e=void 0===t?{}:t,n=e.connectHOC,r=void 0===n?St:n,i=e.mapStateToPropsFactories,o=void 0===i?Ft:i,a=e.mapDispatchToPropsFactories,s=void 0===a?Nt:a,u=e.mergePropsFactories,l=void 0===u?Ut:u,h=e.selectorFactory,f=void 0===h?Vt:h;return function(t,e,n,i){void 0===i&&(i={});var a=i,u=a.pure,h=void 0===u||u,p=a.areStatesEqual,d=void 0===p?Gt:p,m=a.areOwnPropsEqual,v=void 0===m?At:m,g=a.areStatePropsEqual,y=void 0===g?At:g,b=a.areMergedPropsEqual,_=void 0===b?At:b,x=j(a,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),w=Ht(t,o,"mapStateToProps"),E=Ht(e,s,"mapDispatchToProps"),S=Ht(n,l,"mergeProps");return r(f,c({methodName:"connect",getDisplayName:function(t){return"Connect("+t+")"},shouldHandleStateChanges:Boolean(t),initMapStateToProps:w,initMapDispatchToProps:E,initMergeProps:S,pure:h,areStatesEqual:d,areOwnPropsEqual:v,areStatePropsEqual:y,areMergedPropsEqual:_},x))}}const qt=Wt();var Xt;Xt=a.unstable_batchedUpdates,ht=Xt;var Yt=n(4412),Qt={off:new Yt.Color(.9,.9,.9),on:new Yt.Color(.2,.3,.8),accent:new Yt.Color(13399799),active:new Yt.Color(.8,.3,.4),neutral:new Yt.Color(11252415)},Zt={AXIS:new Yt.Vector3(0,1,0),ANGLE:Math.PI/2},Kt={Color:{Selected:Qt.off,Deselected:Qt.on},Mark:{Length:.2,Color:Qt.on},Instrument:{LabelWidth:"100px",LabelColor:Qt.on},Line:{MinThickness:.01,MaxThickness:.05},DefaultStepsAmount:16,Padding:.5},$t={Geometry:{EdgeColor:Qt.on,FillColor:Qt.on,EdgeLength:.2,MinScale:1,MaxScale:1.5},Note:{TextSize:"16px",TextColor:"#fff"}},Jt={DashedOutline:{Color:Qt.neutral,Padding:1},Tempo:{Color:"#cc76f7"},Padding:{Interior:1}},te=1,ee=32,ne=.5,re=.5,ie=4,oe={addLayer:[.3,16,16],Contributor:[.3,32,32],xPadding:1,yPadding:1};n(8784);var ae=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"==t?e:3&e|8).toString(16)}))};function se(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ue(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?se(Object(n),!0).forEach((function(e){le(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function le(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ce=function(){return{isOn:!1,id:ae(),probability:1,velocity:1,note:"C4"}},he=function(t,e){return{id:ae(),creator:t||null,name:"",isActive:!0,instrument:ue({noteLength:"64n",gain:.2,instrument:"Sampler",sampler:"BassDrum",sample:"bdLong04"},e),steps:Array(Kt.DefaultStepsAmount).fill(null).map((function(){return ce()}))}},fe=function(t){return{user:t||null,id:ae(),bpm:120,name:"Default Round",layers:[he(t,{instrument:"Sampler",sampler:"BassDrum",sample:"bdLong04"}),he(t,{instrument:"Sampler",sampler:"SnareDrum",sample:"sd03"}),he(t,{instrument:"Sampler",sampler:"HitHatOpen",sample:"oh03"})]}};function pe(t){return function(t){if(Array.isArray(t))return de(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return de(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var me=function(){return"#"+Math.floor(16777215*Math.random()).toString(16)},ve=function(t,e){var n=t.steps.length,r=e-n;if(r<0){var i=pe(t.steps);return e<te?i.splice(te,t.steps.length-1):i.splice(r,9e9),i}if(r>0){var o;return o=e>ee?Array(ee-n).fill(0).map((function(t){return ce()})):Array(r).fill(0).map((function(t){return ce()})),[].concat(pe(t.steps),pe(o))}},ge="RESET_ROUNDS_STORE",ye="RESET_ROUND_STORE",be="RESET_RAYCASTER_STORE",_e="RESET_LOADER_STORE",xe="RESET_EDITING_MODE_STORE",we="RESET_EDIT_ALL_LAYERS_STORE",Ee="RESET_CAMERA_STORE",Se="RESET_COLLABORATION_STORE",Te="TOGGLE_LOADER",Ae="TOGGLE_RAYCASTER",Me="SET_CAMERA",Ce="SET_EDITING_MODE",Oe="SET_EDIT_ALL_LAYERS",Pe="SET_ROUNDS",ke="ADD_ROUND",Ie="REMOVE_ROUND",Le="UPDATE_ROUND",Re="SET_ROUND_DATA",De="TOGGLE_STEP",Ne="SET_STEP_VELOCITY",Fe="SET_STEP_PROBABILITY",je="SET_STEP_NOTE",Ue="TOGGLE_LAYER",ze="SET_LAYER_NAME",Be="UPDATE_LAYER_INSTRUMENT",Ve="ADD_LAYER_STEP",He="REMOVE_LAYER_STEP",Ge="SET_LAYER_STEPS",We="ADD_ROUND_LAYER",qe="ADD_ROUND_LAYERS",Xe="REMOVE_ROUND_LAYER",Ye="SET_ROUND_NAME",Qe="SET_ROUND_BPM",Ze="SET_ROUND_ID",Ke="SET_USER",$e="CLEAR_USER",Je="SET_COLLABORATION",tn="SET_CONTRIBUTORS_POSITIONS",en="SET_LAYERS_POSITIONS",nn="SET_STEPS_POSITIONS",rn="SET_LAYER_CONTROLS_POSITION",on="SET_ROUND_INFO_POSIT",an=function(){return{type:be}},sn=function(){return{type:_e}},un=function(){return{type:xe}},ln=function(){return{type:Ee}},cn=function(t){return{type:Te,payload:{active:t}}},hn=function(t){return{type:Ae,payload:{active:t}}},fn=function(t){return{type:Re,payload:{data:t}}},pn=function(t,e,n){return{type:Ge,payload:{layerIndex:t,steps:e,user:n}}},dn=function(t,e,n){return{type:Be,payload:{layerIndex:t,instrument:e,user:n}}},mn=function(t,e){return{type:We,payload:{layer:t,user:e}}},vn=function(t,e){return{type:Xe,payload:{layerIndex:t,user:e}}},gn=function(t){return{type:Ke,payload:{user:t}}},yn=n(5528),bn=n.n(yn);function _n(t){return(_n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xn(){return(xn=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function wn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function En(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Sn(t,e){return(Sn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Tn(t,e){return!e||"object"!==_n(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n(6874);const Mn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Sn(t,e)}(s,t);var e,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=An(r);if(i){var n=An(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return Tn(this,t)});function s(){return wn(this,s),a.apply(this,arguments)}return e=s,(n=[{key:"render",value:function(){var t=this,e=this.props,n=e.component,r=function(t,e){if(null==t)return{};var n,r,i=function(t,e){if(null==t)return{};var n,r,i={},o=Object.keys(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||(i[n]=t[n]);return i}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(r=0;r<o.length;r++)n=o[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}(e,["component"]);return o.createElement($,xn({},r,{render:function(e){return t.props.authenticated?o.createElement(n,t.props):o.createElement(Y,{to:"/login"})}}))}}])&&En(e.prototype,n),s}(o.Component),Cn="14.7.58";var On=n(6278);const Pn=new WeakSet,kn=new WeakMap,In=new WeakMap,Ln=new WeakMap,Rn=new WeakMap,Dn=new WeakMap,Nn=new WeakMap,Fn=new WeakMap,jn=new WeakMap,Un=new WeakMap,zn={construct:()=>zn},Bn=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,Vn=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(Bn);for(;null!==i;){const t=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(t,new URL(t,e).toString());n.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(Bn)}return[n.join(";"),r]},Hn=t=>{if(void 0!==t&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},Gn=t=>{if(!(t=>{try{new new Proxy(t,zn)}catch{return!1}return!0})(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===t.prototype||"object"!=typeof t.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Wn=(t,e)=>{const n=t.get(e);if(void 0===n)throw new Error("A value with the given key could not be found.");return n},qn=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(0===n.length)throw Error("No element was found.");const[r]=n;return t.delete(r),r},Xn=(t,e,n,r)=>{const i=Wn(t,e),o=qn(i,(t=>t[0]===n&&t[1]===r));return 0===i.size&&t.delete(e),o},Yn=t=>Wn(Nn,t),Qn=t=>{if(Pn.has(t))throw new Error("The AudioNode is already stored.");Pn.add(t),Yn(t).forEach((t=>t(!0)))},Zn=t=>"port"in t,Kn=t=>{if(!Pn.has(t))throw new Error("The AudioNode is not stored.");Pn.delete(t),Yn(t).forEach((t=>t(!1)))},$n=(t,e)=>{!Zn(t)&&e.every((t=>0===t.size))&&Kn(t)},Jn={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},tr=(t,e)=>t.context===e,er=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},nr=()=>new DOMException("","IndexSizeError"),rr=t=>{var e;t.getChannelData=(e=t.getChannelData,n=>{try{return e.call(t,n)}catch(t){if(12===t.code)throw nr();throw t}})},ir={numberOfChannels:1},or=-34028234663852886e22,ar=-or,sr=t=>Pn.has(t),ur={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},lr=t=>Wn(kn,t),cr=t=>Wn(Ln,t),hr=(t,e)=>{const{activeInputs:n}=lr(t);n.forEach((n=>n.forEach((([n])=>{e.includes(t)||hr(n,[...e,t])}))));const r=(t=>"playbackRate"in t)(t)?[t.playbackRate]:Zn(t)?Array.from(t.parameters.values()):(t=>"frequency"in t&&"gain"in t)(t)?[t.Q,t.detune,t.frequency,t.gain]:(t=>"offset"in t)(t)?[t.offset]:(t=>!("frequency"in t)&&"gain"in t)(t)?[t.gain]:(t=>"detune"in t&&"frequency"in t)(t)?[t.detune,t.frequency]:(t=>"pan"in t)(t)?[t.pan]:[];for(const t of r){const n=cr(t);void 0!==n&&n.activeInputs.forEach((([t])=>hr(t,e)))}sr(t)&&Kn(t)},fr=t=>{hr(t.destination,[])},pr=t=>"context"in t,dr=t=>pr(t[0]),mr=(t,e,n,r)=>{for(const e of t)if(n(e)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},vr=(t,e,[n,r],i)=>{mr(t,[e,n,r],(t=>t[0]===e&&t[1]===n),i)},gr=(t,[e,n,r],i)=>{const o=t.get(e);void 0===o?t.set(e,new Set([[n,r]])):mr(o,[n,r],(t=>t[0]===n),i)},yr=t=>"inputs"in t,br=(t,e,n,r)=>{if(yr(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},_r=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},xr=(t,e)=>{if(!Yn(t).delete(e))throw new Error("Missing the expected event listener.")},wr=(t,e,n)=>{const r=Wn(t,e),i=qn(r,(t=>t[0]===n));return 0===r.size&&t.delete(e),i},Er=(t,e,n,r)=>{yr(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Sr=t=>Wn(In,t),Tr=t=>Wn(Rn,t),Ar=t=>Fn.has(t),Mr=t=>!Pn.has(t),Cr=t=>new Promise((e=>{const n=t.createScriptProcessor(256,1,1),r=t.createGain(),i=t.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=i,a.loop=!0,a.connect(n).connect(t.destination),a.connect(r),a.disconnect(r),n.onaudioprocess=r=>{const i=r.inputBuffer.getChannelData(0);Array.prototype.some.call(i,(t=>1===t))?e(!0):e(!1),a.stop(),n.onaudioprocess=null,a.disconnect(n),n.disconnect(t.destination)},a.start()})),Or=(t,e)=>{const n=new Map;for(const e of t)for(const t of e){const e=n.get(t);n.set(t,void 0===e?1:e+1)}n.forEach(((t,n)=>e(n,t)))},Pr=t=>"context"in t,kr=t=>{const e=new Map;t.connect=(t=>(n,r=0,i=0)=>{const o=Pr(n)?t(n,r,i):t(n,r),a=e.get(n);return void 0===a?e.set(n,[{input:i,output:r}]):a.every((t=>t.input!==i||t.output!==r))&&a.push({input:i,output:r}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),void 0===r)e.clear();else if("number"==typeof r)for(const[t,n]of e){const i=n.filter((t=>t.output!==r));0===i.length?e.delete(t):e.set(t,i)}else if(e.has(r))if(void 0===i)e.delete(r);else{const t=e.get(r);if(void 0!==t){const n=t.filter((t=>t.output!==i&&(t.input!==o||void 0===o)));0===n.length?e.delete(r):e.set(r,n)}}for(const[n,r]of e)r.forEach((e=>{Pr(n)?t.connect(n,e.output,e.input):t.connect(n,e.output)}))})(t.disconnect)},Ir=(t,e,n,r,i)=>{const[o,a]=((t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=lr(e),a=_r(i[r],t,n);return null===a?[Xn(o,t,n,r)[2],!1]:[a[2],!0]})(t,n,r,i);if(null!==o&&(xr(t,o),!a||e||Ar(t)||Er(Sr(t),Sr(n),r,i)),sr(n)){const{activeInputs:t}=lr(n);$n(n,t)}},Lr=(t,e,n,r)=>{const[i,o]=((t,e,n)=>{const{activeInputs:r,passiveInputs:i}=cr(e),o=_r(r,t,n);return null===o?[wr(i,t,n)[1],!1]:[o[2],!0]})(t,n,r);null!==i&&(xr(t,i),!o||e||Ar(t)||Sr(t).disconnect(Tr(n),r))};class Rr{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,e=null){return this._map.forEach(((n,r)=>t.call(e,n,r,this)))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const Dr={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function Nr(t,e,n,r,i){if("function"==typeof t.copyFromChannel)0===e[n].byteLength&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(0===e[n].byteLength)e[n]=o.slice(i,i+128);else{const t=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(t)}}}const Fr=(t,e,n,r,i)=>{"function"==typeof t.copyToChannel?0!==e[n].byteLength&&t.copyToChannel(e[n],r,i):0!==e[n].byteLength&&t.getChannelData(r).set(e[n],i)},jr=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const t=[],i="number"==typeof e?e:e[r];for(let e=0;e<i;e+=1)t.push(new Float32Array(128));n.push(t)}return n},Ur=async(t,e,n,r,i,o,a)=>{const s=null===e?128*Math.ceil(t.context.length/128):e.length,u=r.channelCount*r.numberOfInputs,l=i.reduce(((t,e)=>t+e),0),c=0===l?null:n.createBuffer(l,s,n.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const h=lr(t),f=await((t,e)=>{const n=Wn(Un,t),r=Sr(e);return Wn(n,r)})(n,t),p=jr(r.numberOfInputs,r.channelCount),d=jr(r.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce(((t,e)=>({...t,[e]:new Float32Array(128)})),{});for(let l=0;l<s;l+=128){if(r.numberOfInputs>0&&null!==e)for(let t=0;t<r.numberOfInputs;t+=1)for(let n=0;n<r.channelCount;n+=1)Nr(e,p[t],n,n,l);void 0!==o.parameterDescriptors&&null!==e&&o.parameterDescriptors.forEach((({name:t},n)=>{Nr(e,m,t,u+n,l)}));for(let t=0;t<r.numberOfInputs;t+=1)for(let e=0;e<i[t];e+=1)0===d[t][e].byteLength&&(d[t][e]=new Float32Array(128));try{const t=p.map(((t,e)=>0===h.activeInputs[e].size?[]:t)),e=a(l/n.sampleRate,n.sampleRate,(()=>f.process(t,d,m)));if(null!==c)for(let t=0,e=0;t<r.numberOfOutputs;t+=1){for(let n=0;n<i[t];n+=1)Fr(c,d[t],n,e+n,l);e+=i[t]}if(!e)break}catch(e){t.dispatchEvent(new ErrorEvent("processorerror",{colno:e.colno,filename:e.filename,lineno:e.lineno,message:e.message}));break}}return c},zr={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},Br={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},Vr={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},Hr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},Gr={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},Wr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},qr=(t,e,n)=>{const r=e[n];if(void 0===r)throw t();return r},Xr={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},Yr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Qr=()=>new DOMException("","InvalidStateError"),Zr=()=>new DOMException("","InvalidAccessError"),Kr={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},$r=(t,e,n,r,i,o,a,s,u,l,c)=>{const h=l.length;let f=s;for(let s=0;s<h;s+=1){let h=n[0]*l[s];for(let e=1;e<i;e+=1){const r=f-e&u-1;h+=n[e]*o[r],h-=t[e]*a[r]}for(let t=i;t<r;t+=1)h+=n[t]*o[f-t&u-1];for(let n=i;n<e;n+=1)h-=t[n]*a[f-n&u-1];o[f]=l[s],a[f]=h,f=f+1&u-1,c[s]=h}return f},Jr={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ti=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,(()=>{}));return void 0!==n&&(n.catch((()=>{})),!0)}catch{}return!1},ei=(t,e,n)=>{const r=e[n];void 0!==r&&r!==t[n]&&(t[n]=r)},ni=(t,e)=>{ei(t,e,"channelCount"),ei(t,e,"channelCountMode"),ei(t,e,"channelInterpretation")},ri=t=>"function"==typeof t.getFloatTimeDomainData,ii=(t,e,n)=>{const r=e[n];void 0!==r&&r!==t[n].value&&(t[n].value=r)},oi=t=>{t.start=(e=>(n=0,r=0,i)=>{if("number"==typeof i&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},ai=t=>{var e;t.stop=(e=t.stop,(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})},si=(t,e)=>null===t?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),ui=(t,e)=>{const n=t.createBiquadFilter();return ni(n,e),ii(n,e,"Q"),ii(n,e,"detune"),ii(n,e,"frequency"),ii(n,e,"gain"),ei(n,e,"type"),n},li=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return ni(n,e),(t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Qr()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Qr()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Qr()}})})(n),n},ci=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),hi=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return ni(n,e),ii(n,e,"delayTime"),n},fi=(t,e)=>{const n=t.createGain();return ni(n,e),ii(n,e,"gain"),n};function pi(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function di(t,e){let n=[0,0];for(let o=t.length-1;o>=0;o-=1)i=e,n=[(r=n)[0]*i[0]-r[1]*i[1],r[0]*i[1]+r[1]*i[0]],n[0]+=t[o];var r,i;return n}const mi=(t,e,n,r)=>t.createScriptProcessor(e,n,r),vi=()=>new DOMException("","NotSupportedError"),gi={numberOfChannels:1},yi={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},bi={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},_i={disableNormalization:!1},xi={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},wi=()=>new DOMException("","UnknownError"),Ei={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Si=t=>{if(null===t)return!1;const e=t.length;return e%2!=0?0!==t[Math.floor(e/2)]:t[e/2-1]+t[e/2]!==0},Ti=(t,e,n,r)=>{let i=Object.getPrototypeOf(t);for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:a}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(a)})},Ai=t=>{const e=t.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},Mi=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Ci=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},Oi=()=>{try{new DOMException}catch{return!1}return!0},Pi=()=>new Promise((t=>{const e=new ArrayBuffer(0),{port1:n,port2:r}=new MessageChannel;n.onmessage=({data:e})=>t(null!==e),r.postMessage(e,[e])})),ki=(t,e)=>{const n=e.createGain();t.connect(n);const r=(e=>()=>{e.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),ci(t,n),t.stop=(e=>{let r=!1;return(i=0)=>{if(r)try{e.call(t,i)}catch{n.gain.setValueAtTime(0,i)}else e.call(t,i),r=!0}})(t.stop)},Ii=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),"function"==typeof e?e.call(t,n):e.handleEvent.call(t,n)},Li=(t=>(e,n,[r,i,o],a)=>{t(e[i],[n,r,o],(t=>t[0]===n&&t[1]===r),a)})(mr),Ri=(t=>(e,n,[r,i,o],a)=>{const s=e.get(r);void 0===s?e.set(r,new Set([[i,n,o]])):t(s,[i,n,o],(t=>t[0]===i&&t[1]===n),a)})(mr),Di=(t=>(e,n,r,i)=>t(e[i],(t=>t[0]===n&&t[1]===r)))(qn),Ni=new WeakMap,Fi=(t=>e=>{var n;return null!==(n=t.get(e))&&void 0!==n?n:0})(Ni),ji=(Ui=new Map,zi=new WeakMap,(t,e)=>{const n=zi.get(t);if(void 0!==n)return n;const r=Ui.get(t);if(void 0!==r)return r;try{const n=e();return n instanceof Promise?(Ui.set(t,n),n.catch((()=>!1)).then((e=>(Ui.delete(t),zi.set(t,e),e)))):(zi.set(t,n),n)}catch{return zi.set(t,!1),!1}});var Ui,zi;const Bi="undefined"==typeof window?null:window,Vi=((t,e)=>(n,r)=>{const i=n.createAnalyser();if(ni(i,r),!(r.maxDecibels>r.minDecibels))throw e();return ei(i,r,"fftSize"),ei(i,r,"maxDecibels"),ei(i,r,"minDecibels"),ei(i,r,"smoothingTimeConstant"),t(ri,(()=>ri(i)))||(t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let t=0;t<r;t+=1)e[t]=.0078125*(n[t]-128);return e}})(i),i})(ji,nr),Hi=(t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer})(lr),Gi=((t,e,n)=>async(r,i,o,a)=>{const s=t(r),u=[...a,r];await Promise.all(s.activeInputs.map(((t,a)=>Array.from(t).filter((([t])=>!u.includes(t))).map((async([t,s])=>{const l=e(t),c=await l.render(t,i,u),h=r.context.destination;n(t)||r===h&&n(r)||c.connect(o,s,a)})))).reduce(((t,e)=>[...t,...e]),[]))})(lr,Hi,Ar),Wi=((t,e,n)=>()=>{const r=new WeakMap;return{render(i,o,a){const s=r.get(o);return void 0!==s?Promise.resolve(s):(async(i,o,a)=>{let s=e(i);if(!tr(s,o)){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,fftSize:s.fftSize,maxDecibels:s.maxDecibels,minDecibels:s.minDecibels,smoothingTimeConstant:s.smoothingTimeConstant};s=t(o,e)}return r.set(o,s),await n(i,o,s,a),s})(i,o,a)}}})(Vi,Sr,Gi),qi=(Xi=Dn,t=>{const e=Xi.get(t);if(void 0===e)throw Qr();return e});var Xi;const Yi=(t=>null===t?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null)(Bi),Qi=(t=>e=>null!==t&&e instanceof t)(Yi),Zi=new WeakMap,Ki=(t=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(e,n,r){if(null!==n){let i=this._listeners.get(n);void 0===i&&(i=t(this,n),"function"==typeof n&&this._listeners.set(n,i)),this._nativeEventTarget.addEventListener(e,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,e,n){const r=null===e?void 0:this._listeners.get(e);this._nativeEventTarget.removeEventListener(t,void 0===r?null:r,n)}})(Ii),$i=(t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null)(Bi),Ji=(t=>e=>null!==t&&e instanceof t)($i),to=(t=>e=>null!==t&&"function"==typeof t.AudioNode&&e instanceof t.AudioNode)(Bi),eo=(t=>e=>null!==t&&"function"==typeof t.AudioParam&&e instanceof t.AudioParam)(Bi),no=((t,e,n,r,i,o,a,s,u,l,c,h,f,p,d)=>class extends l{constructor(e,r,i,o){super(i),this._context=e,this._nativeAudioNode=i;const a=c(e);h(a)&&!0!==n(Cr,(()=>Cr(a)))&&kr(i),In.set(this,i),Nn.set(this,new Set),"closed"!==e.state&&r&&Qn(this),t(this,o,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(t){this._nativeAudioNode.channelCount=t}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(t){this._nativeAudioNode.channelCountMode=t}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(t){this._nativeAudioNode.channelInterpretation=t}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(t,n=0,s=0){if(n<0||n>=this._nativeAudioNode.numberOfOutputs)throw i();const l=c(this._context),h=d(l);if(f(t)||p(t))throw o();if(pr(t)){const i=Sr(t);try{const e=br(this._nativeAudioNode,i,n,s),r=Mr(this);(h||r)&&this._nativeAudioNode.disconnect(...e),"closed"!==this.context.state&&!r&&Mr(t)&&Qn(t)}catch(t){if(12===t.code)throw o();throw t}if(e(this,t,n,s,h)){const e=u([this],t);Or(e,r(h))}return t}const m=Tr(t);if("playbackRate"===m.name)throw a();try{this._nativeAudioNode.connect(m,n),(h||Mr(this))&&this._nativeAudioNode.disconnect(m,n)}catch(t){if(12===t.code)throw o();throw t}if(((t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=cr(e),{outputs:a}=lr(t),s=Yn(t),u=a=>{const s=Sr(t),u=Tr(e);if(a){const e=wr(o,t,n);vr(i,t,e,!1),r||Ar(t)||s.connect(u,n)}else{const e=((t,e,n)=>qn(t,(t=>t[0]===e&&t[1]===n)))(i,t,n);gr(o,e,!1),r||Ar(t)||s.disconnect(u,n)}};return!!mr(a,[e,n],(t=>t[0]===e&&t[1]===n),!0)&&(s.add(u),sr(t)?vr(i,t,[n,u],!0):gr(o,[t,n,u],!0),!0)})(this,t,n,h)){const e=u([this],t);Or(e,r(h))}}disconnect(t,e,n){let r;const a=c(this._context),l=d(a);if(void 0===t)r=((t,e)=>{const n=lr(t),r=[];for(const i of n.outputs)dr(i)?Ir(t,e,...i):Lr(t,e,...i),r.push(i[0]);return n.outputs.clear(),r})(this,l);else if("number"==typeof t){if(t<0||t>=this.numberOfOutputs)throw i();r=((t,e,n)=>{const r=lr(t),i=[];for(const o of r.outputs)o[1]===n&&(dr(o)?Ir(t,e,...o):Lr(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i})(this,l,t)}else{if(void 0!==e&&(e<0||e>=this.numberOfOutputs))throw i();if(pr(t)&&void 0!==n&&(n<0||n>=t.numberOfInputs))throw i();if(r=((t,e,n,r,i)=>{const o=lr(t);return Array.from(o.outputs).filter((t=>!(t[0]!==n||void 0!==r&&t[1]!==r||void 0!==i&&t[2]!==i))).map((n=>(dr(n)?Ir(t,e,...n):Lr(t,e,...n),o.outputs.delete(n),n[0])))})(this,l,t,e,n),0===r.length)throw o()}for(const t of r){const e=u([this],t);Or(e,s)}}})((ro=kn,(t,e,n)=>{const r=[];for(let t=0;t<n.numberOfInputs;t+=1)r.push(new Set);ro.set(t,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:e})}),((t,e,n,r,i,o,a,s,u,l,c,h,f)=>(p,d,m,v,g)=>{const{activeInputs:y,passiveInputs:b}=o(d),{outputs:_}=o(p),x=s(p),w=o=>{const s=u(d),l=u(p);if(o){const e=Xn(b,p,m,v);t(y,p,e,!1),g||h(p)||n(l,s,m,v),f(d)&&Qn(d)}else{const t=r(y,p,m,v);e(b,v,t,!1),g||h(p)||i(l,s,m,v);const n=a(d);0===n?c(d)&&$n(d,y):setTimeout((()=>{c(d)&&$n(d,y)}),1e3*n)}};return!!l(_,[d,m,v],(t=>t[0]===d&&t[1]===m&&t[2]===v),!0)&&(x.add(w),c(p)?t(y,p,[m,v,w],!0):e(b,v,[p,m,w],!0),!0)})(Li,Ri,br,Di,Er,lr,Fi,Yn,Sr,mr,sr,Ar,Mr),ji,((t,e,n,r,i,o)=>a=>(s,u)=>{const l=t.get(s);if(void 0===l){if(!a&&o(s)){const t=r(s),{outputs:o}=n(s);for(const n of o)if(dr(n)){const i=r(n[0]);e(t,i,n[1],n[2])}else{const e=i(n[0]);t.disconnect(e,n[1])}}t.set(s,u)}else t.set(s,l+u)})(Fn,Er,lr,Sr,Tr,sr),nr,Zr,vi,((t,e,n,r,i,o,a,s)=>(u,l)=>{const c=e.get(u);if(void 0===c)throw new Error("Missing the expected cycle count.");const h=o(u.context),f=s(h);if(c===l){if(e.delete(u),!f&&a(u)){const e=r(u),{outputs:o}=n(u);for(const n of o)if(dr(n)){const i=r(n[0]);t(e,i,n[1],n[2])}else{const t=i(n[0]);e.connect(t,n[1])}}}else e.set(u,c-l)})(br,Fn,lr,Sr,Tr,qi,sr,Qi),((t,e,n)=>function r(i,o){const a=pr(o)?o:n(t,o);if((t=>"delayTime"in t)(a))return[];if(i[0]===a)return[i];if(i.includes(a))return[];const{outputs:s}=e(a);return Array.from(s).map((t=>r([...i,a],t[0]))).reduce(((t,e)=>t.concat(e)),[])})(Zi,lr,Wn),Ki,qi,Ji,to,eo,Qi);var ro;const io=((t,e,n,r,i,o)=>class extends t{constructor(t,n){const a=i(t),s={...Jn,...n},u=r(a,s);super(t,!1,u,o(a)?e():null),this._nativeAnalyserNode=u}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(t){this._nativeAnalyserNode.fftSize=t}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(t){const e=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=t,!(t>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=e,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(t){const e=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=t,!(this._nativeAnalyserNode.maxDecibels>t))throw this._nativeAnalyserNode.minDecibels=e,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(t){this._nativeAnalyserNode.smoothingTimeConstant=t}getByteFrequencyData(t){this._nativeAnalyserNode.getByteFrequencyData(t)}getByteTimeDomainData(t){this._nativeAnalyserNode.getByteTimeDomainData(t)}getFloatFrequencyData(t){this._nativeAnalyserNode.getFloatFrequencyData(t)}getFloatTimeDomainData(t){this._nativeAnalyserNode.getFloatTimeDomainData(t)}})(no,Wi,nr,Vi,qi,Qi),oo=new WeakSet,ao=(t=>null===t?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null)(Bi),so=(uo=new Uint32Array(1),t=>(uo[0]=t,uo[0]));var uo;const lo=((t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const a=t(o),s=t(i);if(s>=n.numberOfChannels)throw e();const u=n.length,l=n.getChannelData(s),c=r.length;for(let t=a<0?-a:0;t+a<u&&t<c;t+=1)r[t]=l[t+a]},n.copyToChannel=(r,i,o=0)=>{const a=t(o),s=t(i);if(s>=n.numberOfChannels)throw e();const u=n.length,l=n.getChannelData(s),c=r.length;for(let t=a<0?-a:0;t+a<u&&t<c;t+=1)l[t+a]=r[t]}})(so,nr),co=(t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const a=t(o),s=t(i);if(a<e.length)return n.call(e,r,s,a)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const a=t(o),s=t(i);if(a<e.length)return n.call(e,r,s,a)})(e.copyToChannel)})(so),ho=((t,e,n,r,i,o,a,s)=>{let u=null;return class l{constructor(l){if(null===i)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:c,numberOfChannels:h,sampleRate:f}={...ir,...l};null===u&&(u=new i(1,1,44100));const p=null!==r&&e(o,o)?new r({length:c,numberOfChannels:h,sampleRate:f}):u.createBuffer(h,c,f);if(0===p.numberOfChannels)throw n();return"function"!=typeof p.copyFromChannel?(a(p),rr(p)):e(er,(()=>er(p)))||s(p),t.add(p),p}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===l.prototype||t.has(e)}}})(oo,ji,vi,ao,Yi,(t=>()=>{if(null===t)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0})(ao),lo,co),fo=(t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)})(fi),po=((t,e,n)=>async(r,i,o,a)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map((async([e,r])=>{const s=t(e),u=await s.render(e,i,a);n(e)||u.connect(o,r)})))})(Hi,cr,Ar),mo=(t=>(e,n,r,i)=>t(n,e,r,i))(po),vo=((t,e,n,r,i,o,a,s,u,l,c)=>(u,h)=>{const f=u.createBufferSource();return ni(f,h),ii(f,h,"playbackRate"),ei(f,h,"buffer"),ei(f,h,"loop"),ei(f,h,"loopEnd"),ei(f,h,"loopStart"),e(n,(()=>n(u)))||(t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw Qr();e.call(t,r,i,o),n=!0}})(t.start)})(f),e(r,(()=>r(u)))||(t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,a=null===o?r:Math.min(o.duration,r);null!==o&&a>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,a,i)})(t.start)})(f),e(i,(()=>i(u)))||l(f,u),e(o,(()=>o(u)))||oi(f),e(a,(()=>a(u)))||c(f,u),e(s,(()=>s(u)))||ai(f),t(u,f),f})(fo,ji,(t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1}),(t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0}),(t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0}),Ai,Mi,Ci,0,(t=>(e,n)=>{const r=n.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=r),t(e,"buffer",(t=>()=>{const n=t.call(e);return n===r?null:n}),(t=>n=>t.call(e,null===n?r:n)))})(Ti),ki),go=((t,e)=>(n,r,i,o)=>(t(r).replay(i),e(r,n,i,o)))((t=>e=>{const n=t(e);if(null===n.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer})(cr),po),yo=((t,e,n,r,i)=>()=>{const o=new WeakMap;let a=null,s=null;return{set start(t){a=t},set stop(t){s=t},render(u,l,c){const h=o.get(l);return void 0!==h?Promise.resolve(h):(async(u,l,c)=>{let h=n(u);const f=tr(h,l);if(!f){const t={buffer:h.buffer,channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,loop:h.loop,loopEnd:h.loopEnd,loopStart:h.loopStart,playbackRate:h.playbackRate.value};h=e(l,t),null!==a&&h.start(...a),null!==s&&h.stop(s)}return o.set(l,h),f?await t(l,u.playbackRate,h.playbackRate,c):await r(l,u.playbackRate,h.playbackRate,c),await i(u,l,h,c),h})(u,l,c)}}})(mo,vo,Sr,go,Gi),bo=((t,e,n,r,i,o,a,s,u,l,c,h)=>(r,f,p,d=null,m=null)=>{const v=new On.AutomationEventList(p.defaultValue),g=f?(t=>({replay(e){for(const n of t)if("exponentialRampToValue"===n.type){const{endTime:t,value:r}=n;e.exponentialRampToValueAtTime(r,t)}else if("linearRampToValue"===n.type){const{endTime:t,value:r}=n;e.linearRampToValueAtTime(r,t)}else if("setTarget"===n.type){const{startTime:t,target:r,timeConstant:i}=n;e.setTargetAtTime(r,t,i)}else if("setValue"===n.type){const{startTime:t,value:r}=n;e.setValueAtTime(r,t)}else{if("setValueCurve"!==n.type)throw new Error("Can't apply an unknown automation.");{const{duration:t,startTime:r,values:i}=n;e.setValueCurveAtTime(i,r,t)}}}}))(v):null,y={get defaultValue(){return p.defaultValue},get maxValue(){return null===d?p.maxValue:d},get minValue(){return null===m?p.minValue:m},get value(){return p.value},set value(t){p.value=t,y.setValueAtTime(t,r.context.currentTime)},cancelAndHoldAtTime(t){if("function"==typeof p.cancelAndHoldAtTime)null===g&&v.flush(r.context.currentTime),v.add(i(t)),p.cancelAndHoldAtTime(t);else{const e=Array.from(v).pop();null===g&&v.flush(r.context.currentTime),v.add(i(t));const n=Array.from(v).pop();p.cancelScheduledValues(t),e!==n&&void 0!==n&&("exponentialRampToValue"===n.type?p.exponentialRampToValueAtTime(n.value,n.endTime):"linearRampToValue"===n.type?p.linearRampToValueAtTime(n.value,n.endTime):"setValue"===n.type?p.setValueAtTime(n.value,n.startTime):"setValueCurve"===n.type&&p.setValueCurveAtTime(n.values,n.startTime,n.duration))}return y},cancelScheduledValues:t=>(null===g&&v.flush(r.context.currentTime),v.add(o(t)),p.cancelScheduledValues(t),y),exponentialRampToValueAtTime(t,e){if(0===t)throw new RangeError;if(!Number.isFinite(e)||e<0)throw new RangeError;return null===g&&v.flush(r.context.currentTime),v.add(a(t,e)),p.exponentialRampToValueAtTime(t,e),y},linearRampToValueAtTime:(t,e)=>(null===g&&v.flush(r.context.currentTime),v.add(s(t,e)),p.linearRampToValueAtTime(t,e),y),setTargetAtTime:(t,e,n)=>(null===g&&v.flush(r.context.currentTime),v.add(u(t,e,n)),p.setTargetAtTime(t,e,n),y),setValueAtTime:(t,e)=>(null===g&&v.flush(r.context.currentTime),v.add(l(t,e)),p.setValueAtTime(t,e),y),setValueCurveAtTime(t,e,n){const i=t instanceof Float32Array?t:new Float32Array(t);if(null!==h&&"webkitAudioContext"===h.name){const t=e+n,o=r.context.sampleRate,a=Math.ceil(e*o),s=Math.floor(t*o),u=s-a,l=new Float32Array(u);for(let t=0;t<u;t+=1){const r=(i.length-1)/n*((a+t)/o-e),s=Math.floor(r),u=Math.ceil(r);l[t]=s===u?i[s]:(1-(r-s))*i[s]+(1-(u-r))*i[u]}null===g&&v.flush(r.context.currentTime),v.add(c(l,e,n)),p.setValueCurveAtTime(l,e,n);const h=s/o;h<t&&y.setValueAtTime(l[l.length-1],h),y.setValueAtTime(i[i.length-1],t)}else null===g&&v.flush(r.context.currentTime),v.add(c(i,e,n)),p.setValueCurveAtTime(i,e,n);return y}};return n.set(y,p),e.set(y,r),t(y,g),y})((_o=Ln,(t,e)=>{_o.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:e})}),Zi,Rn,0,On.createCancelAndHoldAutomationEvent,On.createCancelScheduledValuesAutomationEvent,On.createExponentialRampToValueAutomationEvent,On.createLinearRampToValueAutomationEvent,On.createSetTargetAutomationEvent,On.createSetValueAutomationEvent,On.createSetValueCurveAutomationEvent,$i);var _o;const xo=((t,e,n,r,i,o,a,s)=>class extends t{constructor(t,r){const s=o(t),u={...ur,...r},l=i(s,u),c=a(s),h=c?e():null;super(t,!1,l,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==u.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,c,l.playbackRate,ar,or)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(t){if(this._nativeAudioBufferSourceNode.buffer=t,null!==t){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(t){this._nativeAudioBufferSourceNode.loop=t}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(t){this._nativeAudioBufferSourceNode.loopEnd=t}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(t){this._nativeAudioBufferSourceNode.loopStart=t}get onended(){return this._onended}set onended(t){const e="function"==typeof t?s(this,t):null;this._nativeAudioBufferSourceNode.onended=e;const n=this._nativeAudioBufferSourceNode.onended;this._onended=null!==n&&n===e?t:n}get playbackRate(){return this._playbackRate}start(t=0,e=0,n){if(this._nativeAudioBufferSourceNode.start(t,e,n),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===n?[t,e]:[t,e,n]),"closed"!==this.context.state){Qn(this);const t=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",t),sr(this)&&Kn(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeAudioBufferSourceNode.stop(t),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=t)}})(no,yo,bo,Qr,vo,qi,Qi,Ii),wo=((t,e,n,r,i,o,a,s)=>class extends t{constructor(t,e){const n=o(t),r=a(n),u=i(n,e,r);super(t,!1,u,r?(t=>{let e=null;return{render:(n,r,i)=>(null===e&&(e=(async(e,n,r)=>{const i=n.destination;return await t(e,n,i,r),i})(n,r,i)),e)}})(s):null),this._isNodeOfNativeOfflineAudioContext=r,this._nativeAudioDestinationNode=u}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(no,0,nr,Qr,((t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&"explicit"!==o.channelCountMode&&(o.channelCountMode="explicit"),0===o.maxChannelCount&&Object.defineProperty(o,"maxChannelCount",{value:r});const a=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(a,"channelCount",(t=>()=>t.call(a)),(t=>e=>{t.call(a,e);try{o.channelCount=e}catch(t){if(e>o.maxChannelCount)throw t}})),e(a,"channelCountMode",(t=>()=>t.call(a)),(t=>e=>{t.call(a,e),o.channelCountMode=e})),e(a,"channelInterpretation",(t=>()=>t.call(a)),(t=>e=>{t.call(a,e),o.channelInterpretation=e})),Object.defineProperty(a,"maxChannelCount",{get:()=>o.maxChannelCount}),a.connect(o),a})(fi,Ti),qi,Qi,Gi),Eo=((t,e,n,r,i)=>()=>{const o=new WeakMap;return{render(a,s,u){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(a,s,u)=>{let l=n(a);const c=tr(l,s);if(!c){const t={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(s,t)}return o.set(s,l),c?(await t(s,a.Q,l.Q,u),await t(s,a.detune,l.detune,u),await t(s,a.frequency,l.frequency,u),await t(s,a.gain,l.gain,u)):(await r(s,a.Q,l.Q,u),await r(s,a.detune,l.detune,u),await r(s,a.frequency,l.frequency,u),await r(s,a.gain,l.gain,u)),await i(a,s,l,u),l})(a,s,u)}}})(mo,ui,Sr,go,Gi),So=(t=>(e,n)=>t.set(e,n))(Ni),To=((t,e,n,r,i,o,a,s)=>class extends t{constructor(t,r){const u=o(t),l={...zr,...r},c=i(u,l),h=a(u);super(t,!1,c,h?n():null),this._Q=e(this,h,c.Q,ar,or),this._detune=e(this,h,c.detune,1200*Math.log2(ar),-1200*Math.log2(ar)),this._frequency=e(this,h,c.frequency,t.sampleRate/2,0),this._gain=e(this,h,c.gain,40*Math.log10(ar),or),this._nativeBiquadFilterNode=c,s(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(t){this._nativeBiquadFilterNode.type=t}getFrequencyResponse(t,e,n){if(this._nativeBiquadFilterNode.getFrequencyResponse(t,e,n),t.length!==e.length||e.length!==n.length)throw r()}})(no,bo,Eo,Zr,ui,qi,Qi,So),Ao=((t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(i=>(a,s=0,u=0)=>{const l=0===o.size;if(e(a))return i.call(n,a,s,u),t(o,[a,s,u],(t=>t[0]===a&&t[1]===s&&t[2]===u),!0),l&&r(),a;i.call(n,a,s),t(o,[a,s],(t=>t[0]===a&&t[1]===s),!0),l&&r()})(n.connect),n.disconnect=(t=>(r,a,s)=>{const u=o.size>0;if(void 0===r)t.apply(n),o.clear();else if("number"==typeof r){t.call(n,r);for(const t of o)t[1]===r&&o.delete(t)}else{e(r)?t.call(n,r,a,s):t.call(n,r,a);for(const t of o)t[0]!==r||void 0!==a&&t[1]!==a||void 0!==s&&t[2]!==s||o.delete(t)}const l=0===o.size;u&&l&&i()})(n.disconnect),n})(mr,to),Mo=((t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,(()=>{const t=r.numberOfInputs;for(let e=0;e<t;e+=1)i.connect(r,0,e)}),(()=>i.disconnect(r)))})(Qr,Ao),Co=((t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return null!==t&&"webkitAudioContext"===t.name&&e(n,i),ni(i,r),i})($i,Mo),Oo=((t,e,n,r,i)=>class extends t{constructor(t,o){const a=r(t),s={...Br,...o};super(t,!1,n(a,s),i(a)?e():null)}})(no,((t,e,n)=>()=>{const r=new WeakMap;return{render(i,o,a){const s=r.get(o);return void 0!==s?Promise.resolve(s):(async(i,o,a)=>{let s=e(i);if(!tr(s,o)){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfInputs:s.numberOfInputs};s=t(o,e)}return r.set(o,s),await n(i,o,s,a),s})(i,o,a)}}})(Co,Sr,Gi),Co,qi,Qi),Po=((t,e,n,r,i,o)=>class extends t{constructor(t,o){const a=r(t),s=(t=>({...t,channelCount:t.numberOfOutputs}))({...Vr,...o});super(t,!1,n(a,s),i(a)?e():null)}})(no,((t,e,n)=>()=>{const r=new WeakMap;return{render(i,o,a){const s=r.get(o);return void 0!==s?Promise.resolve(s):(async(i,o,a)=>{let s=e(i);if(!tr(s,o)){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,numberOfOutputs:s.numberOfOutputs};s=t(o,e)}return r.set(o,s),await n(i,o,s,a),s})(i,o,a)}}})(li,Sr,Gi),li,qi,Qi),ko=((t,e,n,r)=>(i,{offset:o,...a})=>{const s=i.createBuffer(1,2,44100),u=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...a,gain:o}),c=s.getChannelData(0);c[0]=1,c[1]=1,u.buffer=s,u.loop=!0;const h={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){l.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){l.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){l.channelInterpretation=t},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return u.onended},set onended(t){u.onended=t},addEventListener:(...t)=>u.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>u.dispatchEvent(t[0]),removeEventListener:(...t)=>u.removeEventListener(t[0],t[1],t[2]),start(t=0){u.start.call(u,t)},stop(t=0){u.stop.call(u,t)}};return t(i,u),r(ci(h,l),(()=>u.connect(l)),(()=>u.disconnect(l)))})(fo,vo,fi,Ao),Io=((t,e,n,r,i)=>(o,a)=>{if(void 0===o.createConstantSource)return n(o,a);const s=o.createConstantSource();return ni(s,a),ii(s,a,"offset"),e(r,(()=>r(o)))||oi(s),e(i,(()=>i(o)))||ai(s),t(o,s),s})(fo,ji,ko,Ai,Ci),Lo=((t,e,n,r,i,o,a)=>class extends t{constructor(t,a){const s=i(t),u={...Hr,...a},l=r(s,u),c=o(s),h=c?n():null;super(t,!1,l,h),this._constantSourceNodeRenderer=h,this._nativeConstantSourceNode=l,this._offset=e(this,c,l.offset,ar,or),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeConstantSourceNode.onended=e;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===e?t:n}start(t=0){if(this._nativeConstantSourceNode.start(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=t),"closed"!==this.context.state){Qn(this);const t=()=>{this._nativeConstantSourceNode.removeEventListener("ended",t),sr(this)&&Kn(this)};this._nativeConstantSourceNode.addEventListener("ended",t)}}stop(t=0){this._nativeConstantSourceNode.stop(t),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=t)}})(no,bo,((t,e,n,r,i)=>()=>{const o=new WeakMap;let a=null,s=null;return{set start(t){a=t},set stop(t){s=t},render(u,l,c){const h=o.get(l);return void 0!==h?Promise.resolve(h):(async(u,l,c)=>{let h=n(u);const f=tr(h,l);if(!f){const t={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,offset:h.offset.value};h=e(l,t),null!==a&&h.start(a),null!==s&&h.stop(s)}return o.set(l,h),f?await t(l,u.offset,h.offset,c):await r(l,u.offset,h.offset,c),await i(u,l,h,c),h})(u,l,c)}}})(mo,Io,Sr,go,Gi),Io,qi,Qi,Ii),Ro=((t,e)=>(n,r)=>{const i=n.createConvolver();if(ni(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),ei(i,r,"buffer"),r.channelCount>2)throw t();if(e(i,"channelCount",(t=>()=>t.call(i)),(e=>n=>{if(n>2)throw t();return e.call(i,n)})),"max"===r.channelCountMode)throw t();return e(i,"channelCountMode",(t=>()=>t.call(i)),(e=>n=>{if("max"===n)throw t();return e.call(i,n)})),i})(vi,Ti),Do=((t,e,n,r,i,o)=>class extends t{constructor(t,a){const s=r(t),u={...Gr,...a},l=n(s,u);super(t,!1,l,i(s)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=l,null!==u.buffer&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(t){if(this._nativeConvolverNode.buffer=t,null===t&&null!==this._nativeConvolverNode.buffer){const t=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=t.createBuffer(1,1,44100),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(t){this._nativeConvolverNode.normalize=t}})(no,((t,e,n)=>()=>{const r=new WeakMap;return{render(i,o,a){const s=r.get(o);return void 0!==s?Promise.resolve(s):(async(i,o,a)=>{let s=e(i);if(!tr(s,o)){const e={buffer:s.buffer,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,disableNormalization:!s.normalize};s=t(o,e)}return r.set(o,s),yr(s)?await n(i,o,s.inputs[0],a):await n(i,o,s,a),s})(i,o,a)}}})(Ro,Sr,Gi),Ro,qi,Qi,So),No=((t,e,n,r,i,o,a)=>class extends t{constructor(t,s){const u=i(t),l={...Wr,...s},c=r(u,l),h=o(u);super(t,!1,c,h?n(l.maxDelayTime):null),this._delayTime=e(this,h,c.delayTime),a(this,l.maxDelayTime)}get delayTime(){return this._delayTime}})(no,bo,((t,e,n,r,i)=>o=>{const a=new WeakMap;return{render(s,u,l){const c=a.get(u);return void 0!==c?Promise.resolve(c):(async(s,u,l)=>{let c=n(s);const h=tr(c,u);if(!h){const t={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,delayTime:c.delayTime.value,maxDelayTime:o};c=e(u,t)}return a.set(u,c),h?await t(u,s.delayTime,c.delayTime,l):await r(u,s.delayTime,c.delayTime,l),await i(s,u,c,l),c})(s,u,l)}}})(mo,hi,Sr,go,Gi),hi,qi,Qi,So),Fo=(t=>(e,n)=>{const r=e.createDynamicsCompressor();if(ni(r,n),n.channelCount>2)throw t();if("max"===n.channelCountMode)throw t();return ii(r,n,"attack"),ii(r,n,"knee"),ii(r,n,"ratio"),ii(r,n,"release"),ii(r,n,"threshold"),r})(vi),jo=((t,e,n,r,i,o,a,s)=>class extends t{constructor(t,i){const u=o(t),l={...Xr,...i},c=r(u,l),h=a(u);super(t,!1,c,h?n():null),this._attack=e(this,h,c.attack),this._knee=e(this,h,c.knee),this._nativeDynamicsCompressorNode=c,this._ratio=e(this,h,c.ratio),this._release=e(this,h,c.release),this._threshold=e(this,h,c.threshold),s(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(t){const e=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=t,t>2)throw this._nativeDynamicsCompressorNode.channelCount=e,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(t){const e=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=t,"max"===t)throw this._nativeDynamicsCompressorNode.channelCountMode=e,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(no,bo,((t,e,n,r,i)=>()=>{const o=new WeakMap;return{render(a,s,u){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(a,s,u)=>{let l=n(a);const c=tr(l,s);if(!c){const t={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(s,t)}return o.set(s,l),c?(await t(s,a.attack,l.attack,u),await t(s,a.knee,l.knee,u),await t(s,a.ratio,l.ratio,u),await t(s,a.release,l.release,u),await t(s,a.threshold,l.threshold,u)):(await r(s,a.attack,l.attack,u),await r(s,a.knee,l.knee,u),await r(s,a.ratio,l.ratio,u),await r(s,a.release,l.release,u),await r(s,a.threshold,l.threshold,u)),await i(a,s,l,u),l})(a,s,u)}}})(mo,Fo,Sr,go,Gi),Fo,vi,qi,Qi,So),Uo=((t,e,n,r,i,o)=>class extends t{constructor(t,a){const s=i(t),u={...Yr,...a},l=r(s,u),c=o(s);super(t,!1,l,c?n():null),this._gain=e(this,c,l.gain,ar,or)}get gain(){return this._gain}})(no,bo,((t,e,n,r,i)=>()=>{const o=new WeakMap;return{render(a,s,u){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(a,s,u)=>{let l=n(a);const c=tr(l,s);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(s,t)}return o.set(s,l),c?await t(s,a.gain,l.gain,u):await r(s,a.gain,l.gain,u),await i(a,s,l,u),l})(a,s,u)}}})(mo,fi,Sr,go,Gi),fi,qi,Qi),zo=((t,e,n,r)=>(i,o,{channelCount:a,channelCountMode:s,channelInterpretation:u,feedback:l,feedforward:c})=>{const h=si(o,i.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),p=c instanceof Float64Array?c:new Float64Array(c),d=f.length,m=p.length,v=Math.min(d,m);if(0===d||d>20)throw r();if(0===f[0])throw e();if(0===m||m>20)throw r();if(0===p[0])throw e();if(1!==f[0]){for(let t=0;t<m;t+=1)p[t]/=f[0];for(let t=1;t<d;t+=1)f[t]/=f[0]}const g=n(i,h,a,a);g.channelCount=a,g.channelCountMode=s,g.channelInterpretation=u;const y=[],b=[],_=[];for(let t=0;t<a;t+=1){y.push(0);const t=new Float32Array(32),e=new Float32Array(32);t.fill(0),e.fill(0),b.push(t),_.push(e)}g.onaudioprocess=t=>{const e=t.inputBuffer,n=t.outputBuffer,r=e.numberOfChannels;for(let t=0;t<r;t+=1){const r=e.getChannelData(t),i=n.getChannelData(t);y[t]=$r(f,d,p,m,v,b[t],_[t],y[t],32,r,i)}};const x=i.sampleRate/2;return ci({get bufferSize(){return h},get channelCount(){return g.channelCount},set channelCount(t){g.channelCount=t},get channelCountMode(){return g.channelCountMode},set channelCountMode(t){g.channelCountMode=t},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(t){g.channelInterpretation=t},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener:(...t)=>g.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>g.dispatchEvent(t[0]),getFrequencyResponse(e,n,r){if(e.length!==n.length||n.length!==r.length)throw t();const i=e.length;for(let t=0;t<i;t+=1){const i=-Math.PI*(e[t]/x),o=[Math.cos(i),Math.sin(i)],a=pi(di(p,o),di(f,o));n[t]=Math.sqrt(a[0]*a[0]+a[1]*a[1]),r[t]=Math.atan2(a[1],a[0])}},removeEventListener:(...t)=>g.removeEventListener(t[0],t[1],t[2])},g)})(Zr,Qr,mi,vi),Bo=((t,e,n,r)=>i=>t(ti,(()=>ti(i)))?Promise.resolve(t(r,r)).then((t=>{if(!t){const t=n(i,512,0,1);i.oncomplete=()=>{t.onaudioprocess=null,t.disconnect()},t.onaudioprocess=()=>i.currentTime,t.connect(i.destination)}return i.startRendering()})):new Promise((t=>{const n=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=e=>{n.disconnect(),t(e.renderedBuffer)},n.connect(i.destination),i.startRendering()})))(ji,fi,mi,((t,e)=>()=>{if(null===e)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise((t=>{n.oncomplete=()=>{r.disconnect(),t(0!==n.currentTime)},n.startRendering()}))})(fi,Yi)),Vo=((t,e,n,r,i)=>(o,a)=>{const s=new WeakMap;let u=null;return{render(l,c,h){const f=s.get(c);return void 0!==f?Promise.resolve(f):(async(l,c,h)=>{let f=null,p=e(l);const d=tr(p,c);if(void 0===c.createIIRFilter?f=t(c,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):d||(p=c.createIIRFilter(a,o)),s.set(c,null===f?p:f),null!==f){if(null===u){if(null===n)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new n(l.context.destination.channelCount,l.context.length,c.sampleRate);u=(async()=>(await r(l,t,t.destination,h),((t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),a=i.length,s=o.length,u=Math.min(a,s);if(1!==i[0]){for(let t=0;t<a;t+=1)o[t]/=i[0];for(let t=1;t<s;t+=1)i[t]/=i[0]}const l=new Float32Array(32),c=new Float32Array(32),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let e=0;e<f;e+=1){const n=t.getChannelData(e),r=h.getChannelData(e);l.fill(0),c.fill(0),$r(i,a,o,s,u,l,c,0,32,n,r)}return h})(await i(t),c,o,a)))()}const t=await u;return f.buffer=t,f.start(0),f}return await r(l,c,p,h),p})(l,c,h)}}})(vo,Sr,Yi,Gi,Bo),Ho=((t,e,n,r,i,o)=>class extends t{constructor(t,a){const s=r(t),u=i(s),l={...Kr,...a},c=e(s,u?null:t.baseLatency,l);super(t,!1,c,u?n(l.feedback,l.feedforward):null),(t=>{var e;t.getFrequencyResponse=(e=t.getFrequencyResponse,(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw Zr();return e.call(t,n,r,i)})})(c),this._nativeIIRFilterNode=c,o(this,1)}getFrequencyResponse(t,e,n){return this._nativeIIRFilterNode.getFrequencyResponse(t,e,n)}})(no,(t=>(e,n,r)=>{if(void 0===e.createIIRFilter)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return ni(i,r),i})(zo),Vo,qi,Qi,So),Go=((t,e,n,r,i)=>(o,a)=>{const s=a.listener,{forwardX:u,forwardY:l,forwardZ:c,positionX:h,positionY:f,positionZ:p,upX:d,upY:m,upZ:v}=void 0===s.forwardX?(()=>{const u=e(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),l=i(a),c=r(a,256,9,0),h=(e,r)=>{const i=n(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:r});return i.connect(u,0,e),i.start(),Object.defineProperty(i.offset,"defaultValue",{get:()=>r}),t({context:o},l,i.offset,ar,or)};let f=[0,0,-1,0,1,0],p=[0,0,0];return c.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some(((t,e)=>t!==f[e]))&&(s.setOrientation(...e),f=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some(((t,e)=>t!==p[e]))&&(s.setPosition(...n),p=n)},u.connect(c),{forwardX:h(0,0),forwardY:h(1,0),forwardZ:h(2,-1),positionX:h(6,0),positionY:h(7,0),positionZ:h(8,0),upX:h(3,0),upY:h(4,1),upZ:h(5,0)}})():s;return{get forwardX(){return u},get forwardY(){return l},get forwardZ(){return c},get positionX(){return h},get positionY(){return f},get positionZ(){return p},get upX(){return d},get upY(){return m},get upZ(){return v}}})(bo,Co,Io,mi,Qi),Wo=new WeakMap,qo=((t,e,n,r,i,o)=>class extends n{constructor(n,o){super(n),this._nativeContext=n,Dn.set(this,n),r(n)&&i.set(n,new Set),this._destination=new t(this,o),this._listener=e(this,n),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(wo,Go,Ki,Qi,Wo,Ii),Xo=((t,e,n,r,i,o)=>(a,s)=>{const u=a.createOscillator();return ni(u,s),ii(u,s,"detune"),ii(u,s,"frequency"),void 0!==s.periodicWave?u.setPeriodicWave(s.periodicWave):ei(u,s,"type"),e(n,(()=>n(a)))||oi(u),e(r,(()=>r(a)))||o(u,a),e(i,(()=>i(a)))||ai(u),t(a,u),u})(fo,ji,Ai,Mi,Ci,ki),Yo=((t,e,n,r,i)=>()=>{const o=new WeakMap;let a=null,s=null,u=null;return{set periodicWave(t){a=t},set start(t){s=t},set stop(t){u=t},render(l,c,h){const f=o.get(c);return void 0!==f?Promise.resolve(f):(async(l,c,h)=>{let f=n(l);const p=tr(f,c);if(!p){const t={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:null===a?void 0:a,type:f.type};f=e(c,t),null!==s&&f.start(s),null!==u&&f.stop(u)}return o.set(c,f),p?(await t(c,l.detune,f.detune,h),await t(c,l.frequency,f.frequency,h)):(await r(c,l.detune,f.detune,h),await r(c,l.frequency,f.frequency,h)),await i(l,c,f,h),f})(l,c,h)}}})(mo,Xo,Sr,go,Gi),Qo=((t,e,n,r,i,o,a)=>class extends t{constructor(t,a){const s=i(t),u={...yi,...a},l=n(s,u),c=o(s),h=c?r():null,f=t.sampleRate/2;super(t,!1,l,h),this._detune=e(this,c,l.detune,153600,-153600),this._frequency=e(this,c,l.frequency,f,-f),this._nativeOscillatorNode=l,this._onended=null,this._oscillatorNodeRenderer=h,null!==this._oscillatorNodeRenderer&&void 0!==u.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=u.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(t){const e="function"==typeof t?a(this,t):null;this._nativeOscillatorNode.onended=e;const n=this._nativeOscillatorNode.onended;this._onended=null!==n&&n===e?t:n}get type(){return this._nativeOscillatorNode.type}set type(t){this._nativeOscillatorNode.type=t,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(t){this._nativeOscillatorNode.setPeriodicWave(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=t)}start(t=0){if(this._nativeOscillatorNode.start(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=t),"closed"!==this.context.state){Qn(this);const t=()=>{this._nativeOscillatorNode.removeEventListener("ended",t),sr(this)&&Kn(this)};this._nativeOscillatorNode.addEventListener("ended",t)}}stop(t=0){this._nativeOscillatorNode.stop(t),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=t)}})(no,bo,Xo,Yo,qi,Qi,Ii),Zo=(t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}})(vo),Ko=((t,e,n,r,i)=>(o,{curve:a,oversample:s,...u})=>{const l=o.createWaveShaper(),c=o.createWaveShaper();ni(l,u),ni(c,u);const h=n(o,{...u,gain:1}),f=n(o,{...u,gain:-1}),p=n(o,{...u,gain:1}),d=n(o,{...u,gain:-1});let m=null,v=!1,g=null;const y={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(t){h.channelCount=t,f.channelCount=t,l.channelCount=t,p.channelCount=t,c.channelCount=t,d.channelCount=t},get channelCountMode(){return l.channelCountMode},set channelCountMode(t){h.channelCountMode=t,f.channelCountMode=t,l.channelCountMode=t,p.channelCountMode=t,c.channelCountMode=t,d.channelCountMode=t},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(t){h.channelInterpretation=t,f.channelInterpretation=t,l.channelInterpretation=t,p.channelInterpretation=t,c.channelInterpretation=t,d.channelInterpretation=t},get context(){return l.context},get curve(){return g},set curve(n){if(null!==n&&n.length<2)throw e();if(null===n)l.curve=n,c.curve=n;else{const t=n.length,e=new Float32Array(t+2-t%2),r=new Float32Array(t+2-t%2);e[0]=n[0],r[0]=-n[t-1];const i=Math.ceil((t+1)/2),o=(t+1)/2-1;for(let a=1;a<i;a+=1){const s=a/i*o,u=Math.floor(s),l=Math.ceil(s);e[a]=u===l?n[u]:(1-(s-u))*n[u]+(1-(l-s))*n[l],r[a]=u===l?-n[t-1-u]:-(1-(s-u))*n[t-1-u]-(1-(l-s))*n[t-1-l]}e[i]=t%2==1?n[i-1]:(n[i-2]+n[i-1])/2,l.curve=e,c.curve=r}g=n,v&&(r(g)&&null===m?m=t(o,h):null!==m&&(m(),m=null))},get inputs(){return[h]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(t){l.oversample=t,c.oversample=t},addEventListener:(...t)=>h.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>h.dispatchEvent(t[0]),removeEventListener:(...t)=>h.removeEventListener(t[0],t[1],t[2])};return null!==a&&(y.curve=a instanceof Float32Array?a:new Float32Array(a)),s!==y.oversample&&(y.oversample=s),i(ci(y,p),(()=>{h.connect(l).connect(p),h.connect(f).connect(c).connect(d).connect(p),v=!0,r(g)&&(m=t(o,h))}),(()=>{h.disconnect(l),l.disconnect(p),h.disconnect(f),f.disconnect(c),c.disconnect(d),d.disconnect(p),v=!1,null!==m&&(m(),m=null)}))})(Zo,Qr,fi,Si,Ao),$o=((t,e,n,r,i,o,a)=>(s,u)=>{const l=s.createWaveShaper();if(null!==o&&"webkitAudioContext"===o.name)return n(s,u);ni(l,u);const c=null===u.curve||u.curve instanceof Float32Array?u.curve:new Float32Array(u.curve);if(null!==c&&c.length<2)throw e();ei(l,{curve:c},"curve"),ei(l,u,"oversample");let h=null,f=!1;return a(l,"curve",(t=>()=>t.call(l)),(e=>n=>(e.call(l,n),f&&(r(n)&&null===h?h=t(s,l):r(n)||null===h||(h(),h=null)),n))),i(l,(()=>{f=!0,r(l.curve)&&(h=t(s,l))}),(()=>{f=!1,null!==h&&(h(),h=null)}))})(Zo,Qr,Ko,Si,Ao,$i,Ti),Jo=(Va=((t,e,n,r,i,o,a,s,u)=>(l,{coneInnerAngle:c,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:d,orientationX:m,orientationY:v,orientationZ:g,panningModel:y,positionX:b,positionY:_,positionZ:x,refDistance:w,rolloffFactor:E,...S})=>{const T=l.createPanner();if(S.channelCount>2)throw a();if("max"===S.channelCountMode)throw a();ni(T,S);const A={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},M=n(l,{...A,channelInterpretation:"speakers",numberOfInputs:6}),C=r(l,{...S,gain:1}),O=r(l,{...A,gain:1}),P=r(l,{...A,gain:0}),k=r(l,{...A,gain:0}),I=r(l,{...A,gain:0}),L=r(l,{...A,gain:0}),R=r(l,{...A,gain:0}),D=i(l,256,6,1),N=o(l,{...A,curve:new Float32Array([1,1]),oversample:"none"});let F=[m,v,g],j=[b,_,x];D.onaudioprocess=({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0]];e.some(((t,e)=>t!==F[e]))&&(T.setOrientation(...e),F=e);const n=[t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];n.some(((t,e)=>t!==j[e]))&&(T.setPosition(...n),j=n)},Object.defineProperty(P.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(I.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(R.gain,"defaultValue",{get:()=>0});const U={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(t){if(t>2)throw a();C.channelCount=t,T.channelCount=t},get channelCountMode(){return T.channelCountMode},set channelCountMode(t){if("max"===t)throw a();C.channelCountMode=t,T.channelCountMode=t},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(t){C.channelInterpretation=t,T.channelInterpretation=t},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(t){T.coneInnerAngle=t},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(t){T.coneOuterAngle=t},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(t){if(t<0||t>1)throw e();T.coneOuterGain=t},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(t){T.distanceModel=t},get inputs(){return[C]},get maxDistance(){return T.maxDistance},set maxDistance(t){if(t<0)throw new RangeError;T.maxDistance=t},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return O.gain},get orientationY(){return P.gain},get orientationZ(){return k.gain},get panningModel(){return T.panningModel},set panningModel(t){T.panningModel=t},get positionX(){return I.gain},get positionY(){return L.gain},get positionZ(){return R.gain},get refDistance(){return T.refDistance},set refDistance(t){if(t<0)throw new RangeError;T.refDistance=t},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(t){if(t<0)throw new RangeError;T.rolloffFactor=t},addEventListener:(...t)=>C.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>C.dispatchEvent(t[0]),removeEventListener:(...t)=>C.removeEventListener(t[0],t[1],t[2])};return c!==U.coneInnerAngle&&(U.coneInnerAngle=c),h!==U.coneOuterAngle&&(U.coneOuterAngle=h),f!==U.coneOuterGain&&(U.coneOuterGain=f),p!==U.distanceModel&&(U.distanceModel=p),d!==U.maxDistance&&(U.maxDistance=d),m!==U.orientationX.value&&(U.orientationX.value=m),v!==U.orientationY.value&&(U.orientationY.value=v),g!==U.orientationZ.value&&(U.orientationZ.value=g),y!==U.panningModel&&(U.panningModel=y),b!==U.positionX.value&&(U.positionX.value=b),_!==U.positionY.value&&(U.positionY.value=_),x!==U.positionZ.value&&(U.positionZ.value=x),w!==U.refDistance&&(U.refDistance=w),E!==U.rolloffFactor&&(U.rolloffFactor=E),1===F[0]&&0===F[1]&&0===F[2]||T.setOrientation(...F),0===j[0]&&0===j[1]&&0===j[2]||T.setPosition(...j),u(ci(U,T),(()=>{C.connect(T),t(C,N,0,0),N.connect(O).connect(M,0,0),N.connect(P).connect(M,0,1),N.connect(k).connect(M,0,2),N.connect(I).connect(M,0,3),N.connect(L).connect(M,0,4),N.connect(R).connect(M,0,5),M.connect(D).connect(l.destination)}),(()=>{C.disconnect(T),s(C,N,0,0),N.disconnect(O),O.disconnect(M),N.disconnect(P),P.disconnect(M),N.disconnect(k),k.disconnect(M),N.disconnect(I),I.disconnect(M),N.disconnect(L),L.disconnect(M),N.disconnect(R),R.disconnect(M),M.disconnect(D),D.disconnect(l.destination)}))})(br,Qr,Co,fi,mi,$o,vi,Er,Ao),(t,e)=>{const n=t.createPanner();return void 0===n.orientationX?Va(t,e):(ni(n,e),ii(n,e,"orientationX"),ii(n,e,"orientationY"),ii(n,e,"orientationZ"),ii(n,e,"positionX"),ii(n,e,"positionY"),ii(n,e,"positionZ"),ei(n,e,"coneInnerAngle"),ei(n,e,"coneOuterAngle"),ei(n,e,"coneOuterGain"),ei(n,e,"distanceModel"),ei(n,e,"maxDistance"),ei(n,e,"panningModel"),ei(n,e,"refDistance"),ei(n,e,"rolloffFactor"),n)}),ta=((t,e,n,r,i,o,a,s,u,l)=>()=>{const c=new WeakMap;let h=null;return{render(f,p,d){const m=c.get(p);return void 0!==m?Promise.resolve(m):(async(f,p,d)=>{let m=null,v=o(f);const g={channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation},y={...g,coneInnerAngle:v.coneInnerAngle,coneOuterAngle:v.coneOuterAngle,coneOuterGain:v.coneOuterGain,distanceModel:v.distanceModel,maxDistance:v.maxDistance,panningModel:v.panningModel,refDistance:v.refDistance,rolloffFactor:v.rolloffFactor},b=tr(v,p);if("bufferSize"in v)m=r(p,{...g,gain:1});else if(!b){const t={...y,orientationX:v.orientationX.value,orientationY:v.orientationY.value,orientationZ:v.orientationZ.value,positionX:v.positionX.value,positionY:v.positionY.value,positionZ:v.positionZ.value};v=i(p,t)}if(c.set(p,null===m?v:m),null!==m){if(null===h){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const t=new a(6,f.context.length,p.sampleRate),r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});r.connect(t.destination),h=(async()=>{const e=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map((async(e,r)=>{const i=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===r?1:0});return await s(t,e,i.offset,d),i})));for(let t=0;t<6;t+=1)e[t].connect(r,0,t),e[t].start(0);return l(t)})()}const t=await h,o=r(p,{...g,gain:1});await u(f,p,o,d);const c=[];for(let e=0;e<t.numberOfChannels;e+=1)c.push(t.getChannelData(e));let v=[c[0][0],c[1][0],c[2][0]],b=[c[3][0],c[4][0],c[5][0]],_=r(p,{...g,gain:1}),x=i(p,{...y,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:b[0],positionY:b[1],positionZ:b[2]});o.connect(_).connect(x.inputs[0]),x.connect(m);for(let e=128;e<t.length;e+=128){const t=[c[0][e],c[1][e],c[2][e]],n=[c[3][e],c[4][e],c[5][e]];if(t.some(((t,e)=>t!==v[e]))||n.some(((t,e)=>t!==b[e]))){v=t,b=n;const a=e/p.sampleRate;_.gain.setValueAtTime(0,a),_=r(p,{...g,gain:0}),x=i(p,{...y,orientationX:v[0],orientationY:v[1],orientationZ:v[2],positionX:b[0],positionY:b[1],positionZ:b[2]}),_.gain.setValueAtTime(1,a),o.connect(_).connect(x.inputs[0]),x.connect(m)}}return m}return b?(await t(p,f.orientationX,v.orientationX,d),await t(p,f.orientationY,v.orientationY,d),await t(p,f.orientationZ,v.orientationZ,d),await t(p,f.positionX,v.positionX,d),await t(p,f.positionY,v.positionY,d),await t(p,f.positionZ,v.positionZ,d)):(await s(p,f.orientationX,v.orientationX,d),await s(p,f.orientationY,v.orientationY,d),await s(p,f.orientationZ,v.orientationZ,d),await s(p,f.positionX,v.positionX,d),await s(p,f.positionY,v.positionY,d),await s(p,f.positionZ,v.positionZ,d)),yr(v)?await u(f,p,v.inputs[0],d):await u(f,p,v,d),v})(f,p,d)}}})(mo,Co,Io,fi,Jo,Sr,Yi,go,Gi,Bo),ea=((t,e,n,r,i,o,a)=>class extends t{constructor(t,s){const u=i(t),l={...bi,...s},c=n(u,l),h=o(u);super(t,!1,c,h?r():null),this._nativePannerNode=c,this._orientationX=e(this,h,c.orientationX,ar,or),this._orientationY=e(this,h,c.orientationY,ar,or),this._orientationZ=e(this,h,c.orientationZ,ar,or),this._positionX=e(this,h,c.positionX,ar,or),this._positionY=e(this,h,c.positionY,ar,or),this._positionZ=e(this,h,c.positionZ,ar,or),a(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(t){this._nativePannerNode.coneInnerAngle=t}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(t){this._nativePannerNode.coneOuterAngle=t}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(t){this._nativePannerNode.coneOuterGain=t}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(t){this._nativePannerNode.distanceModel=t}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(t){this._nativePannerNode.maxDistance=t}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(t){this._nativePannerNode.panningModel=t}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(t){this._nativePannerNode.refDistance=t}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(t){this._nativePannerNode.rolloffFactor=t}})(no,bo,Jo,ta,qi,Qi,So),na=((t,e,n,r)=>class r{constructor(r,i){const o=e(r),a=(t=>{const{imag:e,real:n}=t;return void 0===e?void 0===n?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,(()=>0)),real:n}:void 0===n?{...t,imag:e,real:Array.from(e,(()=>0))}:{...t,imag:e,real:n}})({..._i,...i}),s=t(o,a);return n.add(s),s}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===r.prototype||n.has(t)}})((t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),a=i instanceof Float32Array?i:new Float32Array(i),s=e.createPeriodicWave(a,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return s})(nr),qi,new WeakSet),ra=((t,e)=>(n,r)=>{const i=r.channelCountMode;if("clamped-max"===i)throw e();if(void 0===n.createStereoPanner)return t(n,r);const o=n.createStereoPanner();return ni(o,r),ii(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:t=>{if(t!==i)throw e()}}),o})(((t,e,n,r,i,o)=>{const a=16385,s=new Float32Array([1,1]),u=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},c={...l,oversample:"none"},h=(t,o,h,f,p)=>{if(1===o)return((t,e,i,o)=>{const h=new Float32Array(a),f=new Float32Array(a);for(let t=0;t<a;t+=1){const e=t/16384*u;h[t]=Math.cos(e),f[t]=Math.sin(e)}const p=n(t,{...l,gain:0}),d=r(t,{...c,curve:h}),m=r(t,{...c,curve:s}),v=n(t,{...l,gain:0}),g=r(t,{...c,curve:f});return{connectGraph(){e.connect(p),e.connect(m.inputs[0]),e.connect(v),m.connect(i),i.connect(d.inputs[0]),i.connect(g.inputs[0]),d.connect(p.gain),g.connect(v.gain),p.connect(o,0,0),v.connect(o,0,1)},disconnectGraph(){e.disconnect(p),e.disconnect(m.inputs[0]),e.disconnect(v),m.disconnect(i),i.disconnect(d.inputs[0]),i.disconnect(g.inputs[0]),d.disconnect(p.gain),g.disconnect(v.gain),p.disconnect(o,0,0),v.disconnect(o,0,1)}}})(t,h,f,p);if(2===o)return((t,i,o,h)=>{const f=new Float32Array(a),p=new Float32Array(a),d=new Float32Array(a),m=new Float32Array(a),v=Math.floor(8192.5);for(let t=0;t<a;t+=1)if(t>v){const e=(t-v)/(16384-v)*u;f[t]=Math.cos(e),p[t]=Math.sin(e),d[t]=0,m[t]=1}else{const e=t/(16384-v)*u;f[t]=1,p[t]=0,d[t]=Math.cos(e),m[t]=Math.sin(e)}const g=e(t,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),y=n(t,{...l,gain:0}),b=r(t,{...c,curve:f}),_=n(t,{...l,gain:0}),x=r(t,{...c,curve:p}),w=r(t,{...c,curve:s}),E=n(t,{...l,gain:0}),S=r(t,{...c,curve:d}),T=n(t,{...l,gain:0}),A=r(t,{...c,curve:m});return{connectGraph(){i.connect(g),i.connect(w.inputs[0]),g.connect(y,0),g.connect(_,0),g.connect(E,1),g.connect(T,1),w.connect(o),o.connect(b.inputs[0]),o.connect(x.inputs[0]),o.connect(S.inputs[0]),o.connect(A.inputs[0]),b.connect(y.gain),x.connect(_.gain),S.connect(E.gain),A.connect(T.gain),y.connect(h,0,0),E.connect(h,0,0),_.connect(h,0,1),T.connect(h,0,1)},disconnectGraph(){i.disconnect(g),i.disconnect(w.inputs[0]),g.disconnect(y,0),g.disconnect(_,0),g.disconnect(E,1),g.disconnect(T,1),w.disconnect(o),o.disconnect(b.inputs[0]),o.disconnect(x.inputs[0]),o.disconnect(S.inputs[0]),o.disconnect(A.inputs[0]),b.disconnect(y.gain),x.disconnect(_.gain),S.disconnect(E.gain),A.disconnect(T.gain),y.disconnect(h,0,0),E.disconnect(h,0,0),_.disconnect(h,0,1),T.disconnect(h,0,1)}}})(t,h,f,p);throw i()};return(e,{channelCount:r,channelCountMode:a,pan:s,...u})=>{if("max"===a)throw i();const l=t(e,{...u,channelCount:1,channelCountMode:a,numberOfInputs:2}),c=n(e,{...u,channelCount:r,channelCountMode:a,gain:1}),f=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:p,disconnectGraph:d}=h(e,r,c,f,l);Object.defineProperty(f.gain,"defaultValue",{get:()=>0}),Object.defineProperty(f.gain,"minValue",{get:()=>-1});const m={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(t){c.channelCount!==t&&(v&&d(),({connectGraph:p,disconnectGraph:d}=h(e,t,c,f,l)),v&&p()),c.channelCount=t},get channelCountMode(){return c.channelCountMode},set channelCountMode(t){if("clamped-max"===t||"max"===t)throw i();c.channelCountMode=t},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(t){c.channelInterpretation=t},get context(){return c.context},get inputs(){return[c]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get pan(){return f.gain},addEventListener:(...t)=>c.addEventListener(t[0],t[1],t[2]),dispatchEvent:(...t)=>c.dispatchEvent(t[0]),removeEventListener:(...t)=>c.removeEventListener(t[0],t[1],t[2])};let v=!1;return o(ci(m,l),(()=>{p(),v=!0}),(()=>{d(),v=!1}))}})(Co,li,fi,$o,vi,Ao),vi),ia=((t,e,n,r,i)=>()=>{const o=new WeakMap;return{render(a,s,u){const l=o.get(s);return void 0!==l?Promise.resolve(l):(async(a,s,u)=>{let l=n(a);const c=tr(l,s);if(!c){const t={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(s,t)}return o.set(s,l),c?await t(s,a.pan,l.pan,u):await r(s,a.pan,l.pan,u),yr(l)?await i(a,s,l.inputs[0],u):await i(a,s,l,u),l})(a,s,u)}}})(mo,ra,Sr,go,Gi),oa=((t,e,n,r,i,o)=>class extends t{constructor(t,a){const s=i(t),u={...xi,...a},l=n(s,u),c=o(s);super(t,!1,l,c?r():null),this._pan=e(this,c,l.pan)}get pan(){return this._pan}})(no,bo,ra,ia,qi,Qi),aa=((t,e,n)=>()=>{const r=new WeakMap;return{render(i,o,a){const s=r.get(o);return void 0!==s?Promise.resolve(s):(async(i,o,a)=>{let s=e(i);if(!tr(s,o)){const e={channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,curve:s.curve,oversample:s.oversample};s=t(o,e)}return r.set(o,s),yr(s)?await n(i,o,s.inputs[0],a):await n(i,o,s,a),s})(i,o,a)}}})($o,Sr,Gi),sa=((t,e,n,r,i,o,a)=>class extends t{constructor(t,e){const s=i(t),u={...Ei,...e},l=n(s,u);super(t,!0,l,o(s)?r():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l,a(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(t){if(null===t)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(t.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=t}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(t){this._nativeWaveShaperNode.oversample=t}})(no,Qr,$o,aa,qi,Qi,So),ua=(t=>null!==t&&t.isSecureContext)(Bi),la=(t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get:()=>Math.round(e*n)},currentTime:{configurable:!0,get:()=>e}});try{return r()}finally{null!==t&&(delete t.currentFrame,delete t.currentTime)}})(Bi),ca=new WeakMap,ha=((t,e)=>n=>{let r=t.get(n);if(void 0!==r)return r;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,8e3),t.set(n,r),r})(ca,Yi),fa=(t=>null===t?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null)(Bi),pa=ua?((t,e,n,r,i,o,a,s,u,l,c,h)=>(f,p,d={credentials:"omit"})=>{const m=o(f),v=new URL(p,h.location.href).toString();if(void 0!==m.audioWorklet)return Promise.all([i(p),Promise.resolve(t(c,c))]).then((([t,e])=>{const[n,r]=Vn(t,v),i=e?r:r.replace(/\s+extends\s+AudioWorkletProcessor\s*{/," extends (class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}){"),o=new Blob([`${n};(registerProcessor=>{${i}\n})((n,p)=>registerProcessor(n,class extends p{${e?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${e?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))`],{type:"application/javascript; charset=utf-8"}),u=URL.createObjectURL(o);return m.audioWorklet.addModule(u,d).then((()=>{if(!s(m))return a(m).audioWorklet.addModule(u,d)})).finally((()=>URL.revokeObjectURL(u)))}));const g=l.get(f);if(void 0!==g&&g.has(p))return Promise.resolve();const y=u.get(f);if(void 0!==y){const t=y.get(p);if(void 0!==t)return t}const b=i(p).then((t=>{const[e,r]=Vn(t,v);return n(`${e};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${r}\n})})(window,'_AWGS')`)})).then((()=>{const t=h._AWGS.pop();if(void 0===t)throw new SyntaxError;r(m.currentTime,m.sampleRate,(()=>t(class{},void 0,((t,n)=>{if(""===t.trim())throw e();const r=jn.get(m);if(void 0!==r){if(r.has(t))throw e();Gn(n),Hn(n.parameterDescriptors),r.set(t,n)}else Gn(n),Hn(n.parameterDescriptors),jn.set(m,new Map([[t,n]]))}),m.sampleRate,void 0,void 0)))}));return void 0===y?u.set(f,new Map([[p,b]])):y.set(p,b),b.then((()=>{const t=l.get(f);void 0===t?l.set(f,new Set([p])):t.add(p)})).finally((()=>{const t=u.get(f);void 0!==t&&t.delete(p)})),b})(ji,vi,(t=>e=>new Promise(((n,r)=>{if(null===t)return void r(new SyntaxError);const i=t.document.head;if(null===i)r(new SyntaxError);else{const o=t.document.createElement("script"),a=new Blob([e],{type:"application/javascript"}),s=URL.createObjectURL(a),u=t.onerror,l=()=>{t.onerror=u,URL.revokeObjectURL(s)};t.onerror=(e,n,i,o,a)=>n===s||n===t.location.href&&1===i&&1===o?(l(),r(a),!1):null!==u?u(e,n,i,o,a):void 0,o.onerror=()=>{l(),r(new SyntaxError)},o.onload=()=>{l(),n()},o.src=s,o.type="module",i.appendChild(o)}})))(Bi),la,(async t=>{try{const e=await fetch(t);if(e.ok)return e.text()}catch{}throw new DOMException("","AbortError")}),qi,ha,Qi,new WeakMap,new WeakMap,((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,8e3),i=URL.createObjectURL(n);let o=!1,a=!1;try{await r.audioWorklet.addModule(i);const e=new t(r,"a",{numberOfOutputs:0}),n=r.createOscillator();e.port.onmessage=()=>o=!0,e.onprocessorerror=()=>a=!0,n.connect(e),await r.startRendering()}catch{}finally{URL.revokeObjectURL(i)}return o&&!a})(fa,Yi),Bi):void 0,da=((t,e)=>n=>t(n)||e(n))(Ji,Qi),ma=((t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m,v,g,y,b)=>class extends d{constructor(e,n){super(e,n),this._nativeContext=e,this._audioWorklet=void 0===t?void 0:{addModule:(e,n)=>t(this,e,n)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(t,e,r){return new n({length:e,numberOfChannels:t,sampleRate:r})}createBufferSource(){return new r(this)}createChannelMerger(t=6){return new o(this,{numberOfInputs:t})}createChannelSplitter(t=6){return new a(this,{numberOfOutputs:t})}createConstantSource(){return new s(this)}createConvolver(){return new u(this)}createDelay(t=1){return new c(this,{maxDelayTime:t})}createDynamicsCompressor(){return new h(this)}createGain(){return new f(this)}createIIRFilter(t,e){return new p(this,{feedback:e,feedforward:t})}createOscillator(){return new m(this)}createPanner(){return new v(this)}createPeriodicWave(t,e,n={disableNormalization:!1}){return new g(this,{...n,imag:e,real:t})}createStereoPanner(){return new y(this)}createWaveShaper(){return new b(this)}decodeAudioData(t,e,n){return l(this._nativeContext,t).then((t=>("function"==typeof e&&e(t),t))).catch((t=>{throw"function"==typeof n&&n(t),t}))}})(pa,io,ho,xo,To,Oo,Po,Lo,Do,((t,e,n,r,i,o,a,s,u,l,c)=>(n,r)=>{const h=a(n)?n:o(n);if(i.has(r)){const t=new DOMException("","DataCloneError");return Promise.reject(t)}try{i.add(r)}catch{}return e(u,(()=>u(h)))?h.decodeAudioData(r).then((n=>(e(s,(()=>s(n)))||c(n),t.add(n),n))):new Promise(((e,n)=>{const i=()=>{try{(t=>{const{port1:e}=new MessageChannel;e.postMessage(t,[t])})(r)}catch{}},o=t=>{n(t),i()};try{h.decodeAudioData(r,(n=>{"function"!=typeof n.copyFromChannel&&(l(n),rr(n)),t.add(n),i(),e(n)}),(t=>{o(null===t?new DOMException("","EncodingError"):t)}))}catch(t){o(t)}}))})(oo,ji,0,0,new WeakSet,qi,da,er,ti,lo,co),No,jo,Uo,Ho,qo,Qo,ea,na,oa,sa),va=((t,e,n,r)=>class extends t{constructor(t,e){const i=n(t),o=((t,e)=>t.createMediaElementSource(e.mediaElement))(i,e);if(r(i))throw TypeError();super(t,!0,o,null),this._nativeMediaElementAudioSourceNode=o}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(no,0,qi,Qi),ga=((t,e,n,r)=>class extends t{constructor(t,e){const i=n(t);if(r(i))throw new TypeError;const o=((t,e)=>{const n=t.createMediaStreamDestination();return ni(n,e),1===n.numberOfOutputs&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n})(i,{...Jr,...e});super(t,!1,o,null),this._nativeMediaStreamAudioDestinationNode=o}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(no,0,qi,Qi),ya=((t,e,n,r)=>class extends t{constructor(t,e){const i=n(t),o=((t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort(((t,e)=>t.id<e.id?-1:t.id>e.id?1:0));const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i})(i,e);if(r(i))throw new TypeError;super(t,!0,o,null),this._nativeMediaStreamAudioSourceNode=o}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(no,0,qi,Qi),ba=((t,e,n)=>class extends t{constructor(t,r){const i=n(t);super(t,!0,e(i,r),null)}})(no,((t,e)=>(n,{mediaStreamTrack:r})=>{if("function"==typeof n.createMediaStreamTrackSource)return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if("audio"!==r.kind)throw t();if(e(n))throw new TypeError;return o})(Qr,Qi),qi),_a=((t,e,n,r,i,o,a,s,u)=>class extends t{constructor(t={}){if(null===u)throw new Error("Missing the native AudioContext constructor.");const e=new u(t);if(null===e)throw r();if(!(t=>void 0===t||"number"==typeof t||"string"==typeof t&&("balanced"===t||"interactive"===t||"playback"===t))(t.latencyHint))throw new TypeError(`The provided value '${t.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==t.sampleRate&&e.sampleRate!==t.sampleRate)throw n();super(e,2);const{latencyHint:i}=t,{sampleRate:o}=e;if(this._baseLatency="number"==typeof e.baseLatency?e.baseLatency:"balanced"===i?512/o:"interactive"===i||void 0===i?256/o:"playback"===i?1024/o:128*Math.max(2,Math.min(128,Math.round(i*o/128)))/o,this._nativeAudioContext=e,"webkitAudioContext"===u.name?(this._nativeGainNode=e.createGain(),this._nativeOscillatorNode=e.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(e.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===e.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),e.removeEventListener("statechange",t)};e.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then((()=>{throw e()})):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then((()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),fr(this)})))}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(t){return new a(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new s(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise(((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)})):this._nativeAudioContext.resume().catch((t=>{if(void 0===t||15===t.code)throw e();throw t}))}suspend(){return this._nativeAudioContext.suspend().catch((t=>{if(void 0===t)throw e();throw t}))}})(ma,Qr,vi,wi,va,ga,ya,ba,$i),xa=(t=>e=>{const n=t.get(e);if(void 0===n)throw new Error("The context has no set of AudioWorkletNodes.");return n})(Wo),wa=(t=>(e,n)=>{t(e).add(n)})(xa),Ea=(t=>(e,n,r=0,i=0)=>{const o=e[r];if(void 0===o)throw t();return Pr(n)?o.connect(n,0,i):o.connect(n,0)})(nr),Sa=(t=>(e,n)=>{t(e).delete(n)})(xa),Ta=(t=>(e,n,r,i=0)=>void 0===n?e.forEach((t=>t.disconnect())):"number"==typeof n?qr(t,e,n).disconnect():Pr(n)?void 0===r?e.forEach((t=>t.disconnect(n))):void 0===i?qr(t,e,r).disconnect(n,0):qr(t,e,r).disconnect(n,0,i):void 0===r?e.forEach((t=>t.disconnect(n))):qr(t,e,r).disconnect(n,0))(nr),Aa=new WeakMap,Ma=((t,e)=>n=>e(t,n))(Aa,Wn),Ca=((t,e,n,r,i,o,a,s,u,l,c,h,f)=>(p,d,m,v)=>{if(0===v.numberOfInputs&&0===v.numberOfOutputs)throw u();const g=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(g.some((t=>t<1)))throw u();if(g.length!==v.numberOfOutputs)throw e();if("explicit"!==v.channelCountMode)throw u();const y=v.channelCount*v.numberOfInputs,b=g.reduce(((t,e)=>t+e),0),_=void 0===m.parameterDescriptors?0:m.parameterDescriptors.length;if(y+_>6||b>6)throw u();const x=new MessageChannel,w=[],E=[];for(let t=0;t<v.numberOfInputs;t+=1)w.push(a(p,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),E.push(i(p,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const S=[];if(void 0!==m.parameterDescriptors)for(const{defaultValue:t,maxValue:e,minValue:n,name:r}of m.parameterDescriptors){const i=o(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==v.parameterData[r]?v.parameterData[r]:void 0===t?0:t});Object.defineProperties(i.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===e?ar:e},minValue:{get:()=>void 0===n?or:n}}),S.push(i)}const T=r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,y+_)}),A=si(d,p.sampleRate),M=s(p,A,y+_,Math.max(1,b)),C=i(p,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),O=[];for(let t=0;t<v.numberOfOutputs;t+=1)O.push(r(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[t]}));for(let t=0;t<v.numberOfInputs;t+=1){w[t].connect(E[t]);for(let e=0;e<v.channelCount;e+=1)E[t].connect(T,e,t*v.channelCount+e)}const P=new Rr(void 0===m.parameterDescriptors?[]:m.parameterDescriptors.map((({name:t},e)=>{const n=S[e];return n.connect(T,0,y+e),n.start(0),[t,n.offset]})));T.connect(M);let k=v.channelInterpretation,I=null;const L=0===v.numberOfOutputs?[M]:O,R={get bufferSize(){return A},get channelCount(){return v.channelCount},set channelCount(t){throw n()},get channelCountMode(){return v.channelCountMode},set channelCountMode(t){throw n()},get channelInterpretation(){return k},set channelInterpretation(t){for(const e of w)e.channelInterpretation=t;k=t},get context(){return M.context},get inputs(){return w},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},get onprocessorerror(){return I},set onprocessorerror(t){"function"==typeof I&&R.removeEventListener("processorerror",I),I="function"==typeof t?t:null,"function"==typeof I&&R.addEventListener("processorerror",I)},get parameters(){return P},get port(){return x.port2},addEventListener:(...t)=>M.addEventListener(t[0],t[1],t[2]),connect:t.bind(null,L),disconnect:l.bind(null,L),dispatchEvent:(...t)=>M.dispatchEvent(t[0]),removeEventListener:(...t)=>M.removeEventListener(t[0],t[1],t[2])},D=new Map;var N,F;x.port1.addEventListener=(N=x.port1.addEventListener,(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=D.get(t[1]);void 0!==n?t[1]=n:(t[1]=t=>{c(p.currentTime,p.sampleRate,(()=>e(t)))},D.set(e,t[1]))}}return N.call(x.port1,t[0],t[1],t[2])}),x.port1.removeEventListener=(F=x.port1.removeEventListener,(...t)=>{if("message"===t[0]){const e=D.get(t[1]);void 0!==e&&(D.delete(t[1]),t[1]=e)}return F.call(x.port1,t[0],t[1],t[2])});let j=null;Object.defineProperty(x.port1,"onmessage",{get:()=>j,set:t=>{"function"==typeof j&&x.port1.removeEventListener("message",j),j="function"==typeof t?t:null,"function"==typeof j&&(x.port1.addEventListener("message",j),x.port1.start())}}),m.prototype.port=x.port1;let U=null;((t,e,n,r)=>{let i=Un.get(t);void 0===i&&(i=new WeakMap,Un.set(t,i));const o=(async(t,e)=>new t(await(t=>new Promise(((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:t})=>{r.close(),i.close(),e(t)},r.onmessageerror=({data:t})=>{r.close(),i.close(),n(t)},i.postMessage(t)})))(e)))(n,r);return i.set(e,o),o})(p,R,m,v).then((t=>U=t));const z=jr(v.numberOfInputs,v.channelCount),B=jr(v.numberOfOutputs,g),V=void 0===m.parameterDescriptors?[]:m.parameterDescriptors.reduce(((t,{name:e})=>({...t,[e]:new Float32Array(128)})),{});let H=!0;const G=()=>{v.numberOfOutputs>0&&M.disconnect(C);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){const n=O[t];for(let r=0;r<g[t];r+=1)C.disconnect(n,e+r,r);e+=g[t]}},W=new Map;M.onaudioprocess=({inputBuffer:t,outputBuffer:e})=>{if(null!==U){const n=h(R);for(let r=0;r<A;r+=128){for(let e=0;e<v.numberOfInputs;e+=1)for(let n=0;n<v.channelCount;n+=1)Nr(t,z[e],n,n,r);void 0!==m.parameterDescriptors&&m.parameterDescriptors.forEach((({name:e},n)=>{Nr(t,V,e,y+n,r)}));for(let t=0;t<v.numberOfInputs;t+=1)for(let e=0;e<g[t];e+=1)0===B[t][e].byteLength&&(B[t][e]=new Float32Array(128));try{const t=z.map(((t,e)=>{if(n[e].size>0)return W.set(e,A/128),t;const r=W.get(e);return void 0===r?[]:(t.every((t=>t.every((t=>0===t))))&&(1===r?W.delete(e):W.set(e,r-1)),t)})),i=c(p.currentTime+r/p.sampleRate,p.sampleRate,(()=>U.process(t,B,V)));H=i;for(let t=0,n=0;t<v.numberOfOutputs;t+=1){for(let i=0;i<g[t];i+=1)Fr(e,B[t],i,n+i,r);n+=g[t]}}catch(t){H=!1,R.dispatchEvent(new ErrorEvent("processorerror",{colno:t.colno,filename:t.filename,lineno:t.lineno,message:t.message}))}if(!H){for(let t=0;t<v.numberOfInputs;t+=1){w[t].disconnect(E[t]);for(let e=0;e<v.channelCount;e+=1)E[r].disconnect(T,e,t*v.channelCount+e)}if(void 0!==m.parameterDescriptors){const t=m.parameterDescriptors.length;for(let e=0;e<t;e+=1){const t=S[e];t.disconnect(T,0,y+e),t.stop()}}T.disconnect(M),M.onaudioprocess=null,q?G():Q();break}}}};let q=!1;const X=a(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Y=()=>M.connect(X).connect(p.destination),Q=()=>{M.disconnect(X),X.disconnect()};return Y(),f(R,(()=>{if(H){Q(),v.numberOfOutputs>0&&M.connect(C);for(let t=0,e=0;t<v.numberOfOutputs;t+=1){const n=O[t];for(let r=0;r<g[t];r+=1)C.connect(n,e+r,r);e+=g[t]}}q=!0}),(()=>{H&&(Y(),G()),q=!1}))})(Ea,nr,Qr,Co,li,Io,fi,mi,vi,Ta,la,Ma,Ao),Oa=((t,e,n,r,i)=>(o,a,s,u,l,c)=>{if(null!==s)try{const e=new s(o,u,c),r=new Map;let a=null;if(Object.defineProperties(e,{channelCount:{get:()=>c.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>a,set:t=>{"function"==typeof a&&e.removeEventListener("processorerror",a),a="function"==typeof t?t:null,"function"==typeof a&&e.addEventListener("processorerror",a)}}}),e.addEventListener=(f=e.addEventListener,(...t)=>{if("processorerror"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=r.get(t[1]);void 0!==n?t[1]=n:(t[1]=n=>{"error"===n.type?(Object.defineProperties(n,{type:{value:"processorerror"}}),e(n)):e(new ErrorEvent(t[0],{...n}))},r.set(e,t[1]))}}return f.call(e,"error",t[1],t[2]),f.call(e,...t)}),e.removeEventListener=(h=e.removeEventListener,(...t)=>{if("processorerror"===t[0]){const e=r.get(t[1]);void 0!==e&&(r.delete(t[1]),t[1]=e)}return h.call(e,"error",t[1],t[2]),h.call(e,t[0],t[1],t[2])}),0!==c.numberOfOutputs){const t=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(o.destination),i(e,(()=>t.disconnect()),(()=>t.connect(o.destination)))}return e}catch(t){if(11===t.code)throw r();throw t}var h,f;if(void 0===l)throw r();return(t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}})(c),e(o,a,l,c)})(Qr,Ca,fi,vi,Ao),Pa=((t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m)=>(v,g,y)=>{const b=new WeakMap;let _=null;return{render(x,w,E){s(w,x);const S=b.get(w);return void 0!==S?Promise.resolve(S):(async(s,x,w)=>{let E=c(s),S=null;const T=tr(E,x),A=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(null===h){const t=A.reduce(((t,e)=>t+e),0),n=i(x,{channelCount:Math.max(1,t),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,t)}),o=[];for(let t=0;t<s.numberOfOutputs;t+=1)o.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:A[t]}));const l=a(x,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});l.connect=e.bind(null,o),l.disconnect=u.bind(null,o),S=[n,o,l]}else T||(E=new h(x,v));if(b.set(x,null===S?E:S[2]),null!==S){if(null===_){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===f)throw new Error("Missing the native OfflineAudioContext constructor.");const t=s.channelCount*s.numberOfInputs,e=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,n=t+e,u=async()=>{const u=new f(n,128*Math.ceil(s.context.length/128),x.sampleRate),l=[],c=[];for(let t=0;t<g.numberOfInputs;t+=1)l.push(a(u,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),c.push(i(u,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const h=await Promise.all(Array.from(s.parameters.values()).map((async t=>{const e=o(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:t.value});return await p(u,t,e.offset,w),e}))),v=r(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,t+e)});for(let t=0;t<g.numberOfInputs;t+=1){l[t].connect(c[t]);for(let e=0;e<g.channelCount;e+=1)c[t].connect(v,e,t*g.channelCount+e)}for(const[e,n]of h.entries())n.connect(v,0,t+e),n.start(0);return v.connect(u.destination),await Promise.all(l.map((t=>d(s,u,t,w)))),m(u)};_=Ur(s,0===n?null:await u(),x,g,A,y,l)}const t=await _,e=n(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[u,c,h]=S;null!==t&&(e.buffer=t,e.start(0)),e.connect(u);for(let t=0,e=0;t<s.numberOfOutputs;t+=1){const n=c[t];for(let r=0;r<A[t];r+=1)u.connect(n,e+r,r);e+=A[t]}return h}if(T)for(const[e,n]of s.parameters.entries())await t(x,n,E.parameters.get(e),w);else for(const[t,e]of s.parameters.entries())await p(x,e,E.parameters.get(t),w);return await d(s,x,E,w),E})(x,w,E)}}})(mo,Ea,vo,Co,li,Io,fi,Sa,Ta,la,Sr,fa,Yi,go,Gi,Bo),ka=(t=>e=>t.get(e))(ca),Ia=(t=>(e,n)=>{t.set(e,n)})(Aa),La=ua?((t,e,n,r,i,o,a,s,u,l,c,h,f)=>class extends e{constructor(e,c,f){var p;const d=s(e),m=u(d),v=(t=>({...t,outputChannelCount:void 0!==t.outputChannelCount?t.outputChannelCount:1===t.numberOfInputs&&1===t.numberOfOutputs?[t.channelCount]:Array.from({length:t.numberOfOutputs},(()=>1))}))({...Dr,...f}),g=jn.get(d),y=null==g?void 0:g.get(c),b=m||"closed"!==d.state?d:null!==(p=a(d))&&void 0!==p?p:d,_=i(b,m?null:e.baseLatency,l,c,y,v);super(e,!0,_,m?r(c,v,y):null);const x=[];_.parameters.forEach(((t,e)=>{const r=n(this,m,t);x.push([e,r])})),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new Rr(x),m&&t(d,this);const{activeInputs:w}=o(this);h(_,w)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(t){const e="function"==typeof t?f(this,t):null;this._nativeAudioWorkletNode.onprocessorerror=e;const n=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==n&&n===e?t:n}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(wa,no,bo,Pa,Oa,lr,ka,qi,Qi,fa,0,Ia,Ii):void 0,Ra=((t,e)=>(n,r,i)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(n,r,i)}catch(e){if("SyntaxError"===e.name)throw t();throw e}})(vi,Yi),Da=((t,e,n,r,i,o,a,s)=>{const u=[];return(l,c)=>n(l).render(l,c,u).then((()=>Promise.all(Array.from(r(c)).map((t=>n(t).render(t,c,u)))))).then((()=>i(c))).then((n=>("function"!=typeof n.copyFromChannel?(a(n),rr(n)):e(o,(()=>o(n)))||s(n),t.add(n),n)))})(oo,ji,Hi,xa,Bo,er,lo,co),Na=((t,e,n,r,i)=>class extends t{constructor(t,n,i){let o;if("number"==typeof t&&void 0!==n&&void 0!==i)o={length:n,numberOfChannels:t,sampleRate:i};else{if("object"!=typeof t)throw new Error("The given parameters are not valid.");o=t}const{length:a,numberOfChannels:s,sampleRate:u}={...gi,...o},l=r(s,a,u);e(ti,(()=>ti(l)))||l.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(l.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(l,s),this._length=a,this._nativeOfflineAudioContext=l,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(n()):(this._state="running",i(this.destination,this._nativeOfflineAudioContext).finally((()=>{this._state=null,fr(this)})))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout((()=>this._waitForThePromiseToSettle(t)))}})(ma,ji,Qr,Ra,Da),Fa=((t,e)=>n=>{const r=t.get(n);return e(r)||e(n)})(Dn,Ji),ja=((t,e)=>n=>t.has(n)||e(n))(In,to),Ua=((t,e)=>n=>t.has(n)||e(n))(Rn,eo),za=((t,e)=>n=>{const r=t.get(n);return e(r)||e(n)})(Dn,Qi),Ba=()=>(async(t,e,n,r,i,o,a,s,u,l,c,h,f,p,d,m)=>!!(t(e,e)&&t(n,n)&&t(i,i)&&t(o,o)&&t(s,s)&&t(u,u)&&t(l,l)&&t(c,c)&&t(h,h)&&t(f,f)&&t(p,p))&&(await Promise.all([t(r,r),t(a,a),t(d,d),t(m,m)])).every((t=>t)))(ji,(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createBuffer(1,1,44100);if(void 0===e.copyToChannel)return!0;const n=new Float32Array(2);try{e.copyFromChannel(n,0,0)}catch{return!1}return!0})(Yi),(t=>()=>{if(null===t)return!1;if(void 0!==t.prototype&&void 0!==t.prototype.close)return!0;const e=new t,n=void 0!==e.close;try{e.close()}catch{}return n})($i),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);return new Promise((t=>{let n=!0;const r=r=>{n&&(n=!1,e.startRendering(),t(r instanceof TypeError))};let i;try{i=e.decodeAudioData(null,(()=>{}),r)}catch(t){r(t)}void 0!==i&&i.catch(r)}))})(Yi),(t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0})($i),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createGain(),n=e.connect(e)===e;return e.disconnect(e),n})(Yi),((t,e)=>async()=>{if(null===t)return!0;if(null===e)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(){this.port.postMessage(0)}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,8e3),i=URL.createObjectURL(n);let o=!1;try{await r.audioWorklet.addModule(i);const e=new t(r,"a",{numberOfOutputs:0}),n=r.createOscillator();e.port.onmessage=()=>o=!0,n.connect(e),n.start(0),await r.startRendering(),o||await new Promise((t=>setTimeout(t,5)))}catch{}finally{URL.revokeObjectURL(i)}return o})(fa,Yi),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createChannelMerger();if("max"===e.channelCountMode)return!0;try{e.channelCount=2}catch{return!0}return!1})(Yi),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100);return void 0===e.createConstantSource||e.createConstantSource().offset.maxValue!==Number.POSITIVE_INFINITY})(Yi),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100),n=e.createConvolver();n.buffer=e.createBuffer(1,1,e.sampleRate);try{n.buffer=e.createBuffer(1,1,e.sampleRate)}catch{return!1}return!0})(Yi),(t=>()=>{if(null===t)return!1;const e=new t(1,1,44100).createConvolver();try{e.channelCount=1}catch{return!1}return!0})(Yi),Oi,(t=>()=>null!==t&&t.hasOwnProperty("isSecureContext"))(Bi),(t=>()=>{if(null===t)return!1;const e=new t;try{return e.createMediaStreamSource(new MediaStream),!1}catch(t){return!0}})($i),(t=>()=>{if(null===t)return Promise.resolve(!1);const e=new t(1,1,44100);if(void 0===e.createStereoPanner)return Promise.resolve(!0);if(void 0===e.createConstantSource)return Promise.resolve(!0);const n=e.createConstantSource(),r=e.createStereoPanner();return n.channelCount=1,n.offset.value=1,r.channelCount=1,n.start(),n.connect(r).connect(e.destination),e.startRendering().then((t=>1!==t.getChannelData(0)[0]))})(Yi),Pi);var Va;function Ha(t,e){if(!t)throw new Error(e)}function Ga(t,e,n=1/0){if(!(e<=t&&t<=n))throw new RangeError(`Value must be within [${e}, ${n}], got: ${t}`)}function Wa(t){t.isOffline||"running"===t.state||Qa('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let qa=console;function Xa(t){qa=t}function Ya(...t){qa.log(...t)}function Qa(...t){qa.warn(...t)}function Za(t){return void 0===t}function Ka(t){return!Za(t)}function $a(t){return"function"==typeof t}function Ja(t){return"number"==typeof t}function ts(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function es(t){return"boolean"==typeof t}function ns(t){return Array.isArray(t)}function rs(t){return"string"==typeof t}function is(t){return rs(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}const os="object"==typeof self?self:null,as=os&&(os.hasOwnProperty("AudioContext")||os.hasOwnProperty("webkitAudioContext"));function ss(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function us(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}Object.create,Object.create;class ls{constructor(t,e,n){this._callback=t,this._type=e,this._updateInterval=n,this._createClock()}_createWorker(){const t=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),e=URL.createObjectURL(t),n=new Worker(e);n.onmessage=this._callback.bind(this),this._worker=n}_createTimeout(){this._timeout=setTimeout((()=>{this._createTimeout(),this._callback()}),1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))}get type(){return this._type}set type(t){this._disposeClock(),this._type=t,this._createClock()}dispose(){this._disposeClock()}}function cs(t){return Ua(t)}function hs(t){return ja(t)}function fs(t){return za(t)}function ps(t){return Fa(t)}function ds(t){return t instanceof AudioBuffer}function ms(t,e){return"value"===t||cs(e)||hs(e)||ds(e)}function vs(t,...e){if(!e.length)return t;const n=e.shift();if(ts(t)&&ts(n))for(const e in n)ms(e,n[e])?t[e]=n[e]:ts(n[e])?(t[e]||Object.assign(t,{[e]:{}}),vs(t[e],n[e])):Object.assign(t,{[e]:n[e]});return vs(t,...e)}function gs(t,e,n=[],r){const i={},o=Array.from(e);if(ts(o[0])&&r&&!Reflect.has(o[0],r)&&(Object.keys(o[0]).some((e=>Reflect.has(t,e)))||(vs(i,{[r]:o[0]}),n.splice(n.indexOf(r),1),o.shift())),1===o.length&&ts(o[0]))vs(i,o[0]);else for(let t=0;t<n.length;t++)Ka(o[t])&&(i[n[t]]=o[t]);return vs(t,i)}function ys(t,e){return Za(t)?e:t}function bs(t,e){return e.forEach((e=>{Reflect.has(t,e)&&delete t[e]})),t}class _s{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||os&&this.toString()===os.TONE_DEBUG_CLASS)&&Ya(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}_s.version=Cn;const xs=1e-6;function ws(t,e){return t>e+xs}function Es(t,e){return ws(t,e)||Ts(t,e)}function Ss(t,e){return t+xs<e}function Ts(t,e){return Math.abs(t-e)<xs}function As(t,e,n){return Math.max(Math.min(t,n),e)}class Ms extends _s{constructor(){super(),this.name="Timeline",this._timeline=[];const t=gs(Ms.getDefaults(),arguments,["memory"]);this.memory=t.memory,this.increasing=t.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(t){if(Ha(Reflect.has(t,"time"),"Timeline: events must have a time attribute"),t.time=t.time.valueOf(),this.increasing&&this.length){const e=this._timeline[this.length-1];Ha(Es(t.time,e.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(t)}else{const e=this._search(t.time);this._timeline.splice(e+1,0,t)}if(this.length>this.memory){const t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(t){const e=this._timeline.indexOf(t);return-1!==e&&this._timeline.splice(e,1),this}get(t,e="time"){const n=this._search(t,e);return-1!==n?this._timeline[n]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(t,e="time"){const n=this._search(t,e);return n+1<this._timeline.length?this._timeline[n+1]:null}getBefore(t){const e=this._timeline.length;if(e>0&&this._timeline[e-1].time<t)return this._timeline[e-1];const n=this._search(t);return n-1>=0?this._timeline[n-1]:null}cancel(t){if(this._timeline.length>1){let e=this._search(t);if(e>=0)if(Ts(this._timeline[e].time,t)){for(let n=e;n>=0&&Ts(this._timeline[n].time,t);n--)e=n;this._timeline=this._timeline.slice(0,e)}else this._timeline=this._timeline.slice(0,e+1);else this._timeline=[]}else 1===this._timeline.length&&Es(this._timeline[0].time,t)&&(this._timeline=[]);return this}cancelBefore(t){const e=this._search(t);return e>=0&&(this._timeline=this._timeline.slice(e+1)),this}previousEvent(t){const e=this._timeline.indexOf(t);return e>0?this._timeline[e-1]:null}_search(t,e="time"){if(0===this._timeline.length)return-1;let n=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][e]<=t)return r-1;for(;n<i;){let r=Math.floor(n+(i-n)/2);const o=this._timeline[r],a=this._timeline[r+1];if(Ts(o[e],t)){for(let n=r;n<this._timeline.length&&Ts(this._timeline[n][e],t);n++)r=n;return r}if(Ss(o[e],t)&&ws(a[e],t))return r;ws(o[e],t)?i=r:n=r+1}return-1}_iterate(t,e=0,n=this._timeline.length-1){this._timeline.slice(e,n+1).forEach(t)}forEach(t){return this._iterate(t),this}forEachBefore(t,e){const n=this._search(t);return-1!==n&&this._iterate(e,0,n),this}forEachAfter(t,e){const n=this._search(t);return this._iterate(e,n+1),this}forEachBetween(t,e,n){let r=this._search(t),i=this._search(e);return-1!==r&&-1!==i?(this._timeline[r].time!==t&&(r+=1),this._timeline[i].time===e&&(i-=1),this._iterate(n,r,i)):-1===r&&this._iterate(n,0,i),this}forEachFrom(t,e){let n=this._search(t);for(;n>=0&&this._timeline[n].time>=t;)n--;return this._iterate(e,n+1),this}forEachAtTime(t,e){const n=this._search(t);if(-1!==n&&Ts(this._timeline[n].time,t)){let r=n;for(let e=n;e>=0&&Ts(this._timeline[e].time,t);e--)r=e;this._iterate((t=>{e(t)}),r,n)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const Cs=[];function Os(t){Cs.push(t)}const Ps=[];function ks(t){Ps.push(t)}class Is extends _s{constructor(){super(...arguments),this.name="Emitter"}on(t,e){return t.split(/\W+/).forEach((t=>{Za(this._events)&&(this._events={}),this._events.hasOwnProperty(t)||(this._events[t]=[]),this._events[t].push(e)})),this}once(t,e){const n=(...r)=>{e(...r),this.off(t,n)};return this.on(t,n),this}off(t,e){return t.split(/\W+/).forEach((n=>{if(Za(this._events)&&(this._events={}),this._events.hasOwnProperty(t))if(Za(e))this._events[t]=[];else{const n=this._events[t];for(let t=n.length-1;t>=0;t--)n[t]===e&&n.splice(t,1)}})),this}emit(t,...e){if(this._events&&this._events.hasOwnProperty(t)){const n=this._events[t].slice(0);for(let t=0,r=n.length;t<r;t++)n[t].apply(this,e)}return this}static mixin(t){["on","once","off","emit"].forEach((e=>{const n=Object.getOwnPropertyDescriptor(Is.prototype,e);Object.defineProperty(t.prototype,e,n)}))}dispose(){return super.dispose(),this._events=void 0,this}}class Ls extends Is{constructor(){super(...arguments),this.isOffline=!1}}class Rs extends Ls{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Ms,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const t=gs(Rs.getDefaults(),arguments,["context"]);t.context?this._context=t.context:this._context=function(t){return new _a(t)}({latencyHint:t.latencyHint}),this._ticker=new ls(this.emit.bind(this,"tick"),t.clockSource,t.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(t.latencyHint),this.lookAhead=t.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){var t;return this._initialized||(t=this,Cs.forEach((e=>e(t))),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(t,e,n){return this._context.createBuffer(t,e,n)}createChannelMerger(t){return this._context.createChannelMerger(t)}createChannelSplitter(t){return this._context.createChannelSplitter(t)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(t){return this._context.createDelay(t)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(t,e){return this._context.createIIRFilter(t,e)}createPanner(){return this._context.createPanner()}createPeriodicWave(t,e,n){return this._context.createPeriodicWave(t,e,n)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(t){return Ha(ps(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)}createMediaStreamDestination(){return Ha(ps(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(t){return this._context.decodeAudioData(t)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(t){Ha(!this._initialized,"The listener cannot be set after initialization."),this._listener=t}get transport(){return this.initialize(),this._transport}set transport(t){Ha(!this._initialized,"The transport cannot be set after initialization."),this._transport=t}get draw(){return this.initialize(),this._draw}set draw(t){Ha(!this._initialized,"Draw cannot be set after initialization."),this._draw=t}get destination(){return this.initialize(),this._destination}set destination(t){Ha(!this._initialized,"The destination cannot be set after initialization."),this._destination=t}createAudioWorkletNode(t,e){return function(t,e,n){return Ha(Ka(La),"This node only works in a secure context (https or localhost)"),new La(t,e,n)}(this.rawContext,t,e)}addAudioWorkletModule(t,e){return us(this,void 0,void 0,(function*(){Ha(Ka(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(e)||this._workletModules.set(e,this.rawContext.audioWorklet.addModule(t)),yield this._workletModules.get(e)}))}workletsAreReady(){return us(this,void 0,void 0,(function*(){const t=[];this._workletModules.forEach((e=>t.push(e))),yield Promise.all(t)}))}get updateInterval(){return this._ticker.updateInterval}set updateInterval(t){this._ticker.updateInterval=t}get clockSource(){return this._ticker.type}set clockSource(t){this._ticker.type=t}get latencyHint(){return this._latencyHint}_setLatencyHint(t){let e=0;if(this._latencyHint=t,rs(t))switch(t){case"interactive":e=.1;break;case"playback":e=.5;break;case"balanced":e=.25}this.lookAhead=e,this.updateInterval=e/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return"suspended"===this._context.state&&ps(this._context)?this._context.resume():Promise.resolve()}close(){return us(this,void 0,void 0,(function*(){var t;ps(this._context)&&(yield this._context.close()),this._initialized&&(t=this,Ps.forEach((e=>e(t))))}))}getConstant(t){if(this._constants.has(t))return this._constants.get(t);{const e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0);for(let e=0;e<n.length;e++)n[e]=t;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map((t=>this._constants[t].disconnect())),this}_timeoutLoop(){const t=this.now();let e=this._timeouts.peek();for(;this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()}setTimeout(t,e){this._timeoutIds++;const n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds}clearTimeout(t){return this._timeouts.forEach((e=>{e.id===t&&this._timeouts.remove(e)})),this}clearInterval(t){return this.clearTimeout(t)}setInterval(t,e){const n=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{t(),r()},id:n,time:i+e})};return r(),n}}function Ds(t,e){ns(e)?e.forEach((e=>Ds(t,e))):Object.defineProperty(t,e,{enumerable:!0,writable:!1})}function Ns(t,e){ns(e)?e.forEach((e=>Ns(t,e))):Object.defineProperty(t,e,{writable:!0})}const Fs=()=>{};class js extends _s{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Fs;const t=gs(js.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&ds(t.url)||t.url instanceof js?this.set(t.url):rs(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Fs,onload:Fs,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:Vs().sampleRate}set(t){return t instanceof js?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return us(this,void 0,void 0,(function*(){const e=js.load(t).then((t=>{this.set(t),this.onload(this)}));js.downloads.push(e);try{yield e}finally{const t=js.downloads.indexOf(e);js.downloads.splice(t,1)}return this}))}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const e=ns(t)&&t[0].length>0,n=e?t.length:1,r=e?t[0].length:t.length,i=Vs(),o=i.createBuffer(n,r,i.sampleRate),a=e||1!==n?t:[t];for(let t=0;t<n;t++)o.copyToChannel(a[t],t);return this._buffer=o,this}toMono(t){if(Ja(t))this.fromArray(this.toArray(t));else{let t=new Float32Array(this.length);const e=this.numberOfChannels;for(let n=0;n<e;n++){const e=this.toArray(n);for(let n=0;n<e.length;n++)t[n]+=e[n]}t=t.map((t=>t/e)),this.fromArray(t)}return this}toArray(t){if(Ja(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const t=[];for(let e=0;e<this.numberOfChannels;e++)t[e]=this.getChannelData(e);return t}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,e=this.duration){const n=Math.floor(t*this.sampleRate),r=Math.floor(e*this.sampleRate);Ha(n<r,"The start time must be less than the end time");const i=r-n,o=Vs().createBuffer(this.numberOfChannels,i,this.sampleRate);for(let t=0;t<this.numberOfChannels;t++)o.copyToChannel(this.getChannelData(t).subarray(n,r),t);return new js(o)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new js).fromArray(t)}static fromUrl(t){return us(this,void 0,void 0,(function*(){const e=new js;return yield e.load(t)}))}static load(t){return us(this,void 0,void 0,(function*(){const e=t.match(/\[(.+\|?)+\]$/);if(e){const n=e[1].split("|");let r=n[0];for(const t of n)if(js.supportsType(t)){r=t;break}t=t.replace(e[0],r)}const n=""===js.baseUrl||js.baseUrl.endsWith("/")?js.baseUrl:js.baseUrl+"/",r=yield fetch(n+t);if(!r.ok)throw new Error(`could not load url: ${t}`);const i=yield r.arrayBuffer();return yield Vs().decodeAudioData(i)}))}static supportsType(t){const e=t.split("."),n=e[e.length-1];return""!==document.createElement("audio").canPlayType("audio/"+n)}static loaded(){return us(this,void 0,void 0,(function*(){for(yield Promise.resolve();js.downloads.length;)yield js.downloads[0]}))}}js.baseUrl="",js.downloads=[];class Us extends Rs{constructor(){var t,e,n;super({clockSource:"offline",context:fs(arguments[0])?arguments[0]:(t=arguments[0],e=arguments[1]*arguments[2],n=arguments[2],new Na(t,e,n)),lookAhead:0,updateInterval:fs(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=fs(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(t){return us(this,void 0,void 0,(function*(){let e=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,e++;const n=Math.floor(this.sampleRate/128);t&&e%n==0&&(yield new Promise((t=>setTimeout(t,1))))}}))}render(t=!0){return us(this,void 0,void 0,(function*(){yield this.workletsAreReady(),yield this._renderClock(t);const e=yield this._context.startRendering();return new js(e)}))}close(){return Promise.resolve()}}const zs=new class extends Ls{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(t,e,n){return{}}createChannelMerger(t){return{}}createChannelSplitter(t){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(t){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(t,e){return{}}createPanner(){return{}}createPeriodicWave(t,e,n){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(t){return{}}createMediaStreamDestination(){return{}}decodeAudioData(t){return Promise.resolve({})}createAudioWorkletNode(t,e){return{}}get rawContext(){return{}}addAudioWorkletModule(t,e){return us(this,void 0,void 0,(function*(){return Promise.resolve()}))}resume(){return Promise.resolve()}setTimeout(t,e){return 0}clearTimeout(t){return this}setInterval(t,e){return 0}clearInterval(t){return this}getConstant(t){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(t){}get destination(){return{}}set destination(t){}now(){return 0}immediate(){return 0}};let Bs=zs;function Vs(){return Bs===zs&&as&&Hs(new Rs),Bs}function Hs(t){Bs=ps(t)?new Rs(t):fs(t)?new Us(t):t}function Gs(){return Bs.resume()}if(os&&!os.TONE_SILENCE_LOGGING){let t="v";"dev"===Cn&&(t="");const e=` * Tone.js ${t}${Cn} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function Ws(t){return Math.pow(10,t/20)}function qs(t){return Math.log(t)/Math.LN10*20}function Xs(t){return Math.pow(2,t/12)}let Ys=440;function Qs(t){return Math.round(Zs(t))}function Zs(t){return 69+12*Math.log2(t/Ys)}function Ks(t){return Ys*Math.pow(2,(t-69)/12)}class $s extends _s{constructor(t,e,n){super(),this.defaultUnits="s",this._val=e,this._units=n,this.context=t,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:t=>this._frequencyToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:t=>this._ticksToUnits(parseInt(t,10)),regexp:/^(\d+)i$/i},m:{method:t=>this._beatsToUnits(parseInt(t,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(t,e)=>{const n=parseInt(t,10),r="."===e?1.5:1;return 1===n?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/n)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:t=>this._expressions[this.defaultUnits].method.call(this,t),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:t=>this._secondsToUnits(parseFloat(t)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:t=>parseInt(t,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:t=>{const e=parseInt(t,10);return this._beatsToUnits(8/(3*Math.floor(e)))},regexp:/^(\d+)t$/i},tr:{method:(t,e,n)=>{let r=0;return t&&"0"!==t&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r+=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r+=this._beatsToUnits(parseFloat(n)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof $s&&this.fromType(this._val),Za(this._val))return this._noArg();if(rs(this._val)&&Za(this._units)){for(const t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if(ts(this._val)){let t=0;for(const e in this._val)if(Ka(this._val[e])){const n=this._val[e];t+=new this.constructor(this.context,e).valueOf()*n}return t}if(Ka(this._units)){const t=this._expressions[this._units],e=this._val.toString().trim().match(t.regexp);return e?t.method.apply(this,e.slice(1)):t.method.call(this,this._val)}return rs(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(t){return 1/t}_beatsToUnits(t){return 60/this._getBpm()*t}_secondsToUnits(t){return t}_ticksToUnits(t){return t*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class Js extends $s{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:t=>this._now()+new this.constructor(this.context,t).valueOf(),regexp:/^\+(.+)/},quantize:{method:t=>{const e=new Js(this.context,t).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(e))},regexp:/^@(.+)/}})}quantize(t,e=1){const n=new this.constructor(this.context,t).valueOf(),r=this.valueOf();return r+(Math.round(r/n)*n-r)*e}toNotation(){const t=this.toSeconds(),e=["1m"];for(let t=1;t<9;t++){const n=Math.pow(2,t);e.push(n+"n."),e.push(n+"n"),e.push(n+"t")}e.push("0");let n=e[0],r=new Js(this.context,e[0]).toSeconds();return e.forEach((e=>{const i=new Js(this.context,e).toSeconds();Math.abs(i-t)<Math.abs(r-t)&&(n=e,r=i)})),n}toBarsBeatsSixteenths(){const t=this._beatsToUnits(1);let e=this.valueOf()/t;e=parseFloat(e.toFixed(4));const n=Math.floor(e/this._getTimeSignature());let r=e%1*4;e=Math.floor(e)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[n,e,r].join(":")}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return Qs(this.toFrequency())}_now(){return this.context.now()}}function tu(t,e){return new Js(Vs(),t,e)}class eu extends Js{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return Ys}static set A4(t){!function(t){Ys=t}(t)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(t){return"midi"===this.defaultUnits?t:eu.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(t,e){const n=nu[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?n:eu.mtof(n)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(t,e,n){let r=1;return t&&"0"!==t&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(r*=this._beatsToUnits(parseFloat(e))),n&&"0"!==n&&(r*=this._beatsToUnits(parseFloat(n)/4)),r}}})}transpose(t){return new eu(this.context,this.valueOf()*Xs(t))}harmonize(t){return t.map((t=>this.transpose(t)))}toMidi(){return Qs(this.valueOf())}toNote(){const t=this.toFrequency(),e=Math.log2(t/eu.A4);let n=Math.round(12*e)+57;const r=Math.floor(n/12);return r<0&&(n+=-12*r),ru[n%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(t){return t}_ticksToUnits(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))}_beatsToUnits(t){return 1/super._beatsToUnits(t)}_secondsToUnits(t){return 1/t}static mtof(t){return Ks(t)}static ftom(t){return Qs(t)}}const nu={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},ru=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function iu(t,e){return new eu(Vs(),t,e)}class ou extends Js{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}function au(t,e){return new ou(Vs(),t,e)}class su extends _s{constructor(){super();const t=gs(su.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=t.context}static getDefaults(){return{context:Vs()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(t){return new Js(this.context,t).toSeconds()}toFrequency(t){return new eu(this.context,t).toFrequency()}toTicks(t){return new ou(this.context,t).toTicks()}_getPartialProperties(t){const e=this.get();return Object.keys(e).forEach((n=>{Za(t[n])&&delete e[n]})),e}get(){const t=this.constructor.getDefaults();return Object.keys(t).forEach((e=>{if(Reflect.has(this,e)){const n=this[e];Ka(n)&&Ka(n.value)&&Ka(n.setValueAtTime)?t[e]=n.value:n instanceof su?t[e]=n._getPartialProperties(t[e]):ns(n)||Ja(n)||rs(n)||es(n)?t[e]=n:delete t[e]}})),t}set(t){return Object.keys(t).forEach((e=>{Reflect.has(this,e)&&Ka(this[e])&&(this[e]&&Ka(this[e].value)&&Ka(this[e].setValueAtTime)?this[e].value!==t[e]&&(this[e].value=t[e]):this[e]instanceof su?this[e].set(t[e]):this[e]=t[e])})),this}}class uu extends Ms{constructor(t="stopped"){super(),this.name="StateTimeline",this._initial=t,this.setStateAtTime(this._initial,0)}getValueAtTime(t){const e=this.get(t);return null!==e?e.state:this._initial}setStateAtTime(t,e,n){return Ga(e,0),this.add(Object.assign({},n,{state:t,time:e})),this}getLastState(t,e){for(let n=this._search(e);n>=0;n--){const e=this._timeline[n];if(e.state===t)return e}}getNextState(t,e){const n=this._search(e);if(-1!==n)for(let e=n;e<this._timeline.length;e++){const n=this._timeline[e];if(n.state===t)return n}}}class lu extends su{constructor(){super(gs(lu.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const t=gs(lu.getDefaults(),arguments,["param","units","convert"]);for(Ha(Ka(t.param)&&(cs(t.param)||t.param instanceof lu),"param must be an AudioParam");!cs(t.param);)t.param=t.param._param;this._swappable=!!Ka(t.swappable)&&t.swappable,this._swappable?(this.input=this.context.createGain(),this._param=t.param,this.input.connect(this._param)):this._param=this.input=t.param,this._events=new Ms(1e3),this._initialValue=this._param.defaultValue,this.units=t.units,this.convert=t.convert,this._minValue=t.minValue,this._maxValue=t.maxValue,Ka(t.value)&&t.value!==this._toType(this._initialValue)&&this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(su.getDefaults(),{convert:!0,units:"number"})}get value(){const t=this.now();return this.getValueAtTime(t)}set value(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())}get minValue(){return Ka(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ka(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(t,e){return this.units===e}_assertRange(t){return Ka(this.maxValue)&&Ka(this.minValue)&&Ga(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t}_fromType(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?Ws(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t}_toType(t){return this.convert&&"decibels"===this.units?qs(t):t}setValueAtTime(t,e){const n=this.toSeconds(e),r=this._fromType(t);return Ha(isFinite(r)&&isFinite(n),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",t,n),this._events.add({time:n,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,n),this}getValueAtTime(t){const e=Math.max(this.toSeconds(t),0),n=this._events.getAfter(e),r=this._events.get(e);let i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"!==r.type||null!==n&&"setValueAtTime"!==n.type)if(null===n)i=r.value;else if("linearRampToValueAtTime"===n.type||"exponentialRampToValueAtTime"===n.type){let t=r.value;if("setTargetAtTime"===r.type){const e=this._events.getBefore(r.time);t=null===e?this._initialValue:e.value}i="linearRampToValueAtTime"===n.type?this._linearInterpolate(r.time,t,n.time,n.value,e):this._exponentialInterpolate(r.time,t,n.time,n.value,e)}else i=r.value;else{const t=this._events.getBefore(r.time);let n;n=null===t?this._initialValue:t.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,n,r.value,r.constant,e))}return this._toType(i)}setRampPoint(t){t=this.toSeconds(t);let e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this}linearRampToValueAtTime(t,e){const n=this._fromType(t),r=this.toSeconds(e);return Ha(isFinite(n)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._assertRange(n),this._events.add({time:r,type:"linearRampToValueAtTime",value:n}),this.log(this.units,"linearRampToValueAtTime",t,r),this._param.linearRampToValueAtTime(n,r),this}exponentialRampToValueAtTime(t,e){let n=this._fromType(t);n=Math.max(this._minOutput,n),this._assertRange(n);const r=this.toSeconds(e);return Ha(isFinite(n)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:n}),this.log(this.units,"exponentialRampToValueAtTime",t,r),this._param.exponentialRampToValueAtTime(n,r),this}exponentialRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialRampToValueAtTime(t,n+this.toSeconds(e)),this}linearRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.linearRampToValueAtTime(t,n+this.toSeconds(e)),this}targetRampTo(t,e,n){return n=this.toSeconds(n),this.setRampPoint(n),this.exponentialApproachValueAtTime(t,n,e),this}exponentialApproachValueAtTime(t,e,n){e=this.toSeconds(e),n=this.toSeconds(n);const r=Math.log(n+1)/Math.log(200);return this.setTargetAtTime(t,e,r),this.cancelAndHoldAtTime(e+.9*n),this.linearRampToValueAtTime(t,e+n),this}setTargetAtTime(t,e,n){const r=this._fromType(t);Ha(isFinite(n)&&n>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(e);return this._assertRange(r),Ha(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(t)}, ${JSON.stringify(e)}`),this._events.add({constant:n,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",t,i,n),this._param.setTargetAtTime(r,i,n),this}setValueCurveAtTime(t,e,n,r=1){n=this.toSeconds(n),e=this.toSeconds(e);const i=this._fromType(t[0])*r;this.setValueAtTime(this._toType(i),e);const o=n/(t.length-1);for(let n=1;n<t.length;n++){const i=this._fromType(t[n])*r;this.linearRampToValueAtTime(this._toType(i),e+n*o)}return this}cancelScheduledValues(t){const e=this.toSeconds(t);return Ha(isFinite(e),`Invalid argument to cancelScheduledValues: ${JSON.stringify(t)}`),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this}cancelAndHoldAtTime(t){const e=this.toSeconds(t),n=this._fromType(this.getValueAtTime(e));Ha(isFinite(e),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(t)}`),this.log(this.units,"cancelAndHoldAtTime",e,"value="+n);const r=this._events.get(e),i=this._events.getAfter(e);return r&&Ts(r.time,e)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(n),e):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(n),e)),this._events.add({time:e,type:"setValueAtTime",value:n}),this._param.setValueAtTime(n,e),this}rampTo(t,e=.1,n){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,n):this.linearRampTo(t,e,n),this}apply(t){const e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);const n=this._events.get(e);if(n&&"setTargetAtTime"===n.type){const r=this._events.getAfter(n.time),i=r?r.time:e+2,o=(i-e)/10;for(let n=e;n<i;n+=o)t.linearRampToValueAtTime(this.getValueAtTime(n),n)}return this._events.forEachAfter(this.context.currentTime,(e=>{"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)})),this}setParam(t){Ha(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(t,e,n,r,i){return n+(e-n)*Math.exp(-(i-t)/r)}_linearInterpolate(t,e,n,r,i){return e+(i-t)/(n-t)*(r-e)}_exponentialInterpolate(t,e,n,r,i){return e*Math.pow(r/e,(i-t)/(n-t))}}class cu extends su{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Ka(this.input)?cs(this.input)||this.input instanceof lu?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ka(this.output)?this.output.numberOfOutputs:0}_isAudioNode(t){return Ka(t)&&(t instanceof cu||hs(t))}_getInternalNodes(){const t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t}_setChannelProperties(t){this._getInternalNodes().forEach((e=>{e.channelCount=t.channelCount,e.channelCountMode=t.channelCountMode,e.channelInterpretation=t.channelInterpretation}))}_getChannelProperties(){const t=this._getInternalNodes();Ha(t.length>0,"ToneAudioNode does not have any internal nodes");const e=t[0];return{channelCount:e.channelCount,channelCountMode:e.channelCountMode,channelInterpretation:e.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCount:t}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelCountMode:t}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(t){const e=this._getChannelProperties();this._setChannelProperties(Object.assign(e,{channelInterpretation:t}))}connect(t,e=0,n=0){return fu(this,t,e,n),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return Qa("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(t,e=0,n=0){return pu(this,t,e,n),this}chain(...t){return hu(this,...t),this}fan(...t){return t.forEach((t=>this.connect(t))),this}dispose(){return super.dispose(),Ka(this.input)&&(this.input instanceof cu?this.input.dispose():hs(this.input)&&this.input.disconnect()),Ka(this.output)&&(this.output instanceof cu?this.output.dispose():hs(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function hu(...t){const e=t.shift();t.reduce(((t,e)=>(t instanceof cu?t.connect(e):hs(t)&&fu(t,e),e)),e)}function fu(t,e,n=0,r=0){for(Ha(Ka(t),"Cannot connect from undefined node"),Ha(Ka(e),"Cannot connect to undefined node"),(e instanceof cu||hs(e))&&Ha(e.numberOfInputs>0,"Cannot connect to node with no inputs"),Ha(t.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof cu||e instanceof lu;)Ka(e.input)&&(e=e.input);for(;t instanceof cu;)Ka(t.output)&&(t=t.output);cs(e)?t.connect(e,n):t.connect(e,n,r)}function pu(t,e,n=0,r=0){if(Ka(e))for(;e instanceof cu;)e=e.input;for(;!hs(t);)Ka(t.output)&&(t=t.output);cs(e)?t.disconnect(e,n):hs(e)?t.disconnect(e,n,r):t.disconnect()}class du extends cu{constructor(){super(gs(du.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const t=gs(du.getDefaults(),arguments,["gain","units"]);this.gain=new lu({context:this.context,convert:t.convert,param:this._gainNode.gain,units:t.units,value:t.gain,minValue:t.minValue,maxValue:t.maxValue}),Ds(this,"gain")}static getDefaults(){return Object.assign(cu.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class mu extends cu{constructor(t){super(t),this.onended=Fs,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new du({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut,this._curve=t.curve,this.onended=t.onended}static getDefaults(){return Object.assign(cu.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Fs})}_startGain(t,e=1){Ha(-1===this._startTime,"Source cannot be started more than once");const n=this.toSeconds(this._fadeIn);return this._startTime=t+n,this._startTime=Math.max(this._startTime,this.context.currentTime),n>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+n):this._gainNode.gain.exponentialApproachValueAtTime(e,t,n)):this._gainNode.gain.setValueAtTime(e,t),this}stop(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this}_stopGain(t){Ha(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const e=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+e,this._stopTime=Math.max(this._stopTime,this.context.currentTime),e>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,e,t):this._gainNode.gain.targetRampTo(0,e,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout((()=>{const t="exponential"===this._curve?2*e:0;this._stopSource(this.now()+t),this._onended()}),this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Fs&&(this.onended(this),this.onended=Fs,!this.context.isOffline)){const t=()=>this.dispose();void 0!==window.requestIdleCallback?window.requestIdleCallback(t):setTimeout(t,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),Ha(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class vu extends mu{constructor(){super(gs(vu.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const t=gs(vu.getDefaults(),arguments,["offset"]);fu(this._source,this._gainNode),this.offset=new lu({context:this.context,convert:t.convert,param:this._source.offset,units:t.units,value:t.offset,minValue:t.minValue,maxValue:t.maxValue})}static getDefaults(){return Object.assign(mu.getDefaults(),{convert:!0,offset:1,units:"number"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this}_stopSource(t){this._source.stop(t)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class gu extends cu{constructor(){super(gs(gu.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const t=gs(gu.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new vu({context:this.context,convert:t.convert,offset:t.value,units:t.units,minValue:t.minValue,maxValue:t.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(cu.getDefaults(),{convert:!0,units:"number",value:0})}connect(t,e=0,n=0){return yu(this,t,e,n),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(t,e){return this._param.setValueAtTime(t,e),this}getValueAtTime(t){return this._param.getValueAtTime(t)}setRampPoint(t){return this._param.setRampPoint(t),this}linearRampToValueAtTime(t,e){return this._param.linearRampToValueAtTime(t,e),this}exponentialRampToValueAtTime(t,e){return this._param.exponentialRampToValueAtTime(t,e),this}exponentialRampTo(t,e,n){return this._param.exponentialRampTo(t,e,n),this}linearRampTo(t,e,n){return this._param.linearRampTo(t,e,n),this}targetRampTo(t,e,n){return this._param.targetRampTo(t,e,n),this}exponentialApproachValueAtTime(t,e,n){return this._param.exponentialApproachValueAtTime(t,e,n),this}setTargetAtTime(t,e,n){return this._param.setTargetAtTime(t,e,n),this}setValueCurveAtTime(t,e,n,r){return this._param.setValueCurveAtTime(t,e,n,r),this}cancelScheduledValues(t){return this._param.cancelScheduledValues(t),this}cancelAndHoldAtTime(t){return this._param.cancelAndHoldAtTime(t),this}rampTo(t,e,n){return this._param.rampTo(t,e,n),this}get value(){return this._param.value}set value(t){this._param.value=t}get convert(){return this._param.convert}set convert(t){this._param.convert=t}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(t){this._param.overridden=t}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(t){return this._param.apply(t),this}}function yu(t,e,n,r){(e instanceof lu||cs(e)||e instanceof gu&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof gu&&(e.overridden=!0)),fu(t,e,n,r)}class bu extends lu{constructor(){super(gs(bu.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Ms(1/0),this._multiplier=1;const t=gs(bu.getDefaults(),arguments,["value"]);this._multiplier=t.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(t.value)}),this.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(lu.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(t,e,n){e=this.toSeconds(e),this.setRampPoint(e);const r=this._fromType(t),i=this._events.get(e),o=Math.round(Math.max(1/n,1));for(let t=0;t<=o;t++){const o=n*t+e,a=this._exponentialApproach(i.time,i.value,r,n,o);this.linearRampToValueAtTime(this._toType(a),o)}return this}setValueAtTime(t,e){const n=this.toSeconds(e);super.setValueAtTime(t,e);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(t,e){const n=this.toSeconds(e);super.linearRampToValueAtTime(t,e);const r=this._events.get(n),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,n);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(t,e){e=this.toSeconds(e);const n=this._fromType(t),r=this._events.get(e),i=Math.round(Math.max(10*(e-r.time),1)),o=(e-r.time)/i;for(let t=0;t<=i;t++){const i=o*t+r.time,a=this._exponentialInterpolate(r.time,r.value,e,n,i);this.linearRampToValueAtTime(this._toType(a),i)}return this}_getTicksUntilEvent(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Za(t.ticks)){const e=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(e,t.time)}const n=this._fromType(this.getValueAtTime(t.time));let r=this._fromType(this.getValueAtTime(e));const i=this._events.get(e);return i&&i.time===e&&"setValueAtTime"===i.type&&(r=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(n+r)+t.ticks}getTicksAtTime(t){const e=this.toSeconds(t),n=this._events.get(e);return Math.max(this._getTicksUntilEvent(n,e),0)}getDurationOfTicks(t,e){const n=this.toSeconds(e),r=this.getTicksAtTime(e);return this.getTimeOfTick(r+t)-n}getTimeOfTick(t){const e=this._events.get(t,"ticks"),n=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&n&&"linearRampToValueAtTime"===n.type&&e.value!==n.value){const r=this._fromType(this.getValueAtTime(e.time)),i=(this._fromType(this.getValueAtTime(n.time))-r)/(n.time-e.time),o=Math.sqrt(Math.pow(r,2)-2*i*(e.ticks-t)),a=(-r+o)/i,s=(-r-o)/i;return(a>0?a:s)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue}ticksToTime(t,e){return this.getDurationOfTicks(t,e)}timeToTicks(t,e){const n=this.toSeconds(e),r=this.toSeconds(t),i=this.getTicksAtTime(n);return this.getTicksAtTime(n+r)-i}_fromType(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):super._fromType(t)}_toType(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:super._toType(t)}get multiplier(){return this._multiplier}set multiplier(t){const e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)}}class _u extends gu{constructor(){super(gs(_u.getDefaults(),arguments,["value"])),this.name="TickSignal";const t=gs(_u.getDefaults(),arguments,["value"]);this.input=this._param=new bu({context:this.context,convert:t.convert,multiplier:t.multiplier,param:this._constantSource.offset,units:t.units,value:t.value})}static getDefaults(){return Object.assign(gu.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(t,e){return this._param.ticksToTime(t,e)}timeToTicks(t,e){return this._param.timeToTicks(t,e)}getTimeOfTick(t){return this._param.getTimeOfTick(t)}getDurationOfTicks(t,e){return this._param.getDurationOfTicks(t,e)}getTicksAtTime(t){return this._param.getTicksAtTime(t)}get multiplier(){return this._param.multiplier}set multiplier(t){this._param.multiplier=t}dispose(){return super.dispose(),this._param.dispose(),this}}class xu extends su{constructor(){super(gs(xu.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new uu,this._tickOffset=new Ms;const t=gs(xu.getDefaults(),arguments,["frequency"]);this.frequency=new _u({context:this.context,units:t.units,value:t.frequency}),Ds(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},su.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(t,e){const n=this.toSeconds(t);return"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),Ka(e)&&this.setTicksAtTime(e,n)),this}stop(t){const e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){const t=this._state.get(e);t&&t.time>0&&(this._tickOffset.cancel(t.time),this._state.cancel(t.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this}cancel(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this}getTicksAtTime(t){const e=this.toSeconds(t),n=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let i=n,o=0;return this._state.forEachBetween(n.time,e+this.sampleTime,(t=>{let e=i.time;const n=this._tickOffset.get(t.time);n&&n.time>=i.time&&(o=n.ticks,e=n.time),"started"===i.state&&"started"!==t.state&&(o+=this.frequency.getTicksAtTime(t.time)-this.frequency.getTicksAtTime(e)),i=t})),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(t){this.setTicksAtTime(t,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(t){const e=this.now(),n=this.frequency.timeToTicks(t,e);this.setTicksAtTime(n,e)}getSecondsAtTime(t){t=this.toSeconds(t);const e=this._state.getLastState("stopped",t),n={state:"paused",time:t};this._state.add(n);let r=e,i=0;return this._state.forEachBetween(e.time,t+this.sampleTime,(t=>{let e=r.time;const n=this._tickOffset.get(t.time);n&&n.time>=r.time&&(i=n.seconds,e=n.time),"started"===r.state&&"started"!==t.state&&(i+=t.time-e),r=t})),this._state.remove(n),i}setTicksAtTime(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this}getStateAtTime(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)}getTimeOfTick(t,e=this.now()){const n=this._tickOffset.get(e),r=this._state.get(e),i=Math.max(n.time,r.time),o=this.frequency.getTicksAtTime(i)+t-n.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(t,e,n){let r=this._state.get(t);this._state.forEachBetween(t,e,(e=>{r&&"started"===r.state&&"started"!==e.state&&this.forEachTickBetween(Math.max(r.time,t),e.time-this.sampleTime,n),r=e}));let i=null;if(r&&"started"===r.state){const o=Math.max(r.time,t),a=this.frequency.getTicksAtTime(o),s=a-this.frequency.getTicksAtTime(r.time);let u=Math.ceil(s)-s;u=Ts(u,1)?0:u;let l=this.frequency.getTimeOfTick(a+u);for(;l<e;){try{n(l,Math.round(this.getTicksAtTime(l)))}catch(t){i=t;break}l+=this.frequency.getDurationOfTicks(1,l)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class wu extends su{constructor(){super(gs(wu.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Fs,this._lastUpdate=0,this._state=new uu("stopped"),this._boundLoop=this._loop.bind(this);const t=gs(wu.getDefaults(),arguments,["callback","frequency"]);this.callback=t.callback,this._tickSource=new xu({context:this.context,frequency:t.frequency,units:t.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,Ds(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(su.getDefaults(),{callback:Fs,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(t,e){Wa(this.context);const n=this.toSeconds(t);return this.log("start",n),"started"!==this._state.getValueAtTime(n)&&(this._state.setStateAtTime("started",n),this._tickSource.start(n,e),n<this._lastUpdate&&this.emit("start",n,e)),this}stop(t){const e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this}pause(t){const e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(t){this._tickSource.ticks=t}get seconds(){return this._tickSource.seconds}set seconds(t){this._tickSource.seconds=t}getSecondsAtTime(t){return this._tickSource.getSecondsAtTime(t)}setTicksAtTime(t,e){return this._tickSource.setTicksAtTime(t,e),this}getTimeOfTick(t,e=this.now()){return this._tickSource.getTimeOfTick(t,e)}getTicksAtTime(t){return this._tickSource.getTicksAtTime(t)}nextTickTime(t,e){const n=this.toSeconds(e),r=this.getTicksAtTime(n);return this._tickSource.getTimeOfTick(r+t,n)}_loop(){const t=this._lastUpdate,e=this.now();this._lastUpdate=e,this.log("loop",t,e),t!==e&&(this._state.forEachBetween(t,e,(t=>{switch(t.state){case"started":const e=this._tickSource.getTicksAtTime(t.time);this.emit("start",t.time,e);break;case"stopped":0!==t.time&&this.emit("stop",t.time);break;case"paused":this.emit("pause",t.time)}})),this._tickSource.forEachTickBetween(t,e,((t,e)=>{this.callback(t,e)})))}getStateAtTime(t){const e=this.toSeconds(t);return this._state.getValueAtTime(e)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Is.mixin(wu);class Eu extends cu{constructor(){super(gs(Eu.getDefaults(),arguments,["delayTime","maxDelay"])),this.name="Delay";const t=gs(Eu.getDefaults(),arguments,["delayTime","maxDelay"]),e=this.toSeconds(t.maxDelay);this._maxDelay=Math.max(e,this.toSeconds(t.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(e),this.delayTime=new lu({context:this.context,param:this._delayNode.delayTime,units:"time",value:t.delayTime,minValue:0,maxValue:this.maxDelay}),Ds(this,"delayTime")}static getDefaults(){return Object.assign(cu.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}function Su(t,e,n=2,r=Vs().sampleRate){return us(this,void 0,void 0,(function*(){const i=Vs(),o=new Us(n,e,r);Hs(o),yield t(o);const a=o.render();Hs(i);const s=yield a;return new js(s)}))}class Tu extends _s{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const t=gs(Tu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=t.baseUrl,Object.keys(t.urls).forEach((e=>{this._loadingCount++;const n=t.urls[e];this.add(e,n,this._bufferLoaded.bind(this,t.onload),t.onerror)}))}static getDefaults(){return{baseUrl:"",onerror:Fs,onload:Fs,urls:{}}}has(t){return this._buffers.has(t.toString())}get(t){return Ha(this.has(t),`ToneAudioBuffers has no buffer named: ${t}`),this._buffers.get(t.toString())}_bufferLoaded(t){this._loadingCount--,0===this._loadingCount&&t&&t()}get loaded(){return Array.from(this._buffers).every((([t,e])=>e.loaded))}add(t,e,n=Fs,r=Fs){return rs(e)?this._buffers.set(t.toString(),new js(this.baseUrl+e,n,r)):this._buffers.set(t.toString(),new js(e,n,r)),this}dispose(){return super.dispose(),this._buffers.forEach((t=>t.dispose())),this._buffers.clear(),this}}class Au extends eu{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(t){return Qs(super._frequencyToUnits(t))}_ticksToUnits(t){return Qs(super._ticksToUnits(t))}_beatsToUnits(t){return Qs(super._beatsToUnits(t))}_secondsToUnits(t){return Qs(super._secondsToUnits(t))}toMidi(){return this.valueOf()}toFrequency(){return Ks(this.toMidi())}transpose(t){return new Au(this.context,this.toMidi()+t)}}function Mu(t,e){return new Au(Vs(),t,e)}class Cu extends ou{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(t){return this._getPPQ()*t}_secondsToUnits(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(t){return t}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}function Ou(t,e){return new Cu(Vs(),t,e)}class Pu extends su{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Ms,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(t){return this._events.cancel(this.toSeconds(t)),this}_drawLoop(){const t=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=t;){const e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}Os((t=>{t.draw=new Pu({context:t})})),ks((t=>{t.draw.dispose()}));class ku extends _s{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(t){Ha(Ka(t.time),"Events must have a time property"),Ha(Ka(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();let e=new Iu(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this}remove(t){if(null!==this._root){const e=[];this._root.search(t.time,e);for(const n of e)if(n.event===t){this._removeNode(n),this._length--;break}}return this}get length(){return this._length}cancel(t){return this.forEachFrom(t,(t=>this.remove(t))),this}_setRoot(t){this._root=t,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)}_removeNode(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{let e,n=null;if(t.getBalance()>0)if(null===t.left.right)e=t.left,e.right=t.right,n=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,n=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)e=t.right,e.left=t.left,n=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,n=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),n&&this._rebalance(n)}t.dispose()}_rotateLeft(t){const e=t.parent,n=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rotateRight(t){const e=t.parent,n=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?n?e.left=r:e.right=r:this._setRoot(r)}_rebalance(t){const e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))}get(t){if(null!==this._root){const e=[];if(this._root.search(t,e),e.length>0){let t=e[0];for(let n=1;n<e.length;n++)e[n].low>t.low&&(t=e[n]);return t.event}}return null}forEach(t){if(null!==this._root){const e=[];this._root.traverse((t=>e.push(t))),e.forEach((e=>{e.event&&t(e.event)}))}return this}forEachAtTime(t,e){if(null!==this._root){const n=[];this._root.search(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}forEachFrom(t,e){if(null!==this._root){const n=[];this._root.searchAfter(t,n),n.forEach((t=>{t.event&&e(t.event)}))}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse((t=>t.dispose())),this._root=null,this}}class Iu{constructor(t,e,n){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=n,this.low=t,this.high=e,this.max=this.high}insert(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)}search(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))}searchAfter(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)}traverse(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)}updateHeight(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class Lu extends cu{constructor(){super(gs(Lu.getDefaults(),arguments,["volume"])),this.name="Volume";const t=gs(Lu.getDefaults(),arguments,["volume"]);this.input=this.output=new du({context:this.context,gain:t.volume,units:"decibels"}),this.volume=this.output.gain,Ds(this,"volume"),this._unmutedVolume=t.volume,this.mute=t.mute}static getDefaults(){return Object.assign(cu.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(t){!this.mute&&t?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!t&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Ru extends cu{constructor(){super(gs(Ru.getDefaults(),arguments)),this.name="Destination",this.input=new Lu({context:this.context}),this.output=new du({context:this.context}),this.volume=this.input.volume;const t=gs(Ru.getDefaults(),arguments);hu(this.input,this.output,this.context.rawContext.destination),this.mute=t.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(cu.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(t){this.input.mute=t}chain(...t){return this.input.disconnect(),t.unshift(this.input),t.push(this.output),hu(...t),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}Os((t=>{t.destination=new Ru({context:t})})),ks((t=>{t.destination.dispose()}));class Du extends _s{constructor(t){super(),this.name="TimelineValue",this._timeline=new Ms({memory:10}),this._initialValue=t}set(t,e){return this._timeline.add({value:t,time:e}),this}get(t){const e=this._timeline.get(t);return e?e.value:this._initialValue}}class Nu{constructor(t,e){this.id=Nu._eventId++;const n=Object.assign(Nu.getDefaults(),e);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}static getDefaults(){return{callback:Fs,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}Nu._eventId=0;class Fu extends Nu{constructor(t,e){super(t,e),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const n=Object.assign(Fu.getDefaults(),e);this.duration=new Cu(t.context,n.duration).valueOf(),this._interval=new Cu(t.context,n.interval).valueOf(),this._nextTick=n.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Nu.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(t){this._createEvents(t),super.invoke(t)}_createEvents(t){const e=this.transport.getTicksAtTime(t);e>=this.time&&e>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Cu(this.context,this._nextTick).toSeconds()))}_restart(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const e=this.transport.getTicksAtTime(t);e>this.time&&(this._nextTick=this.time+Math.ceil((e-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Cu(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Cu(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class ju extends su{constructor(){super(gs(ju.getDefaults(),arguments)),this.name="Transport",this._loop=new Du(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Ms,this._repeatedEvents=new ku,this._syncedSignals=[],this._swingAmount=0;const t=gs(ju.getDefaults(),arguments);this._ppq=t.ppq,this._clock=new wu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=t.ppq,this.bpm.setValueAtTime(t.bpm,0),Ds(this,"bpm"),this._timeSignature=t.timeSignature,this._swingTicks=t.ppq/2}static getDefaults(){return Object.assign(su.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){const n=e%(2*this._swingTicks)/(2*this._swingTicks),r=Math.sin(n*Math.PI)*this._swingAmount;t+=new Cu(this.context,2*this._swingTicks/3).toSeconds()*r}this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,(e=>e.invoke(t)))}schedule(t,e){const n=new Nu(this,{callback:t,time:new ou(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}scheduleRepeat(t,e,n,r=1/0){const i=new Fu(this,{callback:t,duration:new Js(this.context,r).toTicks(),interval:new Js(this.context,e).toTicks(),time:new ou(this.context,n).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(t,e){const n=new Nu(this,{callback:t,once:!0,time:new ou(this.context,e).toTicks()});return this._addEvent(n,this._timeline)}clear(t){if(this._scheduledEvents.hasOwnProperty(t)){const e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this}_addEvent(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id}cancel(t=0){const e=this.toTicks(t);return this._timeline.forEachFrom(e,(t=>this.clear(t.id))),this._repeatedEvents.forEachFrom(e,(t=>this.clear(t.id))),this}_bindClockEvents(){this._clock.on("start",((t,e)=>{e=new Cu(this.context,e).toSeconds(),this.emit("start",t,e)})),this._clock.on("stop",(t=>{this.emit("stop",t)})),this._clock.on("pause",(t=>{this.emit("pause",t)}))}get state(){return this._clock.getStateAtTime(this.now())}start(t,e){let n;return Ka(e)&&(n=this.toTicks(e)),this._clock.start(t,n),this}stop(t){return this._clock.stop(t),this}pause(t){return this._clock.pause(t),this}toggle(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this}get timeSignature(){return this._timeSignature}set timeSignature(t){ns(t)&&(t=t[0]/t[1]*4),this._timeSignature=t}get loopStart(){return new Js(this.context,this._loopStart,"i").toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t)}get loopEnd(){return new Js(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t)}get loop(){return this._loop.get(this.now())}set loop(t){this._loop.set(t,this.now())}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get swing(){return this._swingAmount}set swing(t){this._swingAmount=t}get swingSubdivision(){return new Cu(this.context,this._swingTicks).toNotation()}set swingSubdivision(t){this._swingTicks=this.toTicks(t)}get position(){const t=this.now(),e=this._clock.getTicksAtTime(t);return new Cu(this.context,e).toBarsBeatsSixteenths()}set position(t){const e=this.toTicks(t);this.ticks=e}get seconds(){return this._clock.seconds}set seconds(t){const e=this.now(),n=this._clock.frequency.timeToTicks(t,e);this.ticks=n}get progress(){if(this.loop){const t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(t){if(this._clock.ticks!==t){const e=this.now();if("started"===this.state){const n=this._clock.getTicksAtTime(e),r=this._clock.getTimeOfTick(Math.ceil(n));this.emit("stop",r),this._clock.setTicksAtTime(t,r),this.emit("start",r,this._clock.getSecondsAtTime(r))}else this._clock.setTicksAtTime(t,e)}}getTicksAtTime(t){return Math.round(this._clock.getTicksAtTime(t))}getSecondsAtTime(t){return this._clock.getSecondsAtTime(t)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(t){this._clock.frequency.multiplier=t}nextSubdivision(t){if(t=this.toTicks(t),"started"!==this.state)return 0;{const e=this.now(),n=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(n,e)}}syncSignal(t,e){if(!e){const n=this.now();if(0!==t.getValueAtTime(n)){const r=1/(60/this.bpm.getValueAtTime(n)/this.PPQ);e=t.getValueAtTime(n)/r}else e=0}const n=new du(e);return this.bpm.connect(n),n.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:n,signal:t}),t.value=0,this}unsyncSignal(t){for(let e=this._syncedSignals.length-1;e>=0;e--){const n=this._syncedSignals[e];n.signal===t&&(n.ratio.dispose(),n.signal.value=n.initial,this._syncedSignals.splice(e,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Ns(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Is.mixin(ju),Os((t=>{t.transport=new ju({context:t})})),ks((t=>{t.transport.dispose()}));class Uu extends cu{constructor(t){super(t),this.input=void 0,this._state=new uu("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Fs,this._syncedStop=Fs,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Lu({context:this.context,mute:t.mute,volume:t.volume}),this.volume=this._volume.volume,Ds(this,"volume"),this.onstop=t.onstop}static getDefaults(){return Object.assign(cu.getDefaults(),{mute:!1,onstop:Fs,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}_clampToCurrentTime(t){return this._synced?t:Math.max(t,this.context.currentTime)}start(t,e,n){let r=Za(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const t=this._state.get(r);t&&(t.offset=this.toSeconds(ys(e,0)),t.duration=n?this.toSeconds(n):void 0);const i=this.context.transport.schedule((t=>{this._start(t,e,n)}),r);this._scheduled.push(i),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Wa(this.context),this._start(r,e,n);else Ha(ws(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,e,n);return this}stop(t){let e=Za(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||Ka(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){const t=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(t)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this}restart(t,e,n){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,n)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(t,e)=>{if(e>0){const n=this._state.get(e);if(n&&"started"===n.state&&n.time!==e){const r=e-this.toSeconds(n.time);let i;n.duration&&(i=this.toSeconds(n.duration)-r),this._start(t,this.toSeconds(n.offset)+r,i)}}},this._syncedStop=t=>{const e=this.context.transport.getSecondsAtTime(Math.max(t-this.sampleTime,0));"started"===this._state.getValueAtTime(e)&&this._stop(t)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach((t=>this.context.transport.clear(t))),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Fs,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class zu extends mu{constructor(){super(gs(zu.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const t=gs(zu.getDefaults(),arguments,["url","onload"]);fu(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new lu({context:this.context,param:this._source.playbackRate,units:"positive",value:t.playbackRate}),this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this._buffer=new js(t.url,t.onload,t.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(mu.getDefaults(),{url:new js,loop:!1,loopEnd:0,loopStart:0,onload:Fs,onerror:Fs,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t}get curve(){return this._curve}set curve(t){this._curve=t}start(t,e,n,r=1){Ha(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(t);this._startGain(i,r),e=this.loop?ys(e,this.loopStart):ys(e,0);let o=Math.max(this.toSeconds(e),0);if(this.loop){const t=this.toSeconds(this.loopEnd)||this.buffer.duration,e=this.toSeconds(this.loopStart),n=t-e;Es(o,t)&&(o=(o-e)%n+e),Ts(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Ss(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ka(n)){let t=this.toSeconds(n);t=Math.max(t,0),this.stop(i+t)}return this}_stopSource(t){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(t)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(t){this._source.loopStart=this.toSeconds(t)}get loopEnd(){return this._source.loopEnd}set loopEnd(t){this._source.loopEnd=this.toSeconds(t)}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._source.loop}set loop(t){this._source.loop=t,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Bu extends Uu{constructor(){super(gs(Bu.getDefaults(),arguments,["type"])),this.name="Noise",this._source=null;const t=gs(Bu.getDefaults(),arguments,["type"]);this._playbackRate=t.playbackRate,this.type=t.type,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Uu.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(t){if(Ha(t in Gu,"Noise: invalid type: "+t),this._type!==t&&(this._type=t,"started"===this.state)){const t=this.now();this._stop(t),this._start(t)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._source&&(this._source.playbackRate.value=t)}_start(t){const e=Gu[this._type];this._source=new zu({url:e,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(t),Math.random()*(e.duration-.001))}_stop(t){this._source&&(this._source.stop(this.toSeconds(t)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(t){this._stop(t),this._start(t)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const Vu=220500,Hu={brown:null,pink:null,white:null},Gu={get brown(){if(!Hu.brown){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Vu);t[e]=n;let r=0;for(let t=0;t<Vu;t++){const e=2*Math.random()-1;n[t]=(r+.02*e)/1.02,r=n[t],n[t]*=3.5}}Hu.brown=(new js).fromArray(t)}return Hu.brown},get pink(){if(!Hu.pink){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Vu);let r,i,o,a,s,u,l;t[e]=n,r=i=o=a=s=u=l=0;for(let t=0;t<Vu;t++){const e=2*Math.random()-1;r=.99886*r+.0555179*e,i=.99332*i+.0750759*e,o=.969*o+.153852*e,a=.8665*a+.3104856*e,s=.55*s+.5329522*e,u=-.7616*u-.016898*e,n[t]=r+i+o+a+s+u+l+.5362*e,n[t]*=.11,l=.115926*e}}Hu.pink=(new js).fromArray(t)}return Hu.pink},get white(){if(!Hu.white){const t=[];for(let e=0;e<2;e++){const n=new Float32Array(Vu);t[e]=n;for(let t=0;t<Vu;t++)n[t]=2*Math.random()-1}Hu.white=(new js).fromArray(t)}return Hu.white}};class Wu extends cu{constructor(){super(gs(Wu.getDefaults(),arguments,["volume"])),this.name="UserMedia";const t=gs(Wu.getDefaults(),arguments,["volume"]);this._volume=this.output=new Lu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ds(this,"volume"),this.mute=t.mute}static getDefaults(){return Object.assign(cu.getDefaults(),{mute:!1,volume:0})}open(t){return us(this,void 0,void 0,(function*(){Ha(Wu.supported,"UserMedia is not supported"),"started"===this.state&&this.close();const e=yield Wu.enumerateDevices();Ja(t)?this._device=e[t]:(this._device=e.find((e=>e.label===t||e.deviceId===t)),!this._device&&e.length>0&&(this._device=e[0]),Ha(Ka(this._device),`No matching device ${t}`));const n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}};this._device&&(n.audio.deviceId=this._device.deviceId);const r=yield navigator.mediaDevices.getUserMedia(n);if(!this._stream){this._stream=r;const t=this.context.createMediaStreamSource(r);fu(t,this.output),this._mediaStream=t}return this}))}close(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach((t=>{t.stop()})),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this}static enumerateDevices(){return us(this,void 0,void 0,(function*(){return(yield navigator.mediaDevices.enumerateDevices()).filter((t=>"audioinput"===t.kind))}))}get state(){return this._stream&&this._stream.active?"started":"stopped"}get deviceId(){return this._device?this._device.deviceId:void 0}get groupId(){return this._device?this._device.groupId:void 0}get label(){return this._device?this._device.label:void 0}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this.close(),this._volume.dispose(),this.volume.dispose(),this}static get supported(){return Ka(navigator.mediaDevices)&&Ka(navigator.mediaDevices.getUserMedia)}}function qu(t,e){return us(this,void 0,void 0,(function*(){const n=e/t.context.sampleRate,r=new Us(1,n,t.context.sampleRate);return new t.constructor(Object.assign(t.get(),{frequency:2/n,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)}))}class Xu extends mu{constructor(){super(gs(Xu.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const t=gs(Xu.getDefaults(),arguments,["frequency","type"]);fu(this._oscillator,this._gainNode),this.type=t.type,this.frequency=new lu({context:this.context,param:this._oscillator.frequency,units:"frequency",value:t.frequency}),this.detune=new lu({context:this.context,param:this._oscillator.detune,units:"cents",value:t.detune}),Ds(this,["frequency","detune"])}static getDefaults(){return Object.assign(mu.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(t){const e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._oscillator.start(e),this}_stopSource(t){this._oscillator.stop(t)}setPeriodicWave(t){return this._oscillator.setPeriodicWave(t),this}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Yu extends Uu{constructor(){super(gs(Yu.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=gs(Yu.getDefaults(),arguments,["frequency","type"]);this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency}),Ds(this,"frequency"),this.detune=new gu({context:this.context,units:"cents",value:t.detune}),Ds(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(Uu.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const e=this.toSeconds(t),n=new Xu({context:this.context,onended:()=>this.onstop(this)});this._oscillator=n,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(e)}_stop(t){const e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)}_restart(t){const e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return Yu._periodicWaveCache.find((t=>{return t.phase===this._phase&&(e=t.partials,n=this._partials,e.length===n.length&&e.every(((t,e)=>n[e]===t)));var e,n}));{const t=Yu._periodicWaveCache.find((t=>t.type===this._type&&t.phase===this._phase));return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const e=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&e)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const e=this._getCachedPeriodicWave();if(Ka(e)){const{partials:t,wave:n}=e;this._wave=n,this._partials=t,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[e,n]=this._getRealImaginary(t,this._phase),r=this.context.createPeriodicWave(e,n);this._wave=r,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),Yu._periodicWaveCache.push({imag:n,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:e,type:this._type,wave:this._wave}),Yu._periodicWaveCache.length>100&&Yu._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Ga(t,0);let e=this._type;const n=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(n&&(e=n[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{const e=new Float32Array(t);this._partials.forEach(((t,n)=>e[n]=t)),this._partials=Array.from(e),this.type=this._type}}_getRealImaginary(t,e){let n=2048;const r=new Float32Array(n),i=new Float32Array(n);let o=1;if("custom"===t){if(o=this._partials.length+1,this._partialCount=this._partials.length,n=o,0===this._partials.length)return[r,i]}else{const e=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);e?(o=parseInt(e[2],10)+1,this._partialCount=parseInt(e[2],10),t=e[1],o=Math.max(o,2),n=o):this._partialCount=0,this._partials=[]}for(let a=1;a<n;++a){const n=2/(a*Math.PI);let s;switch(t){case"sine":s=a<=o?1:0,this._partials[a-1]=s;break;case"square":s=1&a?2*n:0,this._partials[a-1]=s;break;case"sawtooth":s=n*(1&a?1:-1),this._partials[a-1]=s;break;case"triangle":s=1&a?n*n*2*(a-1>>1&1?-1:1):0,this._partials[a-1]=s;break;case"custom":s=this._partials[a-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==s?(r[a]=-s*Math.sin(e*a),i[a]=s*Math.cos(e*a)):(r[a]=0,i[a]=0)}return[r,i]}_inverseFFT(t,e,n){let r=0;const i=t.length;for(let o=0;o<i;o++)r+=t[o]*Math.cos(o*n)+e[o]*Math.sin(o*n);return r}getInitialValue(){const[t,e]=this._getRealImaginary(this._type,0);let n=0;const r=2*Math.PI;for(let i=0;i<32;i++)n=Math.max(this._inverseFFT(t,e,i/32*r),n);return As(-this._inverseFFT(t,e,this._phase)/n,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Yu._periodicWaveCache=[];class Qu extends cu{constructor(){super(Object.assign(gs(Qu.getDefaults(),arguments,["context"])))}connect(t,e=0,n=0){return yu(this,t,e,n),this}}class Zu extends Qu{constructor(){super(Object.assign(gs(Zu.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const t=gs(Zu.getDefaults(),arguments,["mapping","length"]);ns(t.mapping)||t.mapping instanceof Float32Array?this.curve=Float32Array.from(t.mapping):$a(t.mapping)&&this.setMap(t.mapping,t.length)}static getDefaults(){return Object.assign(gu.getDefaults(),{length:1024})}setMap(t,e=1024){const n=new Float32Array(e);for(let r=0,i=e;r<i;r++){const e=r/(i-1)*2-1;n[r]=t(e,r)}return this.curve=n,this}get curve(){return this._shaper.curve}set curve(t){this._shaper.curve=t}get oversample(){return this._shaper.oversample}set oversample(t){Ha(["none","2x","4x"].some((e=>e.includes(t))),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Ku extends Qu{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Zu({context:this.context,mapping:t=>(t+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class $u extends gu{constructor(){super(Object.assign(gs($u.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const t=gs($u.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new du({context:this.context,minValue:t.minValue,maxValue:t.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(t.value,0)}static getDefaults(){return Object.assign(gu.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class Ju extends Uu{constructor(){super(gs(Ju.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new Ku({context:this.context}),this._modulationNode=new du({context:this.context});const t=gs(Ju.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Yu({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Yu({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $u({context:this.context,units:"positive",value:t.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),Ds(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Yu.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){this._modulator.restart(t),this._carrier.restart(t)}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class tl extends Uu{constructor(){super(gs(tl.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new du({context:this.context,gain:0});const t=gs(tl.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new Yu({context:this.context,detune:t.detune,frequency:0,onstop:()=>this.onstop(this),phase:t.phase,type:t.type}),this.detune=this._carrier.detune,this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency}),this._modulator=new Yu({context:this.context,phase:t.phase,type:t.modulationType}),this.harmonicity=new $u({context:this.context,units:"positive",value:t.harmonicity}),this.modulationIndex=new $u({context:this.context,units:"positive",value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),Ds(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Yu.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(t){this._modulator.start(t),this._carrier.start(t)}_stop(t){this._modulator.stop(t),this._carrier.stop(t)}_restart(t){return this._modulator.restart(t),this._carrier.restart(t),this}get type(){return this._carrier.type}set type(t){this._carrier.type=t}get baseType(){return this._carrier.baseType}set baseType(t){this._carrier.baseType=t}get partialCount(){return this._carrier.partialCount}set partialCount(t){this._carrier.partialCount=t}get modulationType(){return this._modulator.type}set modulationType(t){this._modulator.type=t}get phase(){return this._carrier.phase}set phase(t){this._carrier.phase=t,this._modulator.phase=t}get partials(){return this._carrier.partials}set partials(t){this._carrier.partials=t}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class el extends Uu{constructor(){super(gs(el.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new du({context:this.context,gain:0}),this._thresh=new Zu({context:this.context,mapping:t=>t<=0?-1:1});const t=gs(el.getDefaults(),arguments,["frequency","width"]);this.width=new gu({context:this.context,units:"audioRange",value:t.width}),this._triangle=new Yu({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),Ds(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Uu.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(t){t=this.toSeconds(t),this._triangle.start(t),this._widthGate.gain.setValueAtTime(1,t)}_stop(t){t=this.toSeconds(t),this._triangle.stop(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(0,t)}_restart(t){this._triangle.restart(t),this._widthGate.gain.cancelScheduledValues(t),this._widthGate.gain.setValueAtTime(1,t)}get phase(){return this._triangle.phase}set phase(t){this._triangle.phase=t}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(t){this._triangle.type=t}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class nl extends Uu{constructor(){super(gs(nl.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const t=gs(nl.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gu({context:this.context,units:"cents",value:t.detune}),this._spread=t.spread,this._type=t.type,this._phase=t.phase,this._partials=t.partials,this._partialCount=t.partialCount,this.count=t.count,Ds(this,["frequency","detune"])}static getDefaults(){return Object.assign(Yu.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(t){t=this.toSeconds(t),this._forEach((e=>e.start(t)))}_stop(t){t=this.toSeconds(t),this._forEach((e=>e.stop(t)))}_restart(t){this._forEach((e=>e.restart(t)))}_forEach(t){for(let e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)}get type(){return this._type}set type(t){this._type=t,this._forEach((e=>e.type=t))}get spread(){return this._spread}set spread(t){if(this._spread=t,this._oscillators.length>1){const e=-t/2,n=t/(this._oscillators.length-1);this._forEach(((t,r)=>t.detune.value=e+n*r))}}get count(){return this._oscillators.length}set count(t){if(Ga(t,1),this._oscillators.length!==t){this._forEach((t=>t.dispose())),this._oscillators=[];for(let e=0;e<t;e++){const n=new Yu({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+e/t*360,partialCount:this._partialCount,onstop:0===e?()=>this.onstop(this):Fs});"custom"===this.type&&(n.partials=this._partials),this.frequency.connect(n.frequency),this.detune.connect(n.detune),n.detune.overridden=!1,n.connect(this.output),this._oscillators[e]=n}this.spread=this._spread,"started"===this.state&&this._forEach((t=>t.start()))}}get phase(){return this._phase}set phase(t){this._phase=t,this._forEach(((t,e)=>t.phase=this._phase+e/this.count*360))}get baseType(){return this._oscillators[0].baseType}set baseType(t){this._forEach((e=>e.baseType=t)),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach((e=>e.partials=t)))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(t){this._partialCount=t,this._forEach((e=>e.partialCount=t)),this._type=this._oscillators[0].type}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach((t=>t.dispose())),this}}class rl extends Uu{constructor(){super(gs(rl.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new $u({context:this.context,value:2});const t=gs(rl.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new el({context:this.context,frequency:t.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Yu({context:this.context,detune:t.detune,frequency:t.frequency,onstop:()=>this.onstop(this),phase:t.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),Ds(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Uu.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(t){t=this.toSeconds(t),this._modulator.start(t),this._pulse.start(t)}_stop(t){t=this.toSeconds(t),this._modulator.stop(t),this._pulse.stop(t)}_restart(t){this._modulator.restart(t),this._pulse.restart(t)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(t){this._modulator.phase=t}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const il={am:Ju,fat:nl,fm:tl,oscillator:Yu,pulse:el,pwm:rl};class ol extends Uu{constructor(){super(gs(ol.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const t=gs(ol.getDefaults(),arguments,["frequency","type"]);this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gu({context:this.context,units:"cents",value:t.detune}),Ds(this,["frequency","detune"]),this.set(t)}static getDefaults(){return Object.assign(Yu.getDefaults(),tl.getDefaults(),Ju.getDefaults(),nl.getDefaults(),el.getDefaults(),rl.getDefaults())}_start(t){this._oscillator.start(t)}_stop(t){this._oscillator.stop(t)}_restart(t){return this._oscillator.restart(t),this}get type(){let t="";return["am","fm","fat"].some((t=>this._sourceType===t))&&(t=this._sourceType),t+this._oscillator.type}set type(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)}get partials(){return this._oscillator.partials}set partials(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)}get partialCount(){return this._oscillator.partialCount}set partialCount(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)}set(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),super.set(t),this}_createNewOscillator(t){if(t!==this._sourceType){this._sourceType=t;const e=il[t],n=this.now();if(this._oscillator){const t=this._oscillator;t.stop(n),this.context.setTimeout((()=>t.dispose()),this.blockTime)}this._oscillator=new e({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(n)}}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t}get sourceType(){return this._sourceType}set sourceType(t){let e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")}_getOscType(t,e){return t instanceof il[e]}get baseType(){return this._oscillator.baseType}set baseType(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)}get width(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0}get count(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0}set count(t){this._getOscType(this._oscillator,"fat")&&Ja(t)&&(this._oscillator.count=t)}get spread(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0}set spread(t){this._getOscType(this._oscillator,"fat")&&Ja(t)&&(this._oscillator.spread=t)}get modulationType(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0}set modulationType(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&rs(t)&&(this._oscillator.modulationType=t)}get modulationIndex(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0}get harmonicity(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0}get modulationFrequency(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0}asArray(t=1024){return us(this,void 0,void 0,(function*(){return qu(this,t)}))}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class al extends gu{constructor(){super(Object.assign(gs(al.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new du({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,hu(this._constantSource,this._sum)}static getDefaults(){return Object.assign(gu.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class sl extends Qu{constructor(){super(Object.assign(gs(sl.getDefaults(),arguments,["min","max"]))),this.name="Scale";const t=gs(sl.getDefaults(),arguments,["min","max"]);this._mult=this.input=new $u({context:this.context,value:t.max-t.min}),this._add=this.output=new al({context:this.context,value:t.min}),this._min=t.min,this._max=t.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(Qu.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(t){this._min=t,this._setRange()}get max(){return this._max}set max(t){this._max=t,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class ul extends Qu{constructor(){super(Object.assign(gs(ul.getDefaults(),arguments))),this.name="Zero",this._gain=new du({context:this.context}),this.output=this._gain,this.input=void 0,fu(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),pu(this.context.getConstant(0),this._gain),this}}class ll extends cu{constructor(){super(gs(ll.getDefaults(),arguments,["frequency","min","max"])),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=lu.prototype._fromType,this._toType=lu.prototype._toType,this._is=lu.prototype._is,this._clampValue=lu.prototype._clampValue;const t=gs(ll.getDefaults(),arguments,["frequency","min","max"]);this._oscillator=new Yu({context:this.context,frequency:t.frequency,type:t.type}),this.frequency=this._oscillator.frequency,this._amplitudeGain=new du({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new gu({context:this.context,units:"audioRange",value:0}),this._zeros=new ul({context:this.context}),this._a2g=new Ku({context:this.context}),this._scaler=this.output=new sl({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._a2g,this._amplitudeGain,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),Ds(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(cu.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,phase:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get units(){return this._units}set units(t){const e=this.min,n=this.max;this._units=t,this.min=e,this.max=n}get state(){return this._oscillator.state}connect(t,e,n){return(t instanceof lu||t instanceof gu)&&(this.convert=t.convert,this.units=t.units),yu(this,t,e,n),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function cl(t,e=1/0){const n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Ga(r,t,e),n.set(this,r)}})}}function hl(t,e=1/0){const n=new WeakMap;return function(r,i){Reflect.defineProperty(r,i,{configurable:!0,enumerable:!0,get:function(){return n.get(this)},set:function(r){Ga(this.toSeconds(r),t,e),n.set(this,r)}})}}class fl extends Uu{constructor(){super(gs(fl.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const t=gs(fl.getDefaults(),arguments,["url","onload"]);this._buffer=new js({onload:this._onload.bind(this,t.onload),onerror:t.onerror,reverse:t.reverse,url:t.url}),this.autostart=t.autostart,this._loop=t.loop,this._loopStart=t.loopStart,this._loopEnd=t.loopEnd,this._playbackRate=t.playbackRate,this.fadeIn=t.fadeIn,this.fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Uu.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Fs,onerror:Fs,playbackRate:1,reverse:!1})}load(t){return us(this,void 0,void 0,(function*(){return yield this._buffer.load(t),this._onload(),this}))}_onload(t=Fs){t(),this.autostart&&this.start()}_onSourceEnd(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(t,e,n){return super.start(t,e,n),this}_start(t,e,n){e=this._loop?ys(e,this._loopStart):ys(e,0);let r=this.toSeconds(e);this._synced&&(r*=this._playbackRate);const i=n;n=ys(n,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(n);o/=this._playbackRate,t=this.toSeconds(t);const a=new zu({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+o),this._state.setStateAtTime("stopped",t+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Za(i)?a.start(t,r):a.start(t,r,o-this.toSeconds(this.fadeOut))}_stop(t){const e=this.toSeconds(t);this._activeSources.forEach((t=>t.stop(e)))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}seek(t,e){const n=this.toSeconds(e);if("started"===this._state.getValueAtTime(n)){const e=this.toSeconds(t);this._stop(n),this._start(n,e)}return this}setLoopPoints(t,e){return this.loopStart=t,this.loopEnd=e,this}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this.buffer.loaded&&Ga(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopStart=t}))}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this.buffer.loaded&&Ga(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach((e=>{e.loopEnd=t}))}get buffer(){return this._buffer}set buffer(t){this._buffer.set(t)}get loop(){return this._loop}set loop(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach((e=>{e.loop=t})),t)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t;const e=this.now(),n=this._state.getNextState("stopped",e);n&&n.implicitEnd&&(this._state.cancel(n.time),this._activeSources.forEach((t=>t.cancelStop()))),this._activeSources.forEach((n=>{n.playbackRate.setValueAtTime(t,e)}))}get reverse(){return this._buffer.reverse}set reverse(t){this._buffer.reverse=t}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach((t=>t.dispose())),this._activeSources.clear(),this._buffer.dispose(),this}}ss([hl(0)],fl.prototype,"fadeIn",void 0),ss([hl(0)],fl.prototype,"fadeOut",void 0);class pl extends cu{constructor(){super(gs(pl.getDefaults(),arguments,["urls","onload"],"urls")),this.name="Players",this.input=void 0,this._players=new Map;const t=gs(pl.getDefaults(),arguments,["urls","onload"],"urls");this._volume=this.output=new Lu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ds(this,"volume"),this._buffers=new Tu({urls:t.urls,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.mute=t.mute,this._fadeIn=t.fadeIn,this._fadeOut=t.fadeOut}static getDefaults(){return Object.assign(Uu.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:Fs,onerror:Fs,urls:{},volume:0})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}get fadeIn(){return this._fadeIn}set fadeIn(t){this._fadeIn=t,this._players.forEach((e=>{e.fadeIn=t}))}get fadeOut(){return this._fadeOut}set fadeOut(t){this._fadeOut=t,this._players.forEach((e=>{e.fadeOut=t}))}get state(){return Array.from(this._players).some((([t,e])=>"started"===e.state))?"started":"stopped"}has(t){return this._buffers.has(t)}player(t){if(Ha(this.has(t),`No Player with the name ${t} exists on this object`),!this._players.has(t)){const e=new fl({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(t)}).connect(this.output);this._players.set(t,e)}return this._players.get(t)}get loaded(){return this._buffers.loaded}add(t,e,n){return Ha(!this._buffers.has(t),"A buffer with that name already exists on this object"),this._buffers.add(t,e,n),this}stopAll(t){return this._players.forEach((e=>e.stop(t))),this}dispose(){return super.dispose(),this._volume.dispose(),this.volume.dispose(),this._players.forEach((t=>t.dispose())),this._buffers.dispose(),this}}class dl extends Uu{constructor(){super(gs(dl.getDefaults(),arguments,["url","onload"])),this.name="GrainPlayer",this._loopStart=0,this._loopEnd=0,this._activeSources=[];const t=gs(dl.getDefaults(),arguments,["url","onload"]);this.buffer=new js({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),this._clock=new wu({context:this.context,callback:this._tick.bind(this),frequency:1/t.grainSize}),this._playbackRate=t.playbackRate,this._grainSize=t.grainSize,this._overlap=t.overlap,this.detune=t.detune,this.overlap=t.overlap,this.loop=t.loop,this.playbackRate=t.playbackRate,this.grainSize=t.grainSize,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.reverse=t.reverse,this._clock.on("stop",this._onstop.bind(this))}static getDefaults(){return Object.assign(Uu.getDefaults(),{onload:Fs,onerror:Fs,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})}_start(t,e,n){e=ys(e,0),e=this.toSeconds(e),t=this.toSeconds(t);const r=1/this._clock.frequency.getValueAtTime(t);this._clock.start(t,e/r),n&&this.stop(t+this.toSeconds(n))}restart(t,e,n){return super.restart(t,e,n),this}_restart(t,e,n){this._stop(t),this._start(t,e,n)}_stop(t){this._clock.stop(t)}_onstop(t){this._activeSources.forEach((e=>{e.fadeOut=0,e.stop(t)})),this.onstop(this)}_tick(t){const e=this._clock.getTicksAtTime(t),n=e*this._grainSize;if(this.log("offset",n),!this.loop&&n>this.buffer.duration)return void this.stop(t);const r=n<this._overlap?0:this._overlap,i=new zu({context:this.context,url:this.buffer,fadeIn:r,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:Xs(this.detune/100)}).connect(this.output);i.start(t,this._grainSize*e),i.stop(t+this._grainSize/this.playbackRate),this._activeSources.push(i),i.onended=()=>{const t=this._activeSources.indexOf(i);-1!==t&&this._activeSources.splice(t,1)}}get playbackRate(){return this._playbackRate}set playbackRate(t){Ga(t,.001),this._playbackRate=t,this.grainSize=this._grainSize}get loopStart(){return this._loopStart}set loopStart(t){this.buffer.loaded&&Ga(this.toSeconds(t),0,this.buffer.duration),this._loopStart=this.toSeconds(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this.buffer.loaded&&Ga(this.toSeconds(t),0,this.buffer.duration),this._loopEnd=this.toSeconds(t)}get reverse(){return this.buffer.reverse}set reverse(t){this.buffer.reverse=t}get grainSize(){return this._grainSize}set grainSize(t){this._grainSize=this.toSeconds(t),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())}get overlap(){return this._overlap}set overlap(t){const e=this.toSeconds(t);Ga(e,0),this._overlap=e}get loaded(){return this.buffer.loaded}dispose(){return super.dispose(),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach((t=>t.dispose())),this}}class ml extends Qu{constructor(){super(...arguments),this.name="Abs",this._abs=new Zu({context:this.context,mapping:t=>Math.abs(t)<.001?0:Math.abs(t)}),this.input=this._abs,this.output=this._abs}dispose(){return super.dispose(),this._abs.dispose(),this}}class vl extends Qu{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new Zu({context:this.context,mapping:t=>2*Math.abs(t)-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class gl extends Qu{constructor(){super(...arguments),this.name="Negate",this._multiply=new $u({context:this.context,value:-1}),this.input=this._multiply,this.output=this._multiply}dispose(){return super.dispose(),this._multiply.dispose(),this}}class yl extends gu{constructor(){super(Object.assign(gs(yl.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Subtract",this._sum=new du({context:this.context}),this.input=this._sum,this.output=this._sum,this._neg=new gl({context:this.context}),this.subtrahend=this._param,hu(this._constantSource,this._neg,this._sum)}static getDefaults(){return Object.assign(gu.getDefaults(),{value:0})}dispose(){return super.dispose(),this._neg.dispose(),this._sum.dispose(),this}}class bl extends Qu{constructor(){super(Object.assign(gs(bl.getDefaults(),arguments))),this.name="GreaterThanZero",this._thresh=this.output=new Zu({context:this.context,length:127,mapping:t=>t<=0?0:1}),this._scale=this.input=new $u({context:this.context,value:1e4}),this._scale.connect(this._thresh)}dispose(){return super.dispose(),this._scale.dispose(),this._thresh.dispose(),this}}class _l extends gu{constructor(){super(Object.assign(gs(_l.getDefaults(),arguments,["value"]))),this.name="GreaterThan",this.override=!1;const t=gs(_l.getDefaults(),arguments,["value"]);this._subtract=this.input=new yl({context:this.context,value:t.value}),this._gtz=this.output=new bl({context:this.context}),this.comparator=this._param=this._subtract.subtrahend,Ds(this,"comparator"),this._subtract.connect(this._gtz)}static getDefaults(){return Object.assign(gu.getDefaults(),{value:0})}dispose(){return super.dispose(),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this}}class xl extends Qu{constructor(){super(Object.assign(gs(xl.getDefaults(),arguments,["value"]))),this.name="Pow";const t=gs(xl.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Zu({context:this.context,mapping:this._expFunc(t.value),length:8192}),this._exponent=t.value}static getDefaults(){return Object.assign(Qu.getDefaults(),{value:1})}_expFunc(t){return e=>Math.pow(Math.abs(e),t)}get value(){return this._exponent}set value(t){this._exponent=t,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class wl extends sl{constructor(){super(Object.assign(gs(wl.getDefaults(),arguments,["min","max","exponent"]))),this.name="ScaleExp";const t=gs(wl.getDefaults(),arguments,["min","max","exponent"]);this.input=this._exp=new xl({context:this.context,value:t.exponent}),this._exp.connect(this._mult)}static getDefaults(){return Object.assign(sl.getDefaults(),{exponent:1})}get exponent(){return this._exp.value}set exponent(t){this._exp.value=t}dispose(){return super.dispose(),this._exp.dispose(),this}}class El extends gu{constructor(){super(gs(gu.getDefaults(),arguments,["value","units"])),this.name="SyncedSignal",this.override=!1;const t=gs(gu.getDefaults(),arguments,["value","units"]);this._lastVal=t.value,this._synced=this.context.transport.scheduleRepeat(this._onTick.bind(this),"1i"),this._syncedCallback=this._anchorValue.bind(this),this.context.transport.on("start",this._syncedCallback),this.context.transport.on("pause",this._syncedCallback),this.context.transport.on("stop",this._syncedCallback),this._constantSource.disconnect(),this._constantSource.stop(0),this._constantSource=this.output=new vu({context:this.context,offset:t.value,units:t.units}).start(0),this.setValueAtTime(t.value,0)}_onTick(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))}_anchorValue(t){const e=super.getValueAtTime(this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)}getValueAtTime(t){const e=new ou(this.context,t).toSeconds();return super.getValueAtTime(e)}setValueAtTime(t,e){const n=new ou(this.context,e).toSeconds();return super.setValueAtTime(t,n),this}linearRampToValueAtTime(t,e){const n=new ou(this.context,e).toSeconds();return super.linearRampToValueAtTime(t,n),this}exponentialRampToValueAtTime(t,e){const n=new ou(this.context,e).toSeconds();return super.exponentialRampToValueAtTime(t,n),this}setTargetAtTime(t,e,n){const r=new ou(this.context,e).toSeconds();return super.setTargetAtTime(t,r,n),this}cancelScheduledValues(t){const e=new ou(this.context,t).toSeconds();return super.cancelScheduledValues(e),this}setValueCurveAtTime(t,e,n,r){const i=new ou(this.context,e).toSeconds();return n=this.toSeconds(n),super.setValueCurveAtTime(t,i,n,r),this}cancelAndHoldAtTime(t){const e=new ou(this.context,t).toSeconds();return super.cancelAndHoldAtTime(e),this}setRampPoint(t){const e=new ou(this.context,t).toSeconds();return super.setRampPoint(e),this}exponentialRampTo(t,e,n){const r=new ou(this.context,n).toSeconds();return super.exponentialRampTo(t,e,r),this}linearRampTo(t,e,n){const r=new ou(this.context,n).toSeconds();return super.linearRampTo(t,e,r),this}targetRampTo(t,e,n){const r=new ou(this.context,n).toSeconds();return super.targetRampTo(t,e,r),this}dispose(){return super.dispose(),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this}}class Sl extends cu{constructor(){super(gs(Sl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new gu({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const t=gs(Sl.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=t.attack,this.decay=t.decay,this.sustain=t.sustain,this.release=t.release,this.attackCurve=t.attackCurve,this.releaseCurve=t.releaseCurve,this.decayCurve=t.decayCurve}static getDefaults(){return Object.assign(cu.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(t,e){if(rs(t))return t;{let n;for(n in Tl)if(Tl[n][e]===t)return n;return t}}_setCurve(t,e,n){if(rs(n)&&Reflect.has(Tl,n)){const r=Tl[n];ts(r)?"_decayCurve"!==t&&(this[t]=r[e]):this[t]=r}else{if(!ns(n)||"_decayCurve"===t)throw new Error("Envelope: invalid curve: "+n);this[t]=n}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(t){this._setCurve("_attackCurve","In",t)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(t){this._setCurve("_releaseCurve","Out",t)}get decayCurve(){return this._decayCurve}set decayCurve(t){Ha(["linear","exponential"].some((e=>e===t)),`Invalid envelope curve: ${t}`),this._decayCurve=t}triggerAttack(t,e=1){this.log("triggerAttack",t,e),t=this.toSeconds(t);let n=this.toSeconds(this.attack);const r=this.toSeconds(this.decay),i=this.getValueAtTime(t);if(i>0&&(n=(1-i)/(1/n)),n<this.sampleTime)this._sig.cancelScheduledValues(t),this._sig.setValueAtTime(e,t);else if("linear"===this._attackCurve)this._sig.linearRampTo(e,n,t);else if("exponential"===this._attackCurve)this._sig.targetRampTo(e,n,t);else{this._sig.cancelAndHoldAtTime(t);let r=this._attackCurve;for(let t=1;t<r.length;t++)if(r[t-1]<=i&&i<=r[t]){r=this._attackCurve.slice(t),r[0]=i;break}this._sig.setValueCurveAtTime(r,t,n,e)}if(r&&this.sustain<1){const i=e*this.sustain,o=t+n;this.log("decay",o),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(i,r+o):this._sig.exponentialApproachValueAtTime(i,o,r)}return this}triggerRelease(t){this.log("triggerRelease",t),t=this.toSeconds(t);const e=this.getValueAtTime(t);if(e>0){const n=this.toSeconds(this.release);n<this.sampleTime?this._sig.setValueAtTime(0,t):"linear"===this._releaseCurve?this._sig.linearRampTo(0,n,t):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,n,t):(Ha(ns(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(t),this._sig.setValueCurveAtTime(this._releaseCurve,t,n,e))}return this}getValueAtTime(t){return this._sig.getValueAtTime(t)}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),this.triggerAttack(e,n),this.triggerRelease(e+this.toSeconds(t)),this}cancel(t){return this._sig.cancelScheduledValues(this.toSeconds(t)),this}connect(t,e=0,n=0){return yu(this,t,e,n),this}asArray(t=1024){return us(this,void 0,void 0,(function*(){const e=t/this.context.sampleRate,n=new Us(1,e,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=.1*i,a=i+o,s=new this.constructor(Object.assign(this.get(),{attack:e*this.toSeconds(this.attack)/a,decay:e*this.toSeconds(this.decay)/a,release:e*this.toSeconds(this.release)/a,context:n}));return s._sig.toDestination(),s.triggerAttackRelease(e*(r+o)/a,0),(yield n.render()).getChannelData(0)}))}dispose(){return super.dispose(),this._sig.dispose(),this}}ss([hl(0)],Sl.prototype,"attack",void 0),ss([hl(0)],Sl.prototype,"decay",void 0),ss([cl(0,1)],Sl.prototype,"sustain",void 0),ss([hl(0)],Sl.prototype,"release",void 0);const Tl=(()=>{const t=128;let e,n;const r=[];for(e=0;e<t;e++)r[e]=Math.sin(e/127*(Math.PI/2));const i=[];for(e=0;e<127;e++){n=e/127;const t=Math.sin(n*(2*Math.PI)*6.4-Math.PI/2)+1;i[e]=t/10+.83*n}i[127]=1;const o=[];for(e=0;e<t;e++)o[e]=Math.ceil(e/127*5)/5;const a=[];for(e=0;e<t;e++)n=e/127,a[e]=.5*(1-Math.cos(Math.PI*n));const s=[];for(e=0;e<t;e++){n=e/127;const t=4*Math.pow(n,3)+.2,r=Math.cos(t*Math.PI*2*n);s[e]=Math.abs(r*(1-n))}function u(t){const e=new Array(t.length);for(let n=0;n<t.length;n++)e[n]=1-t[n];return e}return{bounce:{In:u(s),Out:s},cosine:{In:r,Out:(l=r,l.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:i,Out:u(i)},sine:{In:a,Out:u(a)},step:{In:o,Out:u(o)}};var l})();class Al extends cu{constructor(){super(gs(Al.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const t=gs(Al.getDefaults(),arguments);this._volume=this.output=new Lu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,Ds(this,"volume")}static getDefaults(){return Object.assign(cu.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let t=!1;return this._synced||(this._synced=!0,t=!0),t}_syncMethod(t,e){const n=this["_original_"+t]=this[t];this[t]=(...t)=>{const r=t[e],i=this.context.transport.schedule((r=>{t[e]=r,n.apply(this,t)}),r);this._scheduledEvents.push(i)}}unsync(){return this._scheduledEvents.forEach((t=>this.context.transport.clear(t))),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(t,e,n,r){const i=this.toSeconds(n),o=this.toSeconds(e);return this.triggerAttack(t,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Ml extends Al{constructor(){super(gs(Ml.getDefaults(),arguments));const t=gs(Ml.getDefaults(),arguments);this.portamento=t.portamento,this.onsilence=t.onsilence}static getDefaults(){return Object.assign(Al.getDefaults(),{detune:0,onsilence:Fs,portamento:0})}triggerAttack(t,e,n=1){this.log("triggerAttack",t,e,n);const r=this.toSeconds(e);return this._triggerEnvelopeAttack(r,n),this.setNote(t,r),this}triggerRelease(t){this.log("triggerRelease",t);const e=this.toSeconds(t);return this._triggerEnvelopeRelease(e),this}setNote(t,e){const n=this.toSeconds(e),r=t instanceof eu?t.toFrequency():t;if(this.portamento>0&&this.getLevelAtTime(n)>.05){const t=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,t,n)}else this.frequency.setValueAtTime(r,n);return this}}ss([hl(0)],Ml.prototype,"portamento",void 0);class Cl extends Sl{constructor(){super(gs(Cl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new du({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Ol extends Ml{constructor(){super(gs(Ol.getDefaults(),arguments)),this.name="Synth";const t=gs(Ol.getDefaults(),arguments);this.oscillator=new ol(Object.assign({context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)},t.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Cl(Object.assign({context:this.context},t.envelope)),this.oscillator.chain(this.envelope,this.output),Ds(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Ml.getDefaults(),{envelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(bs(ol.getDefaults(),[...Object.keys(Uu.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(t,e){if(this.envelope.triggerAttack(t,e),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Pl extends Ml{constructor(){super(gs(Pl.getDefaults(),arguments)),this.name="ModulationSynth";const t=gs(Pl.getDefaults(),arguments);this._carrier=new Ol({context:this.context,oscillator:t.oscillator,envelope:t.envelope,onsilence:()=>this.onsilence(this),volume:-10}),this._modulator=new Ol({context:this.context,oscillator:t.modulation,envelope:t.modulationEnvelope,volume:-10}),this.oscillator=this._carrier.oscillator,this.envelope=this._carrier.envelope,this.modulation=this._modulator.oscillator,this.modulationEnvelope=this._modulator.envelope,this.frequency=new gu({context:this.context,units:"frequency"}),this.detune=new gu({context:this.context,value:t.detune,units:"cents"}),this.harmonicity=new $u({context:this.context,value:t.harmonicity,minValue:0}),this._modulationNode=new du({context:this.context,gain:0}),Ds(this,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"])}static getDefaults(){return Object.assign(Ml.getDefaults(),{harmonicity:3,oscillator:Object.assign(bs(ol.getDefaults(),[...Object.keys(Uu.getDefaults()),"frequency","detune"]),{type:"sine"}),envelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign(bs(ol.getDefaults(),[...Object.keys(Uu.getDefaults()),"frequency","detune"]),{type:"square"}),modulationEnvelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})}_triggerEnvelopeAttack(t,e){this._carrier._triggerEnvelopeAttack(t,e),this._modulator._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this._carrier._triggerEnvelopeRelease(t),this._modulator._triggerEnvelopeRelease(t),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this}}class kl extends Pl{constructor(){super(gs(kl.getDefaults(),arguments)),this.name="AMSynth",this._modulationScale=new Ku({context:this.context}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output)}dispose(){return super.dispose(),this._modulationScale.dispose(),this}}class Il extends cu{constructor(){super(gs(Il.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const t=gs(Il.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new lu({context:this.context,units:"number",value:t.Q,param:this._filter.Q}),this.frequency=new lu({context:this.context,units:"frequency",value:t.frequency,param:this._filter.frequency}),this.detune=new lu({context:this.context,units:"cents",value:t.detune,param:this._filter.detune}),this.gain=new lu({context:this.context,units:"gain",value:t.gain,param:this._filter.gain}),this.type=t.type}static getDefaults(){return Object.assign(cu.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(t){Ha(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._filter.type=t}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const r=19980*Math.pow(n/t,2)+20;e[n]=r}const n=new Float32Array(t),r=new Float32Array(t),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(e,n,r),n}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ll extends cu{constructor(){super(gs(Ll.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new du({context:this.context}),this.output=new du({context:this.context}),this._filters=[];const t=gs(Ll.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new gu({context:this.context,units:"positive",value:t.Q}),this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency}),this.detune=new gu({context:this.context,units:"cents",value:t.detune}),this.gain=new gu({context:this.context,units:"decibels",value:t.gain}),this._type=t.type,this.rolloff=t.rolloff,Ds(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(cu.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(t){Ha(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(t),`Invalid filter type: ${t}`),this._type=t,this._filters.forEach((e=>e.type=t))}get rolloff(){return this._rolloff}set rolloff(t){const e=Ja(t)?t:parseInt(t,10),n=[-12,-24,-48,-96];let r=n.indexOf(e);Ha(-1!==r,`rolloff can only be ${n.join(", ")}`),r+=1,this._rolloff=e,this.input.disconnect(),this._filters.forEach((t=>t.disconnect())),this._filters=new Array(r);for(let t=0;t<r;t++){const e=new Il({context:this.context});e.type=this._type,this.frequency.connect(e.frequency),this.detune.connect(e.detune),this.Q.connect(e.Q),this.gain.connect(e.gain),this._filters[t]=e}this._internalChannels=this._filters,hu(this.input,...this._internalChannels,this.output)}getFrequencyResponse(t=128){const e=new Il({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),n=new Float32Array(t).map((()=>1));return this._filters.forEach((()=>{e.getFrequencyResponse(t).forEach(((t,e)=>n[e]*=t))})),e.dispose(),n}dispose(){return super.dispose(),this._filters.forEach((t=>{t.dispose()})),Ns(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class Rl extends Sl{constructor(){super(gs(Rl.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const t=gs(Rl.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=t.octaves,this._baseFrequency=this.toFrequency(t.baseFrequency),this._exponent=this.input=new xl({context:this.context,value:t.exponent}),this._scale=this.output=new sl({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(Sl.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){const e=this.toFrequency(t);Ga(e,0),this._baseFrequency=e,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){Ga(t,0),this._octaves=t,this._scale.max=this._baseFrequency*Math.pow(2,t)}get exponent(){return this._exponent.value}set exponent(t){this._exponent.value=t}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class Dl extends Ml{constructor(){super(gs(Dl.getDefaults(),arguments)),this.name="MonoSynth";const t=gs(Dl.getDefaults(),arguments);this.oscillator=new ol(Object.assign(t.oscillator,{context:this.context,detune:t.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ll(Object.assign(t.filter,{context:this.context})),this.filterEnvelope=new Rl(Object.assign(t.filterEnvelope,{context:this.context})),this.envelope=new Cl(Object.assign(t.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),Ds(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Ml.getDefaults(),{envelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(bs(Ll.getDefaults(),Object.keys(cu.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(bs(Rl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(bs(ol.getDefaults(),Object.keys(Uu.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(t,e=1){if(this.envelope.triggerAttack(t,e),this.filterEnvelope.triggerAttack(t),this.oscillator.start(t),0===this.envelope.sustain){const e=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(t+e+n)}}_triggerEnvelopeRelease(t){this.envelope.triggerRelease(t),this.filterEnvelope.triggerRelease(t),this.oscillator.stop(t+this.toSeconds(this.envelope.release))}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Nl extends Ml{constructor(){super(gs(Nl.getDefaults(),arguments)),this.name="DuoSynth";const t=gs(Nl.getDefaults(),arguments);this.voice0=new Dl(Object.assign(t.voice0,{context:this.context,onsilence:()=>this.onsilence(this)})),this.voice1=new Dl(Object.assign(t.voice1,{context:this.context})),this.harmonicity=new $u({context:this.context,units:"positive",value:t.harmonicity}),this._vibrato=new ll({frequency:t.vibratoRate,context:this.context,min:-50,max:50}),this._vibrato.start(),this.vibratoRate=this._vibrato.frequency,this._vibratoGain=new du({context:this.context,units:"normalRange",gain:t.vibratoAmount}),this.vibratoAmount=this._vibratoGain.gain,this.frequency=new gu({context:this.context,units:"frequency",value:440}),this.detune=new gu({context:this.context,units:"cents",value:t.detune}),this.frequency.connect(this.voice0.frequency),this.frequency.chain(this.harmonicity,this.voice1.frequency),this._vibrato.connect(this._vibratoGain),this._vibratoGain.fan(this.voice0.detune,this.voice1.detune),this.detune.fan(this.voice0.detune,this.voice1.detune),this.voice0.connect(this.output),this.voice1.connect(this.output),Ds(this,["voice0","voice1","frequency","vibratoAmount","vibratoRate"])}getLevelAtTime(t){return t=this.toSeconds(t),this.voice0.envelope.getValueAtTime(t)+this.voice1.envelope.getValueAtTime(t)}static getDefaults(){return vs(Ml.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:vs(bs(Dl.getDefaults(),Object.keys(Ml.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:vs(bs(Dl.getDefaults(),Object.keys(Ml.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})}_triggerEnvelopeAttack(t,e){this.voice0._triggerEnvelopeAttack(t,e),this.voice1._triggerEnvelopeAttack(t,e)}_triggerEnvelopeRelease(t){return this.voice0._triggerEnvelopeRelease(t),this.voice1._triggerEnvelopeRelease(t),this}dispose(){return super.dispose(),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this}}class Fl extends Pl{constructor(){super(gs(Fl.getDefaults(),arguments)),this.name="FMSynth";const t=gs(Fl.getDefaults(),arguments);this.modulationIndex=new $u({context:this.context,value:t.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this.detune.fan(this._carrier.detune,this._modulator.detune),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output)}static getDefaults(){return Object.assign(Pl.getDefaults(),{modulationIndex:10})}dispose(){return super.dispose(),this.modulationIndex.dispose(),this}}const jl=[1,1.483,1.932,2.546,2.63,3.897];class Ul extends Ml{constructor(){super(gs(Ul.getDefaults(),arguments)),this.name="MetalSynth",this._oscillators=[],this._freqMultipliers=[];const t=gs(Ul.getDefaults(),arguments);this.detune=new gu({context:this.context,units:"cents",value:t.detune}),this.frequency=new gu({context:this.context,units:"frequency"}),this._amplitude=new du({context:this.context,gain:0}).connect(this.output),this._highpass=new Ll({Q:0,context:this.context,type:"highpass"}).connect(this._amplitude);for(let e=0;e<jl.length;e++){const n=new tl({context:this.context,harmonicity:t.harmonicity,modulationIndex:t.modulationIndex,modulationType:"square",onstop:0===e?()=>this.onsilence(this):Fs,type:"square"});n.connect(this._highpass),this._oscillators[e]=n;const r=new $u({context:this.context,value:jl[e]});this._freqMultipliers[e]=r,this.frequency.chain(r,n.frequency),this.detune.connect(n.detune)}this._filterFreqScaler=new sl({context:this.context,max:7e3,min:this.toFrequency(t.resonance)}),this.envelope=new Sl({attack:t.envelope.attack,attackCurve:"linear",context:this.context,decay:t.envelope.decay,release:t.envelope.release,sustain:0}),this.envelope.chain(this._filterFreqScaler,this._highpass.frequency),this.envelope.connect(this._amplitude.gain),this._octaves=t.octaves,this.octaves=t.octaves}static getDefaults(){return vs(Ml.getDefaults(),{envelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})}_triggerEnvelopeAttack(t,e=1){return this.envelope.triggerAttack(t,e),this._oscillators.forEach((e=>e.start(t))),0===this.envelope.sustain&&this._oscillators.forEach((e=>{e.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay))})),this}_triggerEnvelopeRelease(t){return this.envelope.triggerRelease(t),this._oscillators.forEach((e=>e.stop(t+this.toSeconds(this.envelope.release)))),this}getLevelAtTime(t){return t=this.toSeconds(t),this.envelope.getValueAtTime(t)}get modulationIndex(){return this._oscillators[0].modulationIndex.value}set modulationIndex(t){this._oscillators.forEach((e=>e.modulationIndex.value=t))}get harmonicity(){return this._oscillators[0].harmonicity.value}set harmonicity(t){this._oscillators.forEach((e=>e.harmonicity.value=t))}get resonance(){return this._filterFreqScaler.min}set resonance(t){this._filterFreqScaler.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,t)}dispose(){return super.dispose(),this._oscillators.forEach((t=>t.dispose())),this._freqMultipliers.forEach((t=>t.dispose())),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this}}class zl extends Ol{constructor(){super(gs(zl.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const t=gs(zl.getDefaults(),arguments);this.pitchDecay=t.pitchDecay,this.octaves=t.octaves,Ds(this,["oscillator","envelope"])}static getDefaults(){return vs(Ml.getDefaults(),Ol.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(t,e){const n=this.toSeconds(e),r=this.toFrequency(t instanceof eu?t.toFrequency():t),i=r*this.octaves;return this.oscillator.frequency.setValueAtTime(i,n),this.oscillator.frequency.exponentialRampToValueAtTime(r,n+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}ss([cl(0)],zl.prototype,"octaves",void 0),ss([hl(0)],zl.prototype,"pitchDecay",void 0);class Bl extends Al{constructor(){super(gs(Bl.getDefaults(),arguments)),this.name="NoiseSynth";const t=gs(Bl.getDefaults(),arguments);this.noise=new Bu(Object.assign({context:this.context},t.noise)),this.envelope=new Cl(Object.assign({context:this.context},t.envelope)),this.noise.chain(this.envelope,this.output)}static getDefaults(){return Object.assign(Al.getDefaults(),{envelope:Object.assign(bs(Sl.getDefaults(),Object.keys(cu.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign(bs(Bu.getDefaults(),Object.keys(Uu.getDefaults())),{type:"white"})})}triggerAttack(t,e=1){return t=this.toSeconds(t),this.envelope.triggerAttack(t,e),this.noise.start(t),0===this.envelope.sustain&&this.noise.stop(t+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this}triggerRelease(t){return t=this.toSeconds(t),this.envelope.triggerRelease(t),this.noise.stop(t+this.toSeconds(this.envelope.release)),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0)),this}triggerAttackRelease(t,e,n=1){return e=this.toSeconds(e),t=this.toSeconds(t),this.triggerAttack(e,n),this.triggerRelease(e+t),this}dispose(){return super.dispose(),this.noise.dispose(),this.envelope.dispose(),this}}const Vl=new Set;function Hl(t){Vl.add(t)}function Gl(t,e){const n=`registerProcessor("${t}", ${e})`;Vl.add(n)}class Wl extends cu{constructor(t){super(t),this.name="ToneAudioWorklet",this.workletOptions={},this.onprocessorerror=Fs;const e=URL.createObjectURL(new Blob([Array.from(Vl).join("\n")],{type:"text/javascript"})),n=this._audioWorkletName();this._dummyGain=this.context.createGain(),this._dummyParam=this._dummyGain.gain,this.context.addAudioWorkletModule(e,n).then((()=>{this.disposed||(this._worklet=this.context.createAudioWorkletNode(n,this.workletOptions),this._worklet.onprocessorerror=this.onprocessorerror.bind(this),this.onReady(this._worklet))}))}dispose(){return super.dispose(),this._dummyGain.disconnect(),this._worklet&&(this._worklet.port.postMessage("dispose"),this._worklet.disconnect()),this}}Hl('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),Hl("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),Hl("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n");const ql="feedback-comb-filter";Gl(ql,'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Xl extends Wl{constructor(){super(gs(Xl.getDefaults(),arguments,["delayTime","resonance"])),this.name="FeedbackCombFilter";const t=gs(Xl.getDefaults(),arguments,["delayTime","resonance"]);this.input=new du({context:this.context}),this.output=new du({context:this.context}),this.delayTime=new lu({context:this.context,value:t.delayTime,units:"time",minValue:0,maxValue:1,param:this._dummyParam,swappable:!0}),this.resonance=new lu({context:this.context,value:t.resonance,units:"normalRange",param:this._dummyParam,swappable:!0}),Ds(this,["resonance","delayTime"])}_audioWorkletName(){return ql}static getDefaults(){return Object.assign(cu.getDefaults(),{delayTime:.1,resonance:.5})}onReady(t){hu(this.input,t,this.output);const e=t.parameters.get("delayTime");this.delayTime.setParam(e);const n=t.parameters.get("feedback");this.resonance.setParam(n)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this}}class Yl extends cu{constructor(){super(gs(Yl.getDefaults(),arguments,["frequency","type"])),this.name="OnePoleFilter";const t=gs(Yl.getDefaults(),arguments,["frequency","type"]);this._frequency=t.frequency,this._type=t.type,this.input=new du({context:this.context}),this.output=new du({context:this.context}),this._createFilter()}static getDefaults(){return Object.assign(cu.getDefaults(),{frequency:880,type:"lowpass"})}_createFilter(){const t=this._filter,e=this.toFrequency(this._frequency),n=1/(2*Math.PI*e);if("lowpass"===this._type){const t=1/(n*this.context.sampleRate),e=t-1;this._filter=this.context.createIIRFilter([t,0],[1,e])}else{const t=1/(n*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,t])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout((()=>{this.disposed||(this.input.disconnect(t),t.disconnect())}),this.blockTime)}get frequency(){return this._frequency}set frequency(t){this._frequency=t,this._createFilter()}get type(){return this._type}set type(t){this._type=t,this._createFilter()}getFrequencyResponse(t=128){const e=new Float32Array(t);for(let n=0;n<t;n++){const r=19980*Math.pow(n/t,2)+20;e[n]=r}const n=new Float32Array(t),r=new Float32Array(t);return this._filter.getFrequencyResponse(e,n,r),n}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this}}class Ql extends cu{constructor(){super(gs(Ql.getDefaults(),arguments,["delayTime","resonance","dampening"])),this.name="LowpassCombFilter";const t=gs(Ql.getDefaults(),arguments,["delayTime","resonance","dampening"]);this._combFilter=this.output=new Xl({context:this.context,delayTime:t.delayTime,resonance:t.resonance}),this.delayTime=this._combFilter.delayTime,this.resonance=this._combFilter.resonance,this._lowpass=this.input=new Yl({context:this.context,frequency:t.dampening,type:"lowpass"}),this._lowpass.connect(this._combFilter)}static getDefaults(){return Object.assign(cu.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})}get dampening(){return this._lowpass.frequency}set dampening(t){this._lowpass.frequency=t}dispose(){return super.dispose(),this._combFilter.dispose(),this._lowpass.dispose(),this}}class Zl extends Al{constructor(){super(gs(Zl.getDefaults(),arguments)),this.name="PluckSynth";const t=gs(Zl.getDefaults(),arguments);this._noise=new Bu({context:this.context,type:"pink"}),this.attackNoise=t.attackNoise,this._lfcf=new Ql({context:this.context,dampening:t.dampening,resonance:t.resonance}),this.resonance=t.resonance,this.release=t.release,this._noise.connect(this._lfcf),this._lfcf.connect(this.output)}static getDefaults(){return vs(Al.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})}get dampening(){return this._lfcf.dampening}set dampening(t){this._lfcf.dampening=t}triggerAttack(t,e){const n=this.toFrequency(t);e=this.toSeconds(e);const r=1/n;return this._lfcf.delayTime.setValueAtTime(r,e),this._noise.start(e),this._noise.stop(e+r*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(e),this._lfcf.resonance.setValueAtTime(this.resonance,e),this}triggerRelease(t){return this._lfcf.resonance.linearRampTo(0,this.release,t),this}dispose(){return super.dispose(),this._noise.dispose(),this._lfcf.dispose(),this}}class Kl extends Al{constructor(){super(gs(Kl.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const t=gs(Kl.getDefaults(),arguments,["voice","options"]);Ha(!Ja(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const e=t.voice.getDefaults();this.options=Object.assign(e,t.options),this.voice=t.voice,this.maxPolyphony=t.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const n=this._voices.indexOf(this._dummyVoice);this._voices.splice(n,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Al.getDefaults(),{maxPolyphony:32,options:{},voice:Ol})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(t){this._availableVoices.push(t);const e=this._activeVoices.findIndex((e=>e.voice===t));this._activeVoices.splice(e,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const t=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return t.connect(this.output),this._voices.push(t),t}Qa("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const t=this._availableVoices.shift(),e=this._voices.indexOf(t);this._voices.splice(e,1),this.context.isOffline||t.dispose()}}_triggerAttack(t,e,n){t.forEach((t=>{const r=new Au(this.context,t).toMidi(),i=this._getNextAvailableVoice();i&&(i.triggerAttack(t,e,n),this._activeVoices.push({midi:r,voice:i,released:!1}),this.log("triggerAttack",t,e))}))}_triggerRelease(t,e){t.forEach((t=>{const n=new Au(this.context,t).toMidi(),r=this._activeVoices.find((({midi:t,released:e})=>t===n&&!e));r&&(r.voice.triggerRelease(e),r.released=!0,this.log("triggerRelease",t,e))}))}_scheduleEvent(t,e,n,r){Ha(!this.disposed,"Synth was already disposed"),n<=this.now()?"attack"===t?this._triggerAttack(e,n,r):this._triggerRelease(e,n):this.context.setTimeout((()=>{this._scheduleEvent(t,e,n,r)}),n-this.now())}triggerAttack(t,e,n){Array.isArray(t)||(t=[t]);const r=this.toSeconds(e);return this._scheduleEvent("attack",t,r,n),this}triggerRelease(t,e){Array.isArray(t)||(t=[t]);const n=this.toSeconds(e);return this._scheduleEvent("release",t,n),this}triggerAttackRelease(t,e,n,r){const i=this.toSeconds(n);if(this.triggerAttack(t,i,r),ns(e)){Ha(ns(t),"If the duration is an array, the notes must also be an array"),t=t;for(let n=0;n<t.length;n++){const r=e[Math.min(n,e.length-1)],o=this.toSeconds(r);Ha(o>0,"The duration must be greater than 0"),this.triggerRelease(t[n],i+o)}}else{const n=this.toSeconds(e);Ha(n>0,"The duration must be greater than 0"),this.triggerRelease(t,i+n)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(t){const e=bs(t,["onsilence","context"]);return this.options=vs(this.options,e),this._voices.forEach((t=>t.set(e))),this._dummyVoice.set(e),this}get(){return this._dummyVoice.get()}releaseAll(t){const e=this.toSeconds(t);return this._activeVoices.forEach((({voice:t})=>{t.triggerRelease(e)})),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach((t=>t.dispose())),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class $l extends Al{constructor(){super(gs($l.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const t=gs($l.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),e={};Object.keys(t.urls).forEach((n=>{const r=parseInt(n,10);if(Ha(is(n)||Ja(r)&&isFinite(r),`url key is neither a note or midi pitch: ${n}`),is(n)){const r=new eu(this.context,n).toMidi();e[r]=t.urls[n]}else Ja(r)&&isFinite(r)&&(e[r]=t.urls[r])})),this._buffers=new Tu({urls:e,onload:t.onload,baseUrl:t.baseUrl,onerror:t.onerror}),this.attack=t.attack,this.release=t.release,this.curve=t.curve,this._buffers.loaded&&Promise.resolve().then(t.onload)}static getDefaults(){return Object.assign(Al.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Fs,onerror:Fs,release:.1,urls:{}})}_findClosest(t){let e=0;for(;e<96;){if(this._buffers.has(t+e))return-e;if(this._buffers.has(t-e))return e;e++}throw new Error(`No available buffers for note: ${t}`)}triggerAttack(t,e,n=1){return this.log("triggerAttack",t,e,n),Array.isArray(t)||(t=[t]),t.forEach((t=>{const r=Zs(new eu(this.context,t).toFrequency()),i=Math.round(r),o=r-i,a=this._findClosest(i),s=i-a,u=this._buffers.get(s),l=Xs(a+o),c=new zu({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:l}).connect(this.output);c.start(e,0,u.duration/l,n),ns(this._activeSources.get(i))||this._activeSources.set(i,[]),this._activeSources.get(i).push(c),c.onended=()=>{if(this._activeSources&&this._activeSources.has(i)){const t=this._activeSources.get(i),e=t.indexOf(c);-1!==e&&t.splice(e,1)}}})),this}triggerRelease(t,e){return this.log("triggerRelease",t,e),Array.isArray(t)||(t=[t]),t.forEach((t=>{const n=new eu(this.context,t).toMidi();if(this._activeSources.has(n)&&this._activeSources.get(n).length){const t=this._activeSources.get(n);e=this.toSeconds(e),t.forEach((t=>{t.stop(e)})),this._activeSources.set(n,[])}})),this}releaseAll(t){const e=this.toSeconds(t);return this._activeSources.forEach((t=>{for(;t.length;)t.shift().stop(e)})),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(t,e,n,r=1){const i=this.toSeconds(n);return this.triggerAttack(t,i,r),ns(e)?(Ha(ns(t),"notes must be an array when duration is array"),t.forEach(((t,n)=>{const r=e[Math.min(n,e.length-1)];this.triggerRelease(t,i+this.toSeconds(r))}))):this.triggerRelease(t,i+this.toSeconds(e)),this}add(t,e,n){if(Ha(is(t)||isFinite(t),`note must be a pitch or midi: ${t}`),is(t)){const r=new eu(this.context,t).toMidi();this._buffers.add(r,e,n)}else this._buffers.add(t,e,n);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach((t=>{t.forEach((t=>t.dispose()))})),this._activeSources.clear(),this}}ss([hl(0)],$l.prototype,"attack",void 0),ss([hl(0)],$l.prototype,"release",void 0);class Jl extends su{constructor(){super(gs(Jl.getDefaults(),arguments,["callback","value"])),this.name="ToneEvent",this._state=new uu("stopped"),this._startOffset=0;const t=gs(Jl.getDefaults(),arguments,["callback","value"]);this._loop=t.loop,this.callback=t.callback,this.value=t.value,this._loopStart=this.toTicks(t.loopStart),this._loopEnd=this.toTicks(t.loopEnd),this._playbackRate=t.playbackRate,this._probability=t.probability,this._humanize=t.humanize,this.mute=t.mute,this._playbackRate=t.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(su.getDefaults(),{callback:Fs,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(t=-1){this._state.forEachFrom(t,(t=>{let e;if("started"===t.state){-1!==t.id&&this.context.transport.clear(t.id);const n=t.time+Math.round(this.startOffset/this._playbackRate);if(!0===this._loop||Ja(this._loop)&&this._loop>1){e=1/0,Ja(this._loop)&&(e=this._loop*this._getLoopDuration());const r=this._state.getAfter(n);null!==r&&(e=Math.min(e,r.time-n)),e!==1/0&&(this._state.setStateAtTime("stopped",n+e+1,{id:-1}),e=new Cu(this.context,e));const i=new Cu(this.context,this._getLoopDuration());t.id=this.context.transport.scheduleRepeat(this._tick.bind(this),i,new Cu(this.context,n),e)}else t.id=this.context.transport.schedule(this._tick.bind(this),new Cu(this.context,n))}}))}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t}get probability(){return this._probability}set probability(t){this._probability=t}get humanize(){return this._humanize}set humanize(t){this._humanize=t}start(t){const e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this}stop(t){this.cancel(t);const e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});const t=this._state.getBefore(e);let n=e;null!==t&&(n=t.time),this._rescheduleEvents(n)}return this}cancel(t){t=ys(t,-1/0);const e=this.toTicks(t);return this._state.forEachFrom(e,(t=>{this.context.transport.clear(t.id)})),this._state.cancel(e),this}_tick(t){const e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let e=.02;es(this.humanize)||(e=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*e}this.callback(t,this.value)}}_getLoopDuration(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)}get loop(){return this._loop}set loop(t){this._loop=t,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._rescheduleEvents()}get loopEnd(){return new Cu(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()}get loopStart(){return new Cu(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){const n=this._getLoopDuration();return(t-e.time)%n/n}return 0}return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class tc extends su{constructor(){super(gs(tc.getDefaults(),arguments,["callback","interval"])),this.name="Loop";const t=gs(tc.getDefaults(),arguments,["callback","interval"]);this._event=new Jl({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:t.interval,playbackRate:t.playbackRate,probability:t.probability}),this.callback=t.callback,this.iterations=t.iterations}static getDefaults(){return Object.assign(su.getDefaults(),{interval:"4n",callback:Fs,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(t){return this._event.start(t),this}stop(t){return this._event.stop(t),this}cancel(t){return this._event.cancel(t),this}_tick(t){this.callback(t)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(t){this._event.loopEnd=t}get playbackRate(){return this._event.playbackRate}set playbackRate(t){this._event.playbackRate=t}get humanize(){return this._event.humanize}set humanize(t){this._event.humanize=t}get probability(){return this._event.probability}set probability(t){this._event.probability=t}get mute(){return this._event.mute}set mute(t){this._event.mute=t}get iterations(){return!0===this._event.loop?1/0:this._event.loop}set iterations(t){this._event.loop=t===1/0||t}dispose(){return super.dispose(),this._event.dispose(),this}}class ec extends Jl{constructor(){super(gs(ec.getDefaults(),arguments,["callback","events"])),this.name="Part",this._state=new uu("stopped"),this._events=new Set;const t=gs(ec.getDefaults(),arguments,["callback","events"]);this._state.increasing=!0,t.events.forEach((t=>{ns(t)?this.add(t[0],t[1]):this.add(t)}))}static getDefaults(){return Object.assign(Jl.getDefaults(),{events:[]})}start(t,e){const n=this.toTicks(t);if("started"!==this._state.getValueAtTime(n)){e=ys(e,this._loop?this._loopStart:0),e=this._loop?ys(e,this._loopStart):ys(e,0);const t=this.toTicks(e);this._state.add({id:-1,offset:t,state:"started",time:n}),this._forEach((e=>{this._startNote(e,n,t)}))}return this}_startNote(t,e,n){e-=n,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<n&&(e+=this._getLoopDuration()),t.start(new Cu(this.context,e))):t.startOffset<this._loopStart&&t.startOffset>=n&&(t.loop=!1,t.start(new Cu(this.context,e))):t.startOffset>=n&&t.start(new Cu(this.context,e))}get startOffset(){return this._startOffset}set startOffset(t){this._startOffset=t,this._forEach((t=>{t.startOffset+=this._startOffset}))}stop(t){const e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach((e=>{e.stop(t)})),this}at(t,e){const n=new ou(this.context,t).toTicks(),r=new Cu(this.context,1).toSeconds(),i=this._events.values();let o=i.next();for(;!o.done;){const t=o.value;if(Math.abs(n-t.startOffset)<r)return Ka(e)&&(t.value=e),t;o=i.next()}return Ka(e)?(this.add(t,e),this.at(t)):null}add(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);const n=this.toTicks(t);let r;return e instanceof Jl?(r=e,r.callback=this._tick.bind(this)):r=new Jl({callback:this._tick.bind(this),context:this.context,value:e}),r.startOffset=n,r.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(r),this._restartEvent(r),this}_restartEvent(t){this._state.forEach((e=>{"started"===e.state?this._startNote(t,e.time,e.offset):t.stop(new Cu(this.context,e.time))}))}remove(t,e){return ts(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach((n=>{n.startOffset===t&&(Za(e)||Ka(e)&&n.value===e)&&(this._events.delete(n),n.dispose())})),this}clear(){return this._forEach((t=>t.dispose())),this._events.clear(),this}cancel(t){return this._forEach((e=>e.cancel(t))),this._state.cancel(this.toTicks(t)),this}_forEach(t){return this._events&&this._events.forEach((e=>{e instanceof ec?e._forEach(t):t(e)})),this}_setAll(t,e){this._forEach((n=>{n[t]=e}))}_tick(t,e){this.mute||this.callback(t,e)}_testLoopBoundries(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)}get probability(){return this._probability}set probability(t){this._probability=t,this._setAll("probability",t)}get humanize(){return this._humanize}set humanize(t){this._humanize=t,this._setAll("humanize",t)}get loop(){return this._loop}set loop(t){this._loop=t,this._forEach((e=>{e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.loop=t,this._testLoopBoundries(e)}))}get loopEnd(){return new Cu(this.context,this._loopEnd).toSeconds()}set loopEnd(t){this._loopEnd=this.toTicks(t),this._loop&&this._forEach((e=>{e.loopEnd=t,this._testLoopBoundries(e)}))}get loopStart(){return new Cu(this.context,this._loopStart).toSeconds()}set loopStart(t){this._loopStart=this.toTicks(t),this._loop&&this._forEach((t=>{t.loopStart=this.loopStart,this._testLoopBoundries(t)}))}get playbackRate(){return this._playbackRate}set playbackRate(t){this._playbackRate=t,this._setAll("playbackRate",t)}get length(){return this._events.size}dispose(){return super.dispose(),this.clear(),this}}function*nc(t){let e=0;for(;e<t.length;)e=oc(e,t),yield t[e],e++}function*rc(t){let e=t.length-1;for(;e>=0;)e=oc(e,t),yield t[e],e--}function*ic(t,e){for(;;)yield*e(t)}function oc(t,e){return As(t,0,e.length-1)}function*ac(t,e){let n=e?0:t.length-1;for(;;)n=oc(n,t),yield t[n],e?(n++,n>=t.length-1&&(e=!1)):(n--,n<=0&&(e=!0))}function*sc(t){let e=0,n=0;for(;e<t.length;)e=oc(e,t),yield t[e],n++,e+=n%2?2:-1}function*uc(t){let e=t.length-1,n=0;for(;e>=0;)e=oc(e,t),yield t[e],n++,e+=n%2?-2:1}function*lc(t){const e=[];for(let n=0;n<t.length;n++)e.push(n);for(;e.length>0;){const n=oc(e.splice(Math.floor(e.length*Math.random()),1)[0],t);yield t[n]}}function*cc(t,e="up",n=0){switch(Ha(t.length>0,"The array must have more than one value in it"),e){case"up":yield*ic(t,nc);case"down":yield*ic(t,rc);case"upDown":yield*ac(t,!0);case"downUp":yield*ac(t,!1);case"alternateUp":yield*ic(t,sc);case"alternateDown":yield*ic(t,uc);case"random":yield*function*(t){for(;;){const e=Math.floor(Math.random()*t.length);yield t[e]}}(t);case"randomOnce":yield*ic(t,lc);case"randomWalk":yield*function*(t){let e=Math.floor(Math.random()*t.length);for(;;)0===e?e++:e===t.length-1||Math.random()<.5?e--:e++,yield t[e]}(t)}}class hc extends tc{constructor(){super(gs(hc.getDefaults(),arguments,["callback","values","pattern"])),this.name="Pattern";const t=gs(hc.getDefaults(),arguments,["callback","values","pattern"]);this.callback=t.callback,this._values=t.values,this._pattern=cc(t.values,t.pattern),this._type=t.pattern}static getDefaults(){return Object.assign(tc.getDefaults(),{pattern:"up",values:[],callback:Fs})}_tick(t){const e=this._pattern.next();this._value=e.value,this.callback(t,this._value)}get values(){return this._values}set values(t){this._values=t,this.pattern=this._type}get value(){return this._value}get pattern(){return this._type}set pattern(t){this._type=t,this._pattern=cc(this._values,this._type)}}class fc extends Jl{constructor(){super(gs(fc.getDefaults(),arguments,["callback","events","subdivision"])),this.name="Sequence",this._part=new ec({callback:this._seqCallback.bind(this),context:this.context}),this._events=[],this._eventsArray=[];const t=gs(fc.getDefaults(),arguments,["callback","events","subdivision"]);this._subdivision=this.toTicks(t.subdivision),this.events=t.events,this.loop=t.loop,this.loopStart=t.loopStart,this.loopEnd=t.loopEnd,this.playbackRate=t.playbackRate,this.probability=t.probability,this.humanize=t.humanize,this.mute=t.mute,this.playbackRate=t.playbackRate}static getDefaults(){return Object.assign(bs(Jl.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})}_seqCallback(t,e){null!==e&&this.callback(t,e)}get events(){return this._events}set events(t){this.clear(),this._eventsArray=t,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()}start(t,e){return this._part.start(t,e?this._indexTime(e):e),this}stop(t){return this._part.stop(t),this}get subdivision(){return new Cu(this.context,this._subdivision).toSeconds()}_createSequence(t){return new Proxy(t,{get:(t,e)=>t[e],set:(t,e,n)=>(rs(e)&&isFinite(parseInt(e,10))&&ns(n)?t[e]=this._createSequence(n):t[e]=n,this._eventsUpdated(),!0)})}_eventsUpdated(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd}_rescheduleSequence(t,e,n){t.forEach(((t,r)=>{const i=r*e+n;if(ns(t))this._rescheduleSequence(t,e/t.length,i);else{const e=new Cu(this.context,i,"i").toSeconds();this._part.add(e,t)}}))}_indexTime(t){return new Cu(this.context,t*this._subdivision+this.startOffset).toSeconds()}clear(){return this._part.clear(),this}dispose(){return super.dispose(),this._part.dispose(),this}get loop(){return this._part.loop}set loop(t){this._part.loop=t}get loopStart(){return this._loopStart}set loopStart(t){this._loopStart=t,this._part.loopStart=this._indexTime(t)}get loopEnd(){return this._loopEnd}set loopEnd(t){this._loopEnd=t,this._part.loopEnd=0===t?this._indexTime(this._eventsArray.length):this._indexTime(t)}get startOffset(){return this._part.startOffset}set startOffset(t){this._part.startOffset=t}get playbackRate(){return this._part.playbackRate}set playbackRate(t){this._part.playbackRate=t}get probability(){return this._part.probability}set probability(t){this._part.probability=t}get progress(){return this._part.progress}get humanize(){return this._part.humanize}set humanize(t){this._part.humanize=t}get length(){return this._part.length}}class pc extends cu{constructor(){super(Object.assign(gs(pc.getDefaults(),arguments,["fade"]))),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new vl({context:this.context}),this.a=new du({context:this.context,gain:0}),this.b=new du({context:this.context,gain:0}),this.output=new du({context:this.context}),this._internalChannels=[this.a,this.b];const t=gs(pc.getDefaults(),arguments,["fade"]);this.fade=new gu({context:this.context,units:"normalRange",value:t.fade}),Ds(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",fu(this._split,this.a.gain,0),fu(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(cu.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class dc extends cu{constructor(t){super(t),this.name="Effect",this._dryWet=new pc({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new du({context:this.context}),this.effectReturn=new du({context:this.context}),this.input=new du({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(t.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],Ds(this,"wet")}static getDefaults(){return Object.assign(cu.getDefaults(),{wet:1})}connectEffect(t){return this._internalChannels.push(t),this.effectSend.chain(t,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class mc extends dc{constructor(t){super(t),this.name="LFOEffect",this._lfo=new ll({context:this.context,frequency:t.frequency,amplitude:t.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=t.type,Ds(this,["frequency","depth"])}static getDefaults(){return Object.assign(dc.getDefaults(),{frequency:1,type:"sine",depth:1})}start(t){return this._lfo.start(t),this}stop(t){return this._lfo.stop(t),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class vc extends mc{constructor(){super(gs(vc.getDefaults(),arguments,["frequency","baseFrequency","octaves"])),this.name="AutoFilter";const t=gs(vc.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);this.filter=new Ll(Object.assign(t.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=t.octaves,this.baseFrequency=t.baseFrequency}static getDefaults(){return Object.assign(mc.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(t){this._lfo.min=this.toFrequency(t),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._lfo.max=this._lfo.min*Math.pow(2,t)}dispose(){return super.dispose(),this.filter.dispose(),this}}class gc extends cu{constructor(){super(Object.assign(gs(gc.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const t=gs(gc.getDefaults(),arguments,["pan"]);this.pan=new lu({context:this.context,param:this._panner.pan,value:t.pan,minValue:-1,maxValue:1}),this._panner.channelCount=t.channelCount,this._panner.channelCountMode="explicit",Ds(this,"pan")}static getDefaults(){return Object.assign(cu.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}class yc extends mc{constructor(){super(gs(yc.getDefaults(),arguments,["frequency"])),this.name="AutoPanner";const t=gs(yc.getDefaults(),arguments,["frequency"]);this._panner=new gc({context:this.context,channelCount:t.channelCount}),this.connectEffect(this._panner),this._lfo.connect(this._panner.pan),this._lfo.min=-1,this._lfo.max=1}static getDefaults(){return Object.assign(mc.getDefaults(),{channelCount:1})}dispose(){return super.dispose(),this._panner.dispose(),this}}class bc extends cu{constructor(){super(gs(bc.getDefaults(),arguments,["smoothing"])),this.name="Follower";const t=gs(bc.getDefaults(),arguments,["smoothing"]);this._abs=this.input=new ml({context:this.context}),this._lowpass=this.output=new Yl({context:this.context,frequency:1/this.toSeconds(t.smoothing),type:"lowpass"}),this._abs.connect(this._lowpass),this._smoothing=t.smoothing}static getDefaults(){return Object.assign(cu.getDefaults(),{smoothing:.05})}get smoothing(){return this._smoothing}set smoothing(t){this._smoothing=t,this._lowpass.frequency=1/this.toSeconds(this.smoothing)}dispose(){return super.dispose(),this._abs.dispose(),this._lowpass.dispose(),this}}class _c extends dc{constructor(){super(gs(_c.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"])),this.name="AutoWah";const t=gs(_c.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);this._follower=new bc({context:this.context,smoothing:t.follower}),this._sweepRange=new wl({context:this.context,min:0,max:1,exponent:.5}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this._inputBoost=new du({context:this.context}),this._bandpass=new Ll({context:this.context,rolloff:-48,frequency:0,Q:t.Q}),this._peaking=new Ll({context:this.context,type:"peaking"}),this._peaking.gain.value=t.gain,this.gain=this._peaking.gain,this.Q=this._bandpass.Q,this.effectSend.chain(this._inputBoost,this._follower,this._sweepRange),this._sweepRange.connect(this._bandpass.frequency),this._sweepRange.connect(this._peaking.frequency),this.effectSend.chain(this._bandpass,this._peaking,this.effectReturn),this._setSweepRange(),this.sensitivity=t.sensitivity,Ds(this,["gain","Q"])}static getDefaults(){return Object.assign(dc.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})}get octaves(){return this._octaves}set octaves(t){this._octaves=t,this._setSweepRange()}get follower(){return this._follower.smoothing}set follower(t){this._follower.smoothing=t}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._setSweepRange()}get sensitivity(){return qs(1/this._inputBoost.gain.value)}set sensitivity(t){this._inputBoost.gain.value=1/Ws(t)}_setSweepRange(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)}dispose(){return super.dispose(),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this}}const xc="bit-crusher";Gl(xc,"\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class wc extends dc{constructor(){super(gs(wc.getDefaults(),arguments,["bits"])),this.name="BitCrusher";const t=gs(wc.getDefaults(),arguments,["bits"]);this._bitCrusherWorklet=new Ec({context:this.context,bits:t.bits}),this.connectEffect(this._bitCrusherWorklet),this.bits=this._bitCrusherWorklet.bits}static getDefaults(){return Object.assign(dc.getDefaults(),{bits:4})}dispose(){return super.dispose(),this._bitCrusherWorklet.dispose(),this}}class Ec extends Wl{constructor(){super(gs(Ec.getDefaults(),arguments)),this.name="BitCrusherWorklet";const t=gs(Ec.getDefaults(),arguments);this.input=new du({context:this.context}),this.output=new du({context:this.context}),this.bits=new lu({context:this.context,value:t.bits,units:"positive",minValue:1,maxValue:16,param:this._dummyParam,swappable:!0})}static getDefaults(){return Object.assign(Wl.getDefaults(),{bits:12})}_audioWorkletName(){return xc}onReady(t){hu(this.input,t,this.output);const e=t.parameters.get("bits");this.bits.setParam(e)}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this}}class Sc extends dc{constructor(){super(gs(Sc.getDefaults(),arguments,["order"])),this.name="Chebyshev";const t=gs(Sc.getDefaults(),arguments,["order"]);this._shaper=new Zu({context:this.context,length:4096}),this._order=t.order,this.connectEffect(this._shaper),this.order=t.order,this.oversample=t.oversample}static getDefaults(){return Object.assign(dc.getDefaults(),{order:1,oversample:"none"})}_getCoefficient(t,e,n){return n.has(e)||(0===e?n.set(e,0):1===e?n.set(e,t):n.set(e,2*t*this._getCoefficient(t,e-1,n)-this._getCoefficient(t,e-2,n))),n.get(e)}get order(){return this._order}set order(t){this._order=t,this._shaper.setMap((e=>this._getCoefficient(e,t,new Map)))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class Tc extends cu{constructor(){super(gs(Tc.getDefaults(),arguments,["channels"])),this.name="Split";const t=gs(Tc.getDefaults(),arguments,["channels"]);this._splitter=this.input=this.output=this.context.createChannelSplitter(t.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(cu.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Ac extends cu{constructor(){super(gs(Ac.getDefaults(),arguments,["channels"])),this.name="Merge";const t=gs(Ac.getDefaults(),arguments,["channels"]);this._merger=this.output=this.input=this.context.createChannelMerger(t.channels)}static getDefaults(){return Object.assign(cu.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class Mc extends cu{constructor(t){super(t),this.name="StereoEffect",this.input=new du({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new pc({context:this.context,fade:t.wet}),this.wet=this._dryWet.fade,this._split=new Tc({context:this.context,channels:2}),this._merge=new Ac({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),Ds(this,["wet"])}connectEffectLeft(...t){this._split.connect(t[0],0,0),hu(...t),fu(t[t.length-1],this._merge,0,0)}connectEffectRight(...t){this._split.connect(t[0],1,0),hu(...t),fu(t[t.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(cu.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class Cc extends Mc{constructor(t){super(t),this.feedback=new gu({context:this.context,value:t.feedback,units:"normalRange"}),this._feedbackL=new du({context:this.context}),this._feedbackR=new du({context:this.context}),this._feedbackSplit=new Tc({context:this.context,channels:2}),this._feedbackMerge=new Ac({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),Ds(this,["feedback"])}static getDefaults(){return Object.assign(Mc.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class Oc extends Cc{constructor(){super(gs(Oc.getDefaults(),arguments,["frequency","delayTime","depth"])),this.name="Chorus";const t=gs(Oc.getDefaults(),arguments,["frequency","delayTime","depth"]);this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new ll({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new ll({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new Eu({context:this.context}),this._delayNodeR=new Eu({context:this.context}),this.frequency=this._lfoL.frequency,Ds(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(Cc.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const e=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-e,0),this._lfoL.max=this._delayTime+e,this._lfoR.min=Math.max(this._delayTime-e,0),this._lfoR.max=this._delayTime+e}get delayTime(){return 1e3*this._delayTime}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}class Pc extends dc{constructor(){super(gs(Pc.getDefaults(),arguments,["distortion"])),this.name="Distortion";const t=gs(Pc.getDefaults(),arguments,["distortion"]);this._shaper=new Zu({context:this.context,length:4096}),this._distortion=t.distortion,this.connectEffect(this._shaper),this.distortion=t.distortion,this.oversample=t.oversample}static getDefaults(){return Object.assign(dc.getDefaults(),{distortion:.4,oversample:"none"})}get distortion(){return this._distortion}set distortion(t){this._distortion=t;const e=100*t,n=Math.PI/180;this._shaper.setMap((t=>Math.abs(t)<.001?0:(3+e)*t*20*n/(Math.PI+e*Math.abs(t))))}get oversample(){return this._shaper.oversample}set oversample(t){this._shaper.oversample=t}dispose(){return super.dispose(),this._shaper.dispose(),this}}class kc extends dc{constructor(t){super(t),this.name="FeedbackEffect",this._feedbackGain=new du({context:this.context,gain:t.feedback,units:"normalRange"}),this.feedback=this._feedbackGain.gain,Ds(this,"feedback"),this.effectReturn.chain(this._feedbackGain,this.effectSend)}static getDefaults(){return Object.assign(dc.getDefaults(),{feedback:.125})}dispose(){return super.dispose(),this._feedbackGain.dispose(),this.feedback.dispose(),this}}class Ic extends kc{constructor(){super(gs(Ic.getDefaults(),arguments,["delayTime","feedback"])),this.name="FeedbackDelay";const t=gs(Ic.getDefaults(),arguments,["delayTime","feedback"]);this._delayNode=new Eu({context:this.context,delayTime:t.delayTime,maxDelay:t.maxDelay}),this.delayTime=this._delayNode.delayTime,this.connectEffect(this._delayNode),Ds(this,"delayTime")}static getDefaults(){return Object.assign(kc.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._delayNode.dispose(),this.delayTime.dispose(),this}}class Lc extends cu{constructor(t){super(t),this.name="PhaseShiftAllpass",this.input=new du({context:this.context}),this.output=new du({context:this.context}),this.offset90=new du({context:this.context}),this._bank0=this._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),this._bank1=this._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),this._oneSampleDelay=this.context.createIIRFilter([0,1],[1,0]),hu(this.input,...this._bank0,this._oneSampleDelay,this.output),hu(this.input,...this._bank1,this.offset90)}_createAllPassFilterBank(t){return t.map((t=>{const e=[[t*t,0,-1],[1,0,-t*t]];return this.context.createIIRFilter(e[0],e[1])}))}dispose(){return super.dispose(),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach((t=>t.disconnect())),this._bank1.forEach((t=>t.disconnect())),this._oneSampleDelay.disconnect(),this}}class Rc extends dc{constructor(){super(gs(Rc.getDefaults(),arguments,["frequency"])),this.name="FrequencyShifter";const t=gs(Rc.getDefaults(),arguments,["frequency"]);this.frequency=new gu({context:this.context,units:"frequency",value:t.frequency,minValue:-this.context.sampleRate/2,maxValue:this.context.sampleRate/2}),this._sine=new Xu({context:this.context,type:"sine"}),this._cosine=new Yu({context:this.context,phase:-90,type:"sine"}),this._sineMultiply=new $u({context:this.context}),this._cosineMultiply=new $u({context:this.context}),this._negate=new gl({context:this.context}),this._add=new al({context:this.context}),this._phaseShifter=new Lc({context:this.context}),this.effectSend.connect(this._phaseShifter),this.frequency.fan(this._sine.frequency,this._cosine.frequency),this._phaseShifter.offset90.connect(this._cosineMultiply),this._cosine.connect(this._cosineMultiply.factor),this._phaseShifter.connect(this._sineMultiply),this._sine.connect(this._sineMultiply.factor),this._sineMultiply.connect(this._negate),this._cosineMultiply.connect(this._add),this._negate.connect(this._add.addend),this._add.connect(this.effectReturn);const e=this.immediate();this._sine.start(e),this._cosine.start(e)}static getDefaults(){return Object.assign(dc.getDefaults(),{frequency:0})}dispose(){return super.dispose(),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this}}const Dc=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],Nc=[225,556,441,341];class Fc extends Mc{constructor(){super(gs(Fc.getDefaults(),arguments,["roomSize","dampening"])),this.name="Freeverb",this._combFilters=[],this._allpassFiltersL=[],this._allpassFiltersR=[];const t=gs(Fc.getDefaults(),arguments,["roomSize","dampening"]);this.roomSize=new gu({context:this.context,value:t.roomSize,units:"normalRange"}),this._allpassFiltersL=Nc.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._allpassFiltersR=Nc.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._combFilters=Dc.map(((e,n)=>{const r=new Ql({context:this.context,dampening:t.dampening,delayTime:e});return n<Dc.length/2?this.connectEffectLeft(r,...this._allpassFiltersL):this.connectEffectRight(r,...this._allpassFiltersR),this.roomSize.connect(r.resonance),r})),Ds(this,["roomSize"])}static getDefaults(){return Object.assign(Mc.getDefaults(),{roomSize:.7,dampening:3e3})}get dampening(){return this._combFilters[0].dampening}set dampening(t){this._combFilters.forEach((e=>e.dampening=t))}dispose(){return super.dispose(),this._allpassFiltersL.forEach((t=>t.disconnect())),this._allpassFiltersR.forEach((t=>t.disconnect())),this._combFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this}}const jc=[.06748,.06404,.08212,.09004],Uc=[.773,.802,.753,.733],zc=[347,113,37];class Bc extends Mc{constructor(){super(gs(Bc.getDefaults(),arguments,["roomSize"])),this.name="JCReverb",this._allpassFilters=[],this._feedbackCombFilters=[];const t=gs(Bc.getDefaults(),arguments,["roomSize"]);this.roomSize=new gu({context:this.context,value:t.roomSize,units:"normalRange"}),this._scaleRoomSize=new sl({context:this.context,min:-.733,max:.197}),this._allpassFilters=zc.map((t=>{const e=this.context.createBiquadFilter();return e.type="allpass",e.frequency.value=t,e})),this._feedbackCombFilters=jc.map(((t,e)=>{const n=new Xl({context:this.context,delayTime:t});return this._scaleRoomSize.connect(n.resonance),n.resonance.value=Uc[e],e<jc.length/2?this.connectEffectLeft(...this._allpassFilters,n):this.connectEffectRight(...this._allpassFilters,n),n})),this.roomSize.connect(this._scaleRoomSize),Ds(this,["roomSize"])}static getDefaults(){return Object.assign(Mc.getDefaults(),{roomSize:.5})}dispose(){return super.dispose(),this._allpassFilters.forEach((t=>t.disconnect())),this._feedbackCombFilters.forEach((t=>t.dispose())),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this}}class Vc extends Cc{constructor(t){super(t),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),Ds(this,["feedback"])}}class Hc extends Vc{constructor(){super(gs(Hc.getDefaults(),arguments,["delayTime","feedback"])),this.name="PingPongDelay";const t=gs(Hc.getDefaults(),arguments,["delayTime","feedback"]);this._leftDelay=new Eu({context:this.context,maxDelay:t.maxDelay}),this._rightDelay=new Eu({context:this.context,maxDelay:t.maxDelay}),this._rightPreDelay=new Eu({context:this.context,maxDelay:t.maxDelay}),this.delayTime=new gu({context:this.context,units:"time",value:t.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),Ds(this,["delayTime"])}static getDefaults(){return Object.assign(Vc.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Gc extends kc{constructor(){super(gs(Gc.getDefaults(),arguments,["pitch"])),this.name="PitchShift";const t=gs(Gc.getDefaults(),arguments,["pitch"]);this._frequency=new gu({context:this.context}),this._delayA=new Eu({maxDelay:1,context:this.context}),this._lfoA=new ll({context:this.context,min:0,max:.1,type:"sawtooth"}).connect(this._delayA.delayTime),this._delayB=new Eu({maxDelay:1,context:this.context}),this._lfoB=new ll({context:this.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(this._delayB.delayTime),this._crossFade=new pc({context:this.context}),this._crossFadeLFO=new ll({context:this.context,min:0,max:1,type:"triangle",phase:90}).connect(this._crossFade.fade),this._feedbackDelay=new Eu({delayTime:t.delayTime,context:this.context}),this.delayTime=this._feedbackDelay.delayTime,Ds(this,"delayTime"),this._pitch=t.pitch,this._windowSize=t.windowSize,this._delayA.connect(this._crossFade.a),this._delayB.connect(this._crossFade.b),this._frequency.fan(this._lfoA.frequency,this._lfoB.frequency,this._crossFadeLFO.frequency),this.effectSend.fan(this._delayA,this._delayB),this._crossFade.chain(this._feedbackDelay,this.effectReturn);const e=this.now();this._lfoA.start(e),this._lfoB.start(e),this._crossFadeLFO.start(e),this.windowSize=this._windowSize}static getDefaults(){return Object.assign(kc.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})}get pitch(){return this._pitch}set pitch(t){this._pitch=t;let e=0;t<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,e=Xs(t-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,e=Xs(t)-1),this._frequency.value=e*(1.2/this._windowSize)}get windowSize(){return this._windowSize}set windowSize(t){this._windowSize=this.toSeconds(t),this.pitch=this._pitch}dispose(){return super.dispose(),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this}}class Wc extends Mc{constructor(){super(gs(Wc.getDefaults(),arguments,["frequency","octaves","baseFrequency"])),this.name="Phaser";const t=gs(Wc.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);this._lfoL=new ll({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new ll({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._baseFrequency=this.toFrequency(t.baseFrequency),this._octaves=t.octaves,this.Q=new gu({context:this.context,value:t.Q,units:"positive"}),this._filtersL=this._makeFilters(t.stages,this._lfoL),this._filtersR=this._makeFilters(t.stages,this._lfoR),this.frequency=this._lfoL.frequency,this.frequency.value=t.frequency,this.connectEffectLeft(...this._filtersL),this.connectEffectRight(...this._filtersR),this._lfoL.frequency.connect(this._lfoR.frequency),this.baseFrequency=t.baseFrequency,this.octaves=t.octaves,this._lfoL.start(),this._lfoR.start(),Ds(this,["frequency","Q"])}static getDefaults(){return Object.assign(Mc.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})}_makeFilters(t,e){const n=[];for(let r=0;r<t;r++){const t=this.context.createBiquadFilter();t.type="allpass",this.Q.connect(t.Q),e.connect(t.frequency),n.push(t)}return n}get octaves(){return this._octaves}set octaves(t){this._octaves=t;const e=this._baseFrequency*Math.pow(2,t);this._lfoL.max=e,this._lfoR.max=e}get baseFrequency(){return this._baseFrequency}set baseFrequency(t){this._baseFrequency=this.toFrequency(t),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves}dispose(){return super.dispose(),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach((t=>t.disconnect())),this._filtersR.forEach((t=>t.disconnect())),this.frequency.dispose(),this}}class qc extends dc{constructor(){super(gs(qc.getDefaults(),arguments,["decay"])),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve();const t=gs(qc.getDefaults(),arguments,["decay"]);this._decay=t.decay,this._preDelay=t.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(dc.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(t){Ga(t=this.toSeconds(t),.001),this._decay=t,this.generate()}get preDelay(){return this._preDelay}set preDelay(t){Ga(t=this.toSeconds(t),0),this._preDelay=t,this.generate()}generate(){return us(this,void 0,void 0,(function*(){const t=this.ready,e=new Us(2,this._decay+this._preDelay,this.context.sampleRate),n=new Bu({context:e}),r=new Bu({context:e}),i=new Ac({context:e});n.connect(i,0,0),r.connect(i,0,1);const o=new du({context:e}).toDestination();i.connect(o),n.start(0),r.start(0),o.gain.setValueAtTime(0,0),o.gain.setValueAtTime(1,this._preDelay),o.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const a=e.render();return this.ready=a.then(Fs),yield t,this._convolver.buffer=(yield a).get(),this}))}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Xc extends cu{constructor(){super(gs(Xc.getDefaults(),arguments)),this.name="MidSideSplit",this._split=this.input=new Tc({channels:2,context:this.context}),this._midAdd=new al({context:this.context}),this.mid=new $u({context:this.context,value:Math.SQRT1_2}),this._sideSubtract=new yl({context:this.context}),this.side=new $u({context:this.context,value:Math.SQRT1_2}),this._split.connect(this._midAdd,0),this._split.connect(this._midAdd.addend,1),this._split.connect(this._sideSubtract,0),this._split.connect(this._sideSubtract.subtrahend,1),this._midAdd.connect(this.mid),this._sideSubtract.connect(this.side)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this}}class Yc extends cu{constructor(){super(gs(Yc.getDefaults(),arguments)),this.name="MidSideMerge",this.mid=new du({context:this.context}),this.side=new du({context:this.context}),this._left=new al({context:this.context}),this._leftMult=new $u({context:this.context,value:Math.SQRT1_2}),this._right=new yl({context:this.context}),this._rightMult=new $u({context:this.context,value:Math.SQRT1_2}),this._merge=this.output=new Ac({context:this.context}),this.mid.fan(this._left),this.side.connect(this._left.addend),this.mid.connect(this._right),this.side.connect(this._right.subtrahend),this._left.connect(this._leftMult),this._right.connect(this._rightMult),this._leftMult.connect(this._merge,0,0),this._rightMult.connect(this._merge,0,1)}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this}}class Qc extends dc{constructor(t){super(t),this.name="MidSideEffect",this._midSideMerge=new Yc({context:this.context}),this._midSideSplit=new Xc({context:this.context}),this._midSend=this._midSideSplit.mid,this._sideSend=this._midSideSplit.side,this._midReturn=this._midSideMerge.mid,this._sideReturn=this._midSideMerge.side,this.effectSend.connect(this._midSideSplit),this._midSideMerge.connect(this.effectReturn)}connectEffectMid(...t){this._midSend.chain(...t,this._midReturn)}connectEffectSide(...t){this._sideSend.chain(...t,this._sideReturn)}dispose(){return super.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this}}class Zc extends Qc{constructor(){super(gs(Zc.getDefaults(),arguments,["width"])),this.name="StereoWidener";const t=gs(Zc.getDefaults(),arguments,["width"]);this.width=new gu({context:this.context,value:t.width,units:"normalRange"}),Ds(this,["width"]),this._twoTimesWidthMid=new $u({context:this.context,value:2}),this._twoTimesWidthSide=new $u({context:this.context,value:2}),this._midMult=new $u({context:this.context}),this._twoTimesWidthMid.connect(this._midMult.factor),this.connectEffectMid(this._midMult),this._oneMinusWidth=new yl({context:this.context}),this._oneMinusWidth.connect(this._twoTimesWidthMid),fu(this.context.getConstant(1),this._oneMinusWidth),this.width.connect(this._oneMinusWidth.subtrahend),this._sideMult=new $u({context:this.context}),this.width.connect(this._twoTimesWidthSide),this._twoTimesWidthSide.connect(this._sideMult.factor),this.connectEffectSide(this._sideMult)}static getDefaults(){return Object.assign(Qc.getDefaults(),{width:.5})}dispose(){return super.dispose(),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this}}class Kc extends Mc{constructor(){super(gs(Kc.getDefaults(),arguments,["frequency","depth"])),this.name="Tremolo";const t=gs(Kc.getDefaults(),arguments,["frequency","depth"]);this._lfoL=new ll({context:this.context,type:t.type,min:1,max:0}),this._lfoR=new ll({context:this.context,type:t.type,min:1,max:0}),this._amplitudeL=new du({context:this.context}),this._amplitudeR=new du({context:this.context}),this.frequency=new gu({context:this.context,value:t.frequency,units:"frequency"}),this.depth=new gu({context:this.context,value:t.depth,units:"normalRange"}),Ds(this,["frequency","depth"]),this.connectEffectLeft(this._amplitudeL),this.connectEffectRight(this._amplitudeR),this._lfoL.connect(this._amplitudeL.gain),this._lfoR.connect(this._amplitudeR.gain),this.frequency.fan(this._lfoL.frequency,this._lfoR.frequency),this.depth.fan(this._lfoR.amplitude,this._lfoL.amplitude),this.spread=t.spread}static getDefaults(){return Object.assign(Mc.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class $c extends dc{constructor(){super(gs($c.getDefaults(),arguments,["frequency","depth"])),this.name="Vibrato";const t=gs($c.getDefaults(),arguments,["frequency","depth"]);this._delayNode=new Eu({context:this.context,delayTime:0,maxDelay:t.maxDelay}),this._lfo=new ll({context:this.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(this._delayNode.delayTime),this.frequency=this._lfo.frequency,this.depth=this._lfo.amplitude,this.depth.value=t.depth,Ds(this,["frequency","depth"]),this.effectSend.chain(this._delayNode,this.effectReturn)}static getDefaults(){return Object.assign(dc.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})}get type(){return this._lfo.type}set type(t){this._lfo.type=t}dispose(){return super.dispose(),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class Jc extends cu{constructor(){super(gs(Jc.getDefaults(),arguments,["type","size"])),this.name="Analyser",this._analysers=[],this._buffers=[];const t=gs(Jc.getDefaults(),arguments,["type","size"]);this.input=this.output=this._gain=new du({context:this.context}),this._split=new Tc({context:this.context,channels:t.channels}),this.input.connect(this._split),Ga(t.channels,1);for(let e=0;e<t.channels;e++)this._analysers[e]=this.context.createAnalyser(),this._split.connect(this._analysers[e],e,0);this.size=t.size,this.type=t.type}static getDefaults(){return Object.assign(cu.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})}getValue(){return this._analysers.forEach(((t,e)=>{const n=this._buffers[e];"fft"===this._type?t.getFloatFrequencyData(n):"waveform"===this._type&&t.getFloatTimeDomainData(n)})),1===this.channels?this._buffers[0]:this._buffers}get size(){return this._analysers[0].frequencyBinCount}set size(t){this._analysers.forEach(((e,n)=>{e.fftSize=2*t,this._buffers[n]=new Float32Array(t)}))}get channels(){return this._analysers.length}get type(){return this._type}set type(t){Ha("waveform"===t||"fft"===t,`Analyser: invalid type: ${t}`),this._type=t}get smoothing(){return this._analysers[0].smoothingTimeConstant}set smoothing(t){this._analysers.forEach((e=>e.smoothingTimeConstant=t))}dispose(){return super.dispose(),this._analysers.forEach((t=>t.disconnect())),this._split.dispose(),this._gain.dispose(),this}}class th extends cu{constructor(){super(gs(th.getDefaults(),arguments)),this.name="MeterBase",this.input=this.output=this._analyser=new Jc({context:this.context,size:256,type:"waveform"})}dispose(){return super.dispose(),this._analyser.dispose(),this}}class eh extends th{constructor(){super(gs(eh.getDefaults(),arguments,["smoothing"])),this.name="Meter",this._rms=0;const t=gs(eh.getDefaults(),arguments,["smoothing"]);this.input=this.output=this._analyser=new Jc({context:this.context,size:256,type:"waveform",channels:t.channels}),this.smoothing=t.smoothing,this.normalRange=t.normalRange}static getDefaults(){return Object.assign(th.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})}getLevel(){return Qa("'getLevel' has been changed to 'getValue'"),this.getValue()}getValue(){const t=this._analyser.getValue(),e=(1===this.channels?[t]:t).map((t=>{const e=t.reduce(((t,e)=>t+e*e),0),n=Math.sqrt(e/t.length);return this._rms=Math.max(n,this._rms*this.smoothing),this.normalRange?this._rms:qs(this._rms)}));return 1===this.channels?e[0]:e}get channels(){return this._analyser.channels}dispose(){return super.dispose(),this._analyser.dispose(),this}}class nh extends th{constructor(){super(gs(nh.getDefaults(),arguments,["size"])),this.name="FFT";const t=gs(nh.getDefaults(),arguments,["size"]);this.normalRange=t.normalRange,this._analyser.type="fft",this.size=t.size}static getDefaults(){return Object.assign(cu.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})}getValue(){return this._analyser.getValue().map((t=>this.normalRange?Ws(t):t))}get size(){return this._analyser.size}set size(t){this._analyser.size=t}get smoothing(){return this._analyser.smoothing}set smoothing(t){this._analyser.smoothing=t}getFrequencyOfIndex(t){return Ha(0<=t&&t<this.size,`index must be greater than or equal to 0 and less than ${this.size}`),t*this.context.sampleRate/(2*this.size)}}class rh extends th{constructor(){super(gs(rh.getDefaults(),arguments)),this.name="DCMeter",this._analyser.type="waveform",this._analyser.size=256}getValue(){return this._analyser.getValue()[0]}}class ih extends th{constructor(){super(gs(ih.getDefaults(),arguments,["size"])),this.name="Waveform";const t=gs(ih.getDefaults(),arguments,["size"]);this._analyser.type="waveform",this.size=t.size}static getDefaults(){return Object.assign(th.getDefaults(),{size:1024})}getValue(){return this._analyser.getValue()}get size(){return this._analyser.size}set size(t){this._analyser.size=t}}class oh extends cu{constructor(){super(gs(oh.getDefaults(),arguments,["solo"])),this.name="Solo";const t=gs(oh.getDefaults(),arguments,["solo"]);this.input=this.output=new du({context:this.context}),oh._allSolos.has(this.context)||oh._allSolos.set(this.context,new Set),oh._allSolos.get(this.context).add(this),this.solo=t.solo}static getDefaults(){return Object.assign(cu.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(t){t?this._addSolo():this._removeSolo(),oh._allSolos.get(this.context).forEach((t=>t._updateSolo()))}get muted(){return 0===this.input.gain.value}_addSolo(){oh._soloed.has(this.context)||oh._soloed.set(this.context,new Set),oh._soloed.get(this.context).add(this)}_removeSolo(){oh._soloed.has(this.context)&&oh._soloed.get(this.context).delete(this)}_isSoloed(){return oh._soloed.has(this.context)&&oh._soloed.get(this.context).has(this)}_noSolos(){return!oh._soloed.has(this.context)||oh._soloed.has(this.context)&&0===oh._soloed.get(this.context).size}_updateSolo(){this._isSoloed()||this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),oh._allSolos.get(this.context).delete(this),this._removeSolo(),this}}oh._allSolos=new Map,oh._soloed=new Map;class ah extends cu{constructor(){super(gs(ah.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const t=gs(ah.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new gc({context:this.context,pan:t.pan,channelCount:t.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Lu({context:this.context,volume:t.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=t.mute,Ds(this,["pan","volume"])}static getDefaults(){return Object.assign(cu.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(t){this._volume.mute=t}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class sh extends cu{constructor(){super(gs(sh.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const t=gs(sh.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new oh({solo:t.solo,context:this.context}),this._panVol=this.output=new ah({context:this.context,pan:t.pan,volume:t.volume,mute:t.mute,channelCount:t.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),Ds(this,["pan","volume"])}static getDefaults(){return Object.assign(cu.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(t){this._solo.solo=t}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(t){this._panVol.mute=t}_getBus(t){return sh.buses.has(t)||sh.buses.set(t,new du({context:this.context})),sh.buses.get(t)}send(t,e=0){const n=this._getBus(t),r=new du({context:this.context,units:"decibels",gain:e});return this.connect(r),r.connect(n),r}receive(t){return this._getBus(t).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}sh.buses=new Map;class uh extends cu{constructor(){super(gs(uh.getDefaults(),arguments,["lowFrequency","highFrequency"])),this.name="MultibandSplit",this.input=new du({context:this.context}),this.output=void 0,this.low=new Ll({context:this.context,frequency:0,type:"lowpass"}),this._lowMidFilter=new Ll({context:this.context,frequency:0,type:"highpass"}),this.mid=new Ll({context:this.context,frequency:0,type:"lowpass"}),this.high=new Ll({context:this.context,frequency:0,type:"highpass"}),this._internalChannels=[this.low,this.mid,this.high];const t=gs(uh.getDefaults(),arguments,["lowFrequency","highFrequency"]);this.lowFrequency=new gu({context:this.context,units:"frequency",value:t.lowFrequency}),this.highFrequency=new gu({context:this.context,units:"frequency",value:t.highFrequency}),this.Q=new gu({context:this.context,units:"positive",value:t.Q}),this.input.fan(this.low,this.high),this.input.chain(this._lowMidFilter,this.mid),this.lowFrequency.fan(this.low.frequency,this._lowMidFilter.frequency),this.highFrequency.fan(this.mid.frequency,this.high.frequency),this.Q.connect(this.low.Q),this.Q.connect(this._lowMidFilter.Q),this.Q.connect(this.mid.Q),this.Q.connect(this.high.Q),Ds(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(cu.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})}dispose(){return super.dispose(),Ns(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this}}class lh extends cu{constructor(){super(...arguments),this.name="Listener",this.positionX=new lu({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new lu({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new lu({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new lu({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new lu({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new lu({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new lu({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new lu({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new lu({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(cu.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}Os((t=>{t.listener=new lh({context:t})})),ks((t=>{t.listener.dispose()}));class ch extends cu{constructor(){super(gs(ch.getDefaults(),arguments,["positionX","positionY","positionZ"])),this.name="Panner3D";const t=gs(ch.getDefaults(),arguments,["positionX","positionY","positionZ"]);this._panner=this.input=this.output=this.context.createPanner(),this.panningModel=t.panningModel,this.maxDistance=t.maxDistance,this.distanceModel=t.distanceModel,this.coneOuterGain=t.coneOuterGain,this.coneOuterAngle=t.coneOuterAngle,this.coneInnerAngle=t.coneInnerAngle,this.refDistance=t.refDistance,this.rolloffFactor=t.rolloffFactor,this.positionX=new lu({context:this.context,param:this._panner.positionX,value:t.positionX}),this.positionY=new lu({context:this.context,param:this._panner.positionY,value:t.positionY}),this.positionZ=new lu({context:this.context,param:this._panner.positionZ,value:t.positionZ}),this.orientationX=new lu({context:this.context,param:this._panner.orientationX,value:t.orientationX}),this.orientationY=new lu({context:this.context,param:this._panner.orientationY,value:t.orientationY}),this.orientationZ=new lu({context:this.context,param:this._panner.orientationZ,value:t.orientationZ})}static getDefaults(){return Object.assign(cu.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})}setPosition(t,e,n){return this.positionX.value=t,this.positionY.value=e,this.positionZ.value=n,this}setOrientation(t,e,n){return this.orientationX.value=t,this.orientationY.value=e,this.orientationZ.value=n,this}get panningModel(){return this._panner.panningModel}set panningModel(t){this._panner.panningModel=t}get refDistance(){return this._panner.refDistance}set refDistance(t){this._panner.refDistance=t}get rolloffFactor(){return this._panner.rolloffFactor}set rolloffFactor(t){this._panner.rolloffFactor=t}get distanceModel(){return this._panner.distanceModel}set distanceModel(t){this._panner.distanceModel=t}get coneInnerAngle(){return this._panner.coneInnerAngle}set coneInnerAngle(t){this._panner.coneInnerAngle=t}get coneOuterAngle(){return this._panner.coneOuterAngle}set coneOuterAngle(t){this._panner.coneOuterAngle=t}get coneOuterGain(){return this._panner.coneOuterGain}set coneOuterGain(t){this._panner.coneOuterGain=t}get maxDistance(){return this._panner.maxDistance}set maxDistance(t){this._panner.maxDistance=t}dispose(){return super.dispose(),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this}}class hh extends cu{constructor(){super(gs(hh.getDefaults(),arguments)),this.name="Recorder";const t=gs(hh.getDefaults(),arguments);this.input=new du({context:this.context}),Ha(hh.supported,"Media Recorder API is not available"),this._stream=this.context.createMediaStreamDestination(),this.input.connect(this._stream),this._recorder=new MediaRecorder(this._stream.stream,{mimeType:t.mimeType})}static getDefaults(){return cu.getDefaults()}get mimeType(){return this._recorder.mimeType}static get supported(){return null!==os&&Reflect.has(os,"MediaRecorder")}get state(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"}start(){return us(this,void 0,void 0,(function*(){Ha("started"!==this.state,"Recorder is already started");const t=new Promise((t=>{const e=()=>{this._recorder.removeEventListener("start",e,!1),t()};this._recorder.addEventListener("start",e,!1)}));return this._recorder.start(),yield t}))}stop(){return us(this,void 0,void 0,(function*(){Ha("stopped"!==this.state,"Recorder is not started");const t=new Promise((t=>{const e=n=>{this._recorder.removeEventListener("dataavailable",e,!1),t(n.data)};this._recorder.addEventListener("dataavailable",e,!1)}));return this._recorder.stop(),yield t}))}pause(){return Ha("started"===this.state,"Recorder must be started"),this._recorder.pause(),this}dispose(){return super.dispose(),this.input.dispose(),this._stream.disconnect(),this}}class fh extends cu{constructor(){super(gs(fh.getDefaults(),arguments,["threshold","ratio"])),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor;const t=gs(fh.getDefaults(),arguments,["threshold","ratio"]);this.threshold=new lu({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:t.threshold}),this.attack=new lu({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:t.attack}),this.release=new lu({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:t.release}),this.knee=new lu({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:t.knee}),this.ratio=new lu({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:t.ratio}),Ds(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(cu.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}class ph extends cu{constructor(){super(Object.assign(gs(ph.getDefaults(),arguments,["threshold","smoothing"]))),this.name="Gate";const t=gs(ph.getDefaults(),arguments,["threshold","smoothing"]);this._follower=new bc({context:this.context,smoothing:t.smoothing}),this._gt=new _l({context:this.context,value:Ws(t.threshold)}),this.input=new du({context:this.context}),this._gate=this.output=new du({context:this.context}),this.input.connect(this._gate),this.input.chain(this._follower,this._gt,this._gate.gain)}static getDefaults(){return Object.assign(cu.getDefaults(),{smoothing:.1,threshold:-40})}get threshold(){return qs(this._gt.value)}set threshold(t){this._gt.value=Ws(t)}get smoothing(){return this._follower.smoothing}set smoothing(t){this._follower.smoothing=t}dispose(){return super.dispose(),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this}}class dh extends cu{constructor(){super(Object.assign(gs(dh.getDefaults(),arguments,["threshold"]))),this.name="Limiter";const t=gs(dh.getDefaults(),arguments,["threshold"]);this._compressor=this.input=this.output=new fh({context:this.context,ratio:20,attack:0,release:0,threshold:t.threshold}),this.threshold=this._compressor.threshold,Ds(this,"threshold")}static getDefaults(){return Object.assign(cu.getDefaults(),{threshold:-12})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.dispose(),this.threshold.dispose(),this}}class mh extends cu{constructor(){super(Object.assign(gs(mh.getDefaults(),arguments))),this.name="MidSideCompressor";const t=gs(mh.getDefaults(),arguments);this._midSideSplit=this.input=new Xc({context:this.context}),this._midSideMerge=this.output=new Yc({context:this.context}),this.mid=new fh(Object.assign(t.mid,{context:this.context})),this.side=new fh(Object.assign(t.side,{context:this.context})),this._midSideSplit.mid.chain(this.mid,this._midSideMerge.mid),this._midSideSplit.side.chain(this.side,this._midSideMerge.side),Ds(this,["mid","side"])}static getDefaults(){return Object.assign(cu.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})}dispose(){return super.dispose(),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this}}class vh extends cu{constructor(){super(Object.assign(gs(vh.getDefaults(),arguments))),this.name="MultibandCompressor";const t=gs(vh.getDefaults(),arguments);this._splitter=this.input=new uh({context:this.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),this.lowFrequency=this._splitter.lowFrequency,this.highFrequency=this._splitter.highFrequency,this.output=new du({context:this.context}),this.low=new fh(Object.assign(t.low,{context:this.context})),this.mid=new fh(Object.assign(t.mid,{context:this.context})),this.high=new fh(Object.assign(t.high,{context:this.context})),this._splitter.low.chain(this.low,this.output),this._splitter.mid.chain(this.mid,this.output),this._splitter.high.chain(this.high,this.output),Ds(this,["high","mid","low","highFrequency","lowFrequency"])}static getDefaults(){return Object.assign(cu.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})}dispose(){return super.dispose(),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this}}class gh extends cu{constructor(){super(gs(gh.getDefaults(),arguments,["low","mid","high"])),this.name="EQ3",this.output=new du({context:this.context}),this._internalChannels=[];const t=gs(gh.getDefaults(),arguments,["low","mid","high"]);this.input=this._multibandSplit=new uh({context:this.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),this._lowGain=new du({context:this.context,gain:t.low,units:"decibels"}),this._midGain=new du({context:this.context,gain:t.mid,units:"decibels"}),this._highGain=new du({context:this.context,gain:t.high,units:"decibels"}),this.low=this._lowGain.gain,this.mid=this._midGain.gain,this.high=this._highGain.gain,this.Q=this._multibandSplit.Q,this.lowFrequency=this._multibandSplit.lowFrequency,this.highFrequency=this._multibandSplit.highFrequency,this._multibandSplit.low.chain(this._lowGain,this.output),this._multibandSplit.mid.chain(this._midGain,this.output),this._multibandSplit.high.chain(this._highGain,this.output),Ds(this,["low","mid","high","lowFrequency","highFrequency"]),this._internalChannels=[this._multibandSplit]}static getDefaults(){return Object.assign(cu.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})}dispose(){return super.dispose(),Ns(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this}}class yh extends cu{constructor(){super(gs(yh.getDefaults(),arguments,["url","onload"])),this.name="Convolver",this._convolver=this.context.createConvolver();const t=gs(yh.getDefaults(),arguments,["url","onload"]);this._buffer=new js(t.url,(e=>{this.buffer=e,t.onload()})),this.input=new du({context:this.context}),this.output=new du({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=t.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(cu.getDefaults(),{normalize:!0,onload:Fs})}load(t){return us(this,void 0,void 0,(function*(){this.buffer=yield this._buffer.load(t)}))}get buffer(){return this._buffer.length?this._buffer:null}set buffer(t){t&&this._buffer.set(t),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const e=this._buffer.get();this._convolver.buffer=e||null}get normalize(){return this._convolver.normalize}set normalize(t){this._convolver.normalize=t}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function bh(){return Vs().now()}function _h(){return Vs().immediate()}const xh=Vs().transport;function wh(){return Vs().transport}const Eh=Vs().destination,Sh=Vs().destination;function Th(){return Vs().destination}const Ah=Vs().listener;function Mh(){return Vs().listener}const Ch=Vs().draw;function Oh(){return Vs().draw}const Ph=Vs();function kh(){return js.loaded()}const Ih=js,Lh=Tu,Rh=zu;var Dh,Nh=n(5861),Fh=n.n(Nh),jh=n(1102),Uh=n(8317),zh=(n(2470),n(5901)),Bh=[],Vh="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Dh||(Dh={}));var Hh,Gh=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Wh=function(t){return t instanceof SVGElement&&"getBBox"in t},qh=function(t){if(Wh(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var i=t,o=i.offsetWidth,a=i.offsetHeight;return!(o||a||t.getClientRects().length)},Xh=function(t){var e,n,r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},Yh="undefined"!=typeof window?window:{},Qh=new WeakMap,Zh=/auto|scroll/,Kh=/^tb|vertical/,$h=/msie|trident/i.test(Yh.navigator&&Yh.navigator.userAgent),Jh=function(t){return parseFloat(t||"0")},tf=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?e:t)||0,blockSize:(n?t:e)||0})},ef=Object.freeze({devicePixelContentBoxSize:tf(),borderBoxSize:tf(),contentBoxSize:tf(),contentRect:new Gh(0,0,0,0)}),nf=function(t,e){if(void 0===e&&(e=!1),Qh.has(t)&&!e)return Qh.get(t);if(qh(t))return Qh.set(t,ef),ef;var n=getComputedStyle(t),r=Wh(t)&&t.ownerSVGElement&&t.getBBox(),i=!$h&&"border-box"===n.boxSizing,o=Kh.test(n.writingMode||""),a=!r&&Zh.test(n.overflowY||""),s=!r&&Zh.test(n.overflowX||""),u=r?0:Jh(n.paddingTop),l=r?0:Jh(n.paddingRight),c=r?0:Jh(n.paddingBottom),h=r?0:Jh(n.paddingLeft),f=r?0:Jh(n.borderTopWidth),p=r?0:Jh(n.borderRightWidth),d=r?0:Jh(n.borderBottomWidth),m=h+l,v=u+c,g=(r?0:Jh(n.borderLeftWidth))+p,y=f+d,b=s?t.offsetHeight-y-t.clientHeight:0,_=a?t.offsetWidth-g-t.clientWidth:0,x=i?m+g:0,w=i?v+y:0,E=r?r.width:Jh(n.width)-x-_,S=r?r.height:Jh(n.height)-w-b,T=E+m+_+g,A=S+v+b+y,M=Object.freeze({devicePixelContentBoxSize:tf(Math.round(E*devicePixelRatio),Math.round(S*devicePixelRatio),o),borderBoxSize:tf(T,A,o),contentBoxSize:tf(E,S,o),contentRect:new Gh(h,u,E,S)});return Qh.set(t,M),M},rf=function(t,e,n){var r=nf(t,n),i=r.borderBoxSize,o=r.contentBoxSize,a=r.devicePixelContentBoxSize;switch(e){case Dh.DEVICE_PIXEL_CONTENT_BOX:return a;case Dh.BORDER_BOX:return i;default:return o}},of=function(t){var e=nf(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},af=function(t){if(qh(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},sf=function(){var t=1/0,e=[];Bh.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new of(e.target),i=af(e.target);r.push(n),e.lastReportedSize=rf(e.target,e.observedBox),i<t&&(t=i)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},uf=function(t){Bh.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(af(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},lf=[],cf=0,hf={attributes:!0,characterData:!0,childList:!0,subtree:!0},ff=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],pf=function(t){return void 0===t&&(t=0),Date.now()+t},df=!1,mf=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!df){df=!0;var n,r=pf(t);n=function(){var n=!1;try{n=function(){var t,e=0;for(uf(e);Bh.some((function(t){return t.activeTargets.length>0}));)e=sf(),uf(e);return Bh.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Vh}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Vh),window.dispatchEvent(t)),e>0}()}finally{if(df=!1,t=r-pf(),!cf)return;n?e.run(1e3):t>0?e.run(t):e.start()}},function(t){if(!Hh){var e=0,n=document.createTextNode("");new MutationObserver((function(){return lf.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Hh=function(){n.textContent=""+(e?e--:e++)}}lf.push(t),Hh()}((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,hf)};document.body?e():Yh.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ff.forEach((function(e){return Yh.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ff.forEach((function(e){return Yh.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),vf=function(t){!cf&&t>0&&mf.start(),!(cf+=t)&&mf.stop()},gf=function(){function t(t,e){this.target=t,this.observedBox=e||Dh.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=rf(this.target,this.observedBox,!0);return t=this.target,Wh(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),yf=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},bf=new WeakMap,_f=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},xf=function(){function t(){}return t.connect=function(t,e){var n=new yf(t,e);bf.set(t,n)},t.observe=function(t,e,n){var r=bf.get(t),i=0===r.observationTargets.length;_f(r.observationTargets,e)<0&&(i&&Bh.push(r),r.observationTargets.push(new gf(e,n&&n.box)),vf(1),mf.schedule())},t.unobserve=function(t,e){var n=bf.get(t),r=_f(n.observationTargets,e),i=1===n.observationTargets.length;r>=0&&(i&&Bh.splice(Bh.indexOf(n),1),n.observationTargets.splice(r,1),vf(-1))},t.disconnect=function(t){var e=this,n=bf.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),wf=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");xf.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Xh(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");xf.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Xh(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");xf.unobserve(this,t)},t.prototype.disconnect=function(){xf.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();const Ef=function(t){return function(e){t.forEach((function(t){"function"==typeof t?t(e):null!=t&&(t.current=e)}))}};function Sf(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t,"string");return"symbol"==typeof e?e:String(e)}const Tf=new Map,Af={},Mf={obj:t=>t===Object(t)&&!Mf.arr(t),fun:t=>"function"==typeof t,str:t=>"string"==typeof t,num:t=>"number"==typeof t,und:t=>void 0===t,arr:t=>Array.isArray(t),equ(t,e){if(typeof t!=typeof e||!!t!=!!e)return!1;if(Mf.str(t)||Mf.num(t)||Mf.obj(t))return t===e;if(Mf.arr(t)&&t==e)return!0;let n;for(n in t)if(!(n in e))return!1;for(n in e)if(t[n]!==e[n])return!1;return!Mf.und(n)||t===e}};let Cf=[],Of=[],Pf=[];function kf(t,e,n=0,r=!1){r&&Cf.forEach((t=>t(e)&&n++));const i=t.current.clock.getDelta();return t.current.subscribers.forEach((e=>e.ref.current(t.current,i))),t.current.frames=Math.max(0,t.current.frames-1),n+=t.current.invalidateFrameloop?t.current.frames:1,t.current.manual||t.current.gl.render(t.current.scene,t.current.camera),r&&Of.forEach((t=>t(e))),n}let If=!1;function Lf(t){If=!0;let e=0;if(Cf.forEach((n=>n(t)&&e++)),Tf.forEach((n=>{const r=n.containerInfo.__state;r.current.active&&r.current.ready&&(!r.current.invalidateFrameloop||r.current.frames>0)&&(e=kf(r,t,e))})),Of.forEach((e=>e(t))),0!==e)return requestAnimationFrame(Lf);Pf.forEach((e=>e(t))),If=!1}function Rf(t=!0,e=2){if(!0===t)Tf.forEach((t=>t.containerInfo.__state.current.frames=e));else if(t&&t.current){if(t.current.vr)return;t.current.frames=e}If||(If=!0,requestAnimationFrame(Lf))}let Df={};const Nf=t=>{Df=c({},Df,t)};function Ff(t,e,n={},r=!1){const i=t.__container,o=Object.keys(e).filter((t=>Mf.equ(e[t],n[t]))),a=Object.keys(e).filter((t=>{if(Mf.fun(e[t])&&t.startsWith("on"))return t.includes("Pointer")||t.includes("Click")||t.includes("ContextMenu")||t.includes("Wheel")})),s=r?Object.keys(n).filter((t=>void 0===e[t])):[],u=[...o,"children","key","ref"];t.__instance&&u.push("object");const l=u.reduce(((t,e)=>j(t,[e].map(Sf))),e);if(s.forEach((t=>"children"!==t&&(l[t]=void 0))),Object.keys(l).length>0){if(Object.entries(l).forEach((([e,n])=>{if(!a.includes(e)){var r;let i=t,o=i[e];if(e.includes("-")){const n=e.split("-");if(o=n.reduce(((t,e)=>t[e]),t),!o||!o.set){const[r,...o]=n.reverse();i=o.reverse().reduce(((t,e)=>t[e]),t),e=r}}const a=null==(r=t.__container)?void 0:r.__state.current.colorManagement;o&&o.set&&(o.copy||o instanceof Yt.Layers)?Array.isArray(n)?o.set(...n):o.copy&&n&&n.constructor&&o.constructor.name===n.constructor.name?o.copy(n):void 0!==n&&(o.set(n),a&&o instanceof Yt.Color&&o.convertSRGBToLinear()):(i[e]=n,a&&i[e]instanceof Yt.Texture&&(i[e].encoding=Yt.sRGBEncoding)),jf(t)}})),r&&i&&t.raycast&&t.__handlers){t.__handlers=void 0;const e=i.__interaction.indexOf(t);e>-1&&i.__interaction.splice(e,1)}a.length&&(i&&t.raycast&&i.__interaction.push(t),t.__handlers=a.reduce(((t,n)=>c({},t,{[n.charAt(2).toLowerCase()+n.substr(3)]:e[n]})),{})),t.parent&&Uf(t)}}function jf(t){t.__container&&t.__container.__state&&Rf(t.__container.__state)}function Uf(t){t.onUpdate&&t.onUpdate(t)}function zf(t,e,n,r,i){let o,{args:a=[]}=e,s=j(e,["args"]),u=""+t[0].toUpperCase()+t.slice(1);if("primitive"===t)o=s.object,o.__instance=!0;else if("new"===t)o=new s.object(a);else{const t=Df[u]||Yt[u];if(!t)throw'"'+u+'" is not part of the THREE namespace! Did you forget to extend it? See: https://github.com/react-spring/react-three-fiber#using-3rd-party-non-three-namespaced-objects-in-the-scene-graph';o=Mf.arr(a)?new t(...a):new t(a)}for(;n.__container;)n=n.__container;if(!Tf.has(n)){const t=e=>e.return?t(e.return):e.stateNode&&e.stateNode.containerInfo;n=t(i)}return o.__objects=[],o.__container=n,Ff(o,s,{}),o}function Bf(t,e){e&&(e.isObject3D?t.add(e):(t.__objects.push(e),e.parent=t,e.attach?t[e.attach]=e:e.attachArray?(Mf.arr(t[e.attachArray])||(t[e.attachArray]=[]),t[e.attachArray].push(e)):e.attachObject&&(Mf.obj(t[e.attachObject[0]])||(t[e.attachObject[0]]={}),t[e.attachObject[0]][e.attachObject[1]]=e)),Uf(e),jf(e))}function Vf(t,e,n){if(e){if(e.isObject3D){e.parent=t,e.dispatchEvent({type:"added"});const r=t.children.filter((t=>t!==e)),i=r.indexOf(n);t.children=[...r.slice(0,i),e,...r.slice(i)],Uf(e)}else Bf(t,e);jf(e)}}function Hf(t,e,n=!1){t&&(n?[...t]:t).forEach((t=>Gf(e,t)))}function Gf(t,e){e&&(e.isObject3D?t.remove(e):(e.parent=null,t.__objects&&(t.__objects=t.__objects.filter((t=>t!==e))),e.attach?t[e.attach]=null:e.attachArray?t[e.attachArray]=t[e.attachArray].filter((t=>t!==e)):e.attachObject&&delete t[e.attachObject[0]][e.attachObject[1]]),jf(e),null!==e.dispose&&(0,jh.unstable_runWithPriority)(jh.unstable_IdlePriority,(()=>{e.__container&&(e.__container.__interaction=e.__container.__interaction.filter((t=>t!==e))),Hf(e.__objects,e),Hf(e.children,e,!0),e.dispose&&e.dispose(),delete e.__container,delete e.__objects})))}function Wf(t,e,n,r){const i=t.parent,o=zf(e,n,t.__container,0,r);Gf(i,t),Bf(i,o),[r,r.alternate].forEach((t=>{null!==t&&(t.stateNode=o,t.ref&&(Mf.fun(t.ref)?t.ref(o):t.ref.current=o))}))}const qf=Fh()({now:jh.unstable_now,createInstance:zf,removeChild:Gf,appendChild:Bf,insertBefore:Vf,warnsIfNotActing:!0,supportsMutation:!0,isPrimaryRenderer:!1,scheduleTimeout:Mf.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Mf.fun(clearTimeout)?clearTimeout:void 0,setTimeout:Mf.fun(setTimeout)?setTimeout:void 0,clearTimeout:Mf.fun(clearTimeout)?clearTimeout:void 0,noTimeout:-1,appendInitialChild:Bf,appendChildToContainer:Bf,removeChildFromContainer:Gf,insertInContainerBefore:Vf,commitUpdate(t,e,n,r,i,o){if(t.__instance&&i.object&&i.object!==t)Wf(t,n,i,o);else{const{args:e=[]}=i,a=j(i,["args"]),{args:s=[]}=r,u=j(r,["args"]);e.some(((t,e)=>Mf.obj(t)?Object.entries(t).some((([t,n])=>n!==s[e][t])):t!==s[e]))?Wf(t,n,i,o):Ff(t,a,u,!0)}},hideInstance(t){t.isObject3D&&(t.visible=!1,jf(t))},unhideInstance(t,e){(t.isObject3D&&null==e.visible||e.visible)&&(t.visible=!0,jf(t))},hideTextInstance(){throw new Error("Text is not allowed in the react-three-fibre tree. You may have extraneous whitespace between components.")},getPublicInstance:t=>t,getRootHostContext:()=>Af,getChildHostContext:()=>Af,createTextInstance(){},finalizeInitialChildren:()=>!1,prepareUpdate:()=>Af,shouldDeprioritizeSubtree:()=>!1,prepareForCommit(){},resetAfterCommit(){},shouldSetTextContent:()=>!1});function Xf(t){return t.isOrthographicCamera}function Yf(t){return(t.eventObject||t.object).uuid+"/"+t.index}Mf.fun(Symbol)&&Symbol.for&&Symbol.for("react.portal"),qf.injectIntoDevTools({bundleType:0,version:"4.2.21",rendererPackageName:"react-three-fiber",findHostInstanceByFiber:qf.findHostInstance});const Qf=(0,o.createContext)({});function Zf(t){let e=(0,o.useContext)(t);return e||console.warn("hooks can only be used within the canvas! https://github.com/react-spring/react-three-fiber#hooks"),e}function Kf(t,e=0){const{subscribe:n}=Zf(Qf),r=(0,o.useRef)(t);return(0,o.useLayoutEffect)((()=>{r.current=t}),[t]),(0,o.useEffect)((()=>{const t=n(r,e);return()=>t()}),[e]),null}function $f(){return Zf(Qf)}const Jf={position:"relative",width:"100%",height:"100%",overflow:"hidden"};function tp(t){let{children:e,setEvents:n,container:r,renderer:i,effects:a}=t,s=j(t,["children","setEvents","container","renderer","effects"]);const[u]=(0,o.useState)(i);u||console.warn("No renderer created!"),(0,o.useEffect)((()=>a&&a(u,r)),[]);const l=(t=>{const{children:e,gl:n,camera:r,orthographic:i,raycaster:a,size:s,pixelRatio:u,vr:l=!1,concurrent:h=!1,shadowMap:f=!1,sRGB:p=!1,colorManagement:d=!1,invalidateFrameloop:m=!1,updateDefaultCamera:v=!0,noEvents:g=!1,onCreated:y,onPointerMissed:b}=t,[_,x]=(0,o.useState)(!1),[w]=(0,o.useState)((()=>new Yt.Vector2)),[E]=(0,o.useState)((()=>{const t=new Yt.Raycaster;return a&&Ff(t,j(a,["filter"]),{}),t})),[S]=(0,o.useState)((()=>{const t=new Yt.Scene;return t.__interaction=[],t.__objects=[],t})),[T,A]=(0,o.useState)((()=>{const t=i?new Yt.OrthographicCamera(0,0,0,0,.1,1e3):new Yt.PerspectiveCamera(75,0,.1,1e3);return t.position.z=5,r&&Ff(t,r,{}),t.lookAt(0,0,0),t})),[M]=(0,o.useState)((()=>new Yt.Clock)),C=(0,o.useRef)({ready:!1,active:!0,manual:0,colorManagement:d,sRGB:p,vr:l,concurrent:h,noEvents:g,invalidateFrameloop:!1,frames:0,aspect:0,subscribers:[],camera:T,scene:S,raycaster:E,mouse:w,clock:M,gl:n,size:s,viewport:{width:0,height:0,factor:0},initialClick:[0,0],initialHits:[],pointer:new Uh.TinyEmitter,captured:void 0,events:void 0,subscribe:(t,e=0)=>(e&&C.current.manual++,C.current.subscribers.push({ref:t,priority:e}),C.current.subscribers=C.current.subscribers.sort(((t,e)=>t.priority-e.priority)),()=>{e&&C.current.manual--,C.current.subscribers=C.current.subscribers.filter((e=>e.ref!==t))}),setDefaultCamera:t=>A(t),invalidate:()=>Rf(C),intersect:(t={},e=!0)=>D(t,e)});(0,o.useMemo)((()=>{C.current.ready=_,C.current.size=s,C.current.camera=T,C.current.invalidateFrameloop=m,C.current.vr=l,C.current.gl=n,C.current.concurrent=h,C.current.noEvents=g}),[m,l,h,g,_,s,T,n]),(0,o.useMemo)((()=>{if(C.current.aspect=s.width/s.height,Xf(T))C.current.viewport={width:s.width,height:s.height,factor:1};else{const t=new Yt.Vector3(0,0,0),e=T.position.distanceTo(t),n=T.fov*Math.PI/180,r=2*Math.tan(n/2)*e,i=r*C.current.aspect;C.current.viewport={width:i,height:r,factor:s.width/i}}v&&(Xf(T)?(T.left=s.width/-2,T.right=s.width/2,T.top=s.height/2,T.bottom=s.height/-2):T.aspect=C.current.aspect,T.updateProjectionMatrix(),T.updateMatrixWorld()),n.setSize(s.width,s.height),_&&Rf(C)}),[T,n,s,v]);const O=(0,o.useCallback)((({clientX:t,clientY:e})=>{if(void 0!==t){const{left:n,right:r,top:i,bottom:o}=C.current.size;w.set((t-n)/(r-n)*2-1,-(e-i)/(o-i)*2+1),E.setFromCamera(w,C.current.camera)}}),[]),P=(0,o.useCallback)(((t,e)=>{if(C.current.noEvents)return[];const n=new Set,r=[],i=e?e(C.current.scene.__interaction):C.current.scene.__interaction;let o=E.intersectObjects(i,!0).filter((t=>{const e=Yf(t);return!n.has(e)&&(n.add(e),!0)}));a&&a.filter&&U.current&&(o=a.filter(o,U.current));for(let t of o){let e=t.object;for(;e;)e.__handlers&&r.push(c({},t,{eventObject:e})),e=e.parent}return r}),[]),k=(0,o.useCallback)((t=>{let e=t.clientX-C.current.initialClick[0],n=t.clientY-C.current.initialClick[1];return Math.round(Math.sqrt(e*e+n*n))}),[]),I=(0,o.useMemo)((()=>new Map),[]),L=new Yt.Vector3,R=(0,o.useCallback)(((t,e,n)=>{let r=P(t,n);if(C.current.captured&&"click"!==t.type&&"wheel"!==t.type&&C.current.captured.forEach((t=>{r.find((e=>e.eventObject===t.eventObject))||r.push(t)})),r.length){const n=L.set(w.x,w.y,0).unproject(C.current.camera),i="click"===t.type?k(t):0,o=e=>t.target.releasePointerCapture(e),a={stopped:!1,captured:!1};for(let s of r){const u=e=>{a.captured||(a.captured=!0,C.current.captured=[]),C.current.captured&&C.current.captured.push(s),t.target.setPointerCapture(e)};let l=c({},t,s,{intersections:r,stopped:a.stopped,delta:i,unprojectedPoint:n,ray:E.ray,camera:C.current.camera,stopPropagation:()=>{const t=C.current.captured;t&&!t.find((t=>t.eventObject.id===s.eventObject.id))||(l.stopped=a.stopped=!0)},target:c({},t.target,{setPointerCapture:u,releasePointerCapture:o}),currentTarget:c({},t.currentTarget,{setPointerCapture:u,releasePointerCapture:o}),sourceEvent:t});if(e(l),!0===a.stopped){I.size&&Array.from(I.values()).find((t=>t.object===s.object))&&N(l,[s]);break}}}return r}),[]),D=(0,o.useCallback)(((t,e=!0)=>{C.current.pointer.emit("pointerMove",t),e&&O(t);const n=R(t,(t=>{const e=t.eventObject.__handlers;if(e&&(e.pointerMove&&e.pointerMove(t),e.pointerOver||e.pointerEnter||e.pointerOut||e.pointerLeave)){const n=Yf(t),r=I.get(n);r?r.stopped&&t.stopPropagation():(I.set(n,t),e.pointerOver&&e.pointerOver(c({},t,{type:"pointerover"})),e.pointerEnter&&e.pointerEnter(c({},t,{type:"pointerenter"})))}}),(t=>t.filter((t=>["Move","Over","Enter","Out","Leave"].some((e=>t.__handlers["pointer"+e]))))));return N(t,n,e),n}),[]),N=(0,o.useCallback)(((t,e,n=!0)=>{C.current.pointer.emit("pointerCancel",t),n&&O(t),e||(e=R(t,(()=>null))),Array.from(I.values()).forEach((t=>{if(e&&(!e.length||!e.find((e=>e.eventObject===t.eventObject)))){const e=t.eventObject.__handlers;e&&(e.pointerOut&&e.pointerOut(c({},t,{type:"pointerout"})),e.pointerLeave&&e.pointerLeave(c({},t,{type:"pointerleave"}))),I.delete(Yf(t))}}))}),[]),F=(0,o.useCallback)((t=>(e,n=!0)=>{C.current.pointer.emit(t,e),n&&O(e);const r=R(e,(e=>{const n=e.eventObject,r=n.__handlers;r&&r[t]&&("click"!==t&&"contextMenu"!==t&&"doubleClick"!==t||C.current.initialHits.includes(n))&&r[t](e)}));"pointerDown"===t&&(C.current.initialClick=[e.clientX,e.clientY],C.current.initialHits=r.map((t=>t.eventObject))),"click"!==t&&"contextMenu"!==t&&"doubleClick"!==t||r.length||!b||k(e)<=2&&b()}),[b]);(0,o.useMemo)((()=>{C.current.events={onClick:F("click"),onContextMenu:F("contextMenu"),onDoubleClick:F("doubleClick"),onWheel:F("wheel"),onPointerDown:F("pointerDown"),onPointerUp:F("pointerUp"),onPointerLeave:t=>N(t,[]),onPointerMove:D,onGotPointerCaptureLegacy:t=>C.current.captured=P(t),onLostPointerCapture:t=>(C.current.captured=void 0,N(t))}}),[b]);const U=(0,o.useRef)();(0,o.useMemo)((()=>{const t=j(C.current,["ready","manual","vr","noEvents","invalidateFrameloop","frames","subscribers","captured","initialClick","initialHits"]);U.current=t}),[s,T]),(0,o.useLayoutEffect)((()=>{u&&n.setPixelRatio(u)}),[u]),(0,o.useLayoutEffect)((()=>{f&&(n.shadowMap.enabled=!0,"object"==typeof f?Object.assign(n.shadowMap,f):n.shadowMap.type=Yt.PCFSoftShadowMap),(p||d)&&(n.toneMapping=Yt.ACESFilmicToneMapping,n.outputEncoding=Yt.sRGBEncoding)}),[f,p,d]);const z=(0,o.useCallback)((function(t){const e=()=>x(!0);return(0,o.useEffect)((()=>{const t=y&&y(C.current);t&&t.then?t.then(e):e()}),[]),t.children}),[]);return(0,o.useLayoutEffect)((()=>{!function(t,e,n){let r=Tf.get(e);if(!r){e.__state=n;let t=r=qf.createContainer(e,void 0!==n&&n.current.concurrent?2:0,!1);Tf.set(e,t)}qf.updateContainer(t,r,null,(()=>{})),qf.getPublicRootInstance(r)}((0,o.createElement)(z,null,(0,o.createElement)(Qf.Provider,{value:U.current},"function"==typeof e?e(C.current):e)),S,C)}),[_,e,U.current]),(0,o.useLayoutEffect)((()=>{_&&(C.current.vr?(n.xr||n.vr)&&n.setAnimationLoop?((n.xr||n.vr).enabled=!0,n.setAnimationLoop((t=>kf(C,t,0,!0)))):console.warn("the gl instance does not support VR!"):Rf(C))}),[_,m]),(0,o.useEffect)((()=>()=>{C.current.gl&&(C.current.gl.forceContextLoss&&C.current.gl.forceContextLoss(),C.current.gl.dispose&&C.current.gl.dispose(),C.current.gl=void 0,function(t){const e=Tf.get(t);e&&qf.updateContainer(null,e,null,(()=>{Tf.delete(t)}))}(C.current.scene),C.current.active=!1)}),[]),C.current.events})(c({},s,{children:e,gl:u}));return(0,o.useEffect)((()=>{n(l)}),[l]),null}const ep=o.memo((function(t){const{preRender:e,resize:n,style:r}=t,i=j(t,["renderer","effects","children","vr","gl2","concurrent","shadowMap","sRGB","colorManagement","orthographic","invalidateFrameloop","updateDefaultCamera","noEvents","gl","camera","raycaster","pixelRatio","onCreated","onPointerMissed","preRender","resize","style"]),a=(0,o.useRef)(),[s,u]=(0,o.useState)({}),l=j(s,["onGotPointerCaptureLegacy"]),[h,f]=(0,zh.Z)(n||{scroll:!0,debounce:{scroll:50,resize:0},polyfill:"undefined"!=typeof window&&window.ResizeObserver?void 0:wf}),p=(0,o.useRef)(!1),d=(0,o.useMemo)((()=>p.current=p.current||!!f.width&&!!f.height),[f]),m=(0,o.useMemo)((()=>({size:f,setEvents:u,container:a.current})),[f]);return"undefined"==typeof window?o.createElement("div",c({style:c({},Jf,r)},i),e):o.createElement("div",c({ref:Ef([h,a]),style:c({},Jf,r)},l,i),e,d&&o.createElement(tp,c({},t,m)))})),np=o.memo((function(t){let{children:e}=t,n=j(t,["children"]);const r=(0,o.useRef)();return o.createElement(ep,c({},n,{renderer:()=>{if(r.current){const t=c({antialias:!0,alpha:!0},n.gl);return new Yt.WebGLRenderer(c({powerPreference:"high-performance",canvas:r.current,context:n.gl2?r.current.getContext("webgl2",t):void 0},t))}},preRender:o.createElement("canvas",{ref:r,style:{display:"block"}})}),e)}));var rp=function(t,e){var n,r,i,o,a;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new Yt.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:Yt.MOUSE.ROTATE,MIDDLE:Yt.MOUSE.DOLLY,RIGHT:Yt.MOUSE.PAN},this.touches={ONE:Yt.TOUCH.ROTATE,TWO:Yt.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(u),s.update(),f=h.NONE},this.update=(n=new Yt.Vector3,r=(new Yt.Quaternion).setFromUnitVectors(t.up,new Yt.Vector3(0,1,0)),i=r.clone().inverse(),o=new Yt.Vector3,a=new Yt.Quaternion,function(){var t=s.object.position;return n.copy(t).sub(s.target),n.applyQuaternion(r),d.setFromVector3(n),s.autoRotate&&f===h.NONE&&O(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(d.theta+=m.theta*s.dampingFactor,d.phi+=m.phi*s.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi),d.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,d.theta)),d.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=v,d.radius=Math.max(s.minDistance,Math.min(s.maxDistance,d.radius)),!0===s.enableDamping?s.target.addScaledVector(g,s.dampingFactor):s.target.add(g),n.setFromSpherical(d),n.applyQuaternion(i),t.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),v=1,!!(y||o.distanceToSquared(s.object.position)>p||8*(1-a.dot(s.object.quaternion))>p)&&(s.dispatchEvent(u),o.copy(s.object.position),a.copy(s.object.quaternion),y=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",J,!1),s.domElement.removeEventListener("mousedown",W,!1),s.domElement.removeEventListener("wheel",Y,!1),s.domElement.removeEventListener("touchstart",Z,!1),s.domElement.removeEventListener("touchend",$,!1),s.domElement.removeEventListener("touchmove",K,!1),document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),s.domElement.removeEventListener("keydown",Q,!1)};var s=this,u={type:"change"},l={type:"start"},c={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=h.NONE,p=1e-6,d=new Yt.Spherical,m=new Yt.Spherical,v=1,g=new Yt.Vector3,y=!1,b=new Yt.Vector2,_=new Yt.Vector2,x=new Yt.Vector2,w=new Yt.Vector2,E=new Yt.Vector2,S=new Yt.Vector2,T=new Yt.Vector2,A=new Yt.Vector2,M=new Yt.Vector2;function C(){return Math.pow(.95,s.zoomSpeed)}function O(t){m.theta-=t}function P(t){m.phi-=t}var k,I=(k=new Yt.Vector3,function(t,e){k.setFromMatrixColumn(e,0),k.multiplyScalar(-t),g.add(k)}),L=function(){var t=new Yt.Vector3;return function(e,n){!0===s.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(s.object.up,t)),t.multiplyScalar(e),g.add(t)}}(),R=function(){var t=new Yt.Vector3;return function(e,n){var r=s.domElement;if(s.object.isPerspectiveCamera){var i=s.object.position;t.copy(i).sub(s.target);var o=t.length();o*=Math.tan(s.object.fov/2*Math.PI/180),I(2*e*o/r.clientHeight,s.object.matrix),L(2*n*o/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(I(e*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),L(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function D(t){s.object.isPerspectiveCamera?v/=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*t)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function N(t){s.object.isPerspectiveCamera?v*=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/t)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function F(t){b.set(t.clientX,t.clientY)}function j(t){w.set(t.clientX,t.clientY)}function U(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,n)}}function z(t){if(1==t.touches.length)w.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);w.set(e,n)}}function B(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);T.set(0,r)}function V(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}x.subVectors(_,b).multiplyScalar(s.rotateSpeed);var r=s.domElement;O(2*Math.PI*x.x/r.clientHeight),P(2*Math.PI*x.y/r.clientHeight),b.copy(_)}function H(t){if(1==t.touches.length)E.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);E.set(e,n)}S.subVectors(E,w).multiplyScalar(s.panSpeed),R(S.x,S.y),w.copy(E)}function G(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);A.set(0,r),M.set(0,Math.pow(A.y/T.y,s.zoomSpeed)),D(M.y),T.copy(A)}function W(t){if(!1!==s.enabled){var e;switch(t.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),t.button){case 0:e=s.mouseButtons.LEFT;break;case 1:e=s.mouseButtons.MIDDLE;break;case 2:e=s.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Yt.MOUSE.DOLLY:if(!1===s.enableZoom)return;!function(t){T.set(t.clientX,t.clientY)}(t),f=h.DOLLY;break;case Yt.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enablePan)return;j(t),f=h.PAN}else{if(!1===s.enableRotate)return;F(t),f=h.ROTATE}break;case Yt.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enableRotate)return;F(t),f=h.ROTATE}else{if(!1===s.enablePan)return;j(t),f=h.PAN}break;default:f=h.NONE}f!==h.NONE&&(document.addEventListener("mousemove",q,!1),document.addEventListener("mouseup",X,!1),s.dispatchEvent(l))}}function q(t){if(!1!==s.enabled)switch(t.preventDefault(),f){case h.ROTATE:if(!1===s.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),x.subVectors(_,b).multiplyScalar(s.rotateSpeed);var e=s.domElement;O(2*Math.PI*x.x/e.clientHeight),P(2*Math.PI*x.y/e.clientHeight),b.copy(_),s.update()}(t);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(t){A.set(t.clientX,t.clientY),M.subVectors(A,T),M.y>0?D(C()):M.y<0&&N(C()),T.copy(A),s.update()}(t);break;case h.PAN:if(!1===s.enablePan)return;!function(t){E.set(t.clientX,t.clientY),S.subVectors(E,w).multiplyScalar(s.panSpeed),R(S.x,S.y),w.copy(E),s.update()}(t)}}function X(t){!1!==s.enabled&&(document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),s.dispatchEvent(c),f=h.NONE)}function Y(t){!1===s.enabled||!1===s.enableZoom||f!==h.NONE&&f!==h.ROTATE||(t.preventDefault(),t.stopPropagation(),s.dispatchEvent(l),function(t){t.deltaY<0?N(C()):t.deltaY>0&&D(C()),s.update()}(t),s.dispatchEvent(c))}function Q(t){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(t){var e=!1;switch(t.keyCode){case s.keys.UP:R(0,s.keyPanSpeed),e=!0;break;case s.keys.BOTTOM:R(0,-s.keyPanSpeed),e=!0;break;case s.keys.LEFT:R(s.keyPanSpeed,0),e=!0;break;case s.keys.RIGHT:R(-s.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),s.update())}(t)}function Z(t){if(!1!==s.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(s.touches.ONE){case Yt.TOUCH.ROTATE:if(!1===s.enableRotate)return;U(t),f=h.TOUCH_ROTATE;break;case Yt.TOUCH.PAN:if(!1===s.enablePan)return;z(t),f=h.TOUCH_PAN;break;default:f=h.NONE}break;case 2:switch(s.touches.TWO){case Yt.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(t){s.enableZoom&&B(t),s.enablePan&&z(t)}(t),f=h.TOUCH_DOLLY_PAN;break;case Yt.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(t){s.enableZoom&&B(t),s.enableRotate&&U(t)}(t),f=h.TOUCH_DOLLY_ROTATE;break;default:f=h.NONE}break;default:f=h.NONE}f!==h.NONE&&s.dispatchEvent(l)}}function K(t){if(!1!==s.enabled)switch(t.preventDefault(),t.stopPropagation(),f){case h.TOUCH_ROTATE:if(!1===s.enableRotate)return;V(t),s.update();break;case h.TOUCH_PAN:if(!1===s.enablePan)return;H(t),s.update();break;case h.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(t){s.enableZoom&&G(t),s.enablePan&&H(t)}(t),s.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(t){s.enableZoom&&G(t),s.enableRotate&&V(t)}(t),s.update();break;default:f=h.NONE}}function $(t){!1!==s.enabled&&(s.dispatchEvent(c),f=h.NONE)}function J(t){!1!==s.enabled&&t.preventDefault()}s.domElement.addEventListener("contextmenu",J,!1),s.domElement.addEventListener("mousedown",W,!1),s.domElement.addEventListener("wheel",Y,!1),s.domElement.addEventListener("touchstart",Z,!1),s.domElement.addEventListener("touchend",$,!1),s.domElement.addEventListener("touchmove",K,!1),s.domElement.addEventListener("keydown",Q,!1),-1===s.domElement.tabIndex&&(s.domElement.tabIndex=0),this.update()};(rp.prototype=Object.create(Yt.EventDispatcher.prototype)).constructor=rp;var ip=function(t,e){rp.call(this,t,e),this.mouseButtons.LEFT=Yt.MOUSE.PAN,this.mouseButtons.RIGHT=Yt.MOUSE.ROTATE,this.touches.ONE=Yt.TOUCH.PAN,this.touches.TWO=Yt.TOUCH.DOLLY_ROTATE};(ip.prototype=Object.create(Yt.EventDispatcher.prototype)).constructor=ip;var op=function(t,e){void 0===e&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,r=-1;this.object=t,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:Yt.MOUSE.ROTATE,MIDDLE:Yt.MOUSE.ZOOM,RIGHT:Yt.MOUSE.PAN},this.target=new Yt.Vector3;var i=1e-6,o=new Yt.Vector3,a=1,s=r,u=r,l=new Yt.Vector3,c=new Yt.Vector2,h=new Yt.Vector2,f=new Yt.Vector3,p=0,d=new Yt.Vector2,m=new Yt.Vector2,v=0,g=0,y=new Yt.Vector2,b=new Yt.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var _={type:"change"},x={type:"start"},w={type:"end"};this.handleResize=function(){var t=this.domElement.getBoundingClientRect(),e=this.domElement.ownerDocument.documentElement;this.screen.left=t.left+window.pageXOffset-e.clientLeft,this.screen.top=t.top+window.pageYOffset-e.clientTop,this.screen.width=t.width,this.screen.height=t.height};var E,S,T,A,M,C,O,P,k,I,L,R=(E=new Yt.Vector2,function(t,e){return E.set((t-n.screen.left)/n.screen.width,(e-n.screen.top)/n.screen.height),E}),D=function(){var t=new Yt.Vector2;return function(e,r){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-r))/n.screen.width),t}}();function N(t){!1!==n.enabled&&(window.removeEventListener("keydown",N),u===r&&(t.keyCode!==n.keys[0]||n.noRotate?t.keyCode!==n.keys[1]||n.noZoom?t.keyCode!==n.keys[2]||n.noPan||(u=2):u=1:u=0))}function F(){!1!==n.enabled&&(u=r,window.addEventListener("keydown",N,!1))}function j(t){if(!1!==n.enabled){if(t.preventDefault(),t.stopPropagation(),s===r)switch(t.button){case n.mouseButtons.LEFT:s=0;break;case n.mouseButtons.MIDDLE:s=1;break;case n.mouseButtons.RIGHT:s=2;break;default:s=r}var e=u!==r?u:s;0!==e||n.noRotate?1!==e||n.noZoom?2!==e||n.noPan||(y.copy(R(t.pageX,t.pageY)),b.copy(y)):(d.copy(R(t.pageX,t.pageY)),m.copy(d)):(h.copy(D(t.pageX,t.pageY)),c.copy(h)),document.addEventListener("mousemove",U,!1),document.addEventListener("mouseup",z,!1),n.dispatchEvent(x)}}function U(t){if(!1!==n.enabled){t.preventDefault(),t.stopPropagation();var e=u!==r?u:s;0!==e||n.noRotate?1!==e||n.noZoom?2!==e||n.noPan||b.copy(R(t.pageX,t.pageY)):m.copy(R(t.pageX,t.pageY)):(c.copy(h),h.copy(D(t.pageX,t.pageY)))}}function z(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),s=r,document.removeEventListener("mousemove",U),document.removeEventListener("mouseup",z),n.dispatchEvent(w))}function B(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:d.y-=.025*t.deltaY;break;case 1:d.y-=.01*t.deltaY;break;default:d.y-=25e-5*t.deltaY}n.dispatchEvent(x),n.dispatchEvent(w)}}function V(t){if(!1!==n.enabled){switch(t.preventDefault(),t.touches.length){case 1:s=3,h.copy(D(t.touches[0].pageX,t.touches[0].pageY)),c.copy(h);break;default:s=4;var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY;g=v=Math.sqrt(e*e+r*r);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(R(i,o)),b.copy(y)}n.dispatchEvent(x)}}function H(t){if(!1!==n.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:c.copy(h),h.copy(D(t.touches[0].pageX,t.touches[0].pageY));break;default:var e=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY;g=Math.sqrt(e*e+r*r);var i=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;b.copy(R(i,o))}}function G(t){if(!1!==n.enabled){switch(t.touches.length){case 0:s=r;break;case 1:s=3,h.copy(D(t.touches[0].pageX,t.touches[0].pageY)),c.copy(h)}n.dispatchEvent(w)}}function W(t){!1!==n.enabled&&t.preventDefault()}this.rotateCamera=(T=new Yt.Vector3,A=new Yt.Quaternion,M=new Yt.Vector3,C=new Yt.Vector3,O=new Yt.Vector3,P=new Yt.Vector3,function(){P.set(h.x-c.x,h.y-c.y,0),(S=P.length())?(l.copy(n.object.position).sub(n.target),M.copy(l).normalize(),C.copy(n.object.up).normalize(),O.crossVectors(C,M).normalize(),C.setLength(h.y-c.y),O.setLength(h.x-c.x),P.copy(C.add(O)),T.crossVectors(P,l).normalize(),S*=n.rotateSpeed,A.setFromAxisAngle(T,S),l.applyQuaternion(A),n.object.up.applyQuaternion(A),f.copy(T),p=S):!n.staticMoving&&p&&(p*=Math.sqrt(1-n.dynamicDampingFactor),l.copy(n.object.position).sub(n.target),A.setFromAxisAngle(f,p),l.applyQuaternion(A),n.object.up.applyQuaternion(A)),c.copy(h)}),this.zoomCamera=function(){var t;4===s?(t=v/g,v=g,n.object.isPerspectiveCamera?l.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom*=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(t=1+(m.y-d.y)*n.zoomSpeed)&&t>0&&(n.object.isPerspectiveCamera?l.multiplyScalar(t):n.object.isOrthographicCamera?(n.object.zoom/=t,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?d.copy(m):d.y+=(m.y-d.y)*this.dynamicDampingFactor)},this.panCamera=(k=new Yt.Vector2,I=new Yt.Vector3,L=new Yt.Vector3,function(){if(k.copy(b).sub(y),k.lengthSq()){if(n.object.isOrthographicCamera){var t=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,e=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;k.x*=t,k.y*=e}k.multiplyScalar(l.length()*n.panSpeed),L.copy(l).cross(n.object.up).setLength(k.x),L.add(I.copy(n.object.up).setLength(k.y)),n.object.position.add(L),n.target.add(L),n.staticMoving?y.copy(b):y.add(k.subVectors(b,y).multiplyScalar(n.dynamicDampingFactor))}}),this.checkDistances=function(){n.noZoom&&n.noPan||(l.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,l.setLength(n.maxDistance)),d.copy(m)),l.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,l.setLength(n.minDistance)),d.copy(m)))},this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,l),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),o.distanceToSquared(n.object.position)>i&&(n.dispatchEvent(_),o.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(o.distanceToSquared(n.object.position)>i||a!==n.object.zoom)&&(n.dispatchEvent(_),o.copy(n.object.position),a=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){s=r,u=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),l.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(_),o.copy(n.object.position),a=n.object.zoom},this.dispose=function(){this.domElement.removeEventListener("contextmenu",W,!1),this.domElement.removeEventListener("mousedown",j,!1),this.domElement.removeEventListener("wheel",B,!1),this.domElement.removeEventListener("touchstart",V,!1),this.domElement.removeEventListener("touchend",G,!1),this.domElement.removeEventListener("touchmove",H,!1),document.removeEventListener("mousemove",U,!1),document.removeEventListener("mouseup",z,!1),window.removeEventListener("keydown",N,!1),window.removeEventListener("keyup",F,!1)},this.domElement.addEventListener("contextmenu",W,!1),this.domElement.addEventListener("mousedown",j,!1),this.domElement.addEventListener("wheel",B,!1),this.domElement.addEventListener("touchstart",V,!1),this.domElement.addEventListener("touchend",G,!1),this.domElement.addEventListener("touchmove",H,!1),window.addEventListener("keydown",N,!1),window.addEventListener("keyup",F,!1),this.handleResize(),this.update()};(op.prototype=Object.create(Yt.EventDispatcher.prototype)).constructor=op;var ap=function(t,e){void 0===e&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),e=document),Yt.Object3D.call(this),this.visible=!1,this.domElement=e;var n=new sp;this.add(n);var r=new up;this.add(r);var i=this;z("camera",t),z("object",void 0),z("enabled",!0),z("axis",null),z("mode","translate"),z("translationSnap",null),z("rotationSnap",null),z("scaleSnap",null),z("space","world"),z("size",1),z("dragging",!1),z("showX",!0),z("showY",!0),z("showZ",!0);var o={type:"change"},a={type:"mouseDown"},s={type:"mouseUp",mode:i.mode},u={type:"objectChange"},l=new Yt.Raycaster;function c(t,e,n){for(var r=e.intersectObject(t,!0),i=r.length;i--;)if(r[i].object.visible||n)return r[i];return!1}var h=new Yt.Vector3,f=new Yt.Vector3,p=new Yt.Quaternion,d={X:new Yt.Vector3(1,0,0),Y:new Yt.Vector3(0,1,0),Z:new Yt.Vector3(0,0,1)},m=new Yt.Vector3,v=new Yt.Vector3,g=new Yt.Vector3,y=new Yt.Vector3,b=new Yt.Vector3,_=new Yt.Vector3,x=0,w=new Yt.Vector3,E=new Yt.Quaternion,S=new Yt.Vector3,T=new Yt.Vector3,A=new Yt.Quaternion,M=new Yt.Quaternion,C=new Yt.Vector3,O=new Yt.Vector3,P=new Yt.Quaternion,k=new Yt.Vector3,I=new Yt.Vector3,L=new Yt.Quaternion,R=new Yt.Quaternion,D=new Yt.Vector3,N=new Yt.Vector3,F=new Yt.Vector3,j=new Yt.Quaternion,U=new Yt.Vector3;function z(t,e){var a=e;Object.defineProperty(i,t,{get:function(){return void 0!==a?a:e},set:function(e){a!==e&&(a=e,r[t]=e,n[t]=e,i.dispatchEvent({type:t+"-changed",value:e}),i.dispatchEvent(o))}}),i[t]=e,r[t]=e,n[t]=e}function B(t){if(document.pointerLockElement)return{x:0,y:0,button:t.button};var n=t.changedTouches?t.changedTouches[0]:t,r=e.getBoundingClientRect();return{x:(n.clientX-r.left)/r.width*2-1,y:-(n.clientY-r.top)/r.height*2+1,button:t.button}}function V(t){i.enabled&&i.pointerHover(B(t))}function H(t){i.enabled&&(document.addEventListener("mousemove",G,!1),i.pointerHover(B(t)),i.pointerDown(B(t)))}function G(t){i.enabled&&i.pointerMove(B(t))}function W(t){i.enabled&&(document.removeEventListener("mousemove",G,!1),i.pointerUp(B(t)))}z("worldPosition",I),z("worldPositionStart",O),z("worldQuaternion",L),z("worldQuaternionStart",P),z("cameraPosition",w),z("cameraQuaternion",E),z("pointStart",m),z("pointEnd",v),z("rotationAxis",y),z("rotationAngle",x),z("eye",N),e.addEventListener("mousedown",H,!1),e.addEventListener("touchstart",H,!1),e.addEventListener("mousemove",V,!1),e.addEventListener("touchmove",V,!1),e.addEventListener("touchmove",G,!1),document.addEventListener("mouseup",W,!1),e.addEventListener("touchend",W,!1),e.addEventListener("touchcancel",W,!1),e.addEventListener("touchleave",W,!1),this.dispose=function(){e.removeEventListener("mousedown",H),e.removeEventListener("touchstart",H),e.removeEventListener("mousemove",V),document.removeEventListener("mousemove",G),e.removeEventListener("touchmove",V),e.removeEventListener("touchmove",G),document.removeEventListener("mouseup",W),e.removeEventListener("touchend",W),e.removeEventListener("touchcancel",W),e.removeEventListener("touchleave",W),this.traverse((function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))},this.attach=function(t){return this.object=t,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(T,A,C),this.object.matrixWorld.decompose(I,L,D),M.copy(A).inverse(),R.copy(L).inverse()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(w,E,S),N.copy(w).sub(I).normalize(),Yt.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(t){if(void 0!==this.object&&!0!==this.dragging&&(void 0===t.button||0===t.button)){l.setFromCamera(t,this.camera);var e=c(n.picker[this.mode],l);this.axis=e?e.object.name:null}},this.pointerDown=function(t){if(!(void 0===this.object||!0===this.dragging||void 0!==t.button&&0!==t.button||0!==t.button&&void 0!==t.button||null===this.axis)){l.setFromCamera(t,this.camera);var e=c(r,l,!0);if(e){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),F.copy(this.object.position),j.copy(this.object.quaternion),U.copy(this.object.scale),this.object.matrixWorld.decompose(O,P,k),m.copy(e.point).sub(O)}this.dragging=!0,a.mode=this.mode,this.dispatchEvent(a)}},this.pointerMove=function(t){var e=this.axis,n=this.mode,i=this.object,a=this.space;if("scale"===n?a="local":"E"!==e&&"XYZE"!==e&&"XYZ"!==e||(a="world"),void 0!==i&&null!==e&&!1!==this.dragging&&(void 0===t.button||0===t.button)){l.setFromCamera(t,this.camera);var s=c(r,l,!0);if(s){if(v.copy(s.point).sub(O),"translate"===n)g.copy(v).sub(m),"local"===a&&"XYZ"!==e&&g.applyQuaternion(R),-1===e.indexOf("X")&&(g.x=0),-1===e.indexOf("Y")&&(g.y=0),-1===e.indexOf("Z")&&(g.z=0),"local"===a&&"XYZ"!==e?g.applyQuaternion(j).divide(C):g.applyQuaternion(M).divide(C),i.position.copy(g).add(F),this.translationSnap&&("local"===a&&(i.position.applyQuaternion(p.copy(j).inverse()),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(j)),"world"===a&&(i.parent&&i.position.add(h.setFromMatrixPosition(i.parent.matrixWorld)),-1!==e.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==e.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==e.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(h.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==e.search("XYZ")){var w=v.length()/m.length();v.dot(m)<0&&(w*=-1),f.set(w,w,w)}else h.copy(m),f.copy(v),h.applyQuaternion(R),f.applyQuaternion(R),f.divide(h),-1===e.search("X")&&(f.x=1),-1===e.search("Y")&&(f.y=1),-1===e.search("Z")&&(f.z=1);i.scale.copy(U).multiply(f),this.scaleSnap&&(-1!==e.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==e.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){g.copy(v).sub(m);var E=20/I.distanceTo(h.setFromMatrixPosition(this.camera.matrixWorld));"E"===e?(y.copy(N),x=v.angleTo(m),b.copy(m).normalize(),_.copy(v).normalize(),x*=_.cross(b).dot(N)<0?1:-1):"XYZE"===e?(y.copy(g).cross(N).normalize(),x=g.dot(h.copy(y).cross(this.eye))*E):"X"!==e&&"Y"!==e&&"Z"!==e||(y.copy(d[e]),h.copy(d[e]),"local"===a&&h.applyQuaternion(L),x=g.dot(h.cross(N).normalize())*E),this.rotationSnap&&(x=Math.round(x/this.rotationSnap)*this.rotationSnap),this.rotationAngle=x,"local"===a&&"E"!==e&&"XYZE"!==e?(i.quaternion.copy(j),i.quaternion.multiply(p.setFromAxisAngle(y,x)).normalize()):(y.applyQuaternion(M),i.quaternion.copy(p.setFromAxisAngle(y,x)),i.quaternion.multiply(j).normalize())}this.dispatchEvent(o),this.dispatchEvent(u)}}},this.pointerUp=function(t){void 0!==t.button&&0!==t.button||(this.dragging&&null!==this.axis&&(s.mode=this.mode,this.dispatchEvent(s)),this.dragging=!1,void 0===t.button&&(this.axis=null))},this.getMode=function(){return i.mode},this.setMode=function(t){i.mode=t},this.setTranslationSnap=function(t){i.translationSnap=t},this.setRotationSnap=function(t){i.rotationSnap=t},this.setScaleSnap=function(t){i.scaleSnap=t},this.setSize=function(t){i.size=t},this.setSpace=function(t){i.space=t},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};ap.prototype=Object.assign(Object.create(Yt.Object3D.prototype),{constructor:ap,isTransformControls:!0});var sp=function(){Yt.Object3D.call(this),this.type="TransformControlsGizmo";var t=new Yt.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:Yt.DoubleSide,fog:!1}),e=new Yt.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1}),n=t.clone();n.opacity=.15;var r=t.clone();r.opacity=.33;var i=t.clone();i.color.set(16711680);var o=t.clone();o.color.set(65280);var a=t.clone();a.color.set(255);var s=t.clone();s.opacity=.25;var u=s.clone();u.color.set(16776960);var l=s.clone();l.color.set(65535);var c=s.clone();c.color.set(16711935),t.clone().color.set(16776960);var h=e.clone();h.color.set(16711680);var f=e.clone();f.color.set(65280);var p=e.clone();p.color.set(255);var d=e.clone();d.color.set(65535);var m=e.clone();m.color.set(16711935);var v=e.clone();v.color.set(16776960);var g=e.clone();g.color.set(7895160);var y=v.clone();y.opacity=.25;var b=new Yt.CylinderBufferGeometry(0,.05,.2,12,1,!1),_=new Yt.BoxBufferGeometry(.125,.125,.125),x=new Yt.BufferGeometry;x.setAttribute("position",new Yt.Float32BufferAttribute([0,0,0,1,0,0],3));var w,E=function(t,e){for(var n=new Yt.BufferGeometry,r=[],i=0;i<=64*e;++i)r.push(0,Math.cos(i/32*Math.PI)*t,Math.sin(i/32*Math.PI)*t);return n.setAttribute("position",new Yt.Float32BufferAttribute(r,3)),n},S={X:[[new Yt.Mesh(b,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new Yt.Mesh(b,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new Yt.Line(x,h)]],Y:[[new Yt.Mesh(b,o),[0,1,0],null,null,"fwd"],[new Yt.Mesh(b,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new Yt.Line(x,f),null,[0,0,Math.PI/2]]],Z:[[new Yt.Mesh(b,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new Yt.Mesh(b,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new Yt.Line(x,p),null,[0,-Math.PI/2,0]]],XYZ:[[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.1,0),s.clone()),[0,0,0],[0,0,0]]],XY:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.295,.295),u.clone()),[.15,.15,0]],[new Yt.Line(x,v),[.18,.3,0],null,[.125,1,1]],[new Yt.Line(x,v),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.295,.295),l.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new Yt.Line(x,d),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new Yt.Line(x,d),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.295,.295),c.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new Yt.Line(x,m),[.18,0,.3],null,[.125,1,1]],[new Yt.Line(x,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},T={X:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.2,0),n)]],XY:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.4,.4),n),[.2,.2,0]]],YZ:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new Yt.Mesh(new Yt.PlaneBufferGeometry(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},A={START:[[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],END:[[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.01,2),r),null,null,null,"helper"]],DELTA:[[new Yt.Line((w=new Yt.BufferGeometry,w.setAttribute("position",new Yt.Float32BufferAttribute([0,0,0,1,1,1],3)),w),r),null,null,null,"helper"]],X:[[new Yt.Line(x,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yt.Line(x,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yt.Line(x,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},M={X:[[new Yt.Line(E(1,.5),h)],[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new Yt.Line(E(1,.5),f),null,[0,0,-Math.PI/2]],[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new Yt.Line(E(1,.5),p),null,[0,Math.PI/2,0]],[new Yt.Mesh(new Yt.OctahedronBufferGeometry(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new Yt.Line(E(1.25,1),y),null,[0,Math.PI/2,0]],[new Yt.Mesh(new Yt.CylinderBufferGeometry(.03,0,.15,4,1,!1),y),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new Yt.Mesh(new Yt.CylinderBufferGeometry(.03,0,.15,4,1,!1),y),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new Yt.Mesh(new Yt.CylinderBufferGeometry(.03,0,.15,4,1,!1),y),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new Yt.Mesh(new Yt.CylinderBufferGeometry(.03,0,.15,4,1,!1),y),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new Yt.Line(E(1,1),g),null,[0,Math.PI/2,0]]]},C={AXIS:[[new Yt.Line(x,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},O={X:[[new Yt.Mesh(new Yt.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Yt.Mesh(new Yt.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Yt.Mesh(new Yt.TorusBufferGeometry(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Yt.Mesh(new Yt.TorusBufferGeometry(1.25,.1,2,24),n)]],XYZE:[[new Yt.Mesh(new Yt.SphereBufferGeometry(.7,10,8),n)]]},P={X:[[new Yt.Mesh(_,i),[.8,0,0],[0,0,-Math.PI/2]],[new Yt.Line(x,h),null,null,[.8,1,1]]],Y:[[new Yt.Mesh(_,o),[0,.8,0]],[new Yt.Line(x,f),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new Yt.Mesh(_,a),[0,0,.8],[Math.PI/2,0,0]],[new Yt.Line(x,p),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new Yt.Mesh(_,u),[.85,.85,0],null,[2,2,.2]],[new Yt.Line(x,v),[.855,.98,0],null,[.125,1,1]],[new Yt.Line(x,v),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Yt.Mesh(_,l),[0,.85,.85],null,[.2,2,2]],[new Yt.Line(x,d),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new Yt.Line(x,d),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Yt.Mesh(_,c),[.85,0,.85],null,[2,.2,2]],[new Yt.Line(x,m),[.855,0,.98],null,[.125,1,1]],[new Yt.Line(x,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.125,.125,.125),s.clone()),[1.1,0,0]]],XYZY:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,1.1,0]]],XYZZ:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.125,.125,.125),s.clone()),[0,0,1.1]]]},k={X:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new Yt.Mesh(new Yt.CylinderBufferGeometry(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new Yt.Mesh(_,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new Yt.Mesh(_,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new Yt.Mesh(_,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new Yt.Mesh(new Yt.BoxBufferGeometry(.2,.2,.2),n),[0,0,1.1]]]},I={X:[[new Yt.Line(x,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new Yt.Line(x,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new Yt.Line(x,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},L=function(t){var e=new Yt.Object3D;for(var n in t)for(var r=t[n].length;r--;){var i=t[n][r][0].clone(),o=t[n][r][1],a=t[n][r][2],s=t[n][r][3],u=t[n][r][4];i.name=n,i.tag=u,o&&i.position.set(o[0],o[1],o[2]),a&&i.rotation.set(a[0],a[1],a[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();var l=i.geometry.clone();l.applyMatrix4(i.matrix),i.geometry=l,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),e.add(i)}return e},R=new Yt.Vector3(0,0,0),D=new Yt.Euler,N=new Yt.Vector3(0,1,0),F=new Yt.Vector3(0,0,0),j=new Yt.Matrix4,U=new Yt.Quaternion,z=new Yt.Quaternion,B=new Yt.Quaternion,V=new Yt.Vector3(1,0,0),H=new Yt.Vector3(0,1,0),G=new Yt.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=L(S)),this.add(this.gizmo.rotate=L(M)),this.add(this.gizmo.scale=L(P)),this.add(this.picker.translate=L(T)),this.add(this.picker.rotate=L(O)),this.add(this.picker.scale=L(k)),this.add(this.helper.translate=L(A)),this.add(this.helper.rotate=L(C)),this.add(this.helper.scale=L(I)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var t=this.space;"scale"===this.mode&&(t="local");var e="local"===t?this.worldQuaternion:B;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var r=0;r<n.length;r++){var i,o=n[r];if(o.visible=!0,o.rotation.set(0,0,0),o.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),o.scale.set(1,1,1).multiplyScalar(i*this.size/7),"helper"!==o.tag){if(o.quaternion.copy(e),"translate"===this.mode||"scale"===this.mode){var a=.99;"X"!==o.name&&"XYZX"!==o.name||Math.abs(N.copy(V).applyQuaternion(e).dot(this.eye))>a&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Y"!==o.name&&"XYZY"!==o.name||Math.abs(N.copy(H).applyQuaternion(e).dot(this.eye))>a&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"Z"!==o.name&&"XYZZ"!==o.name||Math.abs(N.copy(G).applyQuaternion(e).dot(this.eye))>a&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XY"===o.name&&Math.abs(N.copy(G).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"YZ"===o.name&&Math.abs(N.copy(V).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),"XZ"===o.name&&Math.abs(N.copy(H).applyQuaternion(e).dot(this.eye))<.2&&(o.scale.set(1e-10,1e-10,1e-10),o.visible=!1),-1!==o.name.search("X")&&(N.copy(V).applyQuaternion(e).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.x*=-1:"bwd"===o.tag&&(o.visible=!1)),-1!==o.name.search("Y")&&(N.copy(H).applyQuaternion(e).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.y*=-1:"bwd"===o.tag&&(o.visible=!1)),-1!==o.name.search("Z")&&(N.copy(G).applyQuaternion(e).dot(this.eye)<0?"fwd"===o.tag?o.visible=!1:o.scale.z*=-1:"bwd"===o.tag&&(o.visible=!1))}else"rotate"===this.mode&&(z.copy(e),N.copy(this.eye).applyQuaternion(U.copy(e).inverse()),-1!==o.name.search("E")&&o.quaternion.setFromRotationMatrix(j.lookAt(this.eye,F,H)),"X"===o.name&&(U.setFromAxisAngle(V,Math.atan2(-N.y,N.z)),U.multiplyQuaternions(z,U),o.quaternion.copy(U)),"Y"===o.name&&(U.setFromAxisAngle(H,Math.atan2(N.x,N.z)),U.multiplyQuaternions(z,U),o.quaternion.copy(U)),"Z"===o.name&&(U.setFromAxisAngle(G,Math.atan2(N.y,N.x)),U.multiplyQuaternions(z,U),o.quaternion.copy(U)));o.visible=o.visible&&(-1===o.name.indexOf("X")||this.showX),o.visible=o.visible&&(-1===o.name.indexOf("Y")||this.showY),o.visible=o.visible&&(-1===o.name.indexOf("Z")||this.showZ),o.visible=o.visible&&(-1===o.name.indexOf("E")||this.showX&&this.showY&&this.showZ),o.material._opacity=o.material._opacity||o.material.opacity,o.material._color=o.material._color||o.material.color.clone(),o.material.color.copy(o.material._color),o.material.opacity=o.material._opacity,this.enabled?this.axis&&(o.name===this.axis||this.axis.split("").some((function(t){return o.name===t}))?(o.material.opacity=1,o.material.color.lerp(new Yt.Color(1,1,1),.5)):(o.material.opacity*=.25,o.material.color.lerp(new Yt.Color(1,1,1),.5))):(o.material.opacity*=.5,o.material.color.lerp(new Yt.Color(1,1,1),.5))}else o.visible=!1,"AXIS"===o.name?(o.position.copy(this.worldPositionStart),o.visible=!!this.axis,"X"===this.axis&&(U.setFromEuler(D.set(0,0,0)),o.quaternion.copy(e).multiply(U),Math.abs(N.copy(V).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"Y"===this.axis&&(U.setFromEuler(D.set(0,0,Math.PI/2)),o.quaternion.copy(e).multiply(U),Math.abs(N.copy(H).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"Z"===this.axis&&(U.setFromEuler(D.set(0,Math.PI/2,0)),o.quaternion.copy(e).multiply(U),Math.abs(N.copy(G).applyQuaternion(e).dot(this.eye))>.9&&(o.visible=!1)),"XYZE"===this.axis&&(U.setFromEuler(D.set(0,Math.PI/2,0)),N.copy(this.rotationAxis),o.quaternion.setFromRotationMatrix(j.lookAt(F,N,H)),o.quaternion.multiply(U),o.visible=this.dragging),"E"===this.axis&&(o.visible=!1)):"START"===o.name?(o.position.copy(this.worldPositionStart),o.visible=this.dragging):"END"===o.name?(o.position.copy(this.worldPosition),o.visible=this.dragging):"DELTA"===o.name?(o.position.copy(this.worldPositionStart),o.quaternion.copy(this.worldQuaternionStart),R.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),R.applyQuaternion(this.worldQuaternionStart.clone().inverse()),o.scale.copy(R),o.visible=this.dragging):(o.quaternion.copy(e),this.dragging?o.position.copy(this.worldPositionStart):o.position.copy(this.worldPosition),this.axis&&(o.visible=-1!==this.axis.search(o.name)))}Yt.Object3D.prototype.updateMatrixWorld.call(this)}};sp.prototype=Object.assign(Object.create(Yt.Object3D.prototype),{constructor:sp,isTransformControlsGizmo:!0});var up=function(){Yt.Mesh.call(this,new Yt.PlaneBufferGeometry(1e5,1e5,2,2),new Yt.MeshBasicMaterial({visible:!1,wireframe:!0,side:Yt.DoubleSide,transparent:!0,opacity:.1})),this.type="TransformControlsPlane";var t=new Yt.Vector3(1,0,0),e=new Yt.Vector3(0,1,0),n=new Yt.Vector3(0,0,1),r=new Yt.Vector3,i=new Yt.Vector3,o=new Yt.Vector3,a=new Yt.Matrix4,s=new Yt.Quaternion;this.updateMatrixWorld=function(){var u=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(u="local"),t.set(1,0,0).applyQuaternion("local"===u?this.worldQuaternion:s),e.set(0,1,0).applyQuaternion("local"===u?this.worldQuaternion:s),n.set(0,0,1).applyQuaternion("local"===u?this.worldQuaternion:s),o.copy(e),this.mode){case"translate":case"scale":switch(this.axis){case"X":o.copy(this.eye).cross(t),i.copy(t).cross(o);break;case"Y":o.copy(this.eye).cross(e),i.copy(e).cross(o);break;case"Z":o.copy(this.eye).cross(n),i.copy(n).cross(o);break;case"XY":i.copy(n);break;case"YZ":i.copy(t);break;case"XZ":o.copy(n),i.copy(e);break;case"XYZ":case"E":i.set(0,0,0)}break;case"rotate":default:i.set(0,0,0)}0===i.length()?this.quaternion.copy(this.cameraQuaternion):(a.lookAt(r.set(0,0,0),i,o),this.quaternion.setFromRotationMatrix(a)),Yt.Object3D.prototype.updateMatrixWorld.call(this)}};up.prototype=Object.assign(Object.create(Yt.Mesh.prototype),{constructor:up,isTransformControlsPlane:!0}),n(7126),n(8056);var lp=n(1077);function cp(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(7443);var hp=function(){var t=hp.SkyShader,e=new Yt.ShaderMaterial({fragmentShader:t.fragmentShader,vertexShader:t.vertexShader,uniforms:Yt.UniformsUtils.clone(t.uniforms),side:Yt.BackSide,depthWrite:!1});Yt.Mesh.call(this,new Yt.BoxBufferGeometry(1,1,1),e)};hp.prototype=Object.create(Yt.Mesh.prototype),hp.SkyShader={uniforms:{luminance:{value:1},turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new Yt.Vector3},up:{value:new Yt.Vector3(0,1,0)}},vertexShader:["uniform vec3 sunPosition;","uniform float rayleigh;","uniform float turbidity;","uniform float mieCoefficient;","uniform vec3 up;","varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","const float e = 2.71828182845904523536028747135266249775724709369995957;","const float pi = 3.141592653589793238462643383279502884197169;","const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );","const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );","const float v = 4.0;","const vec3 K = vec3( 0.686, 0.678, 0.666 );","const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );","const float cutoffAngle = 1.6110731556870734;","const float steepness = 1.5;","const float EE = 1000.0;","float sunIntensity( float zenithAngleCos ) {","\tzenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );","\treturn EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );","}","vec3 totalMie( float T ) {","\tfloat c = ( 0.2 * T ) * 10E-18;","\treturn 0.434 * c * MieConst;","}","void main() {","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvWorldPosition = worldPosition.xyz;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","\tgl_Position.z = gl_Position.w;","\tvSunDirection = normalize( sunPosition );","\tvSunE = sunIntensity( dot( vSunDirection, up ) );","\tvSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );","\tfloat rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );","\tvBetaR = totalRayleigh * rayleighCoefficient;","\tvBetaM = totalMie( turbidity ) * mieCoefficient;","}"].join("\n"),fragmentShader:["varying vec3 vWorldPosition;","varying vec3 vSunDirection;","varying float vSunfade;","varying vec3 vBetaR;","varying vec3 vBetaM;","varying float vSunE;","uniform float luminance;","uniform float mieDirectionalG;","uniform vec3 up;","const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );","const float pi = 3.141592653589793238462643383279502884197169;","const float n = 1.0003;","const float N = 2.545E25;","const float rayleighZenithLength = 8.4E3;","const float mieZenithLength = 1.25E3;","const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;","const float THREE_OVER_SIXTEENPI = 0.05968310365946075;","const float ONE_OVER_FOURPI = 0.07957747154594767;","float rayleighPhase( float cosTheta ) {","\treturn THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );","}","float hgPhase( float cosTheta, float g ) {","\tfloat g2 = pow( g, 2.0 );","\tfloat inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );","\treturn ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );","}","const float A = 0.15;","const float B = 0.50;","const float C = 0.10;","const float D = 0.20;","const float E = 0.02;","const float F = 0.30;","const float whiteScale = 1.0748724675633854;","vec3 Uncharted2Tonemap( vec3 x ) {","\treturn ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;","}","void main() {","\tvec3 direction = normalize( vWorldPosition - cameraPos );","\tfloat zenithAngle = acos( max( 0.0, dot( up, direction ) ) );","\tfloat inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );","\tfloat sR = rayleighZenithLength * inverse;","\tfloat sM = mieZenithLength * inverse;","\tvec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );","\tfloat cosTheta = dot( direction, vSunDirection );","\tfloat rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );","\tvec3 betaRTheta = vBetaR * rPhase;","\tfloat mPhase = hgPhase( cosTheta, mieDirectionalG );","\tvec3 betaMTheta = vBetaM * mPhase;","\tvec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );","\tLin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );","\tfloat theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]","\tfloat phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]","\tvec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );","\tvec3 L0 = vec3( 0.1 ) * Fex;","\tfloat sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );","\tL0 += ( vSunE * 19000.0 * Fex ) * sundisk;","\tvec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );","\tvec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );","\tvec3 color = curr * whiteScale;","\tvec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );","\tgl_FragColor = vec4( retColor, 1.0 );","}"].join("\n")};var fp=function(t,e){Yt.Mesh.call(this,t),this.type="Reflector";var n=this,r=void 0!==(e=e||{}).color?new Yt.Color(e.color):new Yt.Color(8355711),i=e.textureWidth||512,o=e.textureHeight||512,a=e.clipBias||0,s=e.shader||fp.ReflectorShader,u=void 0!==e.encoding?e.encoding:Yt.LinearEncoding,l=new Yt.Plane,c=new Yt.Vector3,h=new Yt.Vector3,f=new Yt.Vector3,p=new Yt.Matrix4,d=new Yt.Vector3(0,0,-1),m=new Yt.Vector4,v=new Yt.Vector3,g=new Yt.Vector3,y=new Yt.Vector4,b=new Yt.Matrix4,_=new Yt.PerspectiveCamera,x={minFilter:Yt.LinearFilter,magFilter:Yt.LinearFilter,format:Yt.RGBFormat,stencilBuffer:!1,encoding:u},w=new Yt.WebGLRenderTarget(i,o,x);Yt.MathUtils.isPowerOfTwo(i)&&Yt.MathUtils.isPowerOfTwo(o)||(w.texture.generateMipmaps=!1);var E=new Yt.ShaderMaterial({uniforms:Yt.UniformsUtils.clone(s.uniforms),fragmentShader:s.fragmentShader,vertexShader:s.vertexShader});E.uniforms.tDiffuse.value=w.texture,E.uniforms.color.value=r,E.uniforms.textureMatrix.value=b,this.material=E,this.onBeforeRender=function(t,e,r){if(h.setFromMatrixPosition(n.matrixWorld),f.setFromMatrixPosition(r.matrixWorld),p.extractRotation(n.matrixWorld),c.set(0,0,1),c.applyMatrix4(p),v.subVectors(h,f),!(v.dot(c)>0)){v.reflect(c).negate(),v.add(h),p.extractRotation(r.matrixWorld),d.set(0,0,-1),d.applyMatrix4(p),d.add(f),g.subVectors(h,d),g.reflect(c).negate(),g.add(h),_.position.copy(v),_.up.set(0,1,0),_.up.applyMatrix4(p),_.up.reflect(c),_.lookAt(g),_.far=r.far,_.updateMatrixWorld(),_.projectionMatrix.copy(r.projectionMatrix),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(_.projectionMatrix),b.multiply(_.matrixWorldInverse),b.multiply(n.matrixWorld),l.setFromNormalAndCoplanarPoint(c,h),l.applyMatrix4(_.matrixWorldInverse),m.set(l.normal.x,l.normal.y,l.normal.z,l.constant);var i=_.projectionMatrix;y.x=(Math.sign(m.x)+i.elements[8])/i.elements[0],y.y=(Math.sign(m.y)+i.elements[9])/i.elements[5],y.z=-1,y.w=(1+i.elements[10])/i.elements[14],m.multiplyScalar(2/m.dot(y)),i.elements[2]=m.x,i.elements[6]=m.y,i.elements[10]=m.z+1-a,i.elements[14]=m.w,n.visible=!1;var o=t.getRenderTarget(),s=t.xr.enabled,u=t.shadowMap.autoUpdate;t.xr.enabled=!1,t.shadowMap.autoUpdate=!1,t.setRenderTarget(w),t.state.buffers.depth.setMask(!0),!1===t.autoClear&&t.clear(),t.render(e,_),t.xr.enabled=s,t.shadowMap.autoUpdate=u,t.setRenderTarget(o);var x=r.viewport;void 0!==x&&t.state.viewport(x),n.visible=!0}},this.getRenderTarget=function(){return w}};fp.prototype=Object.create(Yt.Mesh.prototype),fp.prototype.constructor=fp,fp.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")};var pp,dp,mp=function(){Yt.InstancedBufferGeometry.call(this),this.type="LineSegmentsGeometry",this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new Yt.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new Yt.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))};mp.prototype=Object.assign(Object.create(Yt.InstancedBufferGeometry.prototype),{constructor:mp,isLineSegmentsGeometry:!0,applyMatrix4:function(t){var e=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==e&&(e.applyMatrix4(t),n.applyMatrix4(t),e.data.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},setPositions:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new Yt.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceStart",new Yt.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new Yt.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this},setColors:function(t){var e;t instanceof Float32Array?e=t:Array.isArray(t)&&(e=new Float32Array(t));var n=new Yt.InstancedInterleavedBuffer(e,6,1);return this.setAttribute("instanceColorStart",new Yt.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new Yt.InterleavedBufferAttribute(n,3,3)),this},fromWireframeGeometry:function(t){return this.setPositions(t.attributes.position.array),this},fromEdgesGeometry:function(t){return this.setPositions(t.attributes.position.array),this},fromMesh:function(t){return this.fromWireframeGeometry(new Yt.WireframeGeometry(t.geometry)),this},fromLineSegments:function(t){var e=t.geometry;return e.isGeometry?this.setPositions(e.vertices):e.isBufferGeometry&&this.setPositions(e.attributes.position.array),this},computeBoundingBox:(dp=new Yt.Box3,function(){null===this.boundingBox&&(this.boundingBox=new Yt.Box3);var t=this.attributes.instanceStart,e=this.attributes.instanceEnd;void 0!==t&&void 0!==e&&(this.boundingBox.setFromBufferAttribute(t),dp.setFromBufferAttribute(e),this.boundingBox.union(dp))}),computeBoundingSphere:(pp=new Yt.Vector3,function(){null===this.boundingSphere&&(this.boundingSphere=new Yt.Sphere),null===this.boundingBox&&this.computeBoundingBox();var t=this.attributes.instanceStart,e=this.attributes.instanceEnd;if(void 0!==t&&void 0!==e){var n=this.boundingSphere.center;this.boundingBox.getCenter(n);for(var r=0,i=0,o=t.count;i<o;i++)pp.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(pp)),pp.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(pp));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}),toJSON:function(){},applyMatrix:function(t){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}});var vp=function(){mp.call(this),this.type="LineGeometry"};vp.prototype=Object.assign(Object.create(mp.prototype),{constructor:vp,isLineGeometry:!0,setPositions:function(t){for(var e=t.length-3,n=new Float32Array(2*e),r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return mp.prototype.setPositions.call(this,n),this},setColors:function(t){for(var e=t.length-3,n=new Float32Array(2*e),r=0;r<e;r+=3)n[2*r]=t[r],n[2*r+1]=t[r+1],n[2*r+2]=t[r+2],n[2*r+3]=t[r+3],n[2*r+4]=t[r+4],n[2*r+5]=t[r+5];return mp.prototype.setColors.call(this,n),this},fromLine:function(t){var e=t.geometry;return e.isGeometry?this.setPositions(e.vertices):e.isBufferGeometry&&this.setPositions(e.attributes.position.array),this},copy:function(){return this}}),Yt.UniformsLib.line={linewidth:{value:1},resolution:{value:new Yt.Vector2(1,1)},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1},opacity:{value:1}},Yt.ShaderLib.line={uniforms:Yt.UniformsUtils.merge([Yt.UniformsLib.common,Yt.UniformsLib.fog,Yt.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\tvarying vec2 vUv;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\tvUv = uv;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec2 ndcStart = clipStart.xy / clipStart.w;\n\t\t\tvec2 ndcEnd = clipEnd.xy / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd - ndcStart;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t// perpendicular to dir\n\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\n\t\t\t// undo aspect ratio adjustment\n\t\t\tdir.x /= aspect;\n\t\t\toffset.x /= aspect;\n\n\t\t\t// sign flip\n\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t// endcaps\n\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\toffset += - dir;\n\n\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\toffset += dir;\n\n\t\t\t}\n\n\t\t\t// adjust for linewidth\n\t\t\toffset *= linewidth;\n\n\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\toffset /= resolution.y;\n\n\t\t\t// select end\n\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t// back to clip space\n\t\t\toffset *= clip.w;\n\n\t\t\tclip.xy += offset;\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\tfloat a = vUv.x;\n\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t}\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, diffuseColor.a );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};var gp=function(t){Yt.ShaderMaterial.call(this,{type:"LineMaterial",uniforms:Yt.UniformsUtils.clone(Yt.ShaderLib.line.uniforms),vertexShader:Yt.ShaderLib.line.vertexShader,fragmentShader:Yt.ShaderLib.line.fragmentShader,clipping:!0}),this.dashed=!1,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}}}),this.setValues(t)};(gp.prototype=Object.create(Yt.ShaderMaterial.prototype)).constructor=gp,gp.prototype.isLineMaterial=!0;var yp=function(t,e){Yt.Mesh.call(this),this.type="LineSegments2",this.geometry=void 0!==t?t:new mp,this.material=void 0!==e?e:new gp({color:16777215*Math.random()})};yp.prototype=Object.assign(Object.create(Yt.Mesh.prototype),{constructor:yp,isLineSegments2:!0,computeLineDistances:function(){var t=new Yt.Vector3,e=new Yt.Vector3;return function(){for(var n=this.geometry,r=n.attributes.instanceStart,i=n.attributes.instanceEnd,o=new Float32Array(2*r.data.count),a=0,s=0,u=r.data.count;a<u;a++,s+=2)t.fromBufferAttribute(r,a),e.fromBufferAttribute(i,a),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+t.distanceTo(e);var l=new Yt.InstancedInterleavedBuffer(o,2,1);return n.setAttribute("instanceDistanceStart",new Yt.InterleavedBufferAttribute(l,1,0)),n.setAttribute("instanceDistanceEnd",new Yt.InterleavedBufferAttribute(l,1,1)),this}}(),raycast:function(){var t=new Yt.Vector4,e=new Yt.Vector4,n=new Yt.Vector4,r=new Yt.Vector3,i=new Yt.Matrix4,o=new Yt.Line3,a=new Yt.Vector3;return function(s,u){null===s.camera&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2.');var l=s.ray,c=s.camera,h=c.projectionMatrix,f=this.geometry,p=this.material,d=p.resolution,m=p.linewidth,v=f.attributes.instanceStart,g=f.attributes.instanceEnd;l.at(1,n),n.w=1,n.applyMatrix4(c.matrixWorldInverse),n.applyMatrix4(h),n.multiplyScalar(1/n.w),n.x*=d.x/2,n.y*=d.y/2,n.z=0,r.copy(n);var y=this.matrixWorld;i.multiplyMatrices(c.matrixWorldInverse,y);for(var b=0,_=v.count;b<_;b++){t.fromBufferAttribute(v,b),e.fromBufferAttribute(g,b),t.w=1,e.w=1,t.applyMatrix4(i),e.applyMatrix4(i),t.applyMatrix4(h),e.applyMatrix4(h),t.multiplyScalar(1/t.w),e.multiplyScalar(1/e.w);var x=t.z<-1&&e.z<-1,w=t.z>1&&e.z>1;if(!x&&!w){t.x*=d.x/2,t.y*=d.y/2,e.x*=d.x/2,e.y*=d.y/2,o.start.copy(t),o.start.z=0,o.end.copy(e),o.end.z=0;var E=o.closestPointToPointParameter(r,!0);o.at(E,a);var S=Yt.MathUtils.lerp(t.z,e.z,E),T=S>=-1&&S<=1,A=r.distanceTo(a)<.5*m;if(T&&A){o.start.fromBufferAttribute(v,b),o.end.fromBufferAttribute(g,b),o.start.applyMatrix4(y),o.end.applyMatrix4(y);var M=new Yt.Vector3,C=new Yt.Vector3;l.distanceSqToSegment(o.start,o.end,C,M),u.push({point:C,pointOnLine:M,distance:l.origin.distanceTo(C),object:this,face:null,faceIndex:b,uv:null,uv2:null})}}}}}()});var bp=function(t,e){yp.call(this),this.type="Line2",this.geometry=void 0!==t?t:new vp,this.material=void 0!==e?e:new gp({color:16777215*Math.random()})};bp.prototype=Object.assign(Object.create(yp.prototype),{constructor:bp,isLine2:!0});var _p=function(t){Yt.Loader.call(this,t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};_p.prototype=Object.assign(Object.create(Yt.Loader.prototype),{constructor:_p,setDecoderPath:function(t){return this.decoderPath=t,this},setDecoderConfig:function(t){return this.decoderConfig=t,this},setWorkerLimit:function(t){return this.workerLimit=t,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(t,e,n,r){var i=new Yt.FileLoader(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&i.setWithCredentials(!0),i.load(t,(t=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(t,n).then(e).catch(r)}),n,r)},decodeDracoFile:function(t,e,n,r){var i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(t,i).then(e)},decodeGeometry:function(t,e){for(var n in e.attributeTypes){var r=e.attributeTypes[n];void 0!==r.BYTES_PER_ELEMENT&&(e.attributeTypes[n]=r.name)}var i,o=JSON.stringify(e);if(_p.taskCache.has(t)){var a=_p.taskCache.get(t);if(a.key===o)return a.promise;if(0===t.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var s=this.workerNextTaskID++,u=t.byteLength,l=this._getWorker(s,u).then((n=>(i=n,new Promise(((n,r)=>{i._callbacks[s]={resolve:n,reject:r},i.postMessage({type:"decode",id:s,taskConfig:e,buffer:t},[t])}))))).then((t=>this._createGeometry(t.geometry)));return l.finally((()=>{i&&s&&this._releaseTask(i,s)})),_p.taskCache.set(t,{key:o,promise:l}),l},_createGeometry:function(t){var e=new Yt.BufferGeometry;t.index&&e.setIndex(new Yt.BufferAttribute(t.index.array,1));for(var n=0;n<t.attributes.length;n++){var r=t.attributes[n],i=r.name,o=r.array,a=r.itemSize;e.setAttribute(i,new Yt.BufferAttribute(o,a))}return e},_loadLibrary:function(t,e){var n=new Yt.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(e),new Promise(((e,r)=>{n.load(t,e,void 0,r)}))},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var t="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,e=[];return t?e.push(this._loadLibrary("draco_decoder.js","text")):(e.push(this._loadLibrary("draco_wasm_wrapper.js","text")),e.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(e).then((e=>{var n=e[0];t||(this.decoderConfig.wasmBinary=e[1]);var r=_p.DRACOWorker.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending},_getWorker:function(t,e){return this._initDecoder().then((()=>{var n;return this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(t){var e=t.data;switch(e.type){case"decode":n._callbacks[e.id].resolve(e);break;case"error":n._callbacks[e.id].reject(e);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+e.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(t,e){return t._taskLoad>e._taskLoad?-1:1})),(n=this.workerPool[this.workerPool.length-1])._taskCosts[t]=e,n._taskLoad+=e,n}))},_releaseTask:function(t,e){t._taskLoad-=t._taskCosts[e],delete t._callbacks[e],delete t._taskCosts[e]},debug:function(){console.log("Task load: ",this.workerPool.map((t=>t._taskLoad)))},dispose:function(){for(var t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}),_p.DRACOWorker=function(){var t,e;function n(t,e,n,r,i,o){var a,s,u=o.num_components(),l=n.num_points()*u;switch(i){case Float32Array:a=new t.DracoFloat32Array,e.GetAttributeFloatForAllPoints(n,o,a),s=new Float32Array(l);break;case Int8Array:a=new t.DracoInt8Array,e.GetAttributeInt8ForAllPoints(n,o,a),s=new Int8Array(l);break;case Int16Array:a=new t.DracoInt16Array,e.GetAttributeInt16ForAllPoints(n,o,a),s=new Int16Array(l);break;case Int32Array:a=new t.DracoInt32Array,e.GetAttributeInt32ForAllPoints(n,o,a),s=new Int32Array(l);break;case Uint8Array:a=new t.DracoUInt8Array,e.GetAttributeUInt8ForAllPoints(n,o,a),s=new Uint8Array(l);break;case Uint16Array:a=new t.DracoUInt16Array,e.GetAttributeUInt16ForAllPoints(n,o,a),s=new Uint16Array(l);break;case Uint32Array:a=new t.DracoUInt32Array,e.GetAttributeUInt32ForAllPoints(n,o,a),s=new Uint32Array(l);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var c=0;c<l;c++)s[c]=a.GetValue(c);return t.destroy(a),{name:r,array:s,itemSize:u}}onmessage=function(r){var i=r.data;switch(i.type){case"init":t=i.decoderConfig,e=new Promise((function(e){t.onModuleLoaded=function(t){e({draco:t})},DracoDecoderModule(t)}));break;case"decode":var o=i.buffer,a=i.taskConfig;e.then((t=>{var e=t.draco,r=new e.Decoder,s=new e.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var u=function(t,e,r,i){var o,a,s=i.attributeIDs,u=i.attributeTypes,l=e.GetEncodedGeometryType(r);if(l===t.TRIANGULAR_MESH)o=new t.Mesh,a=e.DecodeBufferToMesh(r,o);else{if(l!==t.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new t.PointCloud,a=e.DecodeBufferToPointCloud(r,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var c={index:null,attributes:[]};for(var h in s){var f,p,d=self[u[h]];if(i.useUniqueIDs)p=s[h],f=e.GetAttributeByUniqueId(o,p);else{if(-1===(p=e.GetAttributeId(o,t[s[h]])))continue;f=e.GetAttribute(o,p)}c.attributes.push(n(t,e,o,h,d,f))}if(l===t.TRIANGULAR_MESH){for(var m=o.num_faces(),v=new Uint32Array(3*m),g=new t.DracoInt32Array,y=0;y<m;++y){e.GetFaceFromMesh(o,y,g);for(var b=0;b<3;++b)v[3*y+b]=g.GetValue(b)}c.index={array:v,itemSize:1},t.destroy(g)}return t.destroy(o),c}(e,r,s,a),l=u.attributes.map((t=>t.array.buffer));u.index&&l.push(u.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:u},l)}catch(t){console.error(t),self.postMessage({type:"error",id:i.id,error:t.message})}finally{e.destroy(s),e.destroy(r)}}))}}},_p.taskCache=new WeakMap,_p.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},_p.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},_p.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},_p.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")},function(){function t(t){Yt.Loader.call(this,t),this.dracoLoader=null,this.ddsLoader=null}function e(){var t={};return{get:function(e){return t[e]},add:function(e,n){t[e]=n},remove:function(e){delete t[e]},removeAll:function(){t={}}}}t.prototype=Object.assign(Object.create(Yt.Loader.prototype),{constructor:t,load:function(t,e,n,r){var i,o=this;i=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:Yt.LoaderUtils.extractUrlBase(t),o.manager.itemStart(t);var a=function(e){r?r(e):console.error(e),o.manager.itemError(t),o.manager.itemEnd(t)},s=new Yt.FileLoader(o.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&s.setWithCredentials(!0),s.load(t,(function(n){try{o.parse(n,i,(function(n){e(n),o.manager.itemEnd(t)}),a)}catch(t){a(t)}}),n,a)},setDRACOLoader:function(t){return this.dracoLoader=t,this},setDDSLoader:function(t){return this.ddsLoader=t,this},parse:function(t,e,h,d){var m,v={};if("string"==typeof t)m=t;else if(Yt.LoaderUtils.decodeText(new Uint8Array(t,0,4))===s){try{v[n.KHR_BINARY_GLTF]=new u(t)}catch(t){return void(d&&d(t))}m=v[n.KHR_BINARY_GLTF].content}else m=Yt.LoaderUtils.decodeText(new Uint8Array(t));var g=JSON.parse(m);if(void 0===g.asset||g.asset.version[0]<2)d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(g.extensionsUsed)for(var y=0;y<g.extensionsUsed.length;++y){var b=g.extensionsUsed[y],_=g.extensionsRequired||[];switch(b){case n.KHR_LIGHTS_PUNCTUAL:v[b]=new i(g);break;case n.KHR_MATERIALS_CLEARCOAT:v[b]=new a;break;case n.KHR_MATERIALS_UNLIT:v[b]=new o;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:v[b]=new f;break;case n.KHR_DRACO_MESH_COMPRESSION:v[b]=new l(g,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:v[b]=new r(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:v[b]=new c;break;case n.KHR_MESH_QUANTIZATION:v[b]=new p;break;default:_.indexOf(b)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+b+'".')}}new O(g,v,{path:e||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(h,d)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(t){if(!t)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=t}function i(t){this.name=n.KHR_LIGHTS_PUNCTUAL;var e=t.extensions&&t.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=e.lights||[]}function o(){this.name=n.KHR_MATERIALS_UNLIT}function a(){this.name=n.KHR_MATERIALS_CLEARCOAT}i.prototype.loadLight=function(t){var e,n=this.lightDefs[t],r=new Yt.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var i=void 0!==n.range?n.range:0;switch(n.type){case"directional":(e=new Yt.DirectionalLight(r)).target.position.set(0,0,-1),e.add(e.target);break;case"point":(e=new Yt.PointLight(r)).distance=i;break;case"spot":(e=new Yt.SpotLight(r)).distance=i,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,e.angle=n.spot.outerConeAngle,e.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,e.target.position.set(0,0,-1),e.add(e.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return e.position.set(0,0,0),e.decay=2,void 0!==n.intensity&&(e.intensity=n.intensity),e.name=n.name||"light_"+t,Promise.resolve(e)},o.prototype.getMaterialType=function(){return Yt.MeshBasicMaterial},o.prototype.extendParams=function(t,e,n){var r=[];t.color=new Yt.Color(1,1,1),t.opacity=1;var i=e.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){var o=i.baseColorFactor;t.color.fromArray(o),t.opacity=o[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(t,"map",i.baseColorTexture))}return Promise.all(r)},a.prototype.getMaterialType=function(){return Yt.MeshPhysicalMaterial},a.prototype.extendParams=function(t,e,n){var r=[],i=e.extensions[this.name];if(void 0!==i.clearcoatFactor&&(t.clearcoat=i.clearcoatFactor),void 0!==i.clearcoatTexture&&r.push(n.assignTexture(t,"clearcoatMap",i.clearcoatTexture)),void 0!==i.clearcoatRoughnessFactor&&(t.clearcoatRoughness=i.clearcoatRoughnessFactor),void 0!==i.clearcoatRoughnessTexture&&r.push(n.assignTexture(t,"clearcoatRoughnessMap",i.clearcoatRoughnessTexture)),void 0!==i.clearcoatNormalTexture&&(r.push(n.assignTexture(t,"clearcoatNormalMap",i.clearcoatNormalTexture)),void 0!==i.clearcoatNormalTexture.scale)){var o=i.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new Yt.Vector2(o,o)}return Promise.all(r)};var s="glTF";function u(t){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var e=new DataView(t,0,12);if(this.header={magic:Yt.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:e.getUint32(4,!0),length:e.getUint32(8,!0)},this.header.magic!==s)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(t,12),i=0;i<r.byteLength;){var o=r.getUint32(i,!0);i+=4;var a=r.getUint32(i,!0);if(i+=4,1313821514===a){var u=new Uint8Array(t,12+i,o);this.content=Yt.LoaderUtils.decodeText(u)}else if(5130562===a){var l=12+i;this.body=t.slice(l,l+o)}i+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function l(t,e){if(!e)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=e,this.dracoLoader.preload()}function c(){this.name=n.KHR_TEXTURE_TRANSFORM}function h(t){Yt.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var e=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),i=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),a={specular:{value:(new Yt.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=a,this.onBeforeCompile=function(t){for(var s in a)t.uniforms[s]=a[s];t.fragmentShader=t.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),t.fragmentShader=t.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),t.fragmentShader=t.fragmentShader.replace("#include <roughnessmap_pars_fragment>",e),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),t.fragmentShader=t.fragmentShader.replace("#include <roughnessmap_fragment>",r),t.fragmentShader=t.fragmentShader.replace("#include <metalnessmap_fragment>",i),t.fragmentShader=t.fragmentShader.replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return a.specular.value},set:function(t){a.specular.value=t}},specularMap:{get:function(){return a.specularMap.value},set:function(t){a.specularMap.value=t}},glossiness:{get:function(){return a.glossiness.value},set:function(t){a.glossiness.value=t}},glossinessMap:{get:function(){return a.glossinessMap.value},set:function(t){a.glossinessMap.value=t,t?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}function f(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return h},extendParams:function(t,e,n){var r=e.extensions[this.name];t.color=new Yt.Color(1,1,1),t.opacity=1;var i=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;t.color.fromArray(o),t.opacity=o[3]}if(void 0!==r.diffuseTexture&&i.push(n.assignTexture(t,"map",r.diffuseTexture)),t.emissive=new Yt.Color(0,0,0),t.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,t.specular=new Yt.Color(1,1,1),Array.isArray(r.specularFactor)&&t.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var a=r.specularGlossinessTexture;i.push(n.assignTexture(t,"glossinessMap",a)),i.push(n.assignTexture(t,"specularMap",a))}return Promise.all(i)},createMaterial:function(t){var e=new h(t);return e.fog=!0,e.color=t.color,e.map=void 0===t.map?null:t.map,e.lightMap=null,e.lightMapIntensity=1,e.aoMap=void 0===t.aoMap?null:t.aoMap,e.aoMapIntensity=1,e.emissive=t.emissive,e.emissiveIntensity=1,e.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,e.bumpMap=void 0===t.bumpMap?null:t.bumpMap,e.bumpScale=1,e.normalMap=void 0===t.normalMap?null:t.normalMap,e.normalMapType=Yt.TangentSpaceNormalMap,t.normalScale&&(e.normalScale=t.normalScale),e.displacementMap=null,e.displacementScale=1,e.displacementBias=0,e.specularMap=void 0===t.specularMap?null:t.specularMap,e.specular=t.specular,e.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,e.glossiness=t.glossiness,e.alphaMap=null,e.envMap=void 0===t.envMap?null:t.envMap,e.envMapIntensity=1,e.refractionRatio=.98,e}}}function p(){this.name=n.KHR_MESH_QUANTIZATION}function d(t,e,n,r){Yt.Interpolant.call(this,t,e,n,r)}l.prototype.decodePrimitive=function(t,e){var n=this.json,r=this.dracoLoader,i=t.extensions[this.name].bufferView,o=t.extensions[this.name].attributes,a={},s={},u={};for(var l in o){var c=b[l]||l.toLowerCase();a[c]=o[l]}for(l in t.attributes)if(c=b[l]||l.toLowerCase(),void 0!==o[l]){var h=n.accessors[t.attributes[l]],f=m[h.componentType];u[c]=f,s[c]=!0===h.normalized}return e.getDependency("bufferView",i).then((function(t){return new Promise((function(e){r.decodeDracoFile(t,(function(t){for(var n in t.attributes){var r=t.attributes[n],i=s[n];void 0!==i&&(r.normalized=i)}e(t)}),a,u)}))}))},c.prototype.extendTexture=function(t,e){return t=t.clone(),void 0!==e.offset&&t.offset.fromArray(e.offset),void 0!==e.rotation&&(t.rotation=e.rotation),void 0!==e.scale&&t.repeat.fromArray(e.scale),void 0!==e.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),t.needsUpdate=!0,t},h.prototype=Object.create(Yt.MeshStandardMaterial.prototype),h.prototype.constructor=h,h.prototype.copy=function(t){return Yt.MeshStandardMaterial.prototype.copy.call(this,t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},d.prototype=Object.create(Yt.Interpolant.prototype),d.prototype.constructor=d,d.prototype.copySampleValue_=function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=t*r*3+r,o=0;o!==r;o++)e[o]=n[i+o];return e},d.prototype.beforeStart_=d.prototype.copySampleValue_,d.prototype.afterEnd_=d.prototype.copySampleValue_,d.prototype.interpolate_=function(t,e,n,r){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,u=3*a,l=r-e,c=(n-e)/l,h=c*c,f=h*c,p=t*u,d=p-u,m=-2*f+3*h,v=f-h,g=1-m,y=v-h+c,b=0;b!==a;b++){var _=o[d+b+a],x=o[d+b+s]*l,w=o[p+b+a],E=o[p+b]*l;i[b]=g*_+y*x+m*w+v*E}return i};var m={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},v={9728:Yt.NearestFilter,9729:Yt.LinearFilter,9984:Yt.NearestMipmapNearestFilter,9985:Yt.LinearMipmapNearestFilter,9986:Yt.NearestMipmapLinearFilter,9987:Yt.LinearMipmapLinearFilter},g={33071:Yt.ClampToEdgeWrapping,33648:Yt.MirroredRepeatWrapping,10497:Yt.RepeatWrapping},y={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},b={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},_={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},x={CUBICSPLINE:void 0,LINEAR:Yt.InterpolateLinear,STEP:Yt.InterpolateDiscrete},w={"image/png":Yt.RGBAFormat,"image/jpeg":Yt.RGBFormat};function E(t,e){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(e)&&/^\//.test(t)&&(e=e.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:e+t)}function S(t){return void 0===t.DefaultMaterial&&(t.DefaultMaterial=new Yt.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Yt.FrontSide})),t.DefaultMaterial}function T(t,e,n){for(var r in n.extensions)void 0===t[r]&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[r]=n.extensions[r])}function A(t,e){void 0!==e.extras&&("object"==typeof e.extras?Object.assign(t.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function M(t,e){if(t.updateMorphTargets(),void 0!==e.weights)for(var n=0,r=e.weights.length;n<r;n++)t.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){var i=e.extras.targetNames;if(t.morphTargetInfluences.length===i.length)for(t.morphTargetDictionary={},n=0,r=i.length;n<r;n++)t.morphTargetDictionary[i[n]]=n;else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function C(t){for(var e="",n=Object.keys(t).sort(),r=0,i=n.length;r<i;r++)e+=n[r]+":"+t[n[r]]+";";return e}function O(t,n,r){this.json=t||{},this.extensions=n||{},this.options=r||{},this.cache=new e,this.primitiveCache={},this.textureLoader=new Yt.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new Yt.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function P(t,e,n){var r=e.attributes,i=[];function o(e,r){return n.getDependency("accessor",e).then((function(e){t.setAttribute(r,e)}))}for(var a in r){var s=b[a]||a.toLowerCase();s in t.attributes||i.push(o(r[a],s))}if(void 0!==e.indices&&!t.index){var u=n.getDependency("accessor",e.indices).then((function(e){t.setIndex(e)}));i.push(u)}return A(t,e),function(t,e,n){var r=e.attributes,i=new Yt.Box3;if(void 0!==r.POSITION){var o=(f=n.json.accessors[r.POSITION]).min,a=f.max;if(void 0!==o&&void 0!==a){i.set(new Yt.Vector3(o[0],o[1],o[2]),new Yt.Vector3(a[0],a[1],a[2]));var s=e.targets;if(void 0!==s){for(var u=new Yt.Vector3,l=new Yt.Vector3,c=0,h=s.length;c<h;c++){var f,p=s[c];void 0!==p.POSITION&&(o=(f=n.json.accessors[p.POSITION]).min,a=f.max,void 0!==o&&void 0!==a?(l.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),l.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),l.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),u.max(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION."))}i.expandByVector(u)}t.boundingBox=i;var d=new Yt.Sphere;i.getCenter(d.center),d.radius=i.min.distanceTo(i.max)/2,t.boundingSphere=d}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(t,e,n),Promise.all(i).then((function(){return void 0!==e.targets?function(t,e,n){for(var r=!1,i=!1,o=0,a=e.length;o<a&&(void 0!==(l=e[o]).POSITION&&(r=!0),void 0!==l.NORMAL&&(i=!0),!r||!i);o++);if(!r&&!i)return Promise.resolve(t);var s=[],u=[];for(o=0,a=e.length;o<a;o++){var l=e[o];if(r){var c=void 0!==l.POSITION?n.getDependency("accessor",l.POSITION):t.attributes.position;s.push(c)}i&&(c=void 0!==l.NORMAL?n.getDependency("accessor",l.NORMAL):t.attributes.normal,u.push(c))}return Promise.all([Promise.all(s),Promise.all(u)]).then((function(e){var n=e[0],o=e[1];return r&&(t.morphAttributes.position=n),i&&(t.morphAttributes.normal=o),t.morphTargetsRelative=!0,t}))}(t,e.targets,n):t}))}function k(t,e){var n=t.getIndex();if(null===n){var r=[],i=t.getAttribute("position");if(void 0===i)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),t;for(var o=0;o<i.count;o++)r.push(o);t.setIndex(r),n=t.getIndex()}var a=n.count-2,s=[];if(e===Yt.TriangleFanDrawMode)for(o=1;o<=a;o++)s.push(n.getX(0)),s.push(n.getX(o)),s.push(n.getX(o+1));else for(o=0;o<a;o++)o%2==0?(s.push(n.getX(o)),s.push(n.getX(o+1)),s.push(n.getX(o+2))):(s.push(n.getX(o+2)),s.push(n.getX(o+1)),s.push(n.getX(o)));s.length/3!==a&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=t.clone();return u.setIndex(s),u}O.prototype.parse=function(t,e){var n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(e){var o={scene:e[0][r.scene||0],scenes:e[0],animations:e[1],cameras:e[2],asset:r.asset,parser:n,userData:{}};T(i,o,r),A(o,r),t(o)})).catch(e)},O.prototype.markDefs=function(){for(var t=this.json.nodes||[],e=this.json.skins||[],n=this.json.meshes||[],r={},i={},o=0,a=e.length;o<a;o++)for(var s=e[o].joints,u=0,l=s.length;u<l;u++)t[s[u]].isBone=!0;for(var c=0,h=t.length;c<h;c++){var f=t[c];void 0!==f.mesh&&(void 0===r[f.mesh]&&(r[f.mesh]=i[f.mesh]=0),r[f.mesh]++,void 0!==f.skin&&(n[f.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=i},O.prototype.getDependency=function(t,e){var r=t+":"+e,i=this.cache.get(r);if(!i){switch(t){case"scene":i=this.loadScene(e);break;case"node":i=this.loadNode(e);break;case"mesh":i=this.loadMesh(e);break;case"accessor":i=this.loadAccessor(e);break;case"bufferView":i=this.loadBufferView(e);break;case"buffer":i=this.loadBuffer(e);break;case"material":i=this.loadMaterial(e);break;case"texture":i=this.loadTexture(e);break;case"skin":i=this.loadSkin(e);break;case"animation":i=this.loadAnimation(e);break;case"camera":i=this.loadCamera(e);break;case"light":i=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(e);break;default:throw new Error("Unknown type: "+t)}this.cache.add(r,i)}return i},O.prototype.getDependencies=function(t){var e=this.cache.get(t);if(!e){var n=this,r=this.json[t+("mesh"===t?"es":"s")]||[];e=Promise.all(r.map((function(e,r){return n.getDependency(t,r)}))),this.cache.add(t,e)}return e},O.prototype.loadBuffer=function(t){var e=this.json.buffers[t],r=this.fileLoader;if(e.type&&"arraybuffer"!==e.type)throw new Error("THREE.GLTFLoader: "+e.type+" buffer type is not supported.");if(void 0===e.uri&&0===t)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var i=this.options;return new Promise((function(t,n){r.load(E(e.uri,i.path),t,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+e.uri+'".'))}))}))},O.prototype.loadBufferView=function(t){var e=this.json.bufferViews[t];return this.getDependency("buffer",e.buffer).then((function(t){var n=e.byteLength||0,r=e.byteOffset||0;return t.slice(r,r+n)}))},O.prototype.loadAccessor=function(t){var e=this,n=this.json,r=this.json.accessors[t];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(t){var i,o,a=t[0],s=y[r.type],u=m[r.componentType],l=u.BYTES_PER_ELEMENT,c=l*s,h=r.byteOffset||0,f=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,p=!0===r.normalized;if(f&&f!==c){var d=Math.floor(h/f),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+d+":"+r.count,g=e.cache.get(v);g||(i=new u(a,d*f,r.count*f/l),g=new Yt.InterleavedBuffer(i,f/l),e.cache.add(v,g)),o=new Yt.InterleavedBufferAttribute(g,s,h%f/l,p)}else i=null===a?new u(r.count*s):new u(a,h,r.count*s),o=new Yt.BufferAttribute(i,s,p);if(void 0!==r.sparse){var b=y.SCALAR,_=m[r.sparse.indices.componentType],x=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,E=new _(t[1],x,r.sparse.count*b),S=new u(t[2],w,r.sparse.count*s);null!==a&&(o=new Yt.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var T=0,A=E.length;T<A;T++){var M=E[T];if(o.setX(M,S[T*s]),s>=2&&o.setY(M,S[T*s+1]),s>=3&&o.setZ(M,S[T*s+2]),s>=4&&o.setW(M,S[T*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},O.prototype.loadTexture=function(t){var e,r=this,i=this.json,o=this.options,a=this.textureLoader,s=self.URL||self.webkitURL,u=i.textures[t],l=u.extensions||{},c=(e=l[n.MSFT_TEXTURE_DDS]?i.images[l[n.MSFT_TEXTURE_DDS].source]:i.images[u.source]).uri,h=!1;return void 0!==e.bufferView&&(c=r.getDependency("bufferView",e.bufferView).then((function(t){h=!0;var n=new Blob([t],{type:e.mimeType});return c=s.createObjectURL(n)}))),Promise.resolve(c).then((function(t){var e=o.manager.getHandler(t);return e||(e=l[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:a),new Promise((function(n,r){e.load(E(t,o.path),n,void 0,r)}))})).then((function(t){!0===h&&s.revokeObjectURL(c),t.flipY=!1,u.name&&(t.name=u.name),e.mimeType in w&&(t.format=w[e.mimeType]);var n=(i.samplers||{})[u.sampler]||{};return t.magFilter=v[n.magFilter]||Yt.LinearFilter,t.minFilter=v[n.minFilter]||Yt.LinearMipmapLinearFilter,t.wrapS=g[n.wrapS]||Yt.RepeatWrapping,t.wrapT=g[n.wrapT]||Yt.RepeatWrapping,t}))},O.prototype.assignTexture=function(t,e,r){var i=this;return this.getDependency("texture",r.index).then((function(o){if(!o.isCompressedTexture)switch(e){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=Yt.RGBFormat}if(void 0===r.texCoord||0==r.texCoord||"aoMap"===e&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+e+" not yet supported."),i.extensions[n.KHR_TEXTURE_TRANSFORM]){var a=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;a&&(o=i.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,a))}t[e]=o}))},O.prototype.assignFinalMaterial=function(t){var e=t.geometry,n=t.material,r=void 0!==e.attributes.tangent,i=void 0!==e.attributes.color,o=void 0===e.attributes.normal,a=!0===t.isSkinnedMesh,s=Object.keys(e.morphAttributes).length>0,u=s&&void 0!==e.morphAttributes.normal;if(t.isPoints){var l="PointsMaterial:"+n.uuid,c=this.cache.get(l);c||(c=new Yt.PointsMaterial,Yt.Material.prototype.copy.call(c,n),c.color.copy(n.color),c.map=n.map,c.sizeAttenuation=!1,this.cache.add(l,c)),n=c}else if(t.isLine){l="LineBasicMaterial:"+n.uuid;var h=this.cache.get(l);h||(h=new Yt.LineBasicMaterial,Yt.Material.prototype.copy.call(h,n),h.color.copy(n.color),this.cache.add(l,h)),n=h}if(r||i||o||a||s){l="ClonedMaterial:"+n.uuid+":",n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),a&&(l+="skinning:"),r&&(l+="vertex-tangents:"),i&&(l+="vertex-colors:"),o&&(l+="flat-shading:"),s&&(l+="morph-targets:"),u&&(l+="morph-normals:");var f=this.cache.get(l);f||(f=n.clone(),a&&(f.skinning=!0),r&&(f.vertexTangents=!0),i&&(f.vertexColors=!0),o&&(f.flatShading=!0),s&&(f.morphTargets=!0),u&&(f.morphNormals=!0),this.cache.add(l,f)),n=f}n.aoMap&&void 0===e.attributes.uv2&&void 0!==e.attributes.uv&&e.setAttribute("uv2",e.attributes.uv),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),t.material=n},O.prototype.loadMaterial=function(t){var e,r=this,i=this.json,o=this.extensions,a=i.materials[t],s={},u=a.extensions||{},l=[];if(u[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];e=c.getMaterialType(),l.push(c.extendParams(s,a,r))}else if(u[n.KHR_MATERIALS_UNLIT]){var f=o[n.KHR_MATERIALS_UNLIT];e=f.getMaterialType(),l.push(f.extendParams(s,a,r))}else{e=Yt.MeshStandardMaterial;var p=a.pbrMetallicRoughness||{};if(s.color=new Yt.Color(1,1,1),s.opacity=1,Array.isArray(p.baseColorFactor)){var d=p.baseColorFactor;s.color.fromArray(d),s.opacity=d[3]}void 0!==p.baseColorTexture&&l.push(r.assignTexture(s,"map",p.baseColorTexture)),s.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,s.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(l.push(r.assignTexture(s,"metalnessMap",p.metallicRoughnessTexture)),l.push(r.assignTexture(s,"roughnessMap",p.metallicRoughnessTexture)))}!0===a.doubleSided&&(s.side=Yt.DoubleSide);var m=a.alphaMode||"OPAQUE";if("BLEND"===m?(s.transparent=!0,s.depthWrite=!1):(s.transparent=!1,"MASK"===m&&(s.alphaTest=void 0!==a.alphaCutoff?a.alphaCutoff:.5)),void 0!==a.normalTexture&&e!==Yt.MeshBasicMaterial&&(l.push(r.assignTexture(s,"normalMap",a.normalTexture)),s.normalScale=new Yt.Vector2(1,1),void 0!==a.normalTexture.scale&&s.normalScale.set(a.normalTexture.scale,a.normalTexture.scale)),void 0!==a.occlusionTexture&&e!==Yt.MeshBasicMaterial&&(l.push(r.assignTexture(s,"aoMap",a.occlusionTexture)),void 0!==a.occlusionTexture.strength&&(s.aoMapIntensity=a.occlusionTexture.strength)),void 0!==a.emissiveFactor&&e!==Yt.MeshBasicMaterial&&(s.emissive=(new Yt.Color).fromArray(a.emissiveFactor)),void 0!==a.emissiveTexture&&e!==Yt.MeshBasicMaterial&&l.push(r.assignTexture(s,"emissiveMap",a.emissiveTexture)),u[n.KHR_MATERIALS_CLEARCOAT]){var v=o[n.KHR_MATERIALS_CLEARCOAT];e=v.getMaterialType(),l.push(v.extendParams(s,{extensions:u},r))}return Promise.all(l).then((function(){var t;return t=e===h?o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new e(s),a.name&&(t.name=a.name),t.map&&(t.map.encoding=Yt.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=Yt.sRGBEncoding),A(t,a),a.extensions&&T(o,t,a),t}))},O.prototype.loadGeometries=function(t){var e=this,r=this.extensions,i=this.primitiveCache;function o(t){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(t,e).then((function(n){return P(n,t,e)}))}for(var a,s,u=[],l=0,c=t.length;l<c;l++){var h,f=t[l],p=(void 0,(s=(a=f).extensions&&a.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+s.bufferView+":"+s.indices+":"+C(s.attributes):a.indices+":"+C(a.attributes)+":"+a.mode),d=i[p];d?u.push(d.promise):(h=f.extensions&&f.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(f):P(new Yt.BufferGeometry,f,e),i[p]={primitive:f,promise:h},u.push(h))}return Promise.all(u)},O.prototype.loadMesh=function(t){for(var e=this,n=this.json.meshes[t],r=n.primitives,i=[],o=0,a=r.length;o<a;o++){var s=void 0===r[o].material?S(this.cache):this.getDependency("material",r[o].material);i.push(s)}return i.push(e.loadGeometries(r)),Promise.all(i).then((function(i){for(var o=i.slice(0,i.length-1),a=i[i.length-1],s=[],u=0,l=a.length;u<l;u++){var c,h=a[u],f=r[u],p=o[u];if(4===f.mode||5===f.mode||6===f.mode||void 0===f.mode)!0!==(c=!0===n.isSkinnedMesh?new Yt.SkinnedMesh(h,p):new Yt.Mesh(h,p)).isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),5===f.mode?c.geometry=k(c.geometry,Yt.TriangleStripDrawMode):6===f.mode&&(c.geometry=k(c.geometry,Yt.TriangleFanDrawMode));else if(1===f.mode)c=new Yt.LineSegments(h,p);else if(3===f.mode)c=new Yt.Line(h,p);else if(2===f.mode)c=new Yt.LineLoop(h,p);else{if(0!==f.mode)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);c=new Yt.Points(h,p)}Object.keys(c.geometry.morphAttributes).length>0&&M(c,n),c.name=n.name||"mesh_"+t,a.length>1&&(c.name+="_"+u),A(c,n),e.assignFinalMaterial(c),s.push(c)}if(1===s.length)return s[0];var d=new Yt.Group;for(u=0,l=s.length;u<l;u++)d.add(s[u]);return d}))},O.prototype.loadCamera=function(t){var e,n=this.json.cameras[t],r=n[n.type];if(r)return"perspective"===n.type?e=new Yt.PerspectiveCamera(Yt.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(e=new Yt.OrthographicCamera(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(e.name=n.name),A(e,n),Promise.resolve(e);console.warn("THREE.GLTFLoader: Missing camera parameters.")},O.prototype.loadSkin=function(t){var e=this.json.skins[t],n={joints:e.joints};return void 0===e.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",e.inverseBindMatrices).then((function(t){return n.inverseBindMatrices=t,n}))},O.prototype.loadAnimation=function(t){for(var e=this.json.animations[t],n=[],r=[],i=[],o=[],a=[],s=0,u=e.channels.length;s<u;s++){var l=e.channels[s],c=e.samplers[l.sampler],h=l.target,f=void 0!==h.node?h.node:h.id,p=void 0!==e.parameters?e.parameters[c.input]:c.input,m=void 0!==e.parameters?e.parameters[c.output]:c.output;n.push(this.getDependency("node",f)),r.push(this.getDependency("accessor",p)),i.push(this.getDependency("accessor",m)),o.push(c),a.push(h)}return Promise.all([Promise.all(n),Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a)]).then((function(n){for(var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],u=[],l=0,c=r.length;l<c;l++){var h=r[l],f=i[l],p=o[l],m=a[l],v=s[l];if(void 0!==h){var g;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,_[v.path]){case _.weights:g=Yt.NumberKeyframeTrack;break;case _.rotation:g=Yt.QuaternionKeyframeTrack;break;case _.position:case _.scale:default:g=Yt.VectorKeyframeTrack}var y=h.name?h.name:h.uuid,b=void 0!==m.interpolation?x[m.interpolation]:Yt.InterpolateLinear,w=[];_[v.path]===_.weights?h.traverse((function(t){!0===t.isMesh&&t.morphTargetInfluences&&w.push(t.name?t.name:t.uuid)})):w.push(y);var E=p.array;if(p.normalized){var S;if(E.constructor===Int8Array)S=1/127;else if(E.constructor===Uint8Array)S=1/255;else if(E.constructor==Int16Array)S=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");S=1/65535}for(var T=new Float32Array(E.length),A=0,M=E.length;A<M;A++)T[A]=E[A]*S;E=T}for(A=0,M=w.length;A<M;A++){var C=new g(w[A]+"."+_[v.path],f.array,E,b);"CUBICSPLINE"===m.interpolation&&(C.createInterpolant=function(t){return new d(this.times,this.values,this.getValueSize()/3,t)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(C)}}}var O=e.name?e.name:"animation_"+t;return new Yt.AnimationClip(O,void 0,u)}))},O.prototype.loadNode=function(t){var e,r=this.json,i=this.extensions,o=this,a=r.meshReferences,s=r.meshUses,u=r.nodes[t];return(e=[],void 0!==u.mesh&&e.push(o.getDependency("mesh",u.mesh).then((function(t){var e;if(a[u.mesh]>1){var n=s[u.mesh]++;(e=t.clone()).name+="_instance_"+n}else e=t;return void 0!==u.weights&&e.traverse((function(t){if(t.isMesh)for(var e=0,n=u.weights.length;e<n;e++)t.morphTargetInfluences[e]=u.weights[e]})),e}))),void 0!==u.camera&&e.push(o.getDependency("camera",u.camera)),u.extensions&&u.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==u.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&e.push(o.getDependency("light",u.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(e)).then((function(t){var e;if((e=!0===u.isBone?new Yt.Bone:t.length>1?new Yt.Group:1===t.length?t[0]:new Yt.Object3D)!==t[0])for(var n=0,r=t.length;n<r;n++)e.add(t[n]);if(u.name&&(e.userData.name=u.name,e.name=Yt.PropertyBinding.sanitizeNodeName(u.name)),A(e,u),u.extensions&&T(i,e,u),void 0!==u.matrix){var o=new Yt.Matrix4;o.fromArray(u.matrix),e.applyMatrix4(o)}else void 0!==u.translation&&e.position.fromArray(u.translation),void 0!==u.rotation&&e.quaternion.fromArray(u.rotation),void 0!==u.scale&&e.scale.fromArray(u.scale);return e}))},O.prototype.loadScene=function(){function t(e,n,r,i){var o=r.nodes[e];return i.getDependency("node",e).then((function(t){return void 0===o.skin?t:i.getDependency("skin",o.skin).then((function(t){for(var n=[],r=0,o=(e=t).joints.length;r<o;r++)n.push(i.getDependency("node",e.joints[r]));return Promise.all(n)})).then((function(n){return t.traverse((function(t){if(t.isMesh){for(var r=[],i=[],o=0,a=n.length;o<a;o++){var s=n[o];if(s){r.push(s);var u=new Yt.Matrix4;void 0!==e.inverseBindMatrices&&u.fromArray(e.inverseBindMatrices.array,16*o),i.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',e.joints[o])}t.bind(new Yt.Skeleton(r,i),t.matrixWorld)}})),t}));var e})).then((function(e){n.add(e);var a=[];if(o.children)for(var s=o.children,u=0,l=s.length;u<l;u++){var c=s[u];a.push(t(c,e,r,i))}return Promise.all(a)}))}return function(e){var n=this.json,r=this.extensions,i=this.json.scenes[e],o=new Yt.Group;i.name&&(o.name=i.name),A(o,i),i.extensions&&T(r,o,i);for(var a=i.nodes||[],s=[],u=0,l=a.length;u<l;u++)s.push(t(a[u],o,n,this));return Promise.all(s).then((function(){return o}))}}()}(),Nf({OrbitControlsImpl:rp}),Nf({MapControlsImpl:ip}),Nf({TrackballControlsImpl:op}),Nf({DeviceOrientationControlsImp:function(t){var e=this;this.object=t,this.object.rotation.reorder("YXZ"),this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alphaOffset=0;var n,r,i,o,a=function(t){e.deviceOrientation=t},s=function(){e.screenOrientation=window.orientation||0},u=(n=new Yt.Vector3(0,0,1),r=new Yt.Euler,i=new Yt.Quaternion,o=new Yt.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5)),function(t,e,a,s,u){r.set(a,e,-s,"YXZ"),t.setFromEuler(r),t.multiply(o),t.multiply(i.setFromAxisAngle(n,-u))});this.connect=function(){s(),void 0!==window.DeviceOrientationEvent&&"function"==typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((function(t){"granted"==t&&(window.addEventListener("orientationchange",s,!1),window.addEventListener("deviceorientation",a,!1))})).catch((function(t){console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",t)})):(window.addEventListener("orientationchange",s,!1),window.addEventListener("deviceorientation",a,!1)),e.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",s,!1),window.removeEventListener("deviceorientation",a,!1),e.enabled=!1},this.update=function(){if(!1!==e.enabled){var t=e.deviceOrientation;if(t){var n=t.alpha?Yt.MathUtils.degToRad(t.alpha)+e.alphaOffset:0,r=t.beta?Yt.MathUtils.degToRad(t.beta):0,i=t.gamma?Yt.MathUtils.degToRad(t.gamma):0,o=e.screenOrientation?Yt.MathUtils.degToRad(e.screenOrientation):0;u(e.object.quaternion,n,r,i,o)}}},this.dispose=function(){e.disconnect()},this.connect()}}),Nf({TransformControlsImpl:ap}),Nf({FlyControlsImpl:function(t,e){function n(t,e){return function(){e.apply(t,arguments)}}function r(t){t.preventDefault()}void 0===e&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),e=document),this.object=t,this.domElement=e,e&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1,this.tmpQuaternion=new Yt.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new Yt.Vector3(0,0,0),this.rotationVector=new Yt.Vector3(0,0,0),this.keydown=function(t){if(!t.altKey){switch(t.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(t){switch(t.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(t){if(this.domElement!==document&&this.domElement.focus(),t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(t.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(t){if(!this.dragToLook||this.mouseStatus>0){var e=this.getContainerDimensions(),n=e.size[0]/2,r=e.size[1]/2;this.moveState.yawLeft=-(t.pageX-e.offset[0]-n)/n,this.moveState.pitchDown=(t.pageY-e.offset[1]-r)/r,this.updateRotationVector()}},this.mouseup=function(t){if(t.preventDefault(),t.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(t.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=function(t){var e=t*this.movementSpeed,n=t*this.rollSpeed;this.object.translateX(this.moveVector.x*e),this.object.translateY(this.moveVector.y*e),this.object.translateZ(this.moveVector.z*e),this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),this.object.rotation.setFromQuaternion(this.object.quaternion,this.object.rotation.order)},this.updateMovementVector=function(){var t=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-t+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",r,!1),this.domElement.removeEventListener("mousedown",o,!1),this.domElement.removeEventListener("mousemove",i,!1),this.domElement.removeEventListener("mouseup",a,!1),window.removeEventListener("keydown",s,!1),window.removeEventListener("keyup",u,!1)};var i=n(this,this.mousemove),o=n(this,this.mousedown),a=n(this,this.mouseup),s=n(this,this.keydown),u=n(this,this.keyup);this.domElement.addEventListener("contextmenu",r,!1),this.domElement.addEventListener("mousemove",i,!1),this.domElement.addEventListener("mousedown",o,!1),this.domElement.addEventListener("mouseup",a,!1),window.addEventListener("keydown",s,!1),window.addEventListener("keyup",u,!1),this.updateMovementVector(),this.updateRotationVector()}});const xp=(0,o.forwardRef)(((t,e)=>{let{children:n,makeDefault:r=!1}=t,i=j(t,["children","makeDefault"]);const{setDefaultCamera:a,camera:s,size:u}=$f(),l=function(t,e,n){const{invalidate:r}=Zf(Qf),i=(0,o.useRef)();return(0,o.useLayoutEffect)((()=>{i.current&&(i.current.updateProjectionMatrix(),r())}),e),i}(0,[u,i]);return(0,o.useLayoutEffect)((()=>{if(r&&l.current){const t=s;return a(l.current),()=>a(t)}}),[]),o.createElement("orthographicCamera",c({left:u.width/-2,right:u.width/2,top:u.height/2,bottom:u.height/-2,ref:Ef([l,e])},i),n)}));Nf({TextMeshImpl:lp.Text});const wp=new Yt.Vector3,Ep=new Yt.Vector3,Sp=new Yt.Vector3;function Tp(t,e,n){const r=wp.setFromMatrixPosition(t.matrixWorld);r.project(e);const i=n.width/2,o=n.height/2;return[r.x*i+i,-r.y*o+o]}const Ap=o.forwardRef(((t,e)=>{var n;let{children:r,eps:i=.001,style:s,className:u,prepend:l,center:h,fullscreen:f,portal:p,scaleFactor:d,zIndexRange:m=[16777271,0]}=t,v=j(t,["children","eps","style","className","prepend","center","fullscreen","portal","scaleFactor","zIndexRange"]);const{gl:g,scene:y,camera:b,size:_}=$f(),[x]=(0,o.useState)((()=>document.createElement("div"))),w=(0,o.useRef)(null),E=(0,o.useRef)([0,0]),S=null!=(n=null==p?void 0:p.current)?n:g.domElement.parentNode;(0,o.useEffect)((()=>{if(w.current){y.updateMatrixWorld();const t=Tp(w.current,b,_);return x.style.cssText="position:absolute;top:0;left:0;transform:translate3d("+t[0]+"px,"+t[1]+"px,0);transform-origin:0 0;",S&&(l?S.prepend(x):S.appendChild(x)),()=>{S&&S.removeChild(x),a.unmountComponentAtNode(x)}}}),[S]);const T=(0,o.useMemo)((()=>c({position:"absolute",transform:h?"translate3d(-50%,-50%,0)":"none"},f&&{top:-_.height/2,left:-_.width/2,width:_.width,height:_.height},s)),[s,h,f,_]);return(0,o.useEffect)((()=>{a.render(o.createElement("div",{ref:e,style:T,className:u,children:r}),x)})),Kf((()=>{if(w.current){const t=Tp(w.current,b,_);if(Math.abs(E.current[0]-t[0])>i||Math.abs(E.current[1]-t[1])>i){x.style.display=function(t,e){const n=wp.setFromMatrixPosition(t.matrixWorld),r=Ep.setFromMatrixPosition(e.matrixWorld),i=n.sub(r),o=e.getWorldDirection(Sp);return i.angleTo(o)>Math.PI/2}(w.current,b)?"none":"block";const e=void 0===d?1:function(t,e){if(e instanceof Yt.PerspectiveCamera){const n=wp.setFromMatrixPosition(t.matrixWorld),r=Ep.setFromMatrixPosition(e.matrixWorld),i=e.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}return e instanceof Yt.OrthographicCamera?e.zoom:1}(w.current,b)*d;x.style.transform="translate3d("+t[0]+"px,"+t[1]+"px,0) scale("+e+")",x.style.zIndex=""+function(t,e,n){if(e instanceof Yt.PerspectiveCamera||e instanceof Yt.OrthographicCamera){const r=wp.setFromMatrixPosition(t.matrixWorld),i=Ep.setFromMatrixPosition(e.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(e.far-e.near),s=n[1]-a*e.far;return Math.round(a*o+s)}}(w.current,b,m)}E.current=t}})),o.createElement("group",c({},v,{ref:w}))}));class Mp extends Yt.MeshStandardMaterial{constructor(t){super(t),cp(this,"_time",void 0),cp(this,"_factor",void 0),this.setValues(t),this._time={value:0},this._factor={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.factor=this._factor,t.vertexShader="\n      uniform float time;\n      uniform float factor;\n      "+t.vertexShader+"\n    ",t.vertexShader=t.vertexShader.replace("#include <begin_vertex>","float theta = sin( time + position.y ) / 2.0 * factor;\n        float c = cos( theta );\n        float s = sin( theta );\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\n        vec3 transformed = vec3( position ) * m;\n        vNormal = vNormal * m;")}get time(){return this._time.value}set time(t){this._time.value=t}get factor(){return this._factor.value}set factor(t){this._factor.value=t}}Nf({WobbleMaterialImpl:Mp});class Cp extends Yt.MeshPhysicalMaterial{constructor(t){super(t),cp(this,"_time",void 0),cp(this,"_distort",void 0),cp(this,"_radius",void 0),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader="\n      uniform float time;\n      uniform float radius;\n      uniform float distort;\n      #define GLSLIFY 1\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\n      "+t.vertexShader+"\n    ",t.vertexShader=t.vertexShader.replace("#include <begin_vertex>","\n        float updateTime = time / 50.0;\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\n        ")}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}Nf({DistortMaterialImpl:Cp}),Nf({SkyImpl:hp}),Nf({ReflectorImpl:fp}),Nf({Line2:bp,LineGeometry:vp,LineMaterial:gp});class Op extends Yt.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(mvPosition.x + 2.0 * time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:"uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n      }"})}}function Pp(t){const e=t+"BufferGeometry";return(0,o.forwardRef)(((t,n)=>{let{args:r,children:i}=t,a=j(t,["args","children"]);return o.createElement("mesh",c({ref:n},a),o.createElement(e,{attach:"geometry",args:r}),i)}))}Nf({StarfieldMaterial:Op}),new Yt.Matrix4,new Yt.Ray,new Yt.Sphere,new Yt.Vector3,Pp("box"),Pp("circle"),Pp("cone"),Pp("cylinder");const kp=Pp("sphere");Pp("plane"),Pp("tube"),Pp("torus"),Pp("torusKnot"),Pp("tetrahedron"),Pp("ring"),Pp("polyhedron"),Pp("icosahedron"),Pp("octahedron"),Pp("dodecahedron"),Pp("extrude"),Pp("lathe"),Pp("parametric");var Ip=function(t,e){var n,r,i,o,a;void 0===e&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=t,this.domElement=e,this.enabled=!0,this.target=new Yt.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:Yt.MOUSE.ROTATE,MIDDLE:Yt.MOUSE.DOLLY,RIGHT:Yt.MOUSE.PAN},this.touches={ONE:Yt.TOUCH.ROTATE,TWO:Yt.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return d.phi},this.getAzimuthalAngle=function(){return d.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(u),s.update(),f=h.NONE},this.update=(n=new Yt.Vector3,r=(new Yt.Quaternion).setFromUnitVectors(t.up,new Yt.Vector3(0,1,0)),i=r.clone().inverse(),o=new Yt.Vector3,a=new Yt.Quaternion,function(){var t=s.object.position;return n.copy(t).sub(s.target),n.applyQuaternion(r),d.setFromVector3(n),s.autoRotate&&f===h.NONE&&O(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(d.theta+=m.theta*s.dampingFactor,d.phi+=m.phi*s.dampingFactor):(d.theta+=m.theta,d.phi+=m.phi),d.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,d.theta)),d.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,d.phi)),d.makeSafe(),d.radius*=v,d.radius=Math.max(s.minDistance,Math.min(s.maxDistance,d.radius)),!0===s.enableDamping?s.target.addScaledVector(g,s.dampingFactor):s.target.add(g),n.setFromSpherical(d),n.applyQuaternion(i),t.copy(s.target).add(n),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,g.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),g.set(0,0,0)),v=1,!!(y||o.distanceToSquared(s.object.position)>p||8*(1-a.dot(s.object.quaternion))>p)&&(s.dispatchEvent(u),o.copy(s.object.position),a.copy(s.object.quaternion),y=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",J,!1),s.domElement.removeEventListener("mousedown",W,!1),s.domElement.removeEventListener("wheel",Y,!1),s.domElement.removeEventListener("touchstart",Z,!1),s.domElement.removeEventListener("touchend",$,!1),s.domElement.removeEventListener("touchmove",K,!1),document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),s.domElement.removeEventListener("keydown",Q,!1)};var s=this,u={type:"change"},l={type:"start"},c={type:"end"},h={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=h.NONE,p=1e-6,d=new Yt.Spherical,m=new Yt.Spherical,v=1,g=new Yt.Vector3,y=!1,b=new Yt.Vector2,_=new Yt.Vector2,x=new Yt.Vector2,w=new Yt.Vector2,E=new Yt.Vector2,S=new Yt.Vector2,T=new Yt.Vector2,A=new Yt.Vector2,M=new Yt.Vector2;function C(){return Math.pow(.95,s.zoomSpeed)}function O(t){m.theta-=t}function P(t){m.phi-=t}var k,I=(k=new Yt.Vector3,function(t,e){k.setFromMatrixColumn(e,0),k.multiplyScalar(-t),g.add(k)}),L=function(){var t=new Yt.Vector3;return function(e,n){!0===s.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(s.object.up,t)),t.multiplyScalar(e),g.add(t)}}(),R=function(){var t=new Yt.Vector3;return function(e,n){var r=s.domElement;if(s.object.isPerspectiveCamera){var i=s.object.position;t.copy(i).sub(s.target);var o=t.length();o*=Math.tan(s.object.fov/2*Math.PI/180),I(2*e*o/r.clientHeight,s.object.matrix),L(2*n*o/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(I(e*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),L(n*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function D(t){s.object.isPerspectiveCamera?v/=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*t)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function N(t){s.object.isPerspectiveCamera?v*=t:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/t)),s.object.updateProjectionMatrix(),y=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function F(t){b.set(t.clientX,t.clientY)}function j(t){w.set(t.clientX,t.clientY)}function U(t){if(1==t.touches.length)b.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);b.set(e,n)}}function z(t){if(1==t.touches.length)w.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);w.set(e,n)}}function B(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);T.set(0,r)}function V(t){if(1==t.touches.length)_.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);_.set(e,n)}x.subVectors(_,b).multiplyScalar(s.rotateSpeed);var r=s.domElement;O(2*Math.PI*x.x/r.clientHeight),P(2*Math.PI*x.y/r.clientHeight),b.copy(_)}function H(t){if(1==t.touches.length)E.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);E.set(e,n)}S.subVectors(E,w).multiplyScalar(s.panSpeed),R(S.x,S.y),w.copy(E)}function G(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);A.set(0,r),M.set(0,Math.pow(A.y/T.y,s.zoomSpeed)),D(M.y),T.copy(A)}function W(t){if(!1!==s.enabled){var e;switch(t.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),t.button){case 0:e=s.mouseButtons.LEFT;break;case 1:e=s.mouseButtons.MIDDLE;break;case 2:e=s.mouseButtons.RIGHT;break;default:e=-1}switch(e){case Yt.MOUSE.DOLLY:if(!1===s.enableZoom)return;!function(t){T.set(t.clientX,t.clientY)}(t),f=h.DOLLY;break;case Yt.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enablePan)return;j(t),f=h.PAN}else{if(!1===s.enableRotate)return;F(t),f=h.ROTATE}break;case Yt.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===s.enableRotate)return;F(t),f=h.ROTATE}else{if(!1===s.enablePan)return;j(t),f=h.PAN}break;default:f=h.NONE}f!==h.NONE&&(document.addEventListener("mousemove",q,!1),document.addEventListener("mouseup",X,!1),s.dispatchEvent(l))}}function q(t){if(!1!==s.enabled)switch(t.preventDefault(),f){case h.ROTATE:if(!1===s.enableRotate)return;!function(t){_.set(t.clientX,t.clientY),x.subVectors(_,b).multiplyScalar(s.rotateSpeed);var e=s.domElement;O(2*Math.PI*x.x/e.clientHeight),P(2*Math.PI*x.y/e.clientHeight),b.copy(_),s.update()}(t);break;case h.DOLLY:if(!1===s.enableZoom)return;!function(t){A.set(t.clientX,t.clientY),M.subVectors(A,T),M.y>0?D(C()):M.y<0&&N(C()),T.copy(A),s.update()}(t);break;case h.PAN:if(!1===s.enablePan)return;!function(t){E.set(t.clientX,t.clientY),S.subVectors(E,w).multiplyScalar(s.panSpeed),R(S.x,S.y),w.copy(E),s.update()}(t)}}function X(t){!1!==s.enabled&&(document.removeEventListener("mousemove",q,!1),document.removeEventListener("mouseup",X,!1),s.dispatchEvent(c),f=h.NONE)}function Y(t){!1===s.enabled||!1===s.enableZoom||f!==h.NONE&&f!==h.ROTATE||(t.preventDefault(),t.stopPropagation(),s.dispatchEvent(l),function(t){t.deltaY<0?N(C()):t.deltaY>0&&D(C()),s.update()}(t),s.dispatchEvent(c))}function Q(t){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(t){var e=!1;switch(t.keyCode){case s.keys.UP:R(0,s.keyPanSpeed),e=!0;break;case s.keys.BOTTOM:R(0,-s.keyPanSpeed),e=!0;break;case s.keys.LEFT:R(s.keyPanSpeed,0),e=!0;break;case s.keys.RIGHT:R(-s.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),s.update())}(t)}function Z(t){if(!1!==s.enabled){switch(t.touches.length){case 1:switch(s.touches.ONE){case Yt.TOUCH.ROTATE:if(!1===s.enableRotate)return;U(t),f=h.TOUCH_ROTATE;break;case Yt.TOUCH.PAN:if(!1===s.enablePan)return;z(t),f=h.TOUCH_PAN;break;default:f=h.NONE}break;case 2:switch(s.touches.TWO){case Yt.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(t){s.enableZoom&&B(t),s.enablePan&&z(t)}(t),f=h.TOUCH_DOLLY_PAN;break;case Yt.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(t){s.enableZoom&&B(t),s.enableRotate&&U(t)}(t),f=h.TOUCH_DOLLY_ROTATE;break;default:f=h.NONE}break;default:f=h.NONE}f!==h.NONE&&s.dispatchEvent(l)}}function K(t){if(!1!==s.enabled)switch(t.preventDefault(),t.stopPropagation(),f){case h.TOUCH_ROTATE:if(!1===s.enableRotate)return;V(t),s.update();break;case h.TOUCH_PAN:if(!1===s.enablePan)return;H(t),s.update();break;case h.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(t){s.enableZoom&&G(t),s.enablePan&&H(t)}(t),s.update();break;case h.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(t){s.enableZoom&&G(t),s.enableRotate&&V(t)}(t),s.update();break;default:f=h.NONE}}function $(t){!1!==s.enabled&&(s.dispatchEvent(c),f=h.NONE)}function J(t){!1!==s.enabled&&t.preventDefault()}s.domElement.addEventListener("contextmenu",J,!1),s.domElement.addEventListener("mousedown",W,!1),s.domElement.addEventListener("wheel",Y,!1),s.domElement.addEventListener("touchstart",Z,!1),s.domElement.addEventListener("touchend",$,!1),s.domElement.addEventListener("touchmove",K,!1),s.domElement.addEventListener("keydown",Q,!1),-1===s.domElement.tabIndex&&(s.domElement.tabIndex=0),this.update()};(Ip.prototype=Object.create(Yt.EventDispatcher.prototype)).constructor=Ip;var Lp=function(t,e){Ip.call(this,t,e),this.mouseButtons.LEFT=Yt.MOUSE.PAN,this.mouseButtons.RIGHT=Yt.MOUSE.ROTATE,this.touches.ONE=Yt.TOUCH.PAN,this.touches.TWO=Yt.TOUCH.DOLLY_ROTATE};(Lp.prototype=Object.create(Yt.EventDispatcher.prototype)).constructor=Lp;var Rp=n(3431),Dp=n(8784),Np=n.n(Dp);function Fp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var jp=function(t,e,n){if(t.current){var r;t.current.textContent=e,(r=t.current).spellcheck=!1,r.focus(),r.blur();var i=function(r){"Enter"===r.key&&(r.preventDefault(),n&&n(t.current.textContent),t.current.blur()),"Escape"===r.key&&(t.current.textContent=e,t.current.blur())},o=function(e){n&&e.relatedTarget&&n(t.current.textContent)};return t.current.addEventListener("keydown",i),t.current.addEventListener("blur",o),{keydown:i,bluer:o}}},Up=function(t,e){return function(){t.current&&e&&Object.entries(e).map((function(e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Fp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fp(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(e,2),r=n[0],i=n[1];t.current.removeEventListener(r,i)}))}};function zp(t){var e=(0,o.useRef)();return(0,o.useEffect)((function(){e.current=t})),e.current}var Bp=n(3159);const Vp=function(t){return o.createElement("lineSegments",null,o.createElement("edgesGeometry",{attach:"geometry",args:[t.geometry]}),o.createElement("lineBasicMaterial",{color:t.color,attach:"material"}))};var Hp=n(1290),Gp=n.n(Hp);function Wp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qp(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qp(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(42);var Xp={toggleStep:function(t,e,n,r){return{type:De,payload:{isOn:t,layerIndex:e,stepIndex:n,user:r}}},setStepVelocity:function(t,e,n,r){return{type:Ne,payload:{velocity:t,layerIndex:e,stepIndex:n,user:r}}},setStepProbability:function(t,e,n,r){return{type:Fe,payload:{probability:t,layerIndex:e,stepIndex:n,user:r}}},setStepNote:function(t,e,n,r){return{type:je,payload:{note:t,layerIndex:e,stepIndex:n,user:r}}}};const Yp=(0,Rp.Z)(qt((function(t){return{editingMode:t.editingMode,user:t.user}}),Xp),o.memo)((function(t){var e=t.editable,n=t.user,r=t.color,i=t.step,a=t.position,s=t.editingMode,u=t.toggleStep,l=t.setStepVelocity,c=t.setStepProbability,h=t.setStepNote,f=t.layerIndex,p=t.stepIndex,d=t.activeLayerHelper,m=(0,o.useRef)(),v=!1,g=$t.Geometry.EdgeLength,y=[g,g,g],b=(0,o.useRef)(),_=(0,o.useRef)(),x=zp(i),w=$t.Geometry.MinScale,E=$t.Geometry.MaxScale,S=(0,o.useMemo)((function(){return Yt.MathUtils.mapLinear(i.velocity,0,1,w,E)}),[i.velocity]),T=(0,o.useMemo)((function(){return Yt.MathUtils.mapLinear(i.probability,0,1,0,1)}),[i.probability]),A=Wp((0,o.useState)(!1),2),M=A[0],C=A[1],O=Wp((0,o.useState)(!1),2),P=O[0],k=O[1],I=Wp((0,o.useState)(""),2),L=I[0],R=I[1],D=Wp((0,o.useState)([S,S,S]),2),N=D[0],F=D[1],j=Wp((0,o.useState)(T),2),U=j[0],z=j[1],B=Wp((0,o.useState)(!1),2),V=B[0],H=B[1],G=(0,o.useMemo)((function(){return r?new Yt.Color(r):void 0}),[r]),W=(0,o.useCallback)((function(t){t.stopPropagation(),"steps"!==s||P||u(!i.isOn,f,p,n.id),("notes"===s||P)&&_.current.focus()}),[s,i.isOn,f,p,_.current,P]);Kf((function(t,e){var n=d.steps[i.id].update(e).activePercent,r=(G||Qt.on).clone().lerp(Qt.active,n);b.current.material.color.copy(r),b.current.material.transparent=!0}));var q=function(t){var e=t.toUpperCase();_.current.textContent=e,h(e,f,p,n.id),k(!1),d.steps[i.id].setNote(t)};(0,o.useEffect)((function(){var t=jp(_,i.note,q);return Up(_,t)}),[_.current,i.note]),(0,o.useEffect)((function(){m.current?Dp.isEmpty((0,Bp.diff)(x,i))||console.log("componentDidUpdate"):(console.log("componentDidMount"),m.current=!0)})),(0,o.useEffect)((function(){var t=Yt.MathUtils.mapLinear(i.velocity,0,1,w,E);F([t,t,t]),d.steps[i.id]&&d.steps[i.id].setVelocity(i.velocity)}),[i.velocity]),(0,o.useEffect)((function(){var t=Yt.MathUtils.mapLinear(i.probability,0,1,0,1);z(t),d.steps[i.id]&&d.steps[i.id].setProbability(i.probability)}),[i.probability]),(0,o.useEffect)((function(){var t=function(){document.getElementsByTagName("body")[0].style.pointerEvents="auto",C(!1),R("")};return document.addEventListener("pointerup",t),function(){document.removeEventListener("pointerup",t)}}),[]),(0,o.useEffect)((function(){function t(t){"Shift"===t.key&&k(!0)}function e(t){"Shift"===t.key&&_.current!==document.activeElement&&k(!1)}return document.addEventListener("keydown",t),document.addEventListener("keyup",e),function(){document.removeEventListener("keydown",t),document.removeEventListener("keyup",e)}}),[]),(0,o.useEffect)((function(){return d.addStep(i),function(){d.removeStep(i.id)}}),[]),(0,o.useEffect)((function(){d.toggleStep(i.id,i.isOn)}),[i.isOn]);var X=(0,o.useCallback)((function(){H(!0)}),[]),Y=(0,o.useCallback)((function(){H(!1)}),[]),Q=(0,o.useCallback)((function(){C(!0)}),[]);(0,o.useEffect)((function(){var t=function(t){if(M&&(0!=t.movementY||0!=t.movementX))if(document.getElementsByTagName("body")[0].style.pointerEvents="none","probability"===L){var e=U;t.movementX<0&&U>0&&(e=U-.1*re),t.movementX>0&&U<1&&(e=U+.1*re);var r=+Yt.MathUtils.mapLinear(e,0,1,0,1).toFixed(1);if(r!=i.probability){if(v)return;c(r,f,p,n.id),d.steps[i.id].setProbability(i.probability),v=!0,setTimeout((function(){v=!1}),50)}z(e)}else if("velocity"===L){var o=N;t.movementY>0&&N[0]>w&&(o=N.map((function(t){return t-.1*ne}))),t.movementY<0&&N[0]<E&&(o=N.map((function(t){return t+.1*ne})));var a=+Yt.MathUtils.mapLinear(o[0],w,E,0,1).toFixed(1);if(a!=i.velocity){if(v)return;l(a,f,p,n.id),d.steps[i.id].setVelocity(i.velocity),v=!0,setTimeout((function(){v=!1}),50)}F(o)}else{var s=Math.abs(t.movementX)>0?"probability":"velocity";R(s)}};return document.addEventListener("pointermove",t),function(){document.removeEventListener("pointermove",t)}}),[M,U,N,L]);var Z=(0,o.useMemo)((function(){return new Yt.BoxBufferGeometry(y)}),[]);return o.createElement(o.Fragment,null,o.createElement("mesh",{ref:b,position:a,scale:N,onClick:e?W:null,onPointerDown:e?Q:null,onPointerEnter:X,onPointerLeave:Y},o.createElement("boxBufferGeometry",{attach:"geometry",args:y}),o.createElement("meshStandardMaterial",{attach:"material",color:r||$t.Geometry.FillColor,opacity:i.isOn?U:0,transparent:!i.isOn}),o.createElement(Ap,{zIndexRange:[1e3,100]},(V||M)&&o.createElement("div",{className:Gp().beatParameters},"Velocity: ",i.velocity,o.createElement("br",null),"Probability: ",i.probability))),o.createElement("mesh",{position:a,scale:N},o.createElement(Vp,{geometry:b.current?b.current.geometry:Z,color:r||$t.Geometry.EdgeColor})))})),Qp=function(t){var e,n,i=t.instrument,a=t.active,s=t.steps,u=(e=s,n=(0,o.useRef)(),(0,o.useEffect)((function(){n.current=e})),n.current),l=function(t,e){var n=a.steps[e.step.id];a.layerIsActive&&n&&n.isOn&&n.probability>=Math.random()&&(function(t,e,n){try{"Sampler"===a.instrument.instrument?a.instrument.triggerAttack(t,e,n):a.instrument.triggerAttackRelease(t,i.noteLength,e,n)}catch(t){console.error(t)}}(n.note,t,n.velocity),Ch.schedule((function(){return n.setAsActive()}),t))},c=function(t){var e="".concat(t.length,"n");return t.map((function(t,n){return{time:0===n?0:function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n),step:t}}))},h=(0,o.useMemo)((function(){var t=new ec(l,c(s));return t.loop=!0,t.start(0),t}),[]);(0,o.useEffect)((function(){Np().isNil(a.instrument)||(Np().isNil(a.instrument.releaseAll)?a.instrument.triggerRelease():a.instrument.releaseAll());var t="Sampler"===i.instrument?{C4:"some sample"}:{},e=new du(i.gain),n=new r[i.instrument](t).chain(e,Sh);a.setNewInstrument(n),a.setInstrumentGain(e)}),[i.instrument,i.sampler,i.sample]);var f=function(t){h.clear(),c(t).map((function(t){h.add(t)}))};return(0,o.useEffect)((function(){u&&(s.length>u.length||s.length<u.length?f(s):s.find((function(t){return u[0].id===t.id}))||f(s))}),[s]),(0,o.useEffect)((function(){a.changeGainValue(i.gain)}),[i.gain]),(0,o.useEffect)((function(){return function(){a.instrument.dispose(),h.dispose()}}),[]),null};var Zp=n(7335),Kp=n.n(Zp);n(42);const $p=function(t){var e=t.editable,n=t.onStepsChange,r=t.position,i=t.rotation,a=t.numberOfBeats,s=t.color,u=[Kt.Mark.Length,.1,.1],l=(0,o.useRef)(),c=(0,o.useRef)();return(0,o.useEffect)((function(){var t=jp(c,a,n);return Up(c,t)}),[c.current,a,n]),o.createElement("mesh",{ref:l,position:r,rotation:i},o.createElement("boxBufferGeometry",{attach:"geometry",args:u}),o.createElement("meshStandardMaterial",{attach:"material",color:s||Kt.Mark.Color}),o.createElement(Ap,{zIndexRange:[1e3,100],className:e?"":Kp().cannotEdit,center:!0},o.createElement("div",{ref:c,onClick:function(){c.current.textContent=""},className:Kp().numberOfBeats,contentEditable:!0})))};var Jp,td,ed,nd={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};function rd(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(rd.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),rd.FullScreenQuad=(Jp=new Yt.OrthographicCamera(-1,1,1,-1,0,1),td=new Yt.PlaneBufferGeometry(2,2),ed=function(t){this._mesh=new Yt.Mesh(td,t)},Object.defineProperty(ed.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(ed.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(t){t.render(this._mesh,Jp)}}),ed);var id=function(t,e){rd.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof Yt.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=Yt.UniformsUtils.clone(t.uniforms),this.material=new Yt.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new rd.FullScreenQuad(this.material)};id.prototype=Object.assign(Object.create(rd.prototype),{constructor:id,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}});var od=function(t,e){rd.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};od.prototype=Object.assign(Object.create(rd.prototype),{constructor:od,render:function(t,e,n){var r,i,o=t.getContext(),a=t.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var ad=function(){rd.call(this),this.needsSwap=!1};ad.prototype=Object.create(rd.prototype),Object.assign(ad.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}});var sd=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:Yt.LinearFilter,magFilter:Yt.LinearFilter,format:Yt.RGBAFormat,stencilBuffer:!1},r=t.getSize(new Yt.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=r.width,this._height=r.height,(e=new Yt.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===nd&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===id&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new id(nd),this.clock=new Yt.Clock};Object.assign(sd.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,r=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(e=this.passes[n]).enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,i),e.needsSwap){if(i){var a=this.renderer.getContext(),s=this.renderer.state.buffers.stencil;s.setFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),s.setFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==od&&(e instanceof od?i=!0:e instanceof ad&&(i=!1))}this.renderer.setRenderTarget(r)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new Yt.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var ud=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(ud.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),ud.FullScreenQuad=function(){var t=new Yt.OrthographicCamera(-1,1,1,-1,0,1),e=new Yt.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new Yt.Mesh(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}();var ld=function(t,e,n,r,i){rd.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};ld.prototype=Object.assign(Object.create(rd.prototype),{constructor:ld,render:function(t,e,n){var r,i,o,a=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=t.getClearColor().getHex(),i=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(r,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=a}});var cd={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new Yt.Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")},hd=function(t,e,n,r){rd.call(this),this.strength=void 0!==e?e:1,this.radius=n,this.threshold=r,this.resolution=void 0!==t?new Yt.Vector2(t.x,t.y):new Yt.Vector2(256,256),this.clearColor=new Yt.Color(0,0,0);var i={minFilter:Yt.LinearFilter,magFilter:Yt.LinearFilter,format:Yt.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2);this.renderTargetBright=new Yt.WebGLRenderTarget(o,a,i),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var u=new Yt.WebGLRenderTarget(o,a,i);u.texture.name="UnrealBloomPass.h"+s,u.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(u);var l=new Yt.WebGLRenderTarget(o,a,i);l.texture.name="UnrealBloomPass.v"+s,l.texture.generateMipmaps=!1,this.renderTargetsVertical.push(l),o=Math.round(o/2),a=Math.round(a/2)}void 0===cd&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var c=cd;this.highPassUniforms=Yt.UniformsUtils.clone(c.uniforms),this.highPassUniforms.luminosityThreshold.value=r,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Yt.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var h=[3,5,7,9,11];for(o=Math.round(this.resolution.x/2),a=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new Yt.Vector2(o,a),o=Math.round(o/2),a=Math.round(a/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=e,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0,this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Yt.Vector3(1,1,1),new Yt.Vector3(1,1,1),new Yt.Vector3(1,1,1),new Yt.Vector3(1,1,1),new Yt.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===nd&&console.error("UnrealBloomPass relies on CopyShader");var f=nd;this.copyUniforms=Yt.UniformsUtils.clone(f.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Yt.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,blending:Yt.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Yt.Color,this.oldClearAlpha=1,this.basic=new Yt.MeshBasicMaterial,this.fsQuad=new rd.FullScreenQuad(null)};function fd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return pd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pd(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}hd.prototype=Object.assign(Object.create(rd.prototype),{constructor:hd,dispose:function(){for(var t=0;t<this.renderTargetsHorizontal.length;t++)this.renderTargetsHorizontal[t].dispose();for(t=0;t<this.renderTargetsVertical.length;t++)this.renderTargetsVertical[t].dispose();this.renderTargetBright.dispose()},setSize:function(t,e){var n=Math.round(t/2),r=Math.round(e/2);this.renderTargetBright.setSize(n,r);for(var i=0;i<this.nMips;i++)this.renderTargetsHorizontal[i].setSize(n,r),this.renderTargetsVertical[i].setSize(n,r),this.separableBlurMaterials[i].uniforms.texSize.value=new Yt.Vector2(n,r),n=Math.round(n/2),r=Math.round(r/2)},render:function(t,e,n,r,i){this.oldClearColor.copy(t.getClearColor()),this.oldClearAlpha=t.getClearAlpha();var o=t.autoClear;t.autoClear=!1,t.setClearColor(this.clearColor,0),i&&t.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,t.setRenderTarget(null),t.clear(),this.fsQuad.render(t)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,t.setRenderTarget(this.renderTargetBright),t.clear(),this.fsQuad.render(t);for(var a=this.renderTargetBright,s=0;s<this.nMips;s++)this.fsQuad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[s].uniforms.direction.value=hd.BlurDirectionX,t.setRenderTarget(this.renderTargetsHorizontal[s]),t.clear(),this.fsQuad.render(t),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=hd.BlurDirectionY,t.setRenderTarget(this.renderTargetsVertical[s]),t.clear(),this.fsQuad.render(t),a=this.renderTargetsVertical[s];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,t.setRenderTarget(this.renderTargetsHorizontal[0]),t.clear(),this.fsQuad.render(t),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&t.state.buffers.stencil.setTest(!0),this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(n),this.fsQuad.render(t)),t.setClearColor(this.oldClearColor,this.oldClearAlpha),t.autoClear=o},getSeperableBlurMaterial:function(t){return new Yt.ShaderMaterial({defines:{KERNEL_RADIUS:t,SIGMA:t},uniforms:{colorTexture:{value:null},texSize:{value:new Yt.Vector2(.5,.5)},direction:{value:new Yt.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(t){return new Yt.ShaderMaterial({defines:{NUM_MIPS:t},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),hd.BlurDirectionX=new Yt.Vector2(1,0),hd.BlurDirectionY=new Yt.Vector2(0,1),new Yt.Vector2(1/1024,1/512),["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n"),Nf({EffectComposer:sd,ShaderPass:id,RenderPass:ld,UnrealBloomPass:hd}),n(3741);var dd=!1;document.addEventListener("keydown",(function(t){"Shift"===t.key&&(dd=!0)}),!1),document.addEventListener("keyup",(function(t){"Shift"===t.key&&(dd=!1)}),!1);const md=qt((function(t){return{user:t.user}}),{toggleLayer:function(t,e,n){return{type:Ue,payload:{isActive:t,layerIndex:e,user:n}}},updateLayerInstrument:dn})((function(t){var e=t.user,n=t.editable,r=t.radius,i=t.layer,a=t.layerIndex,s=t.onCopyHandler,u=t.onPasteHandler,l=t.selectLayer,c=t.deselectLayer,h=t.selected,f=t.deleteLayer,p=t.updateLayerInstrument,d=t.toggleLayer,m=Kt.Line.MinThickness,v=Kt.Line.MaxThickness,g=(0,o.useMemo)((function(){return Yt.MathUtils.mapLinear(i.instrument.gain,0,1,m,v)}),[i.instrument.gain]),y=fd((0,o.useState)([r,g,2,64]),2),b=y[0],_=y[1],x=(0,o.useMemo)((function(){return[r,2*v,2,64]}),[r]),w=fd((0,o.useState)(!1),2),E=w[0],S=w[1],T=(0,o.useRef)();(0,o.useEffect)((function(){var t=function(){h==i.id&&(console.log("copy"),s(i))},e=function(){h==i.id&&(console.log("paste"),u(i))};return document.addEventListener("copy",t),document.addEventListener("paste",e),function(){document.removeEventListener("copy",t),document.removeEventListener("paste",e)}}),[h]),(0,o.useEffect)((function(){var t=function(){S(!1)};return document.addEventListener("pointerup",t),function(){document.removeEventListener("pointerup",t)}}),[]);var A=(0,o.useMemo)((function(){return new Yt.TorusBufferGeometry(b)}));(0,o.useEffect)((function(){var t=function(t){if(E){var n=T.current.geometry.parameters.tube,o=Yt.MathUtils.mapLinear(n,m,v,0,1);if(o!=i.instrument.gain&&p(a,{gain:o},e.id),t.movementY<0&&n<v){var s=+(n+.001*ie).toFixed(3);_([r,s,2,64])}else if(t.movementY>0&&n>m){var u=+(n-.001*ie).toFixed(3);_([r,u,2,64])}}};return document.addEventListener("pointermove",t),function(){document.removeEventListener("pointermove",t)}}),[E]),(0,o.useEffect)((function(){_([r,g,2,64])}),[r,i.instrument.gain]);var M=(0,o.useCallback)((function(){h?c():l(i.id),S(!0)}),[i,h]),C=(0,o.useCallback)((function(){dd?f(a):d(!i.isActive,a,e.id)}),[dd,a,i.isActive]);return o.createElement(o.Fragment,null,o.createElement("mesh",{ref:T},o.createElement("torusBufferGeometry",{attach:"geometry",args:b}),o.createElement("meshStandardMaterial",{attach:"material",color:h==i.id?Kt.Color.Selected:i.color||Kt.Color.Deselected,opacity:i.isActive?1:0,transparent:!i.isActive}),o.createElement("mesh",{onPointerDown:n?M:null,onDoubleClick:n?C:null},o.createElement("torusBufferGeometry",{attach:"geometry",args:x}),o.createElement("meshStandardMaterial",{attach:"material",opacity:0,transparent:!0}))),!i.isActive&&o.createElement("mesh",null,o.createElement("lineSegments",null,o.createElement("edgesGeometry",{attach:"geometry",args:[T.current?T.current.geometry:A]}),o.createElement("lineBasicMaterial",{color:h==i.id?Kt.Color.Selected:i.color||Kt.Color.Deselected,attach:"material"}))))}));var vd=n(8586),gd=n.n(vd),yd=n(42);const bd=function(t){var e=t.isOpen,n=t.onModalClose,r=t.allowCloseByClickOutside,i=void 0===r||r,a=t.children;return o.createElement("div",{className:yd(gd().modal,e?gd().open:gd().closed),onClick:i?n:null,key:"instrument-modal"},o.createElement("div",{key:"modal-background",onClick:function(t){t.stopPropagation()},className:gd().modalContent},a,o.createElement("span",{key:"close",className:gd().close,onClick:n},"×")))};var _d=n(1065),xd=n.n(_d);const wd={bdLong01:n.p+"samples/Bass Drum [BD]/E808_BD[long]-01.wav",bdLong02:n.p+"samples/Bass Drum [BD]/E808_BD[long]-02.wav",bdLong03:n.p+"samples/Bass Drum [BD]/E808_BD[long]-03.wav",bdLong04:n.p+"samples/Bass Drum [BD]/E808_BD[long]-04.wav",bdLong05:n.p+"samples/Bass Drum [BD]/E808_BD[long]-05.wav",bdLong06:n.p+"samples/Bass Drum [BD]/E808_BD[long]-06.wav",bdLong07:n.p+"samples/Bass Drum [BD]/E808_BD[long]-07.wav",bdLong08:n.p+"samples/Bass Drum [BD]/E808_BD[long]-08.wav",bdLong09:n.p+"samples/Bass Drum [BD]/E808_BD[long]-09.wav",bdLong10:n.p+"samples/Bass Drum [BD]/E808_BD[long]-10.wav",bdLong11:n.p+"samples/Bass Drum [BD]/E808_BD[long]-11.wav",bdLong12:n.p+"samples/Bass Drum [BD]/E808_BD[long]-12.wav",bdLong13:n.p+"samples/Bass Drum [BD]/E808_BD[long]-13.wav",bdLong14:n.p+"samples/Bass Drum [BD]/E808_BD[long]-14.wav",bdLong15:n.p+"samples/Bass Drum [BD]/E808_BD[long]-15.wav",bdLong16:n.p+"samples/Bass Drum [BD]/E808_BD[long]-16.wav",bdLong17:n.p+"samples/Bass Drum [BD]/E808_BD[long]-17.wav",bdShort01:n.p+"samples/Bass Drum [BD]/E808_BD[short]-01.wav",bdShort02:n.p+"samples/Bass Drum [BD]/E808_BD[short]-02.wav",bdShort03:n.p+"samples/Bass Drum [BD]/E808_BD[short]-03.wav",bdShort04:n.p+"samples/Bass Drum [BD]/E808_BD[short]-04.wav",bdShort05:n.p+"samples/Bass Drum [BD]/E808_BD[short]-05.wav",bdShort06:n.p+"samples/Bass Drum [BD]/E808_BD[short]-06.wav",bdShort07:n.p+"samples/Bass Drum [BD]/E808_BD[short]-07.wav",bdShort08:n.p+"samples/Bass Drum [BD]/E808_BD[short]-08.wav",bdShort09:n.p+"samples/Bass Drum [BD]/E808_BD[short]-09.wav",bdShort10:n.p+"samples/Bass Drum [BD]/E808_BD[short]-10.wav",bdShort11:n.p+"samples/Bass Drum [BD]/E808_BD[short]-11.wav",bdShort12:n.p+"samples/Bass Drum [BD]/E808_BD[short]-12.wav"},Ed={cp01:n.p+"samples/Clap [CP]/E808_CP-01.wav",cp02:n.p+"samples/Clap [CP]/E808_CP-02.wav",cp03:n.p+"samples/Clap [CP]/E808_CP-03.wav",cp04:n.p+"samples/Clap [CP]/E808_CP-04.wav",cp05:n.p+"samples/Clap [CP]/E808_CP-05.wav",cp06:n.p+"samples/Clap [CP]/E808_CP-06.wav",cp07:n.p+"samples/Clap [CP]/E808_CP-07.wav",cp08:n.p+"samples/Clap [CP]/E808_CP-08.wav",cp09:n.p+"samples/Clap [CP]/E808_CP-09.wav",cp10:n.p+"samples/Clap [CP]/E808_CP-10.wav",cp11:n.p+"samples/Clap [CP]/E808_CP-11.wav",cp12:n.p+"samples/Clap [CP]/E808_CP-12.wav",cp13:n.p+"samples/Clap [CP]/E808_CP-13.wav",cp14:n.p+"samples/Clap [CP]/E808_CP-14.wav",cp15:n.p+"samples/Clap [CP]/E808_CP-15.wav"},Sd={cl01:n.p+"samples/Claves [CL]/E808_CL-01.wav",cl02:n.p+"samples/Claves [CL]/E808_CL-02.wav",cl03:n.p+"samples/Claves [CL]/E808_CL-03.wav",cl04:n.p+"samples/Claves [CL]/E808_CL-04.wav",cl05:n.p+"samples/Claves [CL]/E808_CL-05.wav",cl06:n.p+"samples/Claves [CL]/E808_CL-06.wav",cl07:n.p+"samples/Claves [CL]/E808_CL-07.wav",cl08:n.p+"samples/Claves [CL]/E808_CL-08.wav",cl09:n.p+"samples/Claves [CL]/E808_CL-09.wav",cl10:n.p+"samples/Claves [CL]/E808_CL-10.wav",cl11:n.p+"samples/Claves [CL]/E808_CL-11.wav"},Td={hc01:n.p+"samples/Congas [HC-MC-LC]/E808_HC-01.wav",hc02:n.p+"samples/Congas [HC-MC-LC]/E808_HC-02.wav",hc03:n.p+"samples/Congas [HC-MC-LC]/E808_HC-03.wav",hc04:n.p+"samples/Congas [HC-MC-LC]/E808_HC-04.wav",hc05:n.p+"samples/Congas [HC-MC-LC]/E808_HC-05.wav",hc06:n.p+"samples/Congas [HC-MC-LC]/E808_HC-06.wav",hc07:n.p+"samples/Congas [HC-MC-LC]/E808_HC-07.wav",hc08:n.p+"samples/Congas [HC-MC-LC]/E808_HC-08.wav",hc09:n.p+"samples/Congas [HC-MC-LC]/E808_HC-09.wav",hc10:n.p+"samples/Congas [HC-MC-LC]/E808_HC-10.wav",lc01:n.p+"samples/Congas [HC-MC-LC]/E808_LC-01.wav",lc02:n.p+"samples/Congas [HC-MC-LC]/E808_LC-02.wav",lc03:n.p+"samples/Congas [HC-MC-LC]/E808_LC-03.wav",lc04:n.p+"samples/Congas [HC-MC-LC]/E808_LC-04.wav",lc05:n.p+"samples/Congas [HC-MC-LC]/E808_LC-05.wav",lc06:n.p+"samples/Congas [HC-MC-LC]/E808_LC-06.wav",lc07:n.p+"samples/Congas [HC-MC-LC]/E808_LC-07.wav",lc08:n.p+"samples/Congas [HC-MC-LC]/E808_LC-08.wav",lc09:n.p+"samples/Congas [HC-MC-LC]/E808_LC-09.wav",lc10:n.p+"samples/Congas [HC-MC-LC]/E808_LC-10.wav",mc01:n.p+"samples/Congas [HC-MC-LC]/E808_MC-01.wav",mc02:n.p+"samples/Congas [HC-MC-LC]/E808_MC-02.wav",mc03:n.p+"samples/Congas [HC-MC-LC]/E808_MC-03.wav",mc04:n.p+"samples/Congas [HC-MC-LC]/E808_MC-04.wav",mc05:n.p+"samples/Congas [HC-MC-LC]/E808_MC-05.wav",mc06:n.p+"samples/Congas [HC-MC-LC]/E808_MC-06.wav",mc07:n.p+"samples/Congas [HC-MC-LC]/E808_MC-07.wav",mc08:n.p+"samples/Congas [HC-MC-LC]/E808_MC-08.wav",mc09:n.p+"samples/Congas [HC-MC-LC]/E808_MC-09.wav",mc10:n.p+"samples/Congas [HC-MC-LC]/E808_MC-10.wav"},Ad={cb01:n.p+"samples/Cowbell [CB]/E808_CB-01.wav",cb02:n.p+"samples/Cowbell [CB]/E808_CB-02.wav",cb03:n.p+"samples/Cowbell [CB]/E808_CB-03.wav",cb04:n.p+"samples/Cowbell [CB]/E808_CB-04.wav",cb05:n.p+"samples/Cowbell [CB]/E808_CB-05.wav",cb06:n.p+"samples/Cowbell [CB]/E808_CB-06.wav",cb07:n.p+"samples/Cowbell [CB]/E808_CB-07.wav",cb08:n.p+"samples/Cowbell [CB]/E808_CB-08.wav",cb09:n.p+"samples/Cowbell [CB]/E808_CB-09.wav",cb10:n.p+"samples/Cowbell [CB]/E808_CB-10.wav",cb11:n.p+"samples/Cowbell [CB]/E808_CB-11.wav",cb12:n.p+"samples/Cowbell [CB]/E808_CB-12.wav",cb13:n.p+"samples/Cowbell [CB]/E808_CB-13.wav",cb14:n.p+"samples/Cowbell [CB]/E808_CB-14.wav",cb15:n.p+"samples/Cowbell [CB]/E808_CB-15.wav"},Md={cy01:n.p+"samples/Cymbal [CY]/E808_CY-01.wav",cy02:n.p+"samples/Cymbal [CY]/E808_CY-02.wav",cy03:n.p+"samples/Cymbal [CY]/E808_CY-03.wav",cy04:n.p+"samples/Cymbal [CY]/E808_CY-04.wav",cy05:n.p+"samples/Cymbal [CY]/E808_CY-05.wav",cy06:n.p+"samples/Cymbal [CY]/E808_CY-06.wav",cy07:n.p+"samples/Cymbal [CY]/E808_CY-07.wav",cy08:n.p+"samples/Cymbal [CY]/E808_CY-08.wav",cy09:n.p+"samples/Cymbal [CY]/E808_CY-09.wav",cy10:n.p+"samples/Cymbal [CY]/E808_CY-10.wav",cy11:n.p+"samples/Cymbal [CY]/E808_CY-11.wav",cy12:n.p+"samples/Cymbal [CY]/E808_CY-12.wav",cy13:n.p+"samples/Cymbal [CY]/E808_CY-13.wav",cy14:n.p+"samples/Cymbal [CY]/E808_CY-14.wav",cy15:n.p+"samples/Cymbal [CY]/E808_CY-15.wav",cy16:n.p+"samples/Cymbal [CY]/E808_CY-16.wav"},Cd={ch01:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-01.wav",ch02:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-02.wav",ch03:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-03.wav",ch04:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-04.wav",ch05:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-05.wav",ch06:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-06.wav",ch07:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-07.wav",ch08:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-08.wav",ch09:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-09.wav",ch10:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-10.wav",ch11:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-11.wav",ch12:n.p+"samples/Hi Hat Closed  [CH]/E808_CH-12.wav"},Od={oh01:n.p+"samples/Hi Hat Open [OH]/E808_OH-01.wav",oh02:n.p+"samples/Hi Hat Open [OH]/E808_OH-02.wav",oh03:n.p+"samples/Hi Hat Open [OH]/E808_OH-03.wav",oh04:n.p+"samples/Hi Hat Open [OH]/E808_OH-04.wav",oh05:n.p+"samples/Hi Hat Open [OH]/E808_OH-05.wav",oh06:n.p+"samples/Hi Hat Open [OH]/E808_OH-06.wav",oh07:n.p+"samples/Hi Hat Open [OH]/E808_OH-07.wav",oh08:n.p+"samples/Hi Hat Open [OH]/E808_OH-08.wav",oh09:n.p+"samples/Hi Hat Open [OH]/E808_OH-09.wav",oh10:n.p+"samples/Hi Hat Open [OH]/E808_OH-10.wav",oh11:n.p+"samples/Hi Hat Open [OH]/E808_OH-11.wav",oh12:n.p+"samples/Hi Hat Open [OH]/E808_OH-12.wav",oh13:n.p+"samples/Hi Hat Open [OH]/E808_OH-13.wav"},Pd={ma01:n.p+"samples/Maracas [MA]/E808_MA-01.wav",ma02:n.p+"samples/Maracas [MA]/E808_MA-02.wav",ma03:n.p+"samples/Maracas [MA]/E808_MA-03.wav",ma04:n.p+"samples/Maracas [MA]/E808_MA-04.wav",ma05:n.p+"samples/Maracas [MA]/E808_MA-05.wav",ma06:n.p+"samples/Maracas [MA]/E808_MA-06.wav",ma07:n.p+"samples/Maracas [MA]/E808_MA-07.wav",ma08:n.p+"samples/Maracas [MA]/E808_MA-08.wav",ma09:n.p+"samples/Maracas [MA]/E808_MA-09.wav",ma10:n.p+"samples/Maracas [MA]/E808_MA-10.wav",ma11:n.p+"samples/Maracas [MA]/E808_MA-11.wav"},kd={rs01:n.p+"samples/Rimshot [RS]/E808_RS-01.wav",rs02:n.p+"samples/Rimshot [RS]/E808_RS-02.wav",rs03:n.p+"samples/Rimshot [RS]/E808_RS-03.wav",rs04:n.p+"samples/Rimshot [RS]/E808_RS-04.wav",rs05:n.p+"samples/Rimshot [RS]/E808_RS-05.wav",rs06:n.p+"samples/Rimshot [RS]/E808_RS-06.wav",rs07:n.p+"samples/Rimshot [RS]/E808_RS-07.wav",rs08:n.p+"samples/Rimshot [RS]/E808_RS-08.wav",rs09:n.p+"samples/Rimshot [RS]/E808_RS-09.wav",rs10:n.p+"samples/Rimshot [RS]/E808_RS-10.wav",rs11:n.p+"samples/Rimshot [RS]/E808_RS-11.wav"},Id={sd01:n.p+"samples/Snare Drum [SD]/E808_SD-01.wav",sd02:n.p+"samples/Snare Drum [SD]/E808_SD-02.wav",sd03:n.p+"samples/Snare Drum [SD]/E808_SD-03.wav",sd04:n.p+"samples/Snare Drum [SD]/E808_SD-04.wav",sd05:n.p+"samples/Snare Drum [SD]/E808_SD-05.wav",sd06:n.p+"samples/Snare Drum [SD]/E808_SD-06.wav",sd07:n.p+"samples/Snare Drum [SD]/E808_SD-07.wav",sd08:n.p+"samples/Snare Drum [SD]/E808_SD-08.wav",sd09:n.p+"samples/Snare Drum [SD]/E808_SD-09.wav",sd10:n.p+"samples/Snare Drum [SD]/E808_SD-10.wav",sd11:n.p+"samples/Snare Drum [SD]/E808_SD-11.wav",sd12:n.p+"samples/Snare Drum [SD]/E808_SD-12.wav",sd13:n.p+"samples/Snare Drum [SD]/E808_SD-13.wav",sd14:n.p+"samples/Snare Drum [SD]/E808_SD-14.wav",sd15:n.p+"samples/Snare Drum [SD]/E808_SD-15.wav",sd16:n.p+"samples/Snare Drum [SD]/E808_SD-16.wav",sd17:n.p+"samples/Snare Drum [SD]/E808_SD-17.wav",sd18:n.p+"samples/Snare Drum [SD]/E808_SD-18.wav",sd19:n.p+"samples/Snare Drum [SD]/E808_SD-19.wav",sd20:n.p+"samples/Snare Drum [SD]/E808_SD-20.wav"},Ld={ht01:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-01.wav",ht02:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-02.wav",ht03:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-03.wav",ht04:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-04.wav",ht05:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-05.wav",ht06:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-06.wav",ht07:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-07.wav",ht08:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-08.wav",ht09:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-09.wav",ht10:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-10.wav",ht11:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-11.wav",ht12:n.p+"samples/Tom Toms [LT-MT-HT]/E808_HT-12.wav",lt01:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-01.wav",lt02:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-02.wav",lt03:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-03.wav",lt04:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-04.wav",lt05:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-05.wav",lt06:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-06.wav",lt07:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-07.wav",lt08:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-08.wav",lt09:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-09.wav",lt10:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-10.wav",lt11:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-11.wav",lt12:n.p+"samples/Tom Toms [LT-MT-HT]/E808_LT-12.wav",mt01:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-01.wav",mt02:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-02.wav",mt03:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-03.wav",mt04:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-04.wav",mt05:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-05.wav",mt06:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-06.wav",mt07:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-07.wav",mt08:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-08.wav",mt09:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-09.wav",mt10:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-10.wav",mt11:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-11.wav",mt12:n.p+"samples/Tom Toms [LT-MT-HT]/E808_MT-12.wav"};function Rd(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Dd(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dd(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dd(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Nd=function(t){var e=t.instrumentObject,n=t.onInstrumentSelect,r=t.layerIndex,a=(0,o.useRef)(!1),s=Rd((0,o.useState)(e.instrument),2),u=s[0],l=s[1],c=Rd((0,o.useState)(e.sampler),2),h=c[0],f=c[1],p=Rd((0,o.useState)(e.sample),2),d=p[0],m=p[1],v=(0,o.useMemo)((function(){return Object.keys(i)})),g=(0,o.useMemo)((function(){return h?Object.keys(i[h]):[]}),[h]),y=function(t){var e=Object.keys(i[t]);m(e[0]),f(t)};return(0,o.useEffect)((function(){a.current?n(u,h,d):a.current=!0}),[u,h,d]),(0,o.useEffect)((function(){l(e.instrument),f(e.sampler),m(e.sample)}),[e.instrument,e.sampler,e.sample]),o.createElement("div",{key:"select-container",className:xd().selectCobntainer},o.createElement("select",{key:"select-instrument",value:u,className:xd().select,onChange:function(t){var e=t.target.value;l(e),y(v[0])}},["MembraneSynth","MetalSynth","MonoSynth","NoiseSynth","PluckSynth","PolySynth","Sampler","Synth"].map((function(t){return o.createElement("option",{key:t+r,value:t},t)}))),"Sampler"===u&&o.createElement(o.Fragment,null,o.createElement("select",{key:"select-sampler",value:h,className:xd().select,onChange:function(t){var e=t.target.value;y(e)}},v.map((function(t){return o.createElement("option",{key:t+r,value:t},t)}))),o.createElement("select",{key:"select-sample",value:d,className:xd().select,onChange:function(t){var e=t.target.value;m(e)}},g.map((function(t){return o.createElement("option",{key:t+r,value:t},t)})))))};var Fd=n(5916),jd=n.n(Fd);function Ud(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var zd=n(42),Bd={setLayerName:function(t,e,n){return{type:ze,payload:{layerIndex:t,name:e,user:n}}},updateLayerInstrument:dn,toggleRaycaster:hn,setLayerControlsPositions:function(t,e){return{type:rn,payload:{layerIndex:t,controls:e}}}};const Vd=(0,Rp.Z)(qt((function(t){return{user:t.user}}),Bd),o.memo)((function(t){var e=t.user,n=t.layer,r=t.editable,i=t.radius,a=t.roundRadius,s=t.layerIndex,u=t.setLayerName,l=t.updateLayerInstrument,c=t.toggleRaycaster,h=t.settingsPane,f=t.setLayerControlsPositions,p=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ud(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ud(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(!1),2),d=p[0],m=p[1],v=(0,o.useRef)(),g=(0,o.useRef)(),y=(0,o.useMemo)((function(){var t=(new Yt.Vector3).setFromSphericalCoords(i,0,0).applyAxisAngle(Zt.AXIS,Zt.ANGLE);return t.x=-a,t}),[i,a]),b=(0,o.useCallback)((function(t,n,r){l(s,{instrument:t,sampler:n,sample:r},e.id)}),[s]),_=(0,o.useCallback)((function(t){t.stopPropagation(),m(!1),c(!0)}),[]),x=(0,o.useCallback)((function(){m(!0),c(!1)}),[]);(0,o.useEffect)((function(){var t=jp(v,"...");return Up(v,t)}),[v.current]),(0,o.useEffect)((function(){var t=n.name||"layer "+(s+1),r=jp(g,t,(function(t){u(s,t,e.id)}));return Up(g,r)}),[g.current,n.name]),(0,o.useEffect)((function(){h||f(s,y)}),[y]);var w=function(){return o.createElement(bd,{isOpen:d,onModalClose:_},o.createElement(Nd,{onInstrumentSelect:b,instrumentObject:n.instrument,layerIndex:s}))},E=function(){return o.createElement(o.Fragment,null,o.createElement("div",null,o.createElement("div",{ref:v,className:jd().patternLabelInput,contentEditable:r})),o.createElement("div",null,o.createElement("div",{ref:g,className:jd().layerLabelInput,contentEditable:r})),o.createElement("div",{className:jd().instrumentLabelContainer,style:{background:n.color||Kt.Instrument.LabelColor.getStyle()}},o.createElement("div",{className:zd(r?jd().instrumentLabel:[jd().cannotEdit,jd().instrumentLabel]),onClick:r?x:null},"Sampler"===n.instrument.instrument?"Sampler - ".concat(n.instrument.sampler):n.instrument.instrument)))};return o.createElement(o.Fragment,null,h&&o.createElement(o.Fragment,null,w(),E()),!h&&o.createElement(ct.Consumer,null,(function(t){var e=t.store;return o.createElement(o.Fragment,null,o.createElement(Ap,{fullscreen:d},o.createElement(mt,{store:e},w())),o.createElement(Ap,{position:y,className:jd().layerControls,zIndexRange:[10,0]},E()))})))}));function Hd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gd(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wd(t,e,n){return e&&Gd(t.prototype,e),n&&Gd(t,n),t}function qd(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xd=function(t){var e=(.6-t)/.6;return Math.exp(2*-Math.PI*Math.pow(e,2))},Yd=function(){function t(e,n,r,i){var o=this;Hd(this,t),qd(this,"setAsActive",(function(){o.activeTtl=.6})),this.isOn=e,this.activeTtl=0,this.note=n,this.velocity=r,this.probability=i}return Wd(t,[{key:"toggleIsOn",value:function(t){this.isOn=t}},{key:"setNote",value:function(t){this.note=t}},{key:"setVelocity",value:function(t){this.velocity=t}},{key:"setProbability",value:function(t){this.probability=t}},{key:"update",value:function(t){return this.activeTtl<=0?{activePercent:0}:(this.activeTtl=this.activeTtl-t,{activePercent:Xd(this.activeTtl)})}}]),t}(),Qd=function(){function t(e){var n=this;Hd(this,t),qd(this,"toggleLayerActive",(function(t){n.layerIsActive=t})),qd(this,"setNewInstrument",(function(t){n.instrument=t})),qd(this,"setInstrumentGain",(function(t){n.gain=t})),this.layerIsActive=e,this.steps={},this.instrument,this.gain}return Wd(t,[{key:"addStep",value:function(t){this.steps[t.id]=new Yd(t.isOn,t.note,t.velocity,t.probability)}},{key:"removeStep",value:function(t){delete this.steps[t]}},{key:"toggleStep",value:function(t,e){this.steps[t].toggleIsOn(e)}},{key:"changeGainValue",value:function(t){this.gain.gain.linearRampToValueAtTime(t,bh()+.2)}}]),t}();const Zd=o.createContext(null);var Kd=n(3497),$d=n.n(Kd);function Jd(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jd(Object(n),!0).forEach((function(e){rm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function em(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function nm(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){em(o,r,i,a,s,"next",t)}function s(t){em(o,r,i,a,s,"throw",t)}a(void 0)}))}}function rm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(6134),n(654);var im={apiKey:"AIzaSyAuU25cV2Asaz_eKpyQGo_8mfpp_QhzwLk",authDomain:"roundaround.firebaseapp.com",databaseURL:"https://roundaround.firebaseio.com",projectId:"roundaround",storageBucket:"roundaround.appspot.com",messagingSenderId:"452710212242",appId:"1:452710212242:web:bc8e14cc0478112fb4bc4b",measurementId:"G-BX73P1R2TB"};var om={setLayerSteps:pn,setStepsPositions:function(t,e){return{type:nn,payload:{layerIndex:t,steps:e}}}};const am=(0,Rp.Z)(qt((function(t){return{user:t.user}}),om),o.memo)((function(t){var e=t.user,n=t.layer,r=t.radius,i=t.roundRadius,a=t.copyLayerPattern,s=t.pasteLayerPattern,u=t.selectLayer,l=t.deselectLayer,c=t.deleteLayer,h=t.selected,f=t.layerIndex,p=t.setLayerSteps,d=t.setStepsPositions,m=(0,o.useContext)(Zd),v=(0,o.useMemo)((function(){return!n.readonly||!m.currentUser||n.creator===m.currentUser.uid}),[n.readonly,n.creator,m.currentUser]),g=(0,o.useMemo)((function(){return new Qd(n.isActive)}),[]),y=(0,o.useMemo)((function(){return n.steps.map((function(t,e){var i=e/n.steps.length*2*Math.PI;return(new Yt.Vector3).setFromSphericalCoords(r,i,0).applyAxisAngle(Zt.AXIS,Zt.ANGLE)}))}),[n.steps.length,r]),b=(0,o.useMemo)((function(){var t=n.steps.length,e=(t-.5)/t*2*Math.PI;return{position:(new Yt.Vector3).setFromSphericalCoords(r,e,0).applyAxisAngle(Zt.AXIS,Zt.ANGLE),rotation:[0,0,-e+Math.PI/2]}}),[r,n.steps.length]),_=(0,o.useCallback)((function(t){var r=ve(n,t);p(f,r,e.id),console.log("layer index",f)}),[n.steps.length,f]);return(0,o.useEffect)((function(){g.toggleLayerActive(n.isActive)}),[n.isActive]),(0,o.useEffect)((function(){d(f,y)}),[y]),o.createElement(o.Fragment,null,o.createElement(Qp,{instrument:n.instrument,active:g,steps:n.steps}),o.createElement(Vd,{editable:v,layer:n,radius:r,layerIndex:f,roundRadius:i}),o.createElement(md,{editable:v,radius:r,activeLayerHelper:g,onCopyHandler:a,onPasteHandler:s,layerIndex:f,layer:n,selectLayer:u,deselectLayer:l,deleteLayer:c,selected:h}),o.createElement($p,{color:n.color,editable:v,numberOfBeats:n.steps.length,onStepsChange:_,position:b.position,rotation:b.rotation}),n.steps.map((function(t,e){return o.createElement("mesh",{key:t.id},o.createElement(Yp,{editable:v,color:n.color,activeLayerHelper:g,layerIndex:f,stepIndex:e,position:y[e],step:t}))})))}));function sm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return um(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?um(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function um(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const lm=o.memo((function(t){var e=t.length,n=[e,.01,1e-4],r=(0,o.useRef)(),i=sm((0,o.useState)({progress:0}),2),a=i[0],s=i[1];(0,o.useEffect)((function(){var t=new ec((function(){}),["C4","C4"]);t.loop=!0,t.start(0),s(t)}),[]);var u=function(){var t=a.progress/1*2*Math.PI;return[(new Yt.Vector3).setFromSphericalCoords(e/2,t,0).applyAxisAngle(Zt.AXIS,Zt.ANGLE),t]},l=function(t,e){r.current.position.x=t.x,r.current.position.y=t.y,r.current.position.z=t.z,r.current.rotation.z=-(e-Math.PI/2)};return Kf((function(t,e){var n=sm(u(),2),r=n[0],i=n[1];l(r,i)})),(0,o.useEffect)((function(){var t=sm(u(),2),e=t[0],n=t[1];l(e,n)}),[]),o.createElement("mesh",{ref:r},o.createElement("boxBufferGeometry",{attach:"geometry",args:n}),o.createElement("meshStandardMaterial",{attach:"material",color:Qt.neutral}))}));var cm=n(3306),hm=n.n(cm);function fm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function pm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fm(Object(n),!0).forEach((function(e){dm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return vm(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vm(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vm(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n.p;var gm={resetRoundStore:function(){return{type:ye}},addRoundLayer:mn,removeRoundLayer:vn,setRoundName:function(t,e){return{type:Ye,payload:{name:t,user:e}}},setRoundBpm:function(t,e){return{type:Qe,payload:{bpm:t,user:e}}},setLayerSteps:pn,setLayersPositions:function(t){return{type:en,payload:{layers:t}}},setRoundInfoPosition:function(t){return{type:on,payload:{round:t}}}};const ym=(0,Rp.Z)(qt((function(t){return{round:t.round,user:t.user,collaboration:t.collaboration}}),gm),o.memo)((function(t){var e=t.round,n=t.addRoundLayer,r=t.removeRoundLayer,i=t.setRoundName,a=t.setRoundBpm,s=t.setLayerSteps,u=t.setLayersPositions,l=t.resetRoundStore,c=t.user,h=t.collaboration,f=t.setRoundInfoPosition,p=e.layers?e.layers.length:0,d=mm((0,o.useState)(null),2),m=d[0],v=d[1],g=mm((0,o.useState)(null),2),y=g[0],b=g[1],_=mm((0,o.useState)(),2),x=_[0],w=_[1],E=(0,o.useRef)(),S=(0,o.useRef)(),T=(0,o.useMemo)((function(){var t=Jt.Padding.Interior+p*Kt.Padding,e=(new Yt.Vector3).setFromSphericalCoords(t,Math.PI/2,0).applyAxisAngle(Zt.AXIS,Zt.ANGLE);return f(e),e}),[p]),A=(0,o.useMemo)((function(){var t=Jt.Padding.Interior+(p-1)*Kt.Padding,e=new Yt.LineDashedMaterial({color:Jt.DashedOutline.Color,dashSize:.1,gapSize:.05,linewidth:2}),n=new Yt.CircleGeometry(t+Jt.DashedOutline.Padding,160);n.vertices.shift();var r=new Yt.Line(n,e);return r.computeLineDistances(),r}),[e,p]),M=(0,o.useMemo)((function(){return Jt.Padding.Interior+(p-1)*Kt.Padding}),[p]),C=(0,o.useCallback)((function(t){v(t)}),[]),O=(0,o.useCallback)((function(t){if(m&&t.id!=m.id){var n=e.layers.indexOf(t),r=m.steps.map((function(t){return ue(ue({},t),{},{id:ae()})}));s(n,r,c.id)}}),[m,e.layers.length]),P=(0,o.useCallback)((function(t){b(t)}),[]),k=(0,o.useCallback)((function(){b()}),[]),I=(0,o.useCallback)((function(t){r(t,c.id)}),[]),L=(0,o.useCallback)((function(){var t=he(c.id);n(t,c.id)}),[]),R=function(t){i(t,c.id)};(0,o.useEffect)((function(){var t=jp(E,e.name,R);return Up(E,t)}),[e.name,E.current]);var D=function(t){a(t,c.id)};(0,o.useEffect)((function(){xh.bpm.value=e.bpm;var t=jp(S,e.bpm,D);return Up(S,t)}),[e.bpm,S.current]),(0,o.useEffect)((function(){return(new Yt.TextureLoader).load("textures/plus_sign.png",(function(t){w(t)})),function(){console.log("round component getting unmounted"),l()}}),[]),(0,o.useEffect)((function(){var t=e.layers.map((function(t,e){var n=Jt.Padding.Interior+e*Kt.Padding;return console.log("x",n),new Yt.Vector3(0,n,0)}));u(t)}),[e.layers.length]);var N=(0,o.useMemo)((function(){return c.color||Qt.on}),[c.color]),F=(0,o.useMemo)((function(){return Jt.Padding.Interior+(e.layers.length-1)*Kt.Padding}),[e.layers.length]);return o.createElement(o.Fragment,null,o.createElement("primitive",{object:A}),o.createElement(Ap,{position:T,className:hm().roundLabel,zIndexRange:[10,0]},o.createElement("div",{ref:E,contentEditable:"true"}),o.createElement("div",{ref:S,contentEditable:"true",className:hm().bpmLabel})),o.createElement(kp,{args:oe.addLayer,onClick:L},x&&o.createElement("meshStandardMaterial",{color:N,attach:"material",map:x})),o.createElement(lm,{length:M}),e.layers.map((function(t,e){var n=Jt.Padding.Interior+e*Kt.Padding,r=h&&h.contributors&&h.contributors[t.creator];return t=pm(pm({},t),{},r?{color:h.contributors[t.creator].color}:{color:c.color}),o.createElement(am,{copyLayerPattern:C,pasteLayerPattern:O,selectLayer:P,deselectLayer:k,deleteLayer:I,selected:y,key:t.id,layer:t,layerIndex:e,radius:n,roundRadius:F})})))})),bm=function(t){var e=t.color,n=t.position,r=(0,o.useMemo)((function(){return new Yt.Color(e)}),[e]);return o.createElement(kp,{args:oe.Contributor,position:n},o.createElement("meshStandardMaterial",{color:r,attach:"material"}))};function _m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_m(Object(n),!0).forEach((function(e){wm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Em(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Sm=qt((function(t){return{round:t.round,user:t.user,collaboration:t.collaboration}}),{setContributorsPositions:function(t){return{type:tn,payload:{contributors:t}}}})((function(t){var e=t.round,n=(t.user,t.collaboration),r=t.setContributorsPositions,i=(0,o.useMemo)((function(){return n?Object.entries(n.contributors).reduce((function(t,n,r,i){var o,a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Em(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Em(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(n,2),s=a[0],u=a[1],l=Jt.Padding.Interior+(e.layers.length-1)*Kt.Padding+Jt.DashedOutline.Padding,c=oe.Contributor[0]+oe.yPadding,h=c*i.length,f=l+oe.xPadding,p=r*-c+(h/2-c/2);return o=new Yt.Vector3(f,p,0),t.push({position:o,contributor:xm({id:s},u)}),t}),[]):[]}),[n,e.layers.length]);return(0,o.useEffect)((function(){var t=i.reduce((function(t,e){return t[e.contributor.id]=e.position,t}),{});r(t)}),[i]),o.createElement(o.Fragment,null,n&&i.map((function(t,e){return o.createElement(bm,{key:e,color:t.contributor.color,position:t.position})})))})),Tm=qt((function(t){return{round:t.round,user:t.user,collaboration:t.collaboration,positions:t.positions}}),null)((function(t){var e=t.collaboration,n=t.round,r=t.user,i=t.positions,a=zp(n.lastEdition),s=(0,o.useRef)(),u=(0,o.useMemo)((function(){return new Yt.Group}),[]);return Kf((function(t,e){u.children.forEach((function(t){var n=t.geometry.vertices[0],r=t.geometry.vertices[1],i=new Yt.Vector3(0,0,0);i.subVectors(r,n),i.multiplyScalar(4*e),i.add(n),t.geometry.vertices=[i,r],t.geometry.verticesNeedUpdate=!0}))})),(0,o.useEffect)((function(){if(s.current){if(n.lastEdition!==a){var t=function(){var t=new Yt.Vector3(0,0,0),o=new Yt.Vector3(0,0,0);i.contributors&&n.lastEditor&&n.lastEdition&&n.lastEditor!==r.id&&(t=i.contributors[n.lastEditor],"round"===n.lastEdition.unit&&(o=i.round),"layer"===n.lastEdition.unit&&(o=i.layers[n.lastEdition.layerIndex]),"layerControls"===n.lastEdition.unit&&(o=i.layerControls[n.lastEdition.layerIndex]),"step"===n.lastEdition.unit&&i.steps[n.lastEdition.layerIndex]&&(o=i.steps[n.lastEdition.layerIndex][n.lastEdition.stepIndex])),t||(t=new Yt.Vector3(0,0,0)),o||(o=new Yt.Vector3(0,0,0));var a=e&&e.contributors&&n.lastEditor?e.contributors[n.lastEditor].color:"#fff",s=new Yt.Geometry;s.dynamic=!0,s.vertices.push(t),s.vertices.push(o),s.verticesNeedUpdate=!0;var u=new Yt.LineBasicMaterial({color:a});return new Yt.Line(s,u)}();u.add(t),u.children.forEach((function(t){var e=t.geometry.vertices[0],n=t.geometry.vertices[1];e.length().toFixed(3)===n.length().toFixed(3)&&(t.geometry.dispose(),u.remove(t))}))}}else s.current=!0}),[n.lastEditor,n.lastEdition,i,a,u.children]),o.createElement("primitive",{object:u})}));var Am=n(6643),Mm=n.n(Am);function Cm(t){return(Cm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Om(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Pm(t,e){return(Pm=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function km(t,e){return!e||"object"!==Cm(e)&&"function"!=typeof e?Im(t):e}function Im(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lm(t){return(Lm=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Nf({OrbitControls:Ip});var Rm=function(t){var e=$f(),n=e.camera,r=e.gl.domElement,i=(0,o.useRef)();return Kf((function(){return i.current.update()})),o.createElement("orbitControls",{ref:i,args:[n,r],enablePan:!1,enableRotate:"perspective"===t.cameraMode})},Dm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pm(t,e)}(s,t);var e,n,r,i,a=(r=s,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=Lm(r);if(i){var n=Lm(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return km(this,t)});function s(t){var e,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),n=Im(e=a.call(this,t)),i=function(t,n){return e.props.raycasterActive?t.slice(0,1):[]},(r="raycasterFilter")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,e.cameraRef=o.createRef(),e.raycasterFilter=e.raycasterFilter.bind(Im(e)),e}return e=s,(n=[{key:"render",value:function(){var t=this;return o.createElement(ct.Consumer,null,(function(e){var n=e.store;return o.createElement(Zd.Consumer,null,(function(e){return o.createElement(np,{className:Mm().canvas,raycaster:{filter:t.raycasterFilter}},o.createElement(mt,{store:n},o.createElement(Zd.Provider,{value:e},o.createElement(Rm,{cameraMode:t.props.camera}),"orthographic"===t.props.camera&&o.createElement(xp,{makeDefault:!0,ref:t.cameraRef,position:[0,0,1],zoom:130}),o.createElement("ambientLight",null),o.createElement("pointLight",{position:[10,10,10]}),o.createElement(ym,null),t.props.collaboration&&o.createElement(Sm,null),o.createElement(Tm,null))))}))}))}}])&&Om(e.prototype,n),s}(o.Component);qt((function(t){return{raycasterActive:t.raycaster.active,camera:t.camera,collaboration:t.collaboration}}),null)(Dm);var Nm=n(7745),Fm=n.n(Nm),jm=n(42);const Um=function(t){var e=t.isOn,n=t.togglePlay,r=t.shareRound,i=t.toggleSettings,a=t.toggleSidebar,s=t.toggleProfile,u=t.mode,l=t.user,c=(0,o.useRef)();return o.createElement(o.Fragment,null,o.createElement("div",{className:jm(Fm().controlsBar,Fm().top)},o.createElement("div",null,o.createElement("button",{ref:c,type:"button",onClick:function(){n()}},e?"Stop":"Start"),"collaboration"!==u&&o.createElement("button",{type:"button",onClick:r},"Share")),o.createElement("button",{type:"button",onClick:i},"Settings")),o.createElement("div",{className:jm(Fm().controlsBar,Fm().bottom)},l&&o.createElement("button",{type:"button",onClick:s},"Profile"),"collaboration"!==u&&o.createElement("button",{type:"button",onClick:a},"Project")))};var zm=n(6225),Bm=n.n(zm);function Vm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Hm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vm(Object(n),!0).forEach((function(e){Gm(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Gm(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Wm=qt((function(t){return{camera:t.camera,round:t.round,editingMode:t.editingMode,editAllLayers:t.editAllLayers,user:t.user,collaboration:t.collaboration}}),{updateLayerInstrument:dn,setCamera:function(t){return{type:Me,payload:{camera:t}}},setEditingMode:function(t){return{type:Ce,payload:{mode:t}}},setEditAllLayers:function(t){return{type:Oe,payload:{value:t}}},addRoundLayer:mn,removeRoundLayer:vn,setLayerSteps:pn})((function(t){var e=t.round,n=t.user,r=t.collaboration,i=t.isActive,a=t.camera,s=t.setCamera,u=t.editingMode,l=t.setEditingMode,c=t.editAllLayers,h=t.setEditAllLayers,f=t.updateLayerInstrument,p=t.addRoundLayer,d=t.setLayerSteps,m=t.removeRoundLayer,v=function(t){var e=t.target.value;s(e)},g=function(t){var e=t.target.value;l(e)};return o.createElement("div",{className:"".concat(Bm().settingsPane," ").concat(i?Bm().settingsPaneActive:"")},o.createElement("div",{className:Bm().roundLayers},e.layers&&e.layers.map((function(t,e){var i=r&&r.contributors&&r.contributors[t.creator];return t=Hm(Hm({},t),{},i?{color:r.contributors[t.creator].color}:{color:n.color}),o.createElement("div",{key:t.id,className:Bm().layerRow},o.createElement("div",{className:Bm().layerElementSuperLong},o.createElement(Vd,{layer:t,editable:!0,layerIndex:e,settingsPane:!0})),o.createElement("span",null,"Steps:"),o.createElement("input",{type:"range",min:te,max:ee,onChange:function(r){var i=parseInt(r.target.value);!function(t,e,r){var i=ve(t,r);d(e,i,n.id)}(t,e,i)},value:t.steps.length,className:Bm().layerElementLong}),o.createElement("span",{className:Bm().layerElementShort},t.steps.length),o.createElement("span",null,"Gain:"),o.createElement("input",{type:"range",min:"0",max:"1",step:"0.05",onChange:function(t){var r=parseFloat(t.target.value);f(e,{gain:r},n.id)},value:t.instrument.gain,className:Bm().layerElementLong}),o.createElement("button",{type:"button",onClick:function(){m(e,n.id)},className:Bm().layerElementLong},"Remove"))}))),o.createElement("button",{type:"button",onClick:function(){p(he(n.id),n.id)},className:Bm().addLayerButton},"Add Layer"),o.createElement("div",{className:Bm().layerRow},o.createElement("div",{className:Bm().cameraSelect},o.createElement("p",null,"Select camera:"),o.createElement("div",null,o.createElement("input",{type:"radio",id:"perspective",name:"camera",value:"perspective",checked:"perspective"===a,onChange:v}),o.createElement("label",{htmlFor:"perspective"},"Perspective")),o.createElement("div",null,o.createElement("input",{type:"radio",id:"orthographic",name:"camera",value:"orthographic",checked:"orthographic"===a,onChange:v}),o.createElement("label",{htmlFor:"orthographic"},"Orthographic"))),o.createElement("div",null,o.createElement("div",{className:Bm().cameraSelect},o.createElement("p",null,"Select mode:"),o.createElement("div",null,o.createElement("input",{type:"radio",id:"steps",name:"editing-mode",value:"steps",checked:"steps"===u,onChange:g}),o.createElement("label",{htmlFor:"steps"},"Steps Editing")),o.createElement("div",null,o.createElement("input",{type:"radio",id:"notes",name:"editing-mode",value:"notes",checked:"notes"===u,onChange:g}),o.createElement("label",{htmlFor:"notes"},"Notes Editing")))),o.createElement("div",null,o.createElement("input",{type:"checkbox",name:"edit-all-layers",checked:c,onChange:function(t){var e=t.target.checked;console.log("onEditAllLayersSelect",e),h(e)},disabled:r.creator!==n.id}),o.createElement("label",{htmlFor:"edit-all-layers"},"Edit all layers"))))}));var qm=n(1687),Xm=n.n(qm);function Ym(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}n(42);const Qm=tt((function(t){var e=t.link,n=t.history,r=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Ym(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ym(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(!1),2),i=r[0],a=r[1],s=(0,o.useRef)();return(0,o.useEffect)((function(){a(!1)}),[e]),o.createElement("div",{key:"link-container",className:Xm().selectCobntainer},o.createElement("div",{className:Xm().linkContainer},o.createElement("span",{className:Xm().tooltiptext},i?"Copied!":"Copy to clipboard"),o.createElement("input",{className:Xm().link,ref:s,onClick:function(){s.current.select(),s.current.setSelectionRange(0,99999),document.execCommand("copy"),a(!0)},onChange:function(t){t.preventDefault()},value:e.link,spellCheck:"false"})),o.createElement("button",{className:Xm().redirectButton,onClick:function(){var t=e.long_url.split("#")[1];console.log(t,e),n.push(t)}},"Go!"))}));function Zm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Km(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zm(Object(n),!0).forEach((function(e){$m(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $m(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jm(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function tv(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Jm(o,r,i,a,s,"next",t)}function s(t){Jm(o,r,i,a,s,"throw",t)}a(void 0)}))}}function ev(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return nv(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?nv(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nv(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const rv=qt(null,{toggleLoader:cn,toggleRaycaster:hn})((function(t){var e=t.sharing,n=t.toggleSharing,r=t.round,i=t.toggleLoader,a=t.toggleRaycaster,s=(0,o.useContext)(Zd),u=ev((0,o.useState)(!1),2),l=u[0],c=u[1],h=ev((0,o.useState)({link:"",long_url:""}),2),f=h[0],p=h[1],d=function(){var t=tv(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=window.location.origin+"/#/collaboration/"+e,"localhost"!==window.location.hostname){t.next=3;break}return t.abrupt("return",{link:n,long_url:n});case 3:return r={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("c48cf8ef04cb1e9bf0c8f320418b5b3bde599764")},body:JSON.stringify({group_guid:"Bk8q4epOSuG",domain:"bit.ly",long_url:n})},t.next=8,fetch("https://api-ssl.bitly.com/v4/shorten",r).then((function(t){return t.json()}));case 8:return i=t.sent,console.log("shortenedLink",i),t.abrupt("return",i);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=tv(regeneratorRuntime.mark((function t(){var e,n,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,s.db.collection("collaborations").where("round","==",r.id).get().then((function(t){return t.docs.map((function(t){return Km({id:t.id},t.data())})).find((function(t){return!t.derivative}))}));case 3:if((e=t.sent)&&!e.derivative){t.next=14;break}return n=JSON.parse(s.currentUser.displayName),o=ae(),t.next=9,d(o);case 9:a=t.sent,s.db.collection("collaborations").doc(o).set({round:r.id,isPlaying:!1,creator:s.currentUser.uid,contributors:$m({},s.currentUser.uid,{color:n.color}),shortenedLink:a},{merge:!1}),p(a),t.next=15;break;case 14:p(e.shortenedLink);case 15:i(!1),c(!0);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,o.useEffect)((function(){e?(m(),a(!1)):(c(!1),a(!0))}),[e]),o.createElement(o.Fragment,null,o.createElement(bd,{isOpen:l,onModalClose:function(){n()}},o.createElement(Qm,{link:f})))}));var iv=n(4348),ov=n.n(iv);function av(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const sv=tt((function(t){var e=t.addRound,n=t.history,r=(0,o.useContext)(Zd),i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return av(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?av(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(r.currentUser),2),a=i[0];return i[1],(0,o.useEffect)((function(){}),[]),o.createElement("div",{className:ov().footer},o.createElement("button",{onClick:e,className:ov().addRoundBtn},"Add new"),a&&o.createElement("div",{className:ov().userInfo},o.createElement("div",null,a.email),o.createElement("button",{onClick:function(){r.doSignOut(),n.push("/login")},className:ov().addRoundBtn},"Signout")))}));var uv=n(2573),lv=n.n(uv);function cv(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function hv(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cv(Object(n),!0).forEach((function(e){fv(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function fv(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pv=n(42);const dv=qt((function(t){return{round:t.round,rounds:t.rounds}}),{setRoundData:fn,updateRound:function(t,e){return{type:Le,payload:{round:t,roundIndex:e}}},addRound:function(t){return{type:ke,payload:{round:t}}},removeRound:function(t){return{type:Ie,payload:{roundIndex:t}}}})((function(t){var e=t.isOpen,n=t.toggleSidebar,r=t.rounds,i=t.round,a=t.setRoundData,s=t.updateRound,u=t.addRound,l=t.removeRound,c=(0,o.useContext)(Zd),h=function(t){var e=t.target.dataset,n=e.index;if(e.id!==i.id){a(r[n]);var o=r.find((function(t){return t.id===i.id})),u=r.indexOf(o);console.log("update round on round select"),s(i,u)}},f=function(t){t.stopPropagation(),l(t.target.dataset.index)};return(0,o.useEffect)((function(){if(c.currentUser){var t=JSON.parse(c.currentUser.displayName);c.currentUser.updateProfile({displayName:JSON.stringify(hv(hv({},t),{},{lastVisitedRound:i.id}))}).then((function(){console.log("last visited round updated: ",i.id)})).catch((function(t){return console.error()}))}}),[i.id]),o.createElement("div",{className:e?pv(lv().sidenav,lv().open):lv().sidenav},o.createElement("div",{className:lv().header},o.createElement("a",{className:lv().headerText},"Current Session: "),o.createElement("a",{className:lv().closeBtn,onClick:n},"×")),r.map((function(t,e){return o.createElement("a",{key:t.id,"data-index":e,"data-id":t.id,className:t.id==i.id?lv().selected:lv().unselected,onClick:h},t.name,r.length>1&&o.createElement("div",{"data-index":e,onClick:f,className:lv().removeBtn},"×"))})),o.createElement(sv,{addRound:function(){u(fe(c.currentUser.uid))}}))}));var mv=n(129),vv=function(t,e,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,u="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,l=s-(i.getBoundingClientRect().left+window.pageXOffset),c=u-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h;if(h=c<0?0:c>a?1:Math.round(100*c/a)/100,e.a!==h)return{h:e.h,s:e.s,l:e.l,a:h,source:"rgb"}}else{var f;if(r!==(f=l<0?0:l>o?1:Math.round(100*l/o)/100))return{h:e.h,s:e.s,l:e.l,a:f,source:"rgb"}}return null},gv={},yv=function(t,e,n,r){var i=t+"-"+e+"-"+n+(r?"-server":"");if(gv[i])return gv[i];var o=function(t,e,n,r){if("undefined"==typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=t,o.fillRect(0,0,i.width,i.height),o.fillStyle=e,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}(t,e,n,r);return gv[i]=o,o},bv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_v=function(t){var e=t.white,n=t.grey,r=t.size,i=t.renderers,a=t.borderRadius,s=t.boxShadow,u=t.children,l=(0,mv.ZP)({default:{grid:{borderRadius:a,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+yv(e,n,r,i.canvas)+") center left"}}});return(0,o.isValidElement)(u)?o.cloneElement(u,bv({},u.props,{style:bv({},u.props.style,l.grid)})):o.createElement("div",{style:l.grid})};_v.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};const xv=_v;var wv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ev=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Sv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Tv(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}const Av=function(t){function e(){var t,n,r;Sv(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Tv(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),r.handleChange=function(t){var e=vv(t,r.props.hsl,r.props.direction,r.props.a,r.container);e&&"function"==typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},Tv(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Ev(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var t=this,e=this.props.rgb,n=(0,mv.ZP)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*e.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+e.r+","+e.g+","+e.b+", 0) 0%,\n           rgba("+e.r+","+e.g+","+e.b+", 1) 100%)"},pointer:{left:0,top:100*e.a+"%"}},overwrite:wv({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return o.createElement("div",{style:n.alpha},o.createElement("div",{style:n.checkboard},o.createElement(xv,{renderers:this.props.renderers})),o.createElement("div",{style:n.gradient}),o.createElement("div",{style:n.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("div",{style:n.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:n.slider}))))}}]),e}(o.PureComponent||o.Component);var Mv=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),Cv=[38,40],Ov=1;const Pv=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(t){n.setUpdatedValue(t.target.value,t)},n.handleKeyDown=function(t){var e,r=function(t){return Number(String(t).replace(/%/g,""))}(t.target.value);if(!isNaN(r)&&(e=t.keyCode,Cv.indexOf(e)>-1)){var i=n.getArrowOffset(),o=38===t.keyCode?r+i:r-i;n.setUpdatedValue(o,t)}},n.handleDrag=function(t){if(n.props.dragLabel){var e=Math.round(n.props.value+t.movementX);e>=0&&e<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(e),t)}},n.handleMouseDown=function(t){n.props.dragLabel&&(t.preventDefault(),n.handleDrag(t),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(t.value).toUpperCase(),blurValue:String(t.value).toUpperCase()},n.inputId="rc-editable-input-"+Ov++,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Mv(e,[{key:"componentDidUpdate",value:function(t,e){this.props.value===this.state.value||t.value===this.props.value&&e.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(t){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.props.label,t)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(t,e){var n=this.props.label?this.getValueObjectWithLabel(t):t;this.props.onChange&&this.props.onChange(n,e),this.setState({value:t})}},{key:"render",value:function(){var t=this,e=(0,mv.ZP)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return o.createElement("div",{style:e.wrap},o.createElement("input",{id:this.inputId,style:e.input,ref:function(e){return t.input=e},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?o.createElement("label",{htmlFor:this.inputId,style:e.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),e}(o.PureComponent||o.Component);var kv=function(t,e,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=a-(r.getBoundingClientRect().left+window.pageXOffset),l=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===e){var c=void 0;if(c=l<0?359:l>o?0:360*(-100*l/o+100)/100,n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(h=u<0?0:u>i?359:100*u/i*360/100,n.h!==h)return{h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null},Iv=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function Lv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rv(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}const Dv=function(t){function e(){var t,n,r;Lv(this,e);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=Rv(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(o))),r.handleChange=function(t){var e=kv(t,r.props.direction,r.props.hsl,r.container);e&&"function"==typeof r.props.onChange&&r.props.onChange(e,t)},r.handleMouseDown=function(t){r.handleChange(t),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},Rv(r,n)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Iv(e,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.direction,n=void 0===e?"horizontal":e,r=(0,mv.ZP)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return o.createElement("div",{style:r.hue},o.createElement("div",{className:"hue-"+n,style:r.container,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),o.createElement("div",{style:r.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:r.slider}))))}}]),e}(o.PureComponent||o.Component),Nv=function(t,e){return t===e||t!=t&&e!=e},Fv=function(t,e){for(var n=t.length;n--;)if(Nv(t[n][0],e))return n;return-1};var jv=Array.prototype.splice;function Uv(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}Uv.prototype.clear=function(){this.__data__=[],this.size=0},Uv.prototype.delete=function(t){var e=this.__data__,n=Fv(e,t);return!(n<0||(n==e.length-1?e.pop():jv.call(e,n,1),--this.size,0))},Uv.prototype.get=function(t){var e=this.__data__,n=Fv(e,t);return n<0?void 0:e[n][1]},Uv.prototype.has=function(t){return Fv(this.__data__,t)>-1},Uv.prototype.set=function(t,e){var n=this.__data__,r=Fv(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const zv=Uv;var Bv=n(4311);const Vv=Bv.Z.Symbol;var Hv=Object.prototype,Gv=Hv.hasOwnProperty,Wv=Hv.toString,qv=Vv?Vv.toStringTag:void 0;var Xv=Object.prototype.toString;var Yv=Vv?Vv.toStringTag:void 0;const Qv=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Yv&&Yv in Object(t)?function(t){var e=Gv.call(t,qv),n=t[qv];try{t[qv]=void 0;var r=!0}catch(t){}var i=Wv.call(t);return r&&(e?t[qv]=n:delete t[qv]),i}(t):function(t){return Xv.call(t)}(t)},Zv=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Kv=function(t){if(!Zv(t))return!1;var e=Qv(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},$v=Bv.Z["__core-js_shared__"];var Jv=function(){var t=/[^.]+$/.exec($v&&$v.keys&&$v.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var tg=Function.prototype.toString;const eg=function(t){if(null!=t){try{return tg.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var ng=/^\[object .+?Constructor\]$/,rg=Function.prototype,ig=Object.prototype,og=rg.toString,ag=ig.hasOwnProperty,sg=RegExp("^"+og.call(ag).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ug=function(t){return!(!Zv(t)||(e=t,Jv&&Jv in e))&&(Kv(t)?sg:ng).test(eg(t));var e},lg=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return ug(n)?n:void 0},cg=lg(Bv.Z,"Map"),hg=lg(Object,"create");var fg=Object.prototype.hasOwnProperty;var pg=Object.prototype.hasOwnProperty;function dg(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}dg.prototype.clear=function(){this.__data__=hg?hg(null):{},this.size=0},dg.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},dg.prototype.get=function(t){var e=this.__data__;if(hg){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return fg.call(e,t)?e[t]:void 0},dg.prototype.has=function(t){var e=this.__data__;return hg?void 0!==e[t]:pg.call(e,t)},dg.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=hg&&void 0===e?"__lodash_hash_undefined__":e,this};const mg=dg,vg=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function gg(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}gg.prototype.clear=function(){this.size=0,this.__data__={hash:new mg,map:new(cg||zv),string:new mg}},gg.prototype.delete=function(t){var e=vg(this,t).delete(t);return this.size-=e?1:0,e},gg.prototype.get=function(t){return vg(this,t).get(t)},gg.prototype.has=function(t){return vg(this,t).has(t)},gg.prototype.set=function(t,e){var n=vg(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const yg=gg;function bg(t){var e=this.__data__=new zv(t);this.size=e.size}bg.prototype.clear=function(){this.__data__=new zv,this.size=0},bg.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},bg.prototype.get=function(t){return this.__data__.get(t)},bg.prototype.has=function(t){return this.__data__.has(t)},bg.prototype.set=function(t,e){var n=this.__data__;if(n instanceof zv){var r=n.__data__;if(!cg||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new yg(r)}return n.set(t,e),this.size=n.size,this};const _g=bg,xg=function(){try{var t=lg(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),wg=function(t,e,n){"__proto__"==e&&xg?xg(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},Eg=function(t,e,n){(void 0!==n&&!Nv(t[e],n)||void 0===n&&!(e in t))&&wg(t,e,n)},Sg=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t};var Tg=n(4405);const Ag=Bv.Z.Uint8Array,Mg=function(t,e){var n,r,i=e?(n=t.buffer,r=new n.constructor(n.byteLength),new Ag(r).set(new Ag(n)),r):t.buffer;return new t.constructor(i,t.byteOffset,t.length)};var Cg=Object.create;const Og=function(){function t(){}return function(e){if(!Zv(e))return{};if(Cg)return Cg(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Pg=function(t,e){return function(n){return t(e(n))}},kg=Pg(Object.getPrototypeOf,Object);var Ig=Object.prototype;const Lg=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ig)},Rg=function(t){return null!=t&&"object"==typeof t},Dg=function(t){return Rg(t)&&"[object Arguments]"==Qv(t)};var Ng=Object.prototype,Fg=Ng.hasOwnProperty,jg=Ng.propertyIsEnumerable;const Ug=Dg(function(){return arguments}())?Dg:function(t){return Rg(t)&&Fg.call(t,"callee")&&!jg.call(t,"callee")},zg=Array.isArray,Bg=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},Vg=function(t){return null!=t&&Bg(t.length)&&!Kv(t)};var Hg=n(9138),Gg=Function.prototype,Wg=Object.prototype,qg=Gg.toString,Xg=Wg.hasOwnProperty,Yg=qg.call(Object);var Qg={};Qg["[object Float32Array]"]=Qg["[object Float64Array]"]=Qg["[object Int8Array]"]=Qg["[object Int16Array]"]=Qg["[object Int32Array]"]=Qg["[object Uint8Array]"]=Qg["[object Uint8ClampedArray]"]=Qg["[object Uint16Array]"]=Qg["[object Uint32Array]"]=!0,Qg["[object Arguments]"]=Qg["[object Array]"]=Qg["[object ArrayBuffer]"]=Qg["[object Boolean]"]=Qg["[object DataView]"]=Qg["[object Date]"]=Qg["[object Error]"]=Qg["[object Function]"]=Qg["[object Map]"]=Qg["[object Number]"]=Qg["[object Object]"]=Qg["[object RegExp]"]=Qg["[object Set]"]=Qg["[object String]"]=Qg["[object WeakMap]"]=!1;var Zg=n(3594),Kg=Zg.Z&&Zg.Z.isTypedArray;const $g=Kg?(Jg=Kg,function(t){return Jg(t)}):function(t){return Rg(t)&&Bg(t.length)&&!!Qg[Qv(t)]};var Jg;const ty=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var ey=Object.prototype.hasOwnProperty;const ny=function(t,e,n){var r=t[e];ey.call(t,e)&&Nv(r,n)&&(void 0!==n||e in t)||wg(t,e,n)};var ry=/^(?:0|[1-9]\d*)$/;const iy=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&ry.test(t))&&t>-1&&t%1==0&&t<e};var oy=Object.prototype.hasOwnProperty;const ay=function(t,e){var n=zg(t),r=!n&&Ug(t),i=!n&&!r&&(0,Hg.Z)(t),o=!n&&!r&&!i&&$g(t),a=n||r||i||o,s=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],u=s.length;for(var l in t)!e&&!oy.call(t,l)||a&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||iy(l,u))||s.push(l);return s};var sy=Object.prototype.hasOwnProperty;const uy=function(t){if(!Zv(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Lg(t),n=[];for(var r in t)("constructor"!=r||!e&&sy.call(t,r))&&n.push(r);return n},ly=function(t){return Vg(t)?ay(t,!0):uy(t)},cy=function(t){return function(t,e,n,r){var i=!n;n||(n={});for(var o=-1,a=e.length;++o<a;){var s=e[o],u=r?r(n[s],t[s],s,n,t):void 0;void 0===u&&(u=t[s]),i?wg(n,s,u):ny(n,s,u)}return n}(t,ly(t))},hy=function(t,e,n,r,i,o,a){var s,u=ty(t,n),l=ty(e,n),c=a.get(l);if(c)Eg(t,n,c);else{var h=o?o(u,l,n+"",t,e,a):void 0,f=void 0===h;if(f){var p=zg(l),d=!p&&(0,Hg.Z)(l),m=!p&&!d&&$g(l);h=l,p||d||m?zg(u)?h=u:Rg(s=u)&&Vg(s)?h=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(u):d?(f=!1,h=(0,Tg.Z)(l,!0)):m?(f=!1,h=Mg(l,!0)):h=[]:function(t){if(!Rg(t)||"[object Object]"!=Qv(t))return!1;var e=kg(t);if(null===e)return!0;var n=Xg.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&qg.call(n)==Yg}(l)||Ug(l)?(h=u,Ug(u)?h=cy(u):Zv(u)&&!Kv(u)||(h=function(t){return"function"!=typeof t.constructor||Lg(t)?{}:Og(kg(t))}(l))):f=!1}f&&(a.set(l,h),i(h,l,r,o,a),a.delete(l)),Eg(t,n,h)}},fy=function t(e,n,r,i,o){e!==n&&Sg(n,(function(a,s){if(o||(o=new _g),Zv(a))hy(e,n,s,r,t,i,o);else{var u=i?i(ty(e,s),a,s+"",e,n,o):void 0;void 0===u&&(u=a),Eg(e,s,u)}}),ly)},py=function(t){return t},dy=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)};var my=Math.max;const vy=xg?function(t,e){return xg(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:py;var gy=Date.now;const yy=function(t){var e=0,n=0;return function(){var r=gy(),i=16-(r-n);if(n=r,i>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(vy),by=(_y=function(t,e,n){fy(t,e,n)},function(t,e){return yy(function(t,e,n){return e=my(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=my(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=Array(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),dy(t,this,s)}}(t,e,py),t+"")}((function(t,e){var n=-1,r=e.length,i=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(i=_y.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(t,e,n){if(!Zv(n))return!1;var r=typeof e;return!!("number"==r?Vg(n)&&iy(e,n.length):"string"==r&&e in n)&&Nv(n[e],t)}(e[0],e[1],o)&&(i=r<3?void 0:i,r=1),t=Object(t);++n<r;){var a=e[n];a&&_y(t,a,n)}return t})));var _y,xy=function(t){var e=t.zDepth,n=t.radius,r=t.background,i=t.children,a=t.styles,s=void 0===a?{}:a,u=(0,mv.ZP)(by({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+e+"px "+4*e+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===e});return o.createElement("div",{style:u.wrap},o.createElement("div",{style:u.bg}),o.createElement("div",{style:u.content},i))};xy.propTypes={background:l().string,zDepth:l().oneOf([0,1,2,3,4,5]),radius:l().number,styles:l().object},xy.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};const wy=xy,Ey=function(){return Bv.Z.Date.now()},Sy=function(t){return"symbol"==typeof t||Rg(t)&&"[object Symbol]"==Qv(t)};var Ty=/^\s+|\s+$/g,Ay=/^[-+]0x[0-9a-f]+$/i,My=/^0b[01]+$/i,Cy=/^0o[0-7]+$/i,Oy=parseInt;const Py=function(t){if("number"==typeof t)return t;if(Sy(t))return NaN;if(Zv(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Zv(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(Ty,"");var n=My.test(t);return n||Cy.test(t)?Oy(t.slice(2),n?2:8):Ay.test(t)?NaN:+t};var ky=Math.max,Iy=Math.min;const Ly=function(t,e,n){var r,i,o,a,s,u,l=0,c=!1,h=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function p(e){var n=r,o=i;return r=i=void 0,l=e,a=t.apply(o,n)}function d(t){return l=t,s=setTimeout(v,e),c?p(t):a}function m(t){var n=t-u;return void 0===u||n>=e||n<0||h&&t-l>=o}function v(){var t=Ey();if(m(t))return g(t);s=setTimeout(v,function(t){var n=e-(t-u);return h?Iy(n,o-(t-l)):n}(t))}function g(t){return s=void 0,f&&r?p(t):(r=i=void 0,a)}function y(){var t=Ey(),n=m(t);if(r=arguments,i=this,u=t,n){if(void 0===s)return d(u);if(h)return clearTimeout(s),s=setTimeout(v,e),p(u)}return void 0===s&&(s=setTimeout(v,e)),a}return e=Py(e)||0,Zv(n)&&(c=!!n.leading,o=(h="maxWait"in n)?ky(Py(n.maxWait)||0,e):o,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=u=i=s=void 0},y.flush=function(){return void 0===s?a:g(Ey())},y};var Ry=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();const Dy=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.handleChange=function(t){"function"==typeof n.props.onChange&&n.throttle(n.props.onChange,function(t,e,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"==typeof t.pageX?t.pageX:t.touches[0].pageX,s="number"==typeof t.pageY?t.pageY:t.touches[0].pageY,u=a-(n.getBoundingClientRect().left+window.pageXOffset),l=s-(n.getBoundingClientRect().top+window.pageYOffset);u<0?u=0:u>i&&(u=i),l<0?l=0:l>o&&(l=o);var c=u/i,h=1-l/o;return{h:e.h,s:c,v:h,a:e.a,source:"hsv"}}(t,n.props.hsl,n.container),t)},n.handleMouseDown=function(t){n.handleChange(t);var e=n.getContainerRenderWindow();e.addEventListener("mousemove",n.handleChange),e.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return Zv(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ly(t,e,{leading:r,maxWait:e,trailing:i})}((function(t,e,n){t(e,n)}),50),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),Ry(e,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var t=this.container,e=window;!e.document.contains(t)&&e.parent!==e;)e=e.parent;return e}},{key:"unbindEventListeners",value:function(){var t=this.getContainerRenderWindow();t.removeEventListener("mousemove",this.handleChange),t.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var t=this,e=this.props.style||{},n=e.color,r=e.white,i=e.black,a=e.pointer,s=e.circle,u=(0,mv.ZP)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:a,circle:s}},{custom:!!this.props.style});return o.createElement("div",{style:u.color,ref:function(e){return t.container=e},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},o.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),o.createElement("div",{style:u.white,className:"saturation-white"},o.createElement("div",{style:u.black,className:"saturation-black"}),o.createElement("div",{style:u.pointer},this.props.pointer?o.createElement(this.props.pointer,this.props):o.createElement("div",{style:u.circle}))))}}]),e}(o.PureComponent||o.Component),Ny=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t},Fy=Pg(Object.keys,Object);var jy=Object.prototype.hasOwnProperty;const Uy=function(t){return Vg(t)?ay(t):function(t){if(!Lg(t))return Fy(t);var e=[];for(var n in Object(t))jy.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)},zy=function(t,e){if(null==t)return t;if(!Vg(t))return function(t,e){return t&&Sg(t,e,Uy)}(t,e);for(var n=t.length,r=-1,i=Object(t);++r<n&&!1!==e(i[r],r,i););return t},By=function(t,e){return(zg(t)?Ny:zy)(t,"function"==typeof(n=e)?n:py);var n};var Vy=n(3198),Hy=n.n(Vy),Gy=function(t){var e=0,n=0;return By(["r","g","b","a","h","s","l","v"],(function(r){t[r]&&(e+=1,isNaN(t[r])||(n+=1),"s"===r||"l"===r)&&/^\d+%$/.test(t[r])&&(n+=1)})),e===n&&t},Wy=function(t,e){var n=t.hex?Hy()(t.hex):Hy()(t),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=e||0,i.h=e||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:t.h||e||r.h,source:t.source}},qy=function(t){if("transparent"===t)return!0;var e="#"===String(t).charAt(0)?1:0;return t.length!==4+e&&t.length<7+e&&Hy()(t).isValid()},Xy=function(t){if(!t)return"#fff";var e=Wy(t);return"transparent"===e.hex?"rgba(0,0,0,0.4)":(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000":"#fff"},Yy=function(t,e){var n=t.replace("°","");return Hy()(e+" ("+n+")")._ok},Qy=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zy=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();const Ky=function(t){var e=function(e){function n(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return e.handleChange=function(t,n){if(Gy(t)){var r=Wy(t,t.h||e.state.oldHue);e.setState(r),e.props.onChangeComplete&&e.debounce(e.props.onChangeComplete,r,n),e.props.onChange&&e.props.onChange(r,n)}},e.handleSwatchHover=function(t,n){if(Gy(t)){var r=Wy(t,t.h||e.state.oldHue);e.props.onSwatchHover&&e.props.onSwatchHover(r,n)}},e.state=Qy({},Wy(t.color,0)),e.debounce=Ly((function(t,e,n){t(e,n)}),100),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(n,e),Zy(n,[{key:"render",value:function(){var e={};return this.props.onSwatchHover&&(e.onSwatchHover=this.handleSwatchHover),o.createElement(t,Qy({},this.props,this.state,{onChange:this.handleChange},e))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return Qy({},Wy(t.color,e.oldHue))}}]),n}(o.PureComponent||o.Component);return e.propTypes=Qy({},t.propTypes),e.defaultProps=Qy({},t.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),e};var $y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jy=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function tb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eb(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function nb(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var rb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};const ib=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var t,e,n;tb(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=n=eb(this,(t=r.__proto__||Object.getPrototypeOf(r)).call.apply(t,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},eb(n,e)}return nb(r,n),Jy(r,[{key:"render",value:function(){return o.createElement(e,{onFocus:this.handleFocus,onBlur:this.handleBlur},o.createElement(t,$y({},this.props,this.state)))}}]),r}(o.Component)}((function(t){var e=t.color,n=t.style,r=t.onClick,i=void 0===r?function(){}:r,a=t.onHover,s=t.title,u=void 0===s?e:s,l=t.children,c=t.focus,h=t.focusStyle,f=void 0===h?{}:h,p="transparent"===e,d=(0,mv.ZP)({default:{swatch:rb({background:e,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?f:{})}}),m={};return a&&(m.onMouseOver=function(t){return a(e,t)}),o.createElement("div",rb({style:d.swatch,onClick:function(t){return i(e,t)},title:u,tabIndex:0,onKeyDown:function(t){return 13===t.keyCode&&i(e,t)}},m),l,p&&o.createElement(xv,{borderRadius:d.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))}));var ob=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ab=function(t){var e=t.rgb,n=t.hsl,r=t.width,i=t.height,a=t.onChange,s=t.direction,u=t.style,l=t.renderers,c=t.pointer,h=t.className,f=void 0===h?"":h,p=(0,mv.ZP)({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:u}}});return o.createElement("div",{style:p.picker,className:"alpha-picker "+f},o.createElement(Av,ob({},p.alpha,{rgb:e,hsl:n,pointer:c,renderers:l,onChange:a,direction:s})))};ab.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(t){var e=t.direction,n=(0,mv.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return o.createElement("div",{style:n.picker})}},Ky(ab);const sb=function(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i};function ub(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new yg;++e<n;)this.add(t[e])}ub.prototype.add=ub.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},ub.prototype.has=function(t){return this.__data__.has(t)};const lb=ub,cb=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},hb=function(t,e){return t.has(e)},fb=function(t,e,n,r,i,o){var a=1&n,s=t.length,u=e.length;if(s!=u&&!(a&&u>s))return!1;var l=o.get(t);if(l&&o.get(e))return l==e;var c=-1,h=!0,f=2&n?new lb:void 0;for(o.set(t,e),o.set(e,t);++c<s;){var p=t[c],d=e[c];if(r)var m=a?r(d,p,c,e,t,o):r(p,d,c,t,e,o);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!cb(e,(function(t,e){if(!hb(f,e)&&(p===t||i(p,t,n,r,o)))return f.push(e)}))){h=!1;break}}else if(p!==d&&!i(p,d,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},pb=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},db=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var mb=Vv?Vv.prototype:void 0,vb=mb?mb.valueOf:void 0;var gb=Object.prototype.propertyIsEnumerable,yb=Object.getOwnPropertySymbols;const bb=yb?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}(yb(t),(function(e){return gb.call(t,e)})))}:function(){return[]},_b=function(t){return function(t,e,n){var r=e(t);return zg(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,Uy,bb)};var xb=Object.prototype.hasOwnProperty;const wb=lg(Bv.Z,"DataView"),Eb=lg(Bv.Z,"Promise"),Sb=lg(Bv.Z,"Set"),Tb=lg(Bv.Z,"WeakMap");var Ab="[object Map]",Mb="[object Promise]",Cb="[object Set]",Ob="[object WeakMap]",Pb="[object DataView]",kb=eg(wb),Ib=eg(cg),Lb=eg(Eb),Rb=eg(Sb),Db=eg(Tb),Nb=Qv;(wb&&Nb(new wb(new ArrayBuffer(1)))!=Pb||cg&&Nb(new cg)!=Ab||Eb&&Nb(Eb.resolve())!=Mb||Sb&&Nb(new Sb)!=Cb||Tb&&Nb(new Tb)!=Ob)&&(Nb=function(t){var e=Qv(t),n="[object Object]"==e?t.constructor:void 0,r=n?eg(n):"";if(r)switch(r){case kb:return Pb;case Ib:return Ab;case Lb:return Mb;case Rb:return Cb;case Db:return Ob}return e});const Fb=Nb;var jb="[object Arguments]",Ub="[object Array]",zb="[object Object]",Bb=Object.prototype.hasOwnProperty;const Vb=function(t,e,n,r,i,o){var a=zg(t),s=zg(e),u=a?Ub:Fb(t),l=s?Ub:Fb(e),c=(u=u==jb?zb:u)==zb,h=(l=l==jb?zb:l)==zb,f=u==l;if(f&&(0,Hg.Z)(t)){if(!(0,Hg.Z)(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new _g),a||$g(t)?fb(t,e,n,r,i,o):function(t,e,n,r,i,o,a){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Ag(t),new Ag(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Nv(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var s=pb;case"[object Set]":var u=1&r;if(s||(s=db),t.size!=e.size&&!u)return!1;var l=a.get(t);if(l)return l==e;r|=2,a.set(t,e);var c=fb(s(t),s(e),r,i,o,a);return a.delete(t),c;case"[object Symbol]":if(vb)return vb.call(t)==vb.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){var p=c&&Bb.call(t,"__wrapped__"),d=h&&Bb.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return o||(o=new _g),i(m,v,n,r,o)}}return!!f&&(o||(o=new _g),function(t,e,n,r,i,o){var a=1&n,s=_b(t),u=s.length;if(u!=_b(e).length&&!a)return!1;for(var l=u;l--;){var c=s[l];if(!(a?c in e:xb.call(e,c)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var f=!0;o.set(t,e),o.set(e,t);for(var p=a;++l<u;){var d=t[c=s[l]],m=e[c];if(r)var v=a?r(m,d,c,e,t,o):r(d,m,c,t,e,o);if(!(void 0===v?d===m||i(d,m,n,r,o):v)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var g=t.constructor,y=e.constructor;g==y||!("constructor"in t)||!("constructor"in e)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(f=!1)}return o.delete(t),o.delete(e),f}(t,e,n,r,i,o))},Hb=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Rg(e)&&!Rg(n)?e!=e&&n!=n:Vb(e,n,r,i,t,o))},Gb=function(t){return t==t&&!Zv(t)},Wb=function(t,e){return function(n){return null!=n&&n[t]===e&&(void 0!==e||t in Object(n))}},qb=function(t){var e=function(t){for(var e=Uy(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,Gb(i)]}return e}(t);return 1==e.length&&e[0][2]?Wb(e[0][0],e[0][1]):function(n){return n===t||function(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var s=n[i];if(a&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++i<o;){var u=(s=n[i])[0],l=t[u],c=s[1];if(a&&s[2]){if(void 0===l&&!(u in t))return!1}else{var h=new _g;if(r)var f=r(l,c,u,t,e,h);if(!(void 0===f?Hb(c,l,3,r,h):f))return!1}}return!0}(n,t,e)}};var Xb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Yb=/^\w*$/;const Qb=function(t,e){if(zg(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Sy(t))||Yb.test(t)||!Xb.test(t)||null!=e&&t in Object(e)};function Zb(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(Zb.Cache||yg),n}Zb.Cache=yg;const Kb=Zb;var $b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Jb=/\\(\\)?/g;const t_=function(t){var e=Kb((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace($b,(function(t,n,r,i){e.push(r?i.replace(Jb,"$1"):n||t)})),e}),(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}();var e_=Vv?Vv.prototype:void 0,n_=e_?e_.toString:void 0;const r_=function t(e){if("string"==typeof e)return e;if(zg(e))return sb(e,t)+"";if(Sy(e))return n_?n_.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},i_=function(t){return null==t?"":r_(t)},o_=function(t,e){return zg(t)?t:Qb(t,e)?[t]:t_(i_(t))},a_=function(t){if("string"==typeof t||Sy(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},s_=function(t,e){for(var n=0,r=(e=o_(e,t)).length;null!=t&&n<r;)t=t[a_(e[n++])];return n&&n==r?t:void 0},u_=function(t,e){return null!=t&&e in Object(t)},l_=function(t,e){return null!=t&&function(t,e,n){for(var r=-1,i=(e=o_(e,t)).length,o=!1;++r<i;){var a=a_(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Bg(i)&&iy(a,i)&&(zg(t)||Ug(t))}(t,e,u_)},c_=function(t,e){return Qb(t)&&Gb(e)?Wb(a_(t),e):function(n){var r=function(t,e,n){var r=null==t?void 0:s_(t,e);return void 0===r?n:r}(n,t);return void 0===r&&r===e?l_(n,t):Hb(e,r,3)}},h_=function(t){return Qb(t)?(e=a_(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return s_(e,t)}}(t);var e},f_=function(t,e){var n=-1,r=Vg(t)?Array(t.length):[];return zy(t,(function(t,i,o){r[++n]=e(t,i,o)})),r},p_=function(t,e){return(zg(t)?sb:f_)(t,"function"==typeof(n=e)?n:null==n?py:"object"==typeof n?zg(n)?c_(n[0],n[1]):qb(n):h_(n));var n},d_=function(t){var e=t.colors,n=t.onClick,r=t.onSwatchHover,i=(0,mv.ZP)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return o.createElement("div",{style:i.swatches},p_(e,(function(t){return o.createElement(ib,{key:t,color:t,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+t}})})),o.createElement("div",{style:i.clear}))};var m_=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,i=t.colors,a=t.width,s=t.triangle,u=t.styles,l=void 0===u?{}:u,c=t.className,h=void 0===c?"":c,f="transparent"===r,p=function(t,n){qy(t)&&e({hex:t,source:"hex"},n)},d=(0,mv.ZP)(by({default:{card:{width:a,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Xy(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},l),{"hide-triangle":"hide"===s});return o.createElement("div",{style:d.card,className:"block-picker "+h},o.createElement("div",{style:d.triangle}),o.createElement("div",{style:d.head},f&&o.createElement(xv,{borderRadius:"6px 6px 0 0"}),o.createElement("div",{style:d.label},r)),o.createElement("div",{style:d.body},o.createElement(d_,{colors:i,onClick:p,onSwatchHover:n}),o.createElement(Pv,{style:{input:d.input},value:r,onChange:p})))};m_.propTypes={width:l().oneOfType([l().string,l().number]),colors:l().arrayOf(l().string),triangle:l().oneOf(["top","hide"]),styles:l().object},m_.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}},Ky(m_);var v_="#ffcdd2",g_="#e57373",y_="#f44336",b_="#d32f2f",__="#b71c1c",x_="#f8bbd0",w_="#f06292",E_="#e91e63",S_="#c2185b",T_="#880e4f",A_="#e1bee7",M_="#ba68c8",C_="#9c27b0",O_="#7b1fa2",P_="#4a148c",k_="#d1c4e9",I_="#9575cd",L_="#673ab7",R_="#512da8",D_="#311b92",N_="#c5cae9",F_="#7986cb",j_="#3f51b5",U_="#303f9f",z_="#1a237e",B_="#bbdefb",V_="#64b5f6",H_="#2196f3",G_="#1976d2",W_="#0d47a1",q_="#b3e5fc",X_="#4fc3f7",Y_="#03a9f4",Q_="#0288d1",Z_="#01579b",K_="#b2ebf2",$_="#4dd0e1",J_="#00bcd4",tx="#0097a7",ex="#006064",nx="#b2dfdb",rx="#4db6ac",ix="#009688",ox="#00796b",ax="#004d40",sx="#c8e6c9",ux="#81c784",lx="#4caf50",cx="#388e3c",hx="#dcedc8",fx="#aed581",px="#8bc34a",dx="#689f38",mx="#33691e",vx="#f0f4c3",gx="#dce775",yx="#cddc39",bx="#afb42b",_x="#827717",xx="#fff9c4",wx="#fff176",Ex="#ffeb3b",Sx="#fbc02d",Tx="#f57f17",Ax="#ffecb3",Mx="#ffd54f",Cx="#ffc107",Ox="#ffa000",Px="#ff6f00",kx="#ffe0b2",Ix="#ffb74d",Lx="#ff9800",Rx="#f57c00",Dx="#e65100",Nx="#ffccbc",Fx="#ff8a65",jx="#ff5722",Ux="#e64a19",zx="#bf360c",Bx="#d7ccc8",Vx="#a1887f",Hx="#795548",Gx="#5d4037",Wx="#3e2723",qx="#cfd8dc",Xx="#90a4ae",Yx="#607d8b",Qx="#455a64",Zx="#263238",Kx=function(t){var e=t.color,n=t.onClick,r=t.onSwatchHover,i=t.hover,a=t.active,s=t.circleSize,u=t.circleSpacing,l=(0,mv.ZP)({default:{swatch:{width:s,height:s,marginRight:u,marginBottom:u,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+e,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+e}}},{hover:i,active:a});return o.createElement("div",{style:l.swatch},o.createElement(ib,{style:l.Swatch,color:e,onClick:n,onHover:r,focusStyle:{boxShadow:l.Swatch.boxShadow+", 0 0 5px "+e}}))};Kx.defaultProps={circleSize:28,circleSpacing:14};const $x=(0,mv.tz)(Kx);var Jx=function(t){var e=t.width,n=t.onChange,r=t.onSwatchHover,i=t.colors,a=t.hex,s=t.circleSize,u=t.styles,l=void 0===u?{}:u,c=t.circleSpacing,h=t.className,f=void 0===h?"":h,p=(0,mv.ZP)(by({default:{card:{width:e,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},l)),d=function(t,e){return n({hex:t,source:"hex"},e)};return o.createElement("div",{style:p.card,className:"circle-picker "+f},p_(i,(function(t){return o.createElement($x,{key:t,color:t,onClick:d,onSwatchHover:r,active:a===t.toLowerCase(),circleSize:s,circleSpacing:c})})))};Jx.propTypes={width:l().oneOfType([l().string,l().number]),circleSize:l().number,circleSpacing:l().number,styles:l().object},Jx.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[y_,E_,C_,L_,j_,H_,Y_,J_,ix,lx,px,yx,Ex,Cx,Lx,jx,Hx,Yx],styles:{}},Ky(Jx);const tw=function(t){return void 0===t};var ew=n(7343),nw=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),rw=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(t,e){t.hex?qy(t.hex)&&n.props.onChange({hex:t.hex,source:"hex"},e):t.r||t.g||t.b?n.props.onChange({r:t.r||n.props.rgb.r,g:t.g||n.props.rgb.g,b:t.b||n.props.rgb.b,source:"rgb"},e):t.a?(t.a<0?t.a=0:t.a>1&&(t.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*t.a)/100,source:"rgb"},e)):(t.h||t.s||t.l)&&("string"==typeof t.s&&t.s.includes("%")&&(t.s=t.s.replace("%","")),"string"==typeof t.l&&t.l.includes("%")&&(t.l=t.l.replace("%","")),1==t.s?t.s=.01:1==t.l&&(t.l=.01),n.props.onChange({h:t.h||n.props.hsl.h,s:Number(tw(t.s)?n.props.hsl.s:t.s),l:Number(tw(t.l)?n.props.hsl.l:t.l),source:"hsl"},e))},n.showHighlight=function(t){t.currentTarget.style.background="#eee"},n.hideHighlight=function(t){t.currentTarget.style.background="transparent"},1!==t.hsl.a&&"hex"===t.view?n.state={view:"rgb"}:n.state={view:t.view},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),nw(e,[{key:"render",value:function(){var t=this,e=(0,mv.ZP)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=o.createElement("div",{style:e.fields,className:"flexbox-fix"},o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=o.createElement("div",{style:e.fields,className:"flexbox-fix"},o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),o.createElement("div",{style:e.alpha},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=o.createElement("div",{style:e.fields,className:"flexbox-fix"},o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),o.createElement("div",{style:e.field},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),o.createElement("div",{style:e.alpha},o.createElement(Pv,{style:{input:e.input,label:e.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),o.createElement("div",{style:e.wrap,className:"flexbox-fix"},n,o.createElement("div",{style:e.toggle},o.createElement("div",{style:e.icon,onClick:this.toggleViews,ref:function(e){return t.icon=e}},o.createElement(ew.Z,{style:e.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(t,e){return 1!==t.hsl.a&&"hex"===e.view?{view:"rgb"}:null}}]),e}(o.Component);rw.defaultProps={view:"hex"};const iw=rw,ow=function(){var t=(0,mv.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.createElement("div",{style:t.picker})},aw=function(){var t=(0,mv.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return o.createElement("div",{style:t.picker})};var sw=function(t){var e=t.width,n=t.onChange,r=t.disableAlpha,i=t.rgb,a=t.hsl,s=t.hsv,u=t.hex,l=t.renderers,c=t.styles,h=void 0===c?{}:c,f=t.className,p=void 0===f?"":f,d=t.defaultView,m=(0,mv.ZP)(by({default:{picker:{width:e,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:r});return o.createElement("div",{style:m.picker,className:"chrome-picker "+p},o.createElement("div",{style:m.saturation},o.createElement(Dy,{style:m.Saturation,hsl:a,hsv:s,pointer:aw,onChange:n})),o.createElement("div",{style:m.body},o.createElement("div",{style:m.controls,className:"flexbox-fix"},o.createElement("div",{style:m.color},o.createElement("div",{style:m.swatch},o.createElement("div",{style:m.active}),o.createElement(xv,{renderers:l}))),o.createElement("div",{style:m.toggles},o.createElement("div",{style:m.hue},o.createElement(Dv,{style:m.Hue,hsl:a,pointer:ow,onChange:n})),o.createElement("div",{style:m.alpha},o.createElement(Av,{style:m.Alpha,rgb:i,hsl:a,pointer:ow,renderers:l,onChange:n})))),o.createElement(iw,{rgb:i,hsl:a,hex:u,view:d,onChange:n,disableAlpha:r})))};sw.propTypes={width:l().oneOfType([l().string,l().number]),disableAlpha:l().bool,styles:l().object,defaultView:l().oneOf(["hex","rgb","hsl"])},sw.defaultProps={width:225,disableAlpha:!1,styles:{}},Ky(sw);const uw=function(t){var e=t.color,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,a=t.active,s=(0,mv.ZP)({default:{color:{background:e,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Xy(e),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:a,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return o.createElement(ib,{style:s.color,color:e,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},o.createElement("div",{style:s.dot}))},lw=function(t){var e=t.hex,n=t.rgb,r=t.onChange,i=(0,mv.ZP)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:e},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),a=function(t,e){t.r||t.g||t.b?r({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},e):r({hex:t.hex,source:"hex"},e)};return o.createElement("div",{style:i.fields,className:"flexbox-fix"},o.createElement("div",{style:i.active}),o.createElement(Pv,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:e,onChange:a}),o.createElement(Pv,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:a}),o.createElement(Pv,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:a}),o.createElement(Pv,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:a}))};var cw=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.colors,i=t.hex,a=t.rgb,s=t.styles,u=void 0===s?{}:s,l=t.className,c=void 0===l?"":l,h=(0,mv.ZP)(by({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},u)),f=function(t,n){t.hex?qy(t.hex)&&e({hex:t.hex,source:"hex"},n):e(t,n)};return o.createElement(wy,{style:h.Compact,styles:u},o.createElement("div",{style:h.compact,className:"compact-picker "+c},o.createElement("div",null,p_(r,(function(t){return o.createElement(uw,{key:t,color:t,active:t.toLowerCase()===i,onClick:f,onSwatchHover:n})})),o.createElement("div",{style:h.clear})),o.createElement(lw,{hex:i,rgb:a,onChange:f})))};cw.propTypes={colors:l().arrayOf(l().string),styles:l().object},cw.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}},Ky(cw);const hw=(0,mv.tz)((function(t){var e=t.hover,n=t.color,r=t.onClick,i=t.onSwatchHover,a={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,mv.ZP)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:a}},{hover:e});return o.createElement("div",{style:s.swatch},o.createElement(ib,{color:n,onClick:r,onHover:i,focusStyle:a}))}));var fw=function(t){var e=t.width,n=t.colors,r=t.onChange,i=t.onSwatchHover,a=t.triangle,s=t.styles,u=void 0===s?{}:s,l=t.className,c=void 0===l?"":l,h=(0,mv.ZP)(by({default:{card:{width:e,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},u),{"hide-triangle":"hide"===a,"top-left-triangle":"top-left"===a,"top-right-triangle":"top-right"===a,"bottom-left-triangle":"bottom-left"===a,"bottom-right-triangle":"bottom-right"===a}),f=function(t,e){return r({hex:t,source:"hex"},e)};return o.createElement("div",{style:h.card,className:"github-picker "+c},o.createElement("div",{style:h.triangleShadow}),o.createElement("div",{style:h.triangle}),p_(n,(function(t){return o.createElement(hw,{color:t,key:t,onClick:f,onSwatchHover:i})})))};fw.propTypes={width:l().oneOfType([l().string,l().number]),colors:l().arrayOf(l().string),triangle:l().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:l().object},fw.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}},Ky(fw);var pw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dw=function(t){var e=t.width,n=t.height,r=t.onChange,i=t.hsl,a=t.direction,s=t.pointer,u=t.styles,l=void 0===u?{}:u,c=t.className,h=void 0===c?"":c,f=(0,mv.ZP)(by({default:{picker:{position:"relative",width:e,height:n},hue:{radius:"2px"}}},l));return o.createElement("div",{style:f.picker,className:"hue-picker "+h},o.createElement(Dv,pw({},f.hue,{hsl:i,pointer:s,onChange:function(t){return r({a:1,h:t.h,l:.5,s:1})},direction:a})))};dw.propTypes={styles:l().object},dw.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:function(t){var e=t.direction,n=(0,mv.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===e});return o.createElement("div",{style:n.picker})},styles:{}},Ky(dw),Ky((function(t){var e=t.onChange,n=t.hex,r=t.rgb,i=t.styles,a=void 0===i?{}:i,s=t.className,u=void 0===s?"":s,l=(0,mv.ZP)(by({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},a)),c=function(t,n){t.hex?qy(t.hex)&&e({hex:t.hex,source:"hex"},n):(t.r||t.g||t.b)&&e({r:t.r||r.r,g:t.g||r.g,b:t.b||r.b,source:"rgb"},n)};return o.createElement(wy,{styles:a},o.createElement("div",{style:l.material,className:"material-picker "+u},o.createElement(Pv,{style:{wrap:l.HEXwrap,input:l.HEXinput,label:l.HEXlabel},label:"hex",value:n,onChange:c}),o.createElement("div",{style:l.split,className:"flexbox-fix"},o.createElement("div",{style:l.third},o.createElement(Pv,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"r",value:r.r,onChange:c})),o.createElement("div",{style:l.third},o.createElement(Pv,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"g",value:r.g,onChange:c})),o.createElement("div",{style:l.third},o.createElement(Pv,{style:{wrap:l.RGBwrap,input:l.RGBinput,label:l.RGBlabel},label:"b",value:r.b,onChange:c})))))}));const mw=function(t){var e=t.onChange,n=t.rgb,r=t.hsv,i=t.hex,a=(0,mv.ZP)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(t,i){t["#"]?qy(t["#"])&&e({hex:t["#"],source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,source:"rgb"},i):(t.h||t.s||t.v)&&e({h:t.h||r.h,s:t.s||r.s,v:t.v||r.v,source:"hsv"},i)};return o.createElement("div",{style:a.fields},o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),o.createElement("div",{style:a.divider}),o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"r",value:n.r,onChange:s}),o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"g",value:n.g,onChange:s}),o.createElement(Pv,{style:{wrap:a.RGBwrap,input:a.RGBinput,label:a.RGBlabel},label:"b",value:n.b,onChange:s}),o.createElement("div",{style:a.divider}),o.createElement(Pv,{style:{wrap:a.HEXwrap,input:a.HEXinput,label:a.HEXlabel},label:"#",value:i.replace("#",""),onChange:s}),o.createElement("div",{style:a.fieldSymbols},o.createElement("div",{style:a.symbol},"°"),o.createElement("div",{style:a.symbol},"%"),o.createElement("div",{style:a.symbol},"%")))},vw=function(t){var e=t.hsl,n=(0,mv.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":e.l>.5});return o.createElement("div",{style:n.picker})},gw=function(){var t=(0,mv.ZP)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return o.createElement("div",{style:t.pointer},o.createElement("div",{style:t.left},o.createElement("div",{style:t.leftInside})),o.createElement("div",{style:t.right},o.createElement("div",{style:t.rightInside})))},yw=function(t){var e=t.onClick,n=t.label,r=t.children,i=t.active,a=(0,mv.ZP)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return o.createElement("div",{style:a.button,onClick:e},n||r)},bw=function(t){var e=t.rgb,n=t.currentColor,r=(0,mv.ZP)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+e.r+","+e.g+", "+e.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return o.createElement("div",null,o.createElement("div",{style:r.label},"new"),o.createElement("div",{style:r.swatches},o.createElement("div",{style:r.new}),o.createElement("div",{style:r.current})),o.createElement("div",{style:r.label},"current"))};var _w=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),xw=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.state={currentColor:t.hex},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),_w(e,[{key:"render",value:function(){var t=this.props,e=t.styles,n=void 0===e?{}:e,r=t.className,i=void 0===r?"":r,a=(0,mv.ZP)(by({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return o.createElement("div",{style:a.picker,className:"photoshop-picker "+i},o.createElement("div",{style:a.head},this.props.header),o.createElement("div",{style:a.body,className:"flexbox-fix"},o.createElement("div",{style:a.saturation},o.createElement(Dy,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:vw,onChange:this.props.onChange})),o.createElement("div",{style:a.hue},o.createElement(Dv,{direction:"vertical",hsl:this.props.hsl,pointer:gw,onChange:this.props.onChange})),o.createElement("div",{style:a.controls},o.createElement("div",{style:a.top,className:"flexbox-fix"},o.createElement("div",{style:a.previews},o.createElement(bw,{rgb:this.props.rgb,currentColor:this.state.currentColor})),o.createElement("div",{style:a.actions},o.createElement(yw,{label:"OK",onClick:this.props.onAccept,active:!0}),o.createElement(yw,{label:"Cancel",onClick:this.props.onCancel}),o.createElement(mw,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),e}(o.Component);xw.propTypes={header:l().string,styles:l().object},xw.defaultProps={header:"Color Picker",styles:{}},Ky(xw);const ww=function(t){var e=t.onChange,n=t.rgb,r=t.hsl,i=t.hex,a=t.disableAlpha,s=(0,mv.ZP)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:a}),u=function(t,i){t.hex?qy(t.hex)&&e({hex:t.hex,source:"hex"},i):t.r||t.g||t.b?e({r:t.r||n.r,g:t.g||n.g,b:t.b||n.b,a:n.a,source:"rgb"},i):t.a&&(t.a<0?t.a=0:t.a>100&&(t.a=100),t.a/=100,e({h:r.h,s:r.s,l:r.l,a:t.a,source:"rgb"},i))};return o.createElement("div",{style:s.fields,className:"flexbox-fix"},o.createElement("div",{style:s.double},o.createElement(Pv,{style:{input:s.input,label:s.label},label:"hex",value:i.replace("#",""),onChange:u})),o.createElement("div",{style:s.single},o.createElement(Pv,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:u,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.single},o.createElement(Pv,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:u,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.single},o.createElement(Pv,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:u,dragLabel:"true",dragMax:"255"})),o.createElement("div",{style:s.alpha},o.createElement(Pv,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:u,dragLabel:"true",dragMax:"100"})))};var Ew=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Sw=function(t){var e=t.colors,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,a=(0,mv.ZP)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!e||!e.length}),s=function(t,e){r({hex:t,source:"hex"},e)};return o.createElement("div",{style:a.colors,className:"flexbox-fix"},e.map((function(t){var e="string"==typeof t?{color:t}:t,n=""+e.color+(e.title||"");return o.createElement("div",{key:n,style:a.swatchWrap},o.createElement(ib,Ew({},e,{style:a.swatch,onClick:s,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+e.color}})))})))};Sw.propTypes={colors:l().arrayOf(l().oneOfType([l().string,l().shape({color:l().string,title:l().string})])).isRequired};const Tw=Sw;var Aw=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw=function(t){var e=t.width,n=t.rgb,r=t.hex,i=t.hsv,a=t.hsl,s=t.onChange,u=t.onSwatchHover,l=t.disableAlpha,c=t.presetColors,h=t.renderers,f=t.styles,p=void 0===f?{}:f,d=t.className,m=void 0===d?"":d,v=(0,mv.ZP)(by({default:Aw({picker:{width:e,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},p),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},p),{disableAlpha:l});return o.createElement("div",{style:v.picker,className:"sketch-picker "+m},o.createElement("div",{style:v.saturation},o.createElement(Dy,{style:v.Saturation,hsl:a,hsv:i,onChange:s})),o.createElement("div",{style:v.controls,className:"flexbox-fix"},o.createElement("div",{style:v.sliders},o.createElement("div",{style:v.hue},o.createElement(Dv,{style:v.Hue,hsl:a,onChange:s})),o.createElement("div",{style:v.alpha},o.createElement(Av,{style:v.Alpha,rgb:n,hsl:a,renderers:h,onChange:s}))),o.createElement("div",{style:v.color},o.createElement(xv,null),o.createElement("div",{style:v.activeColor}))),o.createElement(ww,{rgb:n,hsl:a,hex:r,onChange:s,disableAlpha:l}),o.createElement(Tw,{colors:c,onClick:s,onSwatchHover:u}))};Mw.propTypes={disableAlpha:l().bool,width:l().oneOfType([l().string,l().number]),styles:l().object},Mw.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};const Cw=Ky(Mw),Ow=function(t){var e=t.hsl,n=t.offset,r=t.onClick,i=void 0===r?function(){}:r,a=t.active,s=t.first,u=t.last,l=(0,mv.ZP)({default:{swatch:{height:"12px",background:"hsl("+e.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:a,first:s,last:u});return o.createElement("div",{style:l.swatch,onClick:function(t){return i({h:e.h,s:.5,l:n,source:"hsl"},t)}})},Pw=function(t){var e=t.onClick,n=t.hsl,r=(0,mv.ZP)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return o.createElement("div",{style:r.swatches},o.createElement("div",{style:r.swatch},o.createElement(Ow,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:e,first:!0})),o.createElement("div",{style:r.swatch},o.createElement(Ow,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:e})),o.createElement("div",{style:r.swatch},o.createElement(Ow,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:e})),o.createElement("div",{style:r.swatch},o.createElement(Ow,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:e})),o.createElement("div",{style:r.swatch},o.createElement(Ow,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:e,last:!0})),o.createElement("div",{style:r.clear}))};var kw=function(t){var e=t.hsl,n=t.onChange,r=t.pointer,i=t.styles,a=void 0===i?{}:i,s=t.className,u=void 0===s?"":s,l=(0,mv.ZP)(by({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},a));return o.createElement("div",{style:l.wrap||{},className:"slider-picker "+u},o.createElement("div",{style:l.hue},o.createElement(Dv,{style:l.Hue,hsl:e,pointer:r,onChange:n})),o.createElement("div",{style:l.swatches},o.createElement(Pw,{hsl:e,onClick:n})))};kw.propTypes={styles:l().object},kw.defaultProps={pointer:function(){var t=(0,mv.ZP)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return o.createElement("div",{style:t.picker})},styles:{}},Ky(kw);var Iw=n(4471);const Lw=function(t){var e=t.color,n=t.onClick,r=void 0===n?function(){}:n,i=t.onSwatchHover,a=t.first,s=t.last,u=t.active,l=(0,mv.ZP)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:e,marginBottom:"1px"},check:{color:Xy(e),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:a,last:s,active:u,"color-#FFFFFF":"#FFFFFF"===e,transparent:"transparent"===e});return o.createElement(ib,{color:e,style:l.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+e}},o.createElement("div",{style:l.check},o.createElement(Iw.Z,null)))},Rw=function(t){var e=t.onClick,n=t.onSwatchHover,r=t.group,i=t.active,a=(0,mv.ZP)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return o.createElement("div",{style:a.group},p_(r,(function(t,a){return o.createElement(Lw,{key:t,color:t,active:t.toLowerCase()===i,first:0===a,last:a===r.length-1,onClick:e,onSwatchHover:n})})))};var Dw=function(t){var e=t.width,n=t.height,r=t.onChange,i=t.onSwatchHover,a=t.colors,s=t.hex,u=t.styles,l=void 0===u?{}:u,c=t.className,h=void 0===c?"":c,f=(0,mv.ZP)(by({default:{picker:{width:e,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},l)),p=function(t,e){return r({hex:t,source:"hex"},e)};return o.createElement("div",{style:f.picker,className:"swatches-picker "+h},o.createElement(wy,null,o.createElement("div",{style:f.overflow},o.createElement("div",{style:f.body},p_(a,(function(t){return o.createElement(Rw,{key:t.toString(),group:t,active:s,onClick:p,onSwatchHover:i})})),o.createElement("div",{style:f.clear})))))};Dw.propTypes={width:l().oneOfType([l().string,l().number]),height:l().oneOfType([l().string,l().number]),colors:l().arrayOf(l().arrayOf(l().string)),styles:l().object},Dw.defaultProps={width:320,height:240,colors:[[__,b_,y_,g_,v_],[T_,S_,E_,w_,x_],[P_,O_,C_,M_,A_],[D_,R_,L_,I_,k_],[z_,U_,j_,F_,N_],[W_,G_,H_,V_,B_],[Z_,Q_,Y_,X_,q_],[ex,tx,J_,$_,K_],[ax,ox,ix,rx,nx],["#194D33",cx,lx,ux,sx],[mx,dx,px,fx,hx],[_x,bx,yx,gx,vx],[Tx,Sx,Ex,wx,xx],[Px,Ox,Cx,Mx,Ax],[Dx,Rx,Lx,Ix,kx],[zx,Ux,jx,Fx,Nx],[Wx,Gx,Hx,Vx,Bx],[Zx,Qx,Yx,Xx,qx],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}},Ky(Dw);var Nw=function(t){var e=t.onChange,n=t.onSwatchHover,r=t.hex,i=t.colors,a=t.width,s=t.triangle,u=t.styles,l=void 0===u?{}:u,c=t.className,h=void 0===c?"":c,f=(0,mv.ZP)(by({default:{card:{width:a,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},l),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),p=function(t,n){qy(t)&&e({hex:t,source:"hex"},n)};return o.createElement("div",{style:f.card,className:"twitter-picker "+h},o.createElement("div",{style:f.triangleShadow}),o.createElement("div",{style:f.triangle}),o.createElement("div",{style:f.body},p_(i,(function(t,e){return o.createElement(ib,{key:e,color:t,hex:t,style:f.swatch,onClick:p,onHover:n,focusStyle:{boxShadow:"0 0 4px "+t}})})),o.createElement("div",{style:f.hash},"#"),o.createElement(Pv,{label:null,style:{input:f.input},value:r.replace("#",""),onChange:p}),o.createElement("div",{style:f.clear})))};Nw.propTypes={width:l().oneOfType([l().string,l().number]),triangle:l().oneOf(["hide","top-left","top-right"]),colors:l().arrayOf(l().string),styles:l().object},Nw.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}},Ky(Nw);var Fw=function(t){var e=(0,mv.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(t.hsl.h)+", "+Math.round(100*t.hsl.s)+"%, "+Math.round(100*t.hsl.l)+"%)"}}});return o.createElement("div",{style:e.picker})};Fw.propTypes={hsl:l().shape({h:l().number,s:l().number,l:l().number,a:l().number})},Fw.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const jw=Fw;var Uw=function(t){var e=(0,mv.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(t.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return o.createElement("div",{style:e.picker})};Uw.propTypes={hsl:l().shape({h:l().number,s:l().number,l:l().number,a:l().number})},Uw.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};const zw=Uw,Bw=function(t){var e=t.onChange,n=t.rgb,r=t.hsl,i=t.hex,a=t.hsv,s=function(t,n){if(t.hex)qy(t.hex)&&e({hex:t.hex,source:"hex"},n);else if(t.rgb){var r=t.rgb.split(",");Yy(t.rgb,"rgb")&&e({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(t.hsv){var i=t.hsv.split(",");Yy(t.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("°",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),e({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(t.hsl){var o=t.hsl.split(",");Yy(t.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("°",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),e({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},n))}},u=(0,mv.ZP)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),l=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"°, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(a.h)+"°, "+Math.round(100*a.s)+"%, "+Math.round(100*a.v)+"%";return o.createElement("div",{style:u.wrap,className:"flexbox-fix"},o.createElement("div",{style:u.fields},o.createElement("div",{style:u.double},o.createElement(Pv,{style:{input:u.input,label:u.label},label:"hex",value:i,onChange:s})),o.createElement("div",{style:u.column},o.createElement("div",{style:u.single},o.createElement(Pv,{style:{input:u.input2,label:u.label2},label:"rgb",value:l,onChange:s})),o.createElement("div",{style:u.single},o.createElement(Pv,{style:{input:u.input2,label:u.label2},label:"hsv",value:h,onChange:s})),o.createElement("div",{style:u.single},o.createElement(Pv,{style:{input:u.input2,label:u.label2},label:"hsl",value:c,onChange:s})))))};var Vw=function(t){var e=t.width,n=t.onChange,r=t.rgb,i=t.hsl,a=t.hsv,s=t.hex,u=t.header,l=t.styles,c=void 0===l?{}:l,h=t.className,f=void 0===h?"":h,p=(0,mv.ZP)(by({default:{picker:{width:e,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return o.createElement("div",{style:p.picker,className:"google-picker "+f},o.createElement("div",{style:p.head},u),o.createElement("div",{style:p.swatch}),o.createElement("div",{style:p.saturation},o.createElement(Dy,{hsl:i,hsv:a,pointer:jw,onChange:n})),o.createElement("div",{style:p.body},o.createElement("div",{style:p.controls,className:"flexbox-fix"},o.createElement("div",{style:p.hue},o.createElement(Dv,{style:p.Hue,hsl:i,radius:"4px",pointer:zw,onChange:n}))),o.createElement(Bw,{rgb:r,hsl:i,hex:s,hsv:a,onChange:n})))};function Hw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Gw(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hw(Object(n),!0).forEach((function(e){Ww(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hw(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ww(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qw(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Vw.propTypes={width:l().oneOfType([l().string,l().number]),styles:l().object,header:l().string},Vw.defaultProps={width:652,styles:{},header:"Color picker"},Ky(Vw),n(1635);const Xw=qt((function(t){return{user:t.user}}),{setUser:gn})((function(t){var e=t.user,n=t.setUser,r=(0,o.useContext)(Zd),i=r.currentUser?JSON.parse(r.currentUser.displayName):{},a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qw(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,o.useState)(e.color||me()),2),s=a[0],u=a[1];return(0,o.useEffect)((function(){u(e.color)}),[e.color]),o.createElement("div",null,o.createElement("div",null,o.createElement("span",null,"Email: "),e.email),o.createElement("div",null,o.createElement("span",null,"Color: "),o.createElement(Cw,{color:s,onChangeComplete:function(t){u(t.hex),r.currentUser.updateProfile({displayName:JSON.stringify(Gw(Gw({},i),{},{color:t.hex}))}).then((function(){console.log("set user",Gw(Gw({},e),{},{color:t.hex})),n(Gw(Gw({},e),{},{color:t.hex})),console.log("profile color updated: ",t.hex)})).catch((function(t){console.error(t)}))},onChange:function(t){u(t.hex)}})))}));function Yw(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function Qw(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){Yw(o,r,i,a,s,"next",t)}function s(t){Yw(o,r,i,a,s,"throw",t)}a(void 0)}))}}function Zw(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Kw=new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Zw(this,"toggle",(function(){return e.isRunning?e.stop():e.start()})),Zw(this,"start",Qw(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:xh.start("+0.1"),xh.loop=!0,xh.loopEnd="1:0:0",e.isRunning=!0;case 4:case"end":return t.stop()}}),t)})))),Zw(this,"stop",(function(){xh.stop(),e.isRunning=!1})),this.isRunning=!1,Rs.latencyHint="playback"};var $w=n(7620),Jw=n.n($w),tE=n(1272),eE=n.n(tE),nE=(n(4360),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:{});function rE(t,e){return t(e={exports:{}},e.exports),e.exports}var iE,oE,aE,sE=function(t){return t&&t.Math==Math&&t},uE=sE("object"==typeof globalThis&&globalThis)||sE("object"==typeof window&&window)||sE("object"==typeof self&&self)||sE("object"==typeof nE&&nE)||Function("return this")(),lE=function(t){try{return!!t()}catch(t){return!0}},cE=!lE((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),hE={}.propertyIsEnumerable,fE=Object.getOwnPropertyDescriptor,pE={f:fE&&!hE.call({1:2},1)?function(t){var e=fE(this,t);return!!e&&e.enumerable}:hE},dE=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},mE={}.toString,vE=function(t){return mE.call(t).slice(8,-1)},gE="".split,yE=lE((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==vE(t)?gE.call(t,""):Object(t)}:Object,bE=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},_E=function(t){return yE(bE(t))},xE=function(t){return"object"==typeof t?null!==t:"function"==typeof t},wE=function(t,e){if(!xE(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!xE(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!xE(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!xE(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},EE={}.hasOwnProperty,SE=function(t,e){return EE.call(t,e)},TE=uE.document,AE=xE(TE)&&xE(TE.createElement),ME=function(t){return AE?TE.createElement(t):{}},CE=!cE&&!lE((function(){return 7!=Object.defineProperty(ME("div"),"a",{get:function(){return 7}}).a})),OE=Object.getOwnPropertyDescriptor,PE={f:cE?OE:function(t,e){if(t=_E(t),e=wE(e,!0),CE)try{return OE(t,e)}catch(t){}if(SE(t,e))return dE(!pE.f.call(t,e),t[e])}},kE=function(t){if(!xE(t))throw TypeError(String(t)+" is not an object");return t},IE=Object.defineProperty,LE={f:cE?IE:function(t,e,n){if(kE(t),e=wE(e,!0),kE(n),CE)try{return IE(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},RE=cE?function(t,e,n){return LE.f(t,e,dE(1,n))}:function(t,e,n){return t[e]=n,t},DE=function(t,e){try{RE(uE,t,e)}catch(n){uE[t]=e}return e},NE="__core-js_shared__",FE=uE[NE]||DE(NE,{}),jE=rE((function(t){(t.exports=function(t,e){return FE[t]||(FE[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.3.6",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),UE=jE("native-function-to-string",Function.toString),zE=uE.WeakMap,BE="function"==typeof zE&&/native code/.test(UE.call(zE)),VE=0,HE=Math.random(),GE=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++VE+HE).toString(36)},WE=jE("keys"),qE=function(t){return WE[t]||(WE[t]=GE(t))},XE={},YE=uE.WeakMap;if(BE){var QE=new YE,ZE=QE.get,KE=QE.has,$E=QE.set;iE=function(t,e){return $E.call(QE,t,e),e},oE=function(t){return ZE.call(QE,t)||{}},aE=function(t){return KE.call(QE,t)}}else{var JE=qE("state");XE[JE]=!0,iE=function(t,e){return RE(t,JE,e),e},oE=function(t){return SE(t,JE)?t[JE]:{}},aE=function(t){return SE(t,JE)}}var tS,eS,nS={set:iE,get:oE,has:aE,enforce:function(t){return aE(t)?oE(t):iE(t,{})},getterFor:function(t){return function(e){var n;if(!xE(e)||(n=oE(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},rS=rE((function(t){var e=nS.get,n=nS.enforce,r=String(UE).split("toString");jE("inspectSource",(function(t){return UE.call(t)})),(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,s=!!o&&!!o.enumerable,u=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||SE(i,"name")||RE(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==uE?(a?!u&&t[e]&&(s=!0):delete t[e],s?t[e]=i:RE(t,e,i)):s?t[e]=i:DE(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||UE.call(this)}))})),iS=uE,oS=function(t){return"function"==typeof t?t:void 0},aS=function(t,e){return arguments.length<2?oS(iS[t])||oS(uE[t]):iS[t]&&iS[t][e]||uE[t]&&uE[t][e]},sS=Math.ceil,uS=Math.floor,lS=function(t){return isNaN(t=+t)?0:(t>0?uS:sS)(t)},cS=Math.min,hS=function(t){return t>0?cS(lS(t),9007199254740991):0},fS=Math.max,pS=Math.min,dS=function(t,e){var n=lS(t);return n<0?fS(n+e,0):pS(n,e)},mS=function(t){return function(e,n,r){var i,o=_E(e),a=hS(o.length),s=dS(r,a);if(t&&n!=n){for(;a>s;)if((i=o[s++])!=i)return!0}else for(;a>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},vS={includes:mS(!0),indexOf:mS(!1)},gS=vS.indexOf,yS=function(t,e){var n,r=_E(t),i=0,o=[];for(n in r)!SE(XE,n)&&SE(r,n)&&o.push(n);for(;e.length>i;)SE(r,n=e[i++])&&(~gS(o,n)||o.push(n));return o},bS=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_S=bS.concat("length","prototype"),xS={f:Object.getOwnPropertyNames||function(t){return yS(t,_S)}},wS={f:Object.getOwnPropertySymbols},ES=aS("Reflect","ownKeys")||function(t){var e=xS.f(kE(t)),n=wS.f;return n?e.concat(n(t)):e},SS=function(t,e){for(var n=ES(e),r=LE.f,i=PE.f,o=0;o<n.length;o++){var a=n[o];SE(t,a)||r(t,a,i(e,a))}},TS=/#|\.prototype\./,AS=function(t,e){var n=CS[MS(t)];return n==PS||n!=OS&&("function"==typeof e?lE(e):!!e)},MS=AS.normalize=function(t){return String(t).replace(TS,".").toLowerCase()},CS=AS.data={},OS=AS.NATIVE="N",PS=AS.POLYFILL="P",kS=AS,IS=PE.f,LS=function(t,e){var n,r,i,o,a,s=t.target,u=t.global,l=t.stat;if(n=u?uE:l?uE[s]||DE(s,{}):(uE[s]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=IS(n,r))&&a.value:n[r],!kS(u?r:s+(l?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;SS(o,i)}(t.sham||i&&i.sham)&&RE(o,"sham",!0),rS(n,r,o,t)}},RS=Array.isArray||function(t){return"Array"==vE(t)},DS=function(t,e,n){var r=wE(e);r in t?LE.f(t,r,dE(0,n)):t[r]=n},NS=!!Object.getOwnPropertySymbols&&!lE((function(){return!String(Symbol())})),FS=uE.Symbol,jS=jE("wks"),US=function(t){return jS[t]||(jS[t]=NS&&FS[t]||(NS?FS:GE)("Symbol."+t))},zS=aS("navigator","userAgent")||"",BS=uE.process,VS=BS&&BS.versions,HS=VS&&VS.v8;HS?eS=(tS=HS.split("."))[0]+tS[1]:zS&&(!(tS=zS.match(/Edge\/(\d+)/))||tS[1]>=74)&&(tS=zS.match(/Chrome\/(\d+)/))&&(eS=tS[1]);var GS=eS&&+eS,WS=US("species"),qS=function(t){return GS>=51||!lE((function(){var e=[];return(e.constructor={})[WS]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},XS=US("species"),YS=[].slice,QS=Math.max;LS({target:"Array",proto:!0,forced:!qS("slice")},{slice:function(t,e){var n,r,i,o=_E(this),a=hS(o.length),s=dS(t,a),u=dS(void 0===e?a:e,a);if(RS(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!RS(n.prototype)?xE(n)&&null===(n=n[XS])&&(n=void 0):n=void 0,n===Array||void 0===n))return YS.call(o,s,u);for(r=new(void 0===n?Array:n)(QS(u-s,0)),i=0;s<u;s++,i++)s in o&&DS(r,i,o[s]);return r.length=i,r}});var ZS=LE.f,KS=Function.prototype,$S=KS.toString,JS=/^\s*function ([^ (]*)/,tT="name";cE&&!(tT in KS)&&ZS(KS,tT,{configurable:!0,get:function(){try{return $S.call(this).match(JS)[1]}catch(t){return""}}});var eT=xS.f,nT={}.toString,rT="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],iT={f:function(t){return rT&&"[object Window]"==nT.call(t)?function(t){try{return eT(t)}catch(t){return rT.slice()}}(t):eT(_E(t))}},oT=iT.f,aT=lE((function(){return!Object.getOwnPropertyNames(1)}));function sT(t){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uT(t){return(uT="function"==typeof Symbol&&"symbol"===sT(Symbol.iterator)?function(t){return sT(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":sT(t)})(t)}LS({target:"Object",stat:!0,forced:aT},{getOwnPropertyNames:oT});var lT=function(t){return Object(bE(t))},cT=Object.keys||function(t){return yS(t,bS)},hT=cE?Object.defineProperties:function(t,e){kE(t);for(var n,r=cT(e),i=r.length,o=0;i>o;)LE.f(t,n=r[o++],e[n]);return t},fT=aS("document","documentElement"),pT=qE("IE_PROTO"),dT=function(){},mT=function(){var t,e=ME("iframe"),n=bS.length;for(e.style.display="none",fT.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),mT=t.F;n--;)delete mT.prototype[bS[n]];return mT()},vT=Object.create||function(t,e){var n;return null!==t?(dT.prototype=kE(t),n=new dT,dT.prototype=null,n[pT]=t):n=mT(),void 0===e?n:hT(n,e)};XE[pT]=!0;var gT={f:US},yT=LE.f,bT=function(t){var e=iS.Symbol||(iS.Symbol={});SE(e,t)||yT(e,t,{value:gT.f(t)})},_T=LE.f,xT=US("toStringTag"),wT=function(t,e,n){t&&!SE(t=n?t:t.prototype,xT)&&_T(t,xT,{configurable:!0,value:e})},ET=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ST=function(t,e,n){if(ET(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},TT=US("species"),AT=function(t,e){var n;return RS(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!RS(n.prototype)?xE(n)&&null===(n=n[TT])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},MT=[].push,CT=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(s,u,l,c){for(var h,f,p=lT(s),d=yE(p),m=ST(u,l,3),v=hS(d.length),g=0,y=c||AT,b=e?y(s,v):n?y(s,0):void 0;v>g;g++)if((a||g in d)&&(f=m(h=d[g],g,p),t))if(e)b[g]=f;else if(f)switch(t){case 3:return!0;case 5:return h;case 6:return g;case 2:MT.call(b,h)}else if(i)return!1;return o?-1:r||i?i:b}},OT={forEach:CT(0),map:CT(1),filter:CT(2),some:CT(3),every:CT(4),find:CT(5),findIndex:CT(6)},PT=OT.forEach,kT=qE("hidden"),IT="Symbol",LT=US("toPrimitive"),RT=nS.set,DT=nS.getterFor(IT),NT=Object.prototype,FT=uE.Symbol,jT=uE.JSON,UT=jT&&jT.stringify,zT=PE.f,BT=LE.f,VT=iT.f,HT=pE.f,GT=jE("symbols"),WT=jE("op-symbols"),qT=jE("string-to-symbol-registry"),XT=jE("symbol-to-string-registry"),YT=jE("wks"),QT=uE.QObject,ZT=!QT||!QT.prototype||!QT.prototype.findChild,KT=cE&&lE((function(){return 7!=vT(BT({},"a",{get:function(){return BT(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=zT(NT,e);r&&delete NT[e],BT(t,e,n),r&&t!==NT&&BT(NT,e,r)}:BT,$T=function(t,e){var n=GT[t]=vT(FT.prototype);return RT(n,{type:IT,tag:t,description:e}),cE||(n.description=e),n},JT=NS&&"symbol"==typeof FT.iterator?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof FT},tA=function(t,e,n){t===NT&&tA(WT,e,n),kE(t);var r=wE(e,!0);return kE(n),SE(GT,r)?(n.enumerable?(SE(t,kT)&&t[kT][r]&&(t[kT][r]=!1),n=vT(n,{enumerable:dE(0,!1)})):(SE(t,kT)||BT(t,kT,dE(1,{})),t[kT][r]=!0),KT(t,r,n)):BT(t,r,n)},eA=function(t,e){kE(t);var n=_E(e),r=cT(n).concat(oA(n));return PT(r,(function(e){cE&&!nA.call(n,e)||tA(t,e,n[e])})),t},nA=function(t){var e=wE(t,!0),n=HT.call(this,e);return!(this===NT&&SE(GT,e)&&!SE(WT,e))&&(!(n||!SE(this,e)||!SE(GT,e)||SE(this,kT)&&this[kT][e])||n)},rA=function(t,e){var n=_E(t),r=wE(e,!0);if(n!==NT||!SE(GT,r)||SE(WT,r)){var i=zT(n,r);return!i||!SE(GT,r)||SE(n,kT)&&n[kT][r]||(i.enumerable=!0),i}},iA=function(t){var e=VT(_E(t)),n=[];return PT(e,(function(t){SE(GT,t)||SE(XE,t)||n.push(t)})),n},oA=function(t){var e=t===NT,n=VT(e?WT:_E(t)),r=[];return PT(n,(function(t){!SE(GT,t)||e&&!SE(NT,t)||r.push(GT[t])})),r};NS||(rS((FT=function(){if(this instanceof FT)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=GE(t),n=function(t){this===NT&&n.call(WT,t),SE(this,kT)&&SE(this[kT],e)&&(this[kT][e]=!1),KT(this,e,dE(1,t))};return cE&&ZT&&KT(NT,e,{configurable:!0,set:n}),$T(e,t)}).prototype,"toString",(function(){return DT(this).tag})),pE.f=nA,LE.f=tA,PE.f=rA,xS.f=iT.f=iA,wS.f=oA,cE&&(BT(FT.prototype,"description",{configurable:!0,get:function(){return DT(this).description}}),rS(NT,"propertyIsEnumerable",nA,{unsafe:!0})),gT.f=function(t){return $T(US(t),t)}),LS({global:!0,wrap:!0,forced:!NS,sham:!NS},{Symbol:FT}),PT(cT(YT),(function(t){bT(t)})),LS({target:IT,stat:!0,forced:!NS},{for:function(t){var e=String(t);if(SE(qT,e))return qT[e];var n=FT(e);return qT[e]=n,XT[n]=e,n},keyFor:function(t){if(!JT(t))throw TypeError(t+" is not a symbol");if(SE(XT,t))return XT[t]},useSetter:function(){ZT=!0},useSimple:function(){ZT=!1}}),LS({target:"Object",stat:!0,forced:!NS,sham:!cE},{create:function(t,e){return void 0===e?vT(t):eA(vT(t),e)},defineProperty:tA,defineProperties:eA,getOwnPropertyDescriptor:rA}),LS({target:"Object",stat:!0,forced:!NS},{getOwnPropertyNames:iA,getOwnPropertySymbols:oA}),LS({target:"Object",stat:!0,forced:lE((function(){wS.f(1)}))},{getOwnPropertySymbols:function(t){return wS.f(lT(t))}}),jT&&LS({target:"JSON",stat:!0,forced:!NS||lE((function(){var t=FT();return"[null]"!=UT([t])||"{}"!=UT({a:t})||"{}"!=UT(Object(t))}))},{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(xE(e)||void 0!==t)&&!JT(t))return RS(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!JT(e))return e}),r[1]=e,UT.apply(jT,r)}}),FT.prototype[LT]||RE(FT.prototype,LT,FT.prototype.valueOf),wT(FT,IT),XE[kT]=!0;var aA=LE.f,sA=uE.Symbol;if(cE&&"function"==typeof sA&&(!("description"in sA.prototype)||void 0!==sA().description)){var uA={},lA=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof lA?new sA(t):void 0===t?sA():sA(t);return""===t&&(uA[e]=!0),e};SS(lA,sA);var cA=lA.prototype=sA.prototype;cA.constructor=lA;var hA=cA.toString,fA="Symbol(test)"==String(sA("test")),pA=/^Symbol\((.*)\)[^)]+$/;aA(cA,"description",{configurable:!0,get:function(){var t=xE(this)?this.valueOf():this,e=hA.call(t);if(SE(uA,t))return"";var n=fA?e.slice(7,-1):e.replace(pA,"$1");return""===n?void 0:n}}),LS({global:!0,forced:!0},{Symbol:lA})}bT("iterator");var dA=US("unscopables"),mA=Array.prototype;null==mA[dA]&&RE(mA,dA,vT(null));var vA,gA,yA,bA=function(t){mA[dA][t]=!0},_A={},xA=!lE((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),wA=qE("IE_PROTO"),EA=Object.prototype,SA=xA?Object.getPrototypeOf:function(t){return t=lT(t),SE(t,wA)?t[wA]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?EA:null},TA=US("iterator"),AA=!1;[].keys&&("next"in(yA=[].keys())?(gA=SA(SA(yA)))!==Object.prototype&&(vA=gA):AA=!0),null==vA&&(vA={}),SE(vA,TA)||RE(vA,TA,(function(){return this}));var MA={IteratorPrototype:vA,BUGGY_SAFARI_ITERATORS:AA},CA=MA.IteratorPrototype,OA=function(){return this},PA=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return kE(n),function(t){if(!xE(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),kA=MA.IteratorPrototype,IA=MA.BUGGY_SAFARI_ITERATORS,LA=US("iterator"),RA="keys",DA="values",NA="entries",FA=function(){return this},jA=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=vT(CA,{next:dE(1,n)}),wT(t,r,!1),_A[r]=OA}(n,e,r);var s,u,l,c=function(t){if(t===i&&m)return m;if(!IA&&t in p)return p[t];switch(t){case RA:case DA:case NA:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",f=!1,p=t.prototype,d=p[LA]||p["@@iterator"]||i&&p[i],m=!IA&&d||c(i),v="Array"==e&&p.entries||d;if(v&&(s=SA(v.call(new t)),kA!==Object.prototype&&s.next&&(SA(s)!==kA&&(PA?PA(s,kA):"function"!=typeof s[LA]&&RE(s,LA,FA)),wT(s,h,!0))),i==DA&&d&&d.name!==DA&&(f=!0,m=function(){return d.call(this)}),p[LA]!==m&&RE(p,LA,m),_A[e]=m,i)if(u={values:c(DA),keys:o?m:c(RA),entries:c(NA)},a)for(l in u)(IA||f||!(l in p))&&rS(p,l,u[l]);else LS({target:e,proto:!0,forced:IA||f},u);return u},UA="Array Iterator",zA=nS.set,BA=nS.getterFor(UA),VA=jA(Array,"Array",(function(t,e){zA(this,{type:UA,target:_E(t),index:0,kind:e})}),(function(){var t=BA(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");_A.Arguments=_A.Array,bA("keys"),bA("values"),bA("entries");var HA=Object.assign,GA=!HA||lE((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=HA({},t)[n]||cT(HA({},e)).join("")!=r}))?function(t,e){for(var n=lT(t),r=arguments.length,i=1,o=wS.f,a=pE.f;r>i;)for(var s,u=yE(arguments[i++]),l=o?cT(u).concat(o(u)):cT(u),c=l.length,h=0;c>h;)s=l[h++],cE&&!a.call(u,s)||(n[s]=u[s]);return n}:HA;LS({target:"Object",stat:!0,forced:Object.assign!==GA},{assign:GA});var WA=US("toStringTag"),qA="Arguments"==vE(function(){return arguments}()),XA=function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),WA))?n:qA?vE(e):"Object"==(r=vE(e))&&"function"==typeof e.callee?"Arguments":r},YA={};YA[US("toStringTag")]="z";var QA="[object z]"!==String(YA)?function(){return"[object "+XA(this)+"]"}:YA.toString,ZA=Object.prototype;QA!==ZA.toString&&rS(ZA,"toString",QA,{unsafe:!0});var KA=!lE((function(){return Object.isExtensible(Object.preventExtensions({}))})),$A=rE((function(t){var e=LE.f,n=GE("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!xE(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!SE(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!SE(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return KA&&a.REQUIRED&&i(t)&&!SE(t,n)&&o(t),t}};XE[n]=!0})),JA=US("iterator"),tM=Array.prototype,eM=US("iterator"),nM=function(t,e,n,r){try{return r?e(kE(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&kE(i.call(t)),e}},rM=rE((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,s,u,l,c,h,f,p,d=ST(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(s=function(t){if(null!=t)return t[eM]||t["@@iterator"]||_A[XA(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(p=s)&&(_A.Array===p||tM[JA]===p)){for(u=0,l=hS(t.length);l>u;u++)if((c=i?d(kE(f=t[u])[0],f[1]):d(t[u]))&&c instanceof e)return c;return new e(!1)}a=s.call(t)}for(h=a.next;!(f=h.call(a)).done;)if("object"==typeof(c=nM(a,d,f.value,i))&&c&&c instanceof e)return c;return new e(!1)}).stop=function(t){return new e(!0,t)}})),iM=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},oM=US("iterator"),aM=!1;try{var sM=0,uM={next:function(){return{done:!!sM++}},return:function(){aM=!0}};uM[oM]=function(){return this},Array.from(uM,(function(){throw 2}))}catch(t){}var lM=function(t,e,n){var r,i;return PA&&"function"==typeof(r=e.constructor)&&r!==n&&xE(i=r.prototype)&&i!==n.prototype&&PA(t,i),t},cM=function(t,e,n){for(var r in e)rS(t,r,e[r],n);return t},hM=US("species"),fM=LE.f,pM=$A.fastKey,dM=nS.set,mM=nS.getterFor,vM=(function(t,e,n,r,i){var o=uE.Set,a=o&&o.prototype,s=o,u="add",l={},c=function(t){var e=a[t];rS(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t||"get"==t||"has"==t?function(t){return e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(kS(t,"function"!=typeof o||!(a.forEach&&!lE((function(){(new o).entries().next()})))))s=n.getConstructor(e,t,r,u),$A.REQUIRED=!0;else if(kS(t,!0)){var h=new s,f=h.add(-0,1)!=h,p=lE((function(){h.has(1)})),d=function(t,e){if(!aM)return!1;var n=!1;try{var r={};r[oM]=function(){return{next:function(){return{done:n=!0}}}},new o(r)}catch(t){}return n}(),m=lE((function(){for(var t=new o,e=5;e--;)t.add(e,e);return!t.has(-0)}));d||((s=e((function(e,n){iM(e,s,t);var i=lM(new o,e,s);return null!=n&&rM(n,i.add,i,r),i}))).prototype=a,a.constructor=s),(p||m)&&(c("delete"),c("has")),(m||f)&&c(u)}l.Set=s,LS({global:!0,forced:s!=o},l),wT(s,t),n.setStrong(s,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var i=t((function(t,o){iM(t,i,e),dM(t,{type:e,index:vT(null),first:void 0,last:void 0,size:0}),cE||(t.size=0),null!=o&&rM(o,t[r],t,n)})),o=mM(e),a=function(t,e,n){var r,i,a=o(t),u=s(t,e);return u?u.value=n:(a.last=u={index:i=pM(e,!0),key:e,value:n,previous:r=a.last,next:void 0,removed:!1},a.first||(a.first=u),r&&(r.next=u),cE?a.size++:t.size++,"F"!==i&&(a.index[i]=u)),t},s=function(t,e){var n,r=o(t),i=pM(e);if("F"!==i)return r.index[i];for(n=r.first;n;n=n.next)if(n.key==e)return n};return cM(i.prototype,{clear:function(){for(var t=o(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,cE?t.size=0:this.size=0},delete:function(t){var e=this,n=o(e),r=s(e,t);if(r){var i=r.next,a=r.previous;delete n.index[r.index],r.removed=!0,a&&(a.next=i),i&&(i.previous=a),n.first==r&&(n.first=i),n.last==r&&(n.last=a),cE?n.size--:e.size--}return!!r},forEach:function(t){for(var e,n=o(this),r=ST(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!s(this,t)}}),cM(i.prototype,n?{get:function(t){var e=s(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),cE&&fM(i.prototype,"size",{get:function(){return o(this).size}}),i},setStrong:function(t,e,n){var r=e+" Iterator",i=mM(e),o=mM(r);jA(t,e,(function(t,e){dM(this,{type:r,target:t,state:i(t),kind:e,last:void 0})}),(function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),function(t){var e=aS(t),n=LE.f;cE&&e&&!e[hM]&&n(e,hM,{configurable:!0,get:function(){return this}})}(e)}}),function(t){return function(e,n){var r,i,o=String(bE(e)),a=lS(n),s=o.length;return a<0||a>=s?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===s||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}}),gM={codeAt:vM(!1),charAt:vM(!0)},yM=gM.charAt,bM="String Iterator",_M=nS.set,xM=nS.getterFor(bM);jA(String,"String",(function(t){_M(this,{type:bM,string:String(t),index:0})}),(function(){var t,e=xM(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=yM(n,r),e.index+=t.length,{value:t,done:!1})}));var wM={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},EM=US("iterator"),SM=US("toStringTag"),TM=VA.values;for(var AM in wM){var MM=uE[AM],CM=MM&&MM.prototype;if(CM){if(CM[EM]!==TM)try{RE(CM,EM,TM)}catch(t){CM[EM]=TM}if(CM[SM]||RE(CM,SM,AM),wM[AM])for(var OM in VA)if(CM[OM]!==VA[OM])try{RE(CM,OM,VA[OM])}catch(t){CM[OM]=VA[OM]}}}function PM(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var kM={},IM=[];function LM(t,e){if(Array.isArray(t)){var n=!0,r=!1,i=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)LM(o.value,e)}catch(t){r=!0,i=t}finally{try{n||null==a.return||a.return()}finally{if(r)throw i}}}else if("object"!==uT(t))DM(Object.getOwnPropertyNames(e)),kM[t]=Object.assign(kM[t]||{},e);else for(var s in t)LM(s,t[s])}function RM(t){return kM[t]||{}}function DM(t){IM.push.apply(IM,PM(t))}var NM=vS.includes;LS({target:"Array",proto:!0},{includes:function(t){return NM(this,t,arguments.length>1?arguments[1]:void 0)}}),bA("includes");var FM,jM,UM=function(){var t=kE(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e},zM=RegExp.prototype.exec,BM=String.prototype.replace,VM=zM,HM=(FM=/a/,jM=/b*/g,zM.call(FM,"a"),zM.call(jM,"a"),0!==FM.lastIndex||0!==jM.lastIndex),GM=void 0!==/()??/.exec("")[1];(HM||GM)&&(VM=function(t){var e,n,r,i,o=this;return GM&&(n=new RegExp("^"+o.source+"$(?!\\s)",UM.call(o))),HM&&(e=o.lastIndex),r=zM.call(o,t),HM&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),GM&&r&&r.length>1&&BM.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var WM=VM;LS({target:"RegExp",proto:!0,forced:/./.exec!==WM},{exec:WM});var qM=US("match"),XM=function(t){var e;return xE(t)&&(void 0!==(e=t[qM])?!!e:"RegExp"==vE(t))},YM=function(t){if(XM(t))throw TypeError("The method doesn't accept regular expressions");return t},QM=US("match");LS({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./".includes(e)}catch(t){try{return e[QM]=!1,"/./".includes(e)}catch(t){}}return!1}()},{includes:function(t){return!!~String(bE(this)).indexOf(YM(t),arguments.length>1?arguments[1]:void 0)}});var ZM=US("species"),KM=!lE((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),$M=!lE((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),JM=function(t,e,n,r){var i=US(t),o=!lE((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!lE((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[ZM]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&!KM||"split"===t&&!$M){var s=/./[i],u=n(i,""[t],(function(t,e,n,r,i){return e.exec===WM?o&&!i?{done:!0,value:s.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),l=u[0],c=u[1];rS(String.prototype,t,l),rS(RegExp.prototype,i,2==e?function(t,e){return c.call(t,this,e)}:function(t){return c.call(t,this)}),r&&RE(RegExp.prototype[i],"sham",!0)}},tC=gM.charAt,eC=function(t,e,n){return e+(n?tC(t,e).length:1)},nC=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==vE(t))throw TypeError("RegExp#exec called on incompatible receiver");return WM.call(t,e)},rC=Math.max,iC=Math.min,oC=Math.floor,aC=/\$([$&'`]|\d\d?|<[^>]*>)/g,sC=/\$([$&'`]|\d\d?)/g;JM("replace",2,(function(t,e,n){return[function(n,r){var i=bE(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,i){var o=n(e,t,this,i);if(o.done)return o.value;var a=kE(t),s=String(this),u="function"==typeof i;u||(i=String(i));var l=a.global;if(l){var c=a.unicode;a.lastIndex=0}for(var h=[];;){var f=nC(a,s);if(null===f)break;if(h.push(f),!l)break;""===String(f[0])&&(a.lastIndex=eC(s,hS(a.lastIndex),c))}for(var p,d="",m=0,v=0;v<h.length;v++){f=h[v];for(var g=String(f[0]),y=rC(iC(lS(f.index),s.length),0),b=[],_=1;_<f.length;_++)b.push(void 0===(p=f[_])?p:String(p));var x=f.groups;if(u){var w=[g].concat(b,y,s);void 0!==x&&w.push(x);var E=String(i.apply(void 0,w))}else E=r(g,s,y,b,x,i);y>=m&&(d+=s.slice(m,y)+E,m=y+g.length)}return d+s.slice(m)}];function r(t,n,r,i,o,a){var s=r+t.length,u=i.length,l=sC;return void 0!==o&&(o=lT(o),l=aC),e.call(a,l,(function(e,a){var l;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(s);case"<":l=o[a.slice(1,-1)];break;default:var c=+a;if(0===c)return e;if(c>u){var h=oC(c/10);return 0===h?e:h<=u?void 0===i[h-1]?a.charAt(1):i[h-1]+a.charAt(1):e}l=i[c-1]}return void 0===l?"":l}))}}));var uC="\t\n\v\f\r                　\u2028\u2029\ufeff",lC="["+uC+"]",cC=RegExp("^"+lC+lC+"*"),hC=RegExp(lC+lC+"*$"),fC=function(t){return function(e){var n=String(bE(e));return 1&t&&(n=n.replace(cC,"")),2&t&&(n=n.replace(hC,"")),n}},pC={start:fC(1),end:fC(2),trim:fC(3)},dC=pC.trim;function mC(t,e){var n,r=t.length,i=[];for(n=0;n<r;n++)i.push(e(t[n]));return i}function vC(t){return t%360*Math.PI/180}function gC(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function yC(t){return t.charAt(0).toUpperCase()+t.slice(1)}function bC(t,e,n,r){return null!=e&&null!=n||(r=r||t.bbox(),null==e?e=r.width/r.height*n:null==n&&(n=r.height/r.width*e)),{width:e,height:n}}function _C(t,e){var n,r,i=t.origin;if("string"==typeof i||null==i){var o=(i||"center").toLowerCase().trim(),a=e.bbox(),s=a.height,u=a.width,l=a.x,c=a.y,h=o.includes("left")?l:o.includes("right")?l+u:l+u/2,f=o.includes("top")?c:o.includes("bottom")?c+s:c+s/2;n=null!=t.ox?t.ox:h,r=null!=t.oy?t.oy:f}else n=i[0],r=i[1];return[n,r]}LS({target:"String",proto:!0,forced:function(t){return lE((function(){return!!uC.trim()||"​᠎"!="​᠎".trim()||uC.trim.name!==t}))}("trim")},{trim:function(){return dC(this)}});var xC="http://www.w3.org/2000/svg",wC="http://www.w3.org/2000/xmlns/",EC="http://www.w3.org/1999/xlink",SC={window:"undefined"==typeof window?null:window,document:"undefined"==typeof document?null:document};function TC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var AC=function t(){TC(this,t)},MC={},CC="___SYMBOL___ROOT___";function OC(t){return SC.document.createElementNS(xC,t)}function PC(t){if(t instanceof AC)return t;if("object"===uT(t))return LC(t);if(null==t)return new MC[CC];if("string"==typeof t&&"<"!==t.charAt(0))return LC(SC.document.querySelector(t));var e=OC("svg");return e.innerHTML=t,LC(e.firstChild)}function kC(t,e){return e instanceof SC.window.Node?e:OC(t)}function IC(t){if(!t)return null;if(t.instance instanceof AC)return t.instance;var e=yC(t.nodeName||"Dom");return"LinearGradient"===e||"RadialGradient"===e?e="Gradient":MC[e]||(e="Dom"),new MC[e](t)}var LC=IC;function RC(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.name,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return MC[e]=t,n&&(MC[CC]=t),DM(Object.getOwnPropertyNames(t.prototype)),t}var DC=1e3;function NC(t){return"Svgjs"+yC(t)+DC++}function FC(t){for(var e=t.children.length-1;e>=0;e--)FC(t.children[e]);return t.id?IC(t).id(NC(t.nodeName)):IC(t)}function jC(t,e,n){var r,i;for(i=(t=Array.isArray(t)?t:[t]).length-1;i>=0;i--)for(r in e){var o=e[r];n&&(o=UC(e[r])),t[i].prototype[r]=o}}function UC(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[n.length-1];return!i||i.constructor!==Object||i instanceof Array?t.apply(this,n):t.apply(this,n.slice(0,-1)).attr(i)}}LM("Dom",{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},prev:function(){return this.siblings()[this.position()-1]},forward:function(){var t=this.position()+1,e=this.parent();return e.removeElement(this).add(this,t),"function"==typeof e.isRoot&&e.isRoot()&&e.node.appendChild(e.defs().node),this},backward:function(){var t=this.position();return t>0&&this.parent().removeElement(this).add(this,t-1),this},front:function(){var t=this.parent();return t.node.appendChild(this.node),"function"==typeof t.isRoot&&t.isRoot()&&t.node.appendChild(t.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(t){(t=PC(t)).remove();var e=this.position();return this.parent().add(t,e),this},after:function(t){(t=PC(t)).remove();var e=this.position();return this.parent().add(t,e+1),this},insertBefore:function(t){return(t=PC(t)).before(this),this},insertAfter:function(t){return(t=PC(t)).after(this),this}});var zC=OT.filter;LS({target:"Array",proto:!0,forced:!qS("filter")},{filter:function(t){return zC(this,t,arguments.length>1?arguments[1]:void 0)}});var BC=function(t,e){var n=[][t];return!n||!lE((function(){n.call(null,e||function(){throw 1},1)}))},VC=vS.indexOf,HC=[].indexOf,GC=!!HC&&1/[1].indexOf(1,-0)<0,WC=BC("indexOf");LS({target:"Array",proto:!0,forced:GC||WC},{indexOf:function(t){return GC?HC.apply(this,arguments)||0:VC(this,t,arguments.length>1?arguments[1]:void 0)}});var qC=[].join,XC=yE!=Object,YC=BC("join",",");LS({target:"Array",proto:!0,forced:XC||YC},{join:function(t){return qC.call(_E(this),void 0===t?",":t)}});var QC=US("species"),ZC=[].push,KC=Math.min,$C=4294967295,JC=!lE((function(){return!RegExp($C,"y")}));JM("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(bE(this)),i=void 0===n?$C:n>>>0;if(0===i)return[];if(void 0===t)return[r];if(!XM(t))return e.call(r,t,i);for(var o,a,s,u=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),c=0,h=new RegExp(t.source,l+"g");(o=WM.call(h,r))&&!((a=h.lastIndex)>c&&(u.push(r.slice(c,o.index)),o.length>1&&o.index<r.length&&ZC.apply(u,o.slice(1)),s=o[0].length,c=a,u.length>=i));)h.lastIndex===o.index&&h.lastIndex++;return c===r.length?!s&&h.test("")||u.push(""):u.push(r.slice(c)),u.length>i?u.slice(0,i):u}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=bE(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=kE(t),s=String(this),u=function(t,e){var n,r=kE(t).constructor;return void 0===r||null==(n=kE(r)[QC])?e:ET(n)}(a,RegExp),l=a.unicode,c=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(JC?"y":"g"),h=new u(JC?a:"^(?:"+a.source+")",c),f=void 0===i?$C:i>>>0;if(0===f)return[];if(0===s.length)return null===nC(h,s)?[s]:[];for(var p=0,d=0,m=[];d<s.length;){h.lastIndex=JC?d:0;var v,g=nC(h,JC?s:s.slice(d));if(null===g||(v=KC(hS(h.lastIndex+(JC?0:d)),s.length))===p)d=eC(s,d,l);else{if(m.push(s.slice(p,d)),m.length===f)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===f)return m;d=p=v}}return m.push(s.slice(p)),m}]}),!JC);var tO=/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,eO=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,nO=/rgb\((\d+),(\d+),(\d+)\)/,rO=/(#[a-z0-9\-_]+)/i,iO=/\)\s*,?\s*/,oO=/\s/g,aO=/^#[a-f0-9]{3,6}$/i,sO=/^rgb\(/,uO=/^(\s+)?$/,lO=/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,cO=/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,hO=/[\s,]+/,fO=/([^e])-/gi,pO=/[MLHVCSQTAZ]/gi,dO=/[MLHVCSQTAZ]/i,mO=/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,vO=/\./g;LM("Dom",{classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(hO)},hasClass:function(t){return-1!==this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!==t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)}});var gO=OT.forEach,yO=BC("forEach")?function(t){return gO(this,t,arguments.length>1?arguments[1]:void 0)}:[].forEach;for(var bO in LS({target:"Array",proto:!0,forced:[].forEach!=yO},{forEach:yO}),wM){var _O=uE[bO],xO=_O&&_O.prototype;if(xO&&xO.forEach!==yO)try{RE(xO,"forEach",yO)}catch(t){xO.forEach=yO}}LM("Dom",{css:function(t,e){var n={};if(0===arguments.length)return this.node.style.cssText.split(/\s*;\s*/).filter((function(t){return!!t.length})).forEach((function(t){var e=t.split(/\s*:\s*/);n[e[0]]=e[1]})),n;if(arguments.length<2){if(Array.isArray(t)){var r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var u=a.value,l=gC(u);n[l]=this.node.style[l]}}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}if("string"==typeof t)return this.node.style[gC(t)];if("object"===uT(t))for(var c in t)this.node.style[gC(c)]=null==t[c]||uO.test(t[c])?"":t[c]}return 2===arguments.length&&(this.node.style[gC(t)]=null==e||uO.test(e)?"":e),this},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},visible:function(){return"none"!==this.css("display")}}),LM("Dom",{data:function(t,e,n){if("object"===uT(t))for(e in t)this.data(e,t[e]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+t))}catch(e){return this.attr("data-"+t)}else this.attr("data-"+t,null===e?null:!0===n||"string"==typeof e||"number"==typeof e?e:JSON.stringify(e));return this}}),LM("Dom",{remember:function(t,e){if("object"===uT(arguments[0]))for(var n in t)this.remember(n,t[n]);else{if(1===arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0===arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory=this._memory||{}}});var wO=function(t){return function(e,n,r,i){ET(n);var o=lT(e),a=yE(o),s=hS(o.length),u=t?s-1:0,l=t?-1:1;if(r<2)for(;;){if(u in a){i=a[u],u+=l;break}if(u+=l,t?u<0:s<=u)throw TypeError("Reduce of empty array with no initial value")}for(;t?u>=0:s>u;u+=l)u in a&&(i=n(i,a[u],u,o));return i}},EO=[wO(!1),wO(!0)][0];LS({target:"Array",proto:!0,forced:BC("reduce")},{reduce:function(t){return EO(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var SO=0,TO={};function AO(t){var e=t.getEventHolder();return e===SC.window&&(e=TO),e.events||(e.events={}),e.events}function MO(t){return t.getEventTarget()}function CO(t,e,n,r,i){var o=n.bind(r||t),a=PC(t),s=AO(a),u=MO(a);e=Array.isArray(e)?e:e.split(hO),n._svgjsListenerId||(n._svgjsListenerId=++SO),e.forEach((function(t){var e=t.split(".")[0],r=t.split(".")[1]||"*";s[e]=s[e]||{},s[e][r]=s[e][r]||{},s[e][r][n._svgjsListenerId]=o,u.addEventListener(e,o,i||!1)}))}function OO(t,e,n,r){var i=PC(t),o=AO(i),a=MO(i);("function"!=typeof n||(n=n._svgjsListenerId))&&(e=Array.isArray(e)?e:(e||"").split(hO)).forEach((function(t){var e,s,u=t&&t.split(".")[0],l=t&&t.split(".")[1];if(n)o[u]&&o[u][l||"*"]&&(a.removeEventListener(u,o[u][l||"*"][n],r||!1),delete o[u][l||"*"][n]);else if(u&&l){if(o[u]&&o[u][l]){for(s in o[u][l])OO(a,[u,l].join("."),s);delete o[u][l]}}else if(l)for(t in o)for(e in o[t])l===e&&OO(a,[t,l].join("."));else if(u){if(o[u]){for(e in o[u])OO(a,[u,e].join("."));delete o[u]}}else{for(t in o)OO(a,t);!function(t){var e=t.getEventHolder();e.events&&(e.events={})}(i)}}))}var PO=US("isConcatSpreadable"),kO=9007199254740991,IO="Maximum allowed index exceeded",LO=GS>=51||!lE((function(){var t=[];return t[PO]=!1,t.concat()[0]!==t})),RO=qS("concat"),DO=function(t){if(!xE(t))return!1;var e=t[PO];return void 0!==e?!!e:RS(t)};LS({target:"Array",proto:!0,forced:!LO||!RO},{concat:function(t){var e,n,r,i,o,a=lT(this),s=AT(a,0),u=0;for(e=-1,r=arguments.length;e<r;e++)if(DO(o=-1===e?a:arguments[e])){if(u+(i=hS(o.length))>kO)throw TypeError(IO);for(n=0;n<i;n++,u++)n in o&&DS(s,u,o[n])}else{if(u>=kO)throw TypeError(IO);DS(s,u++,o)}return s.length=u,s}});var NO=OT.map;LS({target:"Array",proto:!0,forced:!qS("map")},{map:function(t){return NO(this,t,arguments.length>1?arguments[1]:void 0)}});var FO=Date.prototype,jO="Invalid Date",UO=FO.toString,zO=FO.getTime;new Date(NaN)+""!=jO&&rS(FO,"toString",(function(){var t=zO.call(this);return t==t?UO.call(this):jO}));var BO=pC.trim,VO=uE.parseInt,HO=/^[+-]?0[Xx]/,GO=8!==VO(uC+"08")||22!==VO(uC+"0x16")?function(t,e){var n=BO(String(t));return VO(n,e>>>0||(HO.test(n)?16:10))}:VO;LS({global:!0,forced:parseInt!=GO},{parseInt:GO});var WO="toString",qO=RegExp.prototype,XO=qO.toString,YO=lE((function(){return"/a/b"!=XO.call({source:"a",flags:"b"})})),QO=XO.name!=WO;function ZO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function KO(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $O(t,e,n){return e&&KO(t.prototype,e),n&&KO(t,n),t}function JO(t){return 4===t.length?["#",t.substring(1,2),t.substring(1,2),t.substring(2,3),t.substring(2,3),t.substring(3,4),t.substring(3,4)].join(""):t}function tP(t){var e=Math.round(t),n=Math.max(0,Math.min(255,e)).toString(16);return 1===n.length?"0"+n:n}function eP(t,e){for(var n=e.length;n--;)if(null==t[e[n]])return!1;return!0}function nP(t,e){var n=eP(t,"rgb")?{_a:t.r,_b:t.g,_c:t.b,space:"rgb"}:eP(t,"xyz")?{_a:t.x,_b:t.y,_c:t.z,_d:0,space:"xyz"}:eP(t,"hsl")?{_a:t.h,_b:t.s,_c:t.l,_d:0,space:"hsl"}:eP(t,"lab")?{_a:t.l,_b:t.a,_c:t.b,_d:0,space:"lab"}:eP(t,"lch")?{_a:t.l,_b:t.c,_c:t.h,_d:0,space:"lch"}:eP(t,"cmyk")?{_a:t.c,_b:t.m,_c:t.y,_d:t.k,space:"cmyk"}:{_a:0,_b:0,_c:0,space:"rgb"};return n.space=e||n.space,n}function rP(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}(YO||QO)&&rS(RegExp.prototype,WO,(function(){var t=kE(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in qO)?UM.call(t):n)}),{unsafe:!0});var iP=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"rgb";if(t=t||0,this.space)for(var o in this.space)delete this[this.space[o]];if("number"==typeof t)i="string"==typeof r?r:i,r="string"==typeof r?0:r,Object.assign(this,{_a:t,_b:e,_c:n,_d:r,space:i});else if(t instanceof Array)this.space=e||("string"==typeof t[3]?t[3]:t[4])||"rgb",Object.assign(this,{_a:t[0],_b:t[1],_c:t[2],_d:t[3]||0});else if(t instanceof Object){var a=nP(t,e);Object.assign(this,a)}else if("string"==typeof t)if(sO.test(t)){var s=t.replace(oO,""),u=nO.exec(s).slice(1,4).map((function(t){return parseInt(t)})),l=ZO(u,3),c=l[0],h=l[1],f=l[2];Object.assign(this,{_a:c,_b:h,_c:f,_d:0,space:"rgb"})}else{if(!aO.test(t))throw Error("Unsupported string format, can't construct Color");var p=function(t){return parseInt(t,16)},d=eO.exec(JO(t)).map(p),m=ZO(d,4),v=m[1],g=m[2],y=m[3];Object.assign(this,{_a:v,_b:g,_c:y,_d:0,space:"rgb"})}var b=this._a,_=this._b,x=this._c,w=this._d,E="rgb"===this.space?{r:b,g:_,b:x}:"xyz"===this.space?{x:b,y:_,z:x}:"hsl"===this.space?{h:b,s:_,l:x}:"lab"===this.space?{l:b,a:_,b:x}:"lch"===this.space?{l:b,c:_,h:x}:"cmyk"===this.space?{c:b,m:_,y:x,k:w}:{};Object.assign(this,E)}},{key:"rgb",value:function(){if("rgb"===this.space)return this;if("lab"===(P=this.space)||"xyz"===P||"lch"===P){var e=this.x,n=this.y,r=this.z;if("lab"===this.space||"lch"===this.space){var i=this.l,o=this.a,a=this.b;if("lch"===this.space){var s=this.c,u=this.h,l=Math.PI/180;o=s*Math.cos(l*u),a=s*Math.sin(l*u)}var c=(i+16)/116,h=o/500+c,f=c-a/200,p=16/116,d=.008856,m=7.787;e=.95047*(Math.pow(h,3)>d?Math.pow(h,3):(h-p)/m),n=1*(Math.pow(c,3)>d?Math.pow(c,3):(c-p)/m),r=1.08883*(Math.pow(f,3)>d?Math.pow(f,3):(f-p)/m)}var v=3.2406*e+-1.5372*n+-.4986*r,g=-.9689*e+1.8758*n+.0415*r,y=.0557*e+-.204*n+1.057*r,b=Math.pow,_=.0031308;return new t(255*(v>_?1.055*b(v,1/2.4)-.055:12.92*v),255*(g>_?1.055*b(g,1/2.4)-.055:12.92*g),255*(y>_?1.055*b(y,1/2.4)-.055:12.92*y))}if("hsl"===this.space){var x=this.h,w=this.s,E=this.l;if(x/=360,E/=100,0==(w/=100))return new t(E*=255,E,E);var S=E<.5?E*(1+w):E+w-E*w,T=2*E-S;return new t(255*rP(T,S,x+1/3),255*rP(T,S,x),255*rP(T,S,x-1/3))}if("cmyk"===this.space){var A=this.c,M=this.m,C=this.y,O=this.k;return new t(255*(1-Math.min(1,A*(1-O)+O)),255*(1-Math.min(1,M*(1-O)+O)),255*(1-Math.min(1,C*(1-O)+O)))}return this;var P}},{key:"lab",value:function(){var e=this.xyz(),n=e.x,r=e.y;return new t(116*r-16,500*(n-r),200*(r-e.z),"lab")}},{key:"xyz",value:function(){var e=this.rgb(),n=ZO([e._a,e._b,e._c].map((function(t){return t/255})),3),r=n[0],i=n[1],o=n[2],a=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,s=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,u=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92,l=(.4124*a+.3576*s+.1805*u)/.95047,c=(.2126*a+.7152*s+.0722*u)/1,h=(.0193*a+.1192*s+.9505*u)/1.08883;return new t(l>.008856?Math.pow(l,1/3):7.787*l+16/116,c>.008856?Math.pow(c,1/3):7.787*c+16/116,h>.008856?Math.pow(h,1/3):7.787*h+16/116,"xyz")}},{key:"lch",value:function(){var e=this.lab(),n=e.l,r=e.a,i=e.b,o=Math.sqrt(Math.pow(r,2)+Math.pow(i,2)),a=180*Math.atan2(i,r)/Math.PI;return a<0&&(a=360-(a*=-1)),new t(n,o,a,"lch")}},{key:"hsl",value:function(){var e=this.rgb(),n=ZO([e._a,e._b,e._c].map((function(t){return t/255})),3),r=n[0],i=n[1],o=n[2],a=Math.max(r,i,o),s=Math.min(r,i,o),u=(a+s)/2,l=a===s,c=a-s;return new t(360*(l?0:a===r?((i-o)/c+(i<o?6:0))/6:a===i?((o-r)/c+2)/6:a===o?((r-i)/c+4)/6:0),100*(l?0:u>.5?c/(2-a-s):c/(a+s)),100*u,"hsl")}},{key:"cmyk",value:function(){var e=this.rgb(),n=ZO([e._a,e._b,e._c].map((function(t){return t/255})),3),r=n[0],i=n[1],o=n[2],a=Math.min(1-r,1-i,1-o);return 1===a?new t(0,0,0,1,"cmyk"):new t((1-r-a)/(1-a),(1-i-a)/(1-a),(1-o-a)/(1-a),a,"cmyk")}},{key:"_clamped",value:function(){var t=this.rgb(),e=t._a,n=t._b,r=t._c,i=Math.max,o=Math.min,a=Math.round;return[e,n,r].map((function(t){return i(0,o(a(t),255))}))}},{key:"toHex",value:function(){var t=ZO(this._clamped().map(tP),3),e=t[0],n=t[1],r=t[2];return"#".concat(e).concat(n).concat(r)}},{key:"toString",value:function(){return this.toHex()}},{key:"toRgb",value:function(){var t=ZO(this._clamped(),3),e=t[0],n=t[1],r=t[2];return"rgb(".concat(e,",").concat(n,",").concat(r,")")}},{key:"toArray",value:function(){return[this._a,this._b,this._c,this._d,this.space]}}],[{key:"random",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"vibrant",n=arguments.length>1?arguments[1]:void 0,r=Math.random,i=Math.round,o=Math.sin,a=Math.PI;if("vibrant"===e){var s=24*r()+57,u=38*r()+45,l=360*r(),c=new t(s,u,l,"lch");return c}if("sine"===e){var h=i(80*o(2*a*(n=null==n?r():n)/.5+.01)+150),f=i(50*o(2*a*n/.5+4.6)+200),p=i(100*o(2*a*n/.5+2.3)+150),d=new t(h,f,p);return d}if("pastel"===e){var m=8*r()+86,v=17*r()+9,g=360*r(),y=new t(m,v,g,"lch");return y}if("dark"===e){var b=10+10*r(),_=50*r()+86,x=360*r(),w=new t(b,_,x,"lch");return w}if("rgb"===e){var E=255*r(),S=255*r(),T=255*r(),A=new t(E,S,T);return A}if("lab"===e){var M=100*r(),C=256*r()-128,O=256*r()-128,P=new t(M,C,O,"lab");return P}if("grey"===e){var k=255*r(),I=new t(k,k,k);return I}}},{key:"test",value:function(t){return"string"==typeof t&&(aO.test(t)||sO.test(t))}},{key:"isRgb",value:function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b}},{key:"isColor",value:function(e){return e&&(e instanceof t||this.isRgb(e)||this.test(e))}}]),t}(),oP=lE((function(){cT(1)}));function aP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sP(t,e){return!e||"object"!==uT(e)&&"function"!=typeof e?aP(t):e}function uP(t){return(uP=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function lP(t,e,n){return(lP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uP(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function cP(t,e){return(cP=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function hP(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&cP(t,e)}LS({target:"Object",stat:!0,forced:oP},{keys:function(t){return cT(lT(t))}}),JM("match",1,(function(t,e,n){return[function(e){var n=bE(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=kE(t),o=String(this);if(!i.global)return nC(i,o);var a=i.unicode;i.lastIndex=0;for(var s,u=[],l=0;null!==(s=nC(i,o));){var c=String(s[0]);u[l]=c,""===c&&(i.lastIndex=eC(o,hS(i.lastIndex),a)),l++}return 0===l?null:u}]}));var fP=xS.f,pP=PE.f,dP=LE.f,mP=pC.trim,vP="Number",gP=uE.Number,yP=gP.prototype,bP=vE(vT(yP))==vP,_P=function(t){var e,n,r,i,o,a,s,u,l=wE(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=mP(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+l}for(a=(o=l.slice(2)).length,s=0;s<a;s++)if((u=o.charCodeAt(s))<48||u>i)return NaN;return parseInt(o,r)}return+l};if(kS(vP,!gP(" 0o1")||!gP("0b1")||gP("+0x1"))){for(var xP,wP=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof wP&&(bP?lE((function(){yP.valueOf.call(n)})):vE(n)!=vP)?lM(new gP(_P(e)),n,wP):_P(e)},EP=cE?fP(gP):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),SP=0;EP.length>SP;SP++)SE(gP,xP=EP[SP])&&!SE(wP,xP)&&dP(wP,xP,pP(gP,xP));wP.prototype=yP,yP.constructor=wP,rS(uE,vP,wP)}var TP=pC.trim,AP=uE.parseFloat,MP=1/AP(uC+"-0")!=-1/0?function(t){var e=TP(String(t)),n=AP(e);return 0===n&&"-"==e.charAt(0)?-0:n}:AP;LS({global:!0,forced:parseFloat!=MP},{parseFloat:MP});var CP=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(t,e){var n=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===uT(t)?{x:t.x,y:t.y}:{x:t,y:e};return this.x=null==n.x?0:n.x,this.y=null==n.y?0:n.y,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(t){return this.clone().transformO(t)}},{key:"transformO",value:function(t){PP.isMatrixLike(t)||(t=new PP(t));var e=this.x,n=this.y;return this.x=t.a*e+t.c*n+t.e,this.y=t.b*e+t.d*n+t.f,this}},{key:"toArray",value:function(){return[this.x,this.y]}}]),t}();function OP(t,e,n){return Math.abs(e-t)<(n||1e-6)}var PP=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(e){var n=t.fromArray([1,0,0,1,0,0]);return e=e instanceof QP?e.matrixify():"string"==typeof e?t.fromArray(e.split(hO).map(parseFloat)):Array.isArray(e)?t.fromArray(e):"object"===uT(e)&&t.isMatrixLike(e)?e:"object"===uT(e)?(new t).transform(e):6===arguments.length?t.fromArray([].slice.call(arguments)):n,this.a=null!=e.a?e.a:n.a,this.b=null!=e.b?e.b:n.b,this.c=null!=e.c?e.c:n.c,this.d=null!=e.d?e.d:n.d,this.e=null!=e.e?e.e:n.e,this.f=null!=e.f?e.f:n.f,this}},{key:"clone",value:function(){return new t(this)}},{key:"transform",value:function(e){if(t.isMatrixLike(e))return new t(e).multiplyO(this);var n=t.formatTransforms(e),r=new CP(n.ox,n.oy).transform(this),i=r.x,o=r.y,a=(new t).translateO(n.rx,n.ry).lmultiplyO(this).translateO(-i,-o).scaleO(n.scaleX,n.scaleY).skewO(n.skewX,n.skewY).shearO(n.shear).rotateO(n.theta).translateO(i,o);if(isFinite(n.px)||isFinite(n.py)){var s=new CP(i,o).transform(a),u=n.px?n.px-s.x:0,l=n.py?n.py-s.y:0;a.translateO(u,l)}return a.translateO(n.tx,n.ty),a}},{key:"compose",value:function(e){e.origin&&(e.originX=e.origin[0],e.originY=e.origin[1]);var n=e.originX||0,r=e.originY||0,i=e.scaleX||1,o=e.scaleY||1,a=e.shear||0,s=e.rotate||0,u=e.translateX||0,l=e.translateY||0;return(new t).translateO(-n,-r).scaleO(i,o).shearO(a).rotateO(s).translateO(u,l).lmultiplyO(this).translateO(n,r)}},{key:"decompose",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f,u=n*o-r*i,l=u>0?1:-1,c=l*Math.sqrt(n*n+r*r),h=Math.atan2(l*r,l*n),f=180/Math.PI*h,p=Math.cos(h),d=Math.sin(h),m=(n*i+r*o)/u,v=i*c/(m*n-r)||o*c/(m*r+n),g=a-t+t*p*c+e*(m*p*c-d*v),y=s-e+t*d*c+e*(m*d*c+p*v);return{scaleX:c,scaleY:v,shear:m,rotate:f,translateX:g,translateY:y,originX:t,originY:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}},{key:"multiply",value:function(t){return this.clone().multiplyO(t)}},{key:"multiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(this,n,this)}},{key:"lmultiply",value:function(t){return this.clone().lmultiplyO(t)}},{key:"lmultiplyO",value:function(e){var n=e instanceof t?e:new t(e);return t.matrixMultiply(n,this,this)}},{key:"inverseO",value:function(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.e,o=this.f,a=t*r-e*n;if(!a)throw new Error("Cannot invert "+this);var s=r/a,u=-e/a,l=-n/a,c=t/a,h=-(s*i+l*o),f=-(u*i+c*o);return this.a=s,this.b=u,this.c=l,this.d=c,this.e=h,this.f=f,this}},{key:"inverse",value:function(){return this.clone().inverseO()}},{key:"translate",value:function(t,e){return this.clone().translateO(t,e)}},{key:"translateO",value:function(t,e){return this.e+=t||0,this.f+=e||0,this}},{key:"scale",value:function(t,e,n,r){var i;return(i=this.clone()).scaleO.apply(i,arguments)}},{key:"scaleO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(r=n,n=e,e=t);var i=this.a,o=this.b,a=this.c,s=this.d,u=this.e,l=this.f;return this.a=i*t,this.b=o*e,this.c=a*t,this.d=s*e,this.e=u*t-n*t+n,this.f=l*e-r*e+r,this}},{key:"rotate",value:function(t,e,n){return this.clone().rotateO(t,e,n)}},{key:"rotateO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=vC(t);var r=Math.cos(t),i=Math.sin(t),o=this.a,a=this.b,s=this.c,u=this.d,l=this.e,c=this.f;return this.a=o*r-a*i,this.b=a*r+o*i,this.c=s*r-u*i,this.d=u*r+s*i,this.e=l*r-c*i+n*i-e*r+e,this.f=c*r+l*i-e*i-n*r+n,this}},{key:"flip",value:function(t,e){return this.clone().flipO(t,e)}},{key:"flipO",value:function(t,e){return"x"===t?this.scaleO(-1,1,e,0):"y"===t?this.scaleO(1,-1,0,e):this.scaleO(-1,-1,t,e||t)}},{key:"shear",value:function(t,e,n){return this.clone().shearO(t,e,n)}},{key:"shearO",value:function(t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=this.a,r=this.b,i=this.c,o=this.d,a=this.e,s=this.f;return this.a=n+r*t,this.c=i+o*t,this.e=a+s*t-e*t,this}},{key:"skew",value:function(t,e,n,r){var i;return(i=this.clone()).skewO.apply(i,arguments)}},{key:"skewO",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;3===arguments.length&&(r=n,n=e,e=t),t=vC(t),e=vC(e);var i=Math.tan(t),o=Math.tan(e),a=this.a,s=this.b,u=this.c,l=this.d,c=this.e,h=this.f;return this.a=a+s*i,this.b=s+a*o,this.c=u+l*i,this.d=l+u*o,this.e=c+h*i-r*i,this.f=h+c*o-n*o,this}},{key:"skewX",value:function(t,e,n){return this.skew(t,0,e,n)}},{key:"skewXO",value:function(t,e,n){return this.skewO(t,0,e,n)}},{key:"skewY",value:function(t,e,n){return this.skew(0,t,e,n)}},{key:"skewYO",value:function(t,e,n){return this.skewO(0,t,e,n)}},{key:"aroundO",value:function(t,e,n){var r=t||0,i=e||0;return this.translateO(-r,-i).lmultiplyO(n).translateO(r,i)}},{key:"around",value:function(t,e,n){return this.clone().aroundO(t,e,n)}},{key:"equals",value:function(e){var n=new t(e);return OP(this.a,n.a)&&OP(this.b,n.b)&&OP(this.c,n.c)&&OP(this.d,n.d)&&OP(this.e,n.e)&&OP(this.f,n.f)}},{key:"toString",value:function(){return"matrix("+this.a+","+this.b+","+this.c+","+this.d+","+this.e+","+this.f+")"}},{key:"toArray",value:function(){return[this.a,this.b,this.c,this.d,this.e,this.f]}},{key:"valueOf",value:function(){return{a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f}}}],[{key:"fromArray",value:function(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}},{key:"isMatrixLike",value:function(t){return null!=t.a||null!=t.b||null!=t.c||null!=t.d||null!=t.e||null!=t.f}},{key:"formatTransforms",value:function(t){var e="both"===t.flip||!0===t.flip,n=t.flip&&(e||"x"===t.flip)?-1:1,r=t.flip&&(e||"y"===t.flip)?-1:1,i=t.skew&&t.skew.length?t.skew[0]:isFinite(t.skew)?t.skew:isFinite(t.skewX)?t.skewX:0,o=t.skew&&t.skew.length?t.skew[1]:isFinite(t.skew)?t.skew:isFinite(t.skewY)?t.skewY:0,a=t.scale&&t.scale.length?t.scale[0]*n:isFinite(t.scale)?t.scale*n:isFinite(t.scaleX)?t.scaleX*n:n,s=t.scale&&t.scale.length?t.scale[1]*r:isFinite(t.scale)?t.scale*r:isFinite(t.scaleY)?t.scaleY*r:r,u=t.shear||0,l=t.rotate||t.theta||0,c=new CP(t.origin||t.around||t.ox||t.originX,t.oy||t.originY),h=c.x,f=c.y,p=new CP(t.position||t.px||t.positionX,t.py||t.positionY),d=p.x,m=p.y,v=new CP(t.translate||t.tx||t.translateX,t.ty||t.translateY),g=v.x,y=v.y,b=new CP(t.relative||t.rx||t.relativeX,t.ry||t.relativeY);return{scaleX:a,scaleY:s,skewX:i,skewY:o,shear:u,theta:l,rx:b.x,ry:b.y,tx:g,ty:y,ox:h,oy:f,px:d,py:m}}},{key:"matrixMultiply",value:function(t,e,n){var r=t.a*e.a+t.c*e.b,i=t.b*e.a+t.d*e.b,o=t.a*e.c+t.c*e.d,a=t.b*e.c+t.d*e.d,s=t.e+t.a*e.e+t.c*e.f,u=t.f+t.b*e.e+t.d*e.f;return n.a=r,n.b=i,n.c=o,n.d=a,n.e=s,n.f=u,n}}]),t}();function kP(){if(!kP.nodes){var t=PC().size(2,0);t.node.style.cssText=["opacity: 0","position: absolute","left: -100%","top: -100%","overflow: hidden"].join(";"),t.attr("focusable","false"),t.attr("aria-hidden","true");var e=t.path().node;kP.nodes={svg:t,path:e}}if(!kP.nodes.svg.node.parentNode){var n=SC.document.body||SC.document.documentElement;kP.nodes.svg.addTo(n)}return kP.nodes}function IP(t){return!(t.width||t.height||t.x||t.y)}RC(PP,"Matrix");var LP=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(t){var e=[0,0,0,0];return t="string"==typeof t?t.split(hO).map(parseFloat):Array.isArray(t)?t:"object"===uT(t)?[null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height]:4===arguments.length?[].slice.call(arguments):e,this.x=t[0]||0,this.y=t[1]||0,this.width=this.w=t[2]||0,this.height=this.h=t[3]||0,this.x2=this.x+this.w,this.y2=this.y+this.h,this.cx=this.x+this.w/2,this.cy=this.y+this.h/2,this}},{key:"merge",value:function(e){var n=Math.min(this.x,e.x),r=Math.min(this.y,e.y);return new t(n,r,Math.max(this.x+this.width,e.x+e.width)-n,Math.max(this.y+this.height,e.y+e.height)-r)}},{key:"transform",value:function(e){e instanceof PP||(e=new PP(e));var n=1/0,r=-1/0,i=1/0,o=-1/0;return[new CP(this.x,this.y),new CP(this.x2,this.y),new CP(this.x,this.y2),new CP(this.x2,this.y2)].forEach((function(t){t=t.transform(e),n=Math.min(n,t.x),r=Math.max(r,t.x),i=Math.min(i,t.y),o=Math.max(o,t.y)})),new t(n,i,r-n,o-i)}},{key:"addOffset",value:function(){return this.x+=SC.window.pageXOffset,this.y+=SC.window.pageYOffset,this}},{key:"toString",value:function(){return this.x+" "+this.y+" "+this.width+" "+this.height}},{key:"toArray",value:function(){return[this.x,this.y,this.width,this.height]}},{key:"isNulled",value:function(){return IP(this)}}]),t}();function RP(t,e){var n,r;try{if(IP(n=t(this.node))&&(r=this.node)!==SC.document&&!(SC.document.documentElement.contains||function(t){for(;t.parentNode;)t=t.parentNode;return t===SC.document}).call(SC.document.documentElement,r))throw new Error("Element not in the dom")}catch(t){n=e(this)}return n}LM({viewbox:{viewbox:function(t,e,n,r){return null==t?new LP(this.attr("viewBox")):this.attr("viewBox",new LP(t,e,n,r))},zoom:function(t,e){var n=this.node.clientWidth,r=this.node.clientHeight,i=this.viewbox();if(!n&&!r){var o=window.getComputedStyle(this.node);n=parseFloat(o.getPropertyValue("width")),r=parseFloat(o.getPropertyValue("height"))}var a=n/i.width,s=r/i.height,u=Math.min(a,s);if(null==t)return u;var l=u/t;l===1/0&&(l=Number.MIN_VALUE),e=e||new CP(n/2/a+i.x,r/2/s+i.y);var c=new LP(i).transform(new PP({scale:l,origin:e}));return this.viewbox(c)}}}),RC(LP,"Box");var DP=function(){try{return Function("name","baseClass","_constructor",["baseClass = baseClass || Array","return {","  [name]: class extends baseClass {","    constructor (...args) {","      super(...args)","      _constructor && _constructor.apply(this, args)","    }","  }","}[name]"].join("\n"))}catch(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Array,n=arguments.length>2?arguments[2]:void 0,r=function(){e.apply(this,arguments),n&&n.apply(this,arguments)};return r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r.prototype.map=function(t){var e=new r;return e.push.apply(e,Array.prototype.map.call(this,t)),e},r}}}(),NP=DP("List",Array,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if("number"==typeof t)return this;this.length=0,this.push.apply(this,PM(t))}));jC(NP,{each:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return"function"==typeof t?this.map((function(e){return t.call(e,e)})):this.map((function(e){return e[t].apply(e,n)}))},toArray:function(){return Array.prototype.concat.apply([],this)}});var FP=["toArray","constructor","each"];function jP(t,e){return new NP(mC((e||SC.document).querySelectorAll(t),(function(t){return IC(t)})))}NP.extend=function(t){t=t.reduce((function(t,e){return FP.includes(e)||"_"===e[0]||(t[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return this.each.apply(this,[e].concat(n))}),t}),{}),jC(NP,t)};var UP=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.events,i=void 0===r?{}:r;return TC(this,e),(t=sP(this,uP(e).call(this))).events=i,t}return hP(e,t),$O(e,[{key:"addEventListener",value:function(){}},{key:"dispatch",value:function(t,e){return function(t,e,n){var r=MO(t);return e instanceof SC.window.Event||(e=new SC.window.CustomEvent(e,{detail:n,cancelable:!0})),r.dispatchEvent(e),e}(this,t,e)}},{key:"dispatchEvent",value:function(t){var e=this.getEventHolder().events;if(!e)return!0;var n=e[t.type];for(var r in n)for(var i in n[r])n[r][i](t);return!t.defaultPrevented}},{key:"fire",value:function(t,e){return this.dispatch(t,e),this}},{key:"getEventHolder",value:function(){return this}},{key:"getEventTarget",value:function(){return this}},{key:"off",value:function(t,e){return OO(this,t,e),this}},{key:"on",value:function(t,e,n,r){return CO(this,t,e,n,r),this}},{key:"removeEventListener",value:function(){}}]),e}(AC);function zP(){}RC(UP,"EventTarget");var BP=400,VP=">",HP=0,GP={"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","text-anchor":"start"},WP=DP("SVGArray",Array,(function(t){this.init(t)}));jC(WP,{init:function(t){return"number"==typeof t||(this.length=0,this.push.apply(this,PM(this.parse(t)))),this},toArray:function(){return Array.prototype.concat.apply([],this)},toString:function(){return this.join(" ")},valueOf:function(){var t=[];return t.push.apply(t,PM(this)),t},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t instanceof Array?t:t.trim().split(hO).map(parseFloat)},clone:function(){return new this.constructor(this)},toSet:function(){return new Set(this)}});var qP=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(e,n){return n=Array.isArray(e)?e[1]:n,e=Array.isArray(e)?e[0]:e,this.value=0,this.unit=n||"","number"==typeof e?this.value=isNaN(e)?0:isFinite(e)?e:e<0?-34e37:34e37:"string"==typeof e?(n=e.match(tO))&&(this.value=parseFloat(n[1]),"%"===n[5]?this.value/=100:"s"===n[5]&&(this.value*=1e3),this.unit=n[5]):e instanceof t&&(this.value=e.valueOf(),this.unit=e.unit),this}},{key:"toString",value:function(){return("%"===this.unit?~~(1e8*this.value)/1e6:"s"===this.unit?this.value/1e3:this.value)+this.unit}},{key:"toJSON",value:function(){return this.toString()}},{key:"toArray",value:function(){return[this.value,this.unit]}},{key:"valueOf",value:function(){return this.value}},{key:"plus",value:function(e){return e=new t(e),new t(this+e,this.unit||e.unit)}},{key:"minus",value:function(e){return e=new t(e),new t(this-e,this.unit||e.unit)}},{key:"times",value:function(e){return e=new t(e),new t(this*e,this.unit||e.unit)}},{key:"divide",value:function(e){return e=new t(e),new t(this/e,this.unit||e.unit)}},{key:"convert",value:function(e){return new t(this.value,e)}}]),t}(),XP=[],YP=function(t){function e(t,n){var r;return TC(this,e),(r=sP(this,uP(e).call(this,t))).node=t,r.type=t.nodeName,n&&t!==n&&r.attr(n),r}return hP(e,t),$O(e,[{key:"add",value:function(t,e){return t=PC(t),null==e?this.node.appendChild(t.node):t.node!==this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this}},{key:"addTo",value:function(t){return PC(t).put(this)}},{key:"children",value:function(){return new NP(mC(this.node.children,(function(t){return IC(t)})))}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this}},{key:"clone",value:function(){return this.writeDataToDom(),FC(this.node.cloneNode(!0))}},{key:"each",value:function(t,e){var n,r,i=this.children();for(n=0,r=i.length;n<r;n++)t.apply(i[n],[n,i]),e&&i[n].each(t,e);return this}},{key:"element",value:function(t){return this.put(new e(OC(t)))}},{key:"first",value:function(){return IC(this.node.firstChild)}},{key:"get",value:function(t){return IC(this.node.childNodes[t])}},{key:"getEventHolder",value:function(){return this.node}},{key:"getEventTarget",value:function(){return this.node}},{key:"has",value:function(t){return this.index(t)>=0}},{key:"id",value:function(t){return void 0!==t||this.node.id||(this.node.id=NC(this.type)),this.attr("id",t)}},{key:"index",value:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)}},{key:"last",value:function(){return IC(this.node.lastChild)}},{key:"matches",value:function(t){var e=this.node;return(e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.oMatchesSelector).call(e,t)}},{key:"parent",value:function(t){var e=this;if(!e.node.parentNode)return null;if(e=IC(e.node.parentNode),!t)return e;for(;e;){if("string"==typeof t?e.matches(t):e instanceof t)return e;if(!e.node.parentNode||"#document"===e.node.parentNode.nodeName||"#document-fragment"===e.node.parentNode.nodeName)return null;e=IC(e.node.parentNode)}}},{key:"put",value:function(t,e){return this.add(t,e),t}},{key:"putIn",value:function(t){return PC(t).add(this)}},{key:"remove",value:function(){return this.parent()&&this.parent().removeElement(this),this}},{key:"removeElement",value:function(t){return this.node.removeChild(t.node),this}},{key:"replace",value:function(t){return t=PC(t),this.node.parentNode.replaceChild(t.node,this.node),t}},{key:"round",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,e=arguments.length>1?arguments[1]:void 0,n=Math.pow(10,t),r=this.attr();e||(e=Object.keys(r));var i={};return e.forEach((function(t){i[t]=Math.round(r[t]*n)/n})),this.attr(i),this}},{key:"toString",value:function(){return this.id()}},{key:"svg",value:function(t,e){var n,r,i;if(!1===t&&(e=!1,t=null),null==t||"function"==typeof t){e=null==e||e,this.writeDataToDom();var o=this;if(null!=t){if(o=IC(o.node.cloneNode(!0)),e){var a=t(o);if(o=a||o,!1===a)return""}o.each((function(){var e=t(this),n=e||this;!1===e?this.remove():e&&this!==n&&this.replace(n)}),!0)}return e?o.node.outerHTML:o.node.innerHTML}for(e=null!=e&&e,n=SC.document.createElementNS(xC,"svg"),i=SC.document.createDocumentFragment(),n.innerHTML=t,r=n.children.length;r--;)i.appendChild(n.firstElementChild);var s=this.parent();return e?this.replace(i)&&s:this.add(i)}},{key:"words",value:function(t){return this.node.textContent=t,this}},{key:"writeDataToDom",value:function(){return this.each((function(){this.writeDataToDom()})),this}}]),e}(UP);jC(YP,{attr:function(t,e,n){var r=this;if(null==t){t={},e=this.node.attributes;var i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value;t[l.nodeName]=lO.test(l.nodeValue)?parseFloat(l.nodeValue):l.nodeValue}}catch(t){o=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return t}if(t instanceof Array)return t.reduce((function(t,e){return t[e]=r.attr(e),t}),{});if("object"===uT(t)&&t.constructor===Object)for(e in t)this.attr(e,t[e]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?GP[t]:lO.test(e)?parseFloat(e):e;"number"==typeof(e=XP.reduce((function(e,n){return n(t,e,r)}),e))?e=new qP(e):iP.isColor(e)?e=new iP(e):e.constructor===Array&&(e=new WP(e)),"leading"===t?this.leading&&this.leading(e):"string"==typeof n?this.node.setAttributeNS(n,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!==t&&"x"!==t||this.rebuild()}return this},find:function(t){return jP(t,this.node)},findOne:function(t){return IC(this.node.querySelector(t))}}),RC(YP,"Dom");var QP=function(t){function e(t,n){var r;return TC(this,e),(r=sP(this,uP(e).call(this,t,n))).dom={},r.node.instance=aP(r),t.hasAttribute("svgjs:data")&&r.setData(JSON.parse(t.getAttribute("svgjs:data"))||{}),r}return hP(e,t),$O(e,[{key:"center",value:function(t,e){return this.cx(t).cy(e)}},{key:"cx",value:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)}},{key:"cy",value:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)}},{key:"defs",value:function(){return this.root().defs()}},{key:"dmove",value:function(t,e){return this.dx(t).dy(e)}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.x(new qP(t).plus(this.x()))}},{key:"dy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.y(new qP(t).plus(this.y()))}},{key:"root",value:function(){var t=this.parent(MC.___SYMBOL___ROOT___);return t&&t.root()}},{key:"getEventHolder",value:function(){return this}},{key:"height",value:function(t){return this.attr("height",t)}},{key:"inside",value:function(t,e){var n=this.bbox();return t>n.x&&e>n.y&&t<n.x+n.width&&e<n.y+n.height}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"parents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SC.document;t=PC(t);for(var e=new NP,n=this;(n=n.parent())&&n.node!==t.node&&n.node!==SC.document;)e.push(n);return e}},{key:"reference",value:function(t){if(!(t=this.attr(t)))return null;var e=t.match(rO);return e?PC(e[1]):null}},{key:"setData",value:function(t){return this.dom=t,this}},{key:"size",value:function(t,e){var n=bC(this,t,e);return this.width(new qP(n.width)).height(new qP(n.height))}},{key:"width",value:function(t){return this.attr("width",t)}},{key:"writeDataToDom",value:function(){return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),lP(uP(e.prototype),"writeDataToDom",this).call(this)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("y",t)}}]),e}(YP);jC(QP,{bbox:function(){return new LP(RP.call(this,(function(t){return t.getBBox()}),(function(t){try{var e=t.clone().addTo(kP().svg).show(),n=e.node.getBBox();return e.remove(),n}catch(e){throw new Error('Getting bbox of element "'+t.node.nodeName+'" is not possible. '+e.toString())}})))},rbox:function(t){var e=new LP(RP.call(this,(function(t){return t.getBoundingClientRect()}),(function(t){throw new Error('Getting rbox of element "'+t.node.nodeName+'" is not possible')})));return t?e.transform(t.screenCTM().inverse()):e.addOffset()},point:function(t,e){return new CP(t,e).transform(this.screenCTM().inverse())},ctm:function(){return new PP(this.node.getCTM())},screenCTM:function(){if("function"==typeof this.isRoot&&!this.isRoot()){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new PP(e)}return new PP(this.node.getScreenCTM())}}),RC(QP,"Element");var ZP={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"===e?t:t+"-"+e}};["fill","stroke"].forEach((function(t){var e,n={};n[t]=function(n){if(void 0===n)return this.attr(t);if("string"==typeof n||n instanceof iP||iP.isRgb(n)||n instanceof QP)this.attr(t,n);else for(e=ZP[t].length-1;e>=0;e--)null!=n[ZP[t][e]]&&this.attr(ZP.prefix(t,ZP[t][e]),n[ZP[t][e]]);return this},LM(["Element","Runner"],n)})),LM(["Element","Runner"],{matrix:function(t,e,n,r,i,o){return null==t?new PP(this):this.attr("transform",new PP(t,e,n,r,i,o))},rotate:function(t,e,n){return this.transform({rotate:t,ox:e,oy:n},!0)},skew:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({skew:t,ox:e,oy:n},!0):this.transform({skew:[t,e],ox:n,oy:r},!0)},shear:function(t,e,n){return this.transform({shear:t,ox:e,oy:n},!0)},scale:function(t,e,n,r){return 1===arguments.length||3===arguments.length?this.transform({scale:t,ox:e,oy:n},!0):this.transform({scale:[t,e],ox:n,oy:r},!0)},translate:function(t,e){return this.transform({translate:[t,e]},!0)},relative:function(t,e){return this.transform({relative:[t,e]},!0)},flip:function(t,e){var n="string"==typeof t?t:(isFinite(t),"both"),r="both"===t&&isFinite(e)?[e,e]:"x"===t?[e,0]:"y"===t?[0,e]:isFinite(t)?[t,t]:[0,0];return this.transform({flip:n,origin:r},!0)},opacity:function(t){return this.attr("opacity",t)}}),LM("radius",{radius:function(t,e){var n=(this._element||this).type;return"radialGradient"===n||"radialGradient"===n?this.attr("r",new qP(t)):this.rx(t).ry(null==e?t:e)}}),LM("Path",{length:function(){return this.node.getTotalLength()},pointAt:function(t){return new CP(this.node.getPointAtLength(t))}}),LM(["Element","Runner"],{font:function(t,e){if("object"===uT(t)){for(e in t)this.font(e,t[e]);return this}return"leading"===t?this.leading(e):"anchor"===t?this.attr("text-anchor",e):"size"===t||"family"===t||"weight"===t||"stretch"===t||"variant"===t||"style"===t?this.attr("font-"+t,e):this.attr(t,e)}}),LM("Text",{ax:function(t){return this.attr("x",t)},ay:function(t){return this.attr("y",t)},amove:function(t,e){return this.ax(t).ay(e)}}),LM("Element",["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].reduce((function(t,e){return t[e]=function(t){return null===t?OO(this,e):CO(this,e,t),this},t}),{}));var KP=[].reverse,$P=[1,2];LS({target:"Array",proto:!0,forced:String($P)===String($P.reverse())},{reverse:function(){return RS(this)&&(this.length=this.length),KP.call(this)}}),LS({target:"Object",stat:!0,forced:!cE,sham:!cE},{defineProperties:hT}),LS({target:"Object",stat:!0,forced:!cE,sham:!cE},{defineProperty:LE.f});var JP=PE.f,tk=lE((function(){JP(1)}));function ek(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function rk(t){return this.attr("rx",t)}function ik(t){return this.attr("ry",t)}function ok(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())}function ak(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())}function sk(t){return null==t?this.attr("cx"):this.attr("cx",t)}function uk(t){return null==t?this.attr("cy"):this.attr("cy",t)}function lk(t){return null==t?2*this.rx():this.rx(new qP(t).divide(2))}function ck(t){return null==t?2*this.ry():this.ry(new qP(t).divide(2))}LS({target:"Object",stat:!0,forced:!cE||tk,sham:!cE},{getOwnPropertyDescriptor:function(t,e){return JP(_E(t),e)}}),LS({target:"Object",stat:!0,sham:!cE},{getOwnPropertyDescriptors:function(t){for(var e,n,r=_E(t),i=PE.f,o=ES(r),a={},s=0;o.length>s;)void 0!==(n=i(r,e=o[s++]))&&DS(a,e,n);return a}}),LM("Element",{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(iO).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(hO).map((function(t){return parseFloat(t)}))]})).reverse().reduce((function(t,e){return"matrix"===e[0]?t.lmultiply(PP.fromArray(e[1])):t[e[0]].apply(t,e[1])}),new PP)},toParent:function(t){if(this===t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toRoot:function(){return this.toParent(this.root())},transform:function(t,e){if(null==t||"string"==typeof t){var n=new PP(this).decompose();return null==t?n:n[t]}PP.isMatrixLike(t)||(t=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nk(n,!0).forEach((function(e){ek(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nk(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{origin:_C(t,this)}));var r=new PP(!0===e?this:e||!1).transform(t);return this.attr("transform",r)}});var hk={__proto__:null,rx:rk,ry:ik,x:ok,y:ak,cx:sk,cy:uk,width:lk,height:ck},fk=function(t){function e(){return TC(this,e),sP(this,uP(e).apply(this,arguments))}return hP(e,t),e}(QP);RC(fk,"Shape");var pk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("circle",t),t))}return hP(e,t),$O(e,[{key:"radius",value:function(t){return this.attr("r",t)}},{key:"rx",value:function(t){return this.attr("r",t)}},{key:"ry",value:function(t){return this.rx(t)}},{key:"size",value:function(t){return this.radius(new qP(t).divide(2))}}]),e}(fk);jC(pk,{x:ok,y:ak,cx:sk,cy:uk,width:lk,height:ck}),LM({Container:{circle:UC((function(t){return this.put(new pk).size(t).move(0,0)}))}}),RC(pk,"Circle");var dk=function(t){function e(){return TC(this,e),sP(this,uP(e).apply(this,arguments))}return hP(e,t),$O(e,[{key:"flatten",value:function(t){return this.each((function(){return this instanceof e?this.flatten(t).ungroup(t):this.toParent(t)})),this.node.firstElementChild||this.remove(),this}},{key:"ungroup",value:function(t){return t=t||this.parent(),this.each((function(){return this.toParent(t)})),this.remove(),this}}]),e}(QP);RC(dk,"Container");var mk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("defs",t),t))}return hP(e,t),$O(e,[{key:"flatten",value:function(){return this}},{key:"ungroup",value:function(){return this}}]),e}(dk);RC(mk,"Defs");var vk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("ellipse",t),t))}return hP(e,t),$O(e,[{key:"size",value:function(t,e){var n=bC(this,t,e);return this.rx(new qP(n.width).divide(2)).ry(new qP(n.height).divide(2))}}]),e}(fk);jC(vk,hk),LM("Container",{ellipse:UC((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;return this.put(new vk).size(t,e).move(0,0)}))}),RC(vk,"Ellipse");var gk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("stop",t),t))}return hP(e,t),$O(e,[{key:"update",value:function(t){return("number"==typeof t||t instanceof qP)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new qP(t.offset)),this}}]),e}(QP);function yk(t,e){return"radialGradient"===(this._element||this).type?this.attr({fx:new qP(t),fy:new qP(e)}):this.attr({x1:new qP(t),y1:new qP(e)})}function bk(t,e){return"radialGradient"===(this._element||this).type?this.attr({cx:new qP(t),cy:new qP(e)}):this.attr({x2:new qP(t),y2:new qP(e)})}RC(gk,"Stop");var _k={__proto__:null,from:yk,to:bk},xk=function(t){function e(t,n){return TC(this,e),sP(this,uP(e).call(this,kC(t+"Gradient","string"==typeof t?null:t),n))}return hP(e,t),$O(e,[{key:"stop",value:function(t,e,n){return this.put(new gk).update(t,e,n)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,r){return"transform"===t&&(t="gradientTransform"),lP(uP(e.prototype),"attr",this).call(this,t,n,r)}},{key:"targets",value:function(){return jP('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new LP}}]),e}(dk);jC(xk,_k),LM({Container:{gradient:UC((function(t,e){return this.defs().gradient(t,e)}))},Defs:{gradient:UC((function(t,e){return this.put(new xk(t)).update(e)}))}}),RC(xk,"Gradient");var wk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("pattern",t),t))}return hP(e,t),$O(e,[{key:"url",value:function(){return"url(#"+this.id()+")"}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return this.url()}},{key:"attr",value:function(t,n,r){return"transform"===t&&(t="patternTransform"),lP(uP(e.prototype),"attr",this).call(this,t,n,r)}},{key:"targets",value:function(){return jP('svg [fill*="'+this.id()+'"]')}},{key:"bbox",value:function(){return new LP}}]),e}(dk);LM({Container:{pattern:function(){var t;return(t=this.defs()).pattern.apply(t,arguments)}},Defs:{pattern:UC((function(t,e,n){return this.put(new wk).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}))}}),RC(wk,"Pattern");var Ek,Sk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("image",t),t))}return hP(e,t),$O(e,[{key:"load",value:function(t,e){if(!t)return this;var n=new SC.window.Image;return CO(n,"load",(function(t){var r=this.parent(wk);0===this.width()&&0===this.height()&&this.size(n.width,n.height),r instanceof wk&&0===r.width()&&0===r.height()&&r.size(this.width(),this.height()),"function"==typeof e&&e.call(this,t)}),this),CO(n,"load error",(function(){OO(n)})),this.attr("href",n.src=t,EC)}}]),e}(fk);Ek=function(t,e,n){return"fill"!==t&&"stroke"!==t||cO.test(e)&&(e=n.root().defs().image(e)),e instanceof Sk&&(e=n.root().defs().pattern(0,0,(function(t){t.add(e)}))),e},XP.push(Ek),LM({Container:{image:UC((function(t,e){return this.put(new Sk).size(0,0).load(t,e)}))}}),RC(Sk,"Image");var Tk=DP("PointArray",WP);jC(Tk,{toString:function(){for(var t=0,e=this.length,n=[];t<e;t++)n.push(this[t].join(","));return n.join(" ")},toLine:function(){return{x1:this[0][0],y1:this[0][1],x2:this[1][0],y2:this[1][1]}},at:function(t){if(!this.destination)return this;for(var e=0,n=this.length,r=[];e<n;e++)r.push([this[e][0]+(this.destination[e][0]-this[e][0])*t,this[e][1]+(this.destination[e][1]-this[e][1])*t]);return new Tk(r)},parse:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[[0,0]],e=[];if(t instanceof Array){if(t[0]instanceof Array)return t}else t=t.trim().split(hO).map(parseFloat);t.length%2!=0&&t.pop();for(var n=0,r=t.length;n<r;n+=2)e.push([t[n],t[n+1]]);return e},transform:function(t){for(var e=[],n=0;n<this.length;n++){var r=this[n];e.push([t.a*r[0]+t.c*r[1]+t.e,t.b*r[0]+t.d*r[1]+t.f])}return new Tk(e)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r=this.length-1;r>=0;r--)this[r]=[this[r][0]+t,this[r][1]+e];return this},size:function(t,e){var n,r=this.bbox();for(n=this.length-1;n>=0;n--)r.width&&(this[n][0]=(this[n][0]-r.x)*t/r.width+r.x),r.height&&(this[n][1]=(this[n][1]-r.y)*e/r.height+r.y);return this},bbox:function(){var t=-1/0,e=-1/0,n=1/0,r=1/0;return this.forEach((function(i){t=Math.max(i[0],t),e=Math.max(i[1],e),n=Math.min(i[0],n),r=Math.min(i[1],r)})),{x:n,y:r,width:t-n,height:e-r}}});var Ak={__proto__:null,MorphArray:Tk,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}},Mk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("line",t),t))}return hP(e,t),$O(e,[{key:"array",value:function(){return new Tk([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])}},{key:"plot",value:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new Tk(t).toLine(),this.attr(t))}},{key:"move",value:function(t,e){return this.attr(this.array().move(t,e).toLine())}},{key:"size",value:function(t,e){var n=bC(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}}]),e}(fk);jC(Mk,Ak),LM({Container:{line:UC((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Mk.prototype.plot.apply(this.put(new Mk),null!=e[0]?e:[0,0,0,0])}))}}),RC(Mk,"Line");var Ck=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("marker",t),t))}return hP(e,t),$O(e,[{key:"width",value:function(t){return this.attr("markerWidth",t)}},{key:"height",value:function(t){return this.attr("markerHeight",t)}},{key:"ref",value:function(t,e){return this.attr("refX",t).attr("refY",e)}},{key:"update",value:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this}},{key:"toString",value:function(){return"url(#"+this.id()+")"}}]),e}(dk);LM({Container:{marker:function(){var t;return(t=this.defs()).marker.apply(t,arguments)}},Defs:{marker:UC((function(t,e,n){return this.put(new Ck).size(t,e).ref(t/2,e/2).viewbox(0,0,t,e).attr("orient","auto").update(n)}))},marker:{marker:function(t,e,n,r){var i=["marker"];return"all"!==t&&i.push(t),i=i.join("-"),t=arguments[1]instanceof Ck?arguments[1]:this.defs().marker(e,n,r),this.attr(i,t)}}}),RC(Ck,"Marker");var Ok=[].sort,Pk=[1,2,3],kk=lE((function(){Pk.sort(void 0)})),Ik=lE((function(){Pk.sort(null)})),Lk=BC("sort");function Rk(t,e){return function(n){return null==n?this[n]:(this[t]=n,e&&e.call(this),this)}}LS({target:"Array",proto:!0,forced:kk||!Ik||Lk},{sort:function(t){return void 0===t?Ok.call(lT(this)):Ok.call(lT(this),ET(t))}});var Dk={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)},bezier:function(t,e,n,r){return function(i){return i<0?t>0?e/t*i:n>0?r/n*i:0:i>1?n<1?(1-r)/(1-n)*i+(r-n)/(1-n):t<1?(1-e)/(1-t)*i+(e-t)/(1-t):1:3*i*Math.pow(1-i,2)*e+3*Math.pow(i,2)*(1-i)*r+Math.pow(i,3)}},steps:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";e=e.split("-").reverse()[0];var n=t;return"none"===e?--n:"both"===e&&++n,function(r){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=Math.floor(r*t),a=r*o%1==0;return"start"!==e&&"both"!==e||++o,i&&a&&--o,r>=0&&o<0&&(o=0),r<=1&&o>n&&(o=n),o/n}}},Nk=function(){function t(){TC(this,t)}return $O(t,[{key:"done",value:function(){return!1}}]),t}(),Fk=function(t){function e(t){var n;return TC(this,e),(n=sP(this,uP(e).call(this))).ease=Dk[t||VP]||t,n}return hP(e,t),$O(e,[{key:"step",value:function(t,e,n){return"number"!=typeof t?n<1?t:e:t+(e-t)*this.ease(n)}}]),e}(Nk),jk=function(t){function e(t){var n;return TC(this,e),(n=sP(this,uP(e).call(this))).stepper=t,n}return hP(e,t),$O(e,[{key:"step",value:function(t,e,n,r){return this.stepper(t,e,n,r)}},{key:"done",value:function(t){return t.done}}]),e}(Nk);function Uk(){var t=(this._duration||500)/1e3,e=this._overshoot||0,n=Math.PI,r=Math.log(e/100+1e-10),i=-r/Math.sqrt(n*n+r*r),o=3.9/(i*t);this.d=2*i*o,this.k=o*o}jC(function(t){function e(t,n){var r;return TC(this,e),(r=sP(this,uP(e).call(this))).duration(t||500).overshoot(n||0),r}return hP(e,t),$O(e,[{key:"step",value:function(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;n>100&&(n=16),n/=1e3;var i=r.velocity||0,o=-this.d*i-this.k*(t-e),a=t+i*n+o*n*n/2;return r.velocity=i+o*n,r.done=Math.abs(e-a)+Math.abs(i)<.002,r.done?e:a}}]),e}(jk),{duration:Rk("_duration",Uk),overshoot:Rk("_overshoot",Uk)}),jC(function(t){function e(t,n,r,i){var o;return TC(this,e),t=null==t?.1:t,n=null==n?.01:n,r=null==r?0:r,i=null==i?1e3:i,(o=sP(this,uP(e).call(this))).p(t).i(n).d(r).windup(i),o}return hP(e,t),$O(e,[{key:"step",value:function(t,e,n,r){if("string"==typeof t)return t;if(r.done=n===1/0,n===1/0)return e;if(0===n)return t;var i=e-t,o=(r.integral||0)+i*n,a=(i-(r.error||0))/n,s=this.windup;return!1!==s&&(o=Math.max(-s,Math.min(o,s))),r.error=i,r.integral=o,r.done=Math.abs(i)<.001,r.done?e:t+(this.P*i+this.I*o+this.D*a)}}]),e}(jk),{windup:Rk("windup"),p:Rk("P"),i:Rk("I"),d:Rk("D")});var zk=DP("PathArray",WP);function Bk(t,e,n,r){return n+r.replace(vO," .")}for(var Vk={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},T:function(t,e){return e.x=t[0],e.y=t[1],["T",t[0],t[1]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]},A:function(t,e){return e.x=t[5],e.y=t[6],["A",t[0],t[1],t[2],t[3],t[4],t[5],t[6]]}},Hk="mlhvqtcsaz".split(""),Gk=0,Wk=Hk.length;Gk<Wk;++Gk)Vk[Hk[Gk]]=function(t){return function(e,n,r){if("H"===t)e[0]=e[0]+n.x;else if("V"===t)e[0]=e[0]+n.y;else if("A"===t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var i=0,o=e.length;i<o;++i)e[i]=e[i]+(i%2?n.y:n.x);return Vk[t](e,n,r)}}(Hk[Gk].toUpperCase());jC(zk,{toString:function(){return function(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e][0],null!=t[e][1]&&(r+=t[e][1],null!=t[e][2]&&(r+=" ",r+=t[e][2],null!=t[e][3]&&(r+=" ",r+=t[e][3],r+=" ",r+=t[e][4],null!=t[e][5]&&(r+=" ",r+=t[e][5],r+=" ",r+=t[e][6],null!=t[e][7]&&(r+=" ",r+=t[e][7])))));return r+" "}(this)},move:function(t,e){var n=this.bbox();if(t-=n.x,e-=n.y,!isNaN(t)&&!isNaN(e))for(var r,i=this.length-1;i>=0;i--)"M"===(r=this[i][0])||"L"===r||"T"===r?(this[i][1]+=t,this[i][2]+=e):"H"===r?this[i][1]+=t:"V"===r?this[i][1]+=e:"C"===r||"S"===r||"Q"===r?(this[i][1]+=t,this[i][2]+=e,this[i][3]+=t,this[i][4]+=e,"C"===r&&(this[i][5]+=t,this[i][6]+=e)):"A"===r&&(this[i][6]+=t,this[i][7]+=e);return this},size:function(t,e){var n,r,i=this.bbox();for(i.width=0===i.width?1:i.width,i.height=0===i.height?1:i.height,n=this.length-1;n>=0;n--)"M"===(r=this[n][0])||"L"===r||"T"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y):"H"===r?this[n][1]=(this[n][1]-i.x)*t/i.width+i.x:"V"===r?this[n][1]=(this[n][1]-i.y)*e/i.height+i.y:"C"===r||"S"===r||"Q"===r?(this[n][1]=(this[n][1]-i.x)*t/i.width+i.x,this[n][2]=(this[n][2]-i.y)*e/i.height+i.y,this[n][3]=(this[n][3]-i.x)*t/i.width+i.x,this[n][4]=(this[n][4]-i.y)*e/i.height+i.y,"C"===r&&(this[n][5]=(this[n][5]-i.x)*t/i.width+i.x,this[n][6]=(this[n][6]-i.y)*e/i.height+i.y)):"A"===r&&(this[n][1]=this[n][1]*t/i.width,this[n][2]=this[n][2]*e/i.height,this[n][6]=(this[n][6]-i.x)*t/i.width+i.x,this[n][7]=(this[n][7]-i.y)*e/i.height+i.y);return this},equalCommands:function(t){var e,n,r;for(t=new zk(t),r=this.length===t.length,e=0,n=this.length;r&&e<n;e++)r=this[e][0]===t[e][0];return r},morph:function(t){return t=new zk(t),this.equalCommands(t)?this.destination=t:this.destination=null,this},at:function(t){if(!this.destination)return this;var e,n,r,i,o=this,a=this.destination.value,s=[],u=new zk;for(e=0,n=o.length;e<n;e++){for(s[e]=[o[e][0]],r=1,i=o[e].length;r<i;r++)s[e][r]=o[e][r]+(a[e][r]-o[e][r])*t;"A"===s[e][0]&&(s[e][4]=+(0!==s[e][4]),s[e][5]=+(0!==s[e][5]))}return u.value=s,u},parse:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[["M",0,0]];if(e instanceof zk)return e;var n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};e="string"==typeof e?e.replace(mO,Bk).replace(pO," $& ").replace(fO,"$1 -").trim().split(hO):e.reduce((function(t,e){return[].concat.call(t,e)}),[]);var r=[],i=new CP,o=new CP,a=0,s=e.length;do{dO.test(e[a])?(t=e[a],++a):"M"===t?t="L":"m"===t&&(t="l"),r.push(Vk[t].call(null,e.slice(a,a+=n[t.toUpperCase()]).map(parseFloat),i,o))}while(s>a);return r},bbox:function(){return kP().path.setAttribute("d",this.toString()),kP.nodes.path.getBBox()}});var qk=function(){function t(e){TC(this,t),this._stepper=e||new Fk("-"),this._from=null,this._to=null,this._type=null,this._context=null,this._morphObj=null}return $O(t,[{key:"from",value:function(t){return null==t?this._from:(this._from=this._set(t),this)}},{key:"to",value:function(t){return null==t?this._to:(this._to=this._set(t),this)}},{key:"type",value:function(t){return null==t?this._type:(this._type=t,this)}},{key:"_set",value:function(t){if(!this._type){var e=uT(t);"number"===e?this.type(qP):"string"===e?iP.isColor(t)?this.type(iP):hO.test(t)?this.type(pO.test(t)?zk:WP):tO.test(t)?this.type(qP):this.type(Xk):Zk.indexOf(t.constructor)>-1?this.type(t.constructor):Array.isArray(t)?this.type(WP):"object"===e?this.type(Qk):this.type(Xk)}var n=new this._type(t);return this._type===iP&&(n=this._to?n[this._to[4]]():this._from?n[this._from[4]]():n),n=n.toArray(),this._morphObj=this._morphObj||new this._type,this._context=this._context||Array.apply(null,Array(n.length)).map(Object).map((function(t){return t.done=!0,t})),n}},{key:"stepper",value:function(t){return null==t?this._stepper:(this._stepper=t,this)}},{key:"done",value:function(){return this._context.map(this._stepper.done).reduce((function(t,e){return t&&e}),!0)}},{key:"at",value:function(t){var e=this;return this._morphObj.fromArray(this._from.map((function(n,r){return e._stepper.step(n,e._to[r],t,e._context[r],e._context)})))}}]),t}(),Xk=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(t){return t=Array.isArray(t)?t[0]:t,this.value=t,this}},{key:"valueOf",value:function(){return this.value}},{key:"toArray",value:function(){return[this.value]}}]),t}(),Yk=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(e){return Array.isArray(e)&&(e={scaleX:e[0],scaleY:e[1],shear:e[2],rotate:e[3],translateX:e[4],translateY:e[5],originX:e[6],originY:e[7]}),Object.assign(this,t.defaults,e),this}},{key:"toArray",value:function(){var t=this;return[t.scaleX,t.scaleY,t.shear,t.rotate,t.translateX,t.translateY,t.originX,t.originY]}}]),t}();Yk.defaults={scaleX:1,scaleY:1,shear:0,rotate:0,translateX:0,translateY:0,originX:0,originY:0};var Qk=function(){function t(){TC(this,t),this.init.apply(this,arguments)}return $O(t,[{key:"init",value:function(t){if(this.values=[],!Array.isArray(t)){t=t||{};var e=[];for(var n in t)e.push([n,t[n]]);return e.sort((function(t,e){return t[0]-e[0]})),this.values=e.reduce((function(t,e){return t.concat(e)}),[]),this}this.values=t}},{key:"valueOf",value:function(){for(var t={},e=this.values,n=0,r=e.length;n<r;n+=2)t[e[n]]=e[n+1];return t}},{key:"toArray",value:function(){return this.values}}]),t}(),Zk=[Xk,Yk,Qk],Kk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("path",t),t))}return hP(e,t),$O(e,[{key:"array",value:function(){return this._array||(this._array=new zk(this.attr("d")))}},{key:"plot",value:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new zk(t))}},{key:"clear",value:function(){return delete this._array,this}},{key:"move",value:function(t,e){return this.attr("d",this.array().move(t,e))}},{key:"x",value:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)}},{key:"y",value:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)}},{key:"size",value:function(t,e){var n=bC(this,t,e);return this.attr("d",this.array().size(n.width,n.height))}},{key:"width",value:function(t){return null==t?this.bbox().width:this.size(t,this.bbox().height)}},{key:"height",value:function(t){return null==t?this.bbox().height:this.size(this.bbox().width,t)}},{key:"targets",value:function(){return jP('svg textpath [href*="'+this.id()+'"]')}}]),e}(fk);Kk.prototype.MorphArray=zk,LM({Container:{path:UC((function(t){return this.put(new Kk).plot(t||new zk)}))}}),RC(Kk,"Path");var $k={__proto__:null,array:function(){return this._array||(this._array=new Tk(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new Tk(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=bC(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}},Jk=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("polygon",t),t))}return hP(e,t),e}(fk);LM({Container:{polygon:UC((function(t){return this.put(new Jk).plot(t||new Tk)}))}}),jC(Jk,Ak),jC(Jk,$k),RC(Jk,"Polygon");var tI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("polyline",t),t))}return hP(e,t),e}(fk);LM({Container:{polyline:UC((function(t){return this.put(new tI).plot(t||new Tk)}))}}),jC(tI,Ak),jC(tI,$k),RC(tI,"Polyline");var eI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("rect",t),t))}return hP(e,t),e}(fk);jC(eI,{rx:rk,ry:ik}),LM({Container:{rect:UC((function(t,e){return this.put(new eI).size(t,e)}))}}),RC(eI,"Rect");var nI=Math.max,rI=Math.min,iI=9007199254740991,oI="Maximum allowed length exceeded";LS({target:"Array",proto:!0,forced:!qS("splice")},{splice:function(t,e){var n,r,i,o,a,s,u=lT(this),l=hS(u.length),c=dS(t,l),h=arguments.length;if(0===h?n=r=0:1===h?(n=0,r=l-c):(n=h-2,r=rI(nI(lS(e),0),l-c)),l+n-r>iI)throw TypeError(oI);for(i=AT(u,r),o=0;o<r;o++)(a=c+o)in u&&DS(i,o,u[a]);if(i.length=r,n<r){for(o=c;o<l-r;o++)s=o+n,(a=o+r)in u?u[s]=u[a]:delete u[s];for(o=l;o>l-r+n;o--)delete u[o-1]}else if(n>r)for(o=l-r;o>c;o--)s=o+n-1,(a=o+r-1)in u?u[s]=u[a]:delete u[s];for(o=0;o<n;o++)u[o+c]=arguments[o+2];return u.length=l-r+n,i}});var aI=function(){function t(){TC(this,t),this._first=null,this._last=null}return $O(t,[{key:"push",value:function(t){var e=t.next?t:{value:t,next:null,prev:null};return this._last?(e.prev=this._last,this._last.next=e,this._last=e):(this._last=e,this._first=e),e}},{key:"shift",value:function(){var t=this._first;return t?(this._first=t.next,this._first&&(this._first.prev=null),this._last=this._first?this._last:null,t.value):null}},{key:"first",value:function(){return this._first&&this._first.value}},{key:"last",value:function(){return this._last&&this._last.value}},{key:"remove",value:function(t){t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t===this._last&&(this._last=t.prev),t===this._first&&(this._first=t.next),t.prev=null,t.next=null}}]),t}(),sI={nextDraw:null,frames:new aI,timeouts:new aI,immediates:new aI,timer:function(){return SC.window.performance||SC.window.Date},transforms:[],frame:function(t){var e=sI.frames.push({run:t});return null===sI.nextDraw&&(sI.nextDraw=SC.window.requestAnimationFrame(sI._draw)),e},timeout:function(t,e){e=e||0;var n=sI.timer().now()+e,r=sI.timeouts.push({run:t,time:n});return null===sI.nextDraw&&(sI.nextDraw=SC.window.requestAnimationFrame(sI._draw)),r},immediate:function(t){var e=sI.immediates.push(t);return null===sI.nextDraw&&(sI.nextDraw=SC.window.requestAnimationFrame(sI._draw)),e},cancelFrame:function(t){null!=t&&sI.frames.remove(t)},clearTimeout:function(t){null!=t&&sI.timeouts.remove(t)},cancelImmediate:function(t){null!=t&&sI.immediates.remove(t)},_draw:function(t){for(var e=null,n=sI.timeouts.last();(e=sI.timeouts.shift())&&(t>=e.time?e.run():sI.timeouts.push(e),e!==n););for(var r=null,i=sI.frames.last();r!==i&&(r=sI.frames.shift());)r.run(t);for(var o=null;o=sI.immediates.shift();)o();sI.nextDraw=sI.timeouts.first()||sI.frames.first()?SC.window.requestAnimationFrame(sI._draw):null}},uI=function(t){var e=t.start,n=t.runner.duration();return{start:e,duration:n,end:e+n,runner:t.runner}},lI=function(){var t=SC.window;return(t.performance||t.Date).now()},cI=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lI;return TC(this,e),(t=sP(this,uP(e).call(this)))._timeSource=n,t._startTime=0,t._speed=1,t._persist=0,t._nextFrame=null,t._paused=!0,t._runners=[],t._runnerIds=[],t._lastRunnerId=-1,t._time=0,t._lastSourceTime=0,t._lastStepTime=0,t._step=t._stepFn.bind(aP(t),!1),t._stepImmediate=t._stepFn.bind(aP(t),!0),t}return hP(e,t),$O(e,[{key:"schedule",value:function(t,e,n){if(null==t)return this._runners.map(uI);var r=0,i=this.getEndTime();if(e=e||0,null==n||"last"===n||"after"===n)r=i;else if("absolute"===n||"start"===n)r=e,e=0;else if("now"===n)r=this._time;else{if("relative"!==n)throw new Error('Invalid value for the "when" parameter');var o=this._runners[t.id];o&&(r=o.start+e,e=0)}t.unschedule(),t.timeline(this);var a=t.persist(),s={persist:null===a?this._persist:a,start:r+e,runner:t};return this._lastRunnerId=t.id,this._runners.push(s),this._runners.sort((function(t,e){return t.start-e.start})),this._runnerIds=this._runners.map((function(t){return t.runner.id})),this.updateTime()._continue(),this}},{key:"unschedule",value:function(t){var e=this._runnerIds.indexOf(t.id);return e<0||(this._runners.splice(e,1),this._runnerIds.splice(e,1),t.timeline(null)),this}},{key:"getEndTime",value:function(){var t=this._runners[this._runnerIds.indexOf(this._lastRunnerId)],e=t?t.runner.duration():0;return(t?t.start:0)+e}},{key:"getEndTimeOfTimeline",value:function(){for(var t=0,e=0;e<this._runners.length;e++){var n=this._runners[e],r=n?n.runner.duration():0,i=(n?n.start:0)+r;i>t&&(t=i)}return t}},{key:"updateTime",value:function(){return this.active()||(this._lastSourceTime=this._timeSource()),this}},{key:"play",value:function(){return this._paused=!1,this.updateTime()._continue()}},{key:"pause",value:function(){return this._paused=!0,this._continue()}},{key:"stop",value:function(){return this.time(0),this.pause()}},{key:"finish",value:function(){return this.time(this.getEndTimeOfTimeline()+1),this.pause()}},{key:"speed",value:function(t){return null==t?this._speed:(this._speed=t,this)}},{key:"reverse",value:function(t){var e=this.speed();if(null==t)return this.speed(-e);var n=Math.abs(e);return this.speed(t?n:-n)}},{key:"seek",value:function(t){return this.time(this._time+t)}},{key:"time",value:function(t){return null==t?this._time:(this._time=t,this._continue(!0))}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"source",value:function(t){return null==t?this._timeSource:(this._timeSource=t,this)}},{key:"_stepFn",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this._timeSource(),n=e-this._lastSourceTime;t&&(n=0);var r=this._speed*n+(this._time-this._lastStepTime);this._lastSourceTime=e,t||(this._time+=r,this._time=this._time<0?0:this._time),this._lastStepTime=this._time,this.fire("time",this._time);for(var i=this._runners.length;i--;){var o=this._runners[i],a=o.runner,s=this._time-o.start;s<=0&&a.reset()}for(var u=!1,l=0,c=this._runners.length;l<c;l++){var h=this._runners[l],f=h.runner,p=r,d=this._time-h.start;if(d<=0)u=!0;else if(d<p&&(p=d),f.active()){var m=f.step(p).done;if(m){if(!0!==h.persist){var v=f.duration()-f.time()+this._time;v+h.persist<this._time&&(f.unschedule(),--l,--c)}}else u=!0}}return u&&!(this._speed<0&&0===this._time)||this._runnerIds.length&&this._speed<0&&this._time>0?this._continue():(this.pause(),this.fire("finished")),this}},{key:"_continue",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return sI.cancelFrame(this._nextFrame),this._nextFrame=null,t?this._stepImmediate():(this._paused||(this._nextFrame=sI.frame(this._step)),this)}},{key:"active",value:function(){return!!this._nextFrame}}]),e}(UP);function hI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hI(n,!0).forEach((function(e){ek(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hI(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}LM({Element:{timeline:function(t){return null==t?(this._timeline=this._timeline||new cI,this._timeline):(this._timeline=t,this)}}});var pI=function(t){function e(t){var n;return TC(this,e),(n=sP(this,uP(e).call(this))).id=e.id++,t="function"==typeof(t=null==t?BP:t)?new jk(t):t,n._element=null,n._timeline=null,n.done=!1,n._queue=[],n._duration="number"==typeof t&&t,n._isDeclarative=t instanceof jk,n._stepper=n._isDeclarative?t:new Fk,n._history={},n.enabled=!0,n._time=0,n._lastTime=0,n._reseted=!0,n.transforms=new PP,n.transformId=1,n._haveReversed=!1,n._reverse=!1,n._loopsDone=0,n._swing=!1,n._wait=0,n._times=1,n._frameId=null,n._persist=!!n._isDeclarative||null,n}return hP(e,t),$O(e,[{key:"element",value:function(t){return null==t?this._element:(this._element=t,t._prepareRunner(),this)}},{key:"timeline",value:function(t){return void 0===t?this._timeline:(this._timeline=t,this)}},{key:"animate",value:function(t,n,r){var i=e.sanitise(t,n,r),o=new e(i.duration);return this._timeline&&o.timeline(this._timeline),this._element&&o.element(this._element),o.loop(i).schedule(i.delay,i.when)}},{key:"schedule",value:function(t,e,n){if(t instanceof cI||(n=e,e=t,t=this.timeline()),!t)throw Error("Runner cannot be scheduled without timeline");return t.schedule(this,e,n),this}},{key:"unschedule",value:function(){var t=this.timeline();return t&&t.unschedule(this),this}},{key:"loop",value:function(t,e,n){return"object"===uT(t)&&(e=t.swing,n=t.wait,t=t.times),this._times=t||1/0,this._swing=e||!1,this._wait=n||0,!0===this._times&&(this._times=1/0),this}},{key:"delay",value:function(t){return this.animate(0,t)}},{key:"queue",value:function(t,e,n,r){return this._queue.push({initialiser:t||zP,runner:e||zP,retarget:n,isTransform:r,initialised:!1,finished:!1}),this.timeline()&&this.timeline()._continue(),this}},{key:"during",value:function(t){return this.queue(null,t)}},{key:"after",value:function(t){return this.on("finished",t)}},{key:"time",value:function(t){if(null==t)return this._time;var e=t-this._time;return this.step(e),this}},{key:"duration",value:function(){return this._times*(this._wait+this._duration)-this._wait}},{key:"loops",value:function(t){var e=this._duration+this._wait;if(null==t){var n=Math.floor(this._time/e),r=(this._time-n*e)/this._duration;return Math.min(n+r,this._times)}var i=t%1,o=e*Math.floor(t)+this._duration*i;return this.time(o)}},{key:"persist",value:function(t){return null==t?this._persist:(this._persist=t,this)}},{key:"position",value:function(t){var e,n=this._time,r=this._duration,i=this._wait,o=this._times,a=this._swing,s=this._reverse;if(null==t){var u=function(t){var e=a*Math.floor(t%(2*(i+r))/(i+r)),n=e&&!s||!e&&s,o=Math.pow(-1,n)*(t%(i+r))/r+n;return Math.max(Math.min(o,1),0)},l=o*(i+r)-i;return e=n<=0?Math.round(u(1e-5)):n<l?u(n):Math.round(u(l-1e-5))}var c=Math.floor(this.loops()),h=a&&c%2==0;return e=c+(h&&!s||s&&h?t:1-t),this.loops(e)}},{key:"progress",value:function(t){return null==t?Math.min(1,this._time/this.duration()):this.time(t*this.duration())}},{key:"step",value:function(t){if(!this.enabled)return this;t=null==t?16:t,this._time+=t;var e=this.position(),n=this._lastPosition!==e&&this._time>=0;this._lastPosition=e;var r=this.duration(),i=this._lastTime<=0&&this._time>0,o=this._lastTime<r&&this._time>=r;this._lastTime=this._time,i&&this.fire("start",this);var a=this._isDeclarative;if(this.done=!a&&!o&&this._time>=r,this._reseted=!1,n||a){this._initialise(n),this.transforms=new PP;var s=this._run(a?t:e);this.fire("step",this)}return this.done=this.done||s&&a,o&&this.fire("finished",this),this}},{key:"reset",value:function(){return this._reseted||(this.time(0),this._reseted=!0),this}},{key:"finish",value:function(){return this.step(1/0)}},{key:"reverse",value:function(t){return this._reverse=null==t?!this._reverse:t,this}},{key:"ease",value:function(t){return this._stepper=new Fk(t),this}},{key:"active",value:function(t){return null==t?this.enabled:(this.enabled=t,this)}},{key:"_rememberMorpher",value:function(t,e){if(this._history[t]={morpher:e,caller:this._queue[this._queue.length-1]},this._isDeclarative){var n=this.timeline();n&&n.play()}}},{key:"_tryRetarget",value:function(t,e,n){if(this._history[t]){if(!this._history[t].caller.initialised){var r=this._queue.indexOf(this._history[t].caller);return this._queue.splice(r,1),!1}this._history[t].caller.retarget?this._history[t].caller.retarget(e,n):this._history[t].morpher.to(e),this._history[t].caller.finished=!1;var i=this.timeline();return i&&i.play(),!0}return!1}},{key:"_initialise",value:function(t){if(t||this._isDeclarative)for(var e=0,n=this._queue.length;e<n;++e){var r=this._queue[e],i=this._isDeclarative||!r.initialised&&t;t=!r.finished,i&&t&&(r.initialiser.call(this),r.initialised=!0)}}},{key:"_run",value:function(t){for(var e=!0,n=0,r=this._queue.length;n<r;++n){var i=this._queue[n],o=i.runner.call(this,t);i.finished=i.finished||!0===o,e=e&&i.finished}return e}},{key:"addTransform",value:function(t,e){return this.transforms.lmultiplyO(t),this}},{key:"clearTransform",value:function(){return this.transforms=new PP,this}},{key:"clearTransformsFromQueue",value:function(){this.done&&this._timeline&&this._timeline._runnerIds.includes(this.id)||(this._queue=this._queue.filter((function(t){return!t.isTransform})))}}],[{key:"sanitise",value:function(t,e,n){var r=1,i=!1,o=0;return e=e||HP,n=n||"last","object"!==uT(t=t||BP)||t instanceof Nk||(e=t.delay||e,n=t.when||n,i=t.swing||i,r=t.times||r,o=t.wait||o,t=t.duration||BP),{duration:t,delay:e,swing:i,times:r,wait:o,when:n}}}]),e}(UP);pI.id=0;var dI=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new PP,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];TC(this,t),this.transforms=e,this.id=n,this.done=r}return $O(t,[{key:"clearTransformsFromQueue",value:function(){}}]),t}();jC([pI,dI],{mergeWith:function(t){return new dI(t.transforms.lmultiply(this.transforms),t.id)}});var mI=function(t,e){return t.lmultiplyO(e)},vI=function(t){return t.transforms};function gI(){var t=this._transformationRunners.runners.map(vI).reduce(mI,new PP);this.transform(t),this._transformationRunners.merge(),1===this._transformationRunners.length()&&(this._frameId=null)}var yI=function(){function t(){TC(this,t),this.runners=[],this.ids=[]}return $O(t,[{key:"add",value:function(t){if(!this.runners.includes(t)){var e=t.id+1;return this.runners.push(t),this.ids.push(e),this}}},{key:"getByID",value:function(t){return this.runners[this.ids.indexOf(t+1)]}},{key:"remove",value:function(t){var e=this.ids.indexOf(t+1);return this.ids.splice(e,1),this.runners.splice(e,1),this}},{key:"merge",value:function(){var t=this,e=null;return this.runners.forEach((function(n,r){e&&n.done&&e.done&&(!n._timeline||!n._timeline._runnerIds.includes(n.id))&&(!e._timeline||!e._timeline._runnerIds.includes(e.id))&&(t.remove(n.id),t.edit(e.id,n.mergeWith(e))),e=n})),this}},{key:"edit",value:function(t,e){var n=this.ids.indexOf(t+1);return this.ids.splice(n,1,t+1),this.runners.splice(n,1,e),this}},{key:"length",value:function(){return this.ids.length}},{key:"clearBefore",value:function(t){var e=this.ids.indexOf(t+1)||1;return this.ids.splice(0,e,0),this.runners.splice(0,e,new dI).forEach((function(t){return t.clearTransformsFromQueue()})),this}}]),t}();LM({Element:{animate:function(t,e,n){var r=pI.sanitise(t,e,n),i=this.timeline();return new pI(r.duration).loop(r).element(this).timeline(i.play()).schedule(r.delay,r.when)},delay:function(t,e){return this.animate(0,t,e)},_clearTransformRunnersBefore:function(t){this._transformationRunners.clearBefore(t.id)},_currentTransform:function(t){return this._transformationRunners.runners.filter((function(e){return e.id<=t.id})).map(vI).reduce(mI,new PP)},_addRunner:function(t){this._transformationRunners.add(t),sI.cancelImmediate(this._frameId),this._frameId=sI.immediate(gI.bind(this))},_prepareRunner:function(){null==this._frameId&&(this._transformationRunners=(new yI).add(new dI(new PP(this))))}}}),jC(pI,{attr:function(t,e){return this.styleAttr("attr",t,e)},css:function(t,e){return this.styleAttr("css",t,e)},styleAttr:function(t,e,n){if("object"===uT(e)){for(var r in e)this.styleAttr(t,r,e[r]);return this}var i=new qk(this._stepper).to(n);return this.queue((function(){i=i.from(this.element()[t](e))}),(function(n){return this.element()[t](e,i.at(n)),i.done()})),this},zoom:function(t,e){if(this._tryRetarget("zoom",bk,e))return this;var n=new qk(this._stepper).to(new qP(t));return this.queue((function(){n=n.from(this.element().zoom())}),(function(t){return this.element().zoom(n.at(t),e),n.done()}),(function(t,r){e=r,n.to(t)})),this._rememberMorpher("zoom",n),this},transform:function(t,e,n){if(e=t.relative||e,this._isDeclarative&&!e&&this._tryRetarget("transform",t))return this;var r=PP.isMatrixLike(t);n=null!=t.affine?t.affine:null!=n?n:!r;var i,o,a,s,u,l=new qk(this._stepper).type(n?Yk:PP);return this.queue((function(){o=o||this.element(),i=i||_C(t,o),u=new PP(e?void 0:o),o._addRunner(this),e||o._clearTransformRunnersBefore(this)}),(function(c){e||this.clearTransform();var h=new CP(i).transform(o._currentTransform(this)),f=h.x,p=h.y,d=new PP(fI({},t,{origin:[f,p]})),m=this._isDeclarative&&a?a:u;if(n){d=d.decompose(f,p),m=m.decompose(f,p);var v=d.rotate,g=m.rotate,y=[v-360,v,v+360],b=y.map((function(t){return Math.abs(t-g)})),_=Math.min.apply(Math,PM(b)),x=b.indexOf(_);d.rotate=y[x]}e&&(r||(d.rotate=t.rotate||0),this._isDeclarative&&s&&(m.rotate=s)),l.from(m),l.to(d);var w=l.at(c);return s=w.rotate,a=new PP(w),this.addTransform(a),o._addRunner(this),l.done()}),(function(e){(e.origin||"center").toString()!==(t.origin||"center").toString()&&(i=_C(t,o)),t=fI({},e,{origin:i})}),!0),this._isDeclarative&&this._rememberMorpher("transform",l),this},x:function(t,e){return this._queueNumber("x",t)},y:function(t){return this._queueNumber("y",t)},dx:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("x",t)},dy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._queueNumberDelta("y",t)},dmove:function(t,e){return this.dx(t).dy(e)},_queueNumberDelta:function(t,e){if(e=new qP(e),this._tryRetarget(t,e))return this;var n=new qk(this._stepper).to(e),r=null;return this.queue((function(){r=this.element()[t](),n.from(r),n.to(r+e)}),(function(e){return this.element()[t](n.at(e)),n.done()}),(function(t){n.to(r+new qP(t))})),this._rememberMorpher(t,n),this},_queueObject:function(t,e){if(this._tryRetarget(t,e))return this;var n=new qk(this._stepper).to(e);return this.queue((function(){n.from(this.element()[t]())}),(function(e){return this.element()[t](n.at(e)),n.done()})),this._rememberMorpher(t,n),this},_queueNumber:function(t,e){return this._queueObject(t,new qP(e))},cx:function(t){return this._queueNumber("cx",t)},cy:function(t){return this._queueNumber("cy",t)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},size:function(t,e){var n;return t&&e||(n=this._element.bbox()),t||(t=n.width/n.height*e),e||(e=n.height/n.width*t),this.width(t).height(e)},width:function(t){return this._queueNumber("width",t)},height:function(t){return this._queueNumber("height",t)},plot:function(t,e,n,r){if(4===arguments.length)return this.plot([t,e,n,r]);if(this._tryRetarget("plot",t))return this;var i=new qk(this._stepper).type(this._element.MorphArray).to(t);return this.queue((function(){i.from(this._element.array())}),(function(t){return this._element.plot(i.at(t)),i.done()})),this._rememberMorpher("plot",i),this},leading:function(t){return this._queueNumber("leading",t)},viewbox:function(t,e,n,r){return this._queueObject("viewbox",new LP(t,e,n,r))},update:function(t){return"object"!==uT(t)?this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]}):(null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",t.offset),this)}}),jC(pI,{rx:rk,ry:ik,from:yk,to:bk}),RC(pI,"Runner");var bI=function(t){function e(t){var n;return TC(this,e),(n=sP(this,uP(e).call(this,kC("svg",t),t))).namespace(),n}return hP(e,t),$O(e,[{key:"isRoot",value:function(){return!(this.node.parentNode&&this.node.parentNode instanceof SC.window.SVGElement&&"#document"!==this.node.parentNode.nodeName)}},{key:"root",value:function(){return this.isRoot()?this:lP(uP(e.prototype),"root",this).call(this)}},{key:"namespace",value:function(){return this.isRoot()?this.attr({xmlns:xC,version:"1.1"}).attr("xmlns:xlink",EC,wC).attr("xmlns:svgjs","http://svgjs.com/svgjs",wC):this.root().namespace()}},{key:"defs",value:function(){return this.isRoot()?IC(this.node.querySelector("defs"))||this.put(new mk):this.root().defs()}},{key:"parent",value:function(t){return this.isRoot()?"#document"===this.node.parentNode.nodeName?null:IC(this.node.parentNode):lP(uP(e.prototype),"parent",this).call(this,t)}},{key:"clear",value:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this}}]),e}(dk);LM({Container:{nested:UC((function(){return this.put(new bI)}))}}),RC(bI,"Svg",!0);var _I=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("symbol",t),t))}return hP(e,t),e}(dk);LM({Container:{symbol:UC((function(){return this.put(new _I)}))}}),RC(_I,"Symbol");var xI={__proto__:null,plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(SC.document.createTextNode(t)),this},length:function(){return this.node.getComputedTextLength()}},wI=function(t){function e(t){var n;return TC(this,e),(n=sP(this,uP(e).call(this,kC("text",t),t))).dom.leading=new qP(1.3),n._rebuild=!0,n._build=!1,n}return hP(e,t),$O(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.attr("x",this.attr("x")+t-e.x)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.attr("y",this.attr("y")+t-e.y)}},{key:"move",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.x(t,n).y(e,n)}},{key:"cx",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cx:this.attr("x",this.attr("x")+t-e.cx)}},{key:"cy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.cy:this.attr("y",this.attr("y")+t-e.cy)}},{key:"center",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox();return this.cx(t,n).cy(e,n)}},{key:"text",value:function(t){if(void 0===t){var e=this.node.childNodes,n=0;t="";for(var r=0,i=e.length;r<i;++r)"textPath"!==e[r].nodeName?(r!==n&&3!==e[r].nodeType&&!0===IC(e[r]).dom.newLined&&(t+="\n"),t+=e[r].textContent):0===r&&(n=1);return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else for(var o=0,a=(t=t.split("\n")).length;o<a;o++)this.tspan(t[o]).newLine();return this.build(!1).rebuild()}},{key:"leading",value:function(t){return null==t?this.dom.leading:(this.dom.leading=new qP(t),this.rebuild())}},{key:"rebuild",value:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading;this.each((function(){var t=SC.window.getComputedStyle(this.node).getPropertyValue("font-size"),i=r*new qP(t);this.dom.newLined&&(this.attr("x",e.attr("x")),"\n"===this.text()?n+=i:(this.attr("dy",i+n),n=0))})),this.fire("rebuild")}return this}},{key:"build",value:function(t){return this._build=!!t,this}},{key:"setData",value:function(t){return this.dom=t,this.dom.leading=new qP(t.leading||1.3),this}}]),e}(fk);jC(wI,xI),LM({Container:{text:UC((function(t){return this.put(new wI).text(t)})),plain:UC((function(t){return this.put(new wI).plain(t)}))}}),RC(wI,"Text");var EI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("tspan",t),t))}return hP(e,t),$O(e,[{key:"text",value:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)}},{key:"dx",value:function(t){return this.attr("dx",t)}},{key:"dy",value:function(t){return this.attr("dy",t)}},{key:"x",value:function(t){return this.attr("x",t)}},{key:"y",value:function(t){return this.attr("x",t)}},{key:"move",value:function(t,e){return this.x(t).y(e)}},{key:"newLine",value:function(){var t=this.parent(wI);this.dom.newLined=!0;var e=SC.window.getComputedStyle(this.node).getPropertyValue("font-size"),n=t.dom.leading*new qP(e);return this.dy(n).attr("x",t.x())}}]),e}(wI);jC(EI,xI),LM({Tspan:{tspan:UC((function(t){var e=new EI;return this._build||this.clear(),this.node.appendChild(e.node),e.text(t)}))}}),RC(EI,"Tspan");var SI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("clipPath",t),t))}return hP(e,t),$O(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unclip()})),lP(uP(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return jP('svg [clip-path*="'+this.id()+'"]')}}]),e}(dk);LM({Container:{clip:UC((function(){return this.defs().put(new SI)}))},Element:{clipWith:function(t){var e=t instanceof SI?t:this.parent().clip().add(t);return this.attr("clip-path",'url("#'+e.id()+'")')},unclip:function(){return this.attr("clip-path",null)},clipper:function(){return this.reference("clip-path")}}}),RC(SI,"ClipPath");var TI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("foreignObject",t),t))}return hP(e,t),e}(QP);LM({Container:{foreignObject:UC((function(t,e){return this.put(new TI).size(t,e)}))}}),RC(TI,"ForeignObject");var AI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("g",t),t))}return hP(e,t),$O(e,[{key:"x",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.x:this.move(t,e.y,e)}},{key:"y",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.y:this.move(e.x,t,e)}},{key:"move",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),r=t-n.x,i=e-n.y;return this.dmove(r,i)}},{key:"dx",value:function(t){return this.dmove(t,0)}},{key:"dy",value:function(t){return this.dmove(0,t)}},{key:"dmove",value:function(t,e){return this.children().forEach((function(n,r){var i=n.bbox(),o=new PP(n),a=o.translate(t,e).transform(o.inverse()),s=new CP(i.x,i.y).transform(a);n.move(s.x,s.y)})),this}},{key:"width",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.width:this.size(t,e.height,e)}},{key:"height",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.bbox();return null==t?e.height:this.size(e.width,t,e)}},{key:"size",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.bbox(),r=bC(this,t,e,n),i=r.width/n.width,o=r.height/n.height;return this.children().forEach((function(t,e){var r=new CP(n).transform(new PP(t).inverse());t.scale(i,o,r.x,r.y)})),this}}]),e}(dk);LM({Container:{group:UC((function(){return this.put(new AI)}))}}),RC(AI,"G");var MI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("a",t),t))}return hP(e,t),$O(e,[{key:"to",value:function(t){return this.attr("href",t,EC)}},{key:"target",value:function(t){return this.attr("target",t)}}]),e}(dk);LM({Container:{link:UC((function(t){return this.put(new MI).to(t)}))},Element:{linkTo:function(t){var e=new MI;return"function"==typeof t?t.call(e,e):e.to(t),this.parent().put(e).put(this)}}}),RC(MI,"A");var CI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("mask",t),t))}return hP(e,t),$O(e,[{key:"remove",value:function(){return this.targets().forEach((function(t){t.unmask()})),lP(uP(e.prototype),"remove",this).call(this)}},{key:"targets",value:function(){return jP('svg [mask*="'+this.id()+'"]')}}]),e}(dk);function OI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function PI(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?OI(n,!0).forEach((function(e){ek(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OI(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}LM({Container:{mask:UC((function(){return this.defs().put(new CI)}))},Element:{maskWith:function(t){var e=t instanceof CI?t:this.parent().mask().add(t);return this.attr("mask",'url("#'+e.id()+'")')},unmask:function(){return this.attr("mask",null)},masker:function(){return this.reference("mask")}}}),RC(CI,"Mask");var kI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("style",t),t))}return hP(e,t),$O(e,[{key:"addText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.node.textContent+=t,this}},{key:"font",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rule("@font-face",PI({fontFamily:t,src:e},n))}},{key:"rule",value:function(t,e){return this.addText(function(t,e){if(!t)return"";if(!e)return t;var n=t+"{";for(var r in e)n+=r.replace(/([A-Z])/g,(function(t,e){return"-"+e.toLowerCase()}))+":"+e[r]+";";return n+"}"}(t,e))}}]),e}(QP);LM("Dom",{style:UC((function(t,e){return this.put(new kI).rule(t,e)})),fontface:UC((function(t,e,n){return this.put(new kI).font(t,e,n)}))}),RC(kI,"Style");var II=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("textPath",t),t))}return hP(e,t),$O(e,[{key:"array",value:function(){var t=this.track();return t?t.array():null}},{key:"plot",value:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this}},{key:"track",value:function(){return this.reference("href")}}]),e}(wI);LM({Container:{textPath:UC((function(t,e){return t instanceof wI||(t=this.text(t)),t.path(e)}))},Text:{path:UC((function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=new II;if(t instanceof Kk||(t=this.defs().path(t)),r.attr("href","#"+t,EC),n)for(;e=this.node.firstChild;)r.node.appendChild(e);return this.put(r)})),textPath:function(){return this.findOne("textPath")}},Path:{text:UC((function(t){return t instanceof wI||(t=(new wI).addTo(this.parent()).text(t)),t.path(this)})),targets:function(){return jP('svg [href*="'+this.id()+'"]')}}}),II.prototype.MorphArray=zk,RC(II,"TextPath");var LI=function(t){function e(t){return TC(this,e),sP(this,uP(e).call(this,kC("use",t),t))}return hP(e,t),$O(e,[{key:"element",value:function(t,e){return this.attr("href",(e||"")+"#"+t,EC)}}]),e}(fk);LM({Container:{use:UC((function(t,e){return this.put(new LI).element(t,e)}))}}),RC(LI,"Use");var RI=PC;jC([bI,_I,Sk,wk,Ck],RM("viewbox")),jC([Mk,tI,Jk,Kk],RM("marker")),jC(wI,RM("Text")),jC(Kk,RM("Path")),jC(mk,RM("Defs")),jC([wI,EI],RM("Tspan")),jC([eI,vk,pk,xk],RM("radius")),jC(UP,RM("EventTarget")),jC(YP,RM("Dom")),jC(QP,RM("Element")),jC(fk,RM("Shape")),jC(dk,RM("Container")),jC(pI,RM("Runner")),NP.extend(PM(new Set(IM))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Zk.push.apply(Zk,PM([].concat(t)))}([qP,iP,LP,PP,WP,Tk,zk]),jC(Zk,{to:function(t){return(new qk).type(this.constructor).from(this.valueOf()).to(t)},fromArray:function(t){return this.init(t),this}});var DI=function(t){return t.touches||[{clientX:t.clientX,clientY:t.clientY}]};jC(bI,{panZoom:function(t){var e,n,r,i,o,a,s,u,l,c,h,f,p=this;if(this.off(".panZoom"),!1===t)return this;var d,m,v=null!=(n=(t=null!=(e=t)?e:{}).zoomFactor)?n:2,g=null!=(r=t.zoomMin)?r:Number.MIN_VALUE,y=null!=(i=t.zoomMax)?i:Number.MAX_VALUE,b=null==(o=t.wheelZoom)||o,_=null==(a=t.pinchZoom)||a,x=null==(s=t.panning)||s,w=null!=(u=t.panButton)?u:0,E=null!=(l=t.oneFingerPan)&&l,S=null!=(c=t.margins)&&c,T=null!=(h=t.wheelZoomDeltaModeLinePixels)?h:17,A=null!=(f=t.wheelZoomDeltaModeScreenPixels)?f:53,M=!1,C=function(t){if(!S)return t;var e=S.top,n=S.left,r=S.bottom,i=S.right,o=p.width()/t.width,a=p.attr(["width","height"]),s=a.width,u=a.height,l=s-n/o,c=(i-s)/o,h=u-e/o,f=(r-u)/o;return t.x=Math.min(l,Math.max(c,t.x)),t.y=Math.min(h,Math.max(f,t.y)),t},O=function t(e){(m=DI(e)).length<2?x&&E&&I.call(this,e):(x&&E&&L.call(this,e),e.preventDefault(),this.dispatch("pinchZoomStart",{event:e}).defaultPrevented||(this.off("touchstart.panZoom",t),M=!0,CO(document,"touchmove.panZoom",k,this,{passive:!1}),CO(document,"touchend.panZoom",P,this,{passive:!1})))},P=function t(e){e.preventDefault();var n=DI(e);n.length>1||(M=!1,this.dispatch("pinchZoomEnd",{event:e}),OO(document,"touchmove.panZoom",k),OO(document,"touchend.panZoom",t),this.on("touchstart.panZoom",O),n.length&&x&&E&&I.call(this,e))},k=function(t){t.preventDefault();var e=DI(t),n=this.zoom(),r=Math.sqrt(Math.pow(m[0].clientX-m[1].clientX,2)+Math.pow(m[0].clientY-m[1].clientY,2))/Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2));(n<g&&r>1||n>y&&r<1)&&(r=1);var i={x:e[0].clientX+.5*(e[1].clientX-e[0].clientX),y:e[0].clientY+.5*(e[1].clientY-e[0].clientY)},o=m[0].clientX+.5*(m[1].clientX-m[0].clientX),a=m[0].clientY+.5*(m[1].clientY-m[0].clientY),s=this.point(i.x,i.y),u=this.point(2*i.x-o,2*i.y-a),l=new LP(this.viewbox()).transform((new PP).translate(-u.x,-u.y).scale(r,0,0).translate(s.x,s.y));C(l),this.viewbox(l),m=e,this.dispatch("zoom",{box:l,focus:u})},I=function t(e){e.type.indexOf("mouse")>-1&&e.button!==w&&e.which!==w+1||(e.preventDefault(),this.off("mousedown.panZoom",t),m=DI(e),M||(this.dispatch("panStart",{event:e}),d={x:m[0].clientX,y:m[0].clientY},CO(document,"touchmove.panZoom mousemove.panZoom",R,this,{passive:!1}),CO(document,"touchend.panZoom mouseup.panZoom",L,this,{passive:!1})))},L=function t(e){e.preventDefault(),OO(document,"touchmove.panZoom mousemove.panZoom",R),OO(document,"touchend.panZoom mouseup.panZoom",t),this.on("mousedown.panZoom",I),this.dispatch("panEnd",{event:e})},R=function(t){t.preventDefault();var e=DI(t),n={x:e[0].clientX,y:e[0].clientY},r=this.point(n.x,n.y),i=this.point(d.x,d.y),o=[i.x-r.x,i.y-r.y];if(o[0]||o[1]){var a=new LP(this.viewbox()).transform((new PP).translate(o[0],o[1]));d=n,C(a),this.dispatch("panning",{box:a,event:t}).defaultPrevented||this.viewbox(a)}};return b&&this.on("wheel.panZoom",(function(t){var e;switch(t.preventDefault(),t.deltaMode){case 1:e=t.deltaY*T;break;case 2:e=t.deltaY*A;break;default:e=t.deltaY}var n=Math.pow(1+v,-1*e/100)*this.zoom(),r=this.point(t.clientX,t.clientY);if(n>y&&(n=y),n<g&&(n=g),this.dispatch("zoom",{level:n,focus:r}).defaultPrevented)return this;if(this.zoom(n,r),S){var i=C(this.viewbox());this.viewbox(i)}}),this,{passive:!1}),_&&this.on("touchstart.panZoom",O,this,{passive:!1}),x&&this.on("mousedown.panZoom",I,this,{passive:!1}),this}});var NI=48,FI=128,jI=128,UI=700,zI=200;function BI(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function VI(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function HI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var GI=n(2066),WI=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=Math.floor(999999*Math.random()),this.parameters={},this.name=e,this.articulations=n,this.instrument=null,this.volume=1}var e,n;return e=t,(n=[{key:"dispose",value:function(){Np().isNil(this.instrument)||Np().isNil(this.instrument._context)||(this.instrument.releaseAll(),this.instrument.dispose()),this.clearPart()}},{key:"updateParameter",value:function(t,e){this.parameters[t]=e}},{key:"updateParameters",value:function(t){var e=this;Object.keys(t).forEach((function(n){"id"!==n&&e.updateParameter(n,t[n])}))}},{key:"connect",value:function(t){this.connectedToChannel=t,this.instrument.connect(this.connectedToChannel)}},{key:"load",value:function(t){var e=this;return new Promise(function(){var n=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){VI(o,r,i,a,s,"next",t)}function s(t){VI(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function n(r,i){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Np().isNil(t)||(e.parameters.articulation=t),o=e.getSampleMap(),e.sampleMap=Np().cloneDeep(o),Np().isNil(o)){n.next=6;break}return n.next=6,e.loadSamples(o);case 6:r();case 7:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())}},{key:"loadSamples",value:function(t){var e=this;return new Promise((function(n,r){e.dispose(),e.instrument=new $l(t,{onload:function(){e.updateParameters(e.parameters),Np().isNil(e.connectedToChannel)||e.instrument.connect(e.connectedToChannel),e.loaded(),n()}})}))}},{key:"loaded",value:function(){}},{key:"loadPart",value:function(t){var e=this;this.clearPart(),this.notes=Np().cloneDeep(t),this.beforeLoadPart(this.notes);var n,r=function(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return BI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?BI(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.notes);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.time+="i",i.duration+="i"}}catch(t){r.e(t)}finally{r.f()}this.part=new ec((function(t,n){if(!Np().isNil(e.instrument)&&!Np().isNil(e.instrument.context)){var r=!0;n.probability<1&&(r=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<t}(n.probability)),r&&e.instrument.triggerAttackRelease(Mu(n.midi),n.duration,t,n.velocity)}}),this.notes),this.afterPartLoaded(),this.part.start(0)}},{key:"beforeLoadPart",value:function(t){}},{key:"afterPartLoaded",value:function(){}},{key:"getNotes",value:function(){return this.notes}},{key:"clearPart",value:function(){Np().isNil(this.part)||Np().isNil(this.part._events)||this.part.dispose()}},{key:"releaseAll",value:function(){this.instrument.releaseAll()}},{key:"getSampleMap",value:function(){return{C4:"/"+this.articulations[this.parameters.articulation]}}},{key:"triggerNote",value:function(t){this.instrument.triggerAttackRelease(GI.fromMidi(t.midi),t.duration+"i",void 0,t.velocity)}},{key:"triggerAttack",value:function(t,e){this.instrument.triggerAttack(GI.fromMidi(t),void 0,e)}},{key:"triggerRelease",value:function(t){this.instrument.triggerRelease(GI.fromMidi(t))}},{key:"setVolume",value:function(t){var e=function(t,e,n,r,i){return 1*(t- -48)/54+0}(t);this.volume=e}}])&&HI(e.prototype,n),t}();function qI(t){return(qI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XI(t,e){return(XI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function YI(t,e){return!e||"object"!==qI(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function QI(t){return(QI=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZI(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var KI=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XI(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=QI(e);if(n){var i=QI(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return YI(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function $I(t){return($I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JI(t,e){return(JI=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tL(t,e){return!e||"object"!==$I(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eL(t){return(eL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ZI(KI,"name","BassDrum"),ZI(KI,"label","Bass drum"),ZI(KI,"articulations",wd),ZI(KI,"defaultArticulation","bdLong01");var rL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&JI(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=eL(e);if(n){var i=eL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return tL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function iL(t){return(iL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oL(t,e){return(oL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function aL(t,e){return!e||"object"!==iL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sL(t){return(sL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nL(rL,"name","Clap"),nL(rL,"label","Clap"),nL(rL,"articulations",Ed),nL(rL,"defaultArticulation",Object.entries(rL.articulations)[0]);var lL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=sL(e);if(n){var i=sL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return aL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function cL(t){return(cL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hL(t,e){return(hL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function fL(t,e){return!e||"object"!==cL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function pL(t){return(pL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function dL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}uL(lL,"name","Claves"),uL(lL,"label","Claves"),uL(lL,"articulations",Sd),uL(lL,"defaultArticulation",Object.entries(lL.articulations)[0]);var mL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=pL(e);if(n){var i=pL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return fL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function vL(t){return(vL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gL(t,e){return(gL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function yL(t,e){return!e||"object"!==vL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function bL(t){return(bL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _L(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}dL(mL,"name","Congas"),dL(mL,"label","Congas"),dL(mL,"articulations",Td),dL(mL,"defaultArticulation",Object.entries(mL.articulations)[0]);var xL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=bL(e);if(n){var i=bL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return yL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function wL(t){return(wL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EL(t,e){return(EL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function SL(t,e){return!e||"object"!==wL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function TL(t){return(TL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function AL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}_L(xL,"name","Cowbell"),_L(xL,"label","Cowbell"),_L(xL,"articulations",Ad),_L(xL,"defaultArticulation",Object.entries(xL.articulations)[0]);var ML=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&EL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=TL(e);if(n){var i=TL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return SL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function CL(t){return(CL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OL(t,e){return(OL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function PL(t,e){return!e||"object"!==CL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kL(t){return(kL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function IL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}AL(ML,"name","Cymbal"),AL(ML,"label","Cymbal"),AL(ML,"articulations",Md),AL(ML,"defaultArticulation",Object.entries(ML.articulations)[0]);var LL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&OL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=kL(e);if(n){var i=kL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return PL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function RL(t){return(RL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function DL(t,e){return(DL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function NL(t,e){return!e||"object"!==RL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function FL(t){return(FL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}IL(LL,"name","HiHatClosed"),IL(LL,"label","HiHatClosed"),IL(LL,"articulations",Cd),IL(LL,"defaultArticulation",Object.entries(LL.articulations)[0]);var UL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&DL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=FL(e);if(n){var i=FL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return NL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function zL(t){return(zL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BL(t,e){return(BL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function VL(t,e){return!e||"object"!==zL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function HL(t){return(HL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function GL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}jL(UL,"name","HitHatOpen"),jL(UL,"label","HitHatOpen"),jL(UL,"articulations",Od),jL(UL,"defaultArticulation",Object.entries(UL.articulations)[0]);var WL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&BL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=HL(e);if(n){var i=HL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return VL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function qL(t){return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XL(t,e){return(XL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function YL(t,e){return!e||"object"!==qL(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function QL(t){return(QL=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ZL(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}GL(WL,"name","Maracas"),GL(WL,"label","Maracas"),GL(WL,"articulations",Pd),GL(WL,"defaultArticulation",Object.entries(WL.articulations)[0]);var KL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&XL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=QL(e);if(n){var i=QL(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return YL(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function $L(t){return($L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function JL(t,e){return(JL=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function tR(t,e){return!e||"object"!==$L(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eR(t){return(eR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function nR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}ZL(KL,"name","Rimshot"),ZL(KL,"label","Rimshot"),ZL(KL,"articulations",kd),ZL(KL,"defaultArticulation",Object.entries(KL.articulations)[0]);var rR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&JL(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=eR(e);if(n){var i=eR(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return tR(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function iR(t){return(iR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oR(t,e){return(oR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function aR(t,e){return!e||"object"!==iR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function sR(t){return(sR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nR(rR,"name","SnareDrum"),nR(rR,"label","SnareDrum"),nR(rR,"articulations",Id),nR(rR,"defaultArticulation",Object.entries(rR.articulations)[0]);var lR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oR(t,e)}(i,t);var e,n,r=(e=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,r=sR(e);if(n){var i=sR(this).constructor;t=Reflect.construct(r,arguments,i)}else t=r.apply(this,arguments);return aR(this,t)});function i(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(t=r.call(this,i.name,i.articulations)).parameters.articulation=i.defaultArticulation,t}return i}(WI);function cR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return hR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hR(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function fR(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}uR(lR,"name","TomToms"),uR(lR,"label","TomToms"),uR(lR,"articulations",Ld),uR(lR,"defaultArticulation",Object.entries(lR.articulations)[0]);const pR={instrumentClasses:{},instruments:[],init:function(){for(var t=0,e=[KI,rL,lL,mL,xL,ML,LL,UL,WL,KL,rR,lR];t<e.length;t++){var n=e[t];this.instrumentClasses[n.name]=n}},create:function(t,e){if(!Np().isNil(t)){var n=this;return new Promise(function(){var r=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){fR(o,r,i,a,s,"next",t)}function s(t){fR(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function r(i,o){var a,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=n.instrumentClasses[t],s=new a,r.next=4,s.load(e);case 4:n.instruments.push(s),i(s);case 6:case"end":return r.stop()}}),r)})));return function(t,e){return r.apply(this,arguments)}}())}},dispose:function(t){var e=Np().find(this.instruments,{id:t});Np().isNil(e)||e.dispose()},updateParameter:function(t,e,n){Np().find(this.instruments,{id:t}).updateParameter(e,n)},getInstrumentOptions:function(t){for(var e=[],n=0,r=Object.entries(this.instrumentClasses);n<r.length;n++){var i=cR(r[n],2),o=(i[0],i[1]);Np().includes(o.showIn,t)&&e.push({label:o.label,name:o.name,articulations:o.articulations})}return Np().sortBy(e,"label")},getInstrumentArticulationOptions:function(t){for(var e=[],n=0,r=Object.entries(this.instrumentClasses[t].articulations);n<r.length;n++){var i=cR(r[n],2),o={value:i[0],label:i[1]};e.push(o)}return e},getLabel:function(t){return this.instrumentClasses[t].label},getArticulationLabel:function(t,e){return this.instrumentClasses[t].articulations[e]},getDefaultArticulation:function(t){return Np().isNil(this.instrumentClasses[t].defaultArticulation)?"none":this.instrumentClasses[t].defaultArticulation}};function dR(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=vR(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function mR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||vR(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vR(t,e){if(t){if("string"==typeof t)return gR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gR(t,e):void 0}}function gR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yR(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function bR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){yR(o,r,i,a,s,"next",t)}function s(t){yR(o,r,i,a,s,"throw",t)}a(void 0)}))}}function _R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wR=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.type=n,this.instrument=null,this.notes=null,this.type!==t.TRACK_TYPE_MASTER?this.channel=new sh:this.channel=new du,this.fx=null,this.sortedFx=null,this.createFX({})}var e,n,r,i,o,a;return e=t,(n=[{key:"load",value:function(t){Np().isNil(this.instrument)||this.calculatePart(t)}},{key:"createFX",value:(a=bR(regeneratorRuntime.mark((function t(e){var n,r,i,o,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.fx={},this.sortedFx=[],n=0,r=Object.entries(e);case 3:if(!(n<r.length)){t.next=13;break}return(i=mR(r[n],2))[0],o=i[1],t.next=7,FX.create(o);case 7:a=t.sent,this.fx[a.id]=a,this.sortedFx.push(a);case 10:n++,t.next=3;break;case 13:this.sortedFx=Np().sortBy(this.sortedFx,"order");case 14:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"buildAudioChain",value:function(){if(this.type===t.TRACK_TYPE_MASTER)this.channel.toMaster();else if(!Np().isNil(this.instrument)){this.disconnectAudioChain(),this.instrument.connect(this.channel);var e=Np().filter(this.sortedFx,{isOn:!0});if(e.length>0)for(var n=0;n<e.length;n++){var r=e[n];0===n&&this.channel.connect(r.fx),n>0&&e[n-1].fx.connect(r.fx),n===e.length-1&&(this.type!==t.TRACK_TYPE_MASTER?r.fx.connect(MR.master.channel):r.fx.toMaster())}else this.type!==t.TRACK_TYPE_MASTER?this.channel.connect(MR.master.channel):this.channel.toMaster()}}},{key:"disconnectAudioChain",value:function(){if(!Np().isNil(this.instrument)){Np().isNil(this.channel._context)||this.channel.disconnect(0);var t,e=dR(this.sortedFx);try{for(e.s();!(t=e.n()).done;){var n=t.value;Np().isNil(n.fx)||Np().isNil(n.fx._context)||n.fx.disconnect(0)}}catch(t){e.e(t)}finally{e.f()}}}},{key:"dispose",value:function(){this.disconnectAudioChain(),Np().isNil(this.instrument)||this.instrument.dispose();var t,e=dR(this.sortedFx);try{for(e.s();!(t=e.n()).done;)t.value.dispose()}catch(t){e.e(t)}finally{e.f()}if(!Np().isNil(this.channel))try{this.channel.dispose()}catch(t){console.log("caught channel dispose error",t)}}},{key:"calculatePart",value:function(t){Np().isNil(this.instrument)||Np().isNil(t)||(this.instrument.clearPart(),this.notes=this.convertStepsToNotes(t.steps),Np().sortBy(this.notes,"time"),this.instrument.loadPart(this.notes,!1))}},{key:"convertStepsToNotes",value:function(t){for(var e=4*xh.PPQ,n=Math.round(e/t.length),r=[],i=0;i<t.length;i++){var o=t[i];if(o.isOn){var a={time:i*n,duration:n,midi:60,velocity:Number(o.velocity),probability:o.probability};r.push(a)}}return r}},{key:"setInstrument",value:(o=bR(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.sampler,r=e.sample,i=this,t.abrupt("return",new Promise(function(){var t=bR(regeneratorRuntime.mark((function t(e,o){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Np().isNil(i.instrument)||pR.dispose(i.instrument.id),t.next=3,pR.create(n,r);case 3:i.instrument=t.sent,i.buildAudioChain(),Np().isNil(i.notes)||i.instrument.loadPart(i.notes,!1),i.instrument.setVolume(i.channel.volume.value),e(i.instrument);case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t,this)}))),function(t){return o.apply(this,arguments)})},{key:"setVolume",value:function(t){this.channel.volume.value=t,Np().isNil(this.instrument)||this.instrument.setVolume(t)}},{key:"setMixerSettings",value:(i=bR(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this,t.abrupt("return",new Promise(function(){var t=bR(regeneratorRuntime.mark((function t(r,i){var o,a,s,u,l,c,h,f,p,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.setStyle(e.style);case 2:for(n.setVolume(e.volume),o=0,a=Object.entries(e.fx);o<a.length;o++)for(s=mR(a[o],2),u=s[0],l=s[1],c=0,h=Object.entries(l);c<h.length;c++)f=mR(h[c],2),p=f[0],d=f[1],n.setFXParameter(u,p,d);r();case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"setFXIsOn",value:(r=bR(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.disconnectAudioChain(),this.fx[e].isOn=n,this.buildAudioChain();case 3:case"end":return t.stop()}}),t,this)}))),function(t,e){return r.apply(this,arguments)})},{key:"setFXParameter",value:function(t,e,n){this.fx[t].isOn&&(this.fx[t][e]=n)}},{key:"releaseAll",value:function(){Np().isNil(this.instrument)||this.instrument.releaseAll()}},{key:"triggerNote",value:function(t){this.instrument.triggerNote(t)}},{key:"triggerAttack",value:function(t,e){this.instrument.triggerAttack(t,e)}},{key:"triggerRelease",value:function(t){this.instrument.triggerRelease(t)}},{key:"getNotes",value:function(){return this.notes}}])&&_R(e.prototype,n),t}();function ER(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return SR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?SR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function SR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function TR(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function AR(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){TR(o,r,i,a,s,"next",t)}function s(t){TR(o,r,i,a,s,"throw",t)}a(void 0)}))}}xR(wR,"TRACK_TYPE_MASTER","TRACK_TYPE_MASTER"),xR(wR,"TRACK_TYPE_LAYER","TRACK_TYPE_LAYER");const MR={tracks:[],tracksById:{},tracksByType:{},master:null,init:function(){this.master=new wR({fx:[]},wR.TRACK_TYPE_MASTER),this.master.buildAudioChain()},load:function(t){var e=this;return AR(regeneratorRuntime.mark((function n(){var r,i,o,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:console.log("audio engine loading round",t),r=ER(t.layers),n.prev=2,r.s();case 4:if((i=r.n()).done){n.next=13;break}return o=i.value,n.next=8,e.createTrack(o,wR.TRACK_TYPE_LAYER);case 8:return a=n.sent,n.next=11,a.load(o);case 11:n.next=4;break;case 13:n.next=18;break;case 15:n.prev=15,n.t0=n.catch(2),r.e(n.t0);case 18:return n.prev=18,r.f(),n.finish(18);case 21:case"end":return n.stop()}}),n,null,[[2,15,18,21]])})))()},recalculateParts:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=ER(t.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;(Np().isNil(n)||n===i.id)&&this.tracksById[i.id].calculatePart(i)}}catch(t){r.e(t)}finally{r.f()}},createTrack:function(t){console.log("createTrack",t),console.time("createTrack");var e=this;return new Promise(function(){var n=AR(regeneratorRuntime.mark((function n(r,i){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=new wR(t),e.tracks.push(o),e.tracksById[o.id]=o,Np().isNil(e.tracksByType[o.type])&&(e.tracksByType[o.type]=[]),e.tracksByType[o.type].push(o),n.next=7,e.tracksById[o.id].setInstrument(t.instrument);case 7:console.timeEnd("createTrack"),r(o);case 9:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}())},removeTrack:function(t){Np().isNil(this.tracksById[t])||this.tracksById[t].dispose()},reset:function(){var t,e=ER(this.tracks);try{for(e.s();!(t=e.n()).done;)t.value.dispose()}catch(t){e.e(t)}finally{e.f()}this.tracks=[],this.tracksById={},this.tracksByType={}},releaseAll:function(){var t,e=ER(this.tracks);try{for(e.s();!(t=e.n()).done;)t.value.releaseAll()}catch(t){e.e(t)}finally{e.f()}},getPositionMilliseconds:function(){return Math.round(1e3*xh.seconds)}};function CR(t){return(CR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function OR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||LR(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PR(t){return function(t){if(Array.isArray(t))return RR(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||LR(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kR(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function IR(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=LR(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function LR(t,e){if(t){if("string"==typeof t)return RR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?RR(t,e):void 0}}function RR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function DR(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function NR(t,e){return(NR=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function FR(t,e){return!e||"object"!==CR(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jR(t){return(jR=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var UR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&NR(t,e)}(u,t);var e,n,r,i,a,s=(i=u,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=jR(i);if(a){var n=jR(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return FR(this,t)});function u(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),(e=s.call(this,t)).isZooming=!1,e.isPanning=!1,e.stepGraphics=[],e.round=null,e.isOn=!1,e.editAllLayers=!1,e}return e=u,(n=[{key:"componentDidMount",value:function(){this.createRound(),MR.init(),pR.init(),MR.load(this.props.round)}},{key:"createRound",value:function(){var t=this;this.round=Dp.cloneDeep(this.props.round),this.containerWidth=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),this.containerHeight=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);var e=document.getElementById("round");e.style.width=this.containerWidth+"px",e.style.height=this.containerHeight+"px",this.container=RI().addTo(e).size(this.containerWidth,this.containerHeight).panZoom({zoomMin:.2,zoomMax:1.3,zoomFactor:.2}),this.container.on("panning",(function(e){t.stepIsPanning&&e.preventDefault()})),this.container.viewbox(0,0,this.containerWidth,this.containerHeight),this.stepLayerDictionary={};var n,r=IR(this.props.round.layers);try{for(r.s();!(n=r.n()).done;){var i,o=n.value,a=IR(o.steps);try{for(a.s();!(i=a.n()).done;){var s=i.value;this.stepLayerDictionary[s.id]=o}}catch(t){a.e(t)}finally{a.f()}}}catch(t){r.e(t)}finally{r.f()}this.draw()}},{key:"componentDidUpdate",value:(r=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){kR(o,r,i,a,s,"next",t)}function s(t){kR(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(){var e,n,r,i,o,a,s,u,l,c,h,f,p,d,m,v,g,y,b,_,x,w,E,S,T,A,M,C,O,P,k,I=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.editAllLayers!==this.props.editAllLayers){this.editAllLayers=this.props.editAllLayers,this.removeAllStepEventListeners(),e=IR(this.stepGraphics);try{for(e.s();!(n=e.n()).done;)r=n.value,this.editAllLayers?r.isAllowedInteraction=!0:r.isAllowedInteraction=this.stepLayerDictionary[r.id].creator===this.props.user.id,this.addStepEventListeners(r)}catch(t){e.e(t)}finally{e.f()}}if(this.isOn||!this.props.isOn||Dp.isNil(this.positionLine)?!this.isOn||this.props.isOn||Dp.isNil(this.positionLine)||(this.positionLine.timeline().stop(),this.isOn=!1):(this.positionLine.timeline().play(),this.isOn=!0),i=!1,o=this,!(this.round.layers.length<this.props.round.layers.length)){t.next=23;break}a=IR(this.props.round.layers),t.prev=6,u=regeneratorRuntime.mark((function t(){var e,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=s.value,n=Dp.find(I.round.layers,{id:e.id}),!Dp.isNil(n)){t.next=7;break}return t.next=5,MR.createTrack(e);case 5:e.order=I.props.round.layers.length-1,e.creator!==I.props.user.id?(I.animateActivityIndicator(e.creator,I.containerWidth/2,I.containerHeight/2),Dp.delay((function(){o.addLayer(e),o.updateAvatarPositions(o.props.round.layers.length)}),UI)):(I.addLayer(e),I.updateAvatarPositions(I.props.round.layers.length));case 7:case"end":return t.stop()}}),t)})),a.s();case 9:if((s=a.n()).done){t.next=13;break}return t.delegateYield(u(),"t0",11);case 11:t.next=9;break;case 13:t.next=18;break;case 15:t.prev=15,t.t1=t.catch(6),a.e(t.t1);case 18:return t.prev=18,a.f(),t.finish(18);case 21:t.next=24;break;case 23:if(this.round.layers.length>this.props.round.layers.length){l=IR(this.round.layers);try{for(l.s();!(c=l.n()).done;)h=c.value,f=Dp.find(this.props.round.layers,{id:h.id}),Dp.isNil(f)&&(MR.removeTrack(h.id),i=!0)}catch(t){l.e(t)}finally{l.f()}}case 24:for(p=[],d=0;d<this.round.layers.length;d++)m=this.round.layers[d],p.push.apply(p,PR(m.steps)),v=Dp.find(this.props.round.layers,{id:m.id}),Dp.isNil(v)||v.steps.length!==m.steps.length&&(i=!0);g=[],this.stepLayerDictionary={},y=IR(this.props.round.layers);try{for(y.s();!(b=y.n()).done;){_=b.value,x=IR(_.steps);try{for(x.s();!(w=x.n()).done;)E=w.value,g.push(E),this.stepLayerDictionary[E.id]=_}catch(t){x.e(t)}finally{x.f()}}}catch(t){y.e(t)}finally{y.f()}for(S=0,T=p;S<T.length;S++)A=T[S],M=Dp.find(g,{id:A.id}),Dp.isNil(M)||Dp.isEqual(A,M)||(console.log("found changed step",A,M),this.updateStep(M,!0),MR.recalculateParts(this.props.round));C=IR(this.round.layers);try{for(C.s();!(O=C.n()).done;)P=O.value,k=Dp.find(this.props.round.layers,{id:P.id}),Dp.isNil(k)||Dp.isEqual(P.instrument,k.instrument)||MR.tracksById[k.id].setInstrument(k.instrument)}catch(t){C.e(t)}finally{C.f()}i?(this.clear(),this.round=Dp.cloneDeep(this.props.round),o.draw(!1)):this.round=Dp.cloneDeep(this.props.round);case 34:case"end":return t.stop()}}),t,this,[[6,15,18,21]])}))),function(){return r.apply(this,arguments)})},{key:"getStep",value:function(t){var e,n=[],r=IR(this.round.layers);try{for(r.s();!(e=r.n()).done;){var i=e.value;n.push.apply(n,PR(i.steps))}}catch(t){r.e(t)}finally{r.f()}return Dp.find(n,{id:t})}},{key:"draw",value:function(t){this.clear();var e=this,n=256+64*this.round.layers.length;this.positionLine=this.container.rect(16,n).fill("#666666"),this.positionLine.move(this.containerWidth/2-8,this.containerHeight/2-n),this.positionLine.animate({duration:2e3}).ease("-").transform({rotate:360,relative:!0,origin:"bottom center"}).loop(),this.isOn?this.positionLine.timeline().seek(MR.getPositionMilliseconds()):this.positionLine.timeline().pause(),this.stepGrahpics=[];var r,i=0,o=IR(this.round.layers);try{for(o.s();!(r=o.n()).done;){var a=r.value;a.order=i++,this.addLayer(a,t)}}catch(t){o.e(t)}finally{o.f()}this.drawAvatars(),this.activityIndicator=this.container.circle(48).fill({color:"#fff",opacity:0}),this.addLayerButton=this.container.circle(FI).attr({fill:"#fff"}),this.addLayerButton.x(this.containerWidth/2-64),this.addLayerButton.y(this.containerHeight/2-64),this.addLayerButton.click((function(){e.onAddLayerClick()})),this.stepModal=this.container.nested(),this.stepModalBackground=this.stepModal.rect(122,52).fill({color:"#000",opacity:.7}).radius(4),this.stepModalText=this.stepModal.text(""),this.stepModalText.fill("#fff"),this.stepModalText.font({size:16,weight:500}),this.stepModalText.x(8),this.stepModal.hide()}},{key:"clear",value:function(){if(this.removeAllStepEventListeners(),!Dp.isNil(this.stepGrahpics)){var t,e=IR(this.stepGraphics);try{for(e.s();!(t=e.n()).done;)t.value.clear()}catch(t){e.e(t)}finally{e.f()}}this.stepGraphics=[],Dp.isNil(this.container)||this.container.clear(),Dp.isNil(this.addLayerButton)||this.addLayerButton.click(null)}},{key:"addLayer",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e?600:0,r=512+128*(t.order+1),i=this.containerWidth/2-r/2,o=this.containerHeight/2-r/2,a=this.container.circle(r,r).attr({fill:"none"}).stroke({color:this.getUserColor(t.creator),width:"6px",opacity:0});a.x(i),a.y(o),a.animate(n).stroke({opacity:1});var s,u=2*Math.PI/t.steps.length,l=r/2,c=Math.PI/-2,h=0,f=IR(t.steps);try{for(f.s();!(s=f.n()).done;){var p=s.value,d=Math.round(r/2+l*Math.cos(c)-24)+i,m=Math.round(r/2+l*Math.sin(c)-24)+o,v=this.container.circle(NI);v.stroke({color:this.getUserColor(t.creator),width:"6px",opacity:0}),v.animate(n).stroke({opacity:1}),v.x(d),v.y(m),c+=u,v.stepIndex=h++,v.layerIndex=t.order,v.id=p.id,v.isAllowedInteraction=t.creator===this.props.user.id,v.addClass("step"),this.stepGraphics.push(v),this.updateStep(p),this.addStepEventListeners(v)}}catch(t){f.e(t)}finally{f.f()}}},{key:"updateStep",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Dp.isEmpty(this.stepGraphics)&&!Dp.isNil(t)){var n=this.stepLayerDictionary[t.id],r=Dp.find(this.stepGraphics,{id:t.id}),i=this;e?(Dp.delay((function(){t.isOn?(r.animate(zI).attr({fill:i.getUserColor(n.creator),"fill-opacity":t.probability}),r.animate(zI).transform({scale:t.velocity})):r.animate(zI).attr({fill:"#282c34"})}),UI),this.animateActivityIndicator(n.creator,r.x()+24,r.y()+24)):t.isOn?(r.attr({fill:i.getUserColor(n.creator),"fill-opacity":t.probability}),r.transform({scale:t.velocity})):r.attr({fill:"#282c34"})}}},{key:"drawAvatars",value:function(){if(!Dp.isNil(this.props.collaboration)){this.avatarGraphics=[];for(var t=Object.entries(this.props.collaboration.contributors).length,e=jI*t+128*(t-1),n=this.containerHeight/2-e/2,r=this.containerWidth/2+64+192+64*this.round.layers.length+128,i=0,o=0,a=Object.entries(this.props.collaboration.contributors);o<a.length;o++){var s=OR(a[o],2),u=s[0],l=s[1],c=this.container.circle(jI).attr({fill:l.color});c.x(r),c.y(i+n),c.id=u,this.avatarGraphics.push(c),i+=256}}}},{key:"updateAvatarPositions",value:function(t){if(!Dp.isEmpty(this.avatarGraphics)){var e,n=this.containerWidth/2+64+192+64*t+128,r=IR(this.avatarGraphics);try{for(r.s();!(e=r.n()).done;)e.value.x(n)}catch(t){r.e(t)}finally{r.f()}}}},{key:"animateActivityIndicator",value:function(t,e,n){var r=this,i=Dp.find(this.avatarGraphics,{id:t});if(!Dp.isNil(this.activityIndicator)&&!Dp.isNil(i)){this.activityIndicator.fill({color:this.getUserColor(t),opacity:1});var o=i.x()+64,a=i.y()+64;e-=24,n-=24,this.activityIndicator.move(o,a),this.activityIndicator.animate(UI).move(e,n).after((function(){r.activityIndicator.animate().fill({opacity:0})}))}}},{key:"addStepEventListeners",value:function(t){var e=this;t.isAllowedInteraction&&(t.click((function(){e.onStepClick(t)})),t.on("mousedown",(function(){e.stepIsPanning=!0})),t.on("mouseup",(function(){e.stepIsPanning=!1})),t.hammertime=new(eE())(t.node,{}),t.hammertime.get("pan").set({enable:!0}),t.hammertime.on("panstart",(function(n){e.stepIsPanning=!0;var r=e.getStep(t.id);t.isOn=r.isOn,t.probabilityPanStart=t.probability=r.probability,t.velocityPanStart=t.velocity=r.velocity,t.isOn&&(e.stepModal.show(),e.updateStepModal(t))})),t.hammertime.on("pan",(function(n){if(!e.isZooming&&t.isOn)if(t.isPanningX){var r=n.deltaX;r<-100&&(r=-100),r/=100,r+=1,t.probability=r*t.probabilityPanStart,t.probability<.3?t.probability=.3:t.probability>1&&(t.probability=1),t.fill({opacity:t.probability}),e.updateStepModal(t)}else if(t.isPanningY){var i=n.deltaY;i<-100&&(i=-100),i/=-100,i+=1,t.velocity=i*t.velocityPanStart,t.velocity<.5?t.velocity=.5:t.velocity>1&&(t.velocity=1),requestAnimationFrame((function(){t.transform({scale:t.velocity}),e.updateStepModal(t)}))}else Math.abs(n.deltaY)>20?(t.isPanningY=!0,e.isPanning=!0):Math.abs(n.deltaX)>20&&(t.isPanningX=!0,e.isPanning=!0)})),t.hammertime.on("panend",(function(n){t.isPanningX&&t.isOn?(e.getStep(t.id).probability=t.probability,e.props.dispatch({type:Fe,payload:{probability:t.probability,layerIndex:t.layerIndex,stepIndex:t.stepIndex,user:e.props.user.id}})):t.isPanningY&&t.isOn&&(e.getStep(t.id).velocity=t.velocity,e.props.dispatch({type:Ne,payload:{velocity:t.velocity,layerIndex:t.layerIndex,stepIndex:t.stepIndex,user:e.props.user.id}})),MR.recalculateParts(e.props.round),t.isPanningX=!1,t.isPanningY=!1,e.stepIsPanning=!1,e.stepModal.hide(),setTimeout((function(){e.isPanning=!1}),100)})))}},{key:"removeAllStepEventListeners",value:function(){var t,e=IR(this.stepGraphics);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.click(null),Dp.isNil(n.hammertime)||(n.hammertime.off("pan"),n.hammertime.off("panstart"),n.hammertime.off("panend"))}}catch(t){e.e(t)}finally{e.f()}}},{key:"updateStepModal",value:function(t){this.stepModalText.text("Velocity: "+Dp.round(t.velocity,1)+"\nProbability: "+Dp.round(t.probability,1)),this.stepModal.x(t.x()),this.stepModal.y(t.y()-100)}},{key:"onStepClick",value:function(t){var e=this.getStep(t.id);this.isPanning||(e.isOn=!e.isOn,this.updateStep(e,!1),MR.recalculateParts(this.round),this.props.dispatch({type:De,payload:{layerIndex:t.layerIndex,stepIndex:t.stepIndex,isOn:e.isOn,user:null}}))}},{key:"onAddLayerClick",value:function(){var t=he(this.props.user.id);this.props.dispatch({type:We,payload:{layer:t,user:this.props.user.id}})}},{key:"addEventListeners",value:function(){var t=document.getElementById("round");new(eE())(t,{}).get("pinch").set({enable:!0})}},{key:"getUserColor",value:function(t){return Dp.isNil(this.props.collaboration)?this.props.user.color:this.props.collaboration.contributors[t].color}},{key:"render",value:function(){return o.createElement("div",{className:"round",id:"round"})}}])&&DR(e.prototype,n),u}(o.Component);const zR=qt((function(t){return console.log("mapStateToProps",t),{round:t.round,user:t.user,collaboration:t.collaboration,editAllLayers:t.editAllLayers}}))(UR);function BR(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function VR(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function HR(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function GR(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return WR(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?WR(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WR(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var qR=!1,XR=0,YR=null,QR=!1;const ZR=qt((function(t){return{round:t.round,rounds:t.rounds}}),{setRounds:function(t){return{type:Pe,payload:{rounds:t}}},setRoundData:fn,toggleLoader:cn,resetRoundsStore:function(){return{type:ge}},resetRaycasterStore:an,resetCameraStore:ln,resetEditingModeStore:un,resetLoaderStore:sn})(tt((function(t){var e,n,r=t.round,i=t.rounds,a=t.setRoundData,s=t.setRounds,u=t.toggleLoader,l=t.resetRoundsStore,c=t.resetRaycasterStore,h=t.resetCameraStore,f=t.resetEditingModeStore,p=t.resetLoaderStore,d=GR((0,o.useState)(Kw.isRunning),2),m=d[0],v=d[1],g=GR((0,o.useState)(!1),2),y=g[0],b=g[1],_=GR((0,o.useState)(!1),2),x=_[0],w=_[1],E=GR((0,o.useState)(!1),2),S=E[0],T=E[1],A=GR((0,o.useState)(!1),2),M=A[0],C=A[1],O=(0,o.useContext)(Zd),P=(e=i,n=(0,o.useRef)(),(0,o.useEffect)((function(){n.current=e})),n.current),k=(0,o.useRef)(!1);(0,o.useEffect)((function(){console.log("initiate session route");var t=O.currentUser;return O.db.collection("rounds").where("user","==",t.uid).get().then((function(e){console.log("got rounds");var n=e.docs.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?VR(Object(n),!0).forEach((function(e){HR(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VR(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:t.id},t.data())}));u(!1),console.log("tempDoc",n);var r=n[0];if(QR=!0,r)a(r),s(n);else{console.log("create new round");var i=fe(t.uid);O.db.collection("rounds").doc(i.id).set(i,{merge:!1}).catch((function(t){console.log(t)})),a(i),s([i])}})).catch((function(t){console.log(t)})),function(){l(),c(),h(),f(),p(),console.log("session route getting unmounted")}}),[]);var I=function t(){qR=!0,setTimeout((function(){console.log("update round"),O.db.collection("rounds").doc(YR.id).set(YR,{merge:!0}).catch((function(t){console.log(t)})),XR?(XR=0,t()):qR=!1}),1e3)};(0,o.useEffect)((function(){r&&(QR?QR=!1:(YR=r,qR?XR=1:I()))}),[r]),(0,o.useEffect)((function(){if(k.current&&P.length){if(console.log(JSON.parse(JSON.stringify(P))),P.length<i.length){u(!0);var t=i.find((function(t){return!P.includes(t)&&t.id!==r.id}));console.log("add round"),O.db.collection("rounds").doc(t.id).set(t,{merge:!1}).then((function(){u(!1)})).catch((function(t){console.log(t),u(!1)}))}if(P.length>i.length){u(!0);var e=P.find((function(t){return!i.includes(t)}));console.log("remove round"),O.db.collection("rounds").doc(e.id).delete().then((function(){u(!1)})).catch((function(t){console.log(t),u(!1)})),i.includes(r)||(console.log("selected round got removed"),a(i[0]))}}else k.current=!0}),[i]);var L=function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){BR(o,r,i,a,s,"next",t)}function s(t){BR(o,r,i,a,s,"throw",t)}a(void 0)}))}}(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("running"===Ph.state){t.next=3;break}return t.next=3,Gs();case 3:Kw.toggle(),v(Kw.isRunning);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){w(!x)},D=function(){T(!S)};return o.createElement(o.Fragment,null,o.createElement(bd,{onModalClose:D,isOpen:S},o.createElement(Xw,null)),r&&o.createElement(o.Fragment,null,o.createElement(dv,{isOpen:x,toggleSidebar:R}),o.createElement("div",{className:Jw().mainContainer},o.createElement(zR,{isOn:m}),o.createElement(Um,{user:O.currentUser,isOn:m,shareRound:function(){C(!0)},toggleProfile:D,togglePlay:L,toggleSettings:function(){b(!y)},toggleSidebar:R}),o.createElement(Wm,{isActive:y})),o.createElement(rv,{sharing:M,toggleSharing:function(){C(!M)},round:r})))})));var KR=n(8973);const $R=qt(null,{setUser:gn})(tt((function(t){var e=(0,o.useMemo)((function(){return new KR.Theme({})})),n=(0,o.useContext)(Zd);return(0,o.useEffect)((function(){console.log("initiate signin route"),t.onRouteReady(),n.currentUser&&t.history.push("/session")}),[]),o.createElement(KR.SignInDialog,{onSignUpAsync:function(e,r){return n.doCreateUserWithEmailAndPassword(e,r).then((function(e){var n=me();e.user.updateProfile({displayName:JSON.stringify({color:n})}).then((function(){var r={color:n,id:e.user.uid,email:e.user.email};console.log("new color assigned: ",r),t.setUser(r),t.history.push("/session")})).catch((function(t){return console.error(t)}))})).catch((function(t){console.error(t)}))},onSignInAsync:function(e,r){return n.doSignInWithEmailAndPassword(e,r).then((function(e){t.history.push("/session")})).catch((function(t){console.error(t)}))},onClose:function(t){console.log("close",t)},theme:e})})));var JR=n(476),tD=n.n(JR);function eD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rD(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"==typeof t)return iD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?iD(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var oD=n(42);const aD=function(t){var e=t.onFinishDialog,n=t.updateBringRoundConfig,r=t.firebase,i=t.toggleLoader,a=rD((0,o.useState)(0),2),s=a[0],u=a[1],l=rD((0,o.useState)([]),2),c=l[0],h=l[1],f=rD((0,o.useState)(),2),p=f[0],d=f[1],m=rD((0,o.useState)(!1),2),v=m[0],g=m[1],y=function(){e(),u(0),h([])};return o.createElement(o.Fragment,null,0===s&&o.createElement("div",{className:tD().dialog},o.createElement("div",{className:tD().dialogText},"Would you like to bring one of your own rounds to the collaboration?",o.createElement("br",null),"Don't worry, you won't loose your original one, it just gets copied here."),o.createElement("div",{className:tD().dialogControls},o.createElement("button",{className:tD().dialogButton,onClick:function(){i(!0);var t=r.currentUser,e=JSON.parse(t.displayName);r.db.collection("rounds").where("user","==",t.uid).get().then((function(t){var r=t.docs.map((function(t){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?eD(Object(n),!0).forEach((function(e){nD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({id:t.id},t.data())})),o=r.find((function(t){return t.id===e.lastVisitedRound}))||r[0];h(r),d(o.id),n({round:o}),u(s+1),i(!1)})).catch((function(t){console.log(t)}))}},"Yes"),o.createElement("button",{className:tD().dialogButton,onClick:y},"No"))),1===s&&o.createElement("div",{className:tD().settingsForm},o.createElement("div",{className:tD().dialog},"The last round you visited is chosen by default, but you can select a different one:",o.createElement("select",{className:tD().dialogSelect,defaultValue:p,onChange:function(t){var e=t.target.value,r=c.find((function(t){return t.id===e}));n({round:r})}},c.map((function(t){return o.createElement("option",{key:t.id,value:t.id},t.name)})))),o.createElement("div",{className:tD().dialog},o.createElement("div",{className:tD().dialogText},"Should other users be able to modify your round in the collaboration?"),o.createElement("div",{className:tD().dialogControls},o.createElement("button",{className:oD(v?[tD().dialogButton,tD().dialogButtonSelected]:tD().dialogButton),onClick:function(){n({editableByOthers:!0}),g(!0)}},"Yes"),o.createElement("button",{className:oD(v?tD().dialogButton:[tD().dialogButton,tD().dialogButtonSelected]),onClick:function(){n({editableByOthers:!1}),g(!1)}},"No"))),o.createElement("button",{className:tD().dialogButton,onClick:y},"Go!")))};var sD=n(3277),uD=n.n(sD);function lD(t){return(lD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cD(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function hD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?hD(Object(n),!0).forEach((function(e){_D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function pD(t,e,n,r,i,o,a){try{var s=t[o](a),u=s.value}catch(t){return void n(t)}s.done?e(u):Promise.resolve(u).then(r,i)}function dD(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){pD(o,r,i,a,s,"next",t)}function s(t){pD(o,r,i,a,s,"throw",t)}a(void 0)}))}}function mD(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vD(t,e){return(vD=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function gD(t,e){return!e||"object"!==lD(e)&&"function"!=typeof e?yD(t):e}function yD(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bD(t){return(bD=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xD=n(4495),wD=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vD(t,e)}(d,t);var e,n,r,i,a,s,u,l,c,h,f,p=(h=d,f=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,e=bD(h);if(f){var n=bD(this).constructor;t=Reflect.construct(e,arguments,n)}else t=e.apply(this,arguments);return gD(this,t)});function d(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),_D(yD(e=p.call(this,t)),"togglePlay",(function(){console.log("toggle"),Kw.toggle(),e.updatePlayStatus(Kw.isRunning),e.setState({isOn:Kw.isRunning})})),_D(yD(e),"toggleProfile",(function(){e.setState((function(t){return{profileOpened:!t.profileOpened}}))})),_D(yD(e),"toggleSettings",(function(){e.setState((function(t){return{settingsAreOpen:!t.settingsAreOpen}}))})),_D(yD(e),"activateTone",dD(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Gs();case 2:e.setState({toneActivated:!0}),e.initiateCollaboration();case 4:case"end":return t.stop()}}),t)})))),e.state={isOn:"started"===xh.state,settingsAreOpen:!1,profileOpened:!1,toneActivated:"running"===Ph.state,bringRoundsDialogOpened:!1,bringRoundConfig:{round:null,editableByOthers:!1}},e.listenForDerivative=e.listenForDerivative.bind(yD(e)),e.finishBringRoundDialog=e.finishBringRoundDialog.bind(yD(e)),e.updateBringRoundConfig=e.updateBringRoundConfig.bind(yD(e)),e.handleLocalRoundUpdate=e.handleLocalRoundUpdate.bind(yD(e)),e.throttleLock=null,e.rounChangeFromBackend=!1,e.throttleQueue=0,e}return e=d,(n=[{key:"componentDidMount",value:function(){this.firebase=this.context,this.state.toneActivated?this.initiateCollaboration():this.props.toggleLoader(!1)}},{key:"initiateCollaboration",value:(c=dD(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.props.match.params.id,this.firebase.db.collection("collaborations").doc(e).onSnapshot((function(t){var e=fD({id:t.id},t.data());n.props.setCollaboration(e)})),this.props.toggleLoader(!1);case 3:case"end":return t.stop()}}),t,this)}))),function(){return c.apply(this,arguments)})},{key:"listenForDerivative",value:function(t){var e=this;this.firebase.db.collection("rounds").doc(t).onSnapshot((function(t){if(t.data()&&!t.metadata.hasPendingWrites){var n=fD({id:t.id},t.data());e.rounChangeFromBackend=!0,e.props.setRoundData(n)}}))}},{key:"throttle",value:function(){var t=this;this.throttleLock=!0,setTimeout((function(){var e=t.props.collaboration,n=fD(fD({},t.props.round),{},{user:e.creator,id:e.derivative,lastEditor:t.props.user.id});t.firebase.updateRound(e.derivative,n),t.throttleQueue?(t.throttleQueue=0,t.throttle(t.props.round)):t.throttleLock=!1}),1e3)}},{key:"addDerivative",value:(l=dD(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=ae(),n=fD(fD({},this.props.collaboration),{},{derivative:e}),t.next=4,this.firebase.updateCollaboration(n.id,n);case 4:this.props.setCollaboration(n),r=fD(fD({},this.props.round),{},{id:e}),this.firebase.createRound(e,r),this.listenForDerivative(n.derivative),console.log("listenForDerivative");case 9:case"end":return t.stop()}}),t,this)}))),function(){return l.apply(this,arguments)})},{key:"updateUserInContributors",value:function(){var t=this.props,e=t.collaboration,n=t.user,r=fD(fD({},e.contributors),{},_D({},n.id,{color:n.color}));this.firebase.updateCollaboration(e.id,{contributors:r})}},{key:"handleLocalRoundUpdate",value:function(t){if(this.rounChangeFromBackend)this.rounChangeFromBackend=!1;else if(!xD.isEmpty(t)){var e=this.props,n=e.collaboration,r=e.user;if(n.derivative){if(this.throttleLock)return void(this.throttleQueue=1);this.throttle()}else this.addDerivative();r.id&&!n.contributors[r.id]&&this.updateUserInContributors()}}},{key:"initialSetup",value:(u=dD(regeneratorRuntime.mark((function t(){var e,n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.props,n=e.collaboration,r=e.user,!n.derivative){t.next=6;break}this.listenForDerivative(n.derivative),console.log("listenForDerivative"),t.next=11;break;case 6:return t.next=8,this.firebase.getRound(n.round);case 8:i=t.sent,this.rounChangeFromBackend=!0,this.props.setRoundData(i);case 11:r.email&&n.creator!==r.id&&!n.contributors[r.id]&&this.setState({bringRoundsDialogOpened:!0}),r.color&&n.contributors[r.id]!==r.color&&this.updateUserInContributors();case 13:case"end":return t.stop()}}),t,this)}))),function(){return u.apply(this,arguments)})},{key:"handleCollabChanges",value:(s=dD(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!xD.isEmpty(e)){t.next=2;break}return t.abrupt("return");case 2:"isPlaying"in e&&this.state.isOn!==e.isPlaying&&this.togglePlay(),this.props.round?"derivative"in e&&(this.listenForDerivative(e.derivative),console.log("listenForDerivative")):this.initialSetup();case 4:case"end":return t.stop()}}),t,this)}))),function(t){return s.apply(this,arguments)})},{key:"handleUserChanges",value:function(t){xD.isEmpty(t)||"color"in t&&this.updateUserInContributors()}},{key:"componentDidUpdate",value:(a=dD(regeneratorRuntime.mark((function t(e){var n,r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(0,Bp.diff)(e.round,this.props.round),r=(0,Bp.diff)(e.user,this.props.user),i=(0,Bp.diff)(e.collaboration,this.props.collaboration),this.handleLocalRoundUpdate(n),this.handleUserChanges(r),this.handleCollabChanges(i);case 6:case"end":return t.stop()}}),t,this)}))),function(t){return a.apply(this,arguments)})},{key:"updatePlayStatus",value:(i=dD(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.firebase.updateCollaboration(this.props.collaboration.id,{isPlaying:e});case 2:case"end":return t.stop()}}),t,this)}))),function(t){return i.apply(this,arguments)})},{key:"updateBringRoundConfig",value:function(t){this.setState((function(e){return{bringRoundConfig:fD(fD({},e.bringRoundConfig),t)}}))}},{key:"finishBringRoundDialog",value:function(){this.setState({bringRoundsDialogOpened:!1}),this.state.bringRoundConfig.round&&this.addCollaboratorRound()}},{key:"addCollaboratorRound",value:(r=dD(regeneratorRuntime.mark((function t(){var e,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.props.toggleLoader(!0),(r=this.state.bringRoundConfig.round.layers,e=function(t){if(Array.isArray(t))return cD(t)}(r)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(r)||function(t,e){if(t){if("string"==typeof t)return cD(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?cD(t,e):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(t){t.creator=n.props.user.id,t.readonly=!n.state.bringRoundConfig.editableByOthers})),this.props.addRoundLayers(e),this.props.toggleLoader(!1);case 5:case"end":return t.stop()}var r}),t,this)}))),function(){return r.apply(this,arguments)})},{key:"componentWillUnmount",value:function(){console.log("collaboration component getting unmounted"),this.props.resetRaycasterStore(),this.props.resetCameraStore(),this.props.resetEditingModeStore(),this.props.resetLoaderStore(),this.props.resetCollaborationStore()}},{key:"render",value:function(){return o.createElement(o.Fragment,null,o.createElement(bd,{onModalClose:this.toggleProfile,isOpen:this.state.profileOpened},o.createElement(Xw,null)),o.createElement(bd,{onModalClose:this.activateTone,isOpen:!this.state.toneActivated},o.createElement("button",{onClick:this.activateTone,className:uD().toneButton},"Click me and have fun ;)")),o.createElement(bd,{allowCloseByClickOutside:!1,onModalClose:this.finishBringRoundDialog,isOpen:this.state.bringRoundsDialogOpened},o.createElement(aD,{onFinishDialog:this.finishBringRoundDialog,updateBringRoundConfig:this.updateBringRoundConfig,firebase:this.firebase,toggleLoader:this.props.toggleLoader})),this.props.round&&this.state.toneActivated&&o.createElement("div",{className:uD().mainContainer},o.createElement(zR,{isOn:this.state.isOn}),o.createElement(Um,{user:this.firebase?this.firebase.currentUser:{},mode:"collaboration",isOn:this.state.isOn,shareRound:this.shareRound,toggleProfile:this.toggleProfile,togglePlay:this.togglePlay,toggleSettings:this.toggleSettings,toggleSidebar:this.toggleSidebar}),o.createElement(Wm,{isActive:this.state.settingsAreOpen})))}}])&&mD(e.prototype,n),d}(o.Component);_D(wD,"contextType",Zd);const ED=qt((function(t){return{round:t.round,user:t.user,collaboration:t.collaboration}}),{setRoundData:fn,toggleLoader:cn,resetRaycasterStore:an,resetCameraStore:ln,resetEditingModeStore:un,resetLoaderStore:sn,resetCollaborationStore:function(){return{type:Se}},addRoundLayers:function(t){return{type:qe,payload:{layers:t}}},setCollaboration:function(t){return{type:Je,payload:{collaboration:t}}}})(tt(wD));var SD=n(5584),TD=n.n(SD);function AD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function MD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?AD(Object(n),!0).forEach((function(e){CD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):AD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function CD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(5906);const OD=qt((function(t){return{loaderActive:t.loader.active,user:t.user}}),{toggleLoader:cn,setUser:gn})((function(t){var e=t.loaderActive,n=t.toggleLoader,r=t.user,i=t.setUser,a=(0,o.useContext)(Zd);(0,o.useEffect)((function(){return n(!0),a.onUserUpdatedObservers.push((function(t){if(a.currentUser){var e=JSON.parse(a.currentUser.displayName);console.log("user: ",r),i(MD(MD({},r),{},{id:t.uid,email:t.email},e))}else{var n=localStorage.getItem("color"),o=localStorage.getItem("id");n||(console.log("assign anonymous color"),n=me(),localStorage.setItem("color",n)),o||(console.log("assign anonymous id"),o=ae(),localStorage.setItem("id",o)),console.log("no user present, retrieve from localstorage or create",{id:o,color:n}),i({id:o,color:n})}})),function(){console.log("main component unmount")}}),[]);var s=function(){n(!1)};return o.createElement("div",{className:TD().container},o.createElement(bn(),{className:TD().loader,type:"Puff",color:"#00BFFF",height:100,width:100,visible:e}),r&&o.createElement(et,null,o.createElement(J,null,o.createElement(Y,{exact:!0,from:"/",to:"/login"}),o.createElement($,{path:"/login",render:function(){return o.createElement($R,{onRouteReady:s})}}),o.createElement(Mn,{path:"/session",authenticated:a.currentUser,component:ZR}),o.createElement($,{path:"/collaboration/:id",render:function(){return o.createElement(ED,null)}}))))}));var PD="orthographic",kD="steps",ID=!1;function LD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function RD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?LD(Object(n),!0).forEach((function(e){DD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function DD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ND={active:!1};function FD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?FD(Object(n),!0).forEach((function(e){UD(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):FD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function UD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var zD={active:!0},BD=n(8101),VD=n.n(BD);function HD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var GD=null,WD=function(t,e,n,r,i,o){return VD()(t,{layers:HD({},r,{steps:HD({},i,HD({},e,{$set:n}))}),lastEdition:{$set:{unit:"step",layerIndex:r,stepIndex:i}},lastEditor:{$set:o}})};function qD(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var XD=[],YD=null,QD=null;function ZD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function KD(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ZD(Object(n),!0).forEach((function(e){$D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZD(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var JD={contributors:{},layers:{},steps:{},layerControls:{},round:{}};const tN=function t(e,n,r){var i;if("function"==typeof n&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof n&&void 0===r&&(r=n,n=void 0),void 0!==r){if("function"!=typeof r)throw new Error("Expected the enhancer to be a function.");return r(t)(e,n)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var o=e,a=n,s=[],u=s,l=!1;function c(){u===s&&(u=s.slice())}function h(){if(l)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return a}function f(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(l)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribelistener for more details.");var e=!0;return c(),u.push(t),function(){if(e){if(l)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribelistener for more details.");e=!1,c();var n=u.indexOf(t);u.splice(n,1),s=null}}}function p(t){if(!Pt(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(l)throw new Error("Reducers may not dispatch actions.");try{l=!0,a=o(a,t)}finally{l=!1}for(var e=s=u,n=0;n<e.length;n++)(0,e[n])();return t}function d(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");o=t,p({type:Ot.REPLACE})}function m(){var t,e=f;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(h())}return n(),{unsubscribe:e(n)}}})[Mt.Z]=function(){return this},t}return p({type:Ot.INIT}),(i={dispatch:p,subscribe:f,getState:h,replaceReducer:d})[Mt.Z]=m,i}(function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r];"function"==typeof t[i]&&(n[i]=t[i])}var o,a=Object.keys(n);try{!function(t){Object.keys(t).forEach((function(e){var n=t[e];if(void 0===n(void 0,{type:Ot.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:Ot.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+Ot.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(n)}catch(t){o=t}return function(t,e){if(void 0===t&&(t={}),o)throw o;for(var r=!1,i={},s=0;s<a.length;s++){var u=a[s],l=n[u],c=t[u],h=l(c,e);if(void 0===h){var f=kt(u,e);throw new Error(f)}i[u]=h,r=r||h!==c}return(r=r||a.length!==Object.keys(t).length)?i:t}}({loader:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ND,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case _e:return console.log("reset"),ND;case Te:return RD(RD({},t),{},{active:e.payload.active});default:return t}},raycaster:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case be:return console.log("reset"),zD;case Ae:return jD(jD({},t),{},{active:e.payload.active});default:return t}},round:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:GD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ye:return console.log("reset"),GD;case Re:var n=e.payload.data;return n;case De:var r=e.payload,i=r.layerIndex,o=r.stepIndex,a=r.isOn,s=r.user;return WD(t,"isOn",a,i,o,s);case Ne:var u=e.payload,l=u.layerIndex,c=u.stepIndex,h=u.velocity,f=u.user;return WD(t,"velocity",h,l,c,f);case Fe:var p=e.payload,d=p.layerIndex,m=p.stepIndex,v=p.probability,g=p.user;return WD(t,"probability",v,d,m,g);case je:var y=e.payload,b=y.layerIndex,_=y.stepIndex,x=y.note,w=y.user;return WD(t,"note",x,b,_,w);case Ue:var E=e.payload,S=E.isActive,T=E.layerIndex,A=E.user;return VD()(t,{layers:HD({},T,{isActive:{$set:S}}),lastEditor:{$set:A},lastEdition:{$set:{unit:"layer",layerIndex:T}}});case Ge:var M=e.payload,C=M.layerIndex,O=M.steps,P=M.user;return VD()(t,{layers:HD({},C,{steps:{$set:O}}),lastEditor:{$set:P},lastEdition:{$set:{unit:"layer",layerIndex:C}}});case Ve:var k=e.payload,I=k.layerIndex,L=k.step,R=k.user;return VD()(t,{layers:HD({},I,{steps:{$push:[L]}}),lastEditor:{$set:R},lastEdition:{$set:{unit:"layer",layerIndex:I}}});case He:var D=e.payload,N=D.layerIndex,F=D.stepIndex,j=D.user;return VD()(t,{layers:HD({},N,{steps:{$splice:[[F,1]]}}),lastEditor:{$set:j},lastEdition:{$set:{unit:"layer",layerIndex:N}}});case ze:var U=e.payload,z=U.layerIndex,B=U.name,V=U.user;return VD()(t,{layers:HD({},z,{name:{$set:B}}),lastEditor:{$set:V},lastEdition:{$set:{unit:"layerControls",layerIndex:z}}});case Be:var H=e.payload,G=H.layerIndex,W=H.instrument,q=H.user;return VD()(t,{layers:HD({},G,{instrument:{$merge:W}}),lastEditor:{$set:q},lastEdition:{$set:{unit:"layerControls",layerIndex:G}}});case We:var X=e.payload,Y=X.layer,Q=X.user;return VD()(t,{layers:{$push:[Y]},lastEditor:{$set:Q},lastEdition:{$set:{unit:"layer",layerIndex:t.layers.length}}});case Xe:var Z=e.payload,K=Z.layerIndex,$=Z.user;return VD()(t,{layers:{$splice:[[K,1]]},lastEditor:{$set:$},lastEdition:{$set:{unit:"layer",layerIndex:K}}});case qe:var J=e.payload.layers;return VD()(t,{layers:{$push:J}});case Ye:var tt=e.payload,et=tt.name,nt=tt.user;return VD()(t,{name:{$set:et},lastEditor:{$set:nt},lastEdition:{$set:{unit:"round"}}});case Qe:var rt=e.payload,it=rt.bpm,ot=rt.user;return VD()(t,{bpm:{$set:it},lastEditor:{$set:ot},lastEdition:{$set:{unit:"round"}}});case Ze:var at=e.payload.id;return VD()(t,{id:{$set:at}});default:return t}},rounds:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:XD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case ge:return console.log("reset"),XD;case Pe:return e.payload.rounds;case Le:var n=e.payload,r=n.round,i=n.roundIndex;return VD()(t,qD({},i,{$merge:r}));case ke:return VD()(t,{$push:[e.payload.round]});case Ie:return VD()(t,{$splice:[[e.payload.roundIndex,1]]});default:return t}},camera:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:PD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ee:return console.log("reset"),PD;case Me:return e.payload.camera;default:return t}},editingMode:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case xe:return console.log("reset"),kD;case Ce:return e.payload.mode;default:return t}},editAllLayers:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ID,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case we:return ID;case Oe:return e.payload.value;default:return t}},user:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:YD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Ke:return e.payload.user;case $e:return YD;default:return t}},collaboration:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:QD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case Je:return e.payload.collaboration;case Se:return QD;default:return t}},positions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:JD,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case tn:return VD()(t,{contributors:{$set:e.payload.contributors}});case en:return VD()(t,{layers:{$set:e.payload.layers}});case nn:var n=KD(KD({},t.steps),{},$D({},e.payload.layerIndex,e.payload.steps));return KD(KD({},t),{},{steps:n});case rn:var r=e.payload,i=r.layerIndex,o=r.controls;return VD()(t,{layerControls:$D({},i,{$set:o})});case on:return VD()(t,{round:{$set:e.payload.round}});default:return t}}}));a.render(o.createElement(mt,{store:tN},o.createElement(Zd.Provider,{value:new function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),rm(this,"doCreateUserWithEmailAndPassword",(function(t,n){return e.auth.createUserWithEmailAndPassword(t,n)})),rm(this,"doSignInWithEmailAndPassword",(function(t,n){return e.auth.signInWithEmailAndPassword(t,n)})),rm(this,"doSignOut",(function(){return e.auth.signOut()})),rm(this,"doPasswordReset",(function(t){return e.auth.sendPasswordResetEmail(t)})),rm(this,"doPasswordUpdate",(function(t){return e.auth.currentUser.updatePassword(t)})),rm(this,"setOnUserUpdated",(function(t){return e.onUserUpdated=t})),rm(this,"getRound",function(){var t=nm(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.db.collection("rounds").doc(n).get();case 3:return r=t.sent,t.abrupt("return",tm({id:r.id},r.data()));case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),rm(this,"createRound",function(){var t=nm(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.db.collection("rounds").doc(n).set(r,{merge:!1});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()),rm(this,"updateRound",function(){var t=nm(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.db.collection("rounds").doc(n).set(r,{merge:!0});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()),rm(this,"getCollaboration",function(){var t=nm(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.db.collection("collaborations").doc(n).get();case 3:return r=t.sent,t.abrupt("return",tm({id:r.id},r.data()));case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()),rm(this,"updateCollaboration",function(){var t=nm(regeneratorRuntime.mark((function t(n,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.db.collection("collaborations").doc(n).set(r,{merge:!0});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}()),$d().initializeApp(im),this.app=$d(),this.currentUser=null,this.auth=$d().auth(),this.db=$d().firestore(),this.firestore=$d().firestore,this.onUserUpdatedObservers=[],$d().auth().onAuthStateChanged((function(t){t?(e.currentUser=t,e.onUserUpdatedObservers.map((function(e){return e(t)}))):(e.currentUser=null,e.onUserUpdatedObservers.map((function(t){return t({})})))}))}},o.createElement(OD,null))),document.getElementById("root"))})()})();